---

title: Dual-mode network
abstract: Aspects of the present disclosure are directed toward apparatuses, systems, and methods that include a first gateway circuit in an optical access network connecting a plurality of end-of-network users to a central node, the first gateway circuit connecting one of the plurality of end-of-network users to the central node via fiber optic data lines. Further, the first gateway circuit is configured and arranged to: relay a first set of data between the end-of-network user and the central node using a packet-switching communication protocol, and relay a second set of data between the end-of-network user and the central node using an optical flow switching communication protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09602311&OS=09602311&RS=09602311
owner: The Board of Trustees of the Leland Stanford Junior University
number: 09602311
owner_city: Stanford
owner_country: US
publication_date: 20150206
---
This application claims the benefit under 35 U.S.C. 119 e of U.S. Provisional Patent Application Ser. No. 61 936 629 filed on Feb. 6 2014 and with ten Appendices this provisional patent document and its appendices are fully incorporated herein by reference.

This invention was made with Government support under contract 1111374 awarded by the National Science Foundation. The U.S. Government has certain rights in the invention.

For over half a century store and forward Electrical Packet Switching EPS with Layer 3 routing has been regarded as an efficient solution for relatively low to medium high speed data transmission 1 Gb s . However the proliferation of bandwidth intensive applications such as high definition HD video streaming large file transfer and high speed data transmission many Gbps have been challenging the internet protocol IP routing overhead and EPS throughput. Optical Flow Switching OFS has been proposed as an efficient alternative to packet switching. OFS uses dedicated lightpaths and bypasses IP routers to enable efficient end to end optical communication for high volume transmission. For general information regarding OFS reference may be made to Chan V. W. S Optical Flow Switching Networks Proc. IEEE 100 5 1079 1091 2012 which is fully incorporated by reference herein. These and other matters have presented challenges to data transmissions for a variety of applications.

Various example embodiments are directed to an optical access network architecture that provides dual mode service that allows packet switching communications and OFS communications in the same optical distribution network ODN . The present disclosure is exemplified in a number of implementations and applications some of which are summarized below.

According to an example embodiment an apparatus includes a first gateway circuit in an optical access network connecting a plurality of end of network users to a central node the first gateway circuit connecting one of the plurality of end of network users to the central node via fiber optic data lines. The first gateway circuit is configured and arranged to relay a first set of data between the end of network user and the central node using a packet switching communication protocol and relay a second set of data between the end of network user and the central node using an optical flow switching communication protocol. In one such apparatus embodiment the apparatus includes an optical flow network unit located at a location of the end of network user and configured and arranged to communicate data between the end of network user and the central node via the first gateway circuit using the optical flow switching communication protocol and a packet switching network unit located at a location of the end of network user and configured and arranged to communicate data between the end of network user and the central node via the first gateway circuit using the packet switching communication protocol.

Another apparatus embodiment includes a communication circuit configured and arranged to communicate data in an access network connecting a plurality of end of network users to a central node. The communication circuit has an optical flow network unit configured and arranged to communicate data between an end of network user and the central node in the access network using an optical flow switching communication protocol and a packet switching network unit configured and arranged to communicate data between the end of network user and the central node in the access network using a packet switching communication protocol.

The above discussion summary is not intended to describe each embodiment or every implementation of the present disclosure. The figures and detailed description that follow also exemplify various embodiments.

While various embodiments discussed herein are amenable to modifications and alternative forms aspects thereof have been shown by way of example in the drawings and will be described in detail. It should be understood however that the intention is not to limit the disclosures to the particular embodiments described. On the contrary the intention is to cover all modifications equivalents and alternatives falling within the scope of the disclosure including aspects defined in the claims. In addition the term example as used throughout this application is only by way of illustration and not limitation.

Aspects of the present disclosure are believed to be applicable to a variety of different types of apparatuses systems and methods involving dual mode communication in an access network. While not necessarily so limited various aspects may be appreciated through a discussion of examples using this context. In certain implementations aspects of the present disclosure have been shown to be beneficial when used in context for communicating data to and from an end of network user in an access network using a dual mode communication protocol. For example in some embodiments an apparatus is configured for dual mode communication of data in an access network between an end of network user and a central node e.g. a central office CO . More specifically the apparatus is configured to transmit relay data between the end of network user and the central node using either a packet switching communication protocol e.g. the IP or an OFS communication protocol. For ease of reference communications with the OFS communication protocol may be referred to as flow switching connections or flow connections and such terms may be used interchangeably herein. While not necessarily so limited various aspects may be appreciated through a discussion of examples using such exemplary contexts.

Unlike EPS no buffering occurs between the source and destination for flow switching connections. A single flow switching connection is envisioned to remain in the network for a time period larger than 100 milliseconds ms for example. The scheduling of flow switching connections is conducted using a centralized core scheduler and network edge schedulers which are coordinated through an electronic control plane typically via legacy IP .

An optical access network architecture is disclosed that enables the OFS services and packets switching services over the same ODN to offer dual mode Internet access for its end of network users packet switching and OFS. For ease of reference the disclosed dual mode network architecture may be referred to as the UltraFlow Access architecture.

In some embodiments packet switching service is enabled via a legacy passive optical network PON that is integrated with the OFS service using new integrated optical access network architecture. For ease of explanation the examples herein are primarily described with reference to a dual mode network configured to communicate data using either of two communication protocols namely a packet switching communication protocol and an OFS communication protocol. However the contemplated embodiments are not so limited. Rather the examples and embodiments may be adapted to provide a multi mode network configured to communicate data using any of three or more communication protocols.

In this example the gateways at the end of network user locations are connected to a shared fiber optic line by a splitter. Each gateway is configured to relay the data communicated with the optical flow switching communication protocol between the OFNU and the central office via the splitter and fiber optic line. In this example the gateway is also configured to relay the data communicated with the packed switching communication protocol between the ONU and the central office via the fiber network. However in some embodiments packet switching data may alternatively additionally be communicated via another packed switching network e.g. an electrical IP network .

At the central office another gateway circuit routes packet switching data to an optical line terminal OLT and routes flow switching data to an optical flow line terminal OFLT . OFLT is responsible for managing the OFNUs and for scheduling the optical flow requests sent by the OFNUs. When applicable the OFLT communicates the flow switching data over a packet switching network portion of a core network to end of network users in another packet switching network. The OLT communicates the packet switching data over a packet switching network portion of a core network to end of network users in another packet switching network.

Communication in an access network can be classified as either Inter PON or Intra PON. Inter PON communication refers to a scenario where the sender and receiver are located in different access networks which are connected via the metro core. Intra PON Flow communication refers to a scenario where the sender and receiver are located in the same access network.

In this example Intra PON communication is enabled via a reflection point and medium. The reflection point is located at the central office right before the gateway and the reflection medium consists of an optical add drop multiplexer OADM a circulator and a semiconductor optical amplifier SOA .

As indicated above Intra PON communication may be enabled by a reflection point included in the access network. The reflection point may be located at various points between a splitter and the gateway. In some embodiments the reflection point may be located after the passive splitter. This location for the reflection point may not be suitable for already deployed PON infrastructures as the installation cost can be high. However several features such as low link loss and low power penalty can make it a promising solution. In some other embodiments the reflection point is located at the central office right before the gateway at node. The reflection medium may consist of for example an optical add drop multiplexer OADM a circulator and a semiconductor optical amplifier SOA . This second location for the reflection point may have lower installation cost as all the operations happen in the CO. However this second location requires amplifiers to compensate for double distance fiber attenuation and twice the splitter loss. The second location may also exhibit power loss caused by stronger reflections e.g. optical return loss ORL from fiber connectors and fiber Rayleigh backscattering RBS .

The ONU OFNU and Gateway may be integrated into various devices in different embodiments. In some embodiments the ONU the OFNU and the Gateway are integrated in a single dual mode device. In some embodiments the OFNU and Gateway are integrated in a single device where the interconnection with the ONU is external. In some embodiments the ONU and gateway are integrated in a single device and connect externally to the OFNU. Similarly the OLT the OFLT and the Gateway at the central office may be integrated into various devices in different implementations applications. In other embodiments the OLT the OFLT and the Gateway are integrated in a single dual mode device. In some embodiments the OFLT and the Gateway are integrated in a single device such that the interconnection with the OLT is external. Likewise in a number of embodiments the OLT and the Gateway are integrated in a single device and connect externally to the OFLT.

For ease of explanation the examples herein are primarily described with reference to an optical access network having optical fiber data lines connected to end of network user locations. However the embodiments are not so limited. For instance the examples may be applied to a hybrid fiber coaxial access network e.g. AT T U verse where an optical connection from the ISP reaches the curb and a copper coaxial connection is used to communicate data between the optical connection and a home building of the end of network user. In this architecture the OFNU is implemented in a switch node at the curb that transfers from the optical media to the copper one. For instance a large file may be downloaded in the downstream scenario to the OFNU at the curb and then quickly delivered to the end of network user over copper by maxing out the connection e.g. using vectoring techniques over DSL which achieves speeds up to 1 Gbps . The delivery of the data file over the copper domain of the network can either be done through an existing packet switching connection e.g. an IP connection or via a sub channel coexisting with the legacy IP connection .

While examples are primarily described with reference to OFNUs connected to a core network via an access network embodiments are not so limited. In some embodiments OFNUs reside in and can be connected to the core network directly. These OFNUs may be controlled via a core scheduler server. This configuration may be used to improve communication speed in the core network.

Various embodiments may utilize different mechanisms to determine whether to communicate the data using the packed switching communication protocol by the packet switching ONU or using the OFS communication protocol by the OFNU . In some embodiments the determination is controlled by a control signal provided by an end of network user or client application on an end of network user machine. In other embodiments the determination is made using a selection algorithm that determines whether to use the packed switching communication protocol or the OFS communication protocol based on various parameters characteristics. For example the selection algorithm may determine whether or not to use the OFNU for upstream downstream communication based on file size IP network wide traffic congestion current and or historic bit error rates on flow switching channel current and or historic quality of service deadlines and the user s permissiveness to miss the deadline and or contracted service level e.g. service level agreement pricing etc. . Other parameters characteristics may additionally or alternatively be used as well. The selection algorithm may be a deterministic algorithm or may be a self learning algorithm configured to adapt its behavior to the usage patterns and preferences of a user s .

As previously discussed according to a number of embodiments the access network includes a plurality of end of network users each connected to a fiber network by a respective optical network unit ONU a respective optical flow network unit OFNU and a respective gateway. The OFNU is the ingress egress node of the entire UltraFlow access network and is responsible for the coordination of packet switching and optical flow switching access for the end of network users. The OFNU can be a standalone device attached to multiple backend users an integrated box that includes the ONU functionalities or a flow switching network interface card NIC installed on single machine.

An OFNU controller interconnects the flow and IP adapters and constantly monitors the IP traffic so as to process corresponding control messages for flow switching connections while passing through the regular packet switched data e.g. IP packets . If a flow switching connection is initialized the flow switching connection request is queued and maintained at the OFNU controller until it is granted or declined. Once the flow connection request is granted the end of network user is updated with the allocated start time and wavelength. At the transmission instant start time the controller instructs the flow network adapter to tune into the assigned wavelength and it sends a turn off signal to the adapter once the grant i.e. time slot expires. Unlike the ONU no buffering occurs at the OFNU.

The example shown in includes three different OFNU architectures that may be used in various embodiments. OFNU consists of a 10 Gbps tunable transceiver a flow NIC and a fixed optical filter. The OFNU architecture shown in OFNU may be referred to as a colored design. The colored design provides a cheap and easy implementation. OFNU contains the same components as OFNU except for a tunable filter covering the C band which offers flexibility for the downstream flow switching transmission. The OFNU architecture shown in OFNU may be referred to as a partial colorless design. Unlike OFNU and OFNU OFNU employs a circulator to separate upstream and downstream flow switching traffic and a 3 port Gateway to combine separate packet switching and flow switching traffic which offers full flexibility in wavelength assignment for bi directional flow switching connections. The OFNU architecture shown in OFNU may be referred to as a full colorless design. The proposed colored and colorless OFNUs provide a tradeoff between flexibility and cost. Thus the OFNU design can depend on the end of network user requirements and installation and operation costs.

In some embodiments the OFNU may include one or more additional port to those shown . For example the OFNU may include ports to connect to a game console e.g. XBOX PS3 4 etc. to transfer video games and media files. Some specific ports that may be provided include but are not limited to component video port HDMI ports or DisplayPorts to connect to a TV and directly watch movies shows USB ports Ethernet ports Thunderbolt ports and or eSATA ports.

In some OFS approaches the access network is assumed to be a transparent continuation of the metro area core networks thereby having all the access network components fully transparent to the core and edge schedulers. However transceivers at customer premises may not be able to operate on all the wavelengths available in metro area core networks. Enforcing a single wavelength across the whole network may increase the blocking probability of flow connection requests thereby decreasing the network utilization. Also the network is typically segmented and operated by different service providers e.g. the core network by one provider the metro area network by another provider and the Access network by yet another provider . Accordingly local resources of each segment cannot be easily exposed to other segments in many configurations. In some embodiments the OFLT is used as an interface to provide flexible and localized i.e. in the Access domain flow network management and operation.

Similar to the OFNU the OFLT can either be a standalone device connected to the PON s OLT through copper wire as in our testbed in or it could be part of a new device that integrates the functionalities of both the OLT and OFLT. shows the schematic illustration of a standalone OFLT. One of its main functions is to manage the flow users in the UltraFlow Access network. Whenever an OFNU is newly connected to the UltraFlow Access network it needs to be registered at the OFLT through a network discovery procedure similar to the one applied in legacy IP PON. User information such as the supported wavelength s transmission rate and reconfiguration time of each OFNU is maintained at the OFLT.

As part of its interfacing function the OFLT captures all of the flow connection requests originated by the OFNUs and then generates requests to the edge scheduler based on the flow information in the OFNU request. By doing so the access network operator can effectively prevent disclosure of unnecessary user information to operators of metro area and core area network operators. Aggregation of flow switching traffic may also be implemented by sending a single request for multiple flow switching transmission periods to the edge scheduler. To eliminate the wavelength continuity constraint and thus reduce the flow connection request blocking probability optical to electrical to optical OEO conversion devices are installed at the OFLT. Different wavelengths can be assigned in the UltraFlow access network in the same manner as in the MAN WAN. In addition optical performance monitoring functions e.g. the optical signal to noise ratio wavelength drift etc. can also be implemented in the OFLT.

In the OFLT includes an IP NIC a 3 dB coupler several 10 Gbps C band tunable transceivers these define the access network capacity e.g. 20 Gbps for two transceivers in tunable filters and circulators.

Each gateway in various embodiments includes a circuit connecting one of the plurality of end of network users to the central node via fiber optic data lines. Example gateways include a 4 port and 3 port gateways among others. The 4 port and 3 port gateways see and B are designed and implemented to separate combine packet switching transmissions e.g. IP protocol and optical flow switching transmissions based on different wavelengths utilized in both services. The gateway separates downstream packet switching data from downstream flow switching data based on a frequency band used for the communication. Conversely the gateway combines upstream packet switched data with upstream flow switching data based on a frequency band used for the communication. Specifically a packet switching channel utilizes 1310 and 1490 nm for upstream and downstream respectively according to GPON standard whereas flow switching channel uses full C band for communications. The wavelength assignment for the 4 port and 3 port gateways is shown in and D . The main difference between the two is that the former separates the C band into two distinct bands Band 3 for flow downstream and Band 4 for flow upstream whereas with the latter any wavelength on Band 5 can be used bidirectionally.

It is understood that other frequency bands may be used for communication of flow switching data. Moreover in some embodiments the frequency bands used for communication of data in the access network may differ from those used for communication in the MAN or core network. In some embodiments the OFLT may perform wavelength translation between frequency bands used for communication in the Access network wavelengths and frequency bands used for communication in the metro core network. For additional information regarding wavelengths utilized in both services reference may be made to Choi K. M. Moon J. H. Lee J. H. and Lee C. H. An Evolution Method from a TDM PON with a Video Overlay to a WDM PON IEEE Photonics Technol. Lett. 20 4 312 314 2008 and ITU T Study Group 15 Gigabit capable passive optical networks GPON General characteristics Recommendation ITU T G.984.1 1 33 2008 both of which are fully incorporated by reference herein.

For example in some embodiments an apparatus comprising a gateway circuit in an optical access network connects one of a plurality of end of network users to a central node via fiber optic data lines. The gateway circuit is configured and arranged to relay a first set of data between the end of network user and the central node using a packet switching communication protocol e.g. the IP or an OFS communication protocol. The gateway relays data over the fiber optic data lines in various embodiments using a plurality of frequency bands. As illustrated by for the data communicated using the packet switching communication protocol the gateway circuit is configured and arranged to relay data over the fiber optic data lines using a first set of frequency bands. For data communicated using the OFS communication protocol the gateway circuit is configured and arranged to relay the data over the fiber optics lines using a scheduled one of a plurality of frequency bands which do not include the first set of frequency bands. The first set of frequency bands in some embodiments includes a first frequency band that is in or overlaps with a frequency range which corresponds to wavelengths between 1260 and 1360 nanometers nm and a second frequency band that is in or overlaps with a frequency range which corresponds to wavelengths between 1484.5 and 1497.5 nm. Further the plurality of frequency bands that are in or overlap with a frequency range include a range which corresponds to wavelengths between 1504.5 and 1620 nm.

The gateway circuit in some embodiments separates downstream data communicated from the central node with the packet switching communication protocol from downstream data communicated from the central node with the OFS communication protocol based on a frequency band used for the communication. Further the gateway circuit combines upstream data communicated from the end of network user with the packet switching communication protocol from upstream data communicated from the end of network user with the OFS communication protocol based on a frequency band used for the communication.

It is understood that the examples and embodiments described herein may be adapted to implement various other features. For example various techniques may be used to encode data for communication in the flow switching channel including but not limited to DWDM OFDM and other any multiplexed techniques.

As another example in some embodiments an OFNU is configured to support multiple end of network users. For instance the OFNU and OFLT are configured for multiplexing in time or frequency domains of requests and flow switching connections for multiple end of network users are connected to the OFNU. Through software virtualization techniques full functionality of the OFNU can be provided to each individual user such that each user thinks he has full control over the complete OFNU box. Intelligent resource scheduling may be implemented in the OFNU operating system level to enable this feature.

As yet another example in some embodiments multiple OFNUs are networked to create a cloud of OFNUs for distributed storage of large files. The location of a file is transparent to the user. Thus files can be stored anywhere and are accessible from everywhere. With the ultra fast sub channel a user can download upload files to the Cloud of OFNUs instantly. A user also does not need to worry about any storage limitations that may be imposed by the design of a particular OFNU box.

The control plan in an UltraFlow network can be designed and or operated in a variety of ways in accordance with various embodiments. The UltraFlow network is ideal for continuous end to end flow switching transmission. Insertion of relatively small control frames into the flow switching data stream could be disruptive and may degrade the channel efficiency. Accordingly in some embodiments the control plane in UltraFlow is operated over legacy IP EPS media which is already optimized for the transmission of small packets. While not so limited for ease of explanation the control plane is primarily discussed with reference to the UltraFlow Access network e.g. control between the OFNUs and the OFLT . For ease of reference control messages for flow switching connections may be referred to as flow control messages.

Two methods are disclosed for support of the flow control messages in IP PONs. In the first method flow control messages are dedicated a separate class of service CoS inside both the ONU and OLT so as to share the allocated PON time slot with other IP CoSs i.e. voice video and data . The second method extends the control protocols of legacy PONs e.g. multipoint control protocol MPCP in EPON and PLOAM in GPON to avoid possible performance penalty caused by the first method due to mixing the flow control traffic with the regular packet switching traffic.

In the first method flow control messages are embedded in the payloads of standard TCP IP applications and are identified by their unique type. This approach requires the ONUs and OLT to filter out the received flow control packets and deliver them to the connected OFNU and OFLT respectively. Flow control packets are considered as a new CoS in IP PON. They are buffered at the ONU and OLT for upstream and downstream transmissions. To ensure low flow control packet latency the flow control queue is set to the highest priority among all IP CoSs.

As mentioned above mixing flow control traffic with regular IP traffic i.e. packet switching traffic may result in performance degradation for both types of service. Some approaches to simulate the effect of mixing flow control traffic with regular traffic use OMNET . In such approaches three IP classes of services namely constant bit rate CBR variable bit rate VBR and best effort BE are transmitted in every Ethernet PON which is the type of PON simulated with and without the presence of flow control packets. All three types of services are modeled using the Pareto distribution with Hurst parameter H 0.8 whereas the arrival rate of flow connection requests is Poisson distributed. To stress test the IP channel an approach can be used with 64 OFNUs connected to the OFLT. Each OFNU has a flow connection request rate of 10 requests second which is an aggressive request rate assuming that a typical flow connection lasts for hundreds of milliseconds. The dynamic bandwidth allocation DBA scheme proposed in Chen B. Chen J. and He S. Efficient and fine scheduling algorithm for bandwidth allocation in Ethernet passive optical networks IEEE J. Sel. Topics Quantum Electron. 12 4 653 660 2006 which is fully incorporated by reference herein is employed to perform intra ONU and inter ONU scheduling it is an advanced DBA scheme that minimizes the packet delay in regular IP PONs. The CBR traffic occupies 20 of the overall IP network load and the rest is evenly divided between VBR and BE. The remaining parameters used for such an approach are listed in Table 1.

Such an approach can result in a maximum delay of only 2 ms for flow control traffic under various IP network loads in both the upstream and downstream directions. illustrates penalty in IP packet delay resulting from the presence of flow control in the network. As shown in the maximum penalty in IP packet delay caused by the flow control packets is below 5 even when the network load reaches 0.9. From this one can conclude that with an intelligent DBA the usage of an IP channel for the operation of the flow control protocol does not impair the quality of service QoS of regular IP traffic. Meanwhile since the intra ONU scheduling scheme attempts to maintain low CBR traffic delay the additional traffic introduced by flow control does not hinder the performance of the ONU scheduler when the network load increases. Therefore the penalty on IP packet delay of CBR traffic slightly decreases for high IP network loads.

As mentioned the second method extends the control protocols of legacy IP PONs so as to eliminate the penalty caused by the first approach. The UltraFlow control protocol is then understood by the ONU and OLT at the expense of making it more complex than the standard protocol. Without loss of generality this method can be applied to the MPCP in EPON. The same concepts can be extended to other PON standard protocols such as the physical layer operations and maintenance PLOAM protocol of GPON.

Compared to the first method the second method for support of flow control messages in IP PONS has minimal to no impact on regular IP service as it integrates the exchange and processing of control messages for both IP services and flow switching services. However amendments to existing PON protocols in the ONUs and OLT are required even if the flow switching service is not employed in all premises. On the other hand the first method only uses minor modifications at the end of network users that are subscribed to the flow switching service. This offers more flexibility in the UltraFlow access deployment at the expense of slight performance degradation in the IP service. Thus this method is more suitable for UltraFlow access deployments in areas that already have massive regular IP PON deployments. An example first method implemented as described by Kramer G. and Mukherjee B Supporting differentiated classes of service in Ethernet passive optical networks IEEE J. Opt. Commun. Netw. 1 8 280 298 2002 which is fully incorporated herein by reference and did not result in any IP service or flow control performance degradation. The disclosed methods for communicating control data may also be applied for use in various networks and are not limited to the specific networks configurations disclosed herein. For instance some example networks that may be adapted to utilize the disclosed methods for communicating control data include but are not limited to optical burst switching OBS networks e.g. with customized schedulers optical transport networks OTNs e.g. with logically centralized control using SDN concepts and data networks offering bandwidth on demand style circuits e.g. using a control plane based on GMPLS and SDN .

Different embodiments may utilize various processes to schedule and establish a flow switching connection between two end of network users. shows a first example process for establishing a flow switching connection using a distributed scheduling protocol. As illustrated in the flow switching connection is initiated by negotiation between two end of network users regarding transmission authorization transmission period etc. through the regular IP channel. Upon agreement the upstream user sends a request to the connected OFNU from where the request is forwarded to OFLT through the IP PON. If the request has an expiration time OFLT checks for available local channels within the time window. In the case that no channel is dispensable within the dual mode access network at the time the OFLT returns a negative acknowledgment NACK to OFNU. Otherwise it is delivered to the edge scheduler. The edge scheduler periodically sends requests for inter MAN connections to the core scheduler that replies with the route and wavelength in WAN. Subsequently the edge scheduler schedules the time slot of each received flow switching connection request and forwards the results to the destination MAN. The edge scheduler also sends the local wavelength assignment along with the transmission time slot to the dual mode access network where the request is originated. Upon the reception of a flow grant OFLT assigns the wavelength for flow switching transmission in the dual mode access as it sees appropriate. During the whole scheduling process if a scheduler finds no available flow switching resources the granted channel will be set to negative one. Both OFNU and OFLT send a Release message after the completion of each flow switching transaction. In contrast the edge schedulers do not send the release message until the granted inter MAN connections have expired.

The scheduling processes may be used to schedule flow connection requests individually or in batches. In some embodiments a scheduler is implemented so all flow connection requests that arrive within a prescribed flow transmission window are aggregated for scheduling in a pre defined transmission window. The scheduling in the OFLT allocates wavelength sessions to each request in a batch using an integer linear programming based batch scheduling. Once the scheduled flow switching transmission starts in some embodiments newly arrived flow connection requests are allocated with previously unoccupied bandwidth on the fly. The transmission window can also be dynamically adjusted according to real time flow switching traffic load.

In a number of embodiments an UltraFlow user can access both the IP and flow media simultaneously. show a dual mode network stack that implemented at the OFNU. For example illustrates the dual mode network stack and illustrates the flow frames. For general information regarding a dual mode network stack and for specific information regarding network aspects that may be implemented in accordance with one or more embodiments reference may be made to Kazovsky L. G. Dhaini A. R. De Leenheer M. Shen T. S. Yin S. and Detwiler B. A. UltraFlow Access Networks A dual mode solution for the access bottleneck ICTON Tu.C3.1 1 4 2013 which is fully incorporated by reference herein. The flow network stack is lightweight and only requires the Application Transport and Physical layers. The Network layer is unnecessary due to the point to point nature of a scheduled flow switching connection between any two OFNUs which are pre registered at the network controller s . Similarly the Data Link layer is not needed. Rather the framing i.e. the construction of a flow frame and error control mechanisms are implemented in the Transport layer.

In some embodiments the Application layer is shared between the TCP IP and flow stacks so as to offer seamless transition from one medium to another. To facilitate this salient UltraFlow feature a plug in may be installed at the receiver side s application e.g. an Internet browser which typically requests to download a large file from the sender s application e.g. an Apache Server which also requires a plug in to identify the type of request using HTTP.

The transport layer protocol is commonly responsible for ensuring reliable delivery of data between any pair of network entities. It is also responsible for performing congestion control and fair resource management. TCP is a prominently and widely used protocol that supports all of these features. However TCP can lead to low throughput and high latency resulting from windowing and timeouts which makes it not suitable for UltraFlow. Furthermore with OFS UltraFlow where connections are scheduled over a reliable physical path i.e. optical fiber the congestion control overhead of TCP becomes inefficient. Hence a new transport plane and protocol is designed to achieve optimal flow throughput. The new protocol must comply with the following salient design principles 1 maximum payload throughput and 2 reliable delivery of data.

The first design principle is achieved by using large flow frames which should theoretically be in the order of thousands of megabytes. For additional information regarding use of large flow frames reference may be made to Huang H. P. Transport layer protocol design over flow switched data networks Thesis S. M. Massachusetts Institute of Technology Dept. Of Electrical Engineering and Computer Science 1 136 2012 which is fully incorporated by reference herein. Unfortunately currently available NICs are constrained by the usage of Ethernet as a Layer 2 protocol. Therefore in order to optimize the flow switching transmission throughput each flow frame may be constructed using multiple 9000 Bytes Jumbo Ethernet frames see . This adds extra overhead to the flow frame and thus may not enable optimal payload throughput.

A flow frame is composed of frame delimiters sequences to signal the start and the end of the frame actual data and potentially some redundant information for error detection and correction see FEC section below . Flow frames may also include identification of the sender and receiver information about the status and or progress of the flow transfer e.g. various counters and information about the status of the sender or the content of the flow transfer.

Flow frame sizes are not necessarily fixed for all flow switching sessions. Rather they may be negotiated between sender and receiver based on processing speed memory availability other capabilities of sender and receiver total size of data transfer congestion level of flow switching network historic or current error rates of flow switching network both historic and current and or application specific requirements such as latency.

In some embodiments flow frames may be created on the fly in the OFNU in response to receiving data from a user for transmission. In some other embodiments flow frames may be created by a user and provided to the OFNU for transmission. Flow frames may also be created by a user and stored in a persistent memory for later retrieval and transmission by the OFNU. This latter embodiment can prove useful to reduce processing requirements in some scenario applications e.g. in case the same data is to be transferred multiple times . Likewise an OFNU at a receiver may decode flow frames or output received flow frames e.g. to a persistent memory for later decoding.

As flow switching transfers are scheduled the elapsed time needed to perform scheduling of flow switching transmission periods and notify the pair of flow users can be used by the sender to start creating flow frames. These flow frames may be stored on persistent storage in the OFNU or on volatile memory such as RAM. Use of volatile memory may be useful where persistent storage is significantly slower than the flow switching channel as typically volatile memory such as RAM is as fast or faster than the flow channel bandwidth.

Various embodiments may be configured to improve the speed at which flow frames may be retrieved from and written to persistent memory. In some embodiments the OFNU may be configured to read write from multiple storage disks in parallel. In applications where persistent storage is not sufficiently fast to feed the flow switching channel at line rate flow frames may be stored in volatile memory. For example in one embodiment a circular buffer of fixed size may be used to facilitate transfer of flow frames to and from the OFNU.

To achieve reliable delivery of data i.e. the second design principle the following techniques may be implemented 1 Cyclic Redundancy Check CRC bits for error detection 2 Forward Error Correction FEC techniques for error correction and 3 Automatic Repeat reQuest ARQ techniques for retransmission of uncorrectable flow frames. These frames can be either retransmitted within the same scheduled time slot or during one in the future.

FEC code may be used to enhance new flow channel transport layer performance e.g. providing reliable channel extending maximum link reach etc. As shown in FEC is encoded at the last stage of transmission similarly an FEC decoder is located at the first stage of the receiver in front of any following process. Two different errors can occur in the fiber channel i.e. random and burst error. Random errors can be generally corrected. Burst errors are handled by interleaving the input bit streams to decorrelate consecutive symbols as in i.e. symbols in any given codeword are transmitted at widely spaced intervals of time usually 5 10 the burst error duration . The FEC may be customized to support large file transfers across the Access metro area and core networks. The FEC process may utilize various FEC codes including but not limited to Reed Solomon codes Cyclic codes or a hybrid combination of the two.

To ensure reliability an ARQ process may be implemented at both the sender and receiver. The ARQ process is shown in . Large files are fragmented into flow frames. Frames are labeled identified by sequence numbers and session ID. CRC and FEC are used to detect and correct corrupted frames. The IP channel is used to request retransmission of missing erroneous frames. A NACK frame is sent upon detection of missing and or unrecoverable frames. Erroneous or missing flow frames can be requested by the receiver either individually or in batches.

In some embodiments the ARQ process may use ACK instead of NACK to report successful reception of flow frames. Subsequently the flow queue contains the list of successfully received flow frames. Alternatively in some embodiments two flow queues one for ACK d and another one for NACK d flow frames are maintained both at the sender and receiver. Additionally the sender may deduce based on the packet switched network latency the ACK or NACK packets that are still being transmitted. The sender can estimate the flow frames that have been successfully received based on the estimated transfer time of a NACK or ACK packet. At or after the decision but before that end of the allocated transmission time the current reservation may be cancelled and the allocated resources may be released. These can then be reused by the scheduler for other requests.

Various embodiments may utilize various physical layer implementations having different signal encodings and or bitrates. In this example the Physical layer is implemented using a C band DWDM 10 Gbps tunable XFP transceiver over single mode fiber SMF .

The high data rate of flow switching service imposes minimum system requirements at the user s terminal equipment. In some embodiments the terminal equipment is integrated with the OFNU. In some other embodiments the terminal equipment is a stand alone personal computer connecting to the OFNU e.g. where the OFNU acts like a Flow ONU .

Two of the system specifications that have major impacts on the flow switching channel throughput are the read write speed of the hard drive and the size of the system memory. To analyze the impact of the foregoing specifications consider a unidirectional data transmission between a sending user and a receiving user. Looking at the sending user slow hard drive read speed forces the transmission process to pause until new data is pushed into the buffer. Consequently the flow switching channel throughput is slashed. In some embodiments to partially resolve this impact a staging process is introduced in the system design. The data to be transmitted is preloaded into the system memory before the granted flow switching session starts. Once the flow switching transmission starts the program implemented in the transport layer directly fetches data from the memory so that the flow switching channel throughput is no longer throttled by the speed of the hard drive. Meanwhile a multithreaded reading process continues to read the file from the hard drive and fill in the transmission buffer with flow frames for later transmission. To fully exploit the staging process sufficient system memory is required to compensate for the difference between the hard drive read write speed and the flow switching transmission rate e.g. more than 9 Gbps if a traditional HDD is installed in our testbed . If the memory size is not large enough to enable the staging process to build up sufficient lead in data buffering the transmission process soon exhausts the preloaded data and becomes idle due to the latency in hard drive read write speed.

To quantify this impact some approaches show the relationship between the hard drive speed system memory size and the flow switching channel throughput. Parameters used for an example approach are listed in Table 2.

In some embodiments various system components e.g. at a transmitter receiver and or CO are configured to provide an API to view and or modify various parameters of components or flow switching transfers. In some embodiments the API may be used for example for remote configuration and monitoring of optical components. For instance it may be possible to tune a transceiver to a different wavelength through an API call from a remote location. Various parameters can also be read and monitored remotely such as current laser temperature bit error rate alarms diode current etc. The remote configuration may be used to manually configure parameters remotely or may be used to facilitate automatic software updates e.g. driver firmware the operating system GUI security fixes etc. Either the packet switched channel or the flow switching channel may be used to transfer software updates.

A transactions resource supports GET POST and DELETE commands. The GET command may be used for specifying a unique transaction identifier and will return all status information about a transaction. The POST command may be used to create a new transaction. The DELETE command may be used to remove a transaction. A number of parameters may be specified for each transaction including for example identifiers for source and destination OFNUs name of flow transfer size of flow transfer requested start and stop time for transfer granted start and stop time for transfer current state of transfer which includes requested accepted in progress finished and failed a unique identifier for the transaction scratch space for applications granted channel typically to identify channel in optical C band and or flow direction or mode either TX or RX . An ARQ resource supports a PUT command which forwards the received ARQ messages to either the OFLT using another REST call or to the local network transport stack. A time resource supports the GET command and returns the current local time of the OFNU OFLT.

The API may be applied for use in a number of applications and services. For example in an on demand movie delivery application the API may be used to set up a flow switching channel between the media distributor and the end of network user s OFNU for ultra fast delivery of high res movies. As another example next generation game consoles may utilize the API to allow full games to be downloaded from the game distributor to the user premises. As another example in the medical services context the API may be used to exchange large medical files CT scans genome data etc. between medical facilities clinical labs patients and doctors and can be facilitated through flow transfers. The API may also be used in a number of other applications that require large data files be exchanged. For example video producers may edit and share large video files architects may exchange complex 3D drawings and bank branches may exchange large status report data with headquarters. As yet another example the API may be used to facilitate server to server file transfers e.g. snapshotting or migration of virtual machines. The API may also be used to enable users to remotely start and stop transfers. For instance a smartphone app can interact with the API to download movies to the OFNU irrespective of where the smartphone user is located. In some embodiments the services on the OFNU may be accessed through a GUI which can be presented on a display or TV or through a remote application e.g. web interface .

In accordance with some embodiments a testbed to experimentally characterize the UltraFlow Access network depicted in can be constructed. The testbed setup is shown in . The testbed includes three custom designed and custom built desktop computers pnrl pnrl and pnrl representing OFNU OFNU and OFNU respectively. The testbed also includes two additional custom designed and custom built desktop computers pnrl and pnrl which jointly form the OFLT. Pnrl and pnrl are equipped with parallel high speed solid state disks SSDs . The SSDs can provide up to 12 Gbps hard drive read write speed. Conversely hard disk drives HDDs are installed on pnrl pnrl and pnrl. The HDDs exhibit less than 1 Gbps read write speed. The hard drives read and write speeds can have great impact on the flow switching service throughput especially when the transmitted flow file is read from the hard disk without employing staging.

In some approaches three different transmission modes can be performed to analyze an impact of system design on the flow switching throughput namely direct mode staging mode and dummy mode. In direct mode the flow file is directly read from the hard drive and pushed into the memory buffer upon the start of flow switching transmission. This mode can be performed to analyze the flow switching system performance subject to the constraint of hard drive read write speed. In the staging mode the flow file to be transmitted is preloaded into the memory buffer before the flow switching transmission starts. Enough system memory i.e. 16 GB is installed at both the source and destination to ensure the accommodation of a complete flow file. The staging time is also set to allow complete preloading as per Eq. 1 . Finally in the dummy mode the transmission buffer is filled with random data to analyze the system performance without any limitations imposed by the hard drive.

Table 3 illustrates example analysis of end to end flow switching throughput in the three modes for different machine pairs. As can be seen in the table the hard drive speed can have a significant impact on the flow switching channel throughput while compared to the benchmark throughput achieved in dummy mode the proposed staging process which can remedy the hard drive constraint when enough system memory is installed in the system.

In the direct mode the slower write speed of SSD compared to its read speed can produce buffer overflow and packet drops at the receiving end. To overcome this enough system memory size can be used to buffer the discrepancy between the flow switching throughput and SSD write speed. An example minimum memory required for error free transmission of a 14 GB file size in the example testbed in direct mode can be around 5 GB. Otherwise packet drops can occur due to the overflow of the receiving buffer.

Various ones of the detailed experimental embodiments describe specific features that may not be required in some other embodiments. Accordingly various ones of the detailed experimental embodiments may not correspond to all contemplated embodiments. Further the various embodiments and specific features described herein can be used in a variety of combinations with other embodiments and or specific features.

Various blocks units modules or other circuits may be implemented to carry out one or more of the operations and activities described herein and or shown in the figures. In these contexts a block also sometimes logic circuitry module or unit is a circuit that carries out one or more of these or related operations activities e.g. ONU OFNU Gateway OLT or OFLT . For example in certain of the above discussed embodiments one or more modules are discrete logic circuits or programmable logic circuits configured and arranged for implementing these operations activities as in the circuit modules shown in . In certain embodiments such a programmable circuit is one or more computer circuits programmed to execute a set or sets of instructions and or configuration data . The instructions and or configuration data can be in the form of firmware or software stored in and accessible from a memory circuit . As an example first and second modules include a combination of a CPU hardware based circuit and a set of instructions in the form of firmware where the first module includes a first CPU hardware circuit with one set of instructions and the second module includes a second CPU hardware circuit with another set of instructions.

Certain embodiments are directed to a computer program product e.g. nonvolatile memory device which includes a machine or computer readable medium having stored thereon instructions which may be executed by a computer or other electronic device to perform these operations activities. For instance in some embodiments the dual layer stack used in the OFNU may be implemented by software running on a computing system e.g. a microcontroller .

The below listed Appendices from and appended as part of the U.S. Provisional Application Ser. No. 61 936 629 are fully incorporated herein by reference for their general and specific teachings. Exemplary teachings therein concern optical networking passive optical network architecture optical flow switching optical access technologies and dynamic bandwidth applications. As such various specific embodiments can be implemented using communication approaches protocols circuitry and other components as noted in the Appendices. These specific embodiments may for example be implemented in accordance with the access networks shown in in the networks and componentry shown in various other figures as well as with method based aspects characterized herein. Using for example Appendix 1 Appendix 2 and Appendix 3 as being representative of the above noted exemplary teachings each shows OFS networks or UltraFlow Access Networks which can be incorporated with of the present disclosure.

Based upon the above discussion and illustrations those skilled in the art will readily recognize that various modifications and changes may be made to the various embodiments without strictly following the exemplary embodiments and applications illustrated and described herein. For example such modifications do not depart from the true spirit and scope of various aspects of the invention including aspects set forth in the claims.

For general information and for specifics regarding applications and implementations to which one or more embodiments of the present disclosure may be directed to and or applicable to the underlying U.S. Provisional Patent Application Ser. No. 61 936 629 filed on Feb. 6 2014 including the Appendices therein to which priority is claimed and which are fully incorporated herein by reference. In view of the description herein those skilled in the art will recognize that many changes may be made thereto without departing from the spirit and scope of the present disclosure.

