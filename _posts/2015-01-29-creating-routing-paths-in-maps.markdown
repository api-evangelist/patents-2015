---

title: Creating routing paths in maps
abstract: A digital map having a routing path is created. Points in at least a majority of a linear length of the path may be constrained so that they are disposed substantially equidistant between structural features that are bounding navigable spaces in a structure. The creating of the path may include selecting a connected component corresponding to some or all of the navigable spaces. A morphological process may be performed on the connected component to create the path.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09285227&OS=09285227&RS=09285227
owner: QUALCOMM Incorporated
number: 09285227
owner_city: San Diego
owner_country: US
publication_date: 20150129
---
Embodiments described herein are generally directed to the creation of routing paths in maps for positioning and navigation.

The Global Positioning System GPS represents one type of Global Navigation Satellite System GNSS which along with other types of satellite positioning systems SPS provide or support signal based position location capabilities e.g. navigation functions in mobile devices. However since some satellite signals may not be reliably received or acquired by a mobile device within an indoor environment or other mixed indoor outdoor environments different techniques may be employed to enable position location services.

For example mobile devices may attempt to obtain a position fix by measuring ranges to three or more terrestrial transmitters e.g. wireless access points beacons cell towers etc. which are positioned at known locations. Such ranges may be measured for example by obtaining a MAC ID address from signals received from such transmitters and obtaining range measurements to the transmitters by measuring one or more characteristics of signals received from such transmitters such as for example signal strength a round trip delay time etc.

These and other position location and navigation techniques can be of further benefit to a user if presented with certain mapped features. For example mapped features may relate to or otherwise identify certain physical objects characteristics or points of interest within a building or complex etc. Thus in certain instances an indoor navigation system can provide a digital electronic map to a mobile device upon entering a particular indoor area. Such a map may show indoor features such as doors hallways entry ways walls etc. and points of interest such as bathrooms pay phones room names stores etc. Such a digital electronic map may be stored at a server to be accessible by a mobile device through selection of a URL for example. By obtaining and displaying such a map a mobile device may overlay a current location of the mobile device and user over the displayed map to provide the user with additional location context.

Broadly speaking certain embodiments of the claimed subject matter relate to the obtaining of a digital map including a plurality of navigable spaces in an indoor area. The plurality of navigable spaces is bounded by a plurality of structural features. Using a processor a path having a linear length and disposed in at least a portion of the plurality of the navigable spaces is created. The creating of the path includes constraining points in at least a majority of the linear length to be disposed substantially equidistant between at least a portion of the plurality of the structural features.

In an aspect of these certain embodiments the digital map is in a bitmap format and the creating of the path further comprises selecting a connected component. The connected component corresponds to at least a portion of the plurality of the navigable spaces. The path is based at least in part on the connected component.

In an alternative embodiment a device comprises one or more processors to obtain a digital map including a plurality of navigable spaces in an indoor area. The plurality of navigable spaces is bounded by a plurality of structural features. The processors are further to create a path having a linear length and disposed in at least a portion of the plurality of the navigable spaces. The creating of the path includes constraining points in at least a majority of the linear length to be disposed substantially equidistant between at least a portion of the plurality of the structural features.

In an aspect of the foregoing alternative embodiment the digital map is in a bitmap format and the one or more processors are further to create the path by selecting a connected component. The connected component corresponds to at least a portion of the plurality of the navigable spaces. The path is based at least in part on the connected component.

In yet another alternative embodiment a non transitory computer readable storage medium comprises machine readable instructions stored thereon. The instructions are executable by a special purpose computing apparatus to obtain a digital map including a plurality of navigable spaces in an indoor area. The plurality of navigable spaces is bounded by a plurality of structural features. The instructions are further executable by the computing apparatus to create a path having a linear length and disposed in at least a portion of the plurality of the navigable spaces. The creating of the path includes constraining points in at least a majority of the linear length to be disposed substantially equidistant between at least a portion of the plurality of the structural features.

In an aspect of the foregoing alternative embodiment the digital map is in a bitmap format and the instructions are further executable by the computing apparatus to create the path by selecting a connected component. The connected component corresponds to at least a portion of the plurality of the navigable spaces. The path is based at least in part on the connected component.

There are additional aspects to claimed subject matter. It should therefore be understood that the preceding is merely a brief summary of some embodiments and aspects of the claimed subject matter. Additional embodiments and aspects are referenced below. It should further be understood that numerous changes to the disclosed embodiments can be made without departing from the spirit or scope of the claimed subject matter. The preceding summary therefore is not meant to limit the scope of the claimed subject matter. Rather the scope of the claimed subject matter is to be determined by appended claims and their equivalents.

The following description is of the best mode presently contemplated for carrying out claimed subject matter. Moreover in the following description details are set forth by way of example to enable a person of ordinary skill in the art to practice claimed subject matter without undue experimentation. Reference will be made in detail to embodiments of claimed subject matter examples of which are illustrated in the accompanying drawings wherein like reference numerals refer to like elements throughout. It is understood that other embodiments may be used and structural and operational changes may be made without departing from the scope of claimed subject matter.

As previously mentioned satellite signals for use in navigation may not be reliably received or acquired in an indoor environment. Thus different techniques may be employed to enable navigation services. For example mobile devices can typically obtain a position fix by measuring ranges to three or more terrestrial wireless access points which are positioned at known locations. Such ranges may be measured for example by obtaining a MAC ID address from signals received from such access points and measuring one or more characteristics of signals received from such access points such as for example signal strength round trip delay just to name a few examples.

In some implementations an indoor navigation system may provide a digital electronic map to mobile stations as they enter a particular indoor area. Such a map may show indoor features such as doors hallways entry ways walls etc. and points of interest such as bathrooms pay phones room names stores etc. This map also may be stored at a server to be accessible by a mobile device through selection of a URL for example. By obtaining and displaying such a map a mobile device may overlay a current location of the mobile device and user over the displayed map to provide the user with additional context.

A digital map of an indoor space may be derived from a CAD drawing for example. Here such a CAD drawing may show rooms and hallways formed by walls doorways etc. Once the CAD drawing is transformed if necessary to a particular format usable as a digital map the digital map may be electronically stored and accessed by mobile devices as discussed above. In one particular implementation a grid of points is projected over an area covered by a map of an indoor area such as a floor of an office building shopping mall school building etc. Neighboring grid points may then be selectively connected by edges subject to features in the map to indicate possible direct transitions between locations of the neighboring points without obstruction e.g. walls . Here the connected grid points form nodes in a routing graph for use in modeling the movement of a mobile device in the indoor area.

In particular implementations a location of a mobile device may be modeled as being placed at points along edges connecting neighboring nodes in the routing graph described above. Likewise transitions from an initial position to a subsequent position may be modeled to occur along edges of the routing graph. In addition a likelihood model may further characterize possible transitions of a mobile device from an initial position to a subsequent over a time period. In a particular example a particle filtering model may establish a likelihood that a mobile device is at a particular subsequent location and has a velocity and heading that is conditioned on an initial location velocity and heading.

To provide sufficient granularity in a routing graph grid points may be projected over an indoor area densely so that the graph can be sufficiently granular to support particular applications.

Many routing graphs have segments connecting grid points in an indoor area which show possible routing paths through navigable areas connecting rooms hallways etc. In some implementations a resulting routing graph connecting rooms e.g. through a hallway may not traverse the center of open areas or hallways that are disposed between the rooms. As pointed out above grid points used for forming a routing graph may be placed at a uniform spacing when the points are projected over a map area and without regard to their relationship to structural features. Accordingly this placement of grid points relative to structural features such as walls can be arbitrarily aligned. The edges formed from such grid points therefore may not be centered between structural features bounding an open space e.g. not centered between walls bounding a hallway . This may distort navigation functions that use the routing graph e.g. a particle filter used for positioning operations .

However in a particular alternative implementation a digital map defining or including a plurality of navigable spaces in an indoor area may be obtained. Navigable spaces may be bounded by structural features. A route or path within the indoor area is created. The path has a linear length and is disposed in navigable spaces. Creation of the path may include constraining points in at least a majority of the linear length of the path so that they are disposed substantially equidistant between the structural features bounding the navigable spaces.

In certain implementations a computing and communication environment is shown in in which an electronic digital map may be generated transmitted stored or otherwise processed in accordance with an implementation. Example environment comprises a computing device having an apparatus for use in generating all or part of a digital map having routes or paths. As described in greater detail below apparatus for example may obtain a diagram e.g. one or more electronic files relating to a floor plan map CAD drawing etc. for a structure that includes an indoor area with structural features and navigable spaces that may be navigated in some manner by a user of a mobile device . Apparatus for example may create a routing path within the indoor area. Creation of the path may include the constraining of points in at least a majority of a linear length of the path so that they are disposed substantially equidistant as observed by a user looking at the map between the structural features bounding the navigable spaces in which the path is disposed. Apparatus for example may select a connected component corresponding to some or all of navigable spaces and perform a morphological process on the connected component to create the path in the map.

As shown computing device may be connected to one or more wired and or wireless network s via a communication link . Mobile device may for example be coupled to network s via a wireless communication link . As such the digital map may be transmitted or otherwise provided by computing device to mobile device . Mobile device may for example comprise an apparatus which may generate obtain store transmit and or otherwise process all or part of digital map . Network s may for example be further connected to one or more other resources devices e.g. via a communication link . In certain example implementations computing device and or mobile device may obtain all or part of an electronic diagram or map for a structure from other resources devices .

The term structure may for example apply to all or part of one or more natural or man made physical arrangements of object s the knowledge of which may be of use to a user of mobile device . For example a structure may comprise one or more buildings or a portion thereof. A feature may for example identify an object or obstacle e.g. a wall a door an elevator a staircase a statue etc. an entity or service e.g. a business a taxi stand a restroom a doctor s office a lost and found department a security station etc. or any other navigational location based service characteristic which may be identified via representative data in one or more files of an electronic map. In certain instances for example a feature may represent something to navigate around e.g. a route obstacle navigate towards or through e.g. a doorway an elevator etc. or possibly navigate away from e.g. a staircase . Of course these are simply a few examples of features as with all of the examples presented herein and claimed subject matter is not necessarily intended to be so limited.

Memory may be representative of any data storage mechanism and may include for example a primary memory and or a secondary memory . Primary memory may comprise for example a random access memory read only memory etc. While illustrated in this example as being separate from the processing units it should be understood that all or part of a primary memory may be provided within or otherwise co located coupled with processing unit s or other like circuitry within computing device . Secondary memory may comprise for example the same or similar type of memory as primary memory and or one or more data storage devices or systems such as for example a disk drive an optical disc drive a tape drive a solid state memory drive etc. In certain implementations secondary memory may be operatively receptive of or otherwise configurable to couple to a non transitory computer readable medium . Memory and or computer readable medium may comprise computer implementable instructions for certain example techniques as provided herein.

As illustrated in at various times memory may store certain signals representing data and or computer implementable instructions for certain example techniques as provided herein. For example memory may store data and or computer implementable instructions for apparatus . By way of example memory may at various times store representative data for door locations one or more diagrams or portions thereof all or part of a digital map .

As shown computing device may for example include a network interface . Network interface may for example provide a capability to receive and or transmit wired and or wireless signals e.g. to communicate via network s .

In certain example implementations computing device may take the form of a server or other device. In alternative implementations computing device may take the form of a wireless network element or other location based service element or alternatively may take the form of a portion of a cloud computing configuration or alternatively still may take the form of a wireless access point or other like local area computing resource.

Memory may be representative of any data storage mechanism and may include for example a primary memory and or a secondary memory . Primary memory may comprise for example a random access memory read only memory etc. While illustrated in this example as being separate from the processing units it should be understood that all or part of a primary memory may be provided within or otherwise co located coupled with processing unit s or other like circuitry within mobile device . Secondary memory may comprise for example the same or similar type of memory as primary memory and or one or more data storage devices or systems such as for example a disk drive an optical disc drive a tape drive a solid state memory drive etc. In certain implementations secondary memory may be operatively receptive of or otherwise configurable to couple to a non transitory computer readable medium . Memory and or computer readable medium may comprise computer implementable instructions for certain example techniques as provided herein.

As illustrated in at various times memory may store certain signals representing data and or computer implementable instructions for certain example techniques as provided herein. For example memory may store data and or computer implementable instructions for apparatus . By way of example memory may at various times store representative data for a digital map one or more diagrams or portions thereof and possibly a navigation application . In certain instances memory may also comprise similar instructions and or data as shown in the example computing device of . For example in certain implementations mobile device may perform all or part of the functions that may be associated with apparatus in computing device .

As shown mobile device includes a network interface which may for example provide a capability to receive and or transmit wired and or wireless signals e.g. to communicate via network s . Mobile device may further comprise a navigation receiver which can provide position location or other navigation services based on wireless signals transmitted by various transmitting devices. For example navigation receiver may comprise an SPS receiver capable of receiving and processing one or more Global Navigation Satellite Systems GNSSs or other satellite or terrestrial locating services such as e.g. one or more location based services LBSs which may be provided at least in part by a cellular network a WiFi network etc.

Mobile device may further comprise one or more user interfaces for one or more user input and or user output devices. Thus for example user interface may comprise a keypad a touch screen various buttons various indicators a display screen a speaker a microphone a projector a camera etc.

Mobile device is representative of any electronic device that may be moved about within environment . For example mobile device may comprise a hand held computing and or communication device such as a mobile telephone smart phone lap top computer tablet computer navigation device and or the like. In certain implementations mobile device may be part of a circuit board an electronic chip etc. It should be understood that mobile device may also or alternatively comprise one or more other circuits mechanisms etc. not shown that may be of use in performing one or more other functions or capabilities and or supportive of certain example techniques as provided herein.

Computing device and or mobile device may for example be enabled e.g. via one or more network interfaces for use with various wireless communication networks such as a wireless wide area network WWAN a wireless local area network WLAN a wireless personal area network WPAN and so on. The term network and system may be used interchangeably herein. A WWAN may be a Code Division Multiple Access CDMA network a Time Division Multiple Access TDMA network a Frequency Division Multiple Access FDMA network an Orthogonal Frequency Division Multiple Access OFDMA network a Single Carrier Frequency Division Multiple Access SC FDMA network and so on. A CDMA network may implement one or more radio access technologies RATS such as cdma2000 Wideband CDMA W CDMA Time Division Synchronous Code Division Multiple Access TD SCDMA to name just a few radio technologies. Here cdma2000 may include technologies implemented according to IS 95 1S 2000 and IS 856 standards. A TDMA network may implement Global System for Mobile Communications GSM Digital Advanced Mobile Phone System D AMPS or some other RAT. GSM and W CDMA are described in documents from a consortium named 3rd Generation Partnership Project 3GPP . Cdma2000 is described in documents from a consortium named 3rd Generation Partnership Project 2 3GPP2 . 3GPP and 3GPP2 documents are publicly available. A WLAN may include an IEEE 802.11x network and a WPAN may include a Bluetooth network an IEEE 802.15x for example. Wireless communication networks may include so called next generation technologies e.g. 4G such as for example Long Term Evolution LTE Advanced LTE WiMAX Ultra Mobile Broadband UMB and or the like.

An electronic diagram such as a digital map of an indoor space maybe derived for example from a CAD or other similar drawing or file. Thus a diagram may show rooms and hallways formed or defined by walls doorways etc. Once the diagram is transformed to another particular format usable as a digital map if necessary the digital map may be electronically stored for access by mobile devices as discussed elsewhere herein.

By way of a simple example illustrates a representation of a map including a structure having a plurality of features e.g. walls doors etc. and an exterior region surrounding structure . Structure further includes a right wing and a left wing which are connected to each other by a central open area . Right and left wings each include a plurality of hallways leading to a plurality of rooms . In the illustrated embodiment map is comprised of a black and white binary image in bitmap format. However other embodiments may include images in other types of bitmap formats. Image formats for maps may be acquired by the conversion of files in CAD or other vector based formats into bitmap formats. Also image formats may be acquired from a website a camera or a mobile device including a camera taking a picture of a displayed map scanning a printed map copying an image presented on the internet and so forth just to name a few examples.

Map may include pixels designated by at least two coordinates for example an x and y coordinate along a X axis and a Y axis. The pixels can correspond to position points. Structural components of the binary map image that forms map are represented by black pixels and open spaces are represented by while pixels. Structural components for example can include interior and exterior walls doors doorways stairwells elevator shafts and windows. Open spaces for example can include rooms hallways stairs elevator car space courtyards and exterior features such as gardens or walkways. Open spaces can be bounded on one or more sides by structural components. In alternative embodiments however this can be reversed whereby structural components can be represented by white pixels and open spaces by black pixels. 

According to an embodiment it is desirable to identify or otherwise remove from map the pixel data that corresponds to exterior region . This is premised upon an assumption that a routing map that is to be created will to be limited to routes or paths within structure and will not include paths in exterior region . This removal or identification of certain pixel data can eliminate what might otherwise become noise when certain morphological operations are later performed as described elsewhere herein. Accordingly a duplicate not shown of map is made and certain morphological operations are applied to the duplicate. Specifically a morphological closing process may be applied to the duplicate binary image that forms the duplicate map not shown and can include a morphological dilation operation followed by a morphological erosion operation to determine an output value for pixels in the image.

In an example of a morphological closing operation black pixels can be associated with a logic value of 0 and white pixels can be associated with a logic value of 1 . A particular pixel in a duplicate map can be a target pixel or pixel of interest for an iteration of the morphological closing operation. A neighborhood for each target pixel in the duplicate map can be defined as pixels bordering the target pixel. The number and arrangement of pixels in a neighborhood may vary based on the complexity of shapes on the binary map image. As an example for a substantially rectangular shape target pixel may have a neighborhood of eight pixels i.e. top bottom left right diagonal top right diagonal top left diagonal bottom right and diagonal bottom left. For target pixels at an edge of an image parts of the neighborhood can extend past the border of the image to encompass undefined pixels. A logic value of 1 or 0 may be assigned to the undefined pixels for a dilation operation or an erosion operation as described in more detail below.

A dilation operation can operate in turn on pixels in a duplicate map such that as the morphological dilation operation steps through pixels in the image each pixel in turn can be the target pixel. A dilation operation may generate an output value of the target pixel can be a maximum value of pixels in the neighborhood of the target pixel. For example if any of the pixels in the neighborhood of the target pixel has a logic value of 1 i.e. a white pixel an output value of the target pixel can be logic value of 1 i.e. a white pixel . For border pixels in the morphological dilation operation undefined pixels beyond the border of the image can be assigned to a logic value of 0 . In response to this morphological dilation operation white areas may expand and thereby fill imaging discontinuities in physically continuous structural components to remove these discontinuities.

Following the dilation operation and in a manner similar to the operation described herein an erosion operation can be applied individually to multiple pixels in turn of the duplicate map to complete the morphological closing operation. An erosion operation can remove feature distortions produced during the expansion of the white areas during a dilation operation. In response to an erosion operation an output value of a target pixel can be the minimum value of pixels in the neighborhood of the target pixel. For example if any pixels in the neighborhood of the target pixel has a logic value of 0 i.e. a black pixel an output value of the target pixel can be a logic value of 0 i.e. a black pixel . For border pixels in the erosion operation undefined pixels beyond the border of the image can be assigned to a logic value of 1 .

A morphological hole filling operation may be performed on a duplicate map that can be produced by the above described morphological dilation operation. A morphological hole filling operation can convert to white pixels clusters of black pixels that are completely surrounded or bounded by connected or adjoining white pixels i.e. pixels adjoined along a pixel edge for example top bottom left or right edges . Surrounded clusters of black pixels can be defined as holes. illustrates a duplicate map in binary bitmap format which may be generated from the above described morphological operations including hole filling operation. In response to these operations binary image pixels of map within the defined boundary of structure can correspond to a logic value of 1 or a white pixel.

Still referring to pixel positions can be classified as interior position points or exterior position points. White pixels which can correspond to a digital logic value of 1 as discussed above can be classified as interior pixel position points . Black pixels which can correspond to a digital logic value of 0 as discussed above can be classified as exterior pixel position points . Exterior position points correspond to exterior region of . Thus black pixels of may be deleted from the file comprising the image or alternatively the identity of these pixels as noted by their position in the image can be saved for future reference and used in a follow up processing of the image. As explained in more detail elsewhere herein this deletion or identification in effect can remove unwanted data from the image file which potentially can become noise that might detract from the result of further morphological operations.

Having identified the pixels in duplicate map that are associated with exterior region original map can be processed. Pixels corresponding to exterior position points of duplicate map can be used to identify locations of corresponding pixels in original map . The process then can change these identified pixels in original map having a digital logic value of 1 white pixels to a digital logic value of 0 black pixels . illustrates an output of this processing of map of whereby exterior position pixels have been assigned this logic value of 0 . shows a map which includes structure of and an exterior region comprised wholly of black pixels. In an alternative embodiment exterior region may not exist at all in that all pixels previously associated with that region may be deleted from the data file that comprises map .

Map of can be processed further by selecting in the image one or more connected components e.g. maximal regions of a set of pixels having the same or similar values and which are not separated by a boundary where connected components correspond to the open spaces in the structure interior and have a dimension that is larger than a predetermined size. Referring to there is shown an output of such a processing of according to an embodiment. A single connected component is selected. Criteria of the foregoing process may be to select regions of white pixels since they correspond to open potentially navigable spaces which are not separated by boundaries e.g. doors or walls which such regions are larger than a predetermined size. In the illustrated embodiment a predetermined size is a dimension of a connected component that is greater than about twenty five percent of either an overall width of structure or an overall length of structure . However alternative embodiments may use predetermined sizes of other amounts. Also it should be noted that because the pixels associated with exterior region were converted to black pixels for noise removal as described elsewhere herein no portions of exterior region were identified as a connected component.

In an embodiment a bounding box or enclosing box can be used as a minimum polygonal area such as for example a rectangular area within which all points or pixels of the connected component may lie. Thus the width and or height dimension of the minimum bounding box not shown can be used to compare against the width and length of structure for determining whether a threshold predetermined size limit has been met. As can be seen from for example the interiors of many rooms may preliminarily be viewed as connected components. However they would not be identified as qualifying connected components because their dimensions may not exceed a predetermined portion of the width or length of structure such as for example may not exceed twenty five percent of the width or length. Accordingly the interiors of the rooms do not appear in as a selected connected component.

Connected component of comprises central open area and the plurality of hallways . It should be further noted that in the case of only one connected component meeting the predetermined size limitation has been selected. This connected component includes hallways in the right and left wings of the structure and central open area which connects right and left wings . This is a single connected component because in the case of there is no barrier such as a wall or a closed door for example that separates the illustrated hallways and or the central open area. For example there is no barrier separating left and right wings of structure from one another or from central open area . It can further be appreciated however that an alternative map may have barriers separating structure features such as for example one or more barriers separating structure wings from each other or from a central open area. In such an instance a plurality of qualifying connected components may be selected and further image processing may proceed for these connected components as described elsewhere herein.

Having selected a connected component of a predetermined size such as connected component of a morphological process can be performed on connected component in order to create one or more routing paths. The morphological process can include for example a thinning process a shrinking process or a skeletonization process among others. A skeletonization process may generally involve repeatedly deleting the contour points or pixels of an image provided the following conditions are satisfied a end points are not deleted b connectivity is not broken and c excessive erosion of the region does not occur. A shrinking process may generally involve the reducing of objects in a binary image to a single point located at the geometric center of the object. This may be thought of as finding the center of mass of an object. For objects that do not have holes in them a single point may be generated. If there is a hole the process may produce a ring of pixels that surrounds the hole and is equidistant from the nearest boundary. A thinning process may be somewhat similar to shrinking except that thinning may generate a minimally connected line that is equidistant from the boundaries and that some of the structure of the object is maintained.

Although having some differences in the final result one common feature of any of these three processes may be in effect that of stripping away the pixels from the outer boundary of the component image. This stripping away of the pixels may be on a layer by layer basis starting outwardly and working inwardly until there remains a dot or a line disposed generally in the center of the interior of a region that initially was occupied by the original connected component. In some embodiments this line may have a width of a single pixel or the dot may be comprised of a single pixel.

In alternative embodiments door location information may be provided to create path segments between hallways and the entrances to rooms and in some embodiments into the interiors of the rooms as well. These maps may be derived from preliminary maps that otherwise may not show such path segments. According to an embodiment one or more paths are created for a map using morphological operations as described in more detail elsewhere herein to create a preliminary map. One example of such a preliminary map may comprise a map that includes path shown in . Another file or data source may be received which has location parameters corresponding to those locations on the preliminary map of one or more doors or other structural features that afford a user an option to enter or physically access a region that may be separated by the structural feature. This location data may be used to identify on a preliminary map locations of these doors or other structural features. A preexisting path segment that is disposed closest to the location of a door may be identified. Also identified is a location or point on this identified preexisting path segment that is closest to the door. Finally a new path segment is created which extends between the location of the door and the identified point on the preexisting identified path segment. Thus for example this new path segment may correspond to a segment leading from a primary hallway to the entrance of a room that is accessible from the hallway.

In an alternative embodiment an electronic digital map may be created to include path segments leading from hallways to an entrance to rooms as well as into the rooms themselves even if the source map depicts closed doors or other obstacles between the hallways and the rooms. According to an embodiment a source map and a supplemental file may be received. The supplemental file has location parameters corresponding to the location s on the source map of one or more doors or other structural features that afford a user an option to enter or physically access a region that may be separated by the structural feature. Then the values of a predetermined number of pixels on the source map that are proximate to the location of the doors may be changed so that the values are the same as that of the pixels associated with the hallways and the room interiors. In other words if for example the hallways and room interiors are represented on a map by white pixels having a value of 1 and the closed doors or other structural features are represented by black pixels having a value of 0 then the values of the predetermined number of black pixels located at and adjacent to the location of the door would be changed to a value of 1 white . This may have an effect of erasing a closed door or other structural feature and providing an unobstructed path from a hallway to an interior of a room for example.

Each such room or other area may thereby become connected to a hallway or other relatively large accessible region and this could likely become a part of a qualifying connected component for further morphological operations as described elsewhere herein for creating path segments leading up to and into the room. On the other hand if the structural feature e.g. the closed door had not been erased then the room or similar region may remain enclosed and not connected to a hallway or other larger region. Such a room then may not be identified or selected as a qualified connected component due to not meeting the minimum predetermined size limitation. Accordingly this room otherwise may not be processed with subsequent morphological operations and path segments leading up to and into such a room may not be created.

Final route map of provides a path that may be useful for applications where it is desirable to provide path segments that are disposed inside rooms or stores or similar such regions. On the other hand there may be other applications where this level of detail is not desirable and where only hallway paths and segments leading up to but not inside rooms stores etc. may be desired. Referring to it can be seen that such an embodiment can be generated from final route map of . Taking final route map the stores are identified and the routing segments disposed within each store are removed as shown in thus providing a modified final route map . Modified final route map includes a modified path having modified path segments associated with the hallways and with portions of the accessible areas leading up to the entrance of each store or room.

Reference throughout this specification to one example an example certain examples or example implementation means that a particular feature structure or characteristic described in connection with the feature and or example may be included in at least one feature and or example of claimed subject matter. Thus the appearances of the phrase in one example an example in certain examples or in certain implementations or other like phrases in various places throughout this specification are not necessarily all referring to the same feature example and or limitation. Furthermore the particular features structures or characteristics may be combined in one or more examples and or features.

The methodologies described herein may be implemented by various means depending upon applications according to particular features and or examples. For example such methodologies may be implemented in hardware firmware and or combinations thereof along with software. In a hardware implementation for example a processing unit may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors electronic devices other devices units designed to perform the functions described herein and or combinations thereof.

In the preceding detailed description numerous specific details have been set forth to provide a thorough understanding of claimed subject matter. However it will be understood by those skilled in the art that claimed subject matter may be practiced without these specific details. In other instances methods and apparatuses that would be known by one of ordinary skill have not been described in detail so as not to obscure claimed subject matter.

Some portions of the preceding detailed description have been presented in terms of algorithms or symbolic representations of operations on binary digital electronic signals stored within a memory of a specific apparatus or special purpose computing device or platform. In the context of this particular specification the term specific apparatus or the like includes a general purpose computer once it is programmed to perform particular functions pursuant to instructions from program software. Algorithmic descriptions or symbolic representations are examples of techniques used by those of ordinary skill in the signal processing or related arts to convey the substance of their work to others skilled in the art. An algorithm is here and generally is considered to be a self consistent sequence of operations or similar signal processing leading to a desired result. In this context operations or processing involve physical manipulation of physical quantities. Typically although not necessarily such quantities may take the form of electrical or magnetic signals capable of being stored transferred combined compared or otherwise manipulated as electronic signals representing information e.g. as representative data . It has proven convenient at times principally for reasons of common usage to refer to such signals as bits data values elements symbols characters terms numbers numerals information or the like. It should be understood however that all of these or similar terms are to be associated with appropriate physical quantities and are merely convenient labels.

Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout this specification discussions utilizing terms such as processing creating computing calculating converting determining performing selecting receiving changing establishing obtaining identifying and or the like refer to actions or processes of a specific apparatus such as a special purpose computer or a similar special purpose electronic computing device. In the context of this specification therefore a special purpose computer or a similar special purpose electronic computing device is capable of manipulating or transforming signals typically represented as physical electronic or magnetic quantities within memories registers or other information storage devices transmission devices or display devices of the special purpose computer or similar special purpose electronic computing device. In the context of this particular patent application the term specific apparatus may include a general purpose computer once it is programmed to perform particular functions pursuant to instructions from program software.

The terms and or and and or as used herein may include a variety of meanings that also are expected to depend at least in part upon the context in which such terms are used. Typically or if used to associate a list such as A B or C is intended to mean A B and C here used in the inclusive sense as well as A B or C here used in the exclusive sense. In addition the term one or more as used herein may be used to describe any feature structure or characteristic in the singular or may be used to describe a plurality or some other combination of features structures or characteristics. Though it should be noted that this is merely an illustrative example and claimed subject matter is not limited to this example.

In view of the above it will be appreciated that certain embodiments overcome many of the long standing problems in the art by providing a method apparatus and product for the automatic generation of a map with routing paths that can be derived from one or more relatively large open or navigable spaces in a binary image of a map. The open spaces may be automatically selected based on relatively large groups of pixels having the same value such as for example all having the value of 1 white pixels or alternatively all having the value of 0 black pixels . Morphological operations are performed on these large groups of pixels to derive one or more paths. Moreover the width of the paths may be inferred based upon the number of operations required to generate the paths from the large group of pixels.

Using morphological operations on digital binary maps as described herein can have the advantage of producing paths in a shorter amount of time as compared with alternative methods of creating paths. Morphological operations may be available with hardware accelerated application programming interfaces API s such as for example the open source computer vision OpenCV library and the FastCV computer vision library among others. Moreover route maps can be created based upon a wider range of maps such as raster based and vector based maps among others. Additionally embodiments of the claimed subject matter may enable mobile devices to have the ability to create paths for maps without the need for computing assistance from a server.

While there has been illustrated and described what are presently considered to be example features it will be understood by those skilled in the art that various other modifications may be made and equivalents may be substituted without departing from claimed subject matter. Additionally many modifications may be made to adapt a particular situation to the teachings of claimed subject matter without departing from the central concept described herein. Therefore it is intended that claimed subject matter not be limited to the particular examples disclosed but that such claimed subject matter may also include all aspects falling within the scope of the appended claims and equivalents thereof.

