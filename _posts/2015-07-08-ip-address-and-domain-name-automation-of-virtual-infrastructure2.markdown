---

title: IP address and domain name automation of virtual infrastructure
abstract: Provisioning an Internet Protocol address is disclosed. A request to provision an Internet Protocol address to a virtual resource is received. An Internet Protocol address is automatically determined to allocate to the virtual resource. An Internet Protocol Address Management appliance is used to automatically allocate the determined Internet Protocol address to the virtual resource.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09634983&OS=09634983&RS=09634983
owner: Infoblox Inc.
number: 09634983
owner_city: Santa Clara
owner_country: US
publication_date: 20150708
---
This application is a continuation of co pending U.S. patent application Ser. No. 13 434 527 entitled IP ADDRESS AND DOMAIN NAME AUTOMATION OF VIRTUAL INFRASTRUCTURE filed Mar. 29 2012 which is incorporated herein by reference for all purposes.

With advances in cloud computing and virtualization a system administrator is able to easily add or remove a virtual resource such as a virtual machine device or network as needed to dynamically match computing needs. Because virtualization allows a single physical machine to host a large number of virtual resources it is not uncommon for a single organization to utilize hundreds of virtual machines. The management of these virtual resources has been traditionally difficult. Traditionally allocation of network parameters such as an Internet Protocol IP address or a Domain Name System DNS registration required a network engineer to manually look up available network parameters and assign an available parameter to a requestor. This manual process could potentially take days. Especially in a virtual cloud environment where a large number of virtual resources needs to be dynamically created and destroyed on a relatively short time frame manually assigning IP addresses or manually performing DNS registration updates would be extremely inefficient and prone to errors. Therefore there exists a need for a better way to manage network parameters of a virtual resource.

The invention can be implemented in numerous ways including as a process an apparatus a system a composition of matter a computer program product embodied on a computer readable storage medium and or a processor such as a processor configured to execute instructions stored on and or provided by a memory coupled to the processor. In this specification these implementations or any other form that the invention may take may be referred to as techniques. In general the order of the steps of disclosed processes may be altered within the scope of the invention. Unless stated otherwise a component such as a processor or a memory described as being configured to perform a task may be implemented as a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. As used herein the term processor refers to one or more devices circuits and or processing cores configured to process data such as computer program instructions.

A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.

Automatically and programmatically provisioning an IP address and performing a DNS registration for a virtual resource e.g. a virtual machine a virtual entity a virtual device a virtual network a virtual switch a virtual host adaptor a virtual appliance or any other element of a virtual cloud is disclosed. In some embodiments an Internet Protocol address management IPAM appliance manages Internet Protocol IP addresses of one or more virtual resources in a virtual cloud environment in addition to managing IP addresses for physical servers and devices. For example by communicating with the IPAM appliance an IP address can be automatically obtained updated or released for a virtual resource. In some embodiments DNS registration is automatically managed for one or more virtual resources. For example a DNS record is automatically updated for a virtual resource as required.

In an example virtual cloud environment with virtual machines being dynamically created and destroyed it is desirable to be able to dynamically obtain information about existing virtual machines in the virtual cloud environment to more efficiently manage them. In some embodiments virtual infrastructure cloud metadata information is collected from the virtual cloud environment. The collected metadata information may be organized and or outputted e.g. on a display of a user . For example the collected metadata information includes identity location and attribute information about one or more virtual resources e.g. a virtual machine a virtual entity a virtual device a virtual network a virtual switch a virtual host adaptor a virtual appliance or any other element of a virtual cloud in a virtual cloud environment. In some embodiments the collected metadata information is organized into hierarchical groupings e.g. hierarchical folders containing collected metadata information . In some embodiments the collected metadata information is stored in a storage that includes infrastructure metadata information about both virtual resources and physical resources.

Internet Protocol Address Management IPAM appliance is connected to virtual cloud via a network. An example of IPAM appliance includes an IPAM appliance offered by Infoblox Inc. of Santa Clara Calif. IPAM appliance interfaces with cloud to manage one or more resources of virtual cloud . For example IPAM appliance manages the IP addresses and DNS registrations of one or more resources included in virtual cloud . In another example IPAM appliance stores and manages infrastructure metadata information about one or more resources included in cloud . For example IPAM appliance stores configuration identification networking and or statistical information about a virtual machine included in virtual cloud .

In some embodiments IPAM appliance is a virtual appliance implemented on one or more virtual machines and or one or more servers included in virtual cloud or a different virtual cloud. In some embodiments IPAM appliance is a physical server appliance connected to virtual cloud via a network. Examples of the networks discussed in this specification may include one or more of the following a direct or indirect physical communication connection mobile communication network Internet intranet Local Area Network Wide Area Network Storage Area Network and any other forms of connecting two or more systems or storage devices together.

Global cloud manager interface application interfaces with global cloud manager and can be used to manage virtual cloud . For example a network administrator can use global cloud manager interface application to customize the virtual environment and virtual resources of virtual cloud . In some embodiments global cloud manager interface application communicates with global cloud manager through a standard protocol such as Advanced Message Queuing Protocol AMQP . In some embodiments Internet Protocol Address Management plug in IPAM plug in installed on global cloud manager interface application allows services of IPAM appliance e.g. management of IP addresses and DNS registration for virtual resources to be utilized by global cloud manager . In some embodiments IPAM plug in enables IPAM appliance to interface with global cloud manager interface application through a web service or application programming interface API .

In some embodiments IPAM agent is connected with and or included in global cloud manager and listens to messages communicated to and from global cloud manager to detect information to be passed to IPAM appliance . This allows IPAM appliance to interface with global cloud manager . In some embodiments a stand alone interface application interfaces between global cloud manager interface application and IPAM appliance . An example of IPAM appliance includes an IPAM appliance offered by Infoblox Inc.

In some embodiments global cloud manager interface application allows a workflow to be defined and or at least in part processed. The workflow programmatically defines a series of one or more actions to be performed to manage virtual cloud . A predefined workflow may be used perform a task that otherwise would require a set of repetitive component actions to be directly used. For example a network administrator may select a workflow in global cloud manager interface application and execute the workflow that instructs global cloud manager to create a new virtual machine in virtual cloud and automatically obtain an IP address for the new virtual machine using IPAM appliance . A workflow may include the use of one or more other workflows and a plurality of workflows may be used together to accomplish a desired task.

In some embodiments IPAM plug in is installed into global cloud manager interface application and provides one or more workflows and or workflow action components that can be used to define a workflow. These workflows and workflow components may allow IPAM appliance to be used to manage one or more components resources of virtual cloud . For example IPAM plug in provides the capability to use a workflow that uses IPAM appliance to automatically assign a determined IP address and perform a DNS registration using the assigned IP address for a virtual machine created in virtual cloud .

At infrastructure metadata information is collected. In some embodiments the infrastructure metadata information is collected from a virtual cloud by an IPAM appliance. In some embodiments infrastructure metadata information is collected at a periodic interval to determine any changes to the infrastructure metadata information. In some embodiments the infrastructure metadata information is collected at least in part by using an API used to communicate with a virtual cloud. In some embodiments infrastructure metadata information is dynamically collected as virtual resources of the cloud are dynamically altered. For example the infrastructure metadata information is collected from a virtual cloud as an initial step before infrastructure metadata information is dynamically collected as virtual resources of the cloud are dynamically altered. In some embodiments the information is collected using an event generated by a virtual infrastructure e.g. collected from an AMQP Message .

In some embodiments the information is collected by crawling a virtual cloud to discover virtual resources and its associated infrastructure metadata information. In some embodiments the metadata information is collected from various virtualization and or networking tiers of a virtual cloud environment. For example a first tier metadata information pertaining to a physical layer of the virtual resource e.g. IP address MAC address host operating system is collected from one or more hypervisors a second tier metadata information associated with a virtual resource infrastructure tier is collected from an infrastructure manager that manages the virtual resource and a third tier metadata information associated with a virtual cloud infrastructure tier is obtained from a global cloud manager that manages the infrastructure manager. In the example of a virtual cloud solution offered by VMware Inc. a Fully Qualified Domain Name an IP Address and a MAC address are collected from a physical network tier metadata associated with vCenter virtual Cluster virtual Host Server and virtual Switch is collected from a virtual resource infrastructure layer and metadata associated with vCloud vOrganization vDataCenter vApp and virtual machine is collected from the cloud infrastructure layer.

In some embodiments infrastructure metadata information is collected from a physical network tier associated with hypervisors or physical servers e.g. server server hypervisor hypervisor of . Information such as a fully qualified domain name an IP address and a MAC address about a virtual resource is collected from the physical network tier. In some embodiments virtual resource infrastructure tier metadata information is obtained from an infrastructure manager e.g. infrastructure manager of . A virtual cloud can include several infrastructure managers that each manages one or more hypervisors in the virtual resource infrastructure tier. For example an infrastructure manager identifier a cluster identifier a host server identifier and a virtual switch identifier are collected from the infrastructure manager. In some embodiments virtual cloud infrastructure tier metadata information is obtained from a global cloud manager e.g. global cloud manager of . For example a cloud identifier an organization identifier a data center identifier and an external network identifier are collected from the global cloud manager.

In some cases crawling the cloud to obtain infrastructure metadata information may not be possible or efficient in determining changes to the infrastructure metadata information. In some embodiments the infrastructure metadata information is collected dynamically as an attribute of a virtual cloud is modified. For example infrastructure metadata information is collected as a virtual resource of the virtual cloud is created destroyed or modified. In some embodiments an agent in communication with a global cloud manager may detect changes to infrastructure metadata information as an instance of a virtual resource is created destroyed or modified. Additionally when a virtual resource is created destroyed or modified an IPAM appliance may be utilized to manage a network attribute e.g. automatically allocate de allocate modify an IP address of the virtual resource. This places the IPAM appliance in an opportune position to detect collect determine organize and otherwise process infrastructure metadata information as the virtual resource is created destroyed or modified. In some embodiments IPAM plug in e.g. IPAM plug in of allows the IPAM appliance to communicate with a virtual cloud and provides the IPAM appliance with infrastructure metadata information. In some embodiments the infrastructure metadata information is collected when a service is provided by an IPAM appliance e.g. IPAM appliance of to the virtual cloud. For example infrastructure metadata information about a virtual resource is collected when the IPAM appliance is used to provision an IP address for the virtual resource.

At the collected infrastructure metadata information is used to update a database of the metadata information. In some embodiments the collected metadata information is received and used to update the database of infrastructure metadata information. In some embodiments an IPAM appliance manages the database of infrastructure metadata information. For example an IPAM appliance includes the database and or is connected to the database. The database may include information associated with virtual resources as well as physical resources. For example the database includes a database entry for each virtual resource in a virtual cloud as well as entries for physical resources managed by an IPAM appliance e.g. physical clients and servers that have their IP addresses managed by the IPAM appliance .

Collected infrastructure metadata information may be tied to an end point record in a database. End point records comprise records in the database about each virtual resource in a virtual cloud. In some embodiments infrastructure metadata information may be used to organize a group of virtual machines under a virtual data center. The virtual data center is included in a group of virtual data centers organized under a single organization name. The database of infrastructure metadata may be organized sorted and or searched as desired. In some embodiments information included in the database of infrastructure metadata is displayed in a text a chart and or a graphical form. In some embodiments information included in the database of infrastructure metadata is used to generate a report.

At a request is received to provision an IP address to a virtual resource. The request may include information identifying the virtual resource to be assigned an IP address. For example the request includes a MAC address and or a Fully Qualified Domain name FQDN . In some embodiments the request is received from a global cloud manager e.g. global cloud manager of using an IPAM agent e.g. IPAM agent of . In some embodiments the request is received due to a workflow defined and or processed by a global cloud manager interface application. For example due to the workflow global cloud manager interface application uses IPAM plug in to request an IP address from IPAM appliance of . In some embodiments the received request includes a request to provision an IP address in a provided range of IP addresses.

At an IP address to allocate to the virtual resource is automatically determined. The determined IP address is an available IP address in a network. In some embodiments IPAM appliance in automatically determines the IP address. In some embodiments determining the IP address includes automatically determining an available IP address e.g. first available IP address using a record of assigned and or available IP addresses of a network. The record of available IP addresses may be stored in a database of an IPAM appliance or elsewhere that is accessible by the IPAM appliance via a network or other communication connection. In some embodiments determining the IP address includes determining an available IP address e.g. first available IP address from a provided range of IP addresses. For example a starting address and an ending address are provided by the user to designate a range of IP addresses that can be automatically provisioned to a virtual resource. In some embodiments the IP address is automatically determined due to a workflow defined and or processed by a global cloud manager interface application. In some embodiments the process of is included in step . For example the determined IP address is collected and used to update a database of infrastructure metadata associated with the virtual resource to be assigned the IP address.

At the determined IP address is allocated to the virtual resource. In some embodiments allocating the IP address includes assigning the IP address to the virtual resource and appropriately updating a record of available IP addresses. A database of infrastructure metadata information e.g. host records may also be updated to associate the virtual resource with the determined IP address. In some embodiments allocating the IP address includes providing the IP address. For example IPAM appliance provides the IP address to global cloud manager interface application using IPAM plug in or to global cloud manager using IPAM agent of . In some embodiments the determined IP address is provided to a virtual machine before it is run to allow the virtual machine to utilize the IP address to identify the virtual machine. For example an IPAM appliance sends a message to the global cloud manager to assign or inject the determined IP address to the virtual resource. In another example the IPAM appliance sends a message with the determined IP Address to the global cloud manager interface application using the IPAM plug in that sends another message to the global cloud manager to assign or inject the IP address into the virtual resource.

At a request is received to register a virtual resource with a DNS. In some embodiments this request is received in conjunction with or is the same request as the request for an IP address received at of . In some embodiments the request includes a desired domain name such as a FQDN. In some embodiments the request is received from a global cloud manager e.g. global cloud manager of using an IPAM agent e.g. IPAM agent of . In some embodiments the request is received due to a workflow defined and or processed by a global cloud manager interface application. For example due to the workflow global cloud manager interface application uses IPAM plug in to request IPAM appliance of to register a virtual resource with a DNS. In some embodiments the request includes an IP address of the virtual resource.

At the virtual resource is automatically registered with the DNS. Registering with the DNS includes associating a domain name with the IP address of the virtual resource. In some embodiments registering with the DNS includes creating or updating a DNS record of an IPAM appliance and or a Domain Name Server to associate a domain name of the virtual resource with the IP address of the virtual resource. In some embodiments registering with the DNS includes determining an available domain name and assigning the available domain to the virtual resource. In some embodiments the virtual resource is automatically registered with the DNS when an available IP address for the virtual resource is determined at of . In some embodiments the virtual resource is automatically registered with the DNS due to a workflow defined and or processed by a global cloud manager interface application. In some embodiments the process of is included in step . For example a domain of the virtual resource is collected and used to update a database of infrastructure metadata associated with the virtual resource. In some embodiments registering with the DNS includes appropriately updating a record of available domain names. A database of infrastructure metadata information e.g. host records may also be updated to associate the virtual resource with its domain name.

At information associated with the registration of the virtual resource with the DNS is provided. In some embodiments providing the associated information of the DNS registration includes providing information to update infrastructure metadata information. In some embodiments providing the associated information of the DNS registration includes providing a confirmation if the DNS registration was successful and providing an error indication if the registration was not successful. In some embodiments providing the associated information of the DNS registration includes providing the registered domain name of the virtual resource. For example IPAM appliance provides the domain name to global cloud manager interface application using IPAM plug in or to global cloud manager using IPAM agent of . In some embodiments the domain name is provided to a virtual machine before it is run to allow the virtual machine to utilize the domain name to identify the virtual machine.

At a request is received to remove a virtual resource. The request may include information identifying the virtual resource to be removed. For example the request includes an IP address MAC address and or a Fully Qualified Domain name FQDN . In some embodiments the request is received from a global cloud manager e.g. global cloud manager of using an IPAM agent e.g. IPAM agent of . In some embodiments the request is received due to a workflow defined and or processed by a global cloud manager interface application. For example due to the workflow global cloud manager interface application uses IPAM plug in to request IPAM appliance of to free an IP address and a domain name of the virtual resource to be removed.

At an IP address associated with the virtual resource is automatically released. Releasing the IP address associated with the virtual resource includes freeing the IP address of the virtual resource so that it is available to be assigned to another physical or virtual resource. In some embodiments IPAM appliance in automatically releases the IP address. In some embodiments releasing the IP address includes determining the IP address of the virtual resource using a record of assigned IP addresses of a network. In some embodiments releasing the IP address includes removing updating and or freeing an IP address record of the virtual resource to be removed. The IP address record may be stored in a database of an IPAM appliance or elsewhere that is accessible by the IPAM appliance via a network or other communication connection. In some embodiments the IP address is automatically removed due to a workflow defined and or processed by a global cloud manager interface application.

At DNS information for the virtual resource is automatically updated. In some embodiments updating the DNS information includes disassociating the IP address of the virtual resource with the domain name of the virtual resource. In some embodiments updating the DNS includes information removing or updating a DNS record of an IPAM appliance and or a Domain Name Server to free the domain name of the virtual resource by disassociating the IP address with the domain name. For example a message is sent to a Domain Name Server to remove or de register the virtual resource from the DNS records. In some embodiments the DNS information for the virtual resource is automatically updated due to a workflow defined and or processed by a global cloud manager interface application.

At stored infrastructure metadata information about the virtual resource is automatically updated. In some embodiments updating the infrastructure metadata information includes updating the database of of . For example at least a portion of infrastructure metadata information e.g. IP address and domain name information about the virtual resource is deleted and or updated. In some embodiments updating the stored infrastructure metadata information includes updating or deleting portions of information collected in of . In some embodiments updating the infrastructure metadata information includes updating a list of available IP addresses and or domain names for a virtual cloud environment. In some embodiments a workflow is used to automatically and programmatically manage allocation management of IP address and DNS registration. The workflows allow grouping and combining of tasks to automate management of a virtual cloud environment. Workflows may be used to automate managing the virtual cloud environment.

In some embodiments a global cloud manager interface application includes pre defined and customizable workflows that provide a user friendly interface for managing a virtual cloud environment. In some embodiments an IPAM plug in e.g. IPAM plug in of provides IP address and DNS management functionality to the workflows and functions already included in a global cloud manager interface application. In some embodiments the IPAM plug in includes pre determined workflows such as workflows that perform the following functionality reserve an IP address reserve an IP address in a range remove a virtual machine create a VMware vApp configured by an IPAM appliance and destroy a VMware vApp in IPAM appliance records. IPAM plug in provides an interface with an IPAM appliance that provides these functions.

Actions are components that make up a workflow and represent individual sub tasks executed to manage the virtual cloud environment. In some embodiments actions are implemented as JavaScript segments that use an API provided by an IPAM plug in to interface with an IPAM appliance. Examples of IPAM plug in provided actions that can be used in an existing workflow or used to create a new workflow include the following add virtual machine add virtual machine in a range of IP addresses connect to IPAM appliance get next available IP address get next available IP address from range remove virtual machine restart IPAM services update virtual machine MAC address validate IP address add virtual machine to DNS delete virtual machine to DNS and update virtual machine to DNS. In some embodiments in order for an IPAM appliance to connect with a global cloud manager interface application the IPAM plug in provides an action for connecting to an IPAM appliance. In some embodiments connecting to an IPAM appliance includes providing a username and a password to authenticate the user s authorization to use or configure IPAM appliance services. In some embodiments the IPAM plug in provides actions to control the IPAM appliance from the global cloud manager interface application including the ability to restart IPAM appliance services.

Although the foregoing embodiments have been described in some detail for purposes of clarity of understanding the invention is not limited to the details provided. There are many alternative ways of implementing the invention. The disclosed embodiments are illustrative and not restrictive.

