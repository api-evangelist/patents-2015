---

title: Triggering workload movement based on policy stack having multiple selectable inputs
abstract: A policy management tool can access a set of usage history data for a set of resources consumed by the workload and generate a migration policy stack in view of a set of user-selected policy parameters, wherein the set of user-selected policy parameters comprises a set of multiple selectable inputs, and the migration policy stack comprises a set of one or more migration policies. The policy management tool can evaluate the set of one or more workload migration policies in view of the set of usage history data to configure a migration of the workload, and schedule the migration of the workload in view of the evaluating.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09602592&OS=09602592&RS=09602592
owner: Red Hat, Inc.
number: 09602592
owner_city: Raleigh
owner_country: US
publication_date: 20150518
---
This application is a continuation of U.S. patent application Ser. No. 13 149 418 filed May 31 2011 the entire contents of which are hereby incorporated by reference herein.

The invention relates generally to systems and methods for triggering workload movement based on a policy stack having multiple selectable inputs and more particularly to platforms and techniques for building and applying a migration policy stack that can be used to govern migration policies for workloads operating in a cloud where the policy stack can be based on or a function of multiple selectable inputs can be dynamically varying at different times and or different conditions and which can be updated at any time with further user selections or other policy changes.

The advent of cloud based computing architectures has opened new possibilities for the rapid and scalable deployment of virtual Web stores media outlets social networking sites and many other on line sites or services. In general a cloud based architecture deploys a set of hosted resources such as processors operating systems software and other components that can be combined together to form virtual machines. A user or customer can request the instantiation of a virtual machine or set of machines from those resources from a central server or cloud management system to perform intended tasks services or applications. For example a user may wish to set up and instantiate a virtual server from the cloud to create a storefront to market products or services on a temporary basis for instance to sell tickets to or merchandise for an upcoming sports or musical performance. The user can subscribe to the set of resources needed to build and run the set of instantiated virtual machines on a comparatively short term basis such as hours or days for their intended application.

Typically when a user utilizes a cloud the user must track the software applications executed in the cloud and or processes instantiated in the cloud. For example the user must track the cloud processes to ensure that the correct cloud processes have been instantiated that the cloud processes are functioning properly and or efficiently that the cloud is providing sufficient resources to the cloud processes and so forth. Due in part to the user s requirements and overall usage of the cloud the user may have many applications and or processes instantiated in a cloud at any given instant and the user s deployment of virtual machines software and other resources can change dynamically over time. In cases the user may also utilize multiple independent host clouds to support the user s cloud deployment. That user may further instantiate and use multiple applications or other software or services inside or across multiple of those cloud boundaries and those resources may be used or consumed by multiple or differing end user groups in those different cloud networks.

In terms of the management of a set of virtual machines operated by a user in a cloud at times the user s consumption of resources in the cloud can vary and or spike at different times and or under different conditions. Since in one regard consumption spikes may entail enhanced or increased subscription costs to the user that user may wish to attempt to manage their executing workload by way of potential migration to lower cost or otherwise alternative host clouds or providers. Existing cloud management platforms do not provide the cloud user or operator with tools to configure or manage a set of policies to trigger those types of migrations based on dynamically changing parameters or conditions which can be set to comprise different types depths dependencies and or other combinations of workload parameters at different times or under different resource consumption conditions such as functionally tying resource consumption limits or thresholds to dynamic workload conditions such as varying transaction rates or messaging throughput for example.

It may be desirable to provide systems and methods for triggering workload movement based on a policy stack having multiple selectable inputs in which a user can set up configure and administer a migration policy stack which can combine multiple or different selectable triggers conditions and or functions to initiate workload migrations based on criteria which can dynamically change at different times or otherwise adapt to different operating conditions of the user s workload or workloads.

Embodiments described herein can be implemented in or supported by a cloud network architecture. As used herein a cloud can comprise a collection of hardware software services and or resources that can be invoked to instantiate a virtual machine process or other resource for a limited or defined duration. As shown for example in the collection of resources supporting a cloud can at a hardware level comprise a set of resource servers configured to deliver computing components needed to instantiate a virtual machine process service or other resource. For example one group of resource servers in set of resource servers can host and serve an operating system and or components utilities or interfaces related to that operating system to deliver to a virtual target and instantiate that machine with an image of that operating system. Another group of servers in set of resource servers can accept requests to host computing cycles or processor time memory allocations communications ports or links and or other resources to supply a defined level of processing power or throughput for a virtual machine. A further group of resource servers in set of resource servers can host and serve applications or other software to load on an instantiation of a virtual machine such as an email client a browser application a messaging application or other applications software or services. Other types of resource servers can be used to support one or more clouds .

In embodiments the entire set of resource servers and or other hardware or software resources used to support one or more clouds along with the set of instantiated virtual machines can be managed by a cloud management system . The cloud management system can comprise a dedicated or centralized server and or other software hardware services and network tools that communicate via network such as the Internet or other public or private network with all servers in set of resource servers to manage the cloud and its operation. To instantiate a new or updated set of virtual machines a user can transmit an instantiation request to the cloud management system for the particular type of virtual machine they wish to invoke for their intended application. A user can for instance make a request to instantiate a set of virtual machines configured for email messaging or other applications from the cloud . The virtual machines can be instantiated as virtual client machines virtual appliance machines consisting of special purpose or dedicated task machines as understood in the art and or as other virtual machines or entities. The request to invoke and instantiate the desired complement of virtual machines can be received and processed by the cloud management system which identifies the type of virtual machine process or other resource being requested in that platform s associated cloud. The cloud management system can then identify the collection of hardware software service and or other resources necessary to instantiate that complement of virtual machines or other resources. In embodiments the set of instantiated virtual machines or other resources can for example and as noted comprise virtual transaction servers used to support Web storefronts Web pages and or other transaction sites.

In embodiments the user s instantiation request can specify a variety of parameters defining the operation of the set of virtual machines to be invoked. The instantiation request for example can specify a defined period of time for which the instantiated collection of machines services or processes is needed. The period of time can be for example an hour a day a month or other interval of time. In embodiments the user s instantiation request can specify the instantiation of a set of virtual machines or processes on a task basis rather than for a predetermined amount or interval of time. For instance a user could request a set of virtual provisioning servers and other resources until a target software update is completed on a population of corporate or other machines. The user s instantiation request can in further regards specify other parameters that define the configuration and operation of the set of virtual machines or other instantiated resources. For example the request can specify a specific minimum or maximum amount of processing power or input output I O throughput that the user wishes to be available to each instance of the virtual machine or other resource. In embodiments the requesting user can for instance specify a service level agreement SLA acceptable for their desired set of applications or services. Other parameters and settings can be used to instantiate and operate a set of virtual machines software and other resources in the host clouds. One skilled in the art will realize that the user s request can likewise include combinations of the foregoing exemplary parameters and others. It may be noted that user herein can include a network level user or subscriber to cloud based networks such as a corporation government entity educational institution and or other entity including individual users and groups of users.

When the request to instantiate a set of virtual machines or other resources has been received and the necessary resources to build those machines or resources have been identified the cloud management system can communicate with one or more set of resource servers to locate resources to supply the required components. Generally the cloud management system can select servers from the diverse set of resource servers to assemble the various components needed to build the requested set of virtual machines services or other resources. It may be noted that in some embodiments permanent storage such as optical storage or hard disk arrays may or may not be included or located within the set of resource servers available to the cloud management system since the set of instantiated virtual machines or other resources may be intended to operate on a purely transient or temporary basis. In embodiments other hardware software or other resources not strictly located or hosted in one or more clouds can be accessed and leveraged as needed. For example other software or services that are provided outside of one or more clouds acting as hosts and are instead hosted by third parties outside the boundaries of those clouds can be invoked by in cloud virtual machines or users. For further example other non cloud hardware and or storage services can be utilized as an extension to the one or more clouds acting as hosts or native clouds for instance on an on demand subscribed or event triggered basis.

With the resource requirements identified for building a network of virtual machines the cloud management system can extract and build the set of virtual machines or other resources on a dynamic on demand basis. For example one set of resource servers may respond to an instantiation request for a given quantity of processor cycles with an offer to deliver that computational power immediately and guaranteed for the next hour or day. A further set of resource servers can offer to immediately supply communication bandwidth for example on a guaranteed minimum or best efforts basis for instance over a defined window of time. In other embodiments the set of virtual machines or other resources can be built on a batch basis or at a particular future time. For example a set of resource servers may respond to a request for instantiation of virtual machines at a programmed time with an offer to deliver the specified quantity of processor cycles within a specific amount of time such as the next 12 hours. Other timing and resource configurations are possible.

After interrogating and receiving resource commitments from the set of resource servers the cloud management system can select a group of servers in the set of resource servers that match or best match the instantiation request for each component needed to build the user s requested virtual machine service or other resource. The cloud management system for the one or more clouds acting as the destination for the virtual machines can then coordinate the integration of the identified group of servers from the set of resource servers to build and launch the requested set of virtual machines or other resources. The cloud management system can track the identified group of servers selected from the set of resource servers or other distributed resources that are dynamically or temporarily combined to produce and manage the requested virtual machine population services or other cloud based resources.

In embodiments the cloud management system can generate a resource aggregation table or other record that identifies the various selected sets of resource servers in set of resource servers that will be used to supply the components of the set of instantiated virtual machines services or processes. The selected sets of resource servers can be identified by unique identifiers such as for instance Internet protocol IP addresses or other addresses. In aspects different sets of servers in set of resource servers can be selected to deliver different resources to different users and or for different applications. The cloud management system can register the finalized group of servers in the set resource servers contributing to or otherwise supporting the set of instantiated machines services or processes.

The cloud management system can then set up and launch the initiation process to instantiate the virtual machines processes services and or other resources to be hosted and delivered from the one or more clouds . The cloud management system can for instance transmit an instantiation command or instruction to the registered group of servers in the set of resource servers . The cloud management system can receive a confirmation message back from each registered server in set of resource servers indicating a status or state regarding the provisioning of their respective resources. Various registered resource servers may confirm for example the availability of a dedicated amount of processor cycles amounts of electronic memory communications bandwidth services and or applications or other software prepared to be served and delivered.

As shown for example in after coordination of the sources and configuration of resources including the hardware layer selected software and or other resources the cloud management system can then instantiate a set of virtual machines and or other appliances services processes and or entities based on the resources supplied by servers within set of resource servers registered to support the one or more clouds in a multiple cloud network . According to aspects cloud management system can access or interact with a virtualization module platform or service to instantiate and operate set of virtual machines such as the kernel based virtualization manager KVM available from Red Hat Inc. of Raleigh N.C. or others. In embodiments the cloud management system can instantiate a given number for example 10 500 1000 20 000 or other numbers or instances of virtual machines to populate one or more clouds and be made available to users of that cloud or clouds. In aspects users may access the one or more clouds via the Internet or other public or private networks. Each virtual machine can be assigned an instantiated machine ID that can be stored in the resource aggregation table or other record or image of the instantiated virtual machine population. Additionally the cloud management system can store data related to the duration of the existence or operation of each operating virtual machine as well as the collection of resources utilized by the overall set of instantiated virtual machines .

In embodiments the cloud management system can further store track and manage each user s identity and associated set of rights or entitlements to software hardware and other resources. Each user that operates a virtual machine or service in the set of virtual machines in the cloud can have specific rights and resources assigned and made available to them with associated access rights and security provisions. The cloud management system can track and configure specific actions that each user can perform such as the ability to provision a set of virtual machines with software applications or other resources configure a set of virtual machines to desired specifications submit jobs to the set of virtual machines or other host manage other users of the set of instantiated virtual machines or other resources and or other privileges entitlements or actions. The cloud management system associated with the virtual machine s of each user can further generate records of the usage of instantiated virtual machines to permit tracking billing and auditing of the resources and services consumed by the user or set of users. In aspects of the present teachings the tracking of usage activity for one or more user including network level user and or end user can be abstracted from any one cloud to which that user is registered and made available from an external or independent usage tracking service capable of tracking software and other usage across an arbitrary collection of clouds as described herein. In embodiments the cloud management system of an associated cloud can for example meter the usage and or duration of the set of instantiated virtual machines to generate subscription and or billing records for a user that has launched those machines. In aspects tracking records can in addition or instead be generated by an internal service operating within a given cloud. Other subscription billing entitlement and or value arrangements are possible.

The cloud management system can configure each virtual machine in set of instantiated virtual machines to be made available to users via one or more networks such as the Internet or other public or private networks. Those users can for instance access set of instantiated virtual machines via a browser interface via an application server such as a Java server via an application programming interface API and or other interface or mechanism. Each instantiated virtual machine in set of instantiated virtual machines can likewise communicate with its associated cloud management system and the registered servers in set of resource servers via a standard Web application programming interface API or via other calls protocols and or interfaces. The set of instantiated virtual machines can likewise communicate with each other as well as other sites servers locations and resources available via the Internet or other public or private networks whether within a given cloud in one or more clouds or between those or other clouds.

It may be noted that while a browser interface or other front end can be used to view and operate the set of instantiated virtual machines from a client or terminal the processing memory communications storage and other hardware as well as software resources required to be combined to build the virtual machines or other resources are all hosted remotely in the one or more clouds . In embodiments the set of virtual machines or other services machines or resources may not depend in any degree on or require the user s own on premise hardware or other resources. In embodiments a user can therefore request and instantiate a set of virtual machines or other resources on a purely off premise basis for instance to build and launch a virtual storefront messaging site and or any other application. Likewise one or more clouds can also be formed in whole or part from resources hosted or maintained by the users of those clouds themselves.

Because the cloud management system in one regard specifies builds operates and manages the set of instantiated virtual machines on a logical or virtual level the user can request and receive different sets of virtual machines and other resources on a real time or near real time basis without a need to specify install or configure any particular hardware. The user s set of instantiated virtual machines processes services and or other resources can in one regard therefore be scaled up or down immediately or virtually immediately on an on demand basis if desired. In embodiments the set of resource servers that are accessed by the cloud management system to support the set of instantiated virtual machines or processes can change or be substituted over time. The type and operating characteristics of the set of instantiated virtual machines can nevertheless remain constant or virtually constant since instances are assembled from a collection of abstracted resources that can be selected and maintained from diverse sources based on uniform specifications. Conversely the users of the set of instantiated virtual machines can also change or update the resource or operational specifications of those machines at any time. The cloud management system and or other logic can then adapt the allocated resources for that population of virtual machines or other entities on a dynamic basis.

In terms of network management of the set of instantiate virtual machines that have been successfully configured and instantiated the one or more cloud management systems associated with those machines can perform various network management tasks including security maintenance and metering for billing or subscription purposes. The cloud management system of one or more clouds can for example install initiate suspend or terminate instances of applications or appliances on individual machines. The cloud management system can similarly monitor one or more operating virtual machines to detect any virus or other rogue process on individual machines and for instance terminate an application identified as infected or a virtual machine detected to have entered a fault state. The cloud management system can likewise manage the set of instantiated virtual machines or other resources on a network wide or other collective basis for instance to push the delivery a software upgrade to all active virtual machines or subsets of machines. Other network management processes can be carried out by cloud management system and or other associated logic.

In embodiments more than one set of virtual machines can be instantiated in a given cloud at the same time at overlapping times and or at successive times or intervals. The cloud management system can in such implementations build launch and manage multiple sets of virtual machines as part of the set of instantiated virtual machines based on the same or different underlying set of resource servers with populations of different virtual machines such as may be requested by the same or different users. The cloud management system can institute and enforce security protocols in one or more clouds hosting one or more sets of virtual machines. Each of the individual sets or subsets of virtual machines in the set of instantiated virtual machines can be hosted in a respective partition or sub cloud of the resources of the main cloud . The cloud management system of one or more clouds can for example deploy services specific to isolated or defined sub clouds or isolate individual workloads processes within the cloud to a specific sub cloud or other sub domain or partition of the one or more clouds acting as host. The subdivision of one or more clouds into distinct transient sub clouds sub components or other subsets which have assured security and isolation features can assist in establishing a multiple user or multi tenant cloud arrangement. In a multiple user scenario each of the multiple users can use the cloud platform as a common utility while retaining the assurance that their information is secure from other users of the same one or more clouds . In further embodiments sub clouds can nevertheless be configured to share resources if desired.

In embodiments and as also shown in the set of instantiated virtual machines generated in a first cloud in one or more clouds can also interact with a set of instantiated virtual machines services and or processes generated in a second third or further cloud in one or more clouds comprising a multiple cloud network . The cloud management system of a first cloud of one or more clouds can interface with the cloud management system of a second third or further cloud of one or more clouds to coordinate those domains and operate the clouds and or virtual machines services and or processes on a combined basis. The cloud management system of a given cloud on one or more clouds can in aspects track and manage individual virtual machines or other resources instantiated in that cloud as well as the set of instantiated virtual machines or other resources in other clouds.

In the foregoing and other embodiments the user making an instantiation request or otherwise accessing or utilizing the cloud network can be a person customer subscriber administrator corporation organization government and or other entity. In embodiments the user can be or include another virtual machine application service and or process. In further embodiments multiple users or entities can share the use of a set of virtual machines or other resources.

Aspects of the present teachings relate to platforms and techniques in which a policy management tool and or other application service and or logic can build maintain and apply a migration policy stack comprising a set of rules thresholds parameters functions and or other criteria or policies by which the migration of one or more workloads to a new host target cloud can be analyzed and potentially carried out. In aspects the migration policy stack can be automatically generated and or initiated in whole or part by the policy management tool itself although in implementations the migration policy stack can in addition or instead be generated and or initiated through manual inputs and or selections received from a user. In aspects the rules and or other criteria contained in the migration policy stack can be configured in layers and or to form compound policies which can depend on or be a function of other policies and or conditions so that the resulting migration policy stack may not be fixed or static in nature but instead may represent a set of decision logic that is dynamic and or time varying in nature. In implementations a user can update or alter the migration policy stack at any time through a graphical or other interface creating additional flexibility in workload operations and management.

Consistent with the foregoing in general shows an illustrative network configuration in which systems and methods for triggering workload movement based on a policy stack having multiple selectable inputs can be implemented according to various embodiments. In embodiments as shown one or more users can operate a user premise such as a local area network with a set of servers and client machines and or other machines or resources. In aspects a set of users can in addition or instead operate one or more sets of virtual machines appliances and or other virtual entities not shown in a set of host clouds . In aspects the set of users can be or include a collection of sub groups of users who are each affiliated with or a part of the same entity such as a corporation government entity and or other organization. In aspects the corporation and or other collective entity can establish overall subscription parameters to which its users are entitled on a collective basis. In cases the individual teams or users may not be aware or have a mechanism by which to track overall resource consumption on a collective basis for instance to maintain service or resource level limits.

According to aspects systems and methods according to the present teachings can permit centralized processing of workload management and migration policies among other management functions and controls. In aspects the set of host clouds hosting the set of users can include a set of diverse and or otherwise unrelated cloud based networks to which the set of users can subscribe for various resources under various subscription terms limits criteria service level agreements and or other conditions which can be recorded or reflected in a set of subscription parameters . The set of subscription parameters can for instance be stored in the cloud store hosted or accessed by a cloud management system and or in other storage resources or locations.

In embodiments as shown an administrator and or other user can operate a client or other interface or terminal for instance a client located in or communicating with the user premise to access the set of subscription parameters and other information related to the consumption of resources in the set of host clouds by the set of users . In aspects the consumption of resources in the set of host clouds and generation of related billing events and other subscription related activities can be tracked and managed by an entitlement engine which can be hosted in the cloud management system and or in other locations resources or services. According to aspects the entitlement engine can communicate with a one or more resource providers such as the vendors of software such as operating systems applications utilities and or other programs services and or related resources. The one or more resource providers can maintain part or all of the terms conditions limits criteria stipulations and or other parameters of the subscription of the set of users to one or more resources hosted or provisioned in the set of host clouds and for instance reflected in the set of subscription parameters .

In aspects each host cloud in the set of host clouds can capture and store a set of local usage data . The set of local usage data can record the consumption or use of resources in a local host cloud in the set of host clouds such as the number of instances of software including operating systems and applications processor resources memory resources communications resources storage resources and or other elements or resources. The set of local usage data can include usage data for one some and or all of the set of users operating virtual machines or otherwise consuming resources in each particular host cloud. The entitlement engine can periodically receive the set of local usage data and or updates to that information from one or more host clouds in the set of host clouds . The receipt of the set of local usage data or any portion of the set of local usage data can be performed in aspects on a pull or demand basis where the entitlement engine and or other logic can issue commands or instructions to one or more host clouds in the set of host clouds and receive that data back from the interrogated cloud or clouds. In aspects the set of local usage data can be transmitted to the entitlement engine on a push basis for instance on a scheduled predetermined event triggered and or other basis initiated by one or more of the host clouds in set of host clouds themselves. Other channels schedules and techniques for the collection of the set of local usage data from any one or more of the set of host clouds can be used.

After receipt of the set of local usage data any portion or component of the set of local usage data and or updates to the same the entitlement engine can collect and aggregate the set of local usage data from the various host clouds and organize that data in a set of aggregate usage history data . The set of aggregate usage history data can reflect recent and or accumulated usage consumption by the set of users and or any one user or other subset thereof in all of the set of host clouds over comparatively short term periods or intervals such as minutes one or more hours one day a number of days a week a month or months and or other intervals or periods. In aspects the entitlement engine can collect the set of local usage data regardless of whether each of those clouds is configured to communicate with each other or not. In aspects the set of aggregate usage history data can present to the entitlement engine and or other logic the combined resource consumption by the set of users across the user premise and or all operating virtual machines or entities on an hour by hour day by day and or other relatively short term basis.

According to aspects the entitlement engine can thereby identify comparatively short term resource consumption by the virtual machines or other entities sites or nodes operated by the set of users and capture and track that consumption compared to the short term limits levels thresholds ceilings or caps that may be contained in the set of subscription parameters for that user. The entitlement engine can therefore generate or determine a short term consumption margin for each resource which the set of users consume and or subscribe to in each cloud in the set of host clouds indicating whether over the course of an hour or other period the consumption rates or values are over the subscription limit for a given resource under the subscription limit or at or nearly at the subscription limit for that resource.

Both the over and under consumption margins for each resource can be captured and calculated from which the entitlement engine can generate a set of short term user aggregated margins representing the collective short term consumption of that resource across the diverse host clouds in set of host clouds resulting in an offset or aggregate consumption value. Deviations from short term consumption caps limits service level agreements SLAs and or other criteria can therefore be combined averaged aggregated and or otherwise smoothed out to more accurately and or timely reflect the consumption patterns of the set of users as a whole on an aggregate basis. In aspects the resource provider the cloud operators or providers of the set of host clouds and or other entities can thereby charge bill or otherwise adjust the subscription costs or other factors encoded in the billing record sent to the set of users for instance via an administrator or other users so that their subscription obligations more closely track the actual consumption behavior demonstrated by the set of users . In aspects the set of short term user aggregated margins can for instance be used to establish short term marginal subscription costs based on short term deviations from any subscription consumption limits which costs can then be combined over different time periods to further average or aggregate the deviations in resource consumption. In aspects the detection of bursts and relaxations in resource consumption over relatively short term periods can thereby allow both positive and negative offsets or margins in subscription costs creating a more accurate assignment of subscription rates. In embodiments as shown the over consumption of one or more resources and or related events can be reflected in a set of over subscription conditions which can include records indicating the degree by which various resources processor memory storage operating system application etc. exceeds any subscription caps or levels in a given interval of time.

In implementations as shown after detecting the set of short term user aggregated margins for each resource of interest the entitlement engine can generate a billing record reflecting that event for purposes of notification to the user and collection of billing amounts or other responses. In aspects the entitlement engine can transmit or forward the billing record to the resource provider such as a software vendor to produce and transmit to the user under agreed billing arrangements. In aspects the entitlement engine can transmit or forward the billing record to one or more host clouds in set of host clouds including those in which an over limit resource usage or other event took place to potentially transmit to the set of users and or other recipient for similar purposes. In aspects the resource provider and one or more cloud operators or cloud providers of the set of host clouds can maintain agreements or arrangements for the capture and forwarding of the billing record and the collection of any billing amounts or credits paid by the user. In aspects the resource provider and the host cloud providers or operators can establish arrangements to share or distribute any overage payments or other payments or credits received from users between themselves. According to aspects the monitoring and billing capture of short or long term over limit resource consumption can therefore be conducted on a marginal offset or other basis even in instances where each host cloud in set of host clouds is not aware of subscription limits contained in the set of subscription parameters and or the local usage data of one or more of the set of host clouds is not visible to other host clouds and or all groups or sub groups of users within the set of users and or to other participants in the cloud based network.

In implementations the cloud management system and or other server logic and or resource of the set of host clouds and or other clouds or networks can be configured with a policy management tool which can be or include application s software logic services hardware and or other resources used to implement various processing and decisions for initiating building maintaining and applying a migration policy stack that can be used to monitor direct and manage the migration of one or more workloads which are operating and or executing in the set of host clouds and or other hosts. In aspects the policy management tool can access information regarding the resource consumption of the one or more workloads via the set of aggregate usage history data and or other data sources or records and determine the overall operating condition of the one or more workloads including rates of resource consumption e.g. processor memory storage operating system instances application instances by the set of virtual machines executing and or supporting the one or more workloads . In cases the user or operator of the one or more workloads may wish to consider moving or migration the one or more workloads to one or more target clouds due to under consumption over consumption and or other operating conditions of the one or more workloads . In the case of under consumption the user or operator may wish to migrate the one or more workloads because the user is over committed in terms of their set of subscription parameters to more hardware software and or other resources than the one or more workloads demand or require so that potentially reduced costs and or other benefits can be achieved by migrating the one or more workloads to the one or more target clouds under more favorable subscription terms. In the case of over consumption the user or operator may wish to migrate the one or more workloads because the user is under subscribed in terms of their set of subscription parameters for the hardware software and or other resources than the one or more workloads demand or require. In that case avoidance of enhanced subscription charges and other cost reductions and or other benefits can be achieved by migrating the one or more workloads to the one or more target clouds with larger capacities and or increased or scaled resources so that migration will also represent subscription benefits. In aspects to assist with those and other operations the policy management tool can build and maintain the migration policy stack to establish and apply migration policies that can in general change or vary depending on conditions in the one or more workloads and or other factors.

To perform those policy related tasks the policy management tool and or other logic application and or service can interact with a selection interface such as a graphical or other user interface on a client or other machine to receive selections and or inputs from the administrator and or other user of the one or more workloads to develop migration conditions and rules. In general the user can operate the selection interface and or other interface or channel to supply or select a set of user supplied policy parameters to analyze organize and guide the migration of one or more workloads to one or more target clouds . In aspects the set of user supplied policy parameters can be or include data variables parameters thresholds functions and or criteria such as rules or logic relate to consumption rates for various resources used in one or more workloads time periods over which the one or more workloads operates and or resources and or other factors variables and or criteria. In aspects for example the user can operate the selection interface to provide a set of user supplied policy parameters that indicate that migration should be performed or considered each night from Monday through Friday from 9 00 p.m. to 6 00 a.m. if the transaction rate for the one or more workloads falls below a rate of 10 transactions second for more than 30 minutes. The user can likewise operate the selection interface to provide a set of user supplied policy parameters that indicate that migration should be performed or considered each night Saturday and Sunday from 8 00 a.m. to 11 00 p.m. if the transaction rate for the one or more workloads falls below a rate of 15 transactions second for more than 60 minutes. In aspects the user can operate the selection interface to input or select a set of user supplied policy parameters which comprise configure and or generate one or more compound migration parameters which can represent a sequence or layers of parameters which are functionally inter related to each other to create a contingent or dynamic policy. The one or more compound migration parameters can be or include for instance an indication that migration should be evaluate when processor usage falls below 80 of subscription limits and operating system instances fall below 70 of subscription limits from 1 00 p.m. to 5 00 p.m. then migration should be evaluated to send one or more workloads to Cloud A in the one or more target clouds unless Cloud A reports greater than 90 resource usage load in which case an evaluation should be made to send one or more workloads to Cloud B in the one or more target clouds . Additional and or other constraints thresholds logic functions and or factors can be used in the migration policy stack the set of user supplied policy parameters the one or more compound migration parameters and or other variables functions and or criteria.

Upon determining that one or more policies reflected in the migration policy stack permit or require the migration of the one or more workloads to one or more clouds in the one or more target clouds the policy management tool and or other logic can interact with a workload migration scheduler to schedule one or more movements or migrations of the one or more workloads to those host target s . In cases the workload migration scheduler can initiate an immediate real time and or near real time migration or deployment of the one or more workloads to the selected one or more target clouds and or can schedule a migration of the one or more workloads for a later time or date. In cases the one or more workloads and or portions thereof can be migrated directly to a single host cloud in the one or more target clouds or in cases the one or more workloads and or portions thereof can be migrated to multiple target clouds in the one or more target clouds and or can migrated to different target hosts at different times. Other migration techniques schedules channels and or conditions can be used.

In terms of data capture of the usage subscription billing and related information used to detect and record resource consumption excess resource capacity flows and or other information and or other events illustrates an aggregate usage history record that can be used to store the set of aggregate usage history data which can store and encode various data attributes criteria and or other information used to track and manage the differential or marginal resource consumption in the set of host clouds and or other host sites by the set of users . In aspects the aggregate usage history record can be encoded as a relational or other database table tree file object and or other data store or data structure. In aspects as shown the set of aggregate usage history data encoded and stored in the aggregate usage history record can include tables entries values attributes and or other information including set of short term consumption data reflecting the usage of one or more resources in the set of host clouds by each user in the set of users over one or more short term consumption periods . In aspects the one or more short term consumption periods can be or include a variety of periods or intervals such as one hour intervals as shown but can also be or include other periods or intervals such as 1 5 10 15 and or 30 minutes 2 hours 8 hours 12 hours one day or 24 hours 3 days one week and or other time intervals or periods. In aspects the one or more short term consumption periods can reflect a period or interval or periods or intervals that is are shorter than the period called for in the set of subscription parameters as the basic or defined interval in terms of resource consumption limits or levels service level agreements SLAs and or other subscription criteria or settings. In aspects the short term subscription period can be defined to be equal to the subscription period s or interval s defined by the set of subscription parameters . In aspects the value length or short term nature of the one or more short term consumption periods can be configured as dynamic flexible or configurable units rather than defined as a strict number of minutes hours days and or weeks or other units. In aspects the short term subscription period can be set or configured by a user such as the cloud provider s or cloud operator s of the set of host clouds by the one or more resource providers by the set of users whose set of aggregate usage history data is being track and administered and or by other users or entities. In aspects a record can be kept in the aggregate usage history record recording for each cloud in the set of host clouds in which the set of users subscribes and or uses or consumes resources the short term consumption data indicating an amount rate or other metric of resource consumption over each of the one or more short term consumption periods .

In aspects as shown the aggregate usage history record can likewise include for each cloud in the set of host clouds and each resource consumed or used in that cloud the short term consumption limit for that user based on the set of subscription parameters and or other information for each user in the set of users . In aspects the entitlement engine and or other logic can generate and store a short term subscription margin reflecting the deviation in terms of under consumption or over consumption of each resource for which each user in the set of users has a short term subscription limit . The short term subscription margin can thereby reflect on a comparatively short term basis such as every 15 or 30 minutes hour 8 hour one day or other period the marginal amount by which the consumption of a subscribed resource by the set of users is fluctuating and possibly deviating from the short term consumption limit . In aspects the short term subscription margin can reflect a negative value indicating that a lesser amount of one or more resource is being consumed or has been consumed compared to limits or levels in the set of subscription parameters . In aspects the short term subscription margin can reflect a positive value indicating that a greater amount of one or more resource is being consumed or has been consumed compared to limits or levels in the set of subscription parameters .

In aspects the entitlement engine and or other logic can similarly collect and sum or aggregate the short term subscription margin over each host cloud in the set of host clouds in which the set of users is using or consuming the subject resource to generate a set of short term user aggregated margins representing the comparatively short term or immediate net consumption of the resource over the set of users . In aspects the set of short term user aggregated margins can also be aggregated over two or more clouds of the set of host clouds . The set of short term user aggregated margins can be calculated and stored for each hour and or other period represented by the one or more short term consumption periods for instance over the course of one hour day one week one month and or other period or interval. In aspects as shown the entitlement engine and or other logic or service can further calculate and store an aggregate consumption total over a defined period such as a one day or other period summing or aggregating the set of short term user aggregated margins for a resource for one user over that period. In aspects the aggregate consumption total can thereby encode the combined net averaged and or otherwise aggregated effect of the various under and over limit consumption events by the set of users in the set of host clouds over 12 hours 24 hours and or other predetermined interval. The entitlement engine and or other logic can in addition also calculate and store a set of offset subscription costs reflecting the costs surcharges credits and or other adjustments for each hour and or other period in the one or more short term consumption periods for a particular resource across the set of users . A resource provider cloud operator and or other entity may be entitled for instance to an overage subscription fee or charge at a rate of 0.50 per instance for operating system OS instances over the short term consumption limit based on that usage and or other adjustments or factors. In aspects the set of offset subscription costs can be computed at a fixed rate and or at a dynamically adjusted rate for instance based on time of usage total resource consumption and or other parameters. The entitlement engine and or other service or logic can also generate an aggregate offset subscription cost which combines or sums the set of offset subscription costs for each of the one or more short term consumption periods for a predetermined period such as one day one week one month and or other period or interval across the set of users . The aggregate offset subscription cost and other consumption variables and cost factors can in aspects thereby more accurately correspond to the overall rate or absolute amount of resource consumption in the set of host clouds by the set of users . In embodiments the entitlement engine and or other logic can in addition combine sum and or otherwise aggregate or net the aggregate offset subscription cost for multiple individual resources whose consumption data in turn has been aggregated across multiple host clouds in the corresponding aggregate offset subscription cost to generate a total offset subscription cost . In aspects the total offset subscription cost can encapsulate the net marginal resource usage by the set of users against all short term consumption limits with associated costs or credits across all host clouds in the set of host clouds all subscribed resources and or all daily or other operative time periods constructed from the one or more short term consumption periods .

In aspects and as likewise shown in the entitlement engine and or other logic or service can also store a migration schedule record indicating which cloud or cloud in the one or more target clouds the one or more workloads and or portions thereof will be migrated to and the time periods and or intervals for which those workload processes will be migrated to the selected target host or hosts.

According to those and related aspects of the present teachings and as for example further shown in the migration policy stack can comprise or contain a set of one or more policies P P P . . . which are to be evaluated applied computed or for which results shall otherwise be generated based on the conditions reflected in the one or more workloads at one or more periods of time. In aspects it may be noted that different policies contained in the migration policy stack can be applied at or over different time periods. In aspects the any one or more of the policies contained in the migration policy stack can be made to be a function of another policy or policies so that different combinations or layers of policies can be enforced or applied at different times or under different conditions. In aspects the policies in the migration policy stack can be assigned different priorities or weights for instance according to weights supplied by the user in the set of user supplied policy parameters so that merely for instance a minimum communications bandwidth of 2 Gigabytes sec has a weight of 1.0 between 2 00 p.m. and 5 00 p.m. On Mondays and Tuesdays and a weight of 0.8 at other times. Other configurations settings parameters and or logic can be stored or encode in the migration policy stack and or associated data.

In the entitlement engine and or other logic can sum the short term subscription margin across all users in the set of users and or all host clouds for each period of the one or more short term consumption periods to generate the short term user aggregated subscription margin for that respective period. For instance in exemplary records as shown in the number of operating system OS instances instantiated and or run by the set of users in a given hour across the set of host clouds can be totaled so that instances of under limit consumption offset instances of over limit consumption resulting in a net short term cloud aggregated subscription margin for the one or more short term consumption periods across all users in set of users for one or more all host clouds. In cases the set of short term user aggregated margins may reflect a net over consumption positive value for that hour or other period as illustratively shown or can reflect an under consumption negative value for that same period. A zero margin at limit value can also be reflected.

In the entitlement engine and or other logic can generate the set of marginal consumption totals reflecting the total combined short term subscription margin for each resource being tracked over a 24 hour or other interval or period. For example and as shown for instance in the under limit e.g. recorded as a negative value and over limit e.g. recorded as a positive value margins or increments of consumption under or over the short term consumption limit for each one or more short term consumption periods can be summed or combined to determine the set of short term user aggregated margins for each respective resource over a 24 hour period again for one or more host clouds. In aspects other periods or intervals other than a 24 hour period can be used to sum the values reflected in the set of short term user aggregated margins . The values reflected in the set of short term user aggregated margins can thereby reflect the netting out of the under consumption and over consumption values for a given resource in two or more dimensions namely over multiple users and or two or more host clouds and over multiple instances of the one or more short term consumption periods averaging out consumption fluctuations by the set of users in relation to the set of short term consumption limits .

In the entitlement engine and or other logic can generate the set of offset subscription costs for each of the one or more short term consumption periods corresponding to the set of short term user aggregated margins for each subscribed resource. For instance if the record for a given one or more short term consumption periods reflects the over consumption of 20 operating system instances the assigned overage cost of that usage may be for instance 0.50 times 20 instances or 10.00 for that hour or other period. In the entitlement engine and or other logic can generate the aggregate offset subscription cost for one 24 hour or other period representing the combination of the set of offset subscription costs over a multiple number of the one or more short term consumption periods such as the combination of 24 one hour periods or other intervals periods or multiples. In the entitlement engine and or other logic can generate the billing record based on the aggregate offset subscription cost for each resource being tracked and or metered for the set of users and or based on other costs adjustments offsets and or factors. In the entitlement engine and or other logic entities or resources such as the operator of the set of host clouds can transmit the billing record to an administrator for the set of users and or other user or other recipient. In as understood by persons skilled in the art processing can repeat return to a prior processing point jump to a further processing point or end.

In the policy management tool and or other application logic and or service can analyze the set of aggregate usage history data and or other information to generate a set of workload migration policies and or portions thereof based on usage trends and or other results or factors. In aspects the set of workload migration policies and or portions thereof can be performed at an initial stage of workload policy management to generate initial or default policies before a user has indicated their inputs or preferences for one or more policy limits or parameters. Thus for instance the policy management tool and or other application logic and or service can determine for instance that the user s one or more workloads has over the last seven days and or other time period demonstrated or reflected a reduction of 50 in data access activity from the applicable limit from the hours of 12 midnight to 7 00 a.m. from Monday through Friday and a reduction in processor resource consumption of 75 from the applicable limit in that same period. In aspects the policy management tool can therefore establish a workload migration policy of migrate workload to a reduced cost host cloud for the interval of 12 00 a.m. to 7 00 a.m. during the days of Monday Friday unless either processor consumption exceeds 25 of the limit or data access activity exceeds 50 of the limit specified in the user s set of subscription parameters . Other parameters time periods thresholds and or calculations or criteria can be used.

In the policy management tool and or other application logic and or service can receive a set of user selected migration policy parameters via the selection interface and or other interface channel and or connection. For instance the user can supply parameters indicating trigger workload migration to higher capacity cloud host if transaction throughput of virtual machines exceeds 105 of subscription limit between 10 00 a.m. and 5 00 p.m. and or trigger workload migration to lower capacity cloud host if transaction throughput of virtual machines drops below 50 of subscription limit between 9 00 p.m. and 6 00 a.m. Other specifications thresholds resource consumption limits workload performance or operating parameters and or other factors can be used.

In the workload migration scheduler the policy management tool and or other application logic and or service can analyze and configure the migration of the one or more workloads based on the set of workload migration policies the conditions and or values detected in the set of aggregate usage history data and or other information. In aspects the workload migration scheduler the policy management tool and or other application logic and or service can schedule or initiate the migration or partial migration of one or more workloads on an immediate real time and or near real time basis depending on the conditions and or values reflected in the set of aggregate usage history data. In aspects the workload migration scheduler the policy management tool and or other application logic and or service can in addition or instead schedule the migration or partial migration of the one or more workloads on a delayed basis for instance for a number of hours later in the evening of a given day and or at other times or intervals. In aspects it may be noted that the migration of the one or more workloads and or portions thereof can be scheduled or configured on a temporary or time limited basis or can in cases be scheduled or configured on a permanent or comparatively long term basis.

In the workload migration scheduler the policy management tool and or other application logic and or service can execute the migration of the one or more workloads and or portions thereof to one or more target clouds for instance by interacting with one or more cloud management systems of the one or more target clouds and or other entities services or resources. In the entitlement engine workload migration scheduler the policy management tool cloud management system s of the one or more target clouds and or other application logic and or service can record additional usage data in the set of aggregate usage history data incorporating resource consumption by the migrated one or more workloads operating in the one or more target clouds as appropriate.

In the workload migration scheduler the policy management tool and or other application logic and or service can update and pr modify the set of workload migration policies based on additional usage data and or further user selected policy parameters received in the set of user selected policy parameters as appropriate. For instance a determination can be made that excess consumption trends or levels that triggered the migration of one or more workloads and or portions thereof to the one or more target clouds have tapered off and one or more workloads need not remain in the one or more target clouds for the scheduled period of time. In processing can jump to a prior processing point proceed to a further processing point repeat or end.

The foregoing description is illustrative and variations in configuration and implementation may occur to persons skilled in the art. For example while embodiments have been described in which the cloud management system for a particular cloud resides in a single server or platform in embodiments the cloud management system and associated logic can be distributed among multiple servers services or systems. Similarly while embodiments have been described in which one group of servers within a set of resource servers can provide one component to build a requested set of virtual machines in embodiments one group of resource servers can deliver multiple components to populate the requested set of instantiated virtual machines and or other machines entities services or resources. For further example while embodiments have been described in which a user connects to or accesses the entitlement engine via one client in embodiments multiple clients portals services and or other access points to the entitlement engine can be used. Likewise while embodiments have been described in which one entitlement engine and or policy management tool operate to manage the resource consumption billing and or other activities of one or more users in a set of host clouds in embodiments multiple deployment engines scheduling engines and or other logic or services can perform the same or similar logic to manage deployment options. Other resources described as singular or integrated can in embodiments be plural or distributed and resources described as multiple or distributed can in embodiments be combined. The scope of the invention is accordingly intended to be limited only by the following claims.

