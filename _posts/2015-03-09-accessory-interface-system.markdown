---

title: Accessory interface system
abstract: The accessory is capable of connecting to a host device, which is physically separated from the accessory. The accessory includes a first communication module and a contactless module. The first communication module is used to wirelessly coupled to the host device, and receive a first credential from the host device. The contactless module is coupled to the first communication module. The contactless module includes a controller, a first security element, an antenna, and a storage unit. The controller receives the credential from the first communication module. The first security element is coupled to the controller for receiving and storing the first credential. The antenna is coupled to the controller to wirelessly communicate with a first reader for a first application by using the stored first credential. The storage unit stores at least one first transaction record generated during the first application is operating.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09264896&OS=09264896&RS=09264896
owner: HTC Corporation
number: 09264896
owner_city: Taoyuan
owner_country: TW
publication_date: 20150309
---
This application is a continuation application of and claims the priority benefit of U.S. application Ser. No. 13 733 134 filed on Jan. 2 2013 now allowed. The entirety of the above mentioned patent application is hereby incorporated by reference herein and made a part of this specification.

In prior arts user can use an accessory for replacing the traditional ticket or a door key function. But only one credential is stored in the accessory and the credential cannot be changed by user. Only one function can be achieved by the accessory at one time. That is for executing or processing a plurality of different functions many accessories are needed for the user.

Along with the rapid development of science and technology at the present a handheld electrical apparatus becomes a useful tool. Nowadays user can download one or more credentials from at least one security provider to the handheld electrical apparatus such as a mobile phone . Then the mobile phone may be a ticket a wallet and or a door key for executing or processing a plurality of different functions. But accessory remains single function.

The present invention provides an accessory wherein the accessory may be configured for executing different functions.

The present invention provides a system for configuring an accessory of the system to execute a plurality of functions.

The present invention provides a method for configuring an accessory for executing different functions.

The accessory is capable of connecting to a host device which is physically separated from the accessory. The accessory includes a first communication module and a contactless module. The first communication module is used to wirelessly coupled to the host device and receive a first credential from the host device. The contactless module is coupled to the first communication module. The contactless module includes a controller a first security element an antenna and a storage unit. The controller receives the credential from the first communication module. The first security element is coupled to the controller for receiving and storing the first credential. The antenna is coupled to the controller to wirelessly communicate with a first reader for a first application by using the stored first credential. The storage unit stores at least one first transaction record generated during the first application is operating.

The system includes a host device and an accessory. The host device includes an application processor a first storage unit and a second communication module. The second communication module is coupled to the application processor. Wherein the first storage unit is configured to store a first credential and the application processor is configured to execute or process a credential management application and an NFC software stack for encapsulating the first credential in a first NFC package format the NFC software stack includes a smart card API NFC API and a controller interface layer. Besides the accessory is physically separated from the host device and the accessory includes a first communication module a first security element an antenna and a second storage unit. The first communication module is used for externally connecting to the second communication module of the host device and is used for receiving the encapsulated first credential from the second communication module. The contactless module is coupled to the first communication module and including a controller for receiving the encapsulated first credential from the first communication module. The first security element is coupled to the controller for storing the encapsulated first credential. The antenna coupled to the controller to wirelessly communicate with a first reader for a first application by using the received and stored first credential. The second storage unit is used for storing at least one data such as transaction record generated during the first activity.

The steps of the method includes providing a host device to coupled to an accessory in a paring mode transporting a first credential from the external host device to the accessory in the paring mode and the first credential being received and stored by a first security element providing a first reader to wirelessly communicate with the accessory for a first application by using the received first credential via an antenna of the accessory in a standalone mode and providing a storage unit for storing at least one first transaction record generated during the first activity being operating in the standalone mode.

Accordingly the accessory provides the first communication module to receive the first credential from the external host device and the accessory also provides the contactless module to wirelessly communicate with the first reader for operating a first application. The first credential provided by the external host device may be changed and such as that a user may use the accessory for many different applications.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and are intended to provide further explanation of the invention as claimed.

Reference will now be made in detail to the present preferred embodiment of the invention examples of which are illustrated in the accompanying drawings. Wherever possible the same reference numbers are used in the drawings and the description to refer to the same or like parts.

Referring to and and are a block diagrams of the accessory according to an embodiment of the present invention. In the accessory includes a first communication module and a contactless module . The accessory may be in a form of card wristband wristwatch keychain or jewelry such as ring or necklace. The first communication module wirelessly connects to a host device and receives a first credential from the host device . The host device is physically separated from the accessory. The first communication module is coupled to the contactless module . After receiving the first credential from the host device the first communication module of the accessory may be wirelessly disconnected to the host device and then the contactless module wirelessly communicates with a first reader for a first activity by at least transmitting information associated with the received first credential to the first reader . In this embodiment the transmitted information associated with the received first credential may be the received first credential itself or information generated based on the received first credential. The first activity may be a first payment transaction or a first security authentication. Besides in this embodiment the first communication module is further configured to receive a second credential from the host device . Similarly in after the first communication module of the accessory is wirelessly disconnected to the host device the contactless module wirelessly communicates with a second reader for a second activity by at least transmitting information associated with the received second credential to the second reader . In this embodiment the transmitted information associated with the received second credential may be the received second credential itself or information generated based on the received second credential. The second activity is a second payment transaction or a second security authentication.

Please notice here the first and second credentials may be different and the first and second reader may be different.

Please refer to is a block diagram of the contactless module according to an embodiment of the present invention. The contactless module includes a controller a first security element and an antenna . The contactless module may further comprise a first storage unit . The controller may be a near field communication controller and may operate in reader writer mode card emulation mode or peer to peer mode. The reader writer mode enables the accessory to read write data from to NFC compatible device such as a NFC reader or tags through the use of the contactless module . The card emulation mode enabled the accessory to act as an emulated card such as access control card or credit card and a NFC readers may read the data or credential that is stored in accessory . In the peer to peer mode two devices may exchange data at link level. This mode is standardized on the ISO IEC 18092 standard. The controller may cycle through all the modes to meet all the scenarios of use. The controller may enable the first communication module to receive the first credential from the host device . The first security element is coupled to the controller for storing the first credential received from the first communication module . The antenna is coupled to the controller as wireless frontend to wirelessly communicate with the first reader . The first storage unit may be used for storing data such as first transaction record or access record generated during the first activity. The data is transmitted from the reader and received by the controller though the use of antenna .

On the other hand the controller may be further used to receive the second credential from the first communication module and the second credential is stored in the first security element . The antenna further wirelessly communicates with the second reader for a second activity by using the stored second credential.

The first credential may include certificates security keys PIN user ID or password which are to be assigned or managed by a first server which managed by a bank or security service provider. The first credential is verified by the security service provider or bank server with the host device wirelessly communicating to the security service provider or bank server. The second credential may include certificates security keys PIN user ID or password which are to be assigned or managed by a second server which managed by another bank or security service provider. The second credential is verified by the second server with the host device wirelessly communicating to the second server. The first reader and second reader may be credit card readers access control reader or payment transaction reader. In other embodiment the first credential and the second credential may be assigned by different security service provider or server such as American District Telegraph ADT Security Services and received by the host device . The first or second credential is verified by the corresponding first or second server with the host device wirelessly communicating to the corresponding first or second server.

The verification of the credential may be under security infrastructure. One of the security infrastructures may be used is public private key. When the host device connects to a secure server such as the ADT Security Services server by using a baseband module of the host device the host device requests the server s credential which includes the server s public key. The public key or credential may also be stored in the UICC Universal Integrated Circuit Card SIM card memory card or virtual memory of the host device by the network operator or the host device manufacturer. When it gets the server s credential from the security service server SIM card memory cared or virtual memory the host device validates the credential based on its authenticity and expiry. The host device then uses the credential it gets to generate its own private public key pair and uses the public key from the server credential to encrypt the data to send to the server. At the end of this handshake the host device has the server s public key which used to encrypt messages sent to server the host device public key used to send to the server and the host device private key used to decrypt messages sent by the server that are encrypted by the host device is public key. When the handshake is over both the host device and the server are ready to communicate with each other over a secure channel. The first credential or the second credential which may include certificates security keys user ID or password is wirelessly transmitted to the accessory and stored in the first security element. The accessory is ready to have the credential to wirelessly communicate with the reader.

For example when the accessory wireless communicates with the first reader the first reader transmits a first identification information AID or identification request to the contactless module . The controller receives the first identification information AID or identification request through the antenna and selects the first credential which corresponding to the first identification information AID or identification request and wirelessly transmitting the first credential to the first reader through the antenna . If the first reader is a door lock reader the door can be opened by the accessory . When the accessory wireless communicates with the second reader the second reader transmits a second identification information AID to the contactless module . The controller receives the second identification information AID through the antenna and selects the second credential which corresponding to the second identification information AID and transmits the first credential to the second reader through the antenna module . The first or second reader or may be coupled to the bank server or servers under secure infrastructure and verified the credential retrieved by the reader. Once the credential is verified the payment transition between client and merchant is underway. The transaction record between the bank server the merchant and the client may be recorded and transmitted to the accessory through connection between the reader and contactless module of the accessory. The transaction record may be stored in the first storage unit of the accessory for transferring to the host device when the accessory and the host device are coupled to each other for exchanging data.

If the second reader may be a second door lock reader a second door can be opened by the accessory . In detail for example the host device may be a mobile phone or smartphone and a user may use the mobile phone to receive a second credential and the second credential is used for opening a door. The mobile phone is configured to connect to an accessory and the second credential may be transmitted from the mobile phone to the accessory . When the user needs to open the door the user may place the accessory in close proximity to a second reader of the door and the accessory may transmit the second credential such as access code PIN the user ID and password in an encrypted form to the second reader of the door. On the other hand the second reader may be coupled to a server via an interne access or other secure connection method such as virtual private network VPN. The second credential received by the second reader may be transmitted to the server under secure infrastructure and the server may decrypt the received second credential and verify the second credential by comparing the credential with a standard data for generating a comparing result. The instruction may be transmitted to a switch of the door and the door may be opened through the switch when the second credential is verified. The standard data may be pre set or pre generated data which associate with the second credential in the server before the second credential is transmitted to the user. The server may record the access of the door on the server or transmit to the accessory through the second reader and stored in the first storage unit of the accessory . The host device may retrieve the access records on the server or from the accessory by coupling the accessory with the host device and transmitting the access record from the first storage unit of the accessory to the host device .

Please refer to is a block diagram of the contactless module according to another embodiment of the present invention. In the contactless module further includes a second security element . The controller may be coupled to many different security elements and the credentials may be stored in at least one of the security elements or the different credential may be stored in different security elements. The second security element is coupled to the controller for receiving a second credential and the second credential may be received from the host device . In this embodiment the antenna module is further configured to wirelessly communicate with a second reader . The first storage unit is further configured to store at least one second transaction record generated during the second activity.

Referring to is a block diagram of the system according to another embodiment of the present invention. The system includes an accessory and a host device . The accessory includes a first processing unit a first communication module and a contactless module . The contactless module includes a controller an antenna and a first and second security element and and a second storage unit . The controller may be a near field communication NFC controller and it is coupled to the first communication module and the first processing unit by a host interface such as Inter Integrated Circuit I2C Serial Peripheral Interface Bus SPI and Universal Asynchronous Receiver Transmitter UART interface. When the first communication module receives the command or data from a second communication module of the host device the command or data is transfer to the first processing unit and the host interface is used to communicate with the controller and the first or second security elements or . For example when the command of deactivate a credential stored in the first security element the command is transmitted from the second communication module to the first communication module . The deactivation command is transferred to the first processing unit and the host interface is used to communicate with the controller . The controller receives the deactivation command and deactivates the credential stored in the first security element . The data such as the transaction record may be received by the controller through the antenna from the first reader . The transaction record then is transmitted to the first processing unit or the first communication module through the host interface. The first communication module is used to transmit the transaction record to the second communication module of the host device when the host device and accessory are coupled. The first processing unit may be running or processing a third application to communicate with the controller and a first radio communication software stack such as a first near field communication software stack to communicate with the controller and the first or second security element or . Near field communication NFC is a set of standards for mobile phones and devices to establish radio communication with each other by touching them together or bringing them into close proximity usually no more than a few centimeters. The first near field communication software stack is configured to communicate with the controller and the first or second security element or in the accessory . The third application may be a specific function that communicated with the first communication module and the contactless module . The function may be receiving the transaction data from the antenna and stored in the second storage unit . The first radio communication software stack such as a first near field communication software stack includes a first communication application programming interface API such as a near field communication application programming interface NFC API for communicate with the controller and a first host controller interface NCI layer for controlling the first communication module . When the first communication module is a Bluetooth communication module the first host controller interface layer may be a first Bluetooth host controller interface layer for controlling the Bluetooth communication module. For example a command is issued to control the controller the command is encapsulated and formatted by the first near field communication application programming interface NFC API for communicating with the controller . Another example is the record stored in the second storage unit is read and transmit to the first communication module by the first processing unit . The record is encapsulated and formatted by the first near field communication application programming interface NFC API and then encapsulated and formatted by first Host controller interface NCI for the first communication module for transmitting the record to the second communication module . Furthermore a third storage unit is coupled to the second process unit for storing the first credential.

Please refer to the host device comprises a second processing unit and a second communication module . The second processing unit is coupled to the second communication module and may be running or processing an first application to manage the first and second credential stored on the first or second security element or and a second radio communication NFC software stack such as a second near field communication software stack to communicate with the controller in the accessory . The first application may be an electronic wallet software program such as Google wallet an electronic key software program such as Seos Mobile Access. The first application may be configured to control the first security element and transmit multiple credentials to the first security element. A second application may be configured to control the second security element. The first application and the second application are independently configured to control different security elements. A command or data such as activation deactivation selection installation or transportation of the credential in the first or second security element of the accessory may be initiated to manage the credential in the accessory and the host device. The command is transferred or passed over to the second radio communication software stack . The second radio communication software stack includes a second application programming interface API such as a smart card API to interface with the first or second application a second communication application programming interfaces such as a second near field communication application programming interface NFC API for communicating the command or data between the controller and the second processing unit and a second host controller interface NCI layer for controlling the second communication module . When the second communication module is a Bluetooth communication module the second host controller interface layer may be a Bluetooth host controller interface layer for controlling the Bluetooth communication module. The application programming interface API is a specification intended to be used as an interface by software components to communicate with each other and it is used to describe the ways in which a particular task is performed such as the format number or types of the parameters to be passed to the functions and the type of the return value. The command is transferred to the first API and it is formatted and configured to communicate with the first or second security element. The second NFC API formats and encapsulates the formatted command for communicating with the controller in the accessory. Next the encapsulated command is then packaged by the NCI layer to control the second communication module for transferring the command or data to the first communication module. A wireless or wired connection is initiated between a first communication module in the accessory and the second communication module and the command or data is wirelessly or wired transmitted from the second communication module to the first communication module.

The first and second communication modules and are used to transmit or receive NFC package. The first and second communication modules and may be wired connected by using universal serial bus USB modules for connecting to each other via an USB cable. Besides the first and second communication modules and may be wirelessly connected by using blue tooth low energy BLE modules blue tooth BT modules or WiFi direct a wireless LAN WLAN modules for wirelessly connecting to each other.

Refer to is a block diagram of the accessory according to an embodiment of the present invention. The accessory may further includes a sensor or sensors which coupled to the first processing unit . The accessory may contain power supply such as battery not shown to supply power to the modules and units in the accessory . The sensor may be a temperature sensor a gravity sensor G sensor a heart rate monitor a global positioning system GPS a compass or a water sensor. That is the sensor may be a sensor for measuring the physical energy related to the user or the environment that the user is situated. The situation may be as at least one of acoustic sound vibration electric current electric potential magnetic environment weather moisture humidity velocity position angle displacement distance speed acceleration optical light imaging photon pressure force density level or thermal heat and temperature. The sensor can be composed of a plurality of sub sensors and the sub sensors may be disposed in various places of accessory . Furthermore the first processing unit may read the sensing result from the sensor and store the sensing signal to the first storage unit in the contactless module or second storage unit . A reader may request a reading of the sensor and the first processing unit retrieves the sensing signal that the sensor senses and transmits to the controller for communicating the sensing signal with the reader. The accessory may be paired with the host device and the sensing signal stored in the first storage unit or second storage unit may be transmitted to the host device . The host device may analysis the sensing signal or the host device may transmit the sensing signal to a server for data analyzing via an internet by using the baseband module. Furthermore if the host device transmits the sensing signal to the sever for data analysis the server may transmit an analyzed result to the host device via the internet. That is the user may read the analyzing result through the host device such as a mobile phone smartphone handheld device tablet server or kiosk .

The first processing unit may disable the first communication module or the first communication module is unable to connect to the host device. The accessory is operating by itself. The controller may communicate with a reader by use of the antenna using credential stored in the first or second security element. The transaction records or access control records may be received by the antenna. The controller may transmit the records to the first processing unit for storing in the second storage unit . The signal that the sensor senses may be stored in the second storage unit . Therefore the user may carry the accessory for various activity or transaction without the need of the host device.

In detail refer to is an example of flow diagram for the accessory and the host device according to an embodiment of present invention. In in the pairing mode M a user may wirelessly couple the accessory such as a payment card or a wristband to the host device via a Bluetooth communication link . The Bluetooth communication link is established between the Bluetooth low energy of the accessory and the Bluetooth low energy of the host device . After success of communication link of the Bluetooth communication link setup the host device triggers a signal to application to indicate the pairing by the step . The application would activate NFC stack via the step . The application then instructs NFC stack to establish a secure tunnel between application and security element and the security element is such as embedded security element eSE . The host device would push a credential related to a first bankcard or credit card to the security element on the payment card accessory via the step . Next the host device activates the newly added credential on the security element via step . The user disconnects the payment card accessory from the host device by tearing down the communication link in step .

After the step is executed the accessory may operated in the stand alone mode M in which case the payment card is disconnected from the host device . When the accessory coupled to the reader the reader establishes NFC connection with the payment card. The user may present the accessory to be a payment card at POS point of safe and send the query for payment option by the step . Next a NFC contactless frontend NFC CLF forwards the query to eSE via step . The eSE on the payment card sends a list of activated card credentials via NFC to terminal via step . In this embodiment the list contains the credential which was just installed on the eSE . The terminal of the reader authenticates the credential accepts the card and send the approval back to eSE via step .

In summary the accessory is used to receive a credential from a host device when the accessory is coupled to the host device. When the accessory is disconnected to the host device the accessory may provide the credential to a reader. In detail the accessory includes a first communication module and a contactless module. The first communication module is used to communicate with the host device. The contactless module provides a security element to receive the credential from the host device through the second communication module. Especially the credential in the accessory may be updated by the host device and the accessory may be used to execute multiple functions.

It will be apparent to those skilled in the art that various modifications and variations can be made to the structure of the invention without departing from the scope or spirit of the invention. In view of the foregoing it is intended that the invention cover modifications and variations of this invention provided they fall within the scope of the following claims and their equivalents.

