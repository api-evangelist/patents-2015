---

title: Information processing apparatus, information processing system, information processing method, and non-transitory computer readable medium
abstract: An information processing apparatus includes a processing unit that performs a process, and a notification unit that is adapted to notify a display of a status of the process for the display to display the status, performs first communication from the information processing apparatus to the display if the status as a notification target occurs, and notifies the display of the occurring status by second communication to transmit a hypertext transfer protocol (HTTP) response in response to an HTTP request from the display to which the first communication has been performed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09509871&OS=09509871&RS=09509871
owner: FUJI XEROX CO., LTD.
number: 09509871
owner_city: Tokyo
owner_country: JP
publication_date: 20150710
---
This application is based on and claims priority under 35 USC 119 from Japanese Patent Application No. 2014 193646 filed Sep. 24 2014.

The present invention relates to an information processing apparatus an information processing system an information processing method and a non transitory computer readable medium.

According to an aspect of the invention there is provided an information processing apparatus. The information processing apparatus includes a processing unit that performs a process and a notification unit that is adapted to notify a display of a status of the process for the display to display the status performs first communication from the information processing apparatus to the display if the status as a notification target occurs and notifies the display of the occurring status by second communication that is to transmit a hypertext transfer protocol HTTP response in response to an HTTP request from the display to which the first communication has been performed.

The general configuration hardware configuration and functional configuration of an information processing system of an exemplary embodiment are described below with reference to through .

The communication network includes at least one of the Internet a mobile communication network and a telephone network. The communication network interfaces for communications among apparatuses connected thereto. The communication network is connected to the information processing apparatus and the communication apparatus . The communication apparatus may be a router a hub or an access point to interface for communications. In the exemplary embodiment the communication apparatus is an access point and performs wireless communications in accordance with wireless LAN standards.

The communication apparatus wirelessly communicates with the information processing apparatus via the communication network while wirelessly communicating with the user apparatus . In other words the information processing apparatus communicates with the user apparatus via a communication system such as the communication network and an external communication apparatus such as the communication apparatus . The communication apparatus is an example of a communication apparatus to which the user apparatus is connected. The user apparatus may communicate with the information processing apparatus via another communication apparatus. The other communication apparatus does not include the information processing apparatus and the operation device . In the discussion that follows the other communication apparatus refers to a communication apparatus is none of the information processing apparatus the user apparatus and the operation device .

The information processing apparatus performs an image processing process to form an image on a medium and an image reading process to read an image formed on a medium. These processes are performed when the copy function the scan function the fax function or the print function is provided to the user. The information processing apparatus includes the operation device that is used to operate the information processing apparatus . The operation device is thus a device to operate the information processing apparatus . The operation device is mounted on the housing of the information processing apparatus . The operation device is used by a user who approaches the information processing apparatus to use the information processing apparatus . The operation device may include a liquid crystal display for example and display an image to operate the information processing apparatus hereinafter referred to as an operation image . The operation image is described with reference to .

The user apparatus displays the operation image. If an operation is performed on the displayed operation image the user apparatus requests the information processing apparatus to perform a process responsive to the operation. In that sense the user apparatus is identical to the operation device . The user apparatus may be a tablet terminal or a personal computer. The user apparatus may be carried and used by the user or may be used in an installed state such as in a table top mode. The user apparatus is not limited to the operation of the information processing apparatus and may be used for other applications for business use in an office in a company .

The information processing apparatus performs the process in response to the request from the user apparatus or the operation device . The information processing apparatus notifies the user apparatus or the operation device of the status of the process by transmitting to the user apparatus or the operation device information indicating the status of the process in progress hereinafter referred to as status information .

When the copy process is in progress and then a the requested number of copies has been made the information processing apparatus transmits status information C including quantity information C representing the completion of the requested number of copies and a character string copied as illustrated in . The quantity information C and C is represented by a fraction with the request number of copies as a denominator and the completed number of copies as a numerator. The status information includes information indicating the progress of the process the results of the process and parameters used in the process. Each of the user apparatus and the operation device displays the notified status as illustrated in and . In the discussion that follows the user apparatus and the operation device may be collectively referred to as a display if there is no need to discriminate one from the other.

The memory includes a hard disk and stores data program and image data used by the controller . The communication unit includes a communication circuit for use in wireless communications complying with wireless local area network LAN standards and antenna. For example the communication unit performs wireless communications with the communication apparatus of . More specifically the communication unit is a communication apparatus other than the communication apparatuses described above including the information processing apparatus the user apparatus and the operation device . For example the communication unit may be the communication apparatus . The display may include a liquid crystal display and displays an image on the display screen under the control of the controller .

If the user apparatus is a tablet terminal the operation unit includes buttons arranged on the housing thereof and a touch sensor also referred to as a touch screen or a touchpanel overlaid on the display screen. The operation unit receives a user operation such as tapping and transfers to the controller operation data indicating the contents of the operation. If the user apparatus is a personal computer the operation unit may include a keyboard or a mouse. The controller performs a control operation responsive to the supplied operation data.

The image reading unit performs an image reading process to read an image on an original document using a charge coupled device CCD system. The image reading unit optically reads an image formed on a medium such a paper sheet and transfers image data representing the read image to the controller . The image forming unit performs an image forming process to form an image on a medium using an electrophotographic system. The image forming unit forms in a medium such as a paper sheet an image indicated by the image data supplied from the controller . The systems used to read the image and form the image have been described for exemplary purposes only and a different system may be used instead.

The first communication unit includes a communication circuit to communicate in accordance with the wireless LAN standards and a port that receives a connector of a communication cable such as a LAN cable . The first communication unit performs a communication process with an apparatus connected thereto via the cable. The first communication unit is connected to the communication network of and communicates with the user apparatus via an external device such as the communication apparatus external to the information processing apparatus . The first communication unit may also be connected to the communication unit in the operation device via a communication cable and communicates with the operation device without the external device. More specifically the communication unit communicates with the information processing apparatus without the external device.

The second communication unit includes a communication circuit to perform facsimile fax communication and exchanges fax data namely performs a fax communication process. The connection unit includes a slot that receives a storage medium such as a secure digital SD memory card and is thus connected to such a storage medium. The controller reads data from the storage medium or writes data onto the storage medium. The operation device is configured as illustrated in and communicates with the first communication unit . By communicating with the first communication unit the operation device works as a user interface UT unit. The UI unit displays an image indicated by data transmitted from the controller or transmits to the controller data to operate the information processing apparatus .

The controllers of the information processing apparatus the user apparatus and the operation device perform the programs stored on the memories thereof to control the elements thereof. The functions described below are thus implemented.

The interface unit in the information processing apparatus interfaces for communications between the information processing apparatus and the display device . More in detail the interface unit interfaces for communications with the display device the user apparatus in the exemplary embodiment connected to the information processing apparatus via the other communication apparatus such as the communication apparatus . The interface unit also interfaces for communications with the display device the operation device in the exemplary embodiment connected to the information processing apparatus without using the other communication apparatus. A communication procedure or a communication protocol used by the interface unit is described below.

The interface unit interfaces for communications complying with the standard of world wide web WWW between the display device the user apparatus and the operation device and the information processing apparatus . The interface unit complies with simple object access protocol SOAP from among web standards and for example interfaces for communications described by extensive markup language XML hereinafter referred to as XML data . The interface unit receives the XML data indicating a hypertext transfer protocol HTTP request transmitted from the display device and then transfers the HTTP request to the providing unit . The interface unit receives XML data indicating a HTTP response supplied from the providing unit in response and then transmits the HTTP response to the display device .

The interface unit also complies with the WebSocket standard. Upon establishing connection with the display device through a transmission control protocol TCP handshake in accordance with the WebSocket standard the interface unit not only communicates the XML data indicating the HTTP request and the HTTP response but also interfaces for transmission of XML data to the display device at any timing from the providing unit . In this way the information processing system performs not only pull based communication responsive to the HTTP request transmitted from the display device but also push based communication transmitted from the information processing apparatus .

The interface unit interfaces for communications of the providing unit the notification unit the controller the displays and referred to as a display if the displays and are not discriminated from each other the requesting units and referred to as a requesting unit if the requesting units and are not discriminated from each other . More specifically the interface unit interfaces for the communication performed between each of the providing unit and the notification unit in the information processing apparatus and the display in the display device and the communication performed between the requesting unit in the display device and the controller in the information processing apparatus . In each case the interface unit interfaces for the communication with each of the user apparatus and the operation device in accordance with a common communication procedure the communication procedure complying with WWW SOAP or WebSocket .

The providing unit in the information processing apparatus provides the above described operation image to the display device via the interface unit . The providing unit provides the operation image to the user apparatus via the communication by the interface unit and the other communication apparatus. The providing unit also provides the operation image to the operation device via the communication by using the interface unit but without using the other communication apparatus.

The providing unit stores the operation image the image data representing the operation image . When the XML data indicating the HTTP request hereinafter referred to as operation image requesting data requesting the operation image is received via the interface unit the providing unit transmits to the requester via the interface unit XML data indicating an HTTP response including the operation image requested by that XML data hereinafter referred to as operation image data .

If the operation image requesting data is received from the user apparatus the providing unit transmits the operation image data to the user apparatus in response. If the operation image requesting data is received from the operation device the providing unit transmits the operation image data to the operation device in response. The providing unit provides the operation image to each requester by transmitting the operation image data to the requester of the operation image the user apparatus or the operation device .

The processing unit in the information processing apparatus executes a process. The processing unit performs in addition to the copy process a scan process a fax process and a print process respectively processes to perform the scan function the fax function and the print function . The copy process includes an image reading process by the image reading unit and an image forming process by the image forming unit illustrated in . The scan process includes the image reading process. The fax process includes a fax process by the second communication unit . The print process includes a communication process by the first communication unit and the image forming process. Depending on the acquisition and output method of data the scan process and the fax process may include a data communication process by the second communication unit a write process of writing data onto the memory and a reading process of reading data from the memory .

A variety of statuses may occur when the processing unit executes the process. For example in the copy process an image may be read from an original document transport of a medium may start a toner image may be formed on a photoconductor body and an image may be formed on the medium. The statuses of the copy process may also include a change in copy parameters such as color setting magnification rate whether copies are to be sorted or not. If the process is executed in the exemplary embodiment the processing unit generates status information representing a status that is a target of notification from among statuses and then transfers the status information to the notification unit .

The statuses as a target of notification may include the number of completed copies and the parameters including the sheet size as illustrated in and . The memory in the information processing apparatus stores a list of statuses as targets of notification. The processing unit references the memory and transfers to the notification unit information representing the status included in the list from the status information representing the statuses of the processes. Regardless of whether information representing the status is included in the list or not the processing unit may transfer the status information to the notification unit and the notification unit may determine whether the supplied status information includes the status included in the list.

The notification unit in the information processing apparatus notifies the display device of the status of the process executed by the processing unit via the communication interfaced by the interface unit . In the exemplary embodiment the notification unit notifies the display device of the status of the process using one of five notification methods of a first through fifth notification methods. In the first and second notification methods the notification unit notifies the display device of the status of the process in response to a request from the display device . More specifically upon receiving the HTTP request from the display device via the interface unit the notification unit describes the status information transferred from the processing unit on the HTTP response responsive to the HTTP request and then transmits the HTTP response to the display device via the interface unit . The notification unit thus notifies the display device of the status of the process.

In the first notification method if the HTTP request has been received as a request of process hereinafter referred to as a process request from the display device the notification unit waits on standby until the processing unit has completed the process. The process request here is a process that is to be performed by the processing unit . The notification unit describes a status of the completed process namely process results on the HTTP response responsive to the HTTP request having requested the process and then transmits the HTTP response to the display device . The notification unit thus notifies the display device of the described process results.

In the second notification method if the process request via the HTTP request has been received from the display device the notification unit does not wait until the completion of the requested process. The notification unit first notifies the display device of the reception of the process request via the HTTP response responsive to the HTTP request. If the HTTP request describing a request of notification of the status of the process hereinafter referred to as a notification request has been received from the display device the notification unit describes the status information on the HTTP response responsive to the HTTP request and transmits the HTTP response. The notification unit thus notifies the display device of the status of the process.

The display device repeatedly transmits the notification request using the HTTP request polls the notification unit and the notification unit notifies the display device of the status of the process in the response in reply to the notification request through the polling. In the exemplary embodiment the display device polls the notification unit until the process results have been notified and the notification unit repeatedly notifies the display device of the status of the process until notifying the process results.

In summary if the first notification method is used the notification unit notifies the display device of the process results in the HTTP response responsive to the HTTP request having requested the process. If the second notification method is used the notification unit notifies the display device of the process results and the status of another process in a communication different from the communication using the HTTP response responsive to the HTTP request having requested the process namely in the HTTP response responsive to the HTTP request having requested the notification. If the first or second notification method is used in this way the notification unit notifies the display device of the response responsive to the request from the display device the process request or the notification request . The notification unit thus performs a pull based notification.

If the third or fourth notification method is used the notification unit notifies the display device of the status of the process via communication complying with a standard different from the HTTP response. More specifically the notification unit notifies the display device of the status of the process using the communication complying with the WebSocket standard. In the third or fourth notification method the operation image requesting data may be received from the display device for example. The interface unit performs a TCP handshake procedure establishing connection between the information processing apparatus and the display device . Upon receiving the status information from the processing unit the notification unit describes the status information on the XML data complying with the WebSocket standard. The notification unit notifies the display device of the status of the process by transmitting the XML data to the display device via the interface unit .

If the process request by the HTTP request has been received from the display device in the third notification method the notification unit notifies the display device in the HTTP response responsive to the HTTP request that the process request has been received without waiting for the completion of the requested process as in the second notification method. From then on even if the notification request by the HTTP request is not received when the notification unit receives the status information from the processing unit the notification unit transmits to the display device the XML data describing the supplied status information. The notification unit thus notifies the display device as the requester of the process results and the status of the other process.

If the third notification method is used the notification unit notifies the display device of the process results and the status of the other process in the communication complying with the WebSocket standard in the exemplary embodiment different from the communication using the HTTP response responsive to the HTTP request having made the process request. The third notification method is similar to the second notification method in that the status of the process and the status of the other process are notified using the communication different from the communication using the HTTP response responsive to the HTTP request having made the process request. The different communication in the second notification method is the HTTP response responsive to the HTTP request transmitted from the display device namely the HTTP request having requested the notification separate from the HTTP request having made the process request.

In the fourth notification method upon receiving the status information from the processing unit the notification unit transmits to the display device the XML data describing the status information regardless of the presence or absence of the process request by the HTTP request from the display device . The notification unit thus notifies the display device as the requester of the status represented by the status information. In the fourth notification method the notification unit notifies the display device of predetermined statuses including running out of toner or running out of paper sheet . The notification unit may notify each display device of the status of a process individually predetermined for the display device .

If the third or fourth notification method is used the notification unit performs an active notification push based notification regardless of the presence or absence the process request and the notification request by the HTTP request from the display device .

If the fifth notification method is used the notification unit notifies the display device of the status of the process by making communications with the display device twice. The communications are hereinafter referred to as first communication and second communication. If the status of the process occurs as the target of notification in the processing unit the notification unit originates the first communication from the information processing apparatus namely in a push based communication . The first communication serves as a trigger for the notification of the status of the process.

Upon receiving the status information from the processing unit in the exemplary embodiment the notification unit describes on the XML data complying with the WebSocket standard that the fact that the status of the process serving as the target of notification has occurred and then transmits the XML data to the display device via the interface unit . The occurrence of the status of the process as the target of notification may be represented using a character string or a predetermined symbol. In this case the notification unit performs the transmission of the XML data as the first communication.

The occurrence of the status of the process may not necessarily have to be described on the XML data. For example the XML data that is set to be data to be transmitted if the status of the process as the target of notification occurs may be transmitted. Alternatively data predetermined in accordance with the communication protocol such as file transfer protocol FTP or file transfer protocol over SSL TLS FTPS may be transmitted. Any type of the first communication may be performed as long as the display device or the user of the display device is notified that the status of the process as the target of notification has occurred.

Upon receiving the XML data transmitted via the first communication the display device transmits the HTTP request describing the request to notify of the status as described below. The display device thus makes the notification request. Upon receiving the HTTP request via the interface unit the notification unit describes the status information supplied from the processing unit onto the XML data and then transmits to the display device the XML data as the HTTP response responsive to the HTTP request. The notification unit transmits the HTTP response as the second communication. The notification unit thus notifies the display device of the generated status of the process by the second communication that transmits the HTTP response responsive to the HTTP request from the display device with which the first communication has been performed.

As described above by the first communication the notification unit notifies the display device that the status of the process as the target of notification has occurred and by the second communication the notification unit notifies the display device of the status of the process. This notification process is hereinafter referred to as a first notification . If the fifth notification method is used the notification unit performs a second notification in addition to the first notification. If the status of the process as the target of notification occurs the notification unit notifies the display device of the status of the process by originating the third communication namely the push based communication without performing the first communication in the second notification.

Upon receiving the status information from the processing unit in the third or fourth notification method in the second notification the notification unit describes the status information on the XML data complying with the WebSocket standard and transmits the XML data to the display device via the interface unit . The notification unit thus notifies the display device of the status of the process. The use of the WebSocket standard allows the push based third communication to notify the display device of the state of the process without performing the pull based communication responsive to the HTTP request from the display device . Depending on the generated status of the process the notification unit performs the first notification or the second notification.

In the exemplary embodiment the notification unit determines whether to perform the first notification or the second notification depending on the type of the generated status. For example the processing unit may now perform the copy process. When an original document is read the status information including a thumbnail image of the read original document is supplied to the notification unit . When a copy the image of the read original document is output to a medium the number of completed copies is supplied to the notification unit as the status information. In this case the notification unit performs the first notification for the thumbnail image of the original document and performs the second notification for the number of media.

The operation unit in the user apparatus and the operation unit in the operation device also referred to as an operation unit if the operation unit and the operation unit are not discriminated from each other are used to operate the information processing apparatus . The operation unit is implemented by the display device when the display device executes a browser program. The operation unit includes a display and a requesting unit . The operation unit includes a display and a requesting unit . If the user apparatus and the operation device are not discriminated from each other the display and the requesting unit thereof are respectively referred to as a display and a requesting unit .

The display the display in the user apparatus or the display in the operation device displays information and image transmitted from the information processing apparatus . For example the display displays the status information information representing the results of the process and the status of another process described on the XML data transmitted from the notification unit in the information processing apparatus . For example the display displays the status information C and C described with reference to and . Other examples of the status information are described with reference to and .

When the user accesses a uniform resource locator URL of the information processing apparatus the display transmits the operation image requesting data to the information processing apparatus . The display displays the operation image indicated by the operation image data transmitted from the providing unit in the information processing apparatus in response. More specifically the display displays the operation image based on parameters such as the location and size of the operation image described in the HTTP response indicated by the operation image data. The operation image thus displayed is an operation image group A of for example.

The operation image group A includes an operation image A responsive to a request to start copying and operation image groups A A and A for selecting the magnification of the image to be copied a paper sheet on which to form the copied image and a color mode of the image to be copied. The operation image group A includes an operation image A responsive to a request to increase the magnification of copying in steps of 1 and an operation image A responsive to a request to decrease the magnification of copying in steps of 1 . The operation image group A also includes operation images that allow tags such as image quality adjustment reading method output format and editing job to be selected.

The operation image groups A A and A include operation images that allows to be selected parameters that are transferred to the processing unit when the copy function is used. The operation image A is used to request a process to be performed using a selected parameter when an operation is made on an image of interest. More specifically the operation image A is used to determine the contents of a request. The display displays these operation images in accordance with the operation image data.

The display displays an image that is used to transfer to the user the contents of a currently selected parameter hereinafter referred to as a parameter transfer image . For example the display displays as a parameter transfer image a character string indicating the currently selected magnification of copying 110 in this case in a screen region B. The display also displays as a parameter transfer image an operation image representing the currently selected paper sheet and color mode character strings other magnifications size A4 plain paper and monochrome in this case in a form using heavier outline in this case and a highlighted form may also be acceptable different from a form of unselected images. The display displays the parameter transfer image in response to operations performed on the operation image for example the operation image A or A from which parameters are to be selected.

The display supplies data related to the displayed operation image to the requesting unit. The data related to the displayed operation image is used to determine whether the operation image has been operated or not and indicates a region where the operation image is displayed hereinafter referred to as an operation image region . The display also supplies to the requesting unit data related to the displayed parameter transfer image. The data related to the displayed parameter transfer image is used to indicate the contents of a parameter to be transferred to the parameter transfer image.

When the user makes an operation on the operation image the requesting unit the requesting unit in the user apparatus or the requesting unit in the operation device makes to the information processing apparatus a request corresponding to the user operation through the HTTP request. The requesting unit requests the processing unit to perform the process the process request and requests the information processing apparatus to notify the status of the process and the results of the process notification request in response to the user operation.

When the user taps a touch sensor of the operation unit the requesting unit determines whether the tapped location is within an operation image region based on data supplied from the display . Upon determining that the tapped location is within the operation image region the requesting unit receives an operation on the operation image displayed in the operation image region. When an operation on an instruction content determination image such as the operation image A in is received the requesting unit requests the information processing apparatus to perform the process indicated by the instruction content determination image using a parameter indicated by the data related to the parameter transfer image supplied from the display . If an operation is performed on the operation image A in the state of the requesting unit requests the information processing apparatus to perform monochrome copying on an A4 sheet size plain sheet at a magnification of 110 .

More specifically the requesting unit generates XML data indicating an HTTP request. The HTTP request describes an instruction to perform a process corresponding to the operated instruction content determination image the copy process in this case using a parameter transferred via the parameter transfer image the instruction is hereinafter referred to as a job order . The requesting unit requests the information processing apparatus to perform the process by the HTTP request by transmitting the XML data to the information processing apparatus . The XML data that the requesting unit transmits to request the process is hereinafter referred to as process request data . If the copy process is requested the process request data including a job order is generated. Depending on the requested process no job order is included in the process request data. For example if a process to shut down the power of the information processing apparatus is requested no job order is included in the process request data.

When the requesting unit transmits the HTTP request an HTTP response is returned in response. The requesting unit performs a series of processes to transmit the HTTP request and receive the HTTP response. During the series of processes no operation from the user is accepted. For example the operation image group A of may now be displayed. Even if the user taps the operation image the tapped location is not identified. In other words the requesting unit stays in a state that receives no operation from the user in a freeze state until the HTTP response responsive to the HTTP request transmitted by the requesting unit is received. Once the requesting unit receives the HTTP response the requesting unit is ready to receive an operation from the user again.

In order to request the process the requesting unit specifies a notification method of notifying the status of the process and requests the status of the process to be notified through the specified notification method. More specifically the requesting unit specifies one of the first second third and fifth notification methods to be used.used. The requesting unit describes the specified notification method on the process request data and then transmits the process request data. The notification unit in the information processing apparatus notifies the status of the process using the notification method specified in the process request data. Alternatively the requesting unit may describe the specified notification method on the XML data different from the process request data and transmit the XML data as an HTTP request to the display device . In such a case the notification unit notifies in the HTTP response responsive to the HTTP request that the notification method is specified and performs the notification through the specified notification method thereafter.

If the fifth notification method is used the requesting unit performs the first communication to notify the information processing apparatus that the status of the process has occurred and requests the information processing apparatus to notify the requesting unit of the status. More specifically the display device receives from the notification unit in the information processing apparatus the XML data complying with the WebSocket standard that describes the occurrence of the status of the process. The requesting unit generates an HTTP request describing the request to notify the status based on the received XML data and then transmits the HTTP request to the information processing apparatus . In this way the requesting unit requests the information processing apparatus to notify the status of the process notified through the first communication.

When the first communication is made the requesting unit may or may not transmit the HTTP request. In the exemplary embodiment the requesting unit transmits the HTTP request if a predetermined operation is performed subsequent to the first communication but does not transmit the HTTP request if the predetermined operation is not performed subsequent to the first communication. The predetermined operation is described in detail below.

If the display device requests the information processing apparatus to make a process in response to an operation performed on the operation image such as the operation image A of the controller in the information processing apparatus controls the processing unit to perform the requested process. More specifically if the process request data is received from the display device via the interface unit the controller controls the processing unit to perform the process requested by the process request data. In other words when the process is requested through the HTTP request by the display device the controller controls the processing unit to perform the requested process. The process request data as the XML data transmitted as the HTTP request from the display device is interfaced by the interface unit and then supplied to the controller .

The controller analyzes the job order included in the process request data and controls the processing unit such that the process is performed in accordance with the contents of the instruction as an analysis result of the job order. More specifically the controller executes the instructed process such as the copy process in accordance with the instructed parameter. The processing unit thus reads an image from a medium in accordance with an image quality and an image reading method specified by the operation of the user and forms the read image in an output format magnification paper sheet and color mode specified by the operation of the user.

The controller issues a transaction identification ID as information identifying the process when the process is performed. The controller associates the issued transaction ID with a destination of communication of the display device as the requester and then stores the issued transaction ID and the destination of communication in an associated state on the memory . In order to perform the process the controller supplies the issued transaction ID to the processing unit and the processing unit supplies the transaction ID together with the status information to the notification unit .

The controller stores the notification method described on the process request data one of the first through third notification methods and the transaction ID in association with each other. The notification unit transmits the XML data describing the status information supplied together with the transaction ID to the destination of the communication associated with the transaction ID supplied from the processing unit . The notification unit transmits the XML data in the notification method associated with the transaction ID thereby performing the notification in the specified notification method.

The presentation layer includes the user interface UI controller a device controller and a communication unit . The UI controller controls the user interface displays the operation image and the status information and receives an operation from the user. The UI controller is implemented by the display of . The device controller requests the information processing apparatus to perform the process in response to the operation of the user and controls the function layer described below. The device controller is implemented by the requesting unit . The communication unit controls the communication that the UI controller and the device controller perform with the information processing apparatus .

The interface is a layer that performs the function of interfacing for the connection between the presentation layer to the function layer . The connection between the presentation layer and the interface may be performed using an external device such as the communication apparatus having the communication function as illustrated in for connection with the user apparatus or may be performed not using such an external device for connection with the operation device . The function layer is used to implement a function of processing data for use in a target application such as a copy function or a scan function. The middleware layer is used to perform an intermediate and general purpose process between the function layer and the hardware layer . The hardware layer is used to physically implement a process such as image reading or image forming.

The function layer includes a reception and responding unit an event notification unit an operation image manager an operation image DB and a function unit that provides the copy function and the scan function. The reception and responding unit receives the request of the process indicated by the process request data transmitted from the presentation layer via the interface and requests the function unit to perform the process. The reception and responding unit also issues the transaction ID. The reception and responding unit transmits response data indicating a response to the received request to the presentation layer via the interface . The response data may simply indicate the reception of the request or may also indicate the status information. More specifically the reception and responding unit may notify the status of the process and the notification may be a pull based notification based on the first and second notification methods.

The event notification unit receives the status information via the function unit . The event notification unit describes the supplied status information on the XML data complying with the WebSocket standard and then transmits the XML data to the presentation layer via the interface . In other words the notification performed by the event notification unit is a push based notification based on the third or fourth notification method. The operation image manager manages the operation image to be transmitted to the presentation layer . The operation image DB is a database that stores the operation image. The function unit is a module group that implements the function that the information processing apparatus provides to the user.

The interface of works as the interface unit of . The operation image manager and the operation image DB cooperate with each other thereby working as the providing unit . The middleware layer and the hardware layer cooperate with each other thereby working as the processing unit . The reception and responding unit and the event notification unit cooperate with each other thereby working as the notification unit . The reception and responding unit and the function unit cooperate with each other thereby working as the controller .

When the user operates to request an image to be printed the presentation layer transmits to the function layer via the interface request data requesting the job to be started. Upon receiving the request data the reception and responding unit analyzes the request data and supplies the request data to the requesting unit as a module responding to the contents of the request in this case the requesting unit in the print function . The requesting unit analyzes the supplied request data and then requests the middleware layer to generate the job. The middleware layer performs a process to generate the requested job and notifies the requesting unit of the process results. The requesting unit notifies the presentation layer of the notified process results via the reception and responding unit and the interface .

The presentation layer displays the notified process results. The middleware layer also supplies the generated job to the use controller the image forming controller in the print function . The use controller converts the supplied job into a user job that has a format to be presented to the user and then supplies data representing the contents of the user job to the management unit via the middleware layer . The management unit generates the XML data representing the contents of the user job indicated by the supplied data. The contents of the user job correspond to the status information and the XML data generated by the management unit is status information data. The management unit transmits the generated status information data to the presentation layer via the event notification unit and the interface . The push based notification related to the job is thus performed.

The user may now perform an operation to request a process to suspend quit or continue the job or to modify the order of priority. The presentation layer then transmits the request data requesting one of these processes to the function layer via the interface . Upon receiving the request data the reception and responding unit analyzes the received request data and supplies the request data to the management unit as the module responsive to the contents of the request the management unit in the print function . The management unit analyzes the supplied request data and then requests the middleware layer to perform the requested process. The middleware layer performs the requested process and notifies the management unit of the process results. The management unit notifies the presentation layer of the notified process results via the reception and responding unit and the interface . The presentation layer then displays the notified process results.

The information processing system thus configured performs an execution process to execute a process such as image forming in response to the operation of the user. The operation of each apparatus in the information processing system is described with reference to and .

The user apparatus transmits to the information processing apparatus via the communication apparatus the request data requesting the operation image step S . Upon receiving the request data the information processing apparatus generates the operation image data including the operation image requested by the request data step S . The information processing apparatus transmits the operation image data to the user apparatus via the communication apparatus step S . The user apparatus displays the operation image included in the received operation image data step S . The operations in steps S and S are performed by the display and the operations in steps S and S are performed by the providing unit .

When the user performs an operation on the displayed operation image the user apparatus receives the operation of the user step S . If the user operation is received in the instruction content determination image such as the operation image A of in step S the user apparatus generates the process request data indicating the request of the process specified by the operation on the operation image step S and transmits the process request data to the information processing apparatus via the communication apparatus step S . Upon receiving the process request data the information processing apparatus executes the process responsive to the request indicated by the process request data step S . The operations in steps S S and S are performed by the requesting unit and the operation in step S is performed by the processing unit and the controller in cooperation.

The information processing apparatus generates the status information data each time the status of the process is updated step S and transmits the generated status information data to the user apparatus via the communication apparatus step S . Upon receiving the status information data the user apparatus displays the status information indicated by the status information data step S . The operations in steps S and S are performed by the notification unit and the operation in step S is performed by the display . Communications performed in steps S S S and S are performed via the interface unit and the communication apparatus .

The notification unit in the information processing apparatus notifies the display device of the status using one of the first through fourth notification methods. The operation of each apparatus in this process is described below with reference to through . Entities active in the processes of through include the device controller in the display device the reception and responding unit and the event notification unit in the information processing apparatus the middleware layer and the hardware layer . In the process of the same active entities as those in the processes of through are used except that the reception and responding unit is replaced with the interface .

Upon receiving the XML data the reception and responding unit in the information processing apparatus interprets the contents of the request described in the XML data step S and instructs the middleware layer of the information processing apparatus to execute the process in accordance with the interpreted contents step S . The middleware layer and the hardware layer execute the instructed process in cooperation namely modify the parameter step S . Steps S through S correspond to step S executing the process in and .

The middleware layer and the hardware layer supplies as the status information information representing the results of the process to the reception and responding unit step S . The reception and responding unit generates the XML data the status information data describing the supplied status information the modification results of the parameter step S and then transmits the XML data to the display device as the requester of the process step S . The device controller in the display device displays the status information described on the received XML data on the display unit thereof step S . Steps S and S correspond to step S generating the status information data in and . Step S corresponds to step S transmitting the status information data and step S corresponds to step S displaying the status information .

The reception and responding unit generates information indicating the instruction of the process based on the interpreted contents of the process the information is called a copy job herein and is hereinafter generally referred to as instruction information and supplies the instruction information together with the transaction ID to the middleware layer step S . The middleware layer and the hardware layer execute the process copy process in cooperation based on the instruction information step S . After supplying the instruction information the reception and responding unit transmits XML data as an HTTP response to the display device step S . The XML data includes information that indicates that the request to copy has been received such as a character string copy job has been accepted and the issued transaction ID. The operation in step S may be performed in parallel with or prior to the operation in step S. The device controller in the display device references the HTTP response and displays on the display unit thereof information indicating that the request has been accepted step S and causes the transaction ID to be stored on the memory thereof step S .

After receiving the response to the request of the copy process the device controller in the display device transmits as an HTTP request the notification request requesting the status of the copy process to be notified and the XML data describing the transaction ID stored in step S step S . If the status information of the copy process associated with the transaction ID is not yet supplied the reception and responding unit in the information processing apparatus transmits to the display device the HTTP response that indicates that the status information has not been received step S . The operations in steps S and S are repeated.

When a copy an image indicating the read original document is output to a medium the middleware layer in the information processing apparatus detects the copy step S . The middleware layer associates the status information indicating that the copy has been output to the medium with the transaction ID supplied in step S and then supplies the status information with the transaction ID associated therewith to the reception and responding unit step S . The reception and responding unit causes the memory to store the supplied status information and transaction ID step S . Upon receiving the HTTP request having the notification request and transaction ID described thereon after step S step S the reception and responding unit reads from the memory the status information associated with the transaction ID described on the HTTP request and generates an HTTP response having the status information described thereon step S .

When the reception and responding unit transmits the HTTP response to the display device step S the device controller in the display device displays the status information described on the HTTP response as illustrated in step S on the display unit of the display device step S . Since the information related to the process requested by the display device is associated with the transaction ID the status of the process is notified to the display device as the requester. The operations in steps S through S are repeated until the process results are notified at the end of the copy process.

The middleware layer receives the transferred designation and sets the display device to perform the notification in the third notification method step S . The middleware layer turns on a flag indicating whether to perform the third notification method. In the example of the notification method is specified by the XML data different from the process request data. Alternatively the device controller in the display device may describe a specified notification method on the process request data. In such a case when the reception and responding unit supplies to the middleware layer the instruction information and transaction ID in step S the reception and responding unit sets the third notification method by notifying the middleware layer that the third notification method has been specified.

The operations in steps through S and the operations in steps S through S as illustrated in are then performed. The middleware layer and the hardware layer of the information processing apparatus performs the operation in step S detecting the output copy . Since the flag is turned on the middleware layer and the hardware layer supply the status information indicating that the copy has been output to the medium and the transaction ID to the event notification unit rather than to the reception and responding unit step S . The event notification unit generates the XML data describing the supplied status information such as the number of copies and the transaction ID step S and then transmits the XML data to the display device step S . The device controller in the display device displays the contents of the XML data such as the status information C of on the display unit of the display device step S . The operations in steps S and S through S are repeated until the process results are notified at the end of the copy process.

If a predetermined status such as an out of toner or out of paper sheet status occurs later on the information processing apparatus the middleware layer and the hardware layer of the information processing apparatus cooperate to detect the predetermined status step S . The middleware layer and the hardware layer supply the status information indicating the detected status to the event notification unit step S . The event notification unit generates the XML data including the supplied status information described thereon step S and transmits the XML data to the WebSocket connected display device via the interface step S . The device controller in the display device displays the status information described on the XML data received in step S on the display unit of the display device step S .

As described above statuses different from one display device to another display device may be notified. In such a case subsequent to step S the device controller transmits to the information processing apparatus via the communication unit the XML data describing the status to be notified to the display device . Upon receiving the XML data via the interface the event notification unit stores the status to be notified in association with the destination of the display device . If the status information supplied in step S represents the stored status to be notified the event notification unit notifies that status.

The middleware layer and the hardware layer of the information processing apparatus detect the reading of an original document step S . Since the first notification is determined to be performed in this case the middleware layer and the hardware layer supply the status information including a thumbnail image of the read original document to both the event notification unit and the reception and responding unit steps S and S . The operations in steps S through S are performed by the processing unit .

The event notification unit generates the XML data describing the occurrence of the status of the process namely the XML data that triggers the notification of the status of the process step S and then transmits the XML data to the display device step S . The transmission of the XML data in step S is the first communication. The operations in steps S and S are performed by the notification unit . In the first communication the device controller in the display device displays the information notified in the first communication in the exemplary embodiment step S .

If the predetermined operation is performed as described above in the exemplary embodiment the device controller performs the notification request. More specifically the device controller determines that the notification request is to be made yes in step S if the user performs an operation tapping operation to select the image C of . Upon determining that the notification request is to be made the device controller transmits the HTTP request describing the notification request to the information processing apparatus step S . The operations in steps S and S are performed by the requesting unit .

Operations in steps S generating the HTTP response S transmitting the HTTP response and S displaying the status information respectively similar to the operations in steps S S and S of are performed. The status of the process is thus notified. In step S the reception and responding unit generates the HTTP response describing the status information including the thumbnail image supplied in step S. The transmission of the HTTP response in step S is the second communication. The operations in steps S and S are performed by the notification unit and the operation in step S is performed by the display . illustrates the status thus notified.

The middleware layer and the hardware layer detect the image of the read original document namely the outputting of the copy to the medium step S . Since the second notification is to be performed in this case the middleware layer and the hardware layer supply the status information including the number of copies to the event notification unit rather than the reception and responding unit step S . The operations in steps S and S are performed by the processing unit . The event notification unit generates the XML data describing the status of the process namely the status information data step S and then transmits the XML data to the display device step S . The transmission of the XML data in step S is the third communication. The device controller in the display device displays the status information described on the received XML data on the display unit of the display device step S . The operations in steps S and S are performed by the notification unit and the operation in step S is performed by the display .

If the notification is performed using the response to the polling as in the second notification method the polling is not necessarily performed at the moment of the occurrence of the status of the process. It takes time from the occurrence of the status to the notification. In contrast if the first notification is performed in the fifth notification method the notification is made by performing the first communication and second communication at the occurrence of the status of the process. A period of time from the occurrence of the status to the notification is short in comparison with the case when the notification is performed by the response to the request from the display device . In other words the occurring status is notified faster.

If the occurring status of the process is notified in the push based notification as in the third notification method the information processing apparatus selects the status as a target of notification. In contrast the first notification may be performed in the fifth notification method. As long as the HTTP request is not transmitted from the display device as the notification destination the status of the process is not notified even if the first communication is performed. In the exemplary embodiment the notification destination is enabled to select whether to cause the status to be notified or not if the status occurs as a target of notification.

The exemplary embodiment has been described for exemplary purposes and may be modified as described below. The exemplary embodiment and the modifications thereof may be combined as appropriate.

In the discussion of the exemplary embodiment the user apparatus includes the communication unit that performs communications complying with the wireless LAN standards. The exemplary embodiment is not limited to this configuration. For example the user apparatus may include a communication unit complying with the wired LAN standards such as the communication unit in the operation device . In such a case the user apparatus is connected to a wired LAN router or hub via a communication cable. The communication unit in the user apparatus works to communicate with the other communication apparatus a communication apparatus such as a router or hub which is different from the information processing apparatus .

In the discussion of the exemplary embodiment the first communication unit in the information processing apparatus and the communication unit in the operation device perform communications complying with the wired LAN standards. The exemplary embodiment is not limited to this configuration. For example communications complying with universal serial bus USB or high definition multimedia interface HDMI registered trademark may be performed. Furthermore wireless communications complying with the wireless LAN standards Bluetooth registered trademark or near field communication NFC may be performed. In each case the communication unit in the operation device communicates with the first communication unit in the information processing apparatus skipping another communication apparatus such as a router or hub.

In the exemplary embodiment the operation device includes the controller and the memory as illustrated in . However the operation device may not necessarily have to include the controller and the memory .

The communication unit and the UI unit are connected to a bus in the information processing apparatus and is controlled by the controller . The communication unit is also connected to the first communication unit . The UI unit includes a display screen and a touch sensor overlaid on the display screen and displays an image in response to an operation of the user. The UI unit supplies to the controller operation data responsive to the received user operation and the controller performs a process responsive to the operation data.

In this modification the controller executes the program of a browser thereby implementing the function of the operation unit of . The display receives the operation image data from the first communication unit via the communication unit and displays the operation image data on the UI unit . The requesting unit receives an operation on the operation image when the UI unit is tapped by the user. Via the communication unit and the first communication unit the requesting unit transmits instruction data indicating an instruction determined by the received operation. In this modification the communication is performed between the information processing apparatus and the display device via the interface unit regardless of whether the communication is performed via the other communication apparatus or not.

In the exemplary embodiment and the modifications the operation device is mounted to the housing of the information processing apparatus. But the operation device may not necessarily have to be mounted to the housing of the information processing apparatus.

The operation device is connected to the first communication unit via a communication cable. The operation device is used by the user in a state in which the operation device is mounted on the housing of the information processing apparatus or placed on a desk near the information processing apparatus . As the operation device of the exemplary embodiment the operation device communicates with the information processing apparatus skipping the other communication apparatus such as the communication apparatus in . The communication cable may be unplugged from the operation device and the operation device may be carried to another location to be used for different applications. In the example of another apparatus working as an operation unit such as the user apparatus of instead of the operation device may be connected to the information processing apparatus . The operation device may be connected to the communication apparatus to communicate with the information processing apparatus via the communication apparatus and the communication network .

The processes to be performed by the processing unit are not limited to those described with reference to the exemplary embodiment and may include any process. For example if the information processing apparatus includes a machine in a plant and a device that controls the machine the machine may transport or process materials. In this case one of the user apparatus and the operation device makes communications with the information processing apparatus via a common interface unit thereby operating the information processing apparatus .

In the exemplary embodiment the requesting unit receives an operation on the touch sensor. The configuration is not limited to the touch sensor. If the user apparatus is a tablet terminal the operation may be received using a button disposed on the housing of the user apparatus. If the user apparatus is a personal computer the operation may be received using a keyboard or mouse.

The interface unit complies with the SOAP standard. Alternatively the interface unit may interface for communications complying with standards for representational state transfer REST or standard generalized markup language SGML . The interface unit may be any type as long as the interface unit interfaces for communications complying with any standard for use in web. In this way most of apparatuses enabled to use a browser may be used as an operation device.

In the exemplary embodiment the notification unit determines in accordance with the type of the occurring status whether to perform the first notification or the second notification. The notification unit is not limited to this method. The notification unit may determine whether to perform the first notification or the second notification depending of the size of information representing the status of the process as a target of notification namely the status information . The size of information represents the magnitude of information handled by the computer and is expressed in bits bytes words or octets. If the size of the status information supplied from the processing unit is equal to or above a threshold value the notification unit may determine to perform the first notification. If the size of the status information supplied from the processing unit is below the threshold value the notification unit may determine to perform the second notification.

If the status occurs as a target of notification the information processing system allows the notification destination to select whether to cause the status to be notified or not. Depending on the status the notification is not performed. The workload on the communication and the workload on the process of the display device are reduced. As the size of the status information which represents the status and by which a determination as to whether to notify or not is determined is larger the advantage of reducing the workloads is more pronounced. Since the determination is made based on the size of the status information the workloads on the communication and process are reduced.

The notification unit may perform the determination in accordance with the degree of change in the status of the process as the target of notification. For example the degree of change in the status may be represented by the number of times by which the status changes during a predetermined period of time such as during 1 minute . In the case of the copy process for example the number of copies may change by tens of times during 1 minute and the parameters on copying such as the sheet size or image quality may not change at all during 1 minute or may change several times at most during 1 minute. If the number of times indicating the degree of change is equal to or above a threshold value the notification unit determines to perform the first notification. If the number of times indicating the degree of change is below the threshold value the notification unit determines to perform the second notification.

The status such as the number of copies which changes frequently becomes less valuable as the period of time from the occurrence of the status to the notification becomes longer. For example although the copy process is complete the number of copies in the middle of the copy process may be displayed. In such a case the user may fail to notice that the copy has been completed. The value of the notified number of copies is lower than the precise number of copies that is notified. On the other hand the parameters on copying such as the sheet size or image quality may not change so frequently. Even if the period of time from the occurrence of the status to the notification becomes longer the value of the status to be notified does not become so lower. Since the determination is performed depending on the degree of change in the status of the process in the modification a decrease in the value of the status to be notified is controlled.

If the size of the status information or the degree of change in the status corresponds to the type of status the determination may be performed in response to the type of occurring status in the exemplary embodiment. The workloads on the communication and process are reduced and a decrease in the value of the status is thus controlled. Whether to perform the first notification or the second notification is determined in the ways described above the usefulness of the notification is increased more than when the determination is not performed at all in the ways described above.

The notification unit may switch between the first notification and the second notification depending on information obtained from the display device . If a predetermined operation is performed on the display device after one of the first notification and second notification is performed the notification unit may perform the other of the first notification and second notification thereafter. The predetermined operation may be an operation to transmit the HTTP request subsequent to the first communication in the first notification for example the operation for the notification request such as the operation to select the image C of . Once the first notification is performed subsequent to the operation for the notification request the second notification is performed thereafter.

If the second notification is performed the predetermined operations may include an operation to close the displayed status information an operation to minimize the browser or an operation to switch from a screen displaying the status of the process the screen of to the screen displaying the operation image the screen of . The display in the display device displays an operation image to switch between the fist notification and the second notification and an operation to select on the switching operation image may be used. If one of these operations is performed the requesting unit in the display device transmits the HTTP request indicating that the predetermined operation has been performed. The notification unit determines from the HTTP request that the predetermined operation has been performed and then switches from the second notification to the first notification and then stays in the second notification. One of these operations may be used to switch from the first notification to the second notification.

If it is time consuming for the user to perform an operation to transmit the HTTP request with the first notification performed the second notification may be performed through the switching operation described above. The time consuming operation is thus skipped. If the second communication is performed when a status as a target notification at a low usefulness level is included that status is also notified. This leads to an increase in the workloads on the communication and process. The opportunity to select not to notify the status at the low usefulness level is provided by performing the first notification after the switching operation. In the modification the time saving for the user is thus achieved with the workload of notification reduced.

The providing unit may provide an image associated with the status of the process hereinafter referred to as a status image to the display device .

The status image E is associated with the status in which the original document is being read in the copy process or the scan process. The status image E is associated with the status in which the medium having an image formed in the copy process or the print process is being discharged. If the notification unit notifies the display device of the status in which the original document is being read as a status associated with the status image the display in the display device displays the status image E as the status image associated with the notified status from among the statuses provided by the providing unit . If the notification unit notifies the display device of the status in which the medium having the image formed thereon is being output the display in the display device displays the status image E associated with the notified status.

Since each status image is supplied to the providing unit in advance the status image is not included in the data that the notification unit transmits in the notification of the status the XML data complying with the standards of the HTTP response and the WebSocket . In the modification the notified status is more easily conveyed to the user and the workload on the communication of the notification is reduced.

In the exemplary embodiment the requesting unit issues the notification request when a predetermined operation is performed. The modification is not limited to this method. For example if the predetermined operation has not been performed for a predetermined period of time such as 1 minute from the first communication the requesting unit may make the notification request. If the predetermined operation has been performed for a predetermined period of time such as 1 minute from the first communication the requesting unit may not make the notification request.

The requesting unit may determine whether to make the notification request depending on the type of the occurring status. In such a case the notification unit transmits the XML data describing the type of the occurring status in the first communication. The memory of the display device stores a list of types of statuses making the notification request. If the type of the status described on the received XML data is included in the list the requesting unit transmits the HTTP request requesting the status to be notified. If the type of the status described on the received XML data is not included in the list the requesting unit does not transmit the HTTP request.

In addition to accounting for the type of the occurring status the requesting unit may determine whether to make the notification request depending on the size of the information representing the occurring status or the degree of change of the status. In this case as well the notification unit notifies these pieces of information in the first communication. The requesting unit determines whether to transmit the HTTP request requesting the status to be notified depending on these pieces of information notified in the first communication.

As described above the notification unit determines the first or second notification using the information notified in the first communication. The effect of decreasing the workload on the communication and process is enhanced and the reduction in the value of the notified status is controlled. The modification increases the usefulness of notification in comparison with the case in which the determination method as to whether to transmit the HTTP request available from the exemplary embodiment and the modifications is not performed.

The present invention may include the information processing apparatus the display device the communication apparatus and the information processing system including these apparatus. The present invention may also include a non transitory computer readable medium storing a program that causes a computer to function as the above described elements. The program may be provided in a stored state on an optical disk or downloaded onto the computer via a communication network such as the Internet and then installed for use in the computer.

The foregoing description of the exemplary embodiments of the present invention has been provided for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Obviously many modifications and variations will be apparent to practitioners skilled in the art. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications thereby enabling others skilled in the art to understand the invention for various embodiments and with the various modifications as are suited to the particular use contemplated. It is intended that the scope of the invention be defined by the following claims and their equivalents.

