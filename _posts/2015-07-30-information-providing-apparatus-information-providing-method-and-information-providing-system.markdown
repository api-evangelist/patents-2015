---

title: Information providing apparatus, information providing method, and information providing system
abstract: An information providing apparatus includes: an inputter that obtains log information and personal information corresponding thereto; a tentative ID giver that gives each tentative ID to the personal information at each predetermined timing; a first storage that stores correspondence-relationship information indicating a correspondence relationship between the personal information and the each tentative ID; a receiver that receives a request for outputting information including a requested tentative ID identified by a current tentative ID given and the one past timing when the requested ID was given; an information processor that determines, in accordance with the request, link-relationship information indicating a correspondence relationship between the requested tentative ID and the current tentative ID; a second storage that stores the determined link-relationship information; and an outputter that outputs first information including the requested tentative ID or second information indicating that first-information outputting is not permitted, based on the stored link-relationship information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09521444&OS=09521444&RS=09521444
owner: PANASONIC INTELLECTUAL PROPERTY MANAGEMENT CO., LTD.
number: 09521444
owner_city: Osaka
owner_country: JP
publication_date: 20150730
---
The present disclosure relates to an information providing apparatus an information providing method and an information providing system that anonymize and provide log information.

In recent years for example among household electrical and electronic equipment or audio visual AV equipment the number of pieces of equipment that can connect to networks is increasing. In conjunction with the increase a scheme in which a cloud service provider collects various types of log information including an operation history of the household electrical and electronic equipment or AV equipment over a network is being studied. The cloud service provider analyzes the collected log information and provides a service and or utilizes the collected log information for new product development or marketing strategy.

When the log information is to be provided to a third party it is necessary to anonymize the log information so that the owner of the data thereof cannot be identified. As a method for the anonymization there is a scheme called k anonymity for modifying data by erasing a characteristic attribute of the like so that individuals cannot be narrowed down to k or less individuals see for example Intentional Publication No. WO 2011 142327 .

However it is difficult to apply the k anonymity to information to which content is added over time like log information.

One non limiting and exemplary embodiment provides an information providing apparatus etc. that can provide log information with ensured anonymity.

In one general aspect the techniques disclosed here feature an information providing apparatus including an information providing apparatus includes an inputter that obtains log information and personal information corresponding thereto a tentative ID giver that gives each tentative ID to the personal information at each predetermined timing a first storage that stores correspondence relationship information indicating a correspondence relationship between the personal information and the each tentative ID a receiver that receives a request for outputting information including a requested tentative ID identified by a current tentative ID given and the one past timing when the requested ID was given an information processor that determines in accordance with the request link relationship information indicating a correspondence relationship between the requested tentative ID and the current tentative ID a second storage that stores the determined link relationship information and an outputter that outputs first information including the requested tentative ID or second information indicating that first information outputting is not permitted based on the stored link relationship information.

These general and specific aspects may be implemented using a system a method and a computer program and any combination of systems methods and computer programs.

Additional benefits and advantages of the disclosed embodiments will become apparent from the specification and drawings. The benefits and or advantages may be individually obtained by the various embodiments and features of the specification and drawings which need not all be provided in order to obtain one or more of such benefits and or advantages.

From the viewpoint of personal information protection it is necessary to ensure anonymity when log information is provided. As a method for preventing an individual from being identified based on log information for example there is a method in which an ID for the same individual is re assigned every predetermined period such as every month when the log information is provided. In the following description an ID that is re assigned to the log information every predetermined period is referred to as a tentative ID .

In this case for example if the tentative ID is re assigned every month a user of the log information a person who receives the log information that is provided cannot perform data analysis beyond the period a month . Since the tentative ID is re assigned when one month is exceeded it is not possible to perform data analysis such as comparing the current log information with log information of a year ago for the same individual based on the tentative ID. On the other hand if the tentative ID is not re assigned there is a risk of an individual being identified based on the log information.

Accordingly the present inventors have found a configuration in which the anonymity is ensured and the user of the log information can perform data comparison based on the log information corresponding with a certain number of tentative IDs.

 1 An information providing apparatus according to one aspect of the present disclosure includes an inputter that obtains log information and personal information corresponding to the log information a tentative ID giver that gives tentative IDs to the personal information each of the tentative IDs being given at each predetermined timing a first storage that stores correspondence relationship information indicating a correspondence relationship between the personal information and the each of the given tentative IDs a receiver that receives a request for outputting information including a requested tentative ID given at one past timing on the request the requested tentative ID being identified by i a current tentative ID given to the personal information and ii the one past timing when the requested ID was given to the personal information an information processor that determines in accordance with the request link relationship information indicating a correspondence relationship between the requested tentative ID and the current tentative ID based on the correspondence relationship information stored in the first storage a second storage that stores the determined link relationship information and an outputter that outputs first information including the requested tentative ID or second information indicating that outputting of the first information is not permitted based on the link relationship information stored in the second storage.

Since such an information providing apparatus updates the tentative ID at a predetermined timing it is difficult for a user of the log information to identify an individual. That is the information providing apparatus can provision the log information with the ensured anonymity.

 2 In the aspect described above when the receiver receives a request for outputting a tentative ID identified by a first tentative ID as the current ID and a second timing as the one past timing the information processor may identify a second tentative ID based on the correspondence relationship information stored in the first storage the second tentative ID being a tentative ID given at the second timing and may determine whether or not to output the first information including the second tentative ID based on the link relationship information stored in the second storage and may update the link relationship information stored in the second storage when it is determined outputting the first information and the outputter may output the first information or the second information based on a result of the determination.

With this arrangement since the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID is output under a certain evaluation it is possible to reduce the risk of an individual being identified. In turn upon receiving the information indicating the relationship of the plurality of tentative IDs corresponding to the same personal ID an external apparatus can analyze the log information.

 3 In the aspect described above the information processor may determine whether or not the number of third tentative IDs having the correspondence relationship with the second tentative ID is smaller than a predetermined value the third tentative IDs being included in the link relationship information stored in the second storage and the outputter may output the first information when the number of the third tentative IDs is smaller than the predetermined value and may output the second information when the number of the third tentative IDs is larger than or equal to the predetermined value.

With this arrangement in accordance with the number of tentative IDs the information processor can determine whether or not to output the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID.

 4 In the aspect described above the link relationship information stored in the second storage may be represented as a tree structure in which the requested tentative ID and the current tentative ID serve as nodes and the information processor may determine whether or not the number of nodes linked to the second tentative ID in the tree structure is smaller than a predetermined value and the outputter may output the first information when the number of nodes is smaller than the predetermined value and may output the second information when the number of nodes is larger than or equal to the predetermined value.

With this arrangement the information processor can determine whether or not to output the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID in accordance with the number of nodes of the tentative IDs.

 5 In the aspect described above in the correspondence relationship information stored in the first storage weights may be assigned to the respective tentative IDs the link relationship information stored in the second storage may further include a total value of the weight assigned to the requested tentative ID and the weight assigned to the current tentative ID and the information processor may determine whether or not a total value of the weights corresponding to the second tentative ID is smaller than a predetermined value and the outputter may output the first information when the total value of the weights corresponding to the second tentative ID is smaller than the predetermined value and may output the second information when the total value of the weights corresponding to the second tentative ID is larger than or equal to the predetermined value.

With this arrangement the information processor can determine whether or not to output the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID considering the weights of the tentative IDs.

 6 In the aspect described above when the log information indicates viewing history for TV programs of a user corresponding to the personal information each weight may be assigned in accordance with a type of the TV program indicated by the log information corresponding to each tentative ID.

With this arrangement for link information for a tentative ID that is given to log information whose degree of uniqueness is higher and with which it is easier to identify an individual it is less likely that information of a tentative ID linked to that tentative ID is provided.

 7 In the aspect described above for outputting of the second information the outputter may further output statistical information about the log information corresponding to a tentative ID other than the second tentative ID.

With this arrangement when the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID is not output it is possible to perform log information analysis using the statistical information.

 8 In the aspect described above the information providing apparatus may further include an eraser that receives from an external apparatus when the outputter outputs the first information to an external apparatus information indicating that the first information is deleted in the external apparatus and that erases a correspondence relationship regarding the requested tentative ID from the link relationship information stored in the second storage.

With this arrangement when the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID is erased in the external apparatus it is possible to reset a criterion for determining whether or not to output the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID.

 9 In the aspect described above the first information may further include the log information corresponding to the requested tentative ID.

With this arrangement when the log information is erased in the external apparatus it is possible to reset a criterion for determining whether or not to output the information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID.

 10 In the aspect described above the information providing apparatus may further include a log information recorder that records the log information and a weight assigned to the log information. The information processor may sum the weight assigned to the log information each time the first information is output. The tentative ID giver may give a different tentative ID at timing when the summed weight becomes larger than or equal to a predetermined value.

With this arrangement the information processor can more finely update the tentative ID in accordance with the weights of the log information.

It should be noted that general or specific embodiments may be implemented as a system a method an integrated circuit a computer program a storage medium such as a computer readable compact disc read only memory CD ROM or any selective combination thereof.

For example it should be noted that general or specific embodiments may be implemented as an information providing method or an information providing system.

Embodiments will be described below in detail with reference to the accompanying drawings. The embodiments described below represent specific examples of the present disclosure. Numerical values shapes constituent elements steps the order of steps and so on described in the embodiments below are merely examples and are not intended to limit the present disclosure. Of the constituent elements in the embodiments described below constituent elements not set forth in the independent claims that represent the broadest concept will be described as optional constituent elements. In all of the embodiments what are disclosed therein may also be combined together.

First a description will be given of an overall configuration of an information providing system that is common to an information providing system described in each embodiment below. are diagrams each illustrating an overall configuration of an information providing system. illustrates an overall picture of the information providing system.

A group is for example a company an entity a home or the like and the scale thereof is not limited. The group has a plurality of pieces of equipment including equipment A and equipment B and a home gateway . The pieces of equipment include equipment e.g. a smartphone a personal computer PC and a television TV that can connect to the Internet and equipment e.g. a light a washing machine and a refrigerator that cannot connection to the Internet on their own. The pieces of equipment may include equipment that can connect to the Internet via the home gateway even if it is not capable of connecting to the Internet on its own. The group includes users who use the pieces of equipment .

A data center operating company has a cloud server . The cloud server is a virtualization server that cooperates with various pieces of equipment through the Internet. The cloud server mainly manages for example big data that is difficult to process with a typical database management tool or the like. The data center operating company performs data management management of the cloud server operations of a data center that performs the management and so on. Details of a service provided by the data center operating company are described later.

In this case the data center operating company is not limited to a company that performs only data management operations of the cloud server or the like. For example when an equipment manufacturer that develops and manufactures one piece of the equipment also performs data management management of a cloud server and so on this equipment manufacturer corresponds to a data center operating company .

The data center operating company is not limited to a single company. For example when the equipment manufacturer and another management company perform data management and operation of a cloud server in cooperation with each other or in a shared manner one of or both the equipment manufacturer and the other management company is are assumed to correspond to a data center operating company .

As illustrated in a service provider has a server . The size of the server as used herein is not limited and examples of the server include a memory in a PC or the like. The service provider may or may not have the server .

In the service described above the home gateway is not essential. For example when the cloud server performs all data management the home gateway may be eliminated. There are also cases in which the pieces of equipment do not include any equipment that is incapable of connecting to the Internet on their own as in a case in which all pieces of equipment in a home are connected to the Internet.

First the equipment A or B in the group transmits log information to the cloud server in the data center operating company . The cloud server aggregates the log information of the equipment A or B a in . The log information as used herein indicates for example the operating statuses and the operation date and time of the pieces of equipment . Examples of the log information include a viewing history of a television video recording reservation information of a recorder the operation date and time of a washing machine the amount of laundry thereof the opening closing date and time of a refrigerator door and the number of times it was opened closed. The log information however is not limited to those pieces of information and refers to any information that can be obtained from any kind of equipment.

The log information may also be directly supplied from the pieces of equipment to the cloud server through the Internet. The log information from the pieces of equipment may also be temporarily aggregated in the home gateway and be supplied from the home gateway to the cloud server .

Next the cloud server in the data center operating company supplies the aggregated log information to the service provider in a certain unit of information. The certain unit of information may be a unit with which the data center operating company can organize the aggregated information and can supply it to the service provider or may be a unit requested by the service provider .

The log information may also be provided in a unit other than the certain unit of information and there are also cases in which the amount of log information changes depending on the situation. The log information is stored in the server of the service provider as appropriate b in .

The service provider then organizes the log information into information that suits a service to be provided to users and provides the service to the users. The users to which the information is provided may be the users of the pieces of equipment or may be outside users .

The information that suits the service may be for example directly supplied from the service provider to the users or e or f in . Also the information that suits the service may be supplied to the users after going through the cloud server in the data center operating company again c and d in . The cloud server in the data center operating company may also organize the log information into information that suits the service to be provided to the users and may provide the service to the service provider . The users and the users may be different from each other or may be the same.

Each of the pieces of equipment in the overall configuration described above corresponds to for example a user terminal apparatus described in each embodiment described below. Also the cloud server corresponds to for example a data collecting apparatus and the server corresponds to for example a data analyzing apparatus.

An information providing system according to a first embodiment will be described below with reference to the accompanying drawings.

Also a communication scheme a connection scheme between the apparatuses may be any of a wired communication using the Internet or the like a wireless communication a dedicated communication and so on. In the information providing system real time communication is not essential. For example the user terminal apparatus may collect a certain amount of log information and transfer the collected log information together to the data collecting apparatus . The same also applies to a communication scheme between the data collecting apparatus and the data analyzing apparatus .

First the configuration of the user terminal apparatus will be described. is a block diagram illustrating the configuration of the user terminal apparatus . The user terminal apparatus includes a personal information inputter a log information collector and an information provider .

In response to a user input the user terminal apparatus collects and manages personal information and log information. The user terminal apparatus may collect log information collected and managed by other equipment. The user terminal apparatus transmits the collected personal information and log information to the data collecting apparatus . The collection and management of the personal information and the log information by the user terminal apparatus are performed with predetermined consent from a user thereof. Since a procedure for obtaining the consent and so on is not within the scope of the present disclosure a description thereof is not given herein.

The user terminal apparatus is specifically an information communications terminal such as a portable terminal a smartphone or tablet terminal or a personal computer.

The personal information inputter obtains and records for example personal information such as a name address and age input by a user. The user inputs the personal information by using predetermined inputting means for example in accordance with an entry form displayed on a display screen of the user terminal apparatus . Examples of the predetermined inputting means include a graphical user interface GUI such as a display and a touch panel and a keyboard.

The log information is input to for example the log information collector through a sensor over time. When the user terminal apparatus is a portable terminal the log information is for example movement history information global positioning system GPS information of the user terminal apparatus . That is the sensor in this case is a GPS module.

When the user terminal apparatus is a remote controller for household electrical and electronic equipment or a portable terminal that operates as a remote controller the log information may be a remote controller operation history such as the time at which the power is on or off or user settings of the household electrical and electronic equipment. For example for operation of a television TV the log information may be for example information indicating which program was watched and information indicating whether or not a channel was switched in a short time.

The log information may also be for example information indicating at which station and when a user got on or off a train. The log information may also be log information of the amount of power consumption in each home log information of healthcare equipment such as a weighing scale or sphygmomanometer history of shopping log information of World Wide Web WWW access or the like.

Some of the log information includes information obtained by an apparatus other than the user terminal apparatus . For example the aforementioned information indicating at which station and when the user got on or off a train can be obtained via a turnstile and is obtained by a management server for the turnstile.

The information provider transmits provides the personal information and log information recorded in the user terminal apparatus to the data collecting apparatus .

Next the configuration of the data collecting apparatus will be described. is a block diagram illustrating the configuration of the data collecting apparatus . The data collecting apparatus is one example of an information providing apparatus and includes an information inputter a personal information recorder a log information recorder and an anonymization processor . The data collecting apparatus further includes a tentative ID manager a tentative ID link relationship manager a privacy policy manager a link determiner a link information outputter and an information communicator .

The data collecting apparatus manages the personal information and log information transmitted from the user terminal apparatus modifies the information so that an individual cannot be identified this modification is hereinafter referred to as anonymization and provides the modified information to the data analyzing apparatus of a third party organization.

Although the data collecting apparatus is realized as specifically a server or a cloud server it may be realized in any form.

The information inputter receives data from the information provider in the user terminal apparatus and separates the received data into the personal information and the log information.

The personal information recorder gives an individual ID hereinafter referred to as a personal ID to the personal information that the information inputter received from the user terminal apparatus and records the resulting personal information. is a table illustrating one example of data recorded to the personal information recorder .

Data illustrated in includes as personal information attributes such as names postal codes e.g. Zone Improvement Plan ZIP codes indicating registered addresses ages and occupations. For example information about Mr. A who has a personal ID 1 is stored in the first record in the data . The first record shows that Mr. A lives in a region where the postal code is 107 0061 his age is 39 and his occupation is a dancer.

Similarly the personal information of Mrs. B having a personal ID 2 is stored in the next record. Although the attributes included in the personal information in the data are names postal codes ages and occupations the attributes may include for example genders family compositions hobbies and so on and are not particularly limiting.

The log information recorder gives a corresponding personal ID to the log information that the information inputter received from the user terminal apparatus and records the resulting information. is a table illustrating one example of data recorded in the log information recorder .

A viewing history is recorded in data illustrated in as log information. In the data a user with a personal ID 1 watched a historical drama from 9 00 and watched a domestic animation from 4 15 10 00. A user with a personal ID 2 watched a foreign film from 7 15 9 00. Although illustrates only representative data of the data it is assumed that a viewing history is collected each time a user watches a program and all of the viewing history is recorded in the log information recorder .

The data includes genre information of television programs as the viewing history. The viewing history may include for example specific program title names like those shown in electronic program guide EPG information and metadata regarding the programs.

Upon input of the personal information the anonymization processor performs modification such as replacing information that leads to personal identification with more general information for example by eliminating that information from the input personal information and outputs the modified personal information. For example in the case of personal information like the data illustrated in the anonymization processor eliminates the name and replaces the age written as 39 years old with the 30 s i.e. represents the personal information with broader concepts . By doing so the anonymization processor reduces the individual identifiability the possibility that individuals are identified .

The tentative ID manager manages stores associations between the personal IDs given to personal information and tentative IDs. Each tentative ID is an identifier that is given to data supplied from the data collecting apparatus to the data analyzing apparatus . The tentative ID is randomly and uniquely given so that the relationship with the personal ID cannot be predicted by itself.

The tentative ID link relationship manager manages stores the relationship among the tentative IDs assigned to the log information provided to the data analyzing apparatus . The tentative ID is updated at a predetermined timing even when it corresponds to the same personal ID. Thus the data analyzing apparatus cannot know the relationship among the tentative IDs.

However in the information providing system under a certain restriction the data collecting apparatus provides to the data analyzing apparatus information hereinafter referred to as link information indicating that one tentative ID and another tentative ID indicate the same user correspond to the same personal ID . The tentative ID link relationship manager then manages the relationship provided to the data analyzing apparatus this relationship is hereinafter referred to as a tentative ID link relationship . is a table illustrating tentative ID link relationships.

A table illustrated in illustrates a tentative ID link relationship in April the tentative ID link relationship being stored in the tentative ID link relationship manager .

The tentative ID link relationship is information generated by linking in response to a request for link information from the data analyzing apparatus tentative IDs corresponding to the request.

For example when the data analyzing apparatus issues a request for link information indicating a January tentative ID for ID  which is an April tentative ID S a tentative ID link relationship in which ID  and ID  are linked to each other in a tree structure is generated as illustrated in the table . The number of nodes in the table in the tree structure included in the tentative ID link relationship is also stored in the tentative ID link relationship manager .

Similarly when the data analyzing apparatus issues a request for link information indicating a tentative ID for February for ID  which is a May tentative ID S a tentative ID link relationship in which ID  and ID  are linked to each other is generated as illustrated in a table . Thus in the table the tentative ID link relationship in which the tentative IDs ID  and ID  are linked to each other is added to the contents of the table .

Such a tentative ID link relationship is information that differs from one data analyzing apparatus to another. That is when the number of data analyzing apparatuses is two or more a plurality of tables is also prepared.

The privacy policy manager manages stores the numbers the upper limit number or the upper limit value of tentative IDs in a tentative ID link relationship the numbers serving as a criterion for determining whether or not to output the link information. The link determiner which is described below determines whether or not to provide the link information in accordance with the number of tentative IDs included in the tentative ID link relationship. For example in a case in which the link determiner permits outputting of link information when two tentative IDs are linked in a tentative ID link relationship and does not permit outputting of link information when three tentative IDs are linked in a tentative ID link relationship 3 negative is stored in the privacy policy manager . When the number of user terminal apparatuses that are connected is two or more the numbers of tentative IDs may be the same for all of the user terminal apparatuses or may be arbitrarily set for each of the user terminal apparatuses . When the tentative IDs are linked in a tree structure the number of tentative IDs can be restated as the number of nodes.

Upon receiving a request for link information from the data analyzing apparatus the link determiner determines whether or not the link information is to be provided. More specifically by referring to the tentative ID link relationship stored in the tentative ID link relationship manager the link determiner calculates the number of nodes when a link of a tentative ID corresponding to the request is added. When the calculation result is smaller than an upper limit number stored in the privacy policy manager the link information outputter provides the link information to the data analyzing apparatus . When the calculation result is larger than or equal to the upper limit number stored in the privacy policy manager the link information outputter rejects providing the link information to the data analyzing apparatus .

The link information outputter generates link information corresponding to a request from the data analyzing apparatus . For example when a request for a January tentative ID for ID  is received from the data analyzing apparatus and the link determiner permits providing the link information the link information outputter generates link information in which ID  is associated with ID  and provides the generated link information to the data analyzing apparatus via the information communicator a communicator described below .

The information communicator reads the personal information recorded in the personal information recorder and the log information recorded in the log information recorder modifies the read information and transmits the modified information to the data analyzing apparatus . illustrates an example of data transmitted by the information communicator . More specifically the information communicator includes a modifier that performs information modification involving giving a tentative ID and the communicator that transmits the modified information. When giving a tentative ID the modifier stores the association between the tentative ID and a personal ID in the tentative ID manager .

For example in represents data in which ID  is given to viewing history information time and a viewing history of the user with a personal ID 1 as a tentative ID. The data in includes anonymized personal information age in the 30 s that is personal information represented with a broader concept output from the anonymization processor . The viewing history information included in the data in indicates that the user watched a historical drama at 9 00. The viewing history information is one example of the log information.

 in represents data in which ID  which is the same tentative ID as that in the data is given to the viewing history information of the user with the personal ID 1 . The viewing history information included in the data in indicates that this user watched a news program at 7 00.

 in represents data in which ID  is given to the viewing history information of the user with the personal ID 1 as a tentative ID. The viewing history information included in the data in indicates that this user watched a domestic animation at 4 15 10 00.

The above described data and in to which ID  is given and the data in to which ID  is given are data of the same user. However the data analyzing apparatus can determine that these pieces of data are the same in that the ages are in the 30 s but cannot know whether or not these pieces of data are data of the same user.

 in is link information that the information communicator transmits in response to a request from the data analyzing apparatus . More specifically in is link information in which ID  which is a January tentative ID of the user with the personal ID 1 is associated with ID  which is an April tentative ID. With such link information when the data analyzing apparatus receives the link information it can associate the log information for January for the same user as the user of ID .

 in is data in which ID  is given to the viewing history information of the user with the personal ID 1 as a tentative ID. The viewing history information included in the data in indicates that this user watched a cooking program at 7 15 12 15. The data to which ID  is given and the data to which ID  is given are data of the same user. However the data analyzing apparatus can determine that these pieces of data are the same in that the ages are in the 30 s but cannot know whether or not these pieces of data are data of the same user.

 in is link information in which ID  which is a February tentative ID of the user with the personal ID 1 is associated with ID  which is a May tentative ID.

The communicator in the information communicator also receives a request for link information which is transmitted by the data analyzing apparatus .

Next a description will be given of the configuration of the data analyzing apparatus . is a block diagram illustrating the configuration of the data analyzing apparatus . The data analyzing apparatus includes an information communicator an anonymized information recorder a log information recorder a link information recorder an analysis result recorder and an analyzer .

By using data received from the data collecting apparatus the data analyzing apparatus analyzes what type of preference a user has. As described above the tentative ID is updated in a month. Thus the data analyzing apparatus can determine the preference and so on of a user identified with a tentative ID by collecting log information for one month and performing analysis involving collaborative filtering or the like. By using the data of users having the same tendency in accordance with results of such analysis the data analyzing apparatus can recommend a program that suits the preference of the users.

The information communicator receives data from the data collecting apparatus the information communicator and separates the data into anonymized personal information and log information. The information communicator transmits a request for link information to the data collecting apparatus the communicator and receives the link information from the data collecting apparatus the communicator .

The anonymized information recorder records anonymized personal information anonymized information output from the information communicator in conjunction with a tentative ID. The anonymized personal information is for example information indicating that the age is in the 30 s.

The log information recorder records the log information output from the information communicator in conjunction with a tentative ID.

The link information recorder records the link information that the information communicator receives from the data collecting apparatus . The link information is for example information indicating that a January tentative ID for ID  which is an April tentative ID of the user with the personal ID 1 is ID . The link information is recorded for example in a data form similar to that of the data stored in the tentative ID link relationship manager in the data collecting apparatus but may be recorded in any form.

The analysis result recorder records a result of analysis performed by the analyzer which is described below. The result of the analysis is not an individual piece of log information but is information statistical information that has been subjected to statistical processing.

The analyzer performs information analysis by using anonymized information recorded in the anonymized information recorder the log information recorded in the log information recorder the link information recorded in the link information recorder and past analysis results. The analyzer performs for example information analysis to determine the number of users who have watched programs in a certain genre ten times or more in a month. By performing information analysis the analyzer also determine in what type of genre and how many times a certain user has watched programs.

Now a description will be given of an overview of the operation of the information providing system . is a sequence diagram illustrating the operation of the information providing system . are schematic diagrams illustrating APIs used in the operation of the information providing system .

First the user terminal apparatus obtains personal information and collects log information S . The personal information is specifically obtained and recorded by the personal information inputter . Specifically the log information is collected and recorded by the log information collector .

Next the information provider in the user terminal apparatus transmits provides data including the personal information and the log information to the data collecting apparatus S .

The data collecting apparatus receives the data from the information provider in the user terminal apparatus and modifies the received data and transmits the modified data to the data analyzing apparatus S . More specifically the personal information input to the information inputter is given a personal ID by the personal information recorder and is subjected to anonymization processing performed by the anonymization processor . The log information input to the information inputter is given a personal ID by the log information recorder . The modifier then gives a tentative ID to the data including the log information and the anonymized personal information and the communicator transmits the data to which the tentative ID is given.

As illustrated in the data includes the ID of the data collecting apparatus the ID of a transmission source the ID of the data analyzing apparatus the ID of a transmission destination and an identifier indicating that this data is a history transmission command. The data further includes a tentative ID an attribute an anonymized age such as in the 30 s time and a viewing history viewing history information log information .

Upon receiving such data the information communicator in the data analyzing apparatus performs analysis by using the received data and an analysis result statistical information already recorded in the analysis result recorder S . An example of the analysis has already been described above. After S it is assumed that the log information is transmitted to the data analyzing apparatus . The tentative ID is updated every month.

The information communicator in the data analyzing apparatus transmits a request for the link information to the communicator in the data collecting apparatus S . Specific details of the request are that the user wants to know a January tentative ID for ID  which is an April tentative ID.

When the communicator receives the request the link determiner counts the number of nodes included in the tentative ID link relationship corresponding to the request S . More specifically the link determiner refers to the data in the tentative ID manager to determine that the January tentative ID corresponding to ID  is ID . The link determiner then refers to the tentative ID link relationship manager to check whether or not there is a tentative ID link relationship including the tentative ID ID .

When there is a tentative ID link relationship including ID  the link determiner further links ID  to the tentative ID link relationship and then counts the number of nodes included in the tentative ID link relationship. When there is no tentative ID link relationship including tentative ID  the link determiner newly generates a tentative ID link relationship in a tree structure in which ID  and ID  are linked to each other and counts the number of nodes included in the generated tentative ID link relationship.

The link determiner then determines whether or not the number of nodes is larger than or equal to an upper limit value stored in the privacy policy manager S .

If the number of nodes is larger than or equal to the upper limit value YES in S provision of the link information to the data analyzing apparatus causes a risk of the individual being identified. Accordingly the link information outputter issues to the data analyzing apparatus via the communicator a notification indicating that link information transmission is not permitted S .

The API of the data notification transmitted in this case is illustrated in . As illustrated in the data includes the ID of the data collecting apparatus the ID of a transmission source the ID of the data analyzing apparatus the ID of a transmission destination an identifier indicating that this data indicates that link information transmission is not permitted a negative response command and a session ID.

On the other hand if the number of nodes is smaller than the upper limit value NO in S the link information outputter generates link information i.e. information in which ID  and ID  are associated with each other and transmits the generated link information to the data analyzing apparatus via the communicator S .

The API of the data notification transmitted in this case is illustrated in . As illustrated in the data includes the ID of the data collecting apparatus the ID of a transmission source the ID of the data analyzing apparatus the ID of a transmission destination an identifier indicating that this data indicates that link information transmission is permitted an affirmative response command a session ID a tentative ID in this case ID  and a corresponding tentative ID in this case ID  .

In the example illustrated in the tentative ID is updated changed every month. It is also assumed that the upper limit value for the number of nodes the value being stored in the privacy policy manager is 3. It is further assumed that no tentative ID link relationship is initially stored in the tentative ID link relationship manager .

First in April the data analyzing apparatus issues a request for a January tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating a January tentative ID for ID  which is an April tentative ID. Such a request is issued for example when the user of the data analyzing apparatus desires to perform analysis on both the log information in April and the log information in January together the log information being obtained by the user terminal apparatus . Since the log information is already recorded in the log information recorder only the link information is requested in step S.

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the January tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that there is no such a tentative ID link relationship.

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the number of nodes included in the generated tentative ID link relationship. The number of nodes in this case is 2 which is smaller than the upper limit value 3 for the number of nodes. Thus the link determiner determines that there is no problem with providing the link information and the link information outputter transmits to the data analyzing apparatus via the communicator the link information in which ID  and ID  are associated with each other. The link determiner stores the generated tentative ID link relationship in the tentative ID link relationship manager so that the data in the tentative ID link relationship manager takes a form as in the table .

Next in May the data analyzing apparatus issues a request for a February tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating a February tentative ID for ID  which is a May tentative ID.

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the February tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that there is no such a tentative ID link relationship.

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the number of nodes included in the generated tentative ID link relationship. The number of nodes in this case is 2 which is smaller than the upper limit value 3 for the number of nodes. Thus the link determiner determines that there is no problem with providing the link information and the link information outputter transmits to the data analyzing apparatus via the communicator the link information in which ID  and ID  are associated with each other. The link determiner adds stores the generated tentative ID link relationship to in the tentative ID link relationship manager so that the data in the tentative ID link relationship manager takes a form as in the table .

Next in July the data analyzing apparatus issues a request for an April tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating the April tentative ID for ID  which is a July tentative ID.

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the April tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID . In this case the tentative ID link relationship in which ID  and ID  are linked to each other the tentative ID link relationship being generated in step S is already stored in the tentative ID link relationship manager .

In this case if ID  is further linked to ID  in the tentative ID link relationship in which ID  and ID  are linked to each other as illustrated in a table the number of nodes in the tentative ID link relationship is 3 which is larger than or equal to the upper limit value 3 for the number of nodes. Thus the link determiner determines that there is a problem with providing the link information and the link information outputter issues to the data analyzing apparatus a notification indicating that the link information cannot be transmitted. This notification is issued via the information communicator the communicator and the information communicator .

In this case although the data in the tentative ID link relationship manager is not updated from the state in the table is not changed to the state in the table the data may be updated.

After step S there is a case in which in July the data analyzing apparatus issues a request for the January tentative ID S that is there is a case in which the information communicator in the data analyzing apparatus issues a request for link information indicating the January tentative ID for ID  which is the July tentative ID.

In this case the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the January tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID . The tentative ID link relationship in which ID  and ID  are linked to each other the tentative ID link relationship being generated in step S is already stored in the tentative ID link relationship manager .

In this case if ID  is further linked to ID  in the tentative ID link relationship in which ID  and ID  are linked to each other as illustrated in a table the number of nodes in tentative ID link relationship is 3 which is larger than or equal to the upper limit value 3 for the number of nodes. Thus the link determiner determines that there is a problem with providing the link information and the link information outputter issues to the data analyzing apparatus a notification indicating that the link information cannot be transmitted. This notification is issued via the information communicator the communicator .

In the example operation described above the upper limit value for the number of nodes the number of links in a tree structure in a tentative ID link relationship is stored in the privacy policy manager . In contrast in an example operation described below the link determiner determines whether or not the link relationship can be output based on whether or not the total of weights of tentative IDs included in a tentative ID link relationship is larger than or equal to an upper limit value stored in the privacy policy manager . In connection with the determination the tentative IDs in the data associations stored in the tentative ID manager have been weighted. is a table illustrating one example of the weighted data stored in the tentative ID manager .

As illustrated in the tentative IDs in data stored in the tentative ID manager are weighted. For generating a tentative ID link relationship or for further linking a tentative ID to a tentative ID link relationship the link determiner totals such weights and compares the total with the upper limit value stored in the privacy policy manager .

When the communicator receives the request the link determiner totals the weights of tentative IDs included in a tentative ID link relationship corresponding to the request S . More specifically the link determiner refers to the data in the tentative ID manager to identify that the January tentative ID corresponding to ID  is ID . The link determiner refers the tentative ID link relationship manager to check whether or not there is a tentative ID link relationship including ID .

When there is a tentative ID link relationship including the tentative ID ID  the link determiner further links ID  to the tentative ID link relationship and then totals the weights of the tentative IDs included in the resulting tentative ID link relationship. When there is no tentative ID link relationship including the tentative ID  the link determiner newly generates a tentative ID link relationship in a tree structure in which ID  and ID  are linked to each other and totals the weights of the tentative IDs included in the generated tentative ID link relationship.

The link determiner then determines whether or not the total weight is larger than or equal to the upper limit value stored in the privacy policy manager S .

If the total weight is larger than or equal to the upper limit value YES in S the link information outputter issues to the data analyzing apparatus via the communicator a notification indicating that the link information transmission is not permitted S .

On the other hand if the total weight is smaller than the upper limit value NO in S the link information outputter generates link information and transmits the generated link information to the data analyzing apparatus via the communicator S .

Such an operation of the link determiner will be described below in more detail with reference to . illustrates a specific example of an operation using the weights of tentative IDs in the information providing system .

In the example illustrated in the tentative ID is updated changed every month. It is also assumed that the upper limit value for the total weight the upper limit value being stored in the privacy policy manager is 50. It is further assumed that no tentative ID link relationship is initially stored in the tentative ID link relationship manager .

First in April the data analyzing apparatus issues a request for a January tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating a January tentative ID for ID  which is an April tentative ID. Such a request is issued for example when the user of the data analyzing apparatus desires to perform analysis on both the log information in April and the log information in January together the log information being obtained by the user terminal apparatus .

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the January tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that there is no such a tentative ID link relationship.

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the total of the weights of the tentative IDs included in the generated tentative ID link relationship. During the calculation of the total weight the data in the tentative ID manager illustrated in is referred to. Specifically the total weight is 35 which is smaller than the upper limit value 50 . Thus the link information outputter transmits to the data analyzing apparatus the link information in which ID  and ID  are associated with each other. The data in the tentative ID link relationship manager in this case takes for example a form as in a table .

Next in May the data analyzing apparatus issues a request for a February tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating a February tentative ID for ID  which is a May tentative ID.

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the February tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that there is no such a tentative ID link relationship.

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the total of the weights of the tentative IDs included in the generated tentative ID link relationship. The total weight in this case is 45 which is smaller than the upper limit value 50 . Thus the link information outputter transmits to the data analyzing apparatus the link information in which ID  and ID  are associated with each other. The data in the tentative ID link relationship manager in this case takes for example a form as in a table .

Next in July the data analyzing apparatus issues a request for an April tentative ID S . More specifically the information communicator in the data analyzing apparatus issues a request for link information indicating an April tentative ID for ID  which is a July tentative ID.

In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the April tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID . In this case the tentative ID link relationship in which ID  and ID  are linked to each other the tentative ID link relationship being generated in step S is already stored in the tentative ID link relationship manager .

In this case if ID  is further linked to ID  in the tentative ID link relationship in which ID  and ID  are linked to each other as illustrated in a table the total of the weights of the tentative IDs is 75 negative which is larger than or equal to the upper limit value 50 . Thus the link information outputter issues to the data analyzing apparatus a notification indicating that the link information cannot be transmitted.

After step S in July the data analyzing apparatus may issue a request for a January tentative ID S that is the information communicator in the data analyzing apparatus may issue a request for link information indicating a January tentative ID for ID  which is a July tentative ID.

In this case the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the January tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID . The tentative ID link relationship in which ID  and ID  are linked to each other the tentative ID link relationship being generated in step S is already stored in the tentative ID link relationship manager .

In this case if ID  is further linked to ID  in the tentative ID link relationship in which ID  and ID  are linked to each other as illustrated in a table the total weight is 75 which is larger than or equal to the upper limit value 50 . Thus the link information outputter issues to the data analyzing apparatus a notification indicating that the link information cannot be transmitted.

Although the tentative IDs in the data described above and illustrated in are weighted the weights assigned to the respective tentative IDs may be arbitrarily specified by an administrator of the data collecting apparatus . For example the weights may be determined based on a combination of the rules described below. The weights may also be updated at an arbitrary timing.

For example the log information recorder may specify the degree of uniqueness for each program. is a table illustrating one example of data viewing history for which the degrees of uniqueness are specified. The degrees of uniqueness may be determined for respective programs like those in data illustrated in the degrees of uniqueness of the programs included in the viewing history may be multiplied for each month and the inverse of the multiplication result may be used as a weight. Each degree of uniqueness takes a value in the range of 0 to 1 and takes a value closer to 0 for a program that is thought to have less viewers.

Since the degrees of uniqueness are multiplied as described above the resulting degree of uniqueness gets closer to 0 and the weight increases when the user watched even one unique program. The degree of uniqueness may be calculated by determining self information from the probability that how many users in the viewing histories of all users have viewed a corresponding program.

The upper limit value for the number of nodes the number of links or the upper limit value for the weight total is stored in the privacy policy manager . The upper limit value for the number of nodes the number of links or the upper limit value for the total weight may be specified for each user terminal apparatus or may be made settable by the user via the user terminal apparatus .

The description below will be given of a user interface in the data analyzing apparatus . The user interface as used in this case refers to a display unit not illustrated in the data analyzing apparatus or a display screen displayed on a display apparatus used together with the data analyzing apparatus .

When the log information to which ID  is given does not exist in the log information recorder for example since the log information has been deleted pressing a download button displayed on the display screen illustrated in allows the data analyzing apparatus to re obtain the log information to which ID  is given.

In the first embodiment under a certain restriction using a tentative ID link relationship the data collecting apparatus provides to the data analyzing apparatus link information indicating a correspondence relationship of tentative IDs updated at a predetermined timing. When such a correspondence relationship is provided the data analyzing apparatus can perform for example comparison analysis between the current log information and log information obtained half a year ago or a year ago with respect to the same user. As a result an appropriate service can be provided to the user in accordance with a result of the analysis.

When the link information is unlimitedly provided it is possible to associate a large amount of log information for the same user and thus there is a risk of the user being identified based on the association. In order to reduce such a risk the data collecting apparatus links tentative IDs for which a request for the provision thereof is issued by the data analyzing apparatus and manages the linked tentative IDs so that the data analyzing apparatus cannot identify the correspondence relationship of a number of tentative IDs which is larger than or equal to a certain number.

Also although whether or not the link information is to be provided is determined based on for example the number of tentative IDs the number of nodes included in the tentative ID link relationship it may be determined based on the weights. For example performing processing such as reducing the weight for a tentative ID given to old log information makes it possible to flexibly provide the link information.

In the first embodiment described above when the number of nodes included in a tentative ID link relationship is larger than or equal to the upper limit value the link information outputter issues a notification indicating that the link information cannot be transmitted. In contrast when the link information cannot be transmitted an information providing system according to a second embodiment transmits statistical information instead.

The term statistical information as used herein refers to information in which a viewing history given a tentative ID whose link information is requested and viewing histories given tentative IDs different from that tentative ID are mixed. The statistical information is provided for example in a form showing viewing frequencies for respective genres in a viewing history for one month. With such statistical information it is difficult to identify an individual.

When the statistical information is provided in a form like the form of viewing frequencies for respective genres it can be said that the analysis to be performed by the data analyzing apparatus is performed by a data collecting apparatus instead.

Since an overall configuration and the configurations of the user terminal apparatus and the data analyzing apparatus are the same as or similar to those described in the first embodiment and illustrated in descriptions thereof are not given hereinafter. In the second embodiment although the configuration of the data collecting apparatus differs from that of the corresponding apparatus described above the entire system in the second embodiment is also referred to as information providing system .

Upon input of the log information recorded in the log information recorder the statistical information creator creates statistical information for example viewing frequencies for respective genres in a viewing history for one month or the like. The statistical information is for example information indicating that dramas are watched three times and baseball games are watched ten times in a month.

Also upon obtaining a plurality of designated tentative IDs from the data analyzing apparatus the statistical information creator determines viewing frequencies for respective genres in a viewing history in a month by mixing viewing histories given the designated tentative IDs. For example the statistical information creator uses the viewing histories of IDx  and IDy  x and y are positive integers in addition to ID  to determine the viewing frequencies for respective genres in a viewing history in a month. The viewing frequencies in this case are information indicating that dramas were watched 20 times baseball games were watched 50 times and cooking programs were watched 33 times in January.

Since such viewing frequencies determined using the mixed tentative IDs are provided as the statistical information even when the user corresponding to ID  watched dramas five times watched baseball games 50 times and watched cooking programs zero times the data analyzing apparatus cannot distinguish this information. That is the statistical information creator creates information that does not lead to personal identification by performing statistical representation over a plurality of periods or statistical representation for a plurality of IDs. Specific details of the statistical information are arranged in advance between the data collecting apparatus and the data analyzing apparatus .

When the link determiner determines that there is no problem with providing the link information the information outputter outputs the link information and when the link determiner determines that there is a problem with providing the link information the information outputter outputs the statistical information created by the statistical information creator .

Next a description will be given of the operation of the information providing system according to the second embodiment. is a sequence diagram illustrating the operation of the information providing system according to the second embodiment.

In the sequence diagram illustrated in if the number of nodes exceeds the upper limit value in step S YES in S the statistical information creator creates statistical information unlike the sequence diagram illustrated in and the information outputter transmits the created statistical information to the data analyzing apparatus . The statistical information is the same as or similar to that described above.

A description will be given of a user interface in the data analyzing apparatus . illustrates one example of a link information request form according to the second embodiment. A difference from the request form illustrated in is that the request form illustrated in further has a form for applying for transmission of the statistical information when providing the link information is not permitted.

Although in the example illustrated in a tentative ID used for the statistical information is designated when the link information is requested the tentative ID may be designated after the link information is requested. illustrates one example of a display screen that is displayed when providing the link information is not permitted and that includes an entry form for a tentative ID used for the statistical information.

In either of the display screens in when the download button is pressed the data analyzing apparatus can obtain the statistical information.

In the second embodiment even when unable to provide the link information the data collecting apparatus can provide the statistical information instead of the link information. By performing analysis using the statistical information the data analyzing apparatus can increase the accuracy of the analysis. Information that leads to personal identification is not obtained from the statistical information unlike the link information.

According to an information providing system in a third embodiment when a data analyzing apparatus deletes link information or log information provided in the past a data collecting apparatus confirms the deletion and then erases the tentative ID link relationship and so on.

Since an overall configuration and the configuration of the user terminal apparatus are the same as or similar to those described above in the first embodiment and illustrated in descriptions thereof are not given hereinafter. Although the configurations of the data collecting apparatus and the data analyzing apparatus in the third embodiment differ from those of the corresponding apparatuses described above the entire system in the third embodiment is also referred to as information providing system .

The deletion checker checks whether or not the link information is deleted in the data analyzing apparatus or whether or not the log information is deleted in the data analyzing apparatus . A method for the checking is for example that whether or not the data analyzing apparatus has executed a deletion command is checked over a network. The deletion checker may confirm the deletion offline.

The deleter deletes the log information recorded in the log information recorder or the link information recorded in the link information recorder and issues a notification to the effect that the information is deleted to the data collecting apparatus . An instruction for the information deletion may be given via a user interface not illustrated included in the data analyzing apparatus or may be given by obtaining a deletion command from other equipment over a network. Whether or not the deletion is complete deletion or partial deletion is pre specified as the level of the deletion.

Next a description will be given of the operation of the information providing system according to the third embodiment. First a description will be given of an example in which the deleter erases the link information. is a diagram illustrating an operation when the deleter erases the link information. Since operations in steps S and S in are analogous to the corresponding steps in descriptions thereof are not given hereinafter.

After step S the deleter in the data analyzing apparatus deletes the link information in which ID  and ID  are associated with each other S . In response the deletion checker in the data collecting apparatus confirms the deletion e.g. a deletion command of the link information and erases at least the link of ID  and the link of ID  in the tentative ID link relationship manager . As a result the data in the tentative ID link relationship manager takes a form as in a table .

Thereafter in July the data analyzing apparatus issues a request for an April tentative ID S . In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the April tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that such a tentative ID link relationship does not exist has been deleted .

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the number of nodes included in the generated tentative ID link relationship. Since the number of nodes becomes 2 affirmative the link information outputter transmits the link information to the data analyzing apparatus . The link determiner stores the generated tentative ID link relationship in the tentative ID link relationship manager so that the data in the tentative ID link relationship manager takes a form as in a table .

Next a description will be given of an example in which the deleter erases the log information. illustrates an operation when the deleter erases the log information. Since operations in steps S and S in are analogous to the corresponding steps in descriptions thereof are not given hereinafter.

After step S the deleter in the data analyzing apparatus deletes the log information to which ID  is given S . In response the deletion checker in the data collecting apparatus confirms the deletion e.g. a deletion command of the log information and erases all tentative ID link relationships including ID  in the tentative ID link relationship manager . As a result the data in the tentative ID link relationship manager takes a form as in a table .

Thereafter in July the data analyzing apparatus issues a request for an April tentative ID S . In response to the request the link determiner in the data collecting apparatus refers to the associations in the tentative ID manager to identify ID  which is the April tentative ID. Then by referring to the tentative ID link relationship manager the link determiner searches for a tentative ID link relationship including ID  and recognizes that such a tentative ID link relationship does not exist has been deleted .

Accordingly the link determiner generates a tentative ID link relationship in which the identified ID  is linked to ID  in a tree structure and calculates the number of nodes included in the generated tentative ID link relationship. Since the number of nodes becomes 2 affirmative the link information outputter transmits the link information to the data analyzing apparatus . The link determiner stores the generated tentative ID link relationship in the tentative ID link relationship manager so that the data in the tentative ID link relationship manager takes a form as in a table .

The timings at which the link information and the log information are deleted are not limited to the examples in and the link information and the log information may be deleted at any timings.

In the third embodiment the deletion checker in the data collecting apparatus confirms the link information deletion or log information deletion performed by the data analyzing apparatus and updates the contents of the tentative ID link relationship manager . Thus in order to obtain new link information the data analyzing apparatus needs to delete already obtained link information and log information. This suppresses an amount of information more than required being accumulated in the data analyzing apparatus . Thus the risk of an individual being identified based on the log information is reduced.

In an information providing system according to a fourth embodiment each time a data collecting apparatus provides log information given a tentative ID to a data analyzing apparatus the data collecting apparatus sums the weight of the log information. When the total weight is larger than or equal to a predetermined upper limit value the data collecting apparatus updates the tentative ID.

In this case the degrees of uniqueness are pre specified for the log information for example as illustrated in and the weights of the log information are determined based on the degrees of uniqueness. The degree of uniqueness is an index that takes a larger value as the log information is rarer as the degree of rarity increases . The degree of uniqueness serves as an index indicating the ease of identifying an individual.

Since an overall configuration and the configuration of the user terminal apparatus are the same as or similar to those described in the first embodiment and illustrated in descriptions thereof are not given hereinafter. is a block diagram illustrating the configuration of the data analyzing apparatus . Since the configuration of the data analyzing apparatus is the same as a configuration obtained by eliminating the link information recorder from the data analyzing apparatus a description of the configuration is not given hereinafter.

Although the configurations of the data collecting apparatus and the data analyzing apparatus in the fourth embodiment differ from those of the corresponding apparatuses described above the entire system in the fourth embodiment is also referred to as information providing system .

The tentative ID update controller manages the weights of log information and each time log information given a tentative ID is provided to the data analyzing apparatus the tentative ID update controller sums the weight of the log information and uses the result thereof to determine the tentative ID update described above. The tentative ID update controller compares the total weight with an upper limit value stored in the privacy policy manager and outputs information indicating whether or not the total weight is larger than or equal to the upper limit value.

Upon receiving from the tentative ID update controller information indicating that the total weight is larger than or equal to the upper limit value the tentative ID updater randomly updates the tentative ID so that it differs from other tentative IDs. The updated tentative ID is stored in the tentative ID manager in association with a corresponding personal ID. Also when the tentative ID is updated the tentative ID updater resets the total weight in the tentative ID update controller .

A description will be given of the operation of the information providing system according to the fourth embodiment. is a sequence diagram illustrating the operation of the information providing system according to the fourth embodiment.

First in the user terminal apparatus personal information is obtained and log information is collected S . The information provider in the user terminal apparatus transmits data including the personal information and the log information to the data collecting apparatus S .

The data collecting apparatus receives the data from the user terminal apparatus and anonymizes the received data S .

Next the tentative ID update controller sums the weights of the log information included in the data received in step S S . This summation is performed for each user terminal apparatus and for each data analyzing apparatus

Next the tentative ID update controller determines whether or not the total weight is larger than or equal to an upper limit value stored in the privacy policy manager S . If the total weight is smaller than the upper limit value NO in S the information communicator gives a corresponding tentative ID to the anonymized data log information and provides the resulting data to the data analyzing apparatus S . If the total weight is larger than or equal to the upper limit value YES in S the tentative ID updater randomly updates the tentative ID corresponding to the anonymized data so that the tentative ID differs from other tentative IDs and resets the total weight S .

The information communicator then gives the updated tentative ID to the anonymized data and provides the resulting data to the data analyzing apparatus S .

In the fourth embodiment the data collecting apparatus uses the total weight to manage how much of the log information of the specific user terminal apparatus has been provided to the data analyzing apparatus . Each piece of log information is given a weight indicating the possibility that an individual is identified from the log information. For example log information including a viewing history of a program whose viewers are limited is given a larger weight. The data collecting apparatus compares the summation value of the weights with the upper limit value to thereby update the tentative ID.

In the first embodiment the tentative ID is unconditionally updated at a certain timing. Thus when the above described link information is not used the data analyzing apparatus can perform comparison analysis on log information given the same tentative ID only in a period in which the tentative IDs are the same.

In contrast in the fourth embodiment the data collecting apparatus finely manages for each data analyzing apparatus the tentative ID update timing by using the degrees of uniqueness the weights of log information. Thus the data analyzing apparatus can perform higher accuracy comparison analysis on an appropriate amount of log information.

Although the present disclosure has been described above in conjunction with the embodiments described above the present disclosure is not limited to the embodiments described above. For example the present disclosure also includes the following cases.

 1 In the first to third embodiments the data collecting apparatus provides link information indicating a past tentative ID of the present tentative ID to the data analyzing apparatus. However the link information may be information indicating the relationship of past tentative IDs. More specifically in July the data analyzing apparatus may request a tentative ID in January which is earlier than April for ID  which is a tentative ID in April earlier than July and in this case the data collecting apparatus provides link information indicating that the January tentative ID ID  for the April tentative ID was ID .

 2 Although the log information in the first to fourth embodiments is a viewing history genre information of a program the log information is not particularly limiting. The information providing system or the data collecting apparatus in each embodiment described above may also be applicable to providing information other than the log information.

 3 Although in the first to fourth embodiments the information providing system has been described as having one data analyzing apparatus the number of data analyzing apparatuses may be two or more. In each case the tentative IDs are managed for each data analyzing apparatus. For example the tentative ID manager is provided for each data analyzing apparatus and the tentative ID link relationship manager is provided for each data analyzing apparatus. The update of the tentative ID and the calculation of the number of nodes included in a tentative ID link relationship may also be performed for each data analyzing apparatus. Also the total weight sum described in the first and fourth embodiments is also performed for each data analyzing apparatus.

 4 The constituent elements of the apparatuses and the processing of the apparatuses described above in the first to fourth embodiments may be combined as appropriate. For example although in the second and third embodiments whether or not the link information can be transmitted is determined based on the number of nodes included in the tentative ID link relationship whether or not the link information can be transmitted may also be determined based on the total weight described above in the first embodiment.

The data collecting apparatus according to the first to third embodiments may further perform the tentative ID update described above in the fourth embodiment.

 5 The personal information inputter and the log information collector in the user terminal apparatus according to the first to fourth embodiments may be an apparatus different from the user terminal apparatus. For example the personal information inputter may be a portable terminal and the log information collector may be some kind of sensor.

The personal information inputter and the log information collector may be incorporated into a TV when the log information collector collects the viewing histories. When the log information collector collects a body weight log the log information collector may be incorporated into a weighing scale.

Also identification information of a sensor included in the log information collector or household electrical and electronic equipment may be input via the personal information inputter to link the log information collector and the user.

 6 Although the log information in the first to fourth embodiments is a viewing history of a program genre the log information is not limited thereto. For example the program information included in the viewing history may be not only a genre but also program information in an EPG or the like.

Also for example when the user terminal apparatus is a portable terminal the log information may be movement history information GPS information of the portable terminal. When the user terminal apparatus functions as a remote controller for equipment the log information may be an operation history of the user terminal apparatus remote controller . For example when a TV is operated via the user terminal apparatus the log information may be information indicating which program was watched information indicating how the channel switch was switched or the like.

The log information may also be for example information indicating at which station and when the user got on or off a train. The log information may also be log information of the amount of power consumption in each home log information of healthcare equipment such as a weighing scale or sphygmomanometer history of shopping log information of WWW access or the like. In addition the log information may be an operation history or the amount of power consumption of household electrical and electronic equipment in each home.

 7 The technology described in the above aspects can be realized for example by the following types of cloud service. However the types of service for which the technology described in the above aspects is realized are not limited to the types described below.

In this type the service provider operates and manages the data center the cloud server . The service provider manages an operating system OS and an application . The service provider uses the OS and the application managed by the service provider to provide a service .

In this type a data center operating company operates and manages a data center the cloud server . A service provider manages an OS and an application . The service provider uses the OS and the application managed by the service provider to provide a service .

In this type a data center operating company manages an OS and operates and manages a data center the cloud server . A service provider also manages an application . The service provider uses the OS managed by the data center operating company and the application managed by the service provider to provide a service .

In this type a data center operating company manages an application and an OS and operates and manages a data center the cloud server . A service provider uses the OS and the application managed by the data center operating company to provide a service .

It is assumed that in any of the types described above the service provider provides a service. Also for example the service provider or the data center operating company may itself develop the OS the application a database for big data or the like or may also outsource the development to a third party.

 8 In each embodiment described above the individual constituent elements may be constituted by dedicated hardware or may be realized by executing a software program suitable for the constituent elements. A program executor such as a central processing unit CPU or a processor may read and execute a software program recorded in a recording medium such as a hard disk or a semiconductor memory to thereby realize each constituent element described above. In this case the software for realizing the information providing apparatus according to each embodiment is a program as follows.

That is this program causes a computer to execute an information providing method that is executed by an information providing apparatus that gives a tentative ID updated at a predetermined timing instead of a personal ID to log information associated with the personal ID and that provides the resulting log information. The information providing apparatus includes a first storage that stores associations between the personal ID and a plurality of tentative IDs resulting from the updating and a second storage that stores link relationship information generated in response to a request for link information indicating a tentative ID at a timing other than the timing of one tentative ID the tentative IDs corresponding to the request being linked in the link relationship information. The information providing method includes receiving a request for a tentative ID at a timing other than the timing of a first tentative ID identifying a second tentative ID which is the tentative ID at the other timing by referring to the associations stored in the first storage evaluating link relationship information when the first tentative ID is further linked to link relationship information stored in the second storage and including the second tentative ID and determining whether or not to output the link information indicating the second tentative ID based on a result of the evaluation.

 9 In each embodiment described above a process executed by a particular processor may be executed by another processor. The order of the processes may be changed or may be executed in parallel.

Also the configuration allocation of the constituent elements of each apparatus described above in each embodiment is one example. For example the data collecting apparatus described above in each embodiment described above may be realized as an information providing apparatus included in an information providing system as described below. is a block diagram illustrating another example configuration of the information providing system.

An information providing system illustrated in includes a first information communication apparatus an information providing apparatus and a second information communication apparatus .

The first information communication apparatus is an apparatus that collects log information and corresponds to the user terminal apparatus in each of the first to fourth embodiment. The first information communication apparatus is for example a smartphone or a tablet terminal and also may be equipment that can collect log information. Examples include healthcare equipment a turnstile and so on.

The information providing apparatus obtains the log information collected by the first information communication apparatus from the first information communication apparatus replaces the personal ID in the obtained log information with a tentative ID updated at a predetermined timing and provides the resulting log information. The information providing apparatus corresponds to the data collecting apparatus in each of the first to fourth embodiments and is implemented specifically as a server apparatus or the like.

The second information communication apparatus is an apparatus that receives log information to which a tentative ID is given the log information being provided by the information providing apparatus and that corresponds to the data analyzing apparatus in each of the first to fourth embodiments. Specifically the second information communication apparatus is implemented as a server apparatus or the like.

The information providing apparatus includes a first storage a receiver an information processor a second storage an eraser a log information recorder an obtainer and a transmitter .

The information providing apparatus replaces the personal ID in the log information associated with a personal ID with a tentative ID updated at a predetermined timing and provides the resulting log information. The predetermined timing is for example a timing at an interval of one month but may be a timing at an irregular interval and is not particularly limiting.

Associations between a personal ID and a plurality of tentative IDs resulting from the updating are stored in the first storage . The first storage is a constituent element corresponding to the tentative ID manager and is implemented by specifically a storage device such as a semiconductor memory. The associations stored in the first storage are specifically the data illustrated in but are not limited thereto.

The receiver receives a request for link information indicating a tentative ID at a timing other than the timing of one tentative ID. The receiver is a constituent element corresponding to the communicator . Specifically the receiver is implemented by a communication circuit communication module or the like but may be implemented as an entirety or part of a processor or microcomputer and may take any form. The above described request has a data structure for example as illustrated in and the link information has a data structure for example as illustrated in but the data structures are not limited to such data structures.

In response to the request received by the receiver the information processor generates link relationship information in which tentative IDs corresponding to the request are linked. The information processor is a constituent element corresponding to the privacy policy manager the link determiner the link information outputter the information outputter the modifier the tentative ID update controller the tentative ID updater and so on. The information processor is implemented by for example a processor but may be implemented by a dedicated circuit or a microcomputer. The link relationship information corresponds to the tentative ID link relationship.

The generated link relationship information is stored in the second storage . The second storage is a constituent element corresponding to the tentative ID link relationship manager and is implemented by specifically a storage device such as a semiconductor memory. The link relationship information is stored in the second storage for example in the form of data as in each table illustrated in but is not particularly limiting. The second storage and the first storage may also be realized as a single storage device. The log information recorder may also be configured in the same manner.

The log information recorder is a storage device in which a plurality of pieces of log information are recorded stored and is a constituent element corresponding to the log information recorder . A plurality of pieces of log information are recorded in the log information recorder in association with the weights e.g. the inverses of the degrees of uniqueness of the pieces of log information for example as illustrated in . The log information recorder is implemented by specifically a storage device such as a hard disk drive HDD or a semiconductor memory.

The obtainer is a communication interface for obtaining personal information and log information from the first information communication apparatus and is a constituent element corresponding to the information inputter . For example the information processor obtains personal information and log information from the first information communication apparatus via the obtainer . The obtainer is implemented by specifically a communication circuit communication module or the like but may be realized as an entirety or part of a processor or microcomputer and may take any form.

The transmitter is a communication interface for transmitting log information and so on to the second information communication apparatus and is a constituent element corresponding to the communicator . For example the link information output by the information processor is transmitted to the second information communication apparatus via the transmitter . The transmitter is implemented by specifically a communication circuit communication module or the like but may be implemented as an entirety or part of a processor or microcomputer and may take any form.

In the configuration described above when the receiver receives a request for a tentative ID at a timing other than the timing of the first tentative ID the information processor identifies the second tentative ID which is the tentative ID at the other timing by referring to the associations stored in the first storage . The information processor then evaluates link relationship information obtained when the first tentative ID is further linked to link relationship information including a second tentative ID stored in the second storage . In accordance with a result of the evaluation the information processor determines whether or not link information indicating the second tentative ID is to be output.

With this arrangement since the link information indicating the relationship of a plurality of tentative IDs corresponding to the same personal ID is output under a certain evaluation it is possible to reduce the risk of an individual indicated by a personal ID being identified based on the link information. In turn an external apparatus that receives the link information can analyze the log information by using the relationship of the plurality of tentative IDs.

More specifically when the evaluation result is smaller than a predetermined value the information processor outputs link information indicating the second tentative ID and when the evaluation result is larger than or equal to the predetermined value the information processor does not output link information indicating the second tentative ID.

Thus the information processor can determine whether or not the link information is to be output based on whether or not the evaluation result is larger than or equal to the predetermined value. When the evaluation result is larger than or equal to the predetermined value the information processor outputs link information indicating the second tentative ID and when the evaluation result is smaller than the predetermined value the information processor does not need to output link information indicating the second tentative ID. That is the predetermined value threshold may be arbitrarily set depending on a reference for the evaluation.

The information processor also evaluates updated link relationship information based on the number of tentative IDs linked in the updated link relationship information. When the number of tentative IDs is smaller than a predetermined value the information processor outputs link information indicating the second tentative ID and when the number of tentative IDs is larger than or equal to the predetermined value the information processor does not output link information indicating the second tentative ID.

With this arrangement the information processor can determine whether or not the link information is to be output in accordance with the number of tentative IDs included in the link relationship information.

The information processor may also generate link relationship information in which tentative IDs corresponding to a request received by the receiver are linked in a tree structure. In this case the information processor may evaluate link relationship information obtained by further linking the first tentative ID based on the number of nodes included in the link relationship information. When the number of nodes is smaller than a predetermined value the information processor outputs link information indicating the second tentative ID and when the number of nodes is larger than or equal to the predetermined value the information processor does not output link information indicating the second tentative ID.

With this arrangement the information processor can determine whether or not the link information is to be output in accordance with the number of nodes of the tentative IDs included in the link relationship information.

The plurality of tentative IDs stored in the first storage may be weighted like the data illustrated in . In this case the information processor may evaluate the link relationship information obtained by further linking the first tentative ID based on the total of the weights of the tentative IDs linked in the link relationship information. More specifically when the total weight is smaller than a predetermined value the information processor outputs link information indicating the second tentative ID and when the total weight is larger than or equal to the predetermined value the information processor does not output link information indicating the second tentative ID.

With this arrangement the information processor can determine whether or not the link information is to be output considering the weight of each tentative ID.

In the first storage a larger weight may be assigned to a tentative ID whose corresponding log information is more unique.

With this arrangement for a tentative ID that is given to log information whose degree of uniqueness is higher and with which it is easier to identify an individual it is less likely that the link information is provided for the tentative ID.

In addition as described above in the second embodiment when the evaluation result is larger than or equal to the predetermined value the information processor may output statistical information obtained by statistical representation on a combination of log information given the second tentative ID and log information given a tentative ID other than the second tentative ID. The tentative ID other than the second tentative ID may be a tentative ID e.g. the first tentative ID at a timing other than the timing of the second tentative ID or may be a tentative ID associated with a personal ID other than a personal ID to which the second tentative ID corresponds to.

With this arrangement even when the link information is not output it is possible to perform log information analysis using the statistical information.

As described above in the third embodiment the information providing apparatus may further include the eraser . The eraser is a constituent element corresponding to the deletion checker and is implemented by specifically a processor a microcomputer a dedicated circuit or the like.

For example upon obtaining from the second information communication apparatus an external apparatus that received link information output by the information processor information indicating that the link information has been deleted the eraser erases at least the link of tentative IDs included in the deleted link information from the link relationship information stored in the second storage and associated with the deleted link information. That is the eraser performs processing as illustrated in . In this case the eraser may erase the entire link relationship information including the deleted link information.

With this arrangement when link information is erased in an external apparatus it is possible to reset a criterion for determining whether or not the link information is to be output.

Also for example when the information providing apparatus obtains from the second information communication apparatus an external apparatus that received log information information indicating that the log information was deleted the eraser erases the link relationship information stored in the second storage and associated with a tentative ID given to the deleted log information. That is the eraser performs processing as illustrated in . In this case the eraser may erase at least the link of the tentative ID from the link relationship information including the tentative ID given to the deleted log information.

With this arrangement when log information is erased in the external apparatus it is possible to reset a criterion for determining whether or not the link information is to be output.

Also as described in the fourth embodiment each time the log information recorded in the log information recorder is given a third tentative ID and the resulting log information is provided the information processor may further sum the weight associated with the log information and may update the third tentative ID when the summed weight is larger than or equal to a predetermined value. That is the information processor may perform processing as illustrated in .

With this arrangement the information processor can more finely update the tentative ID in accordance with the weights of the log information.

Although the information providing system the information providing apparatus data collecting apparatus and so on according to one or more aspects have been described above in conjunction with the embodiments the present disclosure is not limited to those embodiments. Modes obtained by applying various modifications conceived by those skilled in the art to the embodiments or modes constituted by combining the constituent elements in different embodiments may also be encompassed by the scope of one or more modes as long as such modes do not depart from the spirit of the present disclosure.

The present disclosure is applicable to an information providing apparatus that anonymizes log information and provides the resulting log information.

