---

title: Assisted labeling of devices with disaggregation
abstract: Electrical usage of devices in a building may be monitored to assist a user in labeling devices. In some implementations, an electrical signal corresponding to devices may be processed with models to determine first information about a device, and this first information may be presented to a user to receive second information about the device from the user. The device may then be labeled using the second information from the user. In some implementations, a user may provide first information about a device, and the first information may be used to obtain models for processing an electrical signal. A model may be selected from the obtained models by comparing the obtained models to an electrical signal. The device may then be labeled using the selected model or the first information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09443195&OS=09443195&RS=09443195
owner: Sense Labs, Inc.
number: 09443195
owner_city: Cambridge
owner_country: US
publication_date: 20150508
---
This application is a continuation in part of U.S. patent application Ser. No. 14 554 962 filed Nov. 26 2014 now issued on Jun. 16 2016 as U.S. Pat. No. 9 057 746. The above application is hereby incorporated by reference in its entirety.

Reducing electricity usage provides the benefits among others of saving money by lowering payments to electric companies and also protecting the environment by reducing the amount of resources needed to generate the electricity. Electricity users such as consumers businesses and other entities may thus desire to reduce their electrical usage to achieve these benefits. Users may be able to more effectively reduce their electricity usage if they have information about what devices e.g. refrigerator oven dishwasher furnace and light bulbs in their homes and buildings are using the most electricity and what actions are available to reduce electricity usage.

Electricity monitors for individual devices are available for measuring the electricity usage of a single device. For example a device can be plugged into an electricity monitor and the monitor can in turn be plugged into a wall outlet. These monitors can provide information about electricity usage for the one device they are attached to but it may not be practical to monitor all or even many devices in a house or building with these monitors because it would require a large number of devices that can be expensive and also require significant manual effort to install.

Instead of an electricity monitor for a single device an electricity monitor can be installed at an electrical panel to obtain information about electricity used by many devices simultaneously. An electricity monitor on an electrical panel is more convenient because a single monitor can provide aggregate usage information about many devices. It is more difficult however to extract more specific information about usage of electricity by a single device since the monitor typically measures one signal or several signals for different zones of the house or building that reflects the collective operation of many devices which may overlap in complex ways. The process of obtaining information about the electricity usage of a single device from an electrical signal corresponding to usage by many devices may be referred to as disaggregation.

To provide the greatest benefits to end users a need exists for more accurate disaggregation techniques so that end users receive accurate information about the electrical usage of individual devices. A need also exists for faster disaggregation techniques so that end users and others can receive information about electrical usage in real time.

Described herein are techniques for disaggregating electrical signals containing information about multiple devices to obtain information about electrical usage by individual devices techniques for effectively presenting this information to end users and techniques for allowing the end users to take actions such as to conserve energy.

In electrical panel may be an electrical panel that is typical in many homes. Electrical panel receives electricity from an electric utility and processes the electricity so that it may be used by devices in the home. Typically the electricity is alternating current AC . For example electrical panel may implement split phase electric power where a 240 volt AC electrical signal is converted with a split phase transformer to a three wire distribution with a single ground and two mains or legs that each provide 120 volts. Some devices in the house may use one of the two mains to obtain 120 volts other devices in the house may use the other main to obtain 120 volts and yet other devices may use both mains simultaneously to obtain 240 volts. Other voltage standards such as for other countries or continents are intended to be encompassed herein as would be understood by one of ordinary skill in the art.

Any type of electrical panel may be used and the techniques described herein are not limited to a split phase electrical panel. For example electrical panel may be single phase two phase or three phase. The techniques are also not limited to the number of mains provided by electrical panel . In the discussion below electrical panel will be described as having two mains but any number of mains may be used including just a single main.

In one example power monitor may sample the voltage signal of each main at a predetermined time interval or frequency such as at 10 MHz and the current signal for each main at another interval or frequency such as 10 kHz. The voltage and current signals may be used directly or may be combined to determine other signals such as power signals and the constituent or combined signals or other signals may have different sampling rates. Power monitor may determine other values from the sampled signals including but not limited to any of or any combination of real power reactive power power factor power quality apparent power or phase between the voltage and current. Determined values may be root mean square RMS or peak.

Power monitor processes electrical signals such as voltage and current to disaggregate them or to obtain information about individual devices in the home. For example power monitor may determine device events such as that the television was turned on at 8 30 pm or that the compressor of the refrigerator started at 10 35 am and 11 01 am. Power monitor may transmit information about device events to other computers such as server computer or user device . Power monitor may also determine real time information about power used by individual devices in the home and transmit this real time information to other computers such as server computer or user device . For example power monitor may determine on predetermined intervals such as ten second intervals three second intervals one second intervals or sub second intervals the power used by multiple devices in the home. As used herein real time means that the information is transmitted to a user without significant delay. For example when reporting to a user the wattage used by a light bulb providing the information to the user within several seconds of measurement would be real time.

Power monitor may be a device that is obtained separately from electrical panel and installed by a user or electrician to connect to electrical panel . Power monitor may be part of electrical panel and installed by the manufacturer of electrical panel . Power monitor may also be part of e.g. integrated with or into an electrical meter such as one provided by the electric company and sometimes referred to as a smart meter.

Power monitor may transmit information to other computers using any known networking techniques. In power monitor is shown having a wireless connection to router which in turn connects to server and user device . Other networking techniques that may be used include but are not limited to wired connections Wi Fi NFC Bluetooth and cellular connections. User device need not be on the same local network and may instead receive information over a wide area network such as a cellular network or information served via a cloud computing environment.

Server computer may receive information about devices in the home from power monitor . For example server computer may receive information about device events or real time power usage of devices in the home. Server computer may store further process or facilitate presentation of the information to end users including energy users utility companies third parties e.g. parties tracking or regulating energy usage and or to the host of the methods and systems disclosed herein such as for various analytic purposes.

User device may be any device that provides information to a user including but not limited to phones tablets desktop computers and wearable devices. User device may present for example information about device events and real time power usage to the user.

The arrangement and specific functions of the components of provide just one example of how the techniques described herein may be implemented but other configurations are possible. For example power monitor may perform all the operations of server and power monitor may directly provide information to user device . In another example power monitor may include some or all of the functionality of user device and a user may interact directly with power monitor to obtain information about device events and power consumption.

Power monitor may include any components typical of a computing device such one or more processors volatile or nonvolatile memory and one or more network interfaces . Power monitor may also include any known input and output components such as displays buttons dials switches keyboards and touch screens. Power monitor may also include a variety of components or modules providing specific functionality and these components or modules may be implemented in software hardware or a combination thereof. Below several examples of components are described for one example implementation of power monitor and other implementations may include additional components or exclude some of the components described below.

Power monitor may include analog signal processing component . Analog signal processing component may include sensors that obtain information about electrical signals in electrical panel such as sensors for obtaining current and voltage. Analog signal processing component may perform other operations as well such as filtering to certain frequency bands or performing dynamic range compression and may output one or more analog signals.

Power monitor may include digital signal processing component . Digital signal processing component may for example sample and quantize analog signals output by analog signal processing component . Digital signal processing component may process multiple analog signals of different types and may process the different types of signals in different ways. For example digital signal processing component may receive two analog voltage signals and two analog current signals and apply different sampling rates and quantization schemes to the different signals. Digital signal processing component may perform other operations as well such as noise reduction or synchronization and output one or more digital signals.

Electrical event detection component may receive the one or more digital signals from digital signal processing component and detect electrical events for further processing. Electrical events include any changes to electrical signals that may provide useful information about the operation of devices in the house or power usage of devices in the house. For example an electrical event can correspond to manual operation of a device such as a user turning on or off a device automatic operation of a device such as the dishwasher starting a pump as part of its operating cycle a failure in the operation of a device such as a failure of the dishwasher pump a change in the mode of operation of a device such as a vacuum cleaner switching from rug to wood floor mode a change in operating level of a device such as an oven increasing in cooking temperature a change in the amount of electrical power used by a device such as a change in electrical usage in response to a heating or cooling of a component or other device related electrical events.

Some electrical events may occur over a relatively short period time or be transient electrical events. For example turning on a light bulb may significantly change the amount of power or current in an electrical signal in a short period of time. Other electrical events may occur over a longer period of time and correspond to more gradual changes in electrical signals. For example the fan of an air conditioner may have a longer and more gradual ramp up of power or current.

Electrical event detection component may be implemented using any classification techniques known to one of skill in the art. In some implementations a classifier may by trained in a machine learning environment such as by using data that is already labeled or classified by event type. In some implementations electrical signals may be obtained from houses and specific electrical events in the data may be labeled automatically semi automatically or manually. Automated or semi automatic labeling may be validated or adjusted by manual feedback. Manual labeling may be validated by automatic labeling or by a validation process involving other individuals. With this data one or more classifiers may be trained to automatically recognize electrical events. The classifiers may include but are not limited to neural networks self organizing maps support vector machines decision trees random forests and Gaussian mixture models. The input to the classifiers may be the digital signals themselves or features computed from the digital signals. The classifiers may use electrical event models which may be stored in power monitor .

In some implementations electrical event detection component may look for changes in the values of electrical signals. For example a simple change of value of an electrical signal greater than a threshold volt amp watt etc. may indicate an electrical event. Changes in values over time including rates of change and time derivatives thereof are also potentially relevant indicators of electrical events. Some changes in electrical signals may typically occur quickly and others more gradually. Multiple time scales and multiple thresholds may be used to identify both transient events and longer term events. For example a 5 watt change in less than one second may indicate a transient event and a 20 watt change over more than a minute may indicate a longer term event.

In some implementations electrical event detection is performed once per cycle e.g. at a frequency of 60 Hz on a typical line . For each cycle a window before and after a given cycle may be used to identify electrical events. For example a 20 cycle window may be used to detect transient events and a 600 cycle window may be used to detect longer term events. A value may be computed for each of the before and after windows e.g. power and the change the change may additive multiplicative or other measure of change in value may be compared to a threshold. The thresholds may be different for shorter and longer windows and the thresholds may be different for different electrical measurements power amps volts etc. . The thresholds may also adapt over time. For example where the recent history of an electrical signal indicates a significant oscillation in the electrical signal a threshold may be increased so that each individual oscillation of the electrical signal does not trigger a new electrical event. Thus the methods and systems disclosed herein contemplate dynamically changing at least one of a detection window and a recognition threshold in an automated electrical event detection and classification system to improve recognition of a particular types of event.

For a transient electrical event the electrical event may be detected by the electrical event detection component shortly after the occurrence of the electrical event. For example the electrical event may be output within 20 milliseconds of the occurrence of the electrical event. For transient events the electrical event may be detected quickly because the information used to identify the electrical event may depend on the electrical signal for a short duration window around the electrical event.

For a longer term electrical event the electrical event may be detected by the electrical event detection component significantly after the occurrence of the electrical event. For example the electrical event may be output several seconds after the occurrence of the electrical event. For longer term electrical events the information required to detect the electrical event may depend on the electrical signal for a longer duration window around the electrical event.

Each of the electrical events may be associated with a time or times. For example for a transient electrical event a time may correspond to the approximate time of the commencement of the electrical event and for longer electrical events the time may correspond to an approximate mid point of the electrical event or to starting and ending points of the electrical event. More generally electrical events may also be associated with a start time an end time a duration a time that the electrical event was recognized and a main or mains that the electrical event was detected from. Electrical events may also be associated with an event type. For example electrical events may identified specifically as corresponding to certain types of devices such as a motor a heating element a power supply for a consumer electronic device a battery charger a lamp or the like. Later processing may use the event type for more efficient and or accurate processing.

Electrical event detection component may output a stream of electrical events for each electrical signal that is processed. For example if the digital signals include two voltage signals and two current signals the output may be four separate streams of electrical events. Alternatively the output could include a first stream of electrical events for the current and voltage signals corresponding to the first main and a second stream of electrical events for the current and voltage signals corresponding to the second main. Alternatively all the electrical events could be included in a single stream.

Following the electrical event detection feature generation component may determine features corresponding to electrical events. The features may be useful in subsequent processing for determining information about devices from the electrical events. These features may include some of the features used to detect the electrical event itself and may also include other features that were not used to detect the electrical event but which may be useful for the subsequent processing. The techniques described herein in are not limited to any particular features and any features known to one of skill in the art may be used. Each of the features may be computed for individual mains or a combination of mains. Some features may also be computed at different scales or window lengths. Some features may be computed using a residual signal that is computed by subtracting steady state signal characteristics that existed before or after the electrical event. Some features may relate to changes to longer duration spectral properties of an electrical signal. For example a state of a device may cause energy to appear in a spectral band and a feature may relate to the energy or a change in the energy in that spectral band.

In some implementations each electrical event may include multiple features e.g. approximately 500 features including but not limited to features relating to comparing power levels e.g. average median maximum minimum or logarithmic of the foregoing in a time period before an event to a time period after the event a shape of an onset average power of onset peak height of an onset power change over an onset a value e.g. average median maximum or minimum over one or more time periods change in real or imaginary components of a spectrum including at multiple harmonics over two different time periods matching a sinusoid to a signal a maximum slope of a signal a phase shift of a signal a variability of a signal between cycles over a time period a slope error or offset of an exponential decay of a signal slope or duration of a startup surge value e.g. average median maximum or minimum or logarithmic of the foregoing of a startup surge over a time period ratio of a peak height of startup surge to a minimum value after a startup surge phase offset change at frequency values or bands over two time periods harmonic values total magnitude of harmonic values harmonic values relative to total magnitude of harmonics and onset time differences between mains. These features may be computed from any of the electrical signals described above including but not limited to current voltage and power signals. Some or all of these features may also be computed on a residual signal after subtracting a baseline cycle. Some or all of these features may be computed for any number of mains.

Features may be transformed either individually or in combination before being processed by the classifier. As an example of an individual feature transformation the logarithm of a wattage measurement might be used instead of or in addition to the wattage measurement itself. As an example of a combination transformation the electrical signal could be decomposed into a set of Fourier coefficients or a wavelet decomposition. Furthermore a subset of the features may be transformed using techniques such as linear and quadratic discriminants and principal components. Features may also be derived from the pattern of event timing for example the number of events occurring in the past 5 seconds or a particular sequence of events such as a voltage spike followed by steady state current draw or by adding features associated with one event with another event occurring before or afterwards. Thus in addition to the many individual features that can be calculated according to the above disclosure various sequence patterns may be identified and used for or to assist in classification.

Different features for the same electrical event may be computed at different times. For example some features may require a short window of the electrical signal around the electrical event and can be computed shortly after the electrical event is detected. Other features may require a longer window around the electrical event and thus feature generation component may need to wait and receive additional portions of the electrical signal before generating other features.

For example a first feature may require a 10 millisecond window of the electrical signal a second feature may require a 0.5 second window of the electrical signal and a third feature may require a 5 second window of the electrical signal. illustrates an example timeline for the occurrence of an electrical event detection of the electrical event and computation of features of the electrical event. also illustrates an example data structure of an electrical event. In an electrical event is generated at time t. As described above the electrical event may be detected by electrical event detection component at time t. Electrical event detection component may then create data structure for the electrical event and add the time of the electrical event. Note that at this point in the process features may not yet have been computed and the values of the features may not yet be present in data structure . At time t feature generation component may have received enough of the electrical signal to compute feature 1 and then add value 1 to data structure . Similarly at time t feature generation component may generate feature 2 and add value 2 to data structure and at time t generate feature 3 and add value 3 to data structure .

Downstream processing of the electrical event may decide to process the electrical event before all features have been computed. For example if it is desired to determine an outcome quickly the electrical event may be processed after feature 1 is computed even though not all possible information is available. If it is desired to have the most accurate outcome downstream processing may not occur until all features of the electrical event have been computed. In other implementations the electrical event may be processed and classification updated each time a new feature is computed.

Device event detection component may receive the one or more electrical event streams from electrical event detection component with features computed by feature generation component . Device event detection component may also receive features that are not associated with electrical events. In some implementations features such as those described above may be computed on a periodic basis such as every 10 milliseconds or every time a new digital sample of the electrical signal is received regardless of whether an electrical event has been detected. Some features may be computed only in response to receiving electrical events some features may be computed only periodically and some features may be computing periodically and also in response to electrical events. Device event detection component may use the features to determine information about devices in the home such as a light turning on or the amount of power used by a light that is on. The techniques described herein are not limited to any particular implementation of device event detection component and one example implementation is described below.

In some implementations device event detection component may use a search process to determine device state changes using the electrical event stream and one or more models. One implementation of a search process is shown in which includes search graph electrical event stream and wattage stream .

One example of a model that may be used is a transition model that describes changes in state of a device or an element of a device. In addition to a device changing state a light turning on or off an element of a device a pump in a dishwasher turning on during the washing cycle a light inside a refrigerator a heating element or fan in an oven and the like can change state. To capture changes to elements of a device a transition model may be created for elements of devices that can change state. Transition models may be created in a hierarchical fashion. At the highest level transition models may be created for classes of devices or classes of elements such as an incandescent lighting element a fluorescent lighting element an LED lighting element a heating element a motor element a dishwasher a dishwasher with one pump or a dishwasher with two pumps. Transition models may further be created for classes of devices or elements by a particular manufacturer e.g. all dishwashers by a particular manufacturer may have common features . Transition models may further be created for a specific version of a device by a specific manufacturer e.g. Kenmore 1000 dishwasher . Transition models may even further be created for a specific device e.g. the Kenmore 1000 dishwasher at 100 Main Street . In common usage the 1000 in a Kenmore 1000 dishwasher may be referred to as a model of the dishwasher but to avoid confusion with mathematical models the model of a dishwasher will instead be referred to as a version. 

Some elements may have two states such as an off state and an on state. For these elements a transition model may be created for transitioning from the off state to the on state and vice versa. For an element with more than two states e.g. off low speed and high speed a transition model may be created for each allowed state change.

Transition models may be created using any appropriate techniques. In some implementations transition models may be created with labeled training data which may be labeled automatically semi automatically or manually with validation and feedback among combinations of these . The training data may comprise electrical events extracted from electrical signals or optionally the signals themselves taken from houses which are then labeled as corresponding to an element and according the begin state and the end state of the transition. Features may be generated corresponding to the electrical events and any classifier known to one of skill in the art may be used to create the transition model including but not limited to neural networks self organizing maps support vector machines decision trees logistic regression Bayesian models including na ve Bayes models random forests and Gaussian mixture models. A classifier may be trained in this manner for every state change of every element. The classifier may receive the features as input and provide as an output an indication of whether the electrical event corresponds to the state change of the element. Power monitor may store the transition models for each of the elements and state changes.

In addition to transition models other non transition models not shown in may be used to identify useful electrical events that do not necessarily specifically correspond to a change in state of a device or element of a device. One type of other model may be a noise model. A noise model may recognize portions of electrical signals that correspond to patterns that are present but not useful for understanding the operation of devices. Once these patterns are detected they may be removed from the electrical signal for example using subtraction and removing these not useful portions of the signal may make it easier for the transition models to detect device state changes. Another type of other model may be an operative model. An operative model may relate to properties of devices or elements that are not necessarily changing state but which exhibit varying electrical characteristics while within a state. For example a motor on a washing machine may cause a variety of electrical events without changing state. These recognized operational characteristics may be used to detect devices as further described below even absent clear identification of a change in state.

Another example of a model is a device model that describes sequential changes to the operation of a device. Any appropriate model may be used for a device model. In some implementations a directed graph weighted or unweighted may be used. In some implementations a directed graph may allow loops that return to nodes representing particular states. In other implementations the directed graph may be acyclical without loops that return to particular nodes. shows an example directed graph with a beginning state denoted B an end state denoted E and two intermediate states denoted S and S. The directed graph of could correspond to for example a burner of an electric stove. When a person turns on the burner of an electric stove the heating element may not consume power continuously and may instead consume power in cycles to maintain a desired temperature. In the transition from state B to state S may correspond to the initial activation of the burner. The stove may automatically turn the heating element off to transition from state S to state S and then back on to transition from state S back to state S. When the person turns off the burner the graph transitions from state S to state E. In some implementations the directed graph may also indicate allowable transitions for proceeding from one state to another. For example in the transition HE indicating that a heating element is turning on is an allowable transition from state B to state S and the transition HE indicating that a heating element is turning off is an allowable transition from state S to state S.

Similarly other directed graphs may be constructed for other home devices. For example a directed graph may be constructed for the heating elements and pumps of a dishwasher. Further a dishwasher may have a different directed graph for each operating mode light wash pot scrubbing etc. . Simpler devices such as an incandescent light bulb may have a very simple device model or may not have a device model at all. Device models may also be hierarchical and device models may be created for classes of devices classes of devices by a particular manufacturer specific versions of devices by a particular manufacturer or specific devices in a home. Power monitor may store device models or may access device models that are stored externally to power monitor such as in a cloud storage environment. In some implementations device models may also include states corresponding to operative characteristics that do not necessarily involve transitions.

Another example of a model is a wattage model that indicates the expected power usage of a device or element over time. For example when turning on a 60 watt incandescent light it may initially consume 70 watts and transition to 60 watts over time according to an exponential decay at a particular rate. Any appropriate modeling technique may be used to create a wattage model for elements and devices. For example techniques such as templates state machines time series analysis techniques Kalman filtering regression techniques including autoregressive modeling and curve fitting techniques may be used.

In some implementations a template may be used for a wattage model. A template may characterize the expected power use of a device over time. For example a template may characterize power usage for each cycle after a device is turned on. In some implementations a wattage model for a device may be modeled by a Gaussian or Gaussian mixture model with a mean and variance that is determined for each cycle since the device was turned on. In some implementations the wattage model may also be configured so that the modeling of power usage at one cycle may depend on the actual or estimated power usage from a previous cycle. For example the wattage model may model the difference between power usage at the current cycle and the previous cycle as another Gaussian distribution with another mean and variance. Power monitor may store wattage models or access externally stored wattage models such as from a cloud storage environment.

Another example of a model is a prior model that indicates a likelihood that a device or element will be in a particular state given known information. The known information can include any relevant factors such as time weather location the state of other devices and usage history. A prior model may also model expected durations of states of devices and repetitiveness of states of devices and this information may be determined from an individual user s usage history or collectively from many users usage history or a combination thereof . Examples of information used to populate a prior model may include the following a stove is most likely used during meal times many devices are likely to be off in the middle of the night the furnace is more likely to be on when it is cold lights are more likely to be on after sunset which depends on location a kitchen light is likely to be on if it is dark outside and the oven is on and a person may turn on the bedroom light at 5 am every morning after the alarm goes off. A prior model may be created for each possible transition of each device or device element in the house. Prior models may be trained using labeled data and may use any appropriate classifiers such as neural networks self organizing maps support vector machines decision trees Bayesian models including na ve Bayes models linear and nonlinear regression random forests and Gaussian mixture models. Power monitor may store prior models for each of the devices and elements in the house and may access externally stored prior models . Prior models may optionally be populated in part by other data sources apart from data from an electrical signal such as weather information information about sunrise and sunset times information about the operating state of devices acquired from other sources e.g. by Wi Fi or through the cloud and information from other models such as weather models.

The above models may be used in creating search graph which indicates possible states of devices in the house over time as electrical events are processed. Initially the graph may contain no nodes or just an initial node such as N corresponding to a first time. Later nodes N N may be added to the graph and indicate the state of devices in the house at a second time later than the first time. There may be some uncertainty as to which of nodes N N correspond to the actual state of the house and each of the nodes may be associated with a score such as a likelihood or a probability . Even later nodes N N may be added to the graph and indicate the state of devices in the house at a third time later than the second time. The graph may continue beyond nodes N N with additional edges and nodes. In some implementations nodes may be added to search graph corresponding to operative non transitions and a transition to an operative non transition node may not change the state of any devices between that node and a previous node.

Node N shows an initial or current state of a house as shown by the table connected to node N where the table indicates the state of each device in the house. In this example the house has a stove a television and multiple light bulbs. At node N the stove is at state B from the television is in an off state and there are 0 light bulbs on. In this example the light bulbs in the house are not distinguished from one another and only the number of light bulbs that are on is recorded. An implementation could choose to only record the number of light bulbs that are on instead of identifying particular light bulbs that are on because the state of specific light bulbs is not important to a user.

In an electrical event stream is shown beneath the search graph with electrical events E and E. Each of the electrical events E and E may include features from one electrical signal or from multiple electrical signals. For example where the device that caused the electrical event depends on a single main the electrical event may include feature determined from that main. Where the device that caused the electrical event depends on two mains the electrical event may include featured determined from both mains.

When the device event detection component receives electrical event E it processes the electrical event to determine possible state changes to the devices in the house. Nodes N N in show possible state changes in response to E. At node N the stove has moved from state B to state S at node N the number of lights on has increased from 0 to 1 and at node N the TV has transitioned from an off state to an on state.

When the device event detection component receives electrical event E it processes the electrical event to determine further possible state changes to the devices in the house. In the example of node N is followed by node N where the stove transitions from state S to state S node N is followed by nodes N and N where N corresponds to a second light being turned on and N corresponds to the stove transitioning from state B to state S and no nodes follow node N. No nodes may be added following node N because a score for N discussed in greater detail below may be low and it is desired to prune this portion of the search graph to save computations. Alternatively no nodes may be added following node N because all of the possible transitions following node N have a low score. More generally any pruning techniques may be used to remove nodes from search graph to reduce computational complexity. For example pruning techniques used for pruning speech recognition graphs may also be applied to search graph .

The transitions or nodes of search graph may each be associated with a search score. The techniques described herein are not limited to use of any particular search score and any appropriate search score may be used. In some implementations each node may have a search score and the search score may indicate a combination of all scores along a path from the beginning e.g. node N to the current node. In some implementations the search score may be computed using the transition models. For example between N and N the stove has changed from state B to state S. Using the transition model for this state change and electrical event E a transition score can be computed indicating whether E corresponds to this transition. In some implementations the search score may be determined from a combination of all transition scores along a path to the current node.

In some implementations the search score may be computed using other scores as well such as a wattage score computed using the wattage model and a prior score computed using the prior model. For example for each node that is added to search graph the search score for that node may be determined by combining a search score for the previous node a transition score for the current node a wattage score for the current node and a prior score for the current node. The search score may be determined from the other scores using any appropriate method. For example the search score could be the sum weighted sum or product of the other scores.

Wattage stream may include wattage values for the power used by all devices in the house at particular times such as wattage values W W indicated in wattage stream wattage values W W could also be broken up into wattage values corresponding to individual mains and wattage values corresponding to simultaneous use of both mains . Wattage stream may include wattage values at regular intervals such as once per cycle or once per second. The wattage values may be apportioned among the devices consuming power at that time using the wattage model for each device that is consuming power the apportionment of wattage values may also be used to provide a user with information about power usage of specific devices as explained in further detail below . For example if the total wattage is 65 watts and a node indicates a 40 watt incandescent light and a 25 watt incandescent light are on then the 40 watt light would likely be apportioned 40 watts and the 25 watt light would likely be apportioned 25 watts.

A wattage score for a node may indicate a likelihood that the observed wattage value could be generated by the state of devices hypothesized by that node and the wattage score may be determined using wattage stream and wattage models. For example if templates are used for wattage models as described above the wattage values may be apportioned to devices that are consuming power by maximizing the joint probability of the Gaussian models for the appropriate cycle of the template. If the wattage values for each device are proportionate to the wattage model for that device the wattage score will be higher and if they are not proportionate the score will be lower. In some implementations the wattage score may be the joint probability e.g. according to the Gaussian models from templates that the devices consumed the apportioned wattage.

For example consider W and W in . Before electrical event E all the devices are off so W and W should be approximately 0 subject to residual power use not attributable to specific devices . After electrical event E a single device is now consuming power and W should match or nearly match the expected wattage of the device that is consuming power. If W is 300 watts then it may be more likely that the stove turned on as opposed to concluding that a 60 watt light bulb turning on. After event E there may be two devices consuming power and a pair of devices whose expected sum of wattages is close to the total will achieve a higher score than a pair of devices whose sum is not close.

In some implementations the wattage scores may be stored with the preceding node of search graph . For example for node N the wattage scores for W and W for the stove being in state S the TV being off and no lights being on may be stored in association with node N. If these wattage scores are low then it may be less likely the N is the correct path and node N may be pruned from the graph. Conversely if the wattage scores are high then it may be more likely that N corresponds to the correct path. Similarly for node N the wattage scores for W and W may be stored in association with node N. Since there are no paths following N there may not be any wattage scores stored in association with node N.

The search score may also be computed using a prior score. As noted above a prior model may be created for each transition of each device and the prior score may be computed by inputting known information time location etc. into the prior model and obtaining the corresponding prior score.

Different techniques are available for selecting the nodes to follow an existing node in the search graph. In some implementations all possible transitions are always added to the search graph. While this increases the computational complexity it may also increase the accuracy of the search. In other implementations only a subset of possible transitions will be added to the search graph. For example the transitions corresponding to the three highest search scores may be added or all transitions with search scores higher than a threshold may be added. In some implementations only valid transitions may be added to the search graph e.g. you cannot turn on a television that is already on .

The search implemented by device event detection component may operate in different modes for achieving different objectives. For example one mode may be a real time mode where the search is implemented to determine as quickly as possible a transition corresponding to an electrical event. Another mode may be a historical mode where the search is implemented to have higher accuracy and it is acceptable to have higher latency. Device event detection component may implement multiple modes simultaneously or start and stop individual modes upon request.

In real time mode the search may be modified to reduce the amount of time between receiving an electrical event and determining which node or nodes to add to search graph . One modification to the search relates to deciding when to process an electrical event. As described above feature generation component may output features of an electrical event at different times. For a real time search device event detection component may add additional nodes to search graph based on a subset of features that are available sooner and ignore other features that are not available until later. Alternatively device event detection component may add additional nodes to search graph based on an earliest subset of features that provides a sufficient confidence level. For example a first feature or first set of features for electrical event E may indicate that it is most likely that the stove transitioned from state B to state S but the confidence level may be low such as below a threshold . Device event detection component may choose to delay processing the electrical event until receiving a second feature or second set of features for electrical event E. Processing the electrical event with both the first and second features may indicate that the stove transitioned from state B to state S with a higher confidence level above a threshold and nodes may be added to the search graph in response to processing the second feature for the electrical event.

Additionally in real time mode the search may be modified to only add a single node in response to an electrical event. When adding a node in response to the electrical event only the highest scoring node may be added. Adding only a single node for each electrical event may decrease required computations and increase speed.

In historical mode the search may be modified to increase the accuracy of determining device events. One modification to the search may be to always wait for all features of an electrical event before processing the electrical event to add nodes to the search graph. By waiting for all features an electrical event device event detection component may have the greatest amount information available before deciding which nodes to add to search graph . Alternatively the search may be modified to add additional nodes to the graph based on a subset of features of an electrical event that provide a sufficient confidence level where the confidence level is higher than the confidence level used for the real time search.

Additionally in historical mode the number of nodes added to the graph may be increased or a pruning threshold may be reduced. By adding more nodes to graph and performing less pruning it is more likely that device event detection component will correctly determine the correct transition for an electrical event.

For both the real time mode and the historical mode the electrical events may be processed out of order with respect to the time at which the electrical events occurred. For example electrical event E may occur at time and features may be generated at time and . Electrical event E may occur at time and feature may be generated at time and . In real time mode electrical event E may be processed at time and electrical event E may be processed at time even though electrical event E occurred first. Similarly in historical mode electrical event E may be processed at time and electrical event E may be processed at time even though electrical event E occurred first. Additionally in some implementations nodes for an electrical event may be added to search graph at different times. For example in response to electrical event E N may added at a first time based on a first set of features for E and N may be added at a second time based on a second set of features for E.

In addition to determining state transitions of devices device event detection component can also determine the power used by each of the devices at regular or irregular time intervals. For example device event detection component may compute the power used by each device for each wattage value in wattage stream . As described above device event detection component can apportion a wattage value such as W among the devices that are active at that time. Since different nodes of the graph correspond to a different set of active devices the apportionment of power among active devices may be stored at a corresponding node as described above.

Device event detection component may thus produce an estimate of power used by individual devices in addition to device events. Power monitor may transmit this information to server or user device .

When power monitor transmits device information to server the architecture of the network connections between power monitor and server may be configured to enhance real time transmission of information. shows one implementation of a system with network connections between power monitor and two server computers denoted API server and monitor bridge . In addition user device may also have network connections between API server and monitor bridge . API server and monitor bridge may include any of the components described below for server .

In some implementations the information transmitted over the network connections may depend on whether a user is currently viewing information about devices such as via an app on user device or by viewing a web page with user device . When the user is not viewing device information system may operate in a historical mode and power monitor may not need to provide real time information. When a user is viewing device information system may operate in a real time mode and power monitor can provide real time information so that the user is always viewing up to date information.

In some implementations monitor bridge facilitates the transmission of real time information from power monitor to user device . To allow faster switching between historical mode and real time mode network connection C may be a continuous network connection. For example power monitor can be configured so that the connection is maintained even when not in use. For example it may automatically connect to monitor bridge after being powered on and configured so that it if ever loses the connection to monitor bridge it will immediately attempt to reestablish the connection. Other connections such as connections C C may not be continuous connections and these connections may be opened when a device needs to transmit information and closed upon the completion of the transmission or shortly afterwards upon expiration of a time out or some other criterion .

In some implementations when system is in historical mode connection C will not be used to transmit information even though connection C is maintained between power monitor and monitor bridge . In the historical mode power monitor may periodically e.g. every 15 minutes open connection C to API server and provide updated information since the last transmission via connection C. After transmitting the information power monitor may close connection C. API server may store the information so that it may later be accessed by the user such as by using user device .

When system is in historical mode the search by device event detection component in power monitor may also operate in historical mode and provide more accurate information about devices in the home. Although the historical mode search by power monitor may increase a delay between the occurrence of electrical events and the determination of information about the electrical events because power is only providing information to API server on a periodic basis the delay caused by the historical mode search may be acceptable.

When a user accesses device information such as by opening an app or viewing a web page with device or some other device system may switch to real time mode. In some implementations monitor bridge sends an instruction to power monitor to start sending device information in real time and user device is sent an instruction to connect to monitor bridge . Upon power monitor receiving the instruction the search by device event detection component may begin to operate in real time mode and power monitor may transmit real time device information to monitor bridge . Monitor bridge receives the information and may immediately send it to user device so the real time information may be presented to the user. Monitor bridge may optionally modify or add to the real time information that is sent to user device . For example the real time information received from power monitor may include device identifiers for devices in the home but may not include device names. Monitor bridge may add device names to the real time information so that the information is more readily understood by the user.

When a user stops viewing device information for example by closing an app or navigating to a different web page system may switch back to historical mode. In some implementations monitor bridge may instruct power monitor to stop transmitting real time information and the search by device event detection component in power monitor may also switch back to historical mode. Although continuous connection C may not be used in historical mode the connection may remain open to facilitate a switch back to real time mode in the future.

In some implementations more than one monitor bridge may be available and power monitor and user device may need to identify a particular monitor bridge to connect to. In some implementations power monitor and user device may query API server to obtain an address of a monitor bridge to connect to and power monitor and user device may then connect to monitor bridge using that address. In some implementations a first monitor bridge may need to instruct a power monitor and user device to reconnect to a second monitor bridge e.g. for load balancing or maintenance of a monitor bridge . When a first monitor bridge needs to instruct a power monitor and user device to reconnect to a second monitor bridge it may send a disconnect instruction along with an address for the second monitor bridge and power monitor and user device may then connect to the second monitor bridge using the address.

Monitor bridge and API server may also interact with one or more backend services to provide services to user device and power monitor . Examples of backend services include providing alerts to user device storing and retrieving information about specific users or devices that are stored in power monitor profiles discussed below storing usage data received from power monitors discussed below and providing updated models to specific power monitors discussed below .

The devices presented in the top portion may be selected according to different criteria. For example in some implementations the devices presented in top portion may represent the devices consuming the most power or may be devices selected by the user. In some implementations the user may specifically exclude some devices from appearing in the top portion.

In some implementations the specificity in naming the devices presented in the top portion may be determined by a confidence in the correctness of the device identification and hierarchical models may be used to determine the appropriate specificity. In some implementations a lowest level model in hierarchy that has a sufficient confidence may be used to name a device. For example if a general lighting model has a sufficiently high confidence score but all lower level models e.g. LED lighting incandescent lighting etc. do not then the device may be named as a light. If however the LED lighting model has a sufficient confidence score the device may be named as an LED light.

The bottom portion of display may present device events or other information about devices as list items . For example in some implementations the bottom portion may present devices that have changed state e.g. the coffee maker turned on the current state of a device e.g. the dryer is on information about the number of uses of a device over a time period e.g. that dryer has been used 5 times in the last week an input element to create an alert based on a state change of a device e.g. the user may want to create an alert to know when the clothes washer is completed so he or she can put the clothes in the dryer or a warning that a device has been on for a certain period of time e.g. that a hair straightener has been on for half an hour . Each item of the list may have additional information such as a time associated with the device event or power consumption relating to the device event.

In some implementations a user may perform actions to view other information. For example a user may select touch via a touch screen or click or mouse over with a mouse one of the graphical elements to view additional information about that device. A user may select list items to view more information about them. A user may swipe in a direction to see other displays of information.

Some devices in a user s home may not be identifiable. For example if a user purchases a new device it may be referred to as an unknown device. Unknown devices may be listed in various displays with the name Unknown Device and a question mark for an image. An unknown device may not be identifiable but power monitor may be able to recognize it as a device and determine some information about it such as when it is turned on or off and how much power it consumes. shows an example display for an unknown device when the user selects Unknown or Unknown Device from . The display for the unknown device may provide some information about the unknown device such as whether it is on or off and how much power the unknown device is consuming. The display for the unknown device may also include a user interface for providing further information about the unknown device such as the name type of device make version location etc.

In some implementations a user may be able to take pictures or video of devices in the house and object recognition techniques may be used to automatically identify a user s devices. For example a user could walk around the house and take pictures or video of kitchen appliances water heater furnace washer dryer and television to quickly identify many of the large appliances in the house. The user may also take pictures of serial numbers labels or other text and this information may be processed e.g. with optical character recognition to identify devices. The user could also be asked to provide a tour of the devices in the house switching devices on and off and signifying through the user interface which device state was changed at the time of the change.

In some implementations a user may be asked for assistance with identifying information about devices that are always on. Some devices are always on or nearly always on by their nature e.g. refrigerator Wi Fi router etc. and other devices do not completely turn off even when they appear off to a user e.g. television . For example a user may be instructed to briefly unplug specific devices such as the television and Wi Fi router wait for an amount of time and then instructed to plug the device back in. With this information power monitor can determine information about electrical usage of devices that are always or nearly always on and then provide more informative reports to the user. For example a switching power supply of a television may have specific characteristics and once those characteristics are determined power monitor may be able to determine information about electrical usage of the television on an ongoing basis.

In some implementations a user may be asked questions to help identify devices in the house. The questions may be asked before the user installs power monitor or after power monitor is installed and preliminary data is collected. Questions could be at a high level such as yes no questions regarding whether the user owns particular types of devices e.g. hot tub aquarium humidifier etc. . Questions could be more specific and ask the user to provide manufacturers and or versions of devices in the house. Questions could also relate to asking a user to confirm whether power monitor has accurately discovered devices in the house device discovery is explained in further detail below .

In some implementations the display for an unknown device may implement a procedure to assist a user in determining which device in the house the unknown device corresponds to. For example the display for an unknown device may contain a button Identify Me not shown in . The user can push or hold down tap or any other form of user input this button and then change the state of a device in the house by turning it on or off. Power monitor can then compare the electrical event received shortly after the button press with an electrical event from the unknown device to determine if the two are the same and the results may then be presented on the display for the unknown device such as Yes this is the unknown device or No that is not the unknown device. In this manner a user can repeatedly try devices until the unknown device is determined. Thus more generally a user may validate or negate information initially presented based on determinations made by a power monitor such as confirming that a particular device is in fact the oven a light bulb or the like.

After determining which device the unknown device corresponds to the user may edit information about the device. For example in the user may press edit button to activate an edit mode not shown . In the edit mode a user may enter information about the device including but not limited to a name type manufacturer version and location room or floor of the house . The user may then press edit button a second time to save changes.

Power monitor may have a device list corresponding to devices that have been identified in the house. When power monitor is first installed it may not know about any devices in the house and thus have an empty device list. In some implementations power monitor may already have a device list at the time of installation such as based on information provided by a user in advance based on information obtained from another source such as transaction records indicating devices previously purchased by the user or based on certain default assumptions e.g. that the house will have a refrigerator an oven a stove a washer a dryer and a dishwasher . A device in the device list may have information and or labels associated with it. For example labels may exist for types makes and or versions of devices. Information and or labels may include any relevant information such as the location in the house the age of the device the size shape or color of the device and or an association of the device with a particular individual within the house e.g. Mike s TV or Mom s Computer . As used herein a label includes any item of data that provides information about a device. Each device in the device list may be associated with one or models such as transition models and device models.

Devices in the device list may be identified with varying levels of specificity. For example the device list may include a first device that is specified simply as a dishwasher with the make and version being unknown and a second device that is specified as a Kenmore version 4000 refrigerator that is blue 3 years old and located in the second floor kitchen. The device list may have an interface by which a user may modify the device list such as by adding devices deleting devices modifying device descriptions such as to provide more specificity associating a device with an individual or the like. In embodiments the device list may be provided in a user interface that permits interaction with its elements such as allowing a user to drill down for further information about a device e.g. additional specificity about the device or data collected by the methods and systems disclosed herein such as upon touching clicking or otherwise interacting with a particular element of the list.

Power monitor may have additional models that are not associated with devices on the device list. For example a newly installed power monitor may have an empty device list and include models for common classes of devices e.g. dishwasher refrigerator etc. or any other models described above.

As power monitor is processing electrical signals it may use models that are associated with devices on the device list and it may use models that are not associated with devices on the device list. By comparing scores and or confidence levels generated using the various models new devices may be added to the device list new models may be associated with devices on the device list or model associated with devices may be modified or adjusted based on the collected data. A score may indicate how well data fits a model. A confidence level may indicates a measure of the confidence that the data was generated by a device that is correctly associated with the model. For example where only one model generates a high score the confidence level may be high as it is likely that the data was generated by a device that is correctly associated with that model. By contrast where multiple models produced high scores the confidence level may be low because it is difficult to differentiate among the models sufficiently to associate a single model with the device. Confidence level computation may use information which was not used for scores for example how well the hypothesis of an association between a given model and a device matches duration models how well it corresponds to expected times of day for the usage of the device how well it corresponds to the timing of other devices information about purchases made by a user of the device and so on. Confidence levels may also make use of patterns of error of the system in previous usage. From previous usage of a model it may by known that the model often generates false matches of a certain type. For example a model for Kenmore refrigerator may often provide a false match to a dehumidifier and this information may be taken account in determining a confidence level.

In processing an electrical signal scores and or confidence levels may be generated using the models. From these scores and confidence levels one or more models may be selected as most likely corresponding to an electrical event in the electrical signal. For example a model having a highest score may be selected. In some implementations confidence levels may be used. For example the model corresponding to a highest score may not be selected if the confidence level indicates that there is low confidence that the electrical event matches the model such as in situations where it is difficult to disambiguate between two or more models that have similar scores. Alternatively multiple models may be selected if there is a high confidence that the electrical event matches the model for each of them. Where multiple models are selected results from them can be handled in various ways. For example results could be averaged to provide a single output results can be tracked against further data such that the best of a group of models is selected after additional data collection or the like.

If the one or more selected models correspond to devices already on the device list then no changes may need to be made to the device list. If the one or more selected models correspond to devices not on the device list then a new device may be added to the device list or a device on the device list may be updated or replaced. In some situations such as when there is a high confidence level the device list may be updated without seeking confirmation from the user. In some situations such as when the confidence level is low the user may be prompted to confirm or provide additional information.

As more devices are added to the device list the device list may reach a steady state subject to device aging and other such variations . In this steady state many or nearly all of the electrical events processed may correspond to devices on the device list. When the user adds a new device or replaces an existing device models corresponding to the new device may provide a better match than the models for all of the devices on the device list and the new device may be added to the device list either with or without user confirmation .

In some implementations a user may be asked to provide information about devices to assist in adding devices to the device list. For example a user interface may be presented to the user on a device such as user device . The user interface may include for example an input to allow the user to type in free form text describing devices in the house and the text may be processed using natural language processing. In another example the user interface may allow the user to select items from lists such as drop down menus. Lists may include device classes makes versions or any other relevant information. The options presented to the user may change after an initial input from the user. For example a user may type or select a class of device and then makes and or models corresponding to that class of device may be presented to the user. The options presented to the user may also depend on information learned from processing electrical signals. In some implementations the list may include devices likely in the house based on a match of electrical signals to transition and device models. For example if there is a possible match for Whirlpool dishwashers then the list may include versions of Whirlpool dishwashers.

In a first implementation the user interface may first present the user with first e.g. partial information about a device and prompt the user to provide second information about the device. In a second implementation the user may not be presented with partial information about a device and be asked to provide information about devices that have not yet been identified such as by being put on a device list.

In the first implementation the user may be presented with first information about a device and be prompted to provide second information. For example using the techniques described above it may be determined that the user has a device with a type of element and the user may be prompted to enter further information about the device e.g. prompt the user to enter more information about a device with a pump or a motor . Alternatively it may be determined that the user has a class of device or a brand and class of a device e.g. that the user has a dishwasher or a Kenmore dishwasher and the user may be prompted to enter additional information such as the version of the dishwasher . In some implementations automated device discovery described in greater detail below may discover a device but may have a low confidence level or high degree of uncertainty between two possible device matches. For example a device may be a possible match for an aquarium or a hot tub and the user may be asked to provide further information about the device. In some implementations a user may be presented with other information such as an approximate time of a state change e.g. the device turned on at 10 00 am a number of state changes over a time period average wattage or a graph of electrical usage e.g. wattage over time.

When electrical events are received from a device that is at least partially unknown the events may be processed with a set of existing models as described above. One or more models may be selected e.g. by selecting one or more models that generated the highest scores. After selecting the one or more models first information about the selected models may be obtained and presented to the user. In some implementations the decision to present the first information to the user may be determined based at least partly on the first information itself. For example the first information may indicate that additional information is needed or desired the model could correspond to an aquarium or a hot tub and we should get clarification from the user . The user may then be prompted to provide second information about the device. The second information can include any relevant information about a device such as a class of device a make or version a location in the house or an age. The second information may be used to select a label to associate with the device. The label may be essentially the same as the second information provided by the user or may be different. For example a user may be presented with a list of labels to choose from or a user may be prompted to enter text and the text may be processed to determine an appropriate label using natural language processing techniques.

Before or after receiving the second information from the user the device may be added to a device list as described above. The device in the list may be associated with information and or labels such as information corresponding to selected models the second information received from the user or labels generated from the information.

In a variation of the first implementation the first information may not be presented to the user. The first information may be used to determine whether to request additional information from the user without presenting the first information to the user. For example the first information may indicate that a new device is present in the house and based on this information the user may be requested to provide information about devices in the house.

In the second implementation a user may be prompted to enter information about devices in the house without providing partial information about devices to the user. For example after the initial setup a user may be asked to provide information about devices in the house or a user may want to enter information about a device that hasn t been detected using the techniques described herein.

The information provided by the user may include any of the information described above including for example a class make and or version of a device. The information may be provided by the user via any appropriate techniques such as entering free form text or making selections from lists. The information provided by the user may be used to obtain models for identifying devices. For example the user may provide information indicating that he or she has a dishwasher and models may be obtained that correspond to different types of dishwashers. The models may be obtained for example from storage of power monitor or they may be obtained from an exterior source such as a server computer that provides models via an API.

In some implementations some or all of the obtained models may be used to process an electrical signal and a score may be generated for each model. Using these scores one or models may be selected. For example a model having a highest score may be selected. In some implementations confidence levels may be used. For example the model corresponding to a highest score may not be selected if the confidence level indicates that there is low confidence that the electrical event matches the model. Alternatively multiple models may be selected if there is a higher confidence that the electrical event matches the model for each of them.

Before or after selecting the one or more models a device may be added to the device list. The device in the list may be associated with information and or labels such as information corresponding to selected models the information received from the user or labels generated from the information.

When later providing information about the device to the user such as via user device the information and labels associated with devices in the device list may be used to provide the user with greater detail about the device such as its location or make and version. The information and or labels may also be used to obtain improved models for the device. For example if the user provides the make and version of the device then models may be obtained that are specific to that make and version.

Additional information that may be presented to a user includes a display of historical power usage as shown in . This display may be accessed for example by touching the number for total power from . In displaying historical power usage of all devices any presentation format may be used including but not limited to bar charts line charts or a list of numbers. Different granularities may be available such as hourly daily weekly or monthly. For example shows monthly power usage for 5 months. In some implementations a user may change the time scale for example by pinching to show a larger time scale or splaying to show a smaller time scale. In some implementations a user may touch one of the bars of a bar graph to obtain the number of watts corresponding to the bar.

Historical power usage of individual devices may also be presented to a user as shown in where historical power usage of a washer is shown. Any of the techniques for presenting historical power usage for overall power usage in may also be applied to present historical power usage of individual devices.

The relative power usage of individual devices may also be presented to help the user understand how much power devices are consuming compared to one another. In some implementations pie charts may be used to show relative power usage. For example a pie chart may be shown where the entire pie chart represents the total power usage over a period of time e.g. the last month . The pie chart may present slices for each device in the house and a user may touch an individual slice to obtain additional information about that device or the power usage by that device. In some implementations a large number of devices may result in a complex pie chart and classes of devices may be presented instead of some or all of the individual devices. For example the slices for all of the incandescent light bulbs may be replaced with a single slice for incandescent light bulbs. In some implementations a user may be able to zoom into a portion of the pie chart to more easily view the power consumption of individual devices.

Additional information that may be presented to a user includes a display of changes in power usage over time as shown in . This display may be accessed for example by touching the number for total power from by swiping horizontally from or selecting it from a menu. In displaying changes in power usage over time any presentation format may be used including but not limited to bar charts line charts or a list of numbers. Different time scales may be available such as the most recent hour day or week. In some implementations a user may change the time scale for example by pinching to show a larger time scale or splaying to show a smaller time scale.

In some implementations of the display may be annotated to indicate the device that caused a change in power consumption. For example in the line chart shows an increase in power usage and a dryer is shown as causing the increase. In some implementations the line chart or other presentation format may use a stacked display with different colors indicating different devices not shown in . For example the line chart may include a first line showing the power usage of a first device a second line showing the combined power usage of the first device and a second device with the area between the first and second lines indicating the power usage of the second device. Additional lines may be added for other devices. In some implementations the line chart may show one line for steady state power usage of all or many devices and a second line for a device that recently changed state to indicate the change in power consumption caused by the state change of the device. As time goes on that second line may be merged with first line as the steady state includes the recent state change.

The foregoing provides example implementations of how power monitor may be able to recognize device events for devices in the home. The performance of power monitor may be improved however by using models that are specific for or adapted to a particular home. First power monitor may have models that correspond to the types or classes of devices in the home. If it is known that the home includes a hot tub then a model that is able to determine device information for a hot tub may be added to power monitor . Second power monitor may have models corresponding to the specific make and or version of devices in the home. For example the home may have a Kenmore 1000 microwave and models particular to this microwave may be added to power monitor . Third a specific manufacturer and version of a device may operate differently in different homes due to variances in manufacture the specific electrical grid in the home and other factors. Power monitor may additionally have models that are adapted to the specific operation of the Kenmore model 1000 microwave in a specific home.

Server may include any components typical of a computing device such one or more processors volatile or nonvolatile memory and one or more network interfaces . Server may also include any input and output components such as displays keyboards and touch screens. Server may also include a variety of components or modules providing specific functionality and these components or modules may be implemented in software hardware or a combination thereof. Below several examples of components are described for one example implementation and other implementations may include additional components or exclude some of the components described below.

Server may include device discovery component for discovering information about devices in a home. For example when power monitor is first installed in a home it may not have any information about devices in the home or it may only have information about classes of devices that are or may be in the home but not have information about specific devices. Device discovery component can receive information about electrical signals in a home determine information about devices in the home and then send updated models to the home for use by power monitor .

In some implementations device discovery component may receive other information in addition to information about electrical signals. Where power monitor is connected to a home network either wired or wirelessly and with permission of the user power monitor may be able to determine information about other devices on the home network. For example power monitor may be able to determine information about the manufacturer and version of the wireless router is it connected to. Power monitor may also be able to determine information about other devices on the home network such as home computers mobile devices e.g. phones tablets watches glasses and devices relating to home automation or the Internet of things e.g. smart thermostats and other devices for controlling lights locks security systems cameras and home entertainment systems . Power monitor may also be able to obtain information about devices in the home by monitoring other network protocols such as Wi Fi NFC Bluetooth and ZigBee. An app on user device may also be configured to determine information about devices on local networks such as Wi Fi Bluetooth and ZigBee. Device discovery component can receive this information about devices on the local networks to improve the models sent to power monitor . For example device models for a user s Wi Fi router and for charging a user s particular smart phone may be added to the user s power monitor to improve the ability of the power monitor to determine the electricity usage of these devices.

Device discovery component can receive any relevant information from power monitor and the information received may vary over time. For example when power monitor is first installed in a home device discovery component may receive a continuous stream of electrical signals in the home to determine characteristics of electrical signals in the home and to discover devices in the home. Continuously streaming electrical signals from a home may consume significant network and processing resources and thus may be performed for only a limited period of time.

Device discovery component may receive information about electrical events from power monitor . When power monitor is first installed in a home device discovery component may receive a continuous stream of information about electrical events to discover devices in the home. As devices are discovered and power monitor updated with additional models the information about electrical events transmitted to device discovery component may be reduced. For example device discovery component may receive only information about electrical events that do not correspond to devices known by power monitor .

Device discovery component may also receive information about device events determined by power monitor . For example power monitor may determine that a dishwasher started at a particular time and this information may be received by device discovery component . This information may be used by device discovery component to update and make corrections to power monitor models. For example it may be that the device event was incorrectly determined to be a clothes washer starting and device discovery component can update the models to reduce the likelihood of this error from happening again. In some implementations device discovery component may receive all or a subset of search graph in one or more modes. For example device discovery component may receive a best path through search graph for a historical mode search.

Device discovery component may also receive information generated by the user or feedback provided by a user. As described above user device may provide a user interface where the user is requested to help identify devices in the house. Power monitor may thus provide electrical signals and or electrical events that have been manually labeled by the user. This labeled data may be used to train models for this particular user and other users. A user may also provide feedback correcting identifications made by power monitor . For example power monitor may have identified a dishwasher as a Kenmore dishwasher where the dishwasher was actually a Whirlpool dishwasher. The user feedback may be used in combination with the electrical signal and or electrical event to improve models for both Kenmore and Whirlpool dishwashers.

Device discovery component may use device discovery models to discover devices in a home. Device discovery models may include a hierarchy of models. For example discovery models may include models that generally correspond to the operation of most or all dishwashers models that correspond to a subset of all dishwashers e.g. dishwashers with one pump or dishwashers with two pumps models that generally correspond to most or all versions of dishwashers by a specific manufacturer and models for specific versions of dishwashers by a specific manufacturer. In this manner device discovery component may provide the best available information to power monitor . If a user purchases a version of a dishwasher that was just released device discovery component may not be able to determine the version of the dishwasher but may be able to determine the manufacturer of the dishwasher or at least determine correctly that the device is a dishwasher. In some implementations device discovery component may use transition models and device models for discovering new devices and in some implementations device discovery component may use variations of transition models and device models or may use completely different models.

In some implementations device discovery component receives a stream of information about electrical events. The stream of electrical events could correspond to all electrical events detected by power monitor or could include only electrical events that do not correspond to previously discovered devices. Device discovery component may compare the stream of electrical events against one or more device discovery models to determine a device corresponding to the electrical events. Device discovery component may compare the electrical events against all device discovery models to determine a device or could proceed in a hierarchical fashion by first determining that the electrical events correspond to a dishwasher then to a dishwasher by a particular manufacturer and then to a specific version of a dishwasher by the particular manufacturer.

In some implementations device discovery component may create a discovery graph using an electrical event stream transition models and device models. shows an example electrical signal with electrical events from two devices and shows an example of discovery graph created for the electrical signal of . Device discovery component may receive electrical signal and determine electrical events in electrical signal or may instead receive an electrical event stream where the electrical events are determined elsewhere. In the example of the electrical signal may correspond approximately to electrical signals received from the burner of an electric stove and an incandescent light bulb. The burner may be represented by a heating element and electrical event HE may correspond to the heating element transitioning from an off state to an on state and HE may correspond to the heating element transitioning from the on state to an off state. Electrical event I may correspond to an incandescent light bulb transitioning from an off state to an on state and electrical event I may correspond to the incandescent light bulb transitioning from an on state to an off state. Electrical events show a possible sequence of electrical events generated by a heating element and an incandescent light bulb.

As described above illustrates an exemplary state model for an electric burner of a stove. Device discovery component may create a discovery graph using an electrical event stream and the device model of to determine if the sequence of electrical events in the electrical event stream includes a burner.

Discovery graph begins at node where node corresponds to the initial state state B of the device model for an electric burner and state B is indicated with a diamond. The first electrical event in the electrical event stream is electrical event . The transition models may be used to determine that electrical event corresponds to the transition HE. For example this may be accomplished by applying all of the transition models to electrical event and selecting the transition whose transition model produces the highest score. The transition HE may be compared against discovery graph to determine if HE is an allowable transition from any current node in the discovery graph. Since node corresponds to state B and HE is an allowable transition from state B to state S node may be added to discovery graph where node corresponds to state S and is indicated with a solid circle.

The next electrical event is electrical event and the transition models may be used to determine that electrical event corresponds to the transition I. Transition I does not correspond to any valid transitions from nodes of discovery graph so no nodes may be added in response to electrical event .

The next electrical event is electrical event and the transition models may be used to determine that electrical event corresponds to the transition HE. Transition HE is not an allowable transition from node but it is an allowable transition from node . Node corresponds to state S and HE is an allowable transition from state S to both state S and state E. Since both of these transitions are allowed two nodes are added to discovery graph node and node . Node corresponds to the transition to state S and is indicated with an empty circle. Node corresponds to the transition to state E and is indicated with a square.

The next electrical event is electrical event and the transition models may be used to determine that electrical event corresponds to the transition HE. As above HE is an allowable transition from node and thus node may be added to discovery graph where node corresponds to state S. Electrical event HE is also an allowable transition from node and thus node is also added to discovery graph where node corresponds to state S.

Discovery graph may be used to identify a device corresponding to electrical event stream . In some implementations discovery graph reaching the end state of a device model indicates that the sequence of electrical events likely corresponds to the device of the device model. In some implementations additional information may be considered. For example other information may be available corresponding to a device model such as an expected duration that a device remains in a particular state and an expected change in power consumption caused by an electrical event. For the device model of the length of time that the device stays in state S may be limited to 1 5 seconds. For the transition from node to node in the length of time that the device stays in state S may be 10 seconds. Because this duration exceeds the allowable duration the transition from node to node may not be an allowable transition and this transition may be excluded from discovery graph . Similarly a change in power consumption caused by an electrical event and any other relevant factors may be used to determine whether a sequence of electrical events corresponds to a device. Any of the information used in creating search graphs may also be used with discovery graphs. For example transition scores wattages scores and prior scores may all be used to determine whether a sequence of electrical events corresponds to a device.

Where discovery graph includes multiple paths that reach the end state of a device model one of the multiple paths may be selected as a most likely path corresponding to the actual operation of the device. For example in the paths ending at nodes and may all correspond to valid state transitions for the burner. Other criteria may be used to select one of these paths as most likely corresponding to operation of the burner. For example longer paths may be preferred over shorter paths so the path ending at node may be preferred over the paths ending at nodes and . Additionally the path ending at node may be considered more likely than the path ending at based on the durations for the states of the device model. In some implementations each path of a discovery graph that reaches an end state of a device model may be assigned a score. The score may be computed using any relevant information including but not limited to scores produced by transition models path lengths state duration constraints and power constraints. The path with the highest score may then be selected as the most likely path.

A consistency of nodes along a path may also be used to score a path or to select a path from several paths that reach an end state. For example for each instance of the HE event it may be expected the power consumed during the event and or the length of time in state S is similar for each occurrence of state S. Accordingly a path with greater consistency may receive a higher score than a path with lower consistency.

Once a most likely path is determined from discovery graph the electrical events corresponding to the most likely path may be removed from electrical event stream . For example if the most likely path is the path ending at node then removing these electrical events from electrical event stream would leave only electrical event I and electrical event I . These remaining electrical events may then be processed with another discovery graph to discover another device.

To determine that a device that corresponds to a sequence of electrical events a discovery graph may be created for a variety of devices. In some implementations discovery graphs may first be created for classes of devices to determine at a high level whether the device corresponds to a class of device such as a refrigerator stove dishwasher etc. Where only one discovery graph reaches an end state the corresponding device class may be selected. Where more than one discovery graph reaches an end state the device class may be selected according to a greatest score. After determining the class of device additional discovery graphs may be created to determine more specific information about a device. For example discovery graphs may be created for each manufacturer of dishwashers or discovery graphs may be created for each known version of dishwasher. As above the device may be selected by a highest scoring discovery graph that has a path that reaches an end state.

Once the device is determined from the sequence of electrical events models may be selected for transmission to power monitor . For example electrical event models transition modes device models wattage models and or prior models that contain information about the discovered device may be transmitted to power monitor .

In addition to discovering new devices server may also update models for known devices and adapt models for known devices. Models may be updated for a variety of reasons research and development efforts may determine new models that perform better than previous models new models may be created as new devices become available on the market models may be adapted to specific devices to account for variances in manufacturing and models may be adapted as the electrical properties of devices drift over time e.g. caused by wear of devices or changes in the quality of the electrical lines in the house . For example a user may purchase the latest version of a Kenmore dishwasher. At the time that server discovers the dishwasher server may not yet have a device model for the latest version of a Kenmore dishwasher. Server may provide power monitor with a device model for Kenmore dishwashers. Later when server has updated its device discovery models it may again perform device discovery to determine the specific version of a Kenmore dishwasher and provide that device model to power monitor .

Server may store power monitor models which may include electrical event models transition models device models wattage models and prior models. Power monitor models may include any of the type of models discussed above including but not limited to models for classes of devices and elements e.g. dishwashers models for devices and elements by a particular manufacturer e.g. dishwashers by Kenmore models for a particular version of a device by a particular manufacturer e.g. a Kenmore version 1000 dishwasher of a certain vintage and models for specific devices e.g. the Kenmore version 1000 dishwasher at 100 Main Street . The models may be updated over time and adapted to specific power monitor users as described below.

Server may store usage data received from power monitors in homes. Usage data may include for example electrical signals processed by power monitor portions of electrical signals processed by power monitor portions of electrical signal processed by power monitor that correspond to electrical events features generated from electrical signals or electrical events device events detected by power monitor or all or portions of search graphs created by power monitor . To ensure the privacy of end users this usage data may be anonymized removing personally identifying information and or retained for a limited period of time. Usage data may be used to update or adapt models as described below.

Server may store power monitor profiles for users of power monitors. Power monitor profiles may store any relevant data relating to the operation of a power monitor by a particular user with the knowledge and permission of the user. Data that may be stored in a power monitor profile includes for example a purchase and or installation date of a power monitor a list of devices discovered by device discovery component dates of discovery of devices a geographic location of a power monitor a number of people residing in a house and demographic information about the people historical information about aggregate power usage and power usage by individual devices and historical information about device events such as devices turning on or off or changing state.

A power monitor profile may also store models that are specific to a particular user. As described below models may be updated or adapted to a specific user s house and specific devices in a user s house. The house specific models may be stored or a link to the models may be stored in a user s power monitor profile. Usage data of a user may also be stored or a link to the usage data may be stored in the user s power monitor profile. The usage data may be labeled by the user or may be labeled automatically by a company that creates the power monitor models for a user. This usage data may be used to create house specific models for a user as described below.

The model updaters may be used to update and adapt existing models to create better house independent models or to create better house specific models. Model updaters may do model updates on a periodic basis. Shortly after a user obtains a power monitor model updaters may operate more frequently e.g. once a day as it may be expected that receiving data from a new user will allow house specific models to improve quickly. When power monitor is first installed the models used may be more general and by collecting house specific data models can be constructed that perform better because they are built with data from the user. As time goes on models may be updated less frequently or when an indication is received that a user may have a new device in the house. Collecting data over long periods of time may generally allow for the improvement of both house independent and house specific models and periodically providing these models to users may improve performance.

When power monitor is first installed it may not have any models or may only have generic models that apply to classes of devices. For example the initial models may include models that apply generally to a dishwasher an oven a motor a pump and a heating element. As more is learned about devices in a user s house more specific models may be transmitted to a user s power monitor. For example if it is learned that the user has a Kenmore version 1000 dishwasher then models specific to a Kenmore version 1000 dishwasher pump and a Kenmore version 1000 dishwasher motor may be transmitted to the user s power monitor . Further as time goes on the electrical properties of known devices may drift as parts wear or evolve. Accordingly the house specific models for individual devices may be updated periodically so that house specific models continue to match the devices as the properties of the devices drift over time.

Electrical event model updater may create house specific electrical event models. Houses may have different electrical characteristics including the noise levels and types of noise in electrical signals. Usage data received from a house may be used to create a house specific electrical event model that is more reliable in detecting electrical events.

Transition model updater may create house specific transition models. Two identical devices in terms of manufacturer and version may behave differently in different houses. The differences may be caused by for example variances in manufacturing e.g. a capacitor may have a slightly higher capacitance in one device than another device the specific electrical configuration of a home e.g. quality of wiring and electrical interference from other devices and the age of a device e.g. older parts may have different electrical characteristics . Because two identical devices may have different electrical properties better transition models can be created by collecting usage data that is specific to a device. A house specific transition model may be created using the same techniques as house independent models but with different data. House independent models may be created with data from many houses but house specific models may use a greater amount of data from the house it is being created for.

Any appropriate techniques may be used to create a house specific transition model. For example a first model may be created with a general data set a second model can be created with house specific data and the two models may be interpolated to create a house specific model. The weights of each model in the interpolation may depend for example on the amount of house specific data that is available.

Device model updater may create house specific device models. Where device models are represented using directed graphs such as the device model of parameters of the directed graph may be adapted to match a specific device. For example a directed graph for a dishwasher may have different paths for a normal wash and a pot scrubbing wash. If one user generally uses the pot scrubbing wash and not the normal wash then path probabilities may be increased for the pot scrubbing wash to match the expected behavior of the user. Other parameters that may be adjusted include the expected duration and expected power usage corresponding to different states of the directed graph.

Wattage model updater may create house specific wattage models. Two identical devices may behave differently in different houses. Usage data specific to a house may be used to create a house specific wattage model using the same techniques as for creating house independent models discussed above.

Prior model updater may create house specific prior models. House specific prior models may incorporate information specific to a house such as location which indicates daylight hours and temperature number of people number of floors number of rooms and type of building single family house condo apartment building etc. . This information may be provided by a user or automatically learned from historical usage data. Usage data from a house may also be used to better predict when individual devices are likely to be used. For example a user s morning routine in getting ready to go to work turning on the bedroom light turning on the bathroom light turning on the water in the shower etc. may be incorporated into a prior model to allow a power monitor to more accurately recognize these device events.

Model validator may be used to evaluate the performance of any updated or adapted models before they are sent to individual power monitor devices. New models may only be sent where the new models perform better than old models. Model validator may evaluate the updated or adapted models by running them against stored usage data which may be house specific or house independent . Where the stored usage data is labeled error metrics can be determined for both new models and old models and the improved performance of the new models may be verified before being sent to individual power monitor devices.

The above techniques for informing users about home device usage provides many benefits to users and homeowners. For example users can benefit by increasing energy efficiency receiving warnings about devices that are not functioning correctly and monitoring device events in the home from afar.

Understanding energy usage of individual devices in the home provides numerous opportunities for improving energy efficiency. Expert systems may be created that receive energy usage information for a home and automatically provide suggestions to users for actions they can take to improve energy efficiency. In some implementations the expert systems may compare the energy usage of the devices currently in the home with replacement devices that are available and compare the cost of device replacement with the reduced energy costs provided by the replacement device. For example an expert system may determine that the most effective action a user can take is to replace a ten year old refrigerator with a new model and inform the user that new refrigerator will pay for itself in energy savings in 18 months. The expert systems may further be improved by receiving feedback about which suggestions users are actually implemented by users. With this additional feedback an expert system can favor recommendations that are more likely to be implemented by users. Additionally users may be informed about the best deals for purchasing devices and directed to a local or online merchant.

In addition by collecting data about many different versions of devices information about actual energy usage and efficiency of devices may be determined and this information may be more accurate than information provided by manufacturers. Versions of devices may then be ranked according to efficiency and this information provided to the user to help the user select a new device.

In addition to informing users about their own energy usage they may also be informed about how their energy usage compares to specific people e.g. friends and family or other people in similar situations e.g. people in the same geographical location with similar sized houses . By learning about their own energy usage with respect to others users may be more motivated to reduce their energy usage. In some implementations time specific reminders could be sent to users. For example in July users can be reminded or informed that they used more energy than their friends and family and providing recommendations for reducing air conditioner usage.

In some implementations social networks and social networking applications may be used. Users may post on social networks information about their energy usage how energy usage has changed over time and the effectiveness of specific changes in reducing energy usage. The user s posts may be backed by specific data obtained from a power monitor. Energy usage may be promoted by creating games based on energy usage competitions and featuring creative approaches for saving energy. Information about how a variety of users have taken actions to reduce energy usage and the resultant energy savings may also be used to improve for example the expert system for providing recommendations for saving energy.

Understanding electrical energy usage of devices in the home may also allow users to conserve other resources. For example understanding the electrical usage of a furnace boiler dryer stove or hot water heater may allow the determination of water oil or gas used by these devices. For example where the manufacturer and version of these devices may be determined by their electrical properties models may be created that determine the amount of water gas or oil used by these devices in addition to their electrical usage. Other data may be used determine the amount of water gas or oil used by devices including but not limited to information obtained from water gas or oil bills e.g. manually entered by a user or obtained automatically or usage information obtained from other sources such as the utility company e.g. using web scraping techniques using an API provided by a utility company to obtain information from a server of the utility company or obtaining information from a smart meter for water gas or oil .

The techniques described herein for disaggregating electrical signals may further be applied to disaggregating other types of signals. Sensors may be placed on water oil and gas inlets. By processing a gas signal for example the gas usage by a stove furnace and hot water heater may be determined by using models and search techniques described above. Disaggregation of water oil and gas signals may also be performed in conjunction with disaggregation of electrical signals as joint disaggregation may perform better than individual disaggregations.

In some implementations power monitor may be able to interact with and or control other devices in the house. An increasing number of devices in a house are connected to a network. Where these connected devices have an API and power monitor can connect to them power monitor can control them for increased energy savings. For example using expert systems energy saving strategies may be determined and power monitor can control a thermostat lights or other devices to directly implement these energy saving strategies.

Understanding the operation of specific devices in the home may also allow for the automatic identification of devices that need maintenance are broken or are likely to break down in the near future. As components of devices wear out or break the electrical properties of the components may change. In some implementations these changes may be detected using models such as transition models. For example as the pump of a dishwasher deteriorates the electrical properties may change in a predictable way. In some implementations transition models may be created for the various stages in the lifetime of the dishwasher pump. As the dishwasher ages a transition models for an old and worn out pump may provide a better match than the transition model for a new pump. When this happens a notification may be sent to the user that the pump is likely to fail in the near future. A user may additionally be informed that routine maintenance should be performed to improve the energy efficiency of a device e.g. that a furnace needs to be cleaned or a filter needs to be replaced on an HVAC system that routine maintenance should be performed to prevent a device from breaking down or that the dishwasher isn t working because the water pump broke.

In some implementations fault models may be specifically created to detect known types of faults for devices or to detect known precursors for known types of faults. For specific devices or for classes of devices the top faults or failure modes may be determined e.g. by speaking to experts or collecting data . For each of these potential faults electrical signals and events may be collected for the time period leading up to the fault during the fault and after the fault. This data may then be used to create one or models for fault detection. In some implementations one model may indicate that a fault is likely to happen soon another model may indicate that a fault is happening now and another model may indicate that the fault has already happened. For example a dishwasher may have known faults or failure modes such as a capacitor in a motor failing or a bearing in a motor failing. Models can be created for these faults and applied by power monitor to detect them and inform the user of likely reasons why the dishwasher is not working.

Understanding the operation of devices in the home also allows users to monitor activity in the home for informational purposes including when they are away such as at work or on vacation. Users can be provided with periodic reports e.g. weekly regarding uses of various devices. For example a user may be informed that the television was watched for 30 hours in the past week but the treadmill was only used for 20 minutes. For monitoring purposes certain activities in the house may have repetitive patterns and models may be constructed to process sequences of device events to determine what activities are occurring. For example when a house cleaner comes to clean the house the sequence of device usage may be similar on each occasion. When this pattern is detected a notification may be sent to inform a user when the house cleaners arrive and depart. In another example use of the television by children may be detected and recorded and the parents can be sent a notification indicating how much television the children watched each day. Notifications may be sent out for other conditions that may be dangerous or undesirable. For example a notification may be sent out that the oven was left on or that the garage door was not closed after going to work. For senior citizens patterns may be detected corresponding to emergencies or situations where help is needed and notifications may be sent out to friends and family to provide assistance. When away on vacation patterns may be detected that indicate that someone may be breaking into your home. These notifications and any other notifications referred to herein may be sent to any device including but not limited to user device and may be sent using email text message an application notification or any other communication medium.

A user may desire to receive notifications for particular events that occur in a home herein called notification events including for example that a device is in a state for a long time e.g. an oven being on or a refrigerator door being left open that a device is in a state during a time of day when the device is expected to be in another state e.g. that lights are on at two in the morning that a device is in a state when no one is home e.g. the air conditioner is on or the garage door is open while everyone is at work that a device has changed state or completed an operation e.g. the washer has finished washing clothes or the television has turned on that a person has arrived or departed e.g. kids return home from school or housecleaners enter or that a device needs maintenance or repair e.g. the water pump of the dishwasher broke . Notification events may be based on any combination of the above. Notification events that may be recognized may include a preconfigured set of notification events notification events learned by monitoring the status of devices in the home or notification events specified by a user.

A user may specify various settings for notification events. For example the user may turn on or off specific notification events and may specify parameters such as an amount of time the hair straightener must be on before sending a notification . A user may set thresholds for triggering notifications. For example determining whether an event has occurred may involve computing a notification score or a notification confidence level and only sending the notification if the score or confidence level exceeds a threshold. For example a user may set a higher threshold for less important notification events e.g. that the television has been left on and a lower threshold for more important events e.g. that an appliance is operating in a dangerous state or that the house is on fire .

To determine whether a notification event has occurred notification event models may be used. Any appropriate classification techniques may be used for notification event models. Classifiers may include but are not limited to neural networks self organizing maps support vector machines decision trees linear and non linear regression random forests and Gaussian mixture models. These classifiers may be trained with labeled data to generate the notification event models. For example a user may indicate a time or a period of time that a notification event occurred such as days and times house cleaners came and stored information e.g. electrical signals or device state changes may be retrieved and used to train a notification event model for that notification event. Such notification event models may be house specific or house independent.

In some implementations directed graphs may be used for notification event models similar to their use in connection with device models as described above. For example one directed graph may be used to model the operation of a refrigerator while the door is closed and another directed graph may be used to model the operation of the refrigerator while the door is open e.g. the compressor is operating more frequently . In some implementations a timer may be used for a notification event model. The timer may be initiated when a device enters a particular state e.g. a hair straightener being turned on and the timer reaching a threshold may cause the event to occur. In some implementations a decision tree may be used for a notification event model. Inputs to the decision tree may include any of the information described above including the time of day presence of people in the house and the states of devices. In some implementations neural networks may be used for notification event models. Any of the information described herein including the states and state changes of devices may be input to a neural network and the output of the neural network may indicate that a notification event occurred. Notification event models are not limited to these particular models and any combination of models may be used for a notification event model.

Default notification event models may be provided for a user. For example a user may be able to access a list of available notification event models and select the notification events he or she would like to receive. Individual notification event models may be applied to classes of devices e.g. a notification event model that indicates when a refrigerator door has been left open for class or make of refrigerator may apply to a version of a device e.g. a notification event model that indicates when a refrigerator door has been left open for a specific make and version of a refrigerator or may apply to a specific device e.g. a model specifically for the refrigerator in a particular house .

Notification event models may be learned using data from a power monitor in a house. For example a user can indicate that a notification event occurred at a time or over a period of time in a data. Alternatively a user may specifically cause the event to occur e.g. by leaving the refrigerator door open . The power monitor data e.g. electrical events features and device events from this time may be used to train an appropriate model to recognize the event in the future. The type of model to use e.g. a decision tree versus a neural network may be specified manually or automatically. For automatic model selection each of the available model types may be trained with the available training data and the model that performs the best may be used as the notification event model. Output from multiple models may be used to confirm a notification event such as using a second model to confirm an event where the confidence level of the primary model is below a threshold value.

Additionally a user may manually create notification event models. For example a user interface application programming interface or programming language may be provided to allow the user to specify that a certain combination of device states or state changes perhaps in combination with other information such as a time of day or whether people are present should be a notification event and create a corresponding notification event model.

Notification event models may be evaluated continuously as the power monitor processes electrical signals. In some implementations notification event models may be combined with the search graph of and in some implementations the notification event models may be evaluated separately but simultaneously with the evaluation of the search graph of . For example a notification event model that indicates that a refrigerator door has been left open may be implemented as a directed graph and combined with a search graph. In another example a notification event model that indicates that a hair straightener has been left on for a period of time may be implemented using a timer and be evaluated separately but in parallel with the search graph.

Notification events may be determined using any combination of computers described above. For example in some implementations power monitor may perform the processing to determine whether a notification event has occurred. In some implementations power monitor may provide information to another device e.g. server API server or monitor bridge for determining whether a notification event has occurred.

Notification event models may use any available data as inputs including but not limited to the electrical signal electrical events and device events. Some notification events may be based on where one or more people are located. For example some notification events may be triggered on no one being home on a particular person being home or not or a particular person being in another location such as at work . Any suitable techniques may be used to obtain the location of people for notification events including wirelessly detecting mobile devices or a car of a user e.g. detecting Bluetooth or wifi radios having a mobile device of a user transmit the location of the device to a computer where it may be used for determining notification events or associating certain events including notification events with the presence of a user e.g. determining that Jane is at home if the hair dryer in Jane s bathroom is in use .

Notification event models may use data obtained from personal area networks local area networks or wide area networks. For example power monitor may implement a variety of network protocols such as Bluetooth Wi Fi and cellular communications. Power monitor may be able to receive information from other devices in the house such as smart devices or Internet of things devices. For example power monitor may be able to connect to a Nest thermostat to obtain the temperature of the house or a variety of other sensors to detect for example light sound and humidity. Power monitor may be able to receive information over the Internet using a variety of APIs. For example power monitor may be able to access weather data weather forecasts stock market quotes or any other relevant data. Any of this data received from other devices in the house or from the Internet may be used as inputs to a notification event model.

A notification event model may provide an output that may indicate whether the corresponding notification event occurred. In some implementations the output may be a simple yes or no or other Boolean indicator and in some implementations the output may be a score e.g. a value from 1 to 10 a floating point value or a likelihood . Depending on the value of the output and the user preferences a notification may be sent. For example a user may desire a notification when the value is yes or exceeds a threshold.

A notification may be sent to the user immediately or at a later time. When a notification event model indicates that a notification event has occurred a priority for the notification event may also be determined. The priority of the notification may depend on the notification event itself. For example the refrigerator door being left open may be a low priority event and the oven being left on may be a high priority event. The priority of a notification event may be determined using any of the data described herein. For example a notification event may exist for the furnace shutting off and the temperature of the house may be factor in determining the priority of the event. In some implementations higher priority events may be sent immediately and lower priority events may be batched together and sent at the end of the day week or month.

The timing of when to send a notification event may also depend on the time at which the notification event occurs. For example if the dishwasher has finished at two in the morning it may be preferred to send the notification after people have woken up rather than immediately. If the garage door opens at two in the morning however it may be preferred to send the notification immediately. The timing of a notification event may also be determined by the presence and activities of people. Some notifications may be transmitted when people wake up in the morning e.g. by a first use of a mobile device in the morning or a motion sensor when people are about to exit the house e.g. by using door or motion sensors or when people arrive home e.g. by the presence or mobile devices or use of door or motion sensors .

Whether a notification event has occurred may also be determined using confidence levels or other parameters of previous processing. For example a transition model or a device model may indicate that a device is in a particular state or has changed to a particular state with a confidence level. With a higher confidence level it may be more likely that the transition or device model has output a correct answer and with a lower confidence level it may be more likely that the transition or device model has made an error. The confidence level of an output of a transition or device model may be determined based on the input data e.g. a noise level or a fit of the features to the model or it may be based on an accuracy of the model itself. For example transition or device models for some devices may be known to produce more or less accurate results than transition or device models for other devices.

In some implementations models may be trained for determining a confidence level of an output of a notification event model. For example a notification event model may be applied to a wide variety of data sets where some of the data corresponds to a true notification event and some of the data corresponds to no notification event or a different type of notification event. By comparing different error types e.g. false alarms and misses a model can be created to determine a confidence level of the output of a notification event model.

The notification may be sent to the user in a variety of ways and according to the preferences of the user. For example a user may receive events through phone calls e.g. describing the event with recorded audio or text to speech through text messages e.g. email or SMS via an interface of a home automation device in the house e.g. a NEST thermostat or security system controller via an interface of an appliance or by accessing a web page or an application such as an application for a mobile device. A web page or application may have an event log or event history that presents information about a sequence of events such as the event and where or when the event occurred.

In some implementations information obtained from power monitors may be shared with third parties either anonymized or with the users permission . For example electric utilities may benefit from understanding the types of power consumed by users. Where many users are installing a new type of device e.g. a dishwasher that has different load properties e.g. inductive instead of resistive then the electric utility may be able to improve its services.

In some implementations information about electricity usage of devices may be transmitted to a user device as described in the following clauses and illustrated by .

1. A method for providing information about a plurality of devices in a building the method comprising 

retrieving first information from a data store using the identifier wherein the first information comprises historical information about a first device and a second device 

receiving second information from a power monitoring device wherein the second information comprises real time information about power consumption of a third device at a first time and about power consumption of a fourth device at the first time and

using at least one of the first information and the second information to determine that a device needs maintenance or that a part of the device needs to be replaced 

transmit information to the user device indicating that the device needs maintenance or that the part of the device needs to be replaced.

using at least one of the first information and the second information to determine a recommendation for conserving energy 

4. The method of clause 3 wherein using at least one of the first information and the second information to determine a recommendation for conserving energy comprises using an expert system.

wherein transmitting the first information to the user device comprises transmitting the first information using the first network connection and

wherein transmitting the second information to the user device comprises transmitting the second information using the second network connection.

6. The method of clause 1 wherein the first information comprises information about a state change of the first device.

7. The method of clause 1 wherein transmitting the second information to the user device comprises transmitting the information without significant delay from the first time.

at least one server computer comprising at least one processor and at least one memory the at least one server computer configured to 

use at least one of the first information and the second information to determine information about a comparison between power usage by a first building and by a second building or between the first building over a first time period and the first building over a second time period 

use at least one of the first information and the second information to determine the occurrence of an event in a building comprising the plurality of devices 

11. The system of clause 10 wherein the at least one server computer is further configured to transmit the information about the event as a notification to a device.

12. The system of clause 8 wherein the at least one server computer comprises a first server computer and a second server computer the first information is transmitted by the first sever computer and the second information is transmitted by the second server computer. 13. The system of clause 8 wherein at least a portion of the first information was previously received from the second client device. 14. The system of clause 8 wherein the second information is transmitted to the first client device without significant delay from the first time. 15. A non transitory computer readable medium comprising computer executable instructions that when executed cause at least one processor to perform actions comprising 

receiving first information via the first network connection wherein the first information comprises historical information about a first device and

receiving second information via the second network connection wherein the second information comprises real time information about power consumption of a second device at a first time.

16. The computer readable medium of clause 15 wherein the instructions further cause the at least one processer to perform actions comprising presenting the first information and the second information to a user.

17. The computer readable medium of clause 15 wherein the first network connection is with a first server computer and the second network connection is with a second server computer.

18. The computer readable medium of clause 15 wherein the first information comprises information about a state change of the first device.

19. The computer readable medium of clause 15 wherein the second information is received without significant delay from the first time.

20. The computer readable medium of clause 15 wherein the instructions further cause the at least one processer to perform actions comprising 

21. The computer readable medium of clause 15 wherein the instructions further cause the at least one processer to perform actions comprising 

receiving third information via the first network connection wherein the third information comprises historical information about the second device and

receiving fourth information via the second network connection wherein fourth information comprises real time information about power consumption of the first device at the first time.

In some implementations information about electricity usage of devices may be presented to a user as described in the following clauses and as illustrated in .

1. A method for presenting on a user device information about electricity usage of a plurality of devices the method comprising 

receiving first power consumption information corresponding to power consumption of a first device and second power consumption information corresponding to power consumption of a second device wherein the first power consumption information and the second power consumption information correspond to power consumption at substantially a first time 

presenting the first power information and second power information on a first portion of a display of the user device using a first graphical representation corresponding to the first power consumption information and a second graphical representation corresponding to the second power consumption information 

receiving first device event information corresponding to a change in device state for a third device and second device event information corresponding to a change in device state for a fourth device and

presenting the first device event information and the second device event information on a second portion of the display of the device.

2. The method of clause 1 wherein the first graphical representation includes a name of the first device the first graphical representation includes a circle and an area of the circle corresponds to the first power information.

3. The method of clause 1 wherein the first power consumption information corresponds to an amount of energy consumed by the first device during a first time interval a peak power consumption during the first time interval or an average power consumption during the first time interval. 4. The method of clause 1 further comprising 

receiving third power consumption information corresponding to power consumption of the first device and fourth power consumption information corresponding to power consumption of the second device wherein the third power consumption information and the fourth power consumption information correspond to power consumption at substantially a second time 

modifying the first graphical representation to correspond to the third power consumption information and

modifying the second graphical representation to correspond to the fourth power consumption information.

5. The method of clause 1 wherein the first power consumption information is received without significant delay from the first time.

6. The method of clause 1 wherein presenting the first device event information and the second device event information comprises presenting the first device event information and the second device event information in chronological order.

7. The method of clause 1 wherein the first device event information comprises a first time and a name of the third device.

8. The method of clause 1 wherein the first device event information comprises at least one of an indication that the first device was turned on an indication that the first device was turned off a number of times the first device was used over a first time period an indication that the first device has completed a task an amount of time the first device has been on a suggested action for a user to conserve energy with the first device an indication that the first device needs maintenance an indication that the first device should be replaced or an indication that a component of the first device is broken. 9. The method of clause 1 further comprising 

receiving third power consumption information corresponding to power consumption of the third device and fourth power consumption information corresponding to power consumption of the fourth device wherein the third power consumption information and the fourth power consumption information correspond to power consumption at substantially a first time and

receiving third device event information corresponding to a change in device state for the first device and fourth device event information corresponding to a change in device state for the second device.

10. A user device for presenting information about electricity usage of a plurality of devices the device comprising 

at least one memory storing processor executable instructions that when executed by the at least one processor cause the at least one processor to 

receive via the network interface a first number of watts consumed by a plurality of devices at substantially the first time 

receive via the network interface a second number of watts consumed by the plurality of devices at substantially the second time and

16. A non transitory computer readable medium comprising computer executable instructions that when executed cause one or more processors to perform actions comprising 

receiving first power consumption information corresponding to power consumption of a first device wherein the first power consumption information corresponds to power consumption at substantially a first time 

presenting the first power consumption information on a display using a first graphical representation corresponding to the first power consumption information 

presenting in response to receiving the first user input first historical power consumption information corresponding to a first time period and second historical power consumption information corresponding to a second time period.

17. The non transitory computer readable medium of clause 16 wherein the first user input comprises requesting historical power consumption information about the first device or a plurality of devices.

18. The non transitory computer readable medium of clause 16 wherein presenting first historical power consumption information corresponding to a first time period and second historical power consumption information corresponding to a second time period comprises presenting at least one of a bar chart or a line chart. 19. The non transitory computer readable medium of clause 16 wherein the first time period corresponds to a day a week a month or a year. 20. The non transitory computer readable medium of clause 16 the actions further comprising 

receiving second power consumption information corresponding to power consumption of the first device wherein the second power consumption information corresponds to power consumption at substantially a second time 

modifying the first graphical representation to correspond to the second power consumption information.

presenting in response to receiving the second user input third historical power consumption information corresponding to a proportion of power used by a first device and fourth historical power consumption information corresponding to a proportion of power used by a second device.

In some implementations information about electricity usage of devices may be transmitted to a user device using a network architecture as described in the following clauses and illustrated in .

1. A method for providing information about a plurality of devices in a building the method performed by a power monitoring device in the building and comprising 

establishing a first network connection between the power monitoring device and a first server computer wherein the first network connection is maintained when not in use 

determining that a first device event occurred using an electrical signal wherein the electrical signal comprises at least one of a voltage signal a current signal a power signal or a reactive power signal 

transmitting information about the first device event to a second server computer using a second network connection wherein the second network connection is closed after transmitting the information about the first device event 

receiving a request from the first server via the first network connection to provide real time information about power consumption of the plurality of devices in the building 

transmitting to the first server via the first network connection the information about power consumption of the plurality of devices 

receiving a request from the first server via the first network connection to stop providing real time information about power consumption of the plurality devices in the building and

2. The method of clause 1 wherein the first device event corresponds to a device of the plurality of devices transitioning from an on state to an off state or transitioning from an off state to an on state.

3. The method of clause 1 wherein the electrical signal is obtained using at least one of a voltage sensor or a current sensor.

4. The method of clause 1 wherein the information about power consumption of the plurality of devices at a first time comprises an amount of energy consumed by the first device over a time period.

establishing a third network connection between the power monitoring device and the third server computer wherein the third network connection is maintained when not in use.

6. The method of clause 1 wherein transmitting information about power consumption of the plurality of devices comprises transmitting the information without significant delay from the first time.

determining that a first device event occurred comprises processing electrical events from the electrical signal using a first processing mode and

determining information about power consumption of the plurality of devices at a first time comprises processing electrical events from the electrical signal using a second processing mode.

8. A system for providing information about a plurality of devices in a building the system comprising 

a first server computer comprising at least one processor and at least one memory the first server computer configured to 

10. The system of clause 8 wherein the first server computer is further configured to modify the first information before transmitting to the second client computer.

11. The system of clause 8 wherein the first client computer comprises a power monitor that receives electrical signals from an electrical panel and the second client computer is a user device.

12. The system of clause 8 further comprising a third server computer wherein the first server computer is further configured to transmit to the first client computer an instruction to disconnect from the first server computer and connect to the third server computer. 13. The system of clause 8 wherein the first server is further configured to transmit to the second client computer the first information without significant delay from the first time. 14. A non transitory computer readable medium comprising computer executable instructions that when executed cause at least one processor to perform actions comprising 

establishing a first network connection between the device and a first server computer wherein the first network connection is maintained when not in use 

receiving a request from the first server via the first network connection to provide real time information about power consumption of the plurality of devices in the building 

transmitting to the first server via the first network connection the information about power consumption of the plurality of devices 

receiving a request from the first server via the first network connection to stop providing real time information about power consumption of the plurality of devices in the building and

15. The computer readable medium of clause 14 wherein the processor executable instructions further cause the at least one processor to perform actions comprising 

transmitting information about the first device event to the second server computer using the second network connection and

16. The computer readable medium of clause 14 wherein the electrical signal is obtained using at least one of a voltage sensor or a current sensor.

17. The computer readable medium of clause 14 wherein the information about power consumption of the plurality of devices at a first time comprises an amount of energy consumed by the first device over a time period.

18. The computer readable medium of clause 14 wherein the processor executable instructions further cause the at least one processor to perform actions comprising 

receiving a request from the first server computer to disconnect and connect to a third server computer 

establishing a third network connection between the device and the third server computer wherein the third network connection is maintained when not in use.

19. The computer readable medium of clause 14 wherein the processor executable instructions cause the at least one processor to perform actions comprising transmitting information about power consumption of the plurality of devices without significant delay from the first time. 20. The computer readable medium of clause 15 wherein the processor executable instructions further cause the at least one processor to perform actions comprising 

determining that a first device event occurred comprises processing electrical events from an electrical signal using a first processing mode and

determining information about power consumption of the plurality of devices at a first time comprises processing electrical events from the electrical signal using a second processing mode.

In some implementations device events may be determined as described in the following clauses and illustrated in .

1. A method for determining state changes of devices in a building the method performed by a monitoring device in the building the method comprising 

receiving an electrical signal wherein the electrical signal corresponds to electrical usage of a plurality of devices and wherein the electrical signal comprises at least one of voltage signal a current signal a power signal or a reactive power signal 

identifying an electrical event in the electrical signal wherein the electrical event corresponds to a first time 

computing a first feature using a first portion of the electrical signal wherein the first portion comprises the first time 

computing a second feature using a second portion of the electrical signal wherein the second portion comprises the first time and wherein an end time of the second portion is later than an end time of the first portion 

the first processing further comprises transmitting to a first server computer first information about the first device and the first state change and

the second processing further comprises transmitting to a second server computer second information about i the first device and the first state change or ii the second device and the second state change.

5. The method of clause 1 wherein the first processing further comprises computing the first score using a transition model that corresponds to a state change of an element of the first device and a directed graph describing a plurality of state changes of the first device. 6. The method of clause 1 wherein the first processing further comprises selecting the first device and the first state change by generating a directed graph with a plurality of nodes wherein a first node of the graph corresponds to the first device and the first state change. 7. The method of clause 4 wherein the first processing further comprises transmitting the first information to the first server without significant delay from the first time. 8. A monitoring device for determining state changes of devices in a building the device comprising 

at least one memory storing processor executable instructions that when executed by the at least one processor cause the at least one processor to 

the first processing further comprises transmitting to a first server computer first information about the first device and the first state change and

the second processing further comprises transmitting to a second server computer second information about i the first device and the first state change or ii the second device and the second state change.

12. The monitoring device of clause 8 wherein the first processing further comprises computing the first score using a transition model that corresponds to a state change of an element of the first device and a directed graph describing a plurality of state changes of the first device. 13. The monitoring device of clause 8 wherein the first processing further comprises selecting the first device and the first state change by generating a directed graph with a plurality of nodes wherein a first node of the graph corresponds to the first device and the first state change. 14. The monitoring device of clause 11 wherein the first processing further comprises transmitting the first information to the first server without significant delay from the first time. 15. A non transitory computer readable medium comprising computer executable instructions that when executed cause at least one processor to perform actions comprising 

receiving an electrical signal wherein the electrical signal corresponds to electrical usage of a plurality of devices 

identifying an electrical event in the electrical signal wherein the electrical event corresponds to a first time 

computing a first feature using a first portion of the electrical signal wherein the first portion comprises the first time 

computing a second feature using a second portion of the electrical signal wherein the second portion comprises the first time and wherein an end time of the second portion is later than an end time of the first portion 

the first processing further comprises transmitting to a first server computer first information about the first device and the first state change and

the second processing further comprises transmitting to a second server computer second information about i the first device and the first state change or ii the second device and the second state change.

19. The computer readable medium of clause 15 wherein the first processing further comprises computing the first score using a transition model that corresponds to a state change of an element of the first device and a directed graph describing a plurality of state changes of the first device. 20. The computer readable medium of clause 18 wherein the first processing further comprises transmitting the first information to the first server without significant delay from the first time. 21. The computer readable medium of claim wherein the first information is used to provide real time information about the first device to a user and the second information is used to provide historical information about the first device or the second device to the user.

In some implementations devices may be discovered as described in the following clauses and as illustrated in .

obtaining first information about plurality of electrical events wherein the first information comprises a plurality of features for each electrical event 

processing the first information with a first model to generate a first score wherein the first model comprises a first plurality of states and wherein the first model corresponds to a first class of devices 

processing the first information with a second model to generate a second score wherein the second model comprises a second plurality of states and wherein the second model corresponds to a second class of devices 

3. The method of clause 1 wherein the first information is received from a client device and the second model is transmitted to the client device.

wherein selecting a path from the graph comprises selecting a path of the plurality of paths with a highest score.

generating second information from the first information by removing information corresponding to an electrical event that matches a state of the second model 

processing the second information with a third model to generate a third score wherein the third model comprises a third plurality of states and

7. The method of clause 1 wherein the first model and the second model are selected based on information provided by a user.

In some implementations house specific models may be generated as described in the following clauses and as illustrated in .

transmitting a first model to a client device wherein the first model corresponds to a first class of devices 

receiving first information about a first plurality of electrical events from the client device wherein each of the first plurality of electrical events is associated with the first model 

selecting a second model using the first information wherein the second model corresponds to a specific device or a second class of devices and

receiving second information about a second plurality of electrical events from the client device wherein each of the second plurality of electrical events is associated with the second model 

receiving second information about a second plurality of electrical events from the client device wherein each of the second plurality of electrical events is associated with the second model 

receiving third information about a third plurality of electrical events from a second client device wherein each of the third plurality of electrical events is associated with the second model and

5. The method of clause 1 wherein selecting the second model comprises selecting the second model from a plurality of models using a score generated by processing the first information with the second model.

7. The method of clause 1 wherein the specific device corresponds to a version of a device by a manufacturer.

In some implementations device events may be determined as described in the following clauses and as illustrated in .

processing the plurality of features with a first model to generate a first score wherein the first model corresponds to a state change of a first device 

processing the plurality of features with a second model to generate a second score wherein the second model corresponds to a state change of a second device 

adding a second node to the graph wherein the second node corresponds to the state change of the first device and wherein the second node follows the first node and

adding a third node to the graph wherein the third node corresponds to the state change of the second device and wherein the third node follows the first node.

2. The method of clause 1 wherein the first score is generated using at least one of a transition model a wattage model or a prior model.

3. The method of clause 1 further comprising removing the third node from the graph based at least in part on the second score.

4. The method of clause 1 wherein the first node indicates a state for each of a plurality of devices.

5. The method of clause 1 wherein the first model is selected using a first device model for the first device and wherein the first device model indicates allowable state transitions for the first device.

processing the second plurality of features with a third model to generate a third score wherein the third model corresponds to a state change of a third device 

processing the plurality of features with a fourth model to generate a fourth score wherein the fourth model corresponds to a state change of a fourth device 

adding a fourth node to the graph wherein the fourth node corresponds to the state change of the third device and wherein the fourth node follows the second node and

adding a fifth node to the graph wherein the fifth node corresponds to the state change of the fourth device and wherein the fifth node follows the second node.

While only a few embodiments of the present invention have been shown and described it will be obvious to those skilled in the art that many changes and modifications may be made thereunto without departing from the spirit and scope of the present disclosure as described in the following claims. All patent applications and patents both foreign and domestic and all other publications referenced herein are incorporated herein in their entireties to the full extent permitted by law.

The methods and systems described herein may be deployed in part or in whole through a machine that executes computer software program codes and or instructions on a processor. The processor may be part of a server cloud server client network infrastructure mobile computing platform stationary computing platform or other computing platform. A processor may be any kind of computational or processing device capable of executing program instructions codes binary instructions and the like. The processor may be or include a signal processor digital processor embedded processor microprocessor or any variant such as a co processor math co processor graphic co processor communication co processor and the like and the like that may directly or indirectly facilitate execution of program code or program instructions stored thereon. In addition the processor may enable execution of multiple programs threads and codes. The threads may be executed simultaneously to enhance the performance of the processor and to facilitate simultaneous operations of the application. By way of implementation methods program codes program instructions and the like described herein may be implemented in one or more thread. The thread may spawn other threads that may have assigned priorities associated with them the processor may execute these threads based on priority or any other order based on instructions provided in the program code. The processor may include memory that stores methods codes instructions and programs as described herein and elsewhere. The processor may access a storage medium through an interface that may store methods codes and instructions as described herein and elsewhere. The storage medium associated with the processor for storing methods programs codes program instructions or other type of instructions capable of being executed by the computing or processing device may include but may not be limited to one or more of a CD ROM DVD memory hard disk flash drive RAM ROM cache and the like.

A processor may include one or more cores that may enhance speed and performance of a multiprocessor. In embodiments the process may be a dual core processor quad core processors other chip level multiprocessor and the like that combine two or more independent cores called a die .

The methods and systems described herein may be deployed in part or in whole through a machine that executes computer software on a server cloud server client firewall gateway hub router or other such computer and or networking hardware. The software program may be associated with a server that may include a file server print server domain server internet server intranet server and other variants such as secondary server host server distributed server and the like. The server may include one or more of memories processors computer readable media storage media ports physical and virtual communication devices and interfaces capable of accessing other servers clients machines and devices through a wired or a wireless medium and the like. The methods programs or codes as described herein and elsewhere may be executed by the server. In addition other devices required for execution of methods as described in this application may be considered as a part of the infrastructure associated with the server.

The server may provide an interface to other devices including without limitation clients other servers printers database servers print servers file servers communication servers distributed servers and the like. Additionally this coupling and or connection may facilitate remote execution of program across the network. The networking of some or all of these devices may facilitate parallel processing of a program or method at one or more location without deviating from the scope of the disclosure. In addition any of the devices attached to the server through an interface may include at least one storage medium capable of storing methods programs code and or instructions. A central repository may provide program instructions to be executed on different devices. In this implementation the remote repository may act as a storage medium for program code instructions and programs.

The software program may be associated with a client that may include a file client print client domain client internet client intranet client and other variants such as secondary client host client distributed client and the like. The client may include one or more of memories processors computer readable media storage media ports physical and virtual communication devices and interfaces capable of accessing other clients servers machines and devices through a wired or a wireless medium and the like. The methods programs or codes as described herein and elsewhere may be executed by the client. In addition other devices required for execution of methods as described in this application may be considered as a part of the infrastructure associated with the client.

The client may provide an interface to other devices including without limitation servers other clients printers database servers print servers file servers communication servers distributed servers and the like. Additionally this coupling and or connection may facilitate remote execution of program across the network. The networking of some or all of these devices may facilitate parallel processing of a program or method at one or more location without deviating from the scope of the disclosure. In addition any of the devices attached to the client through an interface may include at least one storage medium capable of storing methods programs applications code and or instructions. A central repository may provide program instructions to be executed on different devices. In this implementation the remote repository may act as a storage medium for program code instructions and programs.

The methods and systems described herein may be deployed in part or in whole through network infrastructures. The network infrastructure may include elements such as computing devices servers routers hubs firewalls clients personal computers communication devices routing devices and other active and passive devices modules and or components as known in the art. The computing and or non computing device s associated with the network infrastructure may include apart from other components a storage medium such as flash memory buffer stack RAM ROM and the like. The processes methods program codes instructions described herein and elsewhere may be executed by one or more of the network infrastructural elements.

The methods program codes and instructions described herein and elsewhere may be implemented on a cellular network having multiple cells. The cellular network may either be frequency division multiple access FDMA network or code division multiple access CDMA network. The cellular network may include mobile devices cell sites base stations repeaters antennas towers and the like. The cell network may be a GSM GPRS 3G EVDO mesh or other networks types.

The methods programs codes and instructions described herein and elsewhere may be implemented on or through mobile devices. The mobile devices may include navigation devices cell phones mobile phones mobile personal digital assistants laptops palmtops netbooks pagers electronic books readers music players and the like. These devices may include apart from other components a storage medium such as a flash memory buffer RAM ROM and one or more computing devices. The computing devices associated with mobile devices may be enabled to execute program codes methods and instructions stored thereon. Alternatively the mobile devices may be configured to execute instructions in collaboration with other devices. The mobile devices may communicate with base stations interfaced with servers and configured to execute program codes. The mobile devices may communicate on a peer to peer network mesh network or other communications network. The program code may be stored on the storage medium associated with the server and executed by a computing device embedded within the server. The base station may include a computing device and a storage medium. The storage device may store program codes and instructions executed by the computing devices associated with the base station.

The computer software program codes and or instructions may be stored and or accessed on machine readable media that may include computer components devices and recording media that retain digital data used for computing for some interval of time semiconductor storage known as random access memory RAM mass storage typically for more permanent storage such as optical discs forms of magnetic storage like hard disks tapes drums cards and other types processor registers cache memory volatile memory non volatile memory optical storage such as CD DVD removable media such as flash memory e.g. USB sticks or keys floppy disks magnetic tape paper tape punch cards standalone RAM disks Zip drives removable mass storage off line and the like other computer memory such as dynamic memory static memory read write storage mutable storage read only random access sequential access location addressable file addressable content addressable network attached storage storage area network bar codes magnetic ink and the like.

The methods and systems described herein may transform physical and or or intangible items from one state to another. The methods and systems described herein may also transform data representing physical and or intangible items from one state to another such as from usage data to a normalized usage dataset.

The elements described and depicted herein including in flow charts and block diagrams throughout the figures imply logical boundaries between the elements. However according to software or hardware engineering practices the depicted elements and the functions thereof may be implemented on machines through computer executable media having a processor capable of executing program instructions stored thereon as a monolithic software structure as standalone software modules or as modules that employ external routines code services and so forth or any combination of these and all such implementations may be within the scope of the present disclosure. Examples of such machines may include but may not be limited to personal digital assistants laptops personal computers mobile phones other handheld computing devices medical equipment wired or wireless communication devices transducers chips calculators satellites tablet PCs electronic books gadgets electronic devices devices having artificial intelligence computing devices networking equipments servers routers and the like. Furthermore the elements depicted in the flow chart and block diagrams or any other logical component may be implemented on a machine capable of executing program instructions. Thus while the foregoing drawings and descriptions set forth functional aspects of the disclosed systems no particular arrangement of software for implementing these functional aspects should be inferred from these descriptions unless explicitly stated or otherwise clear from the context. Similarly it will be appreciated that the various steps identified and described above may be varied and that the order of steps may be adapted to particular applications of the techniques disclosed herein. All such variations and modifications are intended to fall within the scope of this disclosure. As such the depiction and or description of an order for various steps should not be understood to require a particular order of execution for those steps unless required by a particular application or explicitly stated or otherwise clear from the context.

The methods and or processes described above and steps thereof may be realized in hardware software or any combination of hardware and software suitable for a particular application. The hardware may include a general purpose computer and or dedicated computing device or specific computing device or particular aspect or component of a specific computing device. The processes may be realized in one or more microprocessors microcontrollers embedded microcontrollers programmable digital signal processors or other programmable device along with internal and or external memory. The processes may also or instead be embodied in an application specific integrated circuit a programmable gate array programmable array logic or any other device or combination of devices that may be configured to process electronic signals. It will further be appreciated that one or more of the processes may be realized as a computer executable code capable of being executed on a machine readable medium.

The computer executable code may be created using a structured programming language such as C an object oriented programming language such as C or any other high level or low level programming language including assembly languages hardware description languages and database programming languages and technologies that may be stored compiled or interpreted to run on one of the above devices as well as heterogeneous combinations of processors processor architectures or combinations of different hardware and software or any other machine capable of executing program instructions.

Thus in one aspect each method described above and combinations thereof may be embodied in computer executable code that when executing on one or more computing devices performs the steps thereof. In another aspect the methods may be embodied in systems that perform the steps thereof and may be distributed across devices in a number of ways or all of the functionality may be integrated into a dedicated standalone device or other hardware. In another aspect the means for performing the steps associated with the processes described above may include any of the hardware and or software described above. All such permutations and combinations are intended to fall within the scope of the present disclosure.

