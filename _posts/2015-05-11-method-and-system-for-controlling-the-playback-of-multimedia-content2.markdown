---

title: Method and system for controlling the playback of multimedia content
abstract: The present disclosure provides method and system for controlling the playback of multimedia content. The method includes: enumerating currently running multimedia input sources to determine a number of currently running multimedia input sources by calling a system application programming interface (API), each multimedia input source having a corresponding multimedia player; determining, when the number of the currently running multimedia input sources is greater than 1, that the multimedia input sources conflict; and controlling, when the multimedia input sources conflict, a corresponding multimedia player to pause or close so as to remove the conflict. According to the present disclosure, when an audio conflict occurs, a corresponding multimedia player can be automatically paused or closed, or a user can be automatically notified of positions of multimedia players, which greatly improves convenience of operating the multimedia player when the audio conflict occurs and brings better experience to the user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09639321&OS=09639321&RS=09639321
owner: TENCENT TECHNOLOGY (SHENZHEN) COMPANY LIMITED
number: 09639321
owner_city: Shenzhen, Guangdong Province
owner_country: CN
publication_date: 20150511
---
This application is a continuation application of PCT Patent Application No. PCT CN2013 084167 entitled METHOD AND SYSTEM FOR MONITORING THE PLAYBACK OF MULTIMEDIA CONTENT filed on Sep. 25 2013 which claims priority to Chinese Patent Application No. 201210457152.5 filed with the Chinese Patent Office on Nov. 14 2012 and entitled METHOD AND SYSTEM FOR MONITORING THE PLAYBACK OF MULTIMEDIA CONTENT both of which are incorporated by reference in their entirety.

The present disclosure relates to computer technologies and in particular to method and system for controlling the playback of multimedia content.

When a user simultaneously uses multiple types of multimedia players an audio conflict is caused and audiovisual experience is lowered. Therefore before starting an extra multimedia player the user needs to manually pause or exit another player.

However currently many multimedia players are embedded in web pages. When opening a web page a user opens a multimedia player in the web page. Especially when a user opens multiple web pages among which some web pages are embedded with multimedia players and some web pages are not embedded with multimedia players when an audio conflict occurs the user needs to manually check the web pages one by one to determine a page of an audio source and then pause or close the audio to eliminate the audio conflict. It can be seen that this manner is very inconvenient in operation.

Therefore a method for intelligently determining an audio conflict and controlling a multimedia player is urgently needed so as to solve a problem that it is inconvenient to operate the multimedia player when the audio conflict occurs.

An embodiment of the present disclosure is to provide method and system for controlling the playback of multimedia content so as to solve a problem that it is inconvenient to operate a multimedia player when an audio conflict occurs.

enumerating currently running multimedia input sources to determine a number of currently running multimedia input sources by calling a system application programming interface API each multimedia input source having a corresponding multimedia player 

determining according to the number of the currently running multimedia input sources whether the multimedia input sources conflict further including determining when the number of the currently running multimedia input sources is greater than 1 that the multimedia input sources conflict and

controlling when the multimedia input sources conflict a corresponding multimedia player to pause or close so as to remove the conflict.

The present disclosure further provides a computing device having one or more processors memory and one or more program modules stored in the memory and to be executed by the one or more processors the one or more program modules further including 

a process monitoring module configured to enumerate currently running multimedia input sources to determine a number of currently running multimedia input sources by calling a system application programming interface API each multimedia input source having a corresponding multimedia player 

a conflict determining module configured to determine according to the number of the currently running multimedia input sources whether the multimedia input sources conflict further including determining when the number of the currently running multimedia input sources is greater than 1 that the multimedia input sources conflict and

a control module configured to control when the multimedia input sources conflict a corresponding multimedia player to pause or close so as to remove the conflict.

The present disclosure further provides a non transitory computer readable storage medium storing a program module group for execution by one or more processors of a computing device having memory for storing programs to be executed by the one or more processors the program module group further including 

a process monitoring module configured to enumerate currently running multimedia input sources to determine a number of currently running multimedia input sources by calling a system application programming interface API each multimedia input source having a corresponding multimedia player 

a conflict determining module configured to determine according to the number of the currently running multimedia input sources whether the multimedia input sources conflict further including determining when the number of the currently running multimedia input sources is greater than 1 that the multimedia input sources conflict and

a control module configured to control when the multimedia input sources conflict a corresponding multimedia player to pause or close so as to remove the conflict.

In the present disclosure when a multimedia conflict occurs a corresponding multimedia player can be automatically paused or closed or a user can be automatically notified of positions of multimedia players and the user is instructed to manually close or pause a corresponding multimedia player which greatly improves convenience of operating the multimedia player when the multimedia conflict occurs and brings better experience to the user.

The foregoing description is merely an overview of the technical solutions of the present disclosure. In order to understand the technical means of the present disclosure more clearly implementation can be performed according to content of the specification. Moreover to make the foregoing and other objectives features and advantages of the present disclosure more comprehensible description is made below in detail by using preferred embodiments and with reference to the accompanying drawings.

To further explain the technical means used in the present disclosure for achieving the intended objectives and the effects thereof method and system for controlling the playback of multimedia content and specific implementation manners methods steps and effects thereof are described below in detail with reference to the accompanying drawings and preferred embodiments.

The foregoing and other technical content features and effects of the present disclosure can be clearly presented below in detailed description with reference to preferred embodiments of the reference drawings. The technical means used in the present disclosure for achieving the intended objectives and the effects thereof can be further and specifically learnt according to descriptions of specific implementation manners. However the accompanying drawings are for reference and description only and are not intended to limit the present disclosure.

According to the multimedia playback controlling method and system in the present disclosure a problem of a conflict among multiple players can be solved by monitoring multimedia input sources which is not only applicable to video monitoring but also applicable to audio monitoring. The present disclosure is specifically described below by using audio monitoring as an example. Refer to which is a flowchart of a multimedia playback controlling method according to an embodiment of the present disclosure. The method includes the following steps 

S Enumerate currently running multimedia input sources to determine a number of currently running multimedia input sources by calling a system API each multimedia input source having a corresponding multimedia player.

An API is a predefined function and an objective of the API is to provide an interface for software so as to support performing of system functions by the software. That is a development engineer compiles a monitoring program in advance and monitors a system process by calling the API. For example for a windows platform all audio streams that are currently being played are enumerated by calling an interface function that is windows API IAudioSessionManager2 an audio session management function of the API .

S Determine according to the number of the currently running multimedia input sources whether the multimedia input sources conflict. More specifically when the number of the running multimedia input sources enumerated in step S is greater than 1 it is determined that a conflict exists.

S Control when multiple audio input sources conflict a corresponding multimedia player to pause or close so as to remove the conflict.

An audio input source may be associated with independent multimedia player software or come from a multimedia player embedded in a web page. When at least two audio input sources appear an audio conflict occurs and a corresponding multimedia player needs to be paused or closed. Because there are many types of multimedia players different types of multimedia players have different program control principles. An action of automatically pausing a multimedia player needs to be implemented by compiling corresponding code by technical personnel while a manufacturer of one multimedia player usually only knows control principles of multimedia players of a same type for example company A usually can only perform compilation on related multimedia players belonging to the company . Therefore a specific control action in the present disclosure is preferably performed according to whether conflicting multimedia players belong to a same type.

Specifically an IAudioSessionControl2 object a session control object may be first acquired by calling an IAudioSessionManager2 function an audio session management function of the API of the API an ID of a process is acquired by using a GetProcessId function a process acquiring function of the IAudioSessionControl2 object then a name of the process is acquired by using GetModuleBaseName a name acquiring function and it is determined by comparing whether names of processes corresponding to multimedia players belong to a same type whether the currently running multimedia players are multimedia players of a same type. Definitely in addition to names of processes a type of a player can also be determined by comparing other process information.

For example when processes of multimedia players are multiple running instances of a same multimedia player it is determined that these multimedia players are of a same type.

 1 When multiple conflicting audio input sources are associated with a same type of multimedia player all other multimedia players except a last running multimedia player are paused or closed by calling the system API through the external control for example when a conflict occurs a player is directly controlled to pause or close by calling an interface that is a COM interface or an instruction parameter interface . Pausing or closing all other multimedia players except the last running multimedia player is a preferred implementation manner repeatedly used in this embodiment. Definitely one of the multimedia players may also be reserved according to presetting and other multimedia players are closed.

 2 When conflicting multimedia input sources are associated with different types of multimedia players all other multimedia players except the last running multimedia player are closed by calling a termination function TerminateProcess API of the system API.

 3 When conflicting multiple audio input sources are associated with different types of multimedia players the process information of the multimedia players is provided to instruct a user to pause or close a corresponding multimedia player. For example the process information of the currently running multimedia players is enumerated and the user is prompted with the process information of the currently running multimedia players in a displaying manner and the like.

If the multimedia player is closed in a system process in manner 2 data in the player may be lost and therefore when multiple audio input sources conflict it is reliable to select manner 3 and an audio conflict may be eliminated in a targeted manner according to a user intention.

According to the multimedia playback controlling method in the present disclosure when a multimedia conflict occurs a corresponding multimedia player can be automatically paused or closed or a user is automatically notified of positions of multimedia players and the user is instructed to manually close or pause a corresponding multimedia player which greatly improves convenience of operating the multimedia player when an audio conflict occurs.

The present disclosure further provides a multimedia playback controlling system. Referring to the multimedia playback controlling system includes a process monitoring module a control module and a conflict determining module . The process monitoring module is configured to enumerate currently running audio input sources to determine a number of currently running multimedia input sources by calling a system API for example by calling an API IAudioSessionManager2 that is an audio session management function of an API . The monitoring module transmits information about the enumerated audio input sources to the conflict determining module in real time. The conflict determining module determines according to the number of the currently running audio input sources whether the audio input sources conflict. Generally if the number of the enumerated running audio input sources is greater than 1 it is determined that a conflict exists. If determining that existence of at least two audio input sources causes the audio conflict the conflict determining module sends a signal of the audio conflict to the control module and the control module controls a corresponding multimedia player to pause or close so as to eliminate the system audio conflict.

The audio input source may be associated with independent multimedia player software or may be generated by a multimedia player embedded in a web page. When the audio conflict occurs the control module may directly control by using the system process close of all other multimedia players except the last running multimedia player and in this way only the last running multimedia player runs normally that is the audio conflict is eliminated.

In some embodiments closing a multimedia player may cause data loss. Therefore the control module may further eliminate the audio conflict in another reliable manner. Refer to which is a structural diagram of a control module according to an embodiment of the present disclosure. The control module includes a first control unit a guide unit a termination unit and a type determining unit where the type determining unit further includes an object acquiring subunit a process information acquiring subunit and a comparison subunit .

Because there are many types of multimedia players different types of multimedia players have different program control principles. An action of automatically pausing or closing a multimedia player needs to be implemented by compiling corresponding code by technical personnel while a manufacturer of one multimedia player usually only knows control principles of multimedia players of a same type for example company A usually can only perform compilation on related multimedia players belonging to the company . Therefore a development engineer of the system in the present disclosure always can only perform coding control on multimedia players of one type.

Therefore when the conflict determining module determines that multiple audio input sources conflict a specific control action may be performed according to whether the conflicting multimedia players belong to a same type. The type determining unit first determines whether the running multimedia input sources are associated with a same type of multimedia player. Specifically the object acquiring subunit acquires a session control object IAudioSessionControl2 by calling a system API for example by calling an IAudioSessionManager2 function that is an audio session management function of an API . Then the process information acquiring subunit obtains process information of running multimedia players by using a process acquiring function GetProcessId of the session control object for example obtains a name of a process by calling a GetModuleBaseName function . Then the comparison subunit determines by comparing the process information whether the currently running multimedia players are multimedia players of the same type.

When the type determining unit determines that the running multimedia input sources are associated with a same type of multimedia player the first control subunit pauses or closes a corresponding multimedia player by calling the system API for example by calling a COM interface or an instruction parameter interface through external control.

When the type determining unit determines that the running multimedia input sources are associated with different types of multimedia players the guide unit enumerates and prompts process information of the currently running multimedia players and instructs the user to pause or close a corresponding multimedia player. Alternatively the termination unit terminates a corresponding multimedia player by calling a termination function TerminateProcess API of the system API.

When the method for controlling the playback of multimedia content is implemented in a form of software function modules and sold or used as an independent product the method may also be stored in a non transitory computer readable storage medium for execution by one or more processors of a computing device. A person of ordinary skill in the art may understand that all or some of the processes in the methods of the foregoing embodiments may be implemented by a computer program instructing relevant hardware. The program may be stored in a non transitory computer readable storage medium. When executed by the processor the program may include processes of the embodiments of all the foregoing methods. The storage medium may be a magnetic disk an optical disc a read only memory ROM a random access memory RAM or the like.

The above descriptions are merely preferred embodiments of the present disclosure and are not intended to limit the present disclosure in any form. Although the present disclosure has been disclosed above through the preferred embodiments the embodiments are not intended to limit the present disclosure. A person skilled in the art can make some equivalent variations alterations or modifications to the above disclosed technical content without departing from the scope of the technical solutions of the present disclosure to obtain equivalent embodiments. Any simple alteration equivalent change or modification made to the above embodiments according to the technical essence of the present disclosure without departing from the content of the technical solutions of the present disclosure shall fall within the scope of the technical solutions of the present disclosure.

