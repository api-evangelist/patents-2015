---

title: Data center management using device identification over power-line
abstract: In one embodiment, a first device (e.g., a host device or power distribution unit) stores identification information of the first device, and determines, over a power connection, when the first device is in powered connectivity with a second device (e.g., a power distribution unit or host device, respectively). The first device may then communicate, with the second device over the power connection, identification information of at least one of either the first or second device, where the communicated identification information is accessible to a third device (e.g., a server) via a data network due to the communicating over the power connection. In another embodiment, a server may determine, based on the identification information, a physical location of a power distribution unit, and may deduce, based on the physical location of the power distribution unit, that a host device is physically located at the physical location of the power distribution unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09647723&OS=09647723&RS=09647723
owner: Cisco Technology, Inc.
number: 09647723
owner_city: San Jose
owner_country: US
publication_date: 20151022
---
The present disclosure relates generally to computer networks and more particularly to data center management using device identification over power line.

Keeping track of physical devices and their location can often be a tedious and time consuming task. This is particularly the case for equipment within a data center. Keeping track can often be a complex process involving a large amount of hours spent auditing bar coding and documenting devices as they are commissioned migrated within a facility or decommissioned from a facility. As these are often performed as a manual process completed by workers there is opportunity for errors in collection of this data as well as opportunity for data to become out of date. In addition knowledge of and or control over the power state of devices in a data center has long been a difficult problem with many attempts to address such power state management leading to either overly complex systems or otherwise inefficient systems.

According to one or more embodiments of the disclosure a first device e.g. a host device or a power distribution unit stores identification information of the first device and determines over a power connection when the first device is in powered connectivity with a second device e.g. a power distribution unit or a host device respectively . The first device may then communicate with the second device over the power connection in response to the powered connectivity identification information of at least one of either the first device or the second device where the communicated identification information is accessible to a third device e.g. a server via a data network due to the communicating over the power connection.

According to one or more additional embodiments of the disclosure a server receives identification information of a host device and a power distribution unit over a data network where the host device and power distribution unit initially communicated the identification information over a power connection that provides powered connectivity from the power distribution unit to the host device. The server may then determine based on the identification information a physical location of the power distribution unit and may deduce based on the physical location of the power distribution unit that the host device is physically located at the physical location of the power distribution unit.

As will be understood by those skilled in the art a data center is a facility that stores computer systems and associated components e.g. computational telecommunications and storage systems . Often data centers use redundant or backup power supplies in addition to redundant data communications connections and other systems.

As noted above keeping track of physical devices and their location can often be a tedious and time consuming task. This is particularly the case for equipment within a data center. Keeping track can often be a complex process involving a large amount of hours spent auditing bar coding and documenting devices as they are commissioned migrated within a facility or decommissioned from a facility. As these are often performed as a manual process completed by workers there is opportunity for errors in collection of this data as well as opportunity for data to become out of date. In addition knowledge of and or control over the power state of devices in a data center has long been a difficult problem with many attempts to address such power state management leading to either overly complex systems or otherwise inefficient systems.

In addition to the above listed problems of device tracking occasionally it is necessary to conduct work on a data center s power supply. Usually this is conducted on the A side or B side separately. That is as most host devices have dual power supplies if one goes down the machine will keep operation. However if a power supply has failed or a chassis has only one power supply the owner would generally appreciate being notified that they will be impacted by the outage. Identification of these hosts is currently conducted manually. Also where a host has been incorrectly wired such that both power supplies have been connected to the same power side the owner should be identified such that the wiring can be remediated.

The techniques herein present a way for host devices to automatically identify themselves and be added to data center inventories via the use of an internal host identifier communicated with a smart PDU via power line communication. In general PDUs or cabinet PDU CDU or other types of smart power units are often deployed in a known physical location. That is PDUs will often be configured as part of a data center deployment and are left static during the operational phase of a data center. Devices will generally be connected to PDUs in the rack in which they reside associating the device to a physical location i.e. of the PDU . This will allow rapid inventory updating via an automated process as described herein. For instance as described below various administrative features become available through the techniques herein particularly opposed to manually taking inventory such as querying a smart PDU to identify hardware within a rack or determining rack space utilization rapidly and accurately as well as querying A side and B side smart PDUs in a rack to allow rapid highlighting of devices with single or failed power supplies during data center power maintenance.

Specifically according to one or more embodiments of the disclosure as described in detail below a first device e.g. a host device or a PDU stores its identification information and determines over a power connection when it is in powered connectivity with a second device e.g. a PDU or a host device respectively . The first device may then communicate with the second device over the power connection in response to the powered connectivity identification information of at least one of either the first device or the second device where the communicated identification information is accessible to a third device e.g. a server via a data network due to the communicating over the power connection.

According to one or more additional embodiments of the disclosure a server receives identification information of a host device and a PDU over a data network where the host device and power distribution unit initially communicated the identification information over a power connection that provides powered connectivity from the power distribution unit to the host device mentioned above . The server may then determine based on the identification information a physical location of the PDU and may deduce based on the physical location of the PDU that the host device is physically located at the physical location of the power distribution unit.

The network interface s contain the mechanical electrical and signaling circuitry for communicating data over links coupled to the data network . The network interfaces may be configured to transmit and or receive data using a variety of different communication protocols. Also in accordance with the techniques herein a power connection supply is configured to allow for communicating through the powered connection such as for power line communication PLC .

The processing circuitry ID module may contain data structures and or computer executable instructions executed by a processor to perform functions as described herein. Illustratively the techniques described herein may be performed by the processing circuitry as hardware software and or firmware and may be performed in conjunction with functional circuitry . It will be apparent to those skilled in the art that other processor and memory types including various computer readable media may be used to store and execute program instructions pertaining to the techniques described herein. Also while the description illustrates various processes or circuitry it is expressly contemplated that various processes may be embodied as modules configured to operate in accordance with the techniques herein e.g. according to the functionality of a similar process . Further while the processes circuitry may have been shown separately those skilled in the art will appreciate that processes may be routines or modules within other processes.

In general the techniques herein are based on communication between a host device e.g. server switch storage device computer etc. and a PDU . Host devices in particular may comprise processing circuitry that is located within the device e.g. within the chassis and that stores identification ID information for the host device. That is information about the device may be built into a frame e.g. configured statically e.g. flashed into the processing circuitry and as described below modulated and broadcast across the power line e.g. at regular intervals via the power supply or supplies in the device. Such information may comprise for example one or more of the following pieces of information about the host e.g. and stored in a database of the processing circuitry 

According to one or more embodiments herein a smart PDU may be similarly configured where the PDU s processing circuitry ID module e.g. a database of the processing circuitry may be configured with but not limited to 

Illustratively is an example of device identification over power line for data center management where two generic devices are shown e.g. one as a host device and one as a PDU . In general the connectivity over the powered connection may be based on transmitting data packets or frames where such packets frames may be exchanged among the devices using predefined power line communication protocols where a protocol consists of a set of rules defining how the devices interact with each other. In general there are several existing technologies that are able to provide data communication over power lines such as those that support Ethernet over power e.g. IEEE Std 1901 2010 . In this particular example embodiment Layer Discovery Protocol LLDP IEEE 802.1AB frames may be used over the PLC links where LLDP uses mandatory optional and organizationally specific Type Length Variable TLV fields to encode information to transmit. These TLVs can be utilized to send the identification information fields described previously.

Information contained in packets exchanged between the devices may be stored in a Management Information Base MIB which although shown in the functional circuitry may alternatively or additionally be stored within the processing circuitry ID module . The information collected by the devices may then be accessible via a data network to a server e.g. separate servers and or else a same server such as by using an application programming interface API simple network management protocol SNMP or web based system so the information can be accessed by and or collated in an external inventory database at the server s through associated data network packets frames .

Conversely as shown in an alternative embodiment requires only the PDU to communicate the information over the data network to a server . That is the host device may communicate its identification information over the power line to the PDU at which time the PDU may send this information along with its own information to an associated server . As still another alternative embodiment illustrates a situation where only the host device communicates the information over the data network to a server . Here the PDU may communicate its identification information over the power line to the host device at which time the host device may send this information along with its own information to an associated server .

Assuming there is no timeout event in step and in response to an actual change to the information in step for example the first learned instance or else other changes such as dynamic information e.g. current power utilization the local MIB may be updated in step accordingly. Note that in response to a timeout in step the MIB may also be updated e.g. noting the timeout or removing the entry in step . This learned information i.e. the identification information of the connected device and of the local device may then be sent to another device e.g. server over the data network in step . For instance as described above step may be in response to specific polling from the server or else may be uploaded updated as new information becomes available or else periodically to avoid a timeout at the servers. Note that as described below the PDU may also communicate power management messages regarding the host device with a power management system server over the data network and communicates relays those messages with the host device over the powered connection. 

According to the techniques herein therefore since the PDU is associated with a physical location and the communicated identification information accessible via the data network e.g. to server includes the associated physical location the host devices may be located inventoried by a server or other management device or accessing process application.

For instance optionally in step various levels of diagnosing may take place at the management device e.g. server such as determining based on the identification information a dual power supply issue with the host device . For instance the dual power supply issue may be based on whether the host device is in proper powered connectivity with two different PDUs such as only having one PDU supplying power to both power supplies of the host device only having power to one PDU where another power supply has no power etc. There is also the possibility for the management device to collect and report on power oversubscription based on current power utilization.

Notably dual power supply issues may also be power grid based where the redundant PDUs are not merely supplying two options for receptacles but where each of the redundant PDUs is on a different power source grid. In this manner determining a dual power issue may result in detecting which servers are connected with a single power source versus also properly having a backup power source such as by comparing the associated PDUs to knowledge of which grid source each PDU is connected to. If the two PDUs are improperly sourced by the same power grid a notification may be generated to indicate that the associated device is only backed by single power source instead of two distinct power sources e.g. in the case where a default policy requires or recommends two sources .

Further and as described in greater detail below in step the management device may optionally perform power management functions such as communicating power management messages regarding the host device with the PDU over the data network where the PDU communicates the messages with the host device over the powered connection or else simply acts on the power management message such as turning off power to the host device .

Note also that power management functions may comprise planned outages where action may entail notifying device administrators ahead of time and optionally raising an alert if a device is backed by a single power source that is going to go down.

In still another embodiment a physical host device may be hosting multiple virtual machines VMs . Based on the power state single dual and optionally also based on the service level agreement SLA for the VMs running on these host devices power management may comprise moving the VMs to another host device in the data center or perhaps notifying the VM owners about the planned outage. Note that in the case of a cloud hosted environment the VM owner is typically unaware of the physical server in that case the system may simply automatically move that VM to meet the SLA uptime availability etc. . This particular embodiment may be used to support programmable data centers with auto migration policies that include the power source as an additional variable e.g. in addition to the load on the server traffic patterns and other factors.

As such the power management functions of step may generally comprise determining that there is a planned power outage within a data center e.g. in which a given host device and PDU reside and determining based on the identification information e.g. power supply grid VM allocation policies SLAs etc. whether any advanced power based action is to be performed within the data center in response to the planned power outage e.g. notifications migrations etc. . As such the power is management function would then also comprise performing the advanced power based action by the server accordingly.

The simplified example procedure may then end in step though notably the procedure may continue to operate to receive updated information perform further polls queries administer various power management functions or diagnoses and so on.

By building the host identification component ID module into a host device host identification can now be tied to a given chassis no matter where it is placed in a data center providing the ability to easily and automatically establish a host to location linkage. illustrate examples of data center management using device identification over power line in this manner where illustrates an example data center with a plurality of racks and associated dual PDUs and . As shown each of the PDUs within the data center is identified with a number from 1 to 18 and the assumption herein is that each of the physical locations of PDUs 1 to 18 is known configured on the corresponding PDUs. As a particular host device is plugged into both PDUs 1 and 2 it can be determined that the device is located at the physical location rack of PDUs 1 and 2 .

As shown in as the host device is moved from one location to another and plugged in such as to PDUs 11 and 12 the system is updated with the new physical location based on the new exchange between host device and PDUs 11 and 12 being picked up by the external inventory database server on the next polling run across the data center and or host devices as described above. As such the only manual modification is the lifting and shifting of the hardware and plugging it into the PDU at its new location saving time and increasing the accuracy of inventories as this part of the process is carried out by the machine itself.

Since PDUs will generally be deployed in a known location and PDUs will be configured as part of a data center deployment and left static during the operational phase of a data center devices that are as they should be connected to PDUs in the rack they reside may be automatically tied to an associated physical location. The techniques herein therefore give data centers the ability to perform self inventories that are kept up to date as equipment moves within in out or between facilities. Note that this technology also has applications outside of data center facilities such as anywhere that has hosts that can be spread across a large area such as a campus manufacturing or conference facilities. It also allows data center administrators to identify what PDU a piece of equipment is plugged into so that remote power off on is easier as described below.

In addition to inventory management the techniques herein also allow for various diagnosis mechanisms such as by querying A side and B side smart PDUs in a rack to provide rapid highlighting of devices with single or failed power supplies during data center power maintenance. For example as shown in it can be determined that host device may be suffering from a power supply failure or a removed power cord if there is only one PDU 2 receiving the power connection based identification information e.g. and assuming it is known that device should have two power supplies . Alternatively as shown in it can be determined that both power supplies of the host device are improperly plugged into the same PDU 1 which can cause administrator alarms or other remedial actions.

In accordance with one or more additional or alternative embodiments herein the techniques may also be used in conjunction with off band power management networks which may generally be used to control PDUs over data networks where the PDU receives power management commands to powercycle the attached devices. Supplying the location information herein particularly the ability to dynamically track this information is crucial for operation of such power management e.g. assuming the specific power port plug receptacle is also identifiable . Additionally however the techniques herein may be used to extend the power management ability of this power management network. For example in this particular extended embodiment the PDU would provide access to the power management network over the data network and the PDU itself can act as a switching device which carries frames e.g. Ethernet frames over the last hop to the device endpoints over the power line connection.

It should be noted that while certain steps within procedures and may be optional as described above the steps shown in and are merely examples for illustration and certain other steps may be included or excluded as desired. Further while a particular order of the steps is shown this ordering is merely illustrative and any suitable arrangement of the steps may be utilized without departing from the scope of the embodiments herein. Moreover while procedures and are described separately certain steps from each procedure may be incorporated into each other procedure and the procedures are not meant to be mutually exclusive.

The techniques described herein therefore provide for data center management using device identification over power line. In particular the techniques herein provide a mechanism for PDUs power strips in a data center rack to help identify what devices are in the associated rack by communicating over the powered connection and through communication of the device inventory upstream to a management solution. This marriage of systems enables a greater intersection of data points for analytics and provides various benefits that come from having an accurate inventory of devices and their locations. For instance with the techniques herein a device only needs to be plugged in to power to be audited allowing for rapid identification of location and quantity of hardware within a data center and to quickly determine the power state of such devices e.g. an improper configuration power supply failure power oversubscription etc. .

While there have been shown and described illustrative embodiments that provide for data center management using device identification over power line it is to be understood that various other adaptations and modifications may be made within the spirit and scope of the embodiments herein. For example the embodiments have been shown and described herein with relation to data centers and associated networks and or connectivity. However the embodiments in their broader sense are not as limited and may in fact be used with other types of devices network configurations and so on and particularly need not be associated with data centers . In addition while certain protocols are shown such as power line communication protocols and or discovery protocols other suitable protocols may be used accordingly.

The foregoing description has been directed to specific embodiments. It will be apparent however that other variations and modifications may be made to the described embodiments with the attainment of some or all of their advantages. For instance it is expressly contemplated that certain components and or elements described herein can be implemented as software being stored on a tangible non transitory computer readable medium e.g. disks CDs RAM EEPROM etc. having program instructions executing on a computer hardware firmware or a combination thereof. Accordingly this description is to be taken only by way of example and not to otherwise limit the scope of the embodiments herein. Therefore it is the object of the appended claims to cover all such variations and modifications as come within the true spirit and scope of the embodiments herein.

