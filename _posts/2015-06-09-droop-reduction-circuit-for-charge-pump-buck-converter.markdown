---

title: Droop reduction circuit for charge pump buck converter
abstract: A Charge Pump Buck Converter (CPBC) includes a BC including an inductor and a CP coupled in parallel. Control logic is coupled to a switch driver coupled to a power switch(es). Control circuitry includes a voltage sensor sensing Vout and a voltage level generator for generating a first voltage level coupled to the CP stage and a second voltage level coupled to a duty cycle/rate generator block providing an input to an under voltage (UV) monitor coupled between OUT and the control logic. The control circuitry disables the CP when Vout>a first Vout level and controls the BC to regulate to a second Vout level>the first Vout level. During handoff between CP and BC during power up if Vout drops below a UV threshold, the UV monitor block modifies an input applied to the control logic for increasing charging supplied to the inductor.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09413232&OS=09413232&RS=09413232
owner: TEXAS INSTRUMENTS INCORPORATED
number: 09413232
owner_city: Dallas
owner_country: US
publication_date: 20150609
---
This application claims the benefit of Provisional Application Ser. No. 62 019 117 entitled Droop Avoidance Circuit for Buck Charge Pump Step Up and Step Down Converter filed Jun. 30 2014 which is herein incorporated by reference in its entirety.

This application has subject matter related to copending application Ser. No. 14 088 012 entitled Low loss step up and step down voltage converter filed Nov. 22 2013.

Voltage converter circuits are common components of many electrical and electronic systems having loads that are to be driven by regulated DC voltages. For example many electronic systems include integrated circuits and other loads that require a relatively stable DC voltage. As such these systems typically include a DC power supply for converting unregulated DC input power received from a battery or from an AC line voltage via a rectifier into a stable regulated DC power output to be applied to the integrated circuit or other system loads such as a DC motor.

One common type of DC DC voltage converter circuit that is commonly included in DC power supplies is referred to in the art as the switch mode DC DC voltage converter. As known in the art switch mode DC DC buck converters or step down converters produce an output voltage that is lower on average than its input voltage while boost converters or step up converters produce an output voltage that is higher on average than its input voltage. Modern conventional regulated DC power supplies often include a switch mode DC DC converter of a buck boost topology which is effectively a combination of the buck and boost converter circuit types. Buck boost voltage converters are capable of producing an output voltage that may be either higher or lower than the received input voltage.

This Summary briefly indicates the nature and substance of this Disclosure. It is submitted with the understanding that it will not be used to interpret or limit the scope or meaning of the claims.

Disclosed embodiments include charge pump buck power converters CPBCs which recognize existing buck boost converter solutions for providing power from an off state through a low voltage low power DC power supply all the way to a high voltage high power DC power supply when active are of low power efficiency require a large circuit area and have significant resistive losses as compared to a CPBC. Disclosed CPBCs combine a charge pump CP stage for step up conversion and a buck converter BC stage for step down conversion that are in parallel to one another between an input terminal IN and an output terminal OUT of the CPBC.

The CPBC includes control circuitry comprising a voltage sensor and a voltage level generator coupled to the CP stage providing a CP control loop for disabling the CP stage upon the voltage at OUT Vout reaching a first voltage level first Vout level and coupled to the BC stage providing a BC control loop for enabling the BC stage at a second Vout level above the first Vout level and controlling the BC stage to regulate at the second Vout level. The BC control circuitry also includes an under voltage UV monitor block for reducing a recognized Vout droop while the BC control loop is settling when handing off from the CP stage to the BC stage during voltage step down conversion that can occur for relatively rapid input voltage Vin ramp rates relative to the BC control loop bandwidth see Vout shown in described below . A significant Vout droop during switching is generally not allowed in most system applications.

Regarding operation of the CPBC during power up when Vin is ramping up from a low voltage e.g. ground to its eventual steady state voltage in normal operation the CP stage first turns on and then during handoff the BC stage turns on to perform step down conversion and then the CP stage disables where the BC stage limits Vin to an intended voltage i.e. second Vout level when Vin the intended voltage i.e. second Vout level . The UV monitor block in disclosed BC control loops causes the BC control loop during CP stage to BC stage handoff to provide enough energy to the inductor of the BC stage to maintain a higher Vout level than the BC control loop would otherwise provide to minimize the Vout droop see simulation results in described below showing essentially no Vout droop .

Example embodiments are described with reference to the drawings wherein like reference numerals are used to designate similar or equivalent elements. Illustrated ordering of acts or events should not be considered as limiting as some acts or events may occur in different order and or concurrently with other acts or events. Furthermore some illustrated acts or events may not be required to implement a methodology in accordance with this disclosure.

Also the terms coupled to or couples with and the like as used herein without further qualification are intended to describe either an indirect or direct electrical connection. Thus if a first device couples to a second device that connection can be through a direct electrical connection where there are only parasitics in the pathway or through an indirect electrical connection via intervening items including other devices and connections. For indirect coupling the intervening item generally does not modify the information of a signal but may adjust its current level voltage level and or power level.

The BC control loop also includes a duty cycle or repetition rate generator block cycle rate generator block having an input shown coupled to an output of the voltage level generator which provides a duty cycle or repetition rate output that is coupled to an input of a UV monitor block . The UV monitor block is triggered by a UV threshold and is coupled between OUT and an input of control logic that is coupled to a switch driver which is coupled to drive a control node of power switch es in the BC stage . The UV monitor block is for tracking Vout where during a handoff between the CP stage and BC stage during power up if Vout drops below the UV threshold the duty cycle or repetition rate output is changed to provide a modified duty cycle or repetition rate output to the input of the control logic for increasing charging supplied to the inductor of the BC stage to reduce a Vout droop.

Control circuitry has inputs receiving Vout and Vin and operates to control the operation of the BC stage and CP stage as described below. Control circuitry can also receive one or more reference voltages Vref for use in its control of the BC stage and CP stage see Vref shown in described below .

In its general operation control circuitry enables the CP stage to boost Vout as Vin powers up. At relatively low Vin while CP stage is boosting Vout the BC stage is disabled by the control circuitry . As the Vin rises to above a certain threshold level the control circuitry enables the BC stage to begin regulating Vout. The level at which the BC stage regulates Vout is higher that the Vout level at which the control circuitry disables the CP stage . The control loop associated with the BC stage is designed to regulate to a slightly higher Vout compared to the Vout the control loop associated with CP stage regulates to is to prevent both associated loops from fighting each other. The CP stage can only supply charge and cannot remove charge from Vout so if the BC control loop regulates to a Vout the CP control loop cannot undesirably fight with it to regulate to a lower Vout value once the BC control loop has settled .

This overlap created between the BC stage and the CP stage ensures Vout is driven and during periods which both BC stage and CP stage are charging Vout generally enables a smooth transition between the two modes of CP operation and BC operation. However for relatively rapid Vin ramp rates relative to the BC control loop bandwidth as noted above it is recognized Vout can experience a significant droop while the control loop is settling when handing off from the CP stage to the BC stage during voltage step down conversion which is addressed by a disclosed UV monitor block which causes enough energy to the inductor of the BC stage to maintain a higher Vout than the BC control loop would otherwise provide to minimize the Vout droop.

The CPBC can be realized in a monolithic integrated circuit IC generally embedded within a larger scale IC along with other functions but alternatively as a stand alone IC. Alternatively some or all of the components of the CPBC may be realized by discrete components such as the inductor L and output capacitor Cout of the BC shown in as well as the capacitor shown as Cfly in the CP stage .

CPBC in implements PWM control and shows example circuit implementations for the CP stage shown as CP stage BC stage shown as BC stage control circuitry shown as control circuitry including a voltage divider providing both the voltage sensor and the voltage level generator shown in duty cycle generator block a UV monitor block and a comparator between the voltage divider and CP stage . The BC stage is shown as a conventional buck mode voltage converter having power switches SW SW connected in series between IN and ground. As is typical in the art of power converters power switches SW SW comprise power field effect transistors FETs with their source drain paths connected in series and their gates controlled by the PWM controller . Insulated Gate Bipolar Transistors IGBTs may also be used for the power switches.

The particular construction of switches SW SW may follow any one of a number of conventional configurations including that of a single FET back to back paired FETs and the like. Switch node SWN being at the common node between switches SW SW is connected to one end of inductor L the other end of which is connected to OUT. Filter capacitor shown as Cout is connected between OUT and ground. As evident from no switching transistor is connected in series with inductor L between the switch node SWN and OUT which improves the power efficiency of disclosed CPBC s such as CPBC .

The control logic associated with the BC stage can correspond to conventional logic as used in buck mode voltage converters but may be selectively enabled by control circuitry specifically via its comparator and the AND gate in the UV monitor block when needed to avoid a Vout droop during CP to BC handoff during power up as will be described in further detail below. When the BC stage is enabled control logic in the PWM controller controls the switching of switches SW and SW in a complementary manner relative to one another with the appropriate dead time between transitions to ensure both are not closed at the same time. The duty cycle of switches SW SW will control Vout relative to that at IN in the conventional manner. Specifically during such time as switch SW is closed and switch SW is open inductor L is energized by current from input terminal IN conversely in this embodiment during such time as switch SW is open and switch SW is closed the current stored by inductor L is applied to load at OUT. Cout operates effectively as a filter capacitor reducing ripple in Vout. In this embodiment the switching duty cycle is controlled by feedback from OUT via control circuitry specifically via its comparator as will be described in further detail below.

Alternatively switch SW may be replaced by a diode e.g. with its cathode at switch node SWN and its anode at ground as known in the art for buck voltage converters. In this case PWM controller will control only switch SW. During those portions of the switching cycle in which switch SW is open current stored by inductor L will similarly be applied to the load at OUT in the manner described above. Other alternatives to the construction of the BC stage are also possible.

The CP stage shown in has IN coupled to a diode chain comprising a pair of diodes D and D coupled in series between IN and OUT by way of optional clamp circuit as shown in . Clamp circuit can be a conventional clamp circuit that limits the voltage to which the CP stage can boost Vout relative to Vin. For example clamp circuit may be realized as a voltage controlled switch i.e. transistor circuit that is closed while Vin is below a certain threshold level and that is open while the Vin is above that threshold level. While clamp circuit is optional i.e. the diode chain may be directly connected to IN it provides the advantage of limiting current drawn by the CP stage during normal CPBC operation.

The operation of CP stage is driven by clock signal CLK which is generated elsewhere within the integrated circuit in which most or all of the components of CPBC is realized or external to that integrated circuit. Clock signal CLK is applied to one input of AND gate which receives a signal from control circuitry as will be described in detail below the output of which is applied to buffer chain . The output of buffer chain is applied to one side of the capacitor shown as Cfly the other side of which is connected to a node between D and D.

In operation clock signal CLK is applied to AND gate at the desired frequency and duty cycle. When CP stage is enabled i.e. while control circuitry applies a high logic level to AND gate that clock signal CLK is forwarded by AND gate to buffer chain . During portions of the clock cycle in which buffer chain presents a low logic level i.e. ground at its output Cfly charges to a voltage corresponding to Vin less a threshold voltage drop across D and any voltage drop across clamp circuit . As clock signal CLK makes its next transition buffer chain drives its output to a high level which pumps the voltage at the anode of D to a yet higher voltage its charged voltage plus the high level voltage at the output of buffer chain because the voltage across Cfly cannot change instantaneously. Since D is forward biased at this time that higher voltage is applied to OUT and is maintained at that level during the opposite phase of clock signal CLK by the action of D. This operation continues so long as CP stage remains enabled to the extent allowed by clamp circuit as described above.

BC stage may alternatively be constructed and operate according to other conventional arrangements of buck voltage converters. Similarly the CP stage may alternatively be constructed and operate according to other arrangements of charge pump circuits besides the diode based two stage construction described above. Such alternatives and other variations of the particular arrangement of these stages as useful in the construction of CPBC as will be recognized by those skilled in the art having reference to this application.

As mentioned above in connection with control logic of the BC stage control circuitry includes comparator which may be constructed in the conventional manner. In this implementation comparator receives Vin at its positive input and input reference voltage Vat its negative input and has its output coupled to an input of control logic . Input reference voltage Vis a reference voltage generated elsewhere within the integrated circuit in which CPBC is realized or external thereto typically by a conventional bandgap reference voltage circuit or another type of conventional voltage regulator or other reference circuit as known in the art. Input reference voltage V as applied to comparator establishes the input voltage at which the BC stage is enabled.

In the example shown in responsive to Vin being at a voltage above input reference voltage V comparator drives its output to a high logic level to enable control logic of the PWM controller and BC stage specifically by enabling control logic of the PWM controller to control switches SW SW to apply power received at IN to OUT via inductor L in the manner described above. Conversely in this embodiment of the invention when the BC stage is disabled by comparator in response to the voltage at IN being below input reference voltage V control logic of the PWM controller holds both of switches SW SW open.

Voltage divider is shown comprising R R and R in series connection between OUT and a reference supply voltage e.g. ground . The voltage divider defines two nodes or taps N N at junctions between its series connected resistors with node N defined at a point closer to OUT than node N to provide the second voltage level. In the arrangement of when Vout has a positive polarity relative to ground the voltage at node N the second voltage level will be higher than the voltage at node N the first voltage level for any non zero Vout.

Node N is applied to the negative input of comparator of the control circuitry and reference voltage Vref is applied to the positive input of the comparator . Reference voltage Vref applied to comparator will typically differ from the input reference voltage Vshown applied to the negative input of the comparator to allow design of the voltage at which BC stage is enabled independently from the regulated output voltages as will be described below. However it is not required that these two voltages differ from one another. The output of comparator is applied to one input of the AND gate of the CP stage . In response to the voltage at node N being below reference voltage Vref the high level at the output comparator enables the AND gate to respond to clock signal CLK thus enabling operation of CP stage . Conversely upon Vout rising to a level that brings the voltage at node N above reference voltage Vref comparator issues a low level to AND gate which blocks clock signal CLK from being applied to buffer chain and capacitor Cfly effectively disabling the CP stage .

Node N in voltage divider is connected to a negative input of amplifier in control circuitry where the positive input of amplifier receives Vref and the output of amplifier shown as Verror is coupled to an input of a duty cycle generator block and to a compensating network comprising Rcomp and Ccomp to ground. The output of the duty cycle generator block shown as Vis coupled to one input of AND gate of the UV monitor block .

The UV monitor block is shown in including a UV comparator comparator with its positive input receiving Vand its negative input coupled to OUT to receive Vout and an inverter receiving a CP enable signal shown as Vfrom the comparator of the CP stage . The UV threshold V should generally have hysteresis of at least 1 mv and be below the regulation point to allow the BC control loop to settle. UV monitor block is also shown including a UV counter or timer counter having an input coupled to receive the output from inverter . A NAND gate receives the output from the counter and the Vuv output from comparator . The output of NAND gate and the Voutput from the duty cycle generator block are coupled to respective inputs of AND gate . The output of the AND gate is shown as Vwhich is coupled to an input of the PWM controller . Other logic arrangements are possible for UV monitor block .

As noted above the UV monitor block being coupled to Vout tracks Vout wherein during a handoff at power up between the CP stage and the BC stage if Vout drops below the UV threshold shown in as V the UV monitor block modifies Vprovided by the duty cycle generator block by the action of AND gate with the Vfrom the NAND gate which is coupled to the controller input of the PWM controller that functions to increase the charging supplied to the inductor L of the BC stage to raise Vout. The Voutput from the AND gate as shown in is thus forced to be logic low regardless of what the duty cycle generator block outputs as Vso that the BC control loop does not see Vand acts as if it needs to charge the inductor L more. By keeping the inductor L charged more than what the BC control loop needs Vout is kept from drooping.

The counter starts after the CP stage disables to let the comparator s Voutput through. To avoid fighting with the BC control loop during normal converter operation Vis ignored after the counter time of counter expires. The counter time is set to a time to be long enough to let the BC stage settle. The counter in the UV monitor block thus functions to ensure that after handoff during power up the UV monitor block is ignored so that it does not affect normal operation of the CPBC and is only active during CP to BC handoff at power up. There are other ways that should be apparent to one having ordinary skill in the art besides the counter to achieve this function of avoiding interference by the UV monitor block during normal converter operation.

Disclosed Vout droop reduction is particularly useful for similar DC DC converter systems where the buck control is compensated and not hysteretic. If the buck converter uses hysteretic control conventional control loops may suffice. The control circuitry including a UV monitor block is adapted to take care of the complexity a compensated feedback loop involves in the compensation network taking significant time to settle as compared to the relatively fast ramp rate of Vin that without a disclosed UV monitor block will try to regulate to a low voltage during the handoff from CP to BC at power up resulting in a Vout droop see the Vout droop in the simulation results shown in described below .

One particular application for disclosed embodiments is for the Texas Instruments TPS65980 DC DC switching regulator THUNDERBOLT Bus Power Management IC PMIC that receives input power from a THUNDERBOLT or THUNDERBOLT 2 power bus ranging from 2.5V to 15.75V and generates three separate 3.3V supply outputs.

Disclosed embodiments are further illustrated by the following specific Examples which should not be construed as limiting the scope or content of this Disclosure in any way. Simulations were performed to evaluate the voltage vs. time handoff performance from CP stage to the BC stage during power up for CPBC shown in having a disclosed UV monitor for Vout droop reduction vs. an otherwise equivalent CPBC that only lacked a disclosed UV monitor control CPBC .

Regarding the simulations conditions used V 1 V V 3.695 V when the CP stage is disabled so that the CP stage is ON until Vin was about 3.7 V V 3.459 V when the BC stage is enabled so the BC stage turns ON when Vin 3.46 V V 3.1 V rising 2.6 V falling the reset voltage that was applied to a REST N comparator not shown in . The REST N comparator would be configured to have its positive input to Vout and its negative input to a voltage reference equal to its trip point. Vis a threshold in this particular system e.g. a THUNDERBOLT system that when applied to the REST N comparator allows the other chips in the system to receive a signal which indicates whether the power rails were active or not where the CPBC resets if Vout drops below 2.6V during a transition. V 3.16 V so that the UV signal trips the comparator in the UV monitor block when Vout drops below 3.16 V. Regarding the compensation network in the BC control loop Ccomp was 10 nF and Rcomp was 10 kohms. Regarding the counter the counter design was an adjustable counter nominally set to a counter time of 2 msec.

As seen in the waveforms shown in for the control CPBC as Vin rises during power up the BC stage can be seen to power up at about 150 sec and start driving Vout. In converter systems where the BC stage uses a typical compensated PWM or PFM control loop the BC control loop needs time to settle after it is enabled. The delay time to settle depends on the system bandwidth. If the rising ramp rate of Vin is slow enough the CP stage will keep Vout up until the BC control loop settles and drives Vout to the regulated voltage. However if the rising ramp rate of Vin is faster than the BC control loop bandwidth as shown in the CP stage disables shown at about 175 sec when CP EN goes low before the BC stage is settled. This causes the Vout droop shown in as the BC stage regulates to a lower voltage at first and as the BC control loop settles Vout slowly rises as the BC stage regulates to intended voltage.

As seen in the waveforms for CPBC in the voltage vs time performance during handoff from the CP stage to the BC stage is shown to have essentially no Vout droop. also shows simulated inductor current i L and load current i LOAD compared to . Although the time scales in are different there is essentially no significance for the time scale as for the simulation results shown in the simulation was ended soon after the Vout droop behavior occurred. For CPBC due to addition of the UV monitor block including the counter the settling time may increase slightly. Thus in order to show that the CP to BC handoff was stable and working well the simulation was run for a longer time to 2.5 msec .

The waveforms in show a smooth step down conversion with Vout shown having a minimal Vout droop where the action of the UV monitor block can be seen to keep Vout from dropping down as the UV monitor block overrides the PWM signal Voutput by the duty cycle generator to force the L to charge enough to maintain the Vout high. After handoff the BC control loop settles and the BC stage regulates Vout to intended voltage. The i L waveform shown is significant because it shows how the inductor current is kept energized to maintain Vout even though the BC control loop is not yet settled. In other words the UV signal V output by the comparator forces the inductor L to be charged regardless of what the BC control loop tries to do. This is done until the BC control loops settles to where it should be and takes over of the control of the i L peaks go away . If the time scale were extended at least another 0.5 msec the counter would be seen to go low to disable the UV monitor block .

Those skilled in the art to which this disclosure relates will appreciate that many other embodiments and variations of embodiments are possible within the scope of the claimed invention and further additions deletions substitutions and modifications may be made to the described embodiments without departing from the scope of this disclosure.

