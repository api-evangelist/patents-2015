---

title: Systems and methods for processing payment transactions at fuel dispensing stations
abstract: The methods and systems described herein provide for processing electronic payments at a retail location. Secure payment information for use in processing future payment transactions initiated by a mobile device may be stored at a secure location remote from retail locations. A mobile device of a user may be detected and location determined based at least in part on the strength of a signal via a wireless antennas at the retail location. A determination is made that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions. The mobile device may receive incentives based at least in part on the determined location. A user may complete a payment transaction at the retail location without providing the secure payment information at the retail location.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09424577&OS=09424577&RS=09424577
owner: AURUS INC.
number: 09424577
owner_city: Boston
owner_country: US
publication_date: 20150810
---
This application continuation of U.S. application Ser. No. 14 462 164 filed Aug. 18 2014 reference of which is hereby incorporated in its entirety.

A transaction at a fuel dispensing station typically requires many steps and sensitive information can be left vulnerable to detection or theft. A customer must interact with a fueling pump and provide sensitive information such as credit card information in order to begin and complete the process. The process can be inconvenient and leave the customer s sensitive information vulnerable to detection dependent upon the security infrastructure of the individual fuel dispensing station. Additionally a merchant may post advertisements and promotions around the fuel dispensing station unsure of which customers will be exposed to them. The advertisements and promotions are targeted towards a general population as opposed to a specific customer.

The present disclosure is directed towards a virtual mobile wallet application for a mobile device to enable the processing of payment transactions. In particular the system is directed to systems and methods for processing of payment transactions at fuel dispensing stations. The system and methods described herein can allow an end user of a mobile device to locate a nearest fuel dispensing station authorize transactions activate fueling stations and complete payment transactions through the mobile application and without physically providing sensitive payment information such as a credit card at the retail location. A user may register and create an account with an online payment processing system via a mobile application. The account may include credit card information and debit card information for use in a future transaction and can be stored on a remote server remotely located from any retail location. When the user wants to buy goods from a store and or fill up at a fuel dispensing station they can log in to the mobile application to complete all aspects of the transaction. The payment system described herein can identify the location of the mobile device provide product and fueling options to the mobile device based on the location activate the fueling location and deduct the appropriate amount from the pre registered user account stored remotely from the retail location. Through these systems and methods a user can protect sensitive payment information and complete payment transactions without carrying cash and or credit cards.

It should be understood that any reference to fuel dispensing stations in the present disclosure refers to any and all forms of fuel dispensing stations including pumping stations and or pump less stations that dispense any form of fuel including but not limited to gasoline diesel petroleum petrol benzene biodiesel kerosene ethanol and or blends thereof.

Further the systems and methods described herein provide a merchant of retail location valuable information to provide different types of loyalty and reward programs specific to a customer. The incentives promotions and advertisements can be provided to and displayed on a mobile device of a customer and be targeted to that customer s interests.

In accordance with one embodiment of the present disclosure a back office server at a retail location may be in communication with a central server and a plurality of point of sale locations to effectuate the processing of payment transactions. The central server may be remotely located from the retail location and facilitate the use of customer loyalty programs analytics receipt storage tracking and access. The central server may be responsible for communicating with the back office server to authorize process and complete payment transactions. The back office server may communicate with a point of sale server to retrieve transaction costs and loyalty program information. The point of sale server may activate a point of sale location in response to receiving authorization from the central server via the back office server.

The back office may detect the presence of one or a plurality of mobility devices within a range of the retail location. A mobile application executing on the mobile device may receive a request to process a payment transaction at a point of sale location. The back office server may facilitate the processing of the payment transaction via the mobile device. The back office may generate and display promotions and advertisements on the mobile device and the point of sale location during the transaction.

In accordance with a further embodiment of the present disclosure a method for processing payments is provided the method comprising receiving secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations determining location information associated with a mobile device based at least in part on the strength of the signal detected by three or more wireless antennas at a retail location determining that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions providing to the mobile device of the user an incentive based at least in part on the determined location information receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating a fuel dispensing station at the fuel dispensing location for use by the user.

In some embodiments the method further includes identifying an identifier such as a MAC address for at least one mobile device within a range of the retail location. In accordance with a further embodiment the method includes calculating a distance from a point of sale to the at least one mobile device. In some embodiments the method includes determining a location of the user at the retail location based on the calculated distance and storing the location of the user in a customer record.

In accordance with a further embodiment the step of determining further includes determining a first set of identifiers such as MAC addresses for a first set of mobile devices and associating information relating to a first set of payment transactions at a retail location with the first set of MAC addresses and determining a second set of identifiers such as MAC addresses of a second set of mobile devices and associating information relating to a second set of payment transactions at a retail location with the second set of identifiers and determining that a particular identifier e.g. MAC Address is associated with the user from whom secure payment information was previously received. In some embodiments the determinations may be made by comparing information relating to the first set of payment transactions associated with the first set of identifiers with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user comparing information relating to the second set of payment transactions associated with the second set of identifiers with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user and identifying an identifier e.g. MAC Address associated with the first set and second set of payment transactions associated with the user by identifying the identifier e.g. MAC address that is in both the first and second sets of identifiers.

In some embodiments the method includes determining based at least in part on a customer record that the user belongs to a loyalty program and applying loyalty program information to the payment transaction. In some embodiments a customer may be provided with an incentive via his or her mobile device. An incentive may be any electronic representation of value or enticement capable of being communicated to the customer via a mobile device. In some embodiments the incentive is a coupon. In some embodiments the incentive is a coupon that may contain a QR code that may be scanned in order to obtain a discount. In some embodiments the incentive may be a credit to the user s account. In some embodiments the incentive may be a credit to a customer s account. In some embodiments the incentive is a discount. In some embodiments the incentive may be an advertisement. In some embodiments the incentive may comprise promotional material. In some embodiments the incentive may be based at least in part on information stored in the customer s customer record. In some embodiments the incentive may be based at least in part on a customer s purchase history. In some embodiments the incentive may be based at least in part on a customer s location. In some embodiments the incentive may be based at least in part on a customer s location history. In some embodiments the incentive is a reminder that the user may use their mobile device to complete the payment utilizing secure payment information previously stored at a secured location remote from retail locations.

In accordance with a further embodiment the method includes generating promotional information based on at least one of a customer record associated with the user or a current location of the user at the retail location and displaying to the user promotional information at a point of sale at the retail location. In some embodiments the method includes transmitting to the user via the at least one mobile device promotions for products offered at the retail location. In some embodiments the method includes transmitting to the user via the at least one mobile device discounts for purchases made using the at least one mobile device at the retail location.

In accordance with a further embodiment the method includes receiving information relating to payment transaction at a retail location that was not requested via the user s mobile device determining a current location at the retail location of the mobile device and associating information relating to the payment transaction that was not requested via the user s mobile device with the user based at least in part on the determined current location. For example a customer may walk into a retail location and purchase a product using cash or credit card rather than via his or her mobile device. In such a situation the systems and methods of the present disclosure would nonetheless provide for determining a current location of the customer s mobile device and or and identifier for the mobile device that may be associated with the customer s previously provided account information. In some embodiments the fuel dispensing location and retail location at which location information was determined are the same location. In some embodiments the fuel dispensing location and the retail location from which location information was determined are different locations. In some embodiments the method includes responsive to determining the location of the user activating a point of sale location.

In accordance with a further embodiment of the present disclosure a method for processing payments is provided the method comprising receiving from a user secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations detecting MAC addresses for a plurality of mobile devices at a retail location via one or more wireless antennas determining that at least one mobile device of the plurality of mobile devices is a mobile device of a user based at least in part on the MAC address of the mobile device providing to the mobile device of the user an incentive based at least in part on the determined association between the one mobile device and the user receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating s fuel dispensing station at the fuel dispensing location for use by the user.

In accordance with a further embodiment the step of determining that at least one mobile device of the plurality of mobile devices is the mobile device of the user further includes determining a first set of MAC address of a first set of mobile devices and associating information relating to a first set of payment transactions at a retail location with the first set of MAC addresses determining a second set of MAC addresses of a second set of mobile devices and associating information relating to a second set of payment transactions at a retail location with the second set of MAC addresses and determining that a particular MAC address is associated with the user from whom secure payment information was previously received by. In some embodiments the determination may be made by comparing information relating to the first set of payment transactions associated with the first set of MAC addresses with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user comparing information relating to the second set of payment transactions associated with the second set of MAC addresses with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user and identifying a MAC address associated with the first set and second set of payment transactions associated with the user by identifying the MAC address that is in both the first and second sets of MAC addresses.

It should be understood that any portions of the present disclosure that refer MAC addresses may alternatively refer to any other form of identifier for a mobile device. For example any unique identifier key or hash that may be assigned to a mobile device and later detected may be utilized in place of a MAC Address. A MAC address media access control address is simply an exemplary form of such an identifier that is currently utilized by network connected devices.

In some embodiments the method further includes comparing the MAC addresses from a current transaction to a customer record comprising MAC addresses from a previous transaction associated with the user eliminating MAC addresses from the customer record not in both the current transaction and the previous transaction and linking the remaining MAC addresses to the user in the customer record. In some embodiments the method includes calculating a distance from a point of sale to the at least one mobile device. In some embodiments the method includes determining a location of the user at the retail location based on the calculated distance and storing the location of the user at the retail location in a customer record. In some embodiments the method includes activating the point of sale location.

In accordance with a further embodiment the method includes determining based at least in part on a customer record that the user belongs to a loyalty program and applying loyalty program information to the payment transaction. In some embodiments the method includes generating promotional information based on at least one of a customer record associated with the user or a current location of the user at the retail location and displaying to the user promotional information at a point of sale at the retail location.

In some embodiments the method includes storing in a customer record at least one of a MAC address of the at least one mobile device a purchase history of the user or point of sale location information. In some embodiments the method includes transmitting to the user via the at least one mobile device at least one of promotions for products offered at the retail location or discounts for purchases using the at least one mobile device at the retail location. In some embodiments the method includes transmitting to the user via the at least one mobile device discounts for purchases made using the at least one mobile device at the retail location.

In accordance with a further embodiment of the present disclosure a system for processing payments. The system includes at least one processing unit communicatively coupled to a memory unit capable of storing processor executable instructions wherein upon execution of the processor executable instructions. The at least one processing unit receiving from a user secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations determining location information associated with a mobile device based at least in part on the strength of the signal detected by three or more wireless antennas at a retail location determining that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions and providing to the mobile device of the user an incentive based at least in part on the determined location information.

The system further includes a determined server comprising at least one processing unit communicatively coupled to a memory unit capable of storing processor executable instructions. The at least one processing unit receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating a fuel dispensing station at the fuel dispensing location for use by the user.

In accordance with a further embodiment of the present disclosure a system for processing payments. The system includes at least one processing unit communicatively coupled to a memory unit capable of storing processor executable instructions wherein upon execution of the processor executable instructions. The at least one processing unit receiving from a user secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations detecting MAC addresses for a plurality of mobile devices at a retail location via one or more wireless antennas determining that at least one mobile device of the plurality of mobile devices is a mobile device of a user based at least in part on the MAC address of the mobile device and providing to the mobile device of the user an incentive based at least in part on the determined association between the one mobile device and the user.

The system further includes a determined server comprising at least one processing unit communicatively coupled to a memory unit capable of storing processor executable instructions. The at least one processing unit receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating a fuel dispensing station at the fuel dispensing location for use by the user.

In the following detailed description reference is made to the accompanying drawings which form a part hereof. In the drawings similar symbols typically identify similar components unless context dictates otherwise. The illustrative embodiments described in the detailed description drawings and claims are not meant to be limiting. Other embodiments may be utilized and other changes may be made without departing from the spirit or scope of the subject matter presented here. It will be readily understood that the aspects of the present disclosure as generally described herein and illustrated in the figures can be arranged substituted combined and designed in a wide variety of different configurations all of which are explicitly contemplated and made part of this disclosure.

In reference now to a system for processing payment transactions is shown. Point of sale lanes and are in communication with back office server . Point of sale lanes may be comprised of any form and combination of point of sale hardware and software including electronic cash registers checkout terminals checkout kiosks computers wireless checkout terminals restaurant ordering kiosks customized desktop computers laptops wireless devices tablet PCs smart phones or any other computing device capable of assisting with payment processing at a retail location. A point of sale lane may be a check out lane or counter at a department store grocery store or other form of retail shopping locations or it may be a kiosk at a restaurant or counter at a food service retail location or any other location where a user effectuates the processing of a payment transaction. A point of sale lane may be a fuel dispensing location e.g. fuel pump and or a group of fuel dispensing locations. For example in some embodiments a point of sale location may be a fuel pump at a gas station. A back office server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments server may be a plurality of servers operated by a plurality of different parties entities and service providers. The back office server may be located at the retail location or at a remote location.

In some embodiments point of sale lanes may comprise electronic cash registers and which are in communication with the back office server . Electronic cash registers and may be any form of computing device capable of assisting a user in effectuating the processing of a payment transaction. Electronic cash registers may be any one of or combination of point of sale hardware and software computerized cash register checkout terminals checkout kiosks computers wireless checkout terminals wireless computers restaurant ordering kiosk computers checkout kiosk computers payment processing kiosk computers customized desktop computers laptops wireless devices tablet PCs smart phones iPhones or iPads as provided by the Apple Corporation or any other computing device capable of assisting a user with payment processing at a retail location. In some embodiments communications between electronic cash registers and and server are encrypted. In some embodiments communications between electronic cash registers and and server are encrypted using public private key encryption. In some embodiments communications between electronic cash registers and and server are encrypted using shared secret key encryption. In some embodiments communications between electronic cash registers and and server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between electronic cash registers and and server are encrypted using a proprietary encryption scheme. In some embodiments communications between electronic cash registers and and server may occur at least in part wirelessly.

The back office server is in communication with credit card terminals and which are located at the point of sale lanes. In some embodiments the communication between credit card terminals and and server may be limited to a single isolated port for communication of non PCI scope information. In some embodiments the single isolated port may be a TCP IP or UDP port. In some embodiments communications between credit card terminals and and server are encrypted. In some embodiments communications between credit card terminals and and server are encrypted using public private key encryption. In some embodiments communications between credit card terminals and and server are encrypted using shared secret key encryption. In some embodiments communications between credit card terminals and and server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between credit card terminals and and server are encrypted using a proprietary encryption scheme. In some embodiments communications between credit card terminals and and server may occur at least in part wirelessly.

In some embodiments communications between credit card terminals and and server may be made utilizing dial up communications the Internet TCP IP UDP General packet radio service GPRS communications cellular communications Wi Fi wireless communications utilizing the IEEE 802.11 standards other forms of wireless communications Ethernet or any other form of communications protocol channel or standard.

The credit card terminals and are also in communication with a remotely located payment processing server . Server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments server may be a plurality of servers operated by a plurality of different parties entities and service providers. In some embodiments the communication between credit card terminals and and remotely located payment processing server goes through one or both of firewalls and . In some embodiments the communication between credit card terminals and remote server may be additionally monitored by other software or hardware based network monitoring tools. In some embodiments such network monitoring tools may assure that communications between the credit card terminals and server are not tampered with. In some embodiments communications between credit card terminals and and server are encrypted. In some embodiments communications between credit card terminals and and server are encrypted using public private key encryption. In some embodiments communications between credit card terminals and and server are encrypted using shared secret key encryption. In some embodiments communications between credit card terminals and and server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between credit card terminals and and server are encrypted using a proprietary encryption scheme.

In some embodiments communications between credit card terminals and and remotely located payment processing server may be made utilizing dial up communications the Internet TCP IP UDP General packet radio service GPRS communications cellular communications Wi Fi wireless communications utilizing the IEEE 802.11 standards other forms of wireless communications Ethernet or any other form of communications protocol channel or standard.

In some embodiments credit card terminals CCT or may be terminals that allow customers to swipe or otherwise input credit card information with which to effectuate a payment transaction. In some embodiments CCTs or may be terminals that allow customers to input any form of payment information that is not credit card information. In some embodiments CCTs or may be terminals that allow customers to input gift card information bank account information or debit card information. In some embodiments CCTs or may be terminals that allow customers to input payment information from an online payment service provider such as PayPal . In some embodiments CCTs or may be terminals that allow customers to input payment information from a rewards program. For example a user may input rewards program information and use points or credits to effectuate the payment transaction.

In some embodiments CCTs or may be terminals that allow customers to input information wirelessly. In some embodiments CCTs or may be terminals that allow customers to input information through a Radio Frequency Identification RFID device or chip including use of Near Field Communications NFC . In some embodiments CCTs or may be terminals that allow customers to input information through a touch pad or key pad. In some embodiments CCTs or may be terminals that allow customers to input information by swiping a card with a magnetic strip. In some embodiments CCTs or may be terminals that allow customers to input information by entering in a unique identifier or password. In some embodiments the terminals utilize a two step verification such as the use of a wireless device utilizing RFID or the like and a user entered password.

In some embodiment CCTs or may be terminals that allow customers to input payment information via their cell phones or other mobile device.

In some embodiments server is in communication with authorization server . Server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments server may be a plurality of servers operated by a plurality of different parties entities and service providers. In some embodiments communications between server and server are encrypted. In some embodiments communications between server and server are encrypted using public private key encryption. In some embodiments communications between server and server are encrypted using shared secret key encryption. In some embodiments communications between server and server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between server and server are encrypted using a proprietary encryption scheme. In some embodiments communications between server and server may occur at least in part wirelessly.

In some embodiments communications between credit card terminals and and remotely located server occur across the public Internet. In some embodiments communications between credit card terminals and and remotely located server occur across a virtual private network VPN . In some embodiments communication between credit card terminals and and remotely located server occur across any form of wide area network. In some embodiments communications between credit card terminals and and remotely located server occur across a private network. In some embodiments communications between credit card terminals and and remotely located server may occur at least in part wirelessly.

In some embodiments back office server may be in communication with remotely located payment processing server . In some embodiments the communication between server and remotely located payment processing server goes through one or both of firewalls and . In some embodiments communications between server and server are encrypted. In some embodiments communications between server and server are encrypted using public private key encryption. In some embodiments communications between server and server are encrypted using shared secret key encryption. In some embodiments communications between server and server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between server and server are encrypted using a proprietary encryption scheme.

In reference now to a block diagram of an exemplary embodiment of a system capable of implementing the present disclosure is shown. For example an exemplary procedure in accordance with the present disclosure can be performed by a processing arrangement and or a computing arrangement . Such processing computing arrangement can be e.g. entirely or a part of or include but not be limited to a computer processor that can include e.g. one or more microprocessors and use instructions stored on a computer accessible medium e.g. RAM ROM hard drive or other storage device .

As shown in a computer accessible medium e.g. as described herein a storage device such as a hard disk floppy disk memory stick CD ROM RAM ROM etc. or a collection thereof can be provided e.g. in communication with the processing arrangement . The computer accessible medium may be a non transitory computer accessible medium. The computer accessible medium can contain executable instructions thereon. In addition or alternatively a storage arrangement can be provided separately from the computer accessible medium which can provide the instructions to the processing arrangement so as to configure the processing arrangement to execute certain exemplary procedures processes and methods as described herein for example.

In reference now to back office server is comprised of a back office manager and a credit card terminal CCT manager . The back office manager may be any computing processor or portion thereof programmed to perform the functions of a back office manager. The CCT manager may be any computing processor or portion thereof programmed to perform the functions of a CCT manager. In some embodiments the back office manager and CCT manager may comprise a single joint back office manager and CCT manager. In some embodiments the functions of the CCT manager may be performed by the back office manager . In some embodiments the CCT manager may perform the functions of the back office manager. The back office manager may be in communication with electronic cash registers ECR and . The back office manager may be in communication with a payment processing server on remote server . The payment processing service may be any computing processor or portion thereof programmed to perform the functions of payment processing service. The payment processing service may comprise of a payment gateway. The payment processing service may be a payment gateway.

In some embodiments the CCT manager is in communication with the back office manager and vice versa. The CCT manager is further in communication with CCTs and . CCTs and are in communication with a payment processing service on remote server . In some embodiments communications between payment CCTs and and payment processing service are routed through one or both of firewalls and .

In some embodiments payment processing service is in communication with authorization service on server . The authorization service may be any computing processor or portion thereof programmed to perform the functions of the authorization service. Authorization service may be comprised of a payment gateway. Authorization service may be a payment gateway. In some embodiments payment processing service and authorization service may be a single service.

In any embodiment communications between various components of the payment processing system may be made utilizing either one or a plurality of dial up communications the Internet TCP IP UDP General packet radio service GPRS communications cellular communications Wi Fi wireless communications utilizing the IEEE . standards other forms of wireless communications Ethernet a packet switched network or any other form of communications protocol channel or standard.

In reference now to a flow diagram for processing a payment transaction in the context of the present disclosure is shown. Back office manager receives a request to process a payment transaction from ECR . The back office manager may validate and check the request to determine whether the request is consistent with payment processing requirements and transmits the request to CCT manager . CCT manager receives the request from back office manager . CCT manager may determine that CCT is associated with the request for processing a payment transaction. CCT manager may send a request to CCT to initiate the receipt of secure payment information. CCT may receive secure payment information from a user comprising credit card information debit card information Personal Identification Number PIN information gift card information or loyalty program information. CCT sends a request to payment processing service to authorize the payment transaction. Payment processing service receives the request to authorize the transaction and sends a request to authorization service to authorize the transaction. Payment processing service receives and authorization for the payment transaction from authorization service . An authorization may be any form of computer readable indicator that the payment transaction has been authorized or approved by an authorization service. CCT receives an authorization from payment processing service and sends an authorization to CCT Manager which does not include PCI scope information. CCT Manager receives an authorization from CCT which does not include PCI scope information. The CCT manager sends an authorization to back office manager . Back office manager receives an authorization from CCT Manager . Back office manager sends an authorization for the payment transaction to ECR .

In some embodiments back office manager may operate in listening mode whereby it periodically determines whether a request to process a payment transaction has been received or whether an authorization or other message has been received. In some embodiments back office server may operate entirely in listening mode whereby it periodically determines whether a request authorization message or signal has been received . In some embodiments at least one module or process running on back office server may operate in listening mode while other modules or processes do not operate in listening mode. In some embodiments CCT Manager may operate in listening mode whereby it periodically determines whether a request to process a payment transaction has been received or whether an authorization or other message has been received. In some embodiments CCT may operate in listening mode whereby it periodically determines whether a request to process a payment transaction has been received or whether an authorization or other message has been received. In some embodiments ECR may operate in listening mode whereby it periodically determines whether a request to process a payment transaction has been received or whether an authorization or other message has been received. In some embodiments the periodicity with which a device module or process operates in listening mode may be so short so as to allow an action to be taken in response to receiving a request authorization or message nearly instantaneously.

In some embodiments an authorization may be a secure packet of information indicating that the payment has been authorized. In some embodiments an authorization may be an unsecure packet of information indicating that the payment has been authorized. In some embodiments an authorization may be an address in memory that indicated that a payment has been authorized. In some embodiments an authorization may be an electronic message that indicated that a payment has been authorized. In some embodiments and authorization may be a request that the credit card terminal complete the payment processing transaction. In some embodiments an authorization may change format between Authorization Service Payment Processing Service Firewall Firewall CCT CCT Manager Back Office Manager and ECR . For example an authorization received by Payment Processing Service may be a request by Authorization Service for Payment Processing Service to effectuate the processing of the payment transaction. In turn Payment Processing Service may communicate the authorization to CCT in the form of a request for CCT to effectuate the processing of a payment transaction. In turn CCT may communicate an authorization to CCT Manager in the form of a message to CCT Manager informing CCT Manager that the transaction has been authorized. In turn CCT Manager may communicate an authorization to Back Office Manager in the form of a request to Back Office Manager to effectuate the processing of a payment transaction. In turn Back Office Manager may communicate an authorization to ECR in the form of a request to ECR to effectuate the processing of a payment transaction such as a request to print out a receipt for a customer. In an alternative embodiment an authorization may be a single packet of data file or message which is sent from Authorization Service and forwarded to Payment Processing Service then forwarded to CCT then forwarded to CCT Manager then forwarded to Back Office Manager and forwarded to ECR .

In some embodiments an authorization may be communicated across a different communications link than that on which a request for authorization is communicated.

In reference now to a flow diagram for a method for processing payment transactions is depicted. At a point of sale lane a user requests processing of a payment transaction. Further at the point of sale a request is sent to the back office server to effectuate the processing of the payment transaction. Back office server receives a request to process a payment transaction. Back office server determines which of a plurality of CCTs at a retail location is associated with the request. Back office server sends a request to the determined CCT to effectuate payment processing. The determined CCT receives the request to effectuate payment processing. The determined CCT prompts a user to enter payment information. Payment information may be comprised of credit card information debit card information PIN information gift card information or loyalty program information. The determined CCT receives secure user payment information. The determined CCT sends secure payment information to remotely located payment processing service along with a request to authorize the payment transaction. Remote payment processing service receives the payment information and request for authorizing the payment transaction.

In reference now to a flow diagram for a method for processing payment transactions is depicted. Payment processing service receives the payment information and request for authorizing the payment transaction. Payment processing service verifies the request. Payment processing service sends a request for authorization of the payment transaction to authorization service for approval. Payment processing service receives an approval or authorization for the payment transaction from the authorization service . Payment processing service sends an approval or authorization for the payment transaction to the determined CCT . The determined CCT receives an approval or authorization for the payment transaction. The determined CCT sends an approval or authorization to back office server without PCI scope information. Back office server receives an approval or authorization for the payment transaction without PCI scope information. Back office server determines that one of a plurality of point of sale lanes is associated with the approval or authorization. Back office server sends an approval or authorization to the determined point of sale lane. At the point of sale lane an approval or authorization is received . At the point of sale lane a confirmation of the payment transactions is provided to a user.

In reference now to a system for detecting mobile devices at a retail location is shown. A retail location may refer to a point of sale lane and or a retail store for example and without limitation a convenience store a fuel dispensing station a petrol station or a small store. In other embodiments a retail location may be a group of fuel dispensers. In some embodiments said fuel dispensers may be fuel pumps. In some embodiments the retail location may include both a retail store for example a convenience store and one or more fuel dispensing stations. In some embodiments a retail location may be a single fuel dispensing location e.g. fuel pump . In some embodiments a retail location may include a traditional point of sale for example a cash register inside the retail location .

In some embodiments the retail location may include a retail store a plurality of point of sale locations and a plurality of antennas . In some embodiments a retail store may refer to a convenience store a fuel dispensing station a petrol station or a small store. In one embodiment a retail store may refer to a store location at a retail location for example and without limitation a convenience store at a gas station. In some embodiments a retail store may include one or more than one antennas inside the retail store . In some embodiments the retail store may include one or more than one point of sale locations .

In some embodiments a point of sale location may include a gas pump and or a fueling pump at a retail location such as a fuel dispensing station. In some embodiments a point of sale location may be a group of fuel dispensers. In some embodiments said fuel dispensers may be fuel pumps. In some embodiments a point of sale location may include one or more fuel dispensing stations. In some embodiments a point of sale location may be a single fuel dispensing location e.g. fuel pump . In some embodiments a point of sale location may include any form and combination of point of sale hardware and software including electronic cash registers checkout terminals checkout kiosks computers wireless devices tablet PCs smart phones or any other computing device capable of assisting with payment processing at a retail location . A point of sale location may be a check out lane or counter at a department store grocery store or other form of retail shopping locations for example and without limitation inside a retail store . In some embodiments a point of sale location may be a kiosk at a restaurant or counter at a food service retail location or any other location where a user effectuates the processing of a payment transaction. In some embodiments a point of sale location may be a traditional point of sale i.e. cash register in a retail location as well as fueling pump i.e. gas pump at a retail location . In some embodiments a point of sale location may include a credit card terminal CCT and or an electronic cash register ECR similar to those described above with respect to .

In some embodiments a retail location may include a plurality of antennas . An antenna may be a device used to transmit and or receive radio television microwave and satellite signals. In some embodiments the antenna may be an electrical device that converts radio frequency RF fields into alternating current AC and or and vice versa. In some embodiments the antenna may be used with a radio transmitter or a radio receiver. In some embodiments the antenna may be used in computer and or internet wireless applications.

In some embodiments a retail location may include a single antenna . In some embodiments a retail location includes a set of antennas . In some embodiments one or more antennas may be arranged inside of a retail store at a retail location . In some embodiments one or more antennas may be arranged outside of a retail store but at a retail location . In some embodiments the antennas are arranged in a triangular shape at a retail location . In some embodiments the antennas are arranged around a plurality of point of sale locations at the retail location . The set of antennas may detect a signal within a range from the retail location . In some embodiments the set of antennas may detect a signal from a mobile device within a range of the retail location . For example as illustrated in a first set of antennas may be arranged in a triangular formation inside of a retail store to detect a mobile device and a second set of antennas may be arranged in a triangular formation outside the retail store but around fuel dispensing locations to detect a mobile device .

In some embodiments the range may be based on the property boundaries of the retail location . In some embodiments the range may be based on the location of various points of sale locations at the retail location for example and without limitation inside of the retail store and outside the retail store . In some embodiments the range may be a distance around the retail location . In some embodiments a set of antennas may detect a signal from more than one mobile device . An antenna may detect any number of mobile devices that are within a range of the antenna .

In reference now to a system for processing electronic payments is shown. A mobile device is in communication with a remote server via back office servers at a retail location . The back office servers are in communication with a point of sale server and point of sale locations 

The mobile device may be any type of computing device for example and without limitation a laptop or notebook computer a server a handheld computer a mobile telephone a portable telecommunication device a personal digital assistant a smartphone a media playing device a gaming system a mobile computing device a device of the IPOD family of devices manufactured by Apple Computer or any other type and or form of computing telecommunications or media device that is capable of communication and that has sufficient processor power and memory capacity to perform the methods and systems described herein.

In some embodiments the mobile device may be operated by a user at a retail location . A mobile application may be executing on the mobile device . The mobile application may be a program or a group of programs designed for an end user. In some embodiments the mobile application is a computer application and or a software application. In an embodiment the mobile device is in communication with the back office servers . In some embodiments the mobile device is in communication with the back office servers via a wireless connection. In some embodiments communications between the mobile device and the back office servers occur across a network. The network can be a WAN LAN or any other embodiment of a network such as those described above. In some embodiments communications between the mobile device and the back office servers occur across the public Internet. In some embodiments communications between the mobile device and the back office servers occur across a virtual private network VPN . In some embodiments communication between the mobile device and the back office servers occur across any form of wide area network. In some embodiments communications between the mobile device and the back office servers occur across a private network.

In some embodiments communications between the mobile device and the back end servers are encrypted using shared secret key encryption. In some embodiments communications between the mobile device and the back end servers are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the mobile device and the back end servers are encrypted using a proprietary encryption scheme.

In some embodiments the back office servers may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments back office servers may be a plurality of servers operated by a plurality of different parties entities and service providers. The back office servers may be located at the retail location or at a remote location.

In some embodiments the back office servers may further include a back end server a server and a server . It should be understood that these separate servers while provided separately in for the sake of explanation may be combined into a single server providing all the same functionality presently described by the separate servers disclosed in or may be further separated into even more components than those described in . The mobile device may communicate with the server the server and the server . In some embodiments the servers of the back office server are in communication with each other via a wireless connection. In some embodiments the servers are in communication with each other via a wired connection. In some embodiments communication between the servers occurs across a network. The network can be a WAN LAN or any other embodiment of a network such as those described above. In some embodiments communication between the servers occurs across the public Internet. In some embodiments communication between the servers occurs across a virtual private network VPN . In some embodiments communication between the servers occurs across any form of wide area network. In some embodiments communication between the servers occurs across a private network.

In some embodiments communication between the servers is encrypted using shared secret key encryption. In some embodiments communication between the servers is encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communication between the servers is encrypted using a proprietary encryption scheme.

In some embodiments the back office servers include a server that is a back end server for the mobile application executing on the mobile device . In some embodiments the server handles direct communication with the mobile device . In some embodiments the server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments server may be a plurality of servers operated by a plurality of different parties entities and service providers. The server may be located at the retail location or at a remote location.

In some embodiments the server may be in communication with the remote server . In some embodiments the server is in communication with the remote server via a wireless connection. In some embodiments communications between the server and the remote server occur across a network. The network can be a WAN LAN or any other embodiment of a network such as those described above. In some embodiments communications between the server and the remote server occur across the public Internet. In some embodiments communications between the server and the remote server occur across a virtual private network VPN . In some embodiments communication between the server and the remote server occur across any form of wide area network. In some embodiments communications between the server and the remote server occur across a private network.

In some embodiments communications between the server and the remote server are encrypted using shared secret key encryption. In some embodiments communications between the server and the remote server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the server and the remote server are encrypted using a proprietary encryption scheme.

In some embodiments the back office server includes a switch server that is a switch between the server the server and the remote server . The switch server may include a temporary database to store a transaction status of a transaction. In some embodiments the switch server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments the switch server may be a plurality of servers operated by a plurality of different parties entities and service providers. The switch server may be located at the retail location or at a remote location.

In some embodiments the switch server may be in communication with the remote server . In some embodiments the switch server is in communication with the remote server via a wireless connection. In some embodiments communications between the switch server and the remote server occur across a network. The network can be a WAN LAN or any other embodiment of a network such as those described above. In some embodiments communications between the switch server and the remote server occur across the public Internet. In some embodiments communications between the switch server and the remote server occur across a virtual private network VPN . In some embodiments communication between the switch server and the remote server occur across any form of wide area network. In some embodiments communications between the switch server and the remote server occur across a private network.

In some embodiments communications between the switch server and the remote server are encrypted using shared secret key encryption. In some embodiments communications between the switch server and the remote server are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the switch server and the remote server are encrypted using a proprietary encryption scheme.

The remote server may be a central server for a cloud based payment system. The remote server may be remotely located from a retail location . In some embodiments the remote server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments the remote server may be a plurality of servers operated by a plurality of different parties entities and service providers.

In some embodiments the operating system for the remote server is a CentOS based operating system. CentOS is a community Linux distribution based on Red Hat Enterprise Linux RHEL . In some embodiments the CentOS version running on the remote server is a CentOS 6.5 32bit version. In some embodiments the CentOS is composed of software packages distributed under free software licenses and the source code for these packages is made public by Red Hat.

In some embodiments the back office server includes a server that is a control box and or a primary server. In some embodiments the server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments the server may be a plurality of servers operated by a plurality of different parties entities and service providers. The server may be located at the retail location or at a remote location.

In some embodiments the server may be a computing device for example and without limitation a computing workstation a desktop computer a laptop or notebook computer a server a handheld computer a mobile telephone a portable telecommunication device a media playing device a gaming system a mobile computing device or any other type and or form of computing telecommunications or media device that is capable of communication and that has sufficient processor power and memory capacity to perform the methods and systems described herein. In some embodiments the server is a fan less small computing device.

In some embodiments the server includes a minimum hardware configuration of 1 GB RAM 16 GB hard drive disk Intel Pentium M processor or 1.4 GHz NIC Ethernet of 10 100 RS232 and RS285 converters PCI serial card.

In some embodiments the back office servers further include a panel box. The panel box may reduce the number of cables connected to the back office servers and or the server . In one embodiment the panel box reduces the number of cables connected to the server from 3 to 1. In some of embodiments in case of a malfunction of the server the panel box can be used to put the payment system on Bypass mode. Bypass mode may allow normal communication between the point of sale servers and the point of sale locations. In some embodiments the panel box may be used to troubleshoot any issues related to the server and or back office servers and allow the retail location to stay fully functional. In some embodiments the panel may allow a retail location to isolate from the back office servers and or server .

In some embodiments the server uses packages to run the related applications. For example and without limitation some of the packages used to run the applications executing on the whizPetro system include Java JDK 6 GCC a C language compiler and OpenSSL for encryption.

The server may include applications executing on the server . In some embodiments the applications may be individual java applications. A java application can be a computer program that is programmed using java language. The java applications can run on any operating system for example and without limitation Windows Solaris Linux or OS X. Each of the java applications may perform different functions tasks for the server . In one embodiment the server includes three individual java applications.

In some embodiments multiple applications may be executing on the server . In an embodiment each application may be assigned and perform a different function for the server . In other embodiments each application is configured to perform the same functions. In some embodiments each application executing on the computing device may be assigned a terminal ID also referred to as a whizpay terminal ID.

In some embodiments a first application may be an application executing on the server . In some embodiments the application may be a communication point between the server point of sale server and point of sale locations . The application may receive and transmit information for the server to the point of sale server the point of sale locations and the server .

In some embodiments the application can be communicatively coupled to multiple point of sale locations at one time. In one embodiment the application is communicatively coupled with up to 8 point of sale locations at one time. At retail locations having more than 8 point of sale locations the server may assign more than one channel or more than one application to communicate with point of sale locations . For example the computing device may assign pumps to the application via a first channel and assign pumps to the application via a second channel. In other embodiments the computing device may assign a second application to pumps . During a transaction application may transmit a request to the server every 3 seconds for the transaction status.

In some embodiments a second application may be an application executing on the server . In some embodiments the application may be responsible for transaction processing. Application may be responsible for handling data related to pre authorization transactions post authorization transactions and any details related to the transaction. In some embodiments the application may be communicatively coupled with the point of sale server and the remote server .

In some embodiments the application receives loyalty program information from point of sale server for a transaction. The application may transmit the loyalty program information and or retail location information to the remote server for transaction processing. In some embodiments the remote server processes the transaction and transmits an acknowledgement to the application indicating that the loyalty program information and or retail location information was received.

In some embodiments a third application may be an application executing on the server . In some embodiments the application may be responsible for processing loyalty information related to a transaction. The application may be communicatively coupled with the point of sale server and the remote server . In an embodiment application is a middleware between the point of sale server and the remote server .

In some embodiments during a transaction the point of sale server transmits a loyalty request to the remote server via the application . The application may receive the loyalty request from the point of sale server and forward the request to the remote server . The remote server determines if the retail location associated with the transaction has a loyalty program. If the remote server determines that the retail location does have a loyalty program the remote server will transmit a response to the application indicating that the loyalty request has been received and processed.

In some embodiments the server adheres all communications in the payment system to be encrypted. In addition to the encryptions the server may apply strict firewall rules. The firewall rules may include blocking all the ports associated with the electronic payment system from outside sources and make the system hard to penetrate. In some embodiments the system may scan for open ports that can affect the network by viruses. In some embodiments the server receives antivirus updates on a regular basis for example an hourly basis which keeps the network secure.

The back office servers may communicate with the point of sale server . The point of sale sever may be a server or computing device of a retail location . In some embodiments the point of sale server is a personal computer of the retail location . In some embodiments the point of sale server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments the point of sale server may be a plurality of servers operated by a plurality of different parties entities and service providers. The point of sale server may be located at the retail location or at a remote location from the retail location .

In some embodiments the point of sale server may be in communication with point of sale locations at a retail location . In some embodiments the point of sale server is in communication with the point of sale locations via a wireless connection. In some embodiments communications between the point of sale server and the point of sale locations occur across a network. The network can be a WAN LAN or any other embodiment of a network such as those described above. In some embodiments communications between the point of sale server and the point of sale locations occur across the public Internet. In some embodiments communications between the point of sale server and the point of sale locations occur across a virtual private network VPN . In some embodiments communication between the point of sale server and the point of sale locations occur across any form of wide area network. In some embodiments communications between the point of sale server and the point of sale locations occur across a private network.

In some embodiments communications between the point of sale server and the point of sale locations are encrypted using shared secret key encryption. In some embodiments communications between the point of sale server and the point of sale locations are encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the point of sale server and the point of sale locations are encrypted using a proprietary encryption scheme.

In some embodiments the system further includes an antenna . In some embodiments the system includes a set of antennas . The antenna may be a device used to transmit and or receive radio television microwave and satellite signals. In some embodiments the antenna may be an electrical device that converts radio frequency RF fields into alternating current AC and or and vice versa. In some embodiments the antenna may be used with a radio transmitter or a radio receiver. In some embodiments the antenna may be used in computer and or internet wireless applications.

In reference now to a flow diagram for processing an electronic payment at a retail location is shown. A set of antennas detect a mobile device within a range of the antennas. The antennas determine the location of the mobile device and a media access control MAC address of the mobile device . The antennas transmit the location and MAC address of the mobile device to a remote server . The remote server stores the MAC address and location information associated with the mobile device . The set of antennas may continually transmit MAC addresses and location information of mobile devices as the mobile devices are detected. The remote server may maintain a database including the MAC addresses and location information associated with the detected mobile devices . The remote server may continually update the database as new information is received.

A mobile application executing on a mobile device receives a request to log in to the mobile application. The log in request including credentials associated with the user is sent to back office servers . The back office servers forward to the credentials to a remote server to validate the user. The remote server receives the credentials associated with the user of the mobile device . The remote server validates the user of the mobile device based on the credentials and accepts the log in request. The remote server transmits a validation response indicating the log in request was successful and provides fueling options based on the location of the mobile device .

The back office servers receive the validation response and fueling options and updates a user interface on the mobile device to display the fueling options. The mobile application executing on the mobile device displays the fueling options to the user. The mobile application receives a fueling selection from the user and sends it to the back office servers . The back office servers forward the fueling selection to the remote server . The remote server receives the fueling selection. The remote server identifies payment options associated with the user. The remote server transmits the payment options associated with the user to the back office servers . The back office servers receive the payment options and updates the user interface on the mobile device . The mobile device displays the payment options to the user. The mobile device receives the payment option selection from the user and sends it to the back office servers . The back office servers transmit the payment selection to the remote server . The remote server receives the payment selection.

The remote server determines the nearest point of sale location to the user based on the location of the mobile device . The remote servers transmit an activation request for the nearest point of sale location and a transaction ID corresponding to the transaction to the back office servers . The back office servers receive the activation request and transaction ID. The back office servers transmit the activation request and the transaction ID to a point of sale server . The point of sale server receives the transaction request ID and the transaction ID. The point of sale server identifies loyalty information and promotions associated with the transaction and applies them to the transaction ID. The point of sale server activates the pump identified in the activation request updates a user interface on the pump to indicate the pump is ready for fueling and transmits the transaction ID to the back office servers . The back office servers update the user interface on the mobile device . The mobile device display indicates the pump the user is standing nearest to is ready for fueling. The mobile device identifies the fueling process is complete. The point of sale server identifies the fueling process is complete. The point of sale server processes the transaction and generates a post authorization request with the loyalty information fueled amount discount amount final transaction amount and transaction ID.

The point of sale server transmits the post authorization request to the back office servers . The back office servers receive the post authorization request. The back office servers transmit the post authorization request to the remote server . The remote server receives the post authorization request. The remote server identifies secure payment information associated with the user using the transaction ID. The remote server processes processes the transaction post authorization request with secure payment information. The remote server generates a receipt for the completed transaction. The remote server transmits the receipt to the back office servers . The back office servers receive the receipt for the transaction. The back office servers update the user interface of the mobile device to display the receipt. The mobile device displays displays the receipt to the user.

In reference now to a flow diagram for processing an electronic payment in a retail location is shown. A point of sale server receives a product selection from a user of a mobile device from an available product list on a point of sale location . A set of antennas detect the mobile device within a range of the antennas. The antennas determine the location of the mobile device . The antennas transmit the location and MAC address of the mobile device to a remote server . The remote server stores the MAC address and location information associated with the mobile device . The set of antennas may continually transmit MAC addresses and location information of mobile devices as the mobile devices are detected. The remote server may maintain a database including the MAC addresses and location information associated with the detected mobile devices . The remote server may continually update the database as new information is received.

A mobile application executing on a mobile device receives a request to log in to the mobile application. The log in request including credentials associated with the user is sent to a back office servers . The back office servers forward the credentials to a remote server to validate the user. The remote server receives the credentials associated with the user of the mobile device . The remote server validates the user of the mobile device based on the credentials and accepts the log in request. The remote server transmits a validation response indicating the log in request was successful and provides payment location options including pay inside option based on the location of the mobile device .

The back office servers receive the validation response and payment location options and updates a user interface on the mobile device to display the payment location options. The mobile application executing on the mobile device displays the payment location options to the user. The mobile application receives a pay inside selection from the user and sends it to the back office servers . The back office servers forward the pay inside selection to the remote server . The remote server receives the pay inside selection.

The remote server identifies payment options associated with the user. The remote server transmits the payment options associated with the user and a transaction ID to the back office servers . The back office servers receive the payment options and transaction ID and updates the user interface on the mobile device . The mobile device displays the payment options as quick response QR codes to the user.

A scanner reads a QR code corresponding to a payment method displayed on the mobile device . The scanner transmits the QR code to the point of sale server . The point of sale server receives receives the QR code. The point of sale server identifies loyalty information and promotions associated with the transaction. The point of sale server transmits the loyalty information and the transaction ID to the back office servers . The back office servers transmit the loyalty information and the transaction ID to the remote server . The remote server receives the loyalty information and the transaction ID.

The point of sale server identifies the transaction is complete. The point of sale server processes the transaction and generates a post authorization request with the loyalty information fueled amount discount amount final transaction amount and transaction ID.

The point of sale server transmits the post authorization request to the back office servers . The back office servers receive the post authorization request. The back office servers transmit the post authorization request to the remote server . The remote server receives the post authorization request. The remote server identifies secure payment information associated with the user using the transaction ID. The remote server processes processes the transaction post authorization request with secure payment information. The remote server generates a receipt for the completed transaction. The remote server transmits the receipt to the back office servers . The back office servers receive the receipt for the transaction. The back office servers update the user interface of the mobile device to display the receipt. The mobile device displays displays the receipt to the user.

In reference now to a system for processing an electronic payment at a retail location is shown. An antenna may detect a signal from at least one of a plurality of mobile devices . In some embodiments the antenna detects a signal from each of the plurality of mobile devices . In some embodiments the antenna detects a signal from a first set of mobile devices . The antenna may determine a first set of MAC addresses for the first set of mobile devices . In some embodiments the antenna detects a signal from a second set of mobile devices . The antenna may determine a second set of MAC addresses for the second set of mobile devices .

In some embodiments the antenna may be a device used to transmit and or receive radio television microwave and satellite signals. In some embodiments the antenna may be an electrical device that converts radio frequency RF fields into alternating current AC and or and vice versa. In some embodiments the antenna may be used with a radio transmitter or a radio receiver. In some embodiments the antenna may be used in computer and or internet wireless applications.

In some embodiments the antenna is a Motorola antenna. In some embodiments the antenna works on advanced tag based location solution ATLS which uses Bluetooth low energy BLE technology which allows a Bluetooth 4.0 device to be precisely located. In some embodiments when mobile devices are within a range of the antenna the antenna may recognize a wireless beacon from a tag associated with at least one mobile device using Bluetooth radio. The antenna may transmit the data to a locator server and or a remote server using Rest JSON API over HTTPS protocol. In some embodiments HTTPS is a secure sockets layer protocol.

The antenna may be in communication with a locator server and a remote server . In some embodiments the antenna is in communication with the server and the remote server via a wireless connection. In some embodiments communications between the antenna and each server can occur across a network. The network can be a WAN LAN or any other embodiment of a network. In some embodiments communications between the antenna and each of the servers can occur across the public Internet. In some embodiments communications between the antenna and each of the servers can occur across a virtual private network VPN . In some embodiments communication between the antenna and each of the servers can occur across any form of wide area network. In some embodiments communications between the antenna and each of the servers can occur across a private network.

In some embodiments communications between the antenna and each of the servers is encrypted using shared secret key encryption. In some embodiments communications between the antenna and each of the servers is encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the antenna and each of the servers is encrypted using a proprietary encryption scheme.

The locator server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments locator server may be a plurality of servers operated by a plurality of different parties entities and service providers. The locator server may be located at the retail location or at a remote location. In some embodiments the locator server may be a component of a central server and or remote server similar to remote server described above with respect to . In some embodiments the locator server may be a component of a back office server similar to the back office servers described above with respect to .

The remote server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments remote server may be a plurality of servers operated by a plurality of different parties entities and service providers. The remote server may be located at the retail location or at a remote location. In some embodiments the remote server may be a component of a central server and or remote server similar to remote server described above with respect to .

The antenna may be in communication with a point of sale location . In some embodiments the point of sale server is a point of sale location at a retail location . In some embodiments the point of sale location may include a credit card terminal CCT and or an electronic cash register ECR similar to those described above with respect to . In some embodiments the antenna is in communication with the point of sale server via a wireless connection. In some embodiments communications between the antenna and the point of sale server can occur across a network. The network can be a WAN LAN or any other embodiment of a network. In some embodiments communications between the antenna and the point of sale server can occur across the public Internet. In some embodiments communications between the antenna and the point of sale server can occur across a virtual private network VPN . In some embodiments communication between the antenna and the point of sale server can occur across any form of wide area network. In some embodiments communications between the antenna and the point of sale server can occur across a private network.

In some embodiments communications between the antenna and the point of sale server is encrypted using shared secret key encryption. In some embodiments communications between the antenna and the point of sale server is encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the antenna and the point of sale server is encrypted using a proprietary encryption scheme.

In reference now to a flow diagram of a method for processing an electronic payment is shown. In a brief overview the method includes receiving from a user secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations determining location information associated with a mobile device based at least in part on the strength of the signal detected by three or more wireless antennas at a retail location determining that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions providing to the mobile device of the user an incentive based at least in part on the determined location information receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating a fuel dispensing station at the fuel dispensing location for use by the user .

A remote server receives from a user secure payment information for use in processing future payment transactions. In some embodiments the user e.g. client customer can register and create an account for a mobile application. In some embodiments the mobile application is a virtual payment system to store payment information on a remote server. The user may create a virtual wallet e.g. mobile wallet for use in future transactions. During the registration process the user can enter payment information to be used to complete and process future transactions. In some embodiments the payment information may include secure payment information for example and without limitation credit card information debit card information gift card information and or any other card or payment information that is supported in the payment industry. The remote server may generate identifications codes for each of the payment methods entered by the user. In some embodiments the identification codes may be referred to as a transaction ID. In some embodiments the identification code may remain valid for the length of the transaction. In one embodiment the identification codes may remain valid for 15 minutes. In other embodiments the lifespan and or time of validity of an identification code may be established for any desired time. In some embodiments a payment transaction may be denied if the respective identification code is no longer valid and or has expired. In some embodiments an identification code may be any computer readable identifier for a customer including a data packet address in memory message file hash or database entry. In some embodiments a transaction ID may be any computer readable identifier for a customer including a data packet address in memory message file hash or database entry.

In some embodiments the secure payment information is stored for the user at a secure location remote from retail locations. The virtual wallet may be maintained in a customer record on a remote server that is remotely located from any retail store locations. In some embodiments the virtual wallet is maintained in a cloud computing network. In some embodiments the user can pay for products and goods at a retail location without using the secure payment information at the retail location. In some embodiments during a payment transaction a retail location never handles or processes the secure payment information.

In some embodiments location information associated with a mobile device is determined based at least in part on the strength of the signal detected by three or more wireless antennas at a retail location. In some embodiments a set of antennas is located at or near a retail location. In some embodiments the set of antennas include 3 antennas. In other embodiments the set of antennas includes any number of antennas. In one embodiment the retail location may only have 1 antenna instead of a set of antennas.

In some embodiments the antennas are arranged in a triangular shape in a retail location. In some embodiments the antennas are arranged around a plurality of point of sale locations at the retail location. The set of antennas may detect a signal within a range from the retail location. In some embodiments the set of antennas may detect a signal from a mobile device within a range of the retail location. In some embodiments the range may be based on the property boundaries of the retail location. In some embodiments the range may be based on the location of various points of sale locations at the retail location. In some embodiments the range may be a distance around the retail location. In some embodiments the set of antennas may detect a signal from more than one mobile device. The set of antennas may detect any number of mobile devices that are within the range of the set of antennas.

In some embodiments the set of antennas may detect the location of the mobile device based on strength of signal of the mobile device and detect a media access control MAC address of the mobile device. The set of antennas may transmit the MAC address of the mobile device and the location of the mobile device to a server.

In some embodiments a locator server receives the MAC address of the mobile device and the location of the mobile device. The locator server may identify a point of sale location in the closest proximity to the mobile device. The locator server may calculate a distance from the mobile device to the point of sale location closest to the mobile device. In some embodiments the locator server may identify that a user of the mobile device is standing in front of or next to a point of sale location. For example in one embodiment the locator server may identify the user of the mobile device is in front of gas pump number 1 at the retail location.

In some embodiments the locator server may identify a location of the user of the mobile device at the retail location. For example in one embodiment the locator server may identify that the user of the mobile device is in 2aisle of a retail location. The locator server may transmit information associated with the mobile device to a central server. In some embodiments the information associated with the mobile device may include an identity of the nearest point of sale location the MAC address of the mobile device and or a location at the retail location of the mobile device.

In some embodiments a determination is made that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions. In some embodiments the central server receives information associated with mobile devices detected at a retail location. The central server may store the information associated with mobile devices in a database. The central server may search the database to identify a customer record associated with a user of at least one of the mobile devices.

In some embodiments the central server may include a database of customer records. In some embodiments a customer record corresponds to a virtual wallet created by a user. In some of the embodiments each of the customer records corresponds to a previous transaction of a user i.e. a user of a mobile device . The customer records may include secure payment information purchase history retail location information loyalty program information and or MAC addresses of mobile devices identified at the time of a previous transaction.

In some embodiments the central server may search the database using payment information. In some embodiments the central server may search the database using characteristics of the mobile device for example a MAC address of the mobile device.

In some embodiments if the central server does not identify a customer record in the database corresponding to the user of the mobile device the central server may establish a new entry e.g. customer record in the database for the respective customer. The central server may link the MAC address of each mobile device detected at the time of a transaction request initiated by the user of the mobile device to the customer record.

In some embodiments the central server identifies a customer record in the database corresponding to the user of the mobile device. In some embodiments the central server determines the identity of the user of the mobile device based on the corresponding customer record.

The customer record may include MAC addresses of mobile devices detected during a previous transaction associated with the user. In some embodiments the central server may compare the MAC addresses from the previous transactions to the addresses identified during the current transaction. The central server may identify MAC addresses present during previous transaction and the current transaction. In some embodiments the central server may eliminate the MAC addresses from the customer record not present during the current transaction.

For example in one embodiment four mobile devices are detected by the antenna at the time of a first transaction request. The first transaction request is received from a user of at least one mobile device detected. The central server may link the MAC addresses of the four mobile devices detected at the time of the transaction to a customer record corresponding to the customer making the transaction request.

If the same customer visits the retail location again at a later time and uses the same payment method the antenna may detect four mobile devices at the time of the second transaction request. The central server may compare the MAC addresses detected during the first transaction request and stored in the customer record to the MAC addresses detected during the second transaction request. In some embodiments the central server will eliminate the MAC addresses form the customer record not present during both the first transaction request and the second transaction request.

In some embodiments for subsequent transaction associated with the same customer the central server may continue to compare MAC addresses detected during a subsequent transaction request to MAC addresses in the respective customer record until the customer record only contains one MAC address. The central server may permanently link the remaining one MAC address to the customer in the customer record.

In some embodiments to determine that at least one mobile device is a mobile device of the user a first set of MAC address of a first set of mobile devices is determined. In some embodiments information relating to a first set of payment transactions at a retail location is associated with the first set of MAC addresses. In some embodiments a second set of MAC addresses of a second set of mobile devices is determined. In some embodiments information relating to a second set of payment transactions at a retail location is associated with the second set of MAC addresses. In some embodiments a determination may be made that a particular MAC address is associated with the user from whom secure payment information was previously received.

In some embodiments the determination is made by comparing information relating to the first set of payment transactions associated with the first set of MAC addresses with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user. Then information relating to the second set of payment transactions associated with the second set of MAC addresses may be compared with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user. A MAC may be identified that is in both the first and the second sets of MAC addresses and that is associated with the first set and the second set of payment transactions associated with the user.

In some embodiments an incentive based at least in part on the determined location information is provided to the mobile device of the user. In some embodiments the incentive is a coupon and or a discount. In some embodiments the incentive is a reminder that the user may use their mobile device to complete the payment utilizing secure payment information previously stored at a secured location remote from retail locations.

In some embodiments a point of sale server may receive information associated with a detected mobile device including the location of the mobile device. In some embodiments the point of sale server may identify loyalty program information applicable for the user of the mobile device. In some embodiments the point of sale server may identify loyalty program information applicable for a current transaction. The loyalty program information may include incentives discounts and or promotions. In some embodiments the loyalty program information is selected based on at least one of a customer record of the user and a current location of the user.

In some embodiments the loyalty program information is displayed to a user via the respective mobile device during a transaction. In some embodiments the loyalty program information is displayed the respective point of sale location via an electronic display during a transaction. The promotions may be generated for the identified user of the mobile device based at least in part on a current location of the user and or a transaction history of the user. The transaction history may be obtained from a corresponding customer record for the user. In some embodiments the promotions may be dependent upon a specific location of the user at the retail location. For example in one embodiment when the mobile device is identified in one section of a retail location a first set of advertisements may be generated. In some embodiments when the mobile device is detected in a second section of the retail location a second set of advertisements may be generated.

In some embodiments the point of sale server identifies loyalty program information applicable to the current transaction and forwards the loyalty program information to the server and or remote server. In some embodiments the loyalty program information is forwarded for pre authorization of a transaction.

In some embodiments the server may receive the loyalty program information and forward the loyalty program information to the remote server for pre authorization. The remote server may apply the loyalty program information to the current transaction to complete the pre authorization. In some embodiments the remote server applies incentives to the current transaction to complete the pre authorization. In some embodiments the remote server may identify secure payment information associated with the user based at least on the customer record and or a virtual wallet. In some embodiments the remote server may identify secure payment information associated with the user using a transaction ID. In some embodiments the remote server may convert the transaction ID into an actual credit card number stored in the customer record and or the virtual wallet to complete the pre authorization.

In some embodiments a request to process a payment transaction at a fuel dispensing location is received. In some embodiments a mobile application executing on a mobile device receives a request to log in to the mobile application. The log in request may include credentials associated with the user of the mobile device. The log in request including credentials associated with the user may be sent to a back office server. In some embodiments the back office server receives the log in request and generates and or retrieves credentials associated with the user from a database. In some embodiments the credentials are received from the user via the mobile device. The back office server may forward the credentials to a remote server central server to validate the log in request.

The remote server may validate the user of the mobile device based on the credentials. In some embodiments to validate the user the remote server may identify a customer record associated with the user based on the received credentials. The remote server may compare the credentials to data stored in the customer record and determine if the received credentials are valid. In response to validating the user the remote server may transmit a response to the back office server indicating if the log in request was successful or unsuccessful. In some embodiments if the log in was unsuccessful the back office server may update a user interface of the mobile device to instruct the user the log in was unsuccessful and to try again.

In some embodiments if the log in was successful the remote server may transmit fueling options to the back office server. The back office server may update the display on the mobile device to display fueling options. In some embodiments the fueling options may include a list of fuel dispensing stations within a range of a current location of the mobile device. The range may be a pre determined distance the user enters into the mobile application for example and without limitations 10 miles. Any distance may be entered by the user and used for a range value by the mobile application. In some embodiments the location may be a future location and not the current location of the mobile device. For example the user may enter a future destination and attempt to locate fueling options on various points on the trip to plan out the trip. In some embodiments the fueling options may include a list of gas pumps at a single fuel dispensing station. In some embodiments the fueling options may include a list of selections at a single gas pump.

The user may select a fueling option listed on the mobile application on the mobile device. The mobile device may receive the fueling selection and transmit the selection to the back office server. The back office server may transmit the fueling selection to the remote server.

In some embodiments responsive to receiving a fueling selection the back office server may perform an application programming interface API call to the remote server over HTTPS protocol to request payment methods from the remote server. The API call may include an identification code e.g. customer ID corresponding to the user retail location information and or the fueling selection.

In some embodiments at least a portion of previously stored secure payment information may be sent to the remotely located server for authorization. The remote server may receive the API call and identify payment information associated with the user. The payment information may be stored in the respective customer record and or virtual wallet for the user. In some embodiments the payment information may include at least a portion of secure payment information previously entered by the user. The remote server may retrieve the secure payment information from in a remote database on a remotely located server. In some embodiments the secure payment information is stored on a central server. The remote server may receive the secure payment information. In some embodiments the remote server may generate a transaction ID corresponding to payment information and or secure payment information.

The remote server may transmit the payment information including payment options to the back office server. In some embodiments the payment information does not include secure payment information. The back office server may receive the payment information and update the screen on the mobile device to display payment options to the user.

The back office server may receive a payment option selection from the user via the mobile device. The back office server may transmit the payment option selection from the user to another server. In some embodiments the server is a component of the back office server. In some embodiments the server is a switch between the back office server and a control box. The server may store the payment option selection in a temporary database. In some embodiments the payment option selection may be stored in the temporary database for the duration of the transaction. In some embodiments the payment option selection may be deleted from the temporary database when the transaction is complete. In some embodiments the server may manage the transaction status.

In some embodiments after sending the payment option selection the back office server may continuously send a transaction status request to the server. In some embodiments the server sends the transaction status request to the server every 2 seconds. In some embodiments during the transaction the server may display the transaction status on the mobile device. In some embodiments the server may display the transaction status on the mobile device with an advertisement. In some embodiments the advertisement is based on the customer record associated with the user for example previous transaction history of the user.

In some embodiments a control server may continuously send a request for a transaction ID to the server. In some embodiments the control server may be a component of the back office server. In some embodiments in response to receiving the payment option selection from the back office server the server may transmit the transaction ID to the control server. In some embodiments the server may transmit the transaction ID with transaction details including the retail location and fueling selection to the control server. The control server may transmit the transaction ID and the transaction details to a point of sale server.

In some embodiments an authorization for the requested payment transaction that does not include secure payment information is sent to the fuel dispensing location. In response to receiving the transaction ID and transaction details the point of sale server may identify loyalty program information applicable for the current transaction. The loyalty program information may include incentives applicable to the current transaction. If the point of sale server identifies loyalty program information applicable to the current transaction the point of sale server may forward the loyalty program information to the control server for pre authorization.

The control server may forward the loyalty program information to the remote server for pre authorization. The remote server may apply the loyalty program information to the current transaction to complete the pre authorization. In some embodiments the remote server applies incentives to the current transaction to complete the pre authorization. In some embodiments the remote server may apply costs associated with the fueling selection to complete the pre authorization. In some embodiments the remote server may identify secure payment information associated with the user using transaction ID. In some embodiments the remote server may convert the transaction ID into secure payment information associated with the user. For example in one embodiment the remote server may convert the transaction ID into a credit card number associated with the user to complete the pre authorization.

In response to completing the pre authorization the remote server may transmit a transaction status update to the server to update the transaction status in the temporary database. The server may forward an updated transaction status to the back office server to update a display on the mobile device. In response to receiving the transaction status update the back office server may update the display on the mobile device.

In some embodiments the remote server may transmit the completed pre authorized transaction to the control server with the transaction ID. The control server may transmit the completed pre authorization transaction and the transaction ID to the point of sale server.

In some embodiments the fuel dispensing station at the fuel dispensing location may be activated for use by the user. In response to receiving the completed pre authorization the point of sale server may activate the fueling pump associated with the transaction. A user interface on the fueling pump may display a prompt to the user indicating the fueling pump is ready and activated.

The point of sale server may monitor the fueling process and wait for notification that the fueling process is complete. The point of sale server may monitor when the fueling pump nozzle has been lifted from the gas pump holder. In some embodiments the point of sale server may monitor when the trigger on the fueling pump is depressed. In some embodiments when the fueling process is complete the point of sale server may transmit a transaction post authorization request to the control server. The transaction post authorization may include the fueled amount and transaction ID.

The control server may transmit the transaction post authorization request to the remote server. In some embodiments the remote server identifies secure payment information associated with the user using the transaction ID. The remote server may process the transaction using the secure payment information. In some embodiments the control server may apply incentives to the transaction based on the loyalty program information.

The remote server may transmit a transaction status update indicating the transaction post authorization is complete to the server. The server may transmit the transaction status update indicating the transaction post authorization is complete to the back office server. The back office server may update the user interface on the mobile device to indicate the transaction is complete

The point of sale server may transmit data related to the transaction to the control server. The control server may transmit data related to the transaction to the remote server. The data related to the transaction may include transaction amount discount amount loyalty program incentive final amount of the transaction and the transaction ID. The remote server may generate a receipt including the data related to the transaction. The remote server may transmit the receipt to the control server. The control server may transmit the receipt to the back office server. The back office server may update the user interface of the mobile device to display the receipt.

In some embodiments all information associated with a payment transaction may be stored in a remote server. In some embodiments a transaction history is maintained for a user of a mobile device in a customer record on the remote server. The remote server may identify based on analytical from previous transactions associated with a user of a mobile device the user s interests and needs. In some embodiments based on identified interests of a user the system can retrieve generate and or display appropriate coupons offers advertisements and various loyalty program information to the user during a current and or subsequent transaction.

In some embodiments a proprietor of a retail location e.g. store owner manager and employee may be able to access a transaction history of a user of a mobile device or a plurality of users of a plurality of mobile devices. In some embodiments the proprietor may be able to identify sections of a retail store that a user frequently visits. In some embodiments the proprietor may be able to identify demographic data related to characteristics of customers for each section of a store. In some embodiments the proprietor may be able to display appropriate promotions offers and advertisements in a respective section of the retail location based on the transaction history.

In reference now to a system for processing electronic payments is shown. A retail location may include a set of antennas located at or near the retail location . In some embodiments the antennas are arranged in a triangular shape. In some embodiments the antennas are arranged around a plurality of point of sale locations at the retail location . The set of antennas can detect a signal within a range from the retail location . In some embodiments the set of antennas may detect a signal from at least one of a plurality of mobile devices . In some embodiments the set of antennas detect a signal from each of the plurality of mobile devices . In some embodiments the set of antennas detect a signal from a first set of mobile devices . The set of antennas may determine a first set of MAC addresses for the first set of mobile devices . In some embodiments the set of antennas detect a signal from a second set of mobile devices . The set of antennas may determine a second set of MAC addresses for the second set of mobile devices .

In some embodiments each of the antennas may be a device used to transmit and or receive radio television microwave and satellite signals. In some embodiments each of the antennas may be an electrical device that converts radio frequency RF fields into alternating current AC and or and vice versa. In some embodiments each of the antennas may be used with a radio transmitter or a radio receiver. In some embodiments each of the antennas may be used in computer and or internet wireless applications.

In some embodiments each of the antennas are a Motorola antenna. In some embodiments each of the antennas works on advanced tag based location solution ATLS which uses Bluetooth low energy BLE technology which allows a Bluetooth 4.0 device to be precisely located. In some embodiments when at least one mobile device is within a range of at least one antenna the antenna may recognize a wireless beacon from a tag associated with the mobile device using Bluetooth radio. Each of the antennas may transmit the data to a locator server and or a remote server using Rest JSON API over HTTPS protocol. In some embodiments HTTPS is a secure sockets layer protocol.

The each of the antennas may be in communication with a point of sale server. In some embodiments the antennas are in communication with the point of sale server via a wireless connection. In some embodiments communications between the antennas and point of sale server can occur across a network. The network can be a WAN LAN or any other embodiment of a network. In some embodiments communications between the antennas and the point of sale server can occur across the public Internet. In some embodiments communications between the antennas and the point of sale server can occur across a virtual private network VPN . In some embodiments communication between the antennas and the point of sale server can occur across any form of wide area network. In some embodiments communications between the antennas and the point of sale server can occur across a private network.

In some embodiments communications between the antennas and the point of sale server is encrypted using shared secret key encryption. In some embodiments communications between the antennas and the point of sale server is encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the antennas and point of sale server is encrypted using a proprietary encryption scheme.

In some embodiments each of the antennas may be in communication with a locator server and a remote server . In some embodiments the antennas are in communication with the locator server and the remote server via a wireless connection. In some embodiments communications between the antennas and each server can occur across a network. The network can be a WAN LAN or any other embodiment of a network. In some embodiments communications between the antennas and each of the servers can occur across the public Internet. In some embodiments communications between the antennas and each of the servers can occur across a virtual private network VPN . In some embodiments communication between the antennas and each of the servers can occur across any form of wide area network. In some embodiments communications between the antennas and each of the servers can occur across a private network.

In some embodiments communications between the antennas and each of the servers is encrypted using shared secret key encryption. In some embodiments communications between the antennas and each of the servers is encrypted using Secure Socket Layer SSL or Transport Layer Security TLS protocols. In some embodiments communications between the antennas and each of the servers is encrypted using a proprietary encryption scheme.

The locator server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments locator server may be a plurality of servers operated by a plurality of different parties entities and service providers. The locator server may be located at the retail location or at a remote location. In some embodiments the locator server may be a component of a central server and or remote server similar to remote server described above with respect to . In some embodiments the locator server may be a component of a back office server similar to the back office servers described above with respect to .

The remote server may be a single server a plurality of servers a server farm or an allocation of computing services provided by a cloud based provider of computer services. In some embodiments remote server may be a plurality of servers operated by a plurality of different parties entities and service providers. The remote server may be located at the retail location or at a remote location. In some embodiments the remote server may be a component of a central server and or remote server similar to remote server described above with respect to .

In reference now to a method for processing an electronic payment at a retail location is shown. In a brief overview the method includes receiving from a user secure payment information for use in processing future payment transactions initiated by a mobile device storing secure payment information for the user at a secure location remote from retail locations detecting MAC addresses for a plurality of mobile devices at a retail location via one or more wireless antennas determining that at least one mobile device of the plurality of mobile devices is a mobile device of a user based at least in part on the MAC address of the mobile device providing to the mobile device of the user an incentive based at least in part on the determined association between the one mobile device and the user receiving from the mobile device a request to process a payment transaction at a fuel dispensing location sending at least a portion of the previously stored secure payment information to a remotely located server for authorization sending to the fuel dispensing location an authorization for the requested payment transaction that does not include secure payment information and activating s fuel dispensing station at the fuel dispensing location for use by the user .

A remote server receives from a user secure payment information for use in processing future payment transactions. In some embodiments the user e.g. client customer can register and create an account for a mobile application. In some embodiments the mobile application is a virtual payment system to store payment information on a remote server. The user may create a virtual wallet e.g. mobile wallet for use in future transactions. During the registration process the user can enter payment information to be used to complete and process future transactions. In some embodiments the payment information may include secure payment information for example and without limitation credit card information debit card information gift card information and or any other card or payment information that is supported in the payment industry.

The remote server may generate identifications codes for each of the payment methods entered by the user. In some embodiments the identification codes may be referred to as a transaction ID. In some embodiments the identification code may remain valid for the length of the transaction. In one embodiment the identification codes may remain valid for 15 minutes. In other embodiments the lifespan and or time of validity of an identification code may be established for any desired time. In some embodiments a payment transaction may be denied if the respective identification code is no longer valid and or has expired. In some embodiments an identification code may be any computer readable identifier for a customer including a data packet address in memory message file hash or database entry. In some embodiments a transaction ID may be any computer readable identifier for a customer including a data packet address in memory message file hash or database entry.

In some embodiments the secure payment information is stored for the user at a secure location remote from retail locations. The virtual wallet may be maintained in a customer record on a remote server that is remotely located from any retail store locations. In some embodiments the virtual wallet is maintained in a cloud computing network. In some embodiments the user can pay for products and goods at a retail location without using the secure payment information at the retail location. In some embodiments during a payment transaction a retail location never handles or processes the secure payment information.

In some embodiments MAC addresses for a plurality of mobile devices at a retail location may be detected via one or more wireless antennas. In some embodiments information associated with a mobile device is determined based at least in part on the strength of the signal detected by three or more wireless antennas at a retail location. In some embodiments a set of antennas is located at or near a retail location. In some embodiments the set of antennas include 3 antennas. In other embodiments the set of antennas includes any number of antennas. In one embodiment the retail location may only have 1 antenna instead of a set of antennas.

In some embodiments the antennas are arranged in a triangular shape in a retail location. In some embodiments the antennas are arranged around a plurality of point of sale locations at the retail location. The set of antennas may detect a signal within a range from the retail location. In some embodiments the set of antennas may detect a signal from a mobile device within a range of the retail location. In some embodiments the range may be based on the property boundaries of the retail location. In some embodiments the range may be based on the location of various points of sale locations at the retail location. In some embodiments the range may be a distance around the retail location. In some embodiments the set of antennas may detect a signal from more than one mobile device. The set of antennas may detect any number of mobile devices that are within the range of the set of antennas.

In some embodiments the set of antennas may detect the location of the mobile device based on strength of signal of the mobile device and detect a media access control MAC address of the mobile device. The set of antennas may transmit the MAC address of the mobile device and the location of the mobile device to a server.

In some embodiments a locator server receives the MAC address of the mobile device and the location of the mobile device. The locator server may identify a point of sale location in the closest proximity to the mobile device. The locator server may calculate a distance from the mobile device to the point of sale location closest to the mobile device. In some embodiments the locator server may identify that a user of the mobile device is standing in front of or next to a point of sale location. For example in one embodiment the locator server may identify the user of the mobile device is in front of gas pump number 1 at the retail location.

In some embodiments the locator server may identify a location of the user of the mobile device at the retail location. For example in one embodiment the locator server may identify that the user of the mobile device is in 2aisle of a retail location. The locator server may transmit information associated with the mobile device to a central server. In some embodiments the information associated with the mobile device may include an identity of the nearest point of sale location the MAC address of the mobile device and or a location at the retail location of the mobile device.

In some embodiments a determination is made that at least one mobile device of the plurality of mobile devices is a mobile device of the user based at least in part on the MAC address of the mobile device. In some embodiments a determination is made that the mobile device is associated with a user who previously provided payment information for use in processing payment transactions. In some embodiments the central server receives information associated with mobile devices detected at a retail location. The central server may store the information associated with mobile devices in a database. The central server may search the database to identify a customer record associated with a user of at least one of the mobile devices.

In some embodiments the central server may include a database of customer records. In some embodiments a customer record corresponds to a virtual wallet created by a user. In some of the embodiments each of the customer records corresponds to a previous transaction of a user i.e. a user of a mobile device . The customer records may include secure payment information purchase history retail location information loyalty program information and or MAC addresses of mobile devices identified at the time of a previous transaction.

In some embodiments the central server may search the database using payment information. In some embodiments the central server may search the database using characteristics of the mobile device for example a MAC address of the mobile device.

In some embodiments if the central server does not identify a customer record in the database corresponding to the user of the mobile device the central server may establish a new entry e.g. customer record in the database for the respective customer. The central server may link the MAC address of each mobile device detected at the time of a transaction request initiated by the user of the mobile device to the customer record.

In some embodiments the central server identifies a customer record in the database corresponding to the user of the mobile device. In some embodiments the central server determines the identity of the user of the mobile device based on the corresponding customer record.

The customer record may include MAC addresses of mobile devices detected during a previous transaction associated with the user. In some embodiments the central server may compare the MAC addresses from the previous transactions to the addresses identified during the current transaction. The central server may identify MAC addresses present during previous transaction and the current transaction. In some embodiments the central server may eliminate the MAC addresses from the customer record not present during the current transaction.

For example in one embodiment four mobile devices are detected by the antenna at the time of a first transaction request. The first transaction request is received from a user of at least one mobile device detected. The central server may link the MAC addresses of the four mobile devices detected at the time of the transaction to a customer record corresponding to the customer making the transaction request.

If the same customer visits the retail location again at a later time and uses the same payment method the antenna may detect four mobile devices at the time of the second transaction request. The central server may compare the MAC addresses detected during the first transaction request and stored in the customer record to the MAC addresses detected during the second transaction request. In some embodiments the central server will eliminate the MAC addresses form the customer record not present during both the first transaction request and the second transaction request.

In some embodiments for subsequent transaction associated with the same customer the central server may continue to compare MAC addresses detected during a subsequent transaction request to MAC addresses in the respective customer record until the customer record only contains one MAC address. The central server may permanently link the remaining one MAC address to the customer in the customer record.

In some embodiments to determine that at least one mobile device is a mobile device of the user a first set of MAC address of a first set of mobile devices is determined. In some embodiments information relating to a first set of payment transactions at a retail location is associated with the first set of MAC addresses. In some embodiments a second set of MAC addresses of a second set of mobile devices is determined. In some embodiments information relating to a second set of payment transactions at a retail location is associated with the second set of MAC addresses. In some embodiments a determination may be made that a particular MAC address is associated with the user from whom secure payment information was previously received.

In some embodiments the determination is made by comparing information relating to the first set of payment transactions associated with the first set of MAC addresses with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user. Then information relating to the second set of payment transactions associated with the second set of MAC addresses may be compared with the previously stored information relating to the user in order to identify one or more payment transactions associated with the user. A MAC may be identified that is in both the first and the second sets of MAC addresses and that is associated with the first set and the second set of payment transactions associated with the user.

In some embodiments an incentive based at least in part on the determined location information is provided to the mobile device of the user. In some embodiments the incentive is a coupon and or a discount. In some embodiments the incentive is a reminder that the user may use their mobile device to complete the payment utilizing secure payment information previously stored at a secured location remote from retail locations.

In some embodiments a point of sale server may receive information associated with a detected mobile device including the location of the mobile device. In some embodiments the point of sale server may identify loyalty program information applicable for the user of the mobile device. In some embodiments the point of sale server may identify loyalty program information applicable for a current transaction. The loyalty program information may include incentives discounts and or promotions. In some embodiments the loyalty program information is selected based on at least one of a customer record of the user and a current location of the user.

In some embodiments the loyalty program information is displayed to a user via the respective mobile device during a transaction. In some embodiments the loyalty program information is displayed the respective point of sale location via an electronic display during a transaction. The promotions may be generated for the identified user of the mobile device based at least in part on a current location of the user and or a transaction history of the user. The transaction history may be obtained from a corresponding customer record for the user. In some embodiments the promotions may be dependent upon a specific location of the user at the retail location. For example in one embodiment when the mobile device is identified in one section of a retail location a first set of advertisements may be generated. In some embodiments when the mobile device is detected in a second section of the retail location a second set of advertisements may be generated.

In some embodiments the point of sale server identifies loyalty program information applicable to the current transaction and forwards the loyalty program information to the server and or remote server. In some embodiments the loyalty program information is forwarded for pre authorization of a transaction.

In some embodiments the server may receive the loyalty program information and forward the loyalty program information to the remote server for pre authorization. The remote server may apply the loyalty program information to the current transaction to complete the pre authorization. In some embodiments the remote server applies incentives to the current transaction to complete the pre authorization. In some embodiments the remote server may identify secure payment information associated with the user based at least on the customer record and or a virtual wallet. In some embodiments the remote server may identify secure payment information associated with the user using a transaction ID. In some embodiments the remote server may convert the transaction ID into an actual credit card number stored in the customer record and or the virtual wallet to complete the pre authorization.

In some embodiments a request to process a payment transaction at a fuel dispensing location is received. In some embodiments a mobile application executing on a mobile device receives a request to log in to the mobile application. The log in request may include credentials associated with the user of the mobile device. The log in request including credentials associated with the user may be sent to a back office server. In some embodiments the back office server receives the log in request and generates and or retrieves credentials associated with the user from a database. In some embodiments the credentials are received from the user via the mobile device. The back office server may forward the credentials to a remote server central server to validate the log in request.

In some embodiments a point of sale server may receive a product selection from a user via a point of sale user interface. In some embodiments the point of sale server may receive the product selection from the user via the point of sale user interface prior to log in request. In some embodiments if the log in was successful the back office server may update the user interface of the mobile device to indicate the log in was successful and display a pay inside option on the mobile application executing on the mobile device. The pay inside option may alert the user to proceed inside the retail location to complete a payment transaction at a point of sale location inside the retail location.

In some embodiments at least a portion of previously stored secure payment information may be sent to the remotely located server for authorization. The back office server may receive a pay inside selection from the user via the mobile device. The back office server may perform an API call to the remote server over HTTPS protocol for payment options. The server may transmit an identification code corresponding to the user of the mobile device and retail location information in the API call to the remote server. The remote server may receive the API call and identify payment options associated with the user. The payment options may be stored in a database on a remote server remotely located from the mobile device and or the retail location. The remote server may generate a transaction ID for the transaction. The transaction ID may correspond to the customer ID and or retail location of the transaction request. The transaction ID may only stay valid for the duration of the transaction. In some embodiments the transaction ID remains valid for a predetermined time period for example and without limitation 15 minutes. If the transaction is not complete within the pre determined time period the transaction ID may be rejected based on an expired transaction ID.

In some embodiments the remote server may generate multiple transaction ID s each transaction ID corresponding to a different payment method associated with the user. The back office server may receive the transaction ID s and update the user interface of the mobile device to display the transaction ID s for the user to select. In some embodiments the back office server may update the user interface of the mobile device to display a quick response QR code corresponding to at least one of the transaction ID s. The back office server may receive a selection from the user via the mobile application executing on the mobile device. In some embodiments the back office server may update the user interface of the mobile device to only display the selected QR code.

In some embodiments a scanner may read the QR code displayed on the user interface of the mobile device. In some embodiments the mobile device may be placed in front of the scanner and the scanner reads the user interface of the mobile device to scan the QR code. The scanner may be a component of a point of sale server and or a point of sale location in a retail location. The scanner may transmit the QR code to the point of sale server.

In some embodiments an authorization for the requested payment transaction that does not include secure payment information is sent to the fuel dispensing location. The point of sale server may analyze the QR code to identify the user and the retail location associated with the transaction. The point of sale may identify loyalty program information including incentives associated with the transaction. The loyalty program information may be based at least in part on the user and or the retail location. The point of sale server may generate a loyalty pre authorization request including the loyalty program information and transmit the loyalty pre authorization request to the server.

In some embodiments the server may receive the loyalty pre authorization request and transmit the loyalty pre authorization request to the remote server. The remote server may receive the loyalty pre authorization request. In some embodiments the remote server may approve the loyalty pre authorization request and generate a loyalty pre authorization response. The remote server may transmit the loyalty pre authorization response to the control server.

In some embodiments the server may receive the loyalty pre authorization response and transmit the loyalty pre authorization response to the point of sale server. The point of sale server may receive the loyalty pre authorization response and identify the transaction ID associated with the response. The point of sale server may transmit the loyalty pre authorization response with the transaction ID to the server. In some embodiments the server may receive the loyalty pre authorization response and transmit the loyalty pre authorization response and the transaction ID to the remote server. The remote server may receive the loyalty pre authorization request and the transaction ID.

In some embodiments the remote server processes the loyalty pre authorization request. The remote server may identify secure payment information associated with the user based on the transaction ID. The remote server may apply the loyalty pre authorization request to the transaction and calculate a purchase amount. The purchase amount may be based on the total price of the purchase and any incentives applicable to the transaction and or the user.

In some embodiments the fuel dispensing station at the fuel dispensing location may be activated for use by the user. In some embodiments the remote server will transmit the loyalty pre authorization response to the server. The loyalty pre authorization response may include the purchase amount with incentives applied to the transaction and the transaction ID. The server may receive the loyalty pre authorization response and transmit the loyalty pre authorization response and the transaction ID to the point of sale server. In some embodiments the point of sale server may receive the loyalty pre authorization response and activate the respective point of sale location. In some embodiments the point of sale server may receive the loyalty pre authorization response and generate a post authorization request. The post authorization request may include the purchase amount and the transaction ID.

In some embodiments the point of sale server may transmit the post authorization request to the server. In some embodiments the server may transmit the post authorization request to the remote server. The point of sale server may transmit the transaction details to the server. The server may transmit the transaction details to the remote server. The transaction details may include the transaction amount an incentive amount a final amount of the purchase and the transaction ID. In some embodiments the remote server may receive the transaction details and generate a receipt for the transaction. The remote server may transmit the transaction receipt to the server. The server may receive the transaction receipt and transmit the transaction receipt to the back office server. The back office server may update the user interface of the mobile device to display the transaction receipt. In some embodiments the point of sale server may print the transaction receipt.

In reference now to a flow diagram for processing an electronic payment at a retail location is shown. A back end server receives credentials from a log in request from a user via a mobile device . The back end server transmits the credentials to a remote server to validate the user. The remote server receives the credentials associated with the user of the mobile device . The remote server validates the user of the mobile device based on the credentials and accepts the log in request. The remote server transmits a validation response indicating the log in request was successful and provides fueling options based on the location of the mobile device . The back end server receives the validation response and fueling options and updates a user interface on the mobile device to display the fueling options.

The back end server receives a fueling selection from a user of the mobile device . The back end server forwards the fueling selection to the remote server . The remote server receives the fueling selection. The remote server identifies payment options associated with the user. The remote server transmits the payment options associated with the user to the back end server . The back end server receives the payment options and updates the user interface on the mobile device .

The back end server receives the payment selection from the user of the mobile device . The back end server transmits to the payment selection to the switch . The switch may be part of the back office server for example the switch can be the switch server that is a switch between the server the server and the remote server as described above with respect to . The switch stores the payment selection and manages the status of the transaction in a temporary database. A primary server transmits a request for details of the transaction to the switch . The switch receives the request for the details of the transaction. The switch transmits transaction details including the payment selection and the fueling selection to the primary server . The primary server requests loyalty program information related to the transaction from a point of sale server . The primary server receives loyalty program information from the point of sale server . The primary server transmits a pre authorization request including the loyalty program information to the remote server . The remote server receives the pre authorization request with the loyalty program information. The remote server processes the pre authorization request with secure payment information. The remote server transmits the pre authorization response indicating the pre authorization is complete to the primary server . The remote server transmits a transaction status update to the switch indicating the pre authorization is complete. The switch transmits a transaction status update to the back end server . The back end server updates the user interface of the mobile device to indicate the pre authorization is complete.

The primary server transmits the completed pre authorization request to the point of sale server to activate the respective fueling location. The primary server receives a post authorization request including the fueled amount total purchase price and loyalty program information from the point of sale server when the fueling is complete. The primary server transmits the post authorization request to the remote server . The remote server receives receives the post authorization request. The remote server processes processes the post authorization request with secure payment information. The remote server generates a receipt for the completed transaction. The remote server transmits the receipt to the switch . The switch receives the receipt for the completed transaction and transmits the receipt to the back end server . The back end server receives the receipt and updates the user interface on the mobile device to display the receipt.

