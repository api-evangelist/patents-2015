---

title: Information processing system
abstract: An information processing system includes multiple network segments to which one or more information processors are connectable. The network segments includes a first network segment to which at least one first information processor configured to store predetermined information is connected, a second network segment to which at least one second information processor is connected, and a third network segment to which at least one third information processor is connected. The second network segment includes multiple predefined application programming interface (API)s, and the at least one second information processor executes a process corresponding to a called one of the APIs using the predetermined information stored in the at least one first information processor. In response to receiving a request from outside the information processing system, the at least one third information processor controls a process corresponding to the request by calling one of the APIs which corresponds to the request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09398084&OS=09398084&RS=09398084
owner: Ricoh Company, Ltd.
number: 09398084
owner_city: Tokyo
owner_country: JP
publication_date: 20150916
---
The present application is a continuation of U.S. patent application Ser. No. 14 171 923 filed on Feb. 4 2014 which is based upon and claims the benefit of priority of Japanese Patent Applications No. 2013 021574 filed on Feb. 6 2013 and No. 2014 008663 filed on Jan. 21 2014. The disclosures of the prior applications are hereby incorporated herein in their entirety by reference.

Recently it has been becoming popular to provide services using software provided on a network such as the Internet without execution of application programs in information processors directly operated by users. Cloud services are known as such form of providing services.

Reference may be made to for example Japanese Laid Open Patent Application No. 2011 192250 for related art.

According to an aspect of the present invention an information processing system includes multiple network segments to which one or more information processors are connectable. The network segments includes a first network segment to which at least one first information processor configured to store predetermined information is connected a second network segment to which at least one second information processor is connected and a third network segment to which at least one third information processor is connected. The second network segment includes multiple predefined application programming interface API s and the at least one second information processor executes a process corresponding to a called one of the APIs using the predetermined information stored in the at least one first information processor. In response to receiving a request from outside the information processing system the at least one third information processor controls a process corresponding to the request by calling one of the APIs which corresponds to the request.

According to an aspect of the present invention an information processing system includes multiple information processors which includes at least one first information processor connected to a first network segment at least one second information processor connected to a second network segment and at least one third information processor connected to a third network segment. The at least one first information processor stores predetermined information. The at least one second information processor includes multiple predefined application programming interface API s and executes a process corresponding to a called one of the APIs using the predetermined information stored in the at least one first information processor. In response to receiving a request from outside the information processing system the at least one third information processor controls a process corresponding to the request by calling one of the APIs which corresponds to the request.

The object and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the claims.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory and not restrictive of the invention.

There may be a chance of providing further additional values to apparatus users if services concerning apparatuses such as image forming apparatuses as well may be provided as services provided through a network as typified by cloud services.

According to an aspect of the present invention an information processing system capable of providing services that cooperate with apparatuses is provided.

A description is given below with reference to the accompanying drawings of embodiments of the present invention. is a diagram for illustrating the relationship between a cloud service system and apparatuses according to an embodiment of the present invention. Referring to a cloud service system and apparatuses in an apparatus usage environment are connected by a network N such as a wide area network WAN typified by the Internet so as to be able to communicate with each other.

The apparatus usage environment is an environment where apparatuses capable of cooperating with services provided by the cloud service system are used. Examples of the apparatus usage environment include an office or the like in an enterprise. Referring to the apparatus usage environment includes an image forming apparatus a projector a video conference apparatus and a personal computer PC as examples of apparatuses. Hereinafter the image forming apparatus the projector the video conference apparatus and the PC may be collectively referred to as apparatuses . 

The image forming apparatus is for example a multifunction machine a printer a scanner a facsimile machine or the like. The projector is an apparatus that projects image data. The video conference apparatus is an apparatus used in a video conference. Embodiments of the present invention may also be applied to apparatuses other than the apparatuses illustrated in .

The cloud service system is a group of one or more computers information processors that provide various kinds of services with which the apparatuses are capable of cooperating hereinafter referred to as apparatus cooperation services as cloud services. Examples of apparatus cooperation services include the service of storing image data scanned by and transferred from the image forming apparatus in a predetermined storage hereinafter referred to as cloud scan service and the service of causing the image forming apparatus to download print data uploaded in advance to the cloud service system and to execute a print job based on the print data hereinafter referred to as cloud print service .

The apparatus cooperation services may not be necessarily provided as cloud services. For example the cloud service system may be a server side system in a common client server system. Furthermore the network N may be a local area network LAN .

The functions of the cloud service system are classified into five layers which are an application layer L a common service layer L a database layer L a management layer L and an operation layer L. Of these the three layers of the application layer L the common service layer L and the database layer L are directly related to the provision of apparatus cooperation services. On the other hand the management layer L and the operation layer L are layers related mainly to the maintenance management development or the like of the cloud service system .

The application layer L is a layer in which server side applications hereinafter referred to as server applications related to apparatus cooperation services are implemented. Referring to the application layer L includes a portal application a scan application and a print application . The portal application is a server application that provides the portal sites of apparatus cooperation services. In the portal sites it is possible to register user information and set configuration information with respect to server applications user by user. The scan application is a server application that executes a server side process with respect to the above described cloud scan service. The print application is a server application that executes a server side process with respect to the above described cloud print service.

The common service layer L is a layer that includes functions common to multiple server applications or basic functions used by multiple server applications. The functions of the common service layer L may be called through a predefined platform application programming interface API . The platform API is basically called from a server application in the application layer L. The platform API may be made open to a third party vendor different from the operator of the cloud service system . In this case server applications may be implemented by the third party vendor. That is server applications are suitably developed and added using the platform API .

Referring to the common service layer L includes an authentication part an organization management part a user management part a license management part an apparatus management part a temporary image management part an image processing control part and a log collection part

The authentication part performs authentication and authorization with respect to users and the apparatuses that access the cloud service system . The authorization includes determining whether to authorize a user or apparatus to access a service that is an access target. For example the authorization is performed based on the presence or absence of a license for a service that is a target access.

The organization management part the user management part the license management part the apparatus management part and the temporary image management part provide access to an organization information storage part a user information storage part a license information storage part an apparatus information storage part and a temporary image storage part respectively in the database layer L. The access provides an interface for writing information to and reading information from a corresponding storage part.

The image processing control part controls a workflow with respect to the processing of data such as image data. The workflow with respect to image processing refers to a process flow constituted by sequencing one or more processing units whose target of processing is data. The image processing control part includes a message queue and workers . The workers execute processing on data. Referring to an image conversion part and an image transmission part are illustrated as examples of the workers . The image conversion part converts data formats and performs optical character recognition OCR with respect to data. The image transmission part transmits image data to an online storage or the like outside the cloud service system for example. Each of the image conversion part and the image transmission part which is indicated by a single rectangle in may be implemented function by function in different software modules.

The message queue manages requests for processing processing requests to the workers using a storage area of a queue structure. The message queue which is indicated by a single rectangle in may be provided for each worker . That is the message queue may be provided in correlation with the corresponding worker . The transmission of processing requests stored in the message queue to the workers may be of either a PUSH type or a PULL type. In the PUSH type transmission processing requests registered with the message queue are transmitted to the workers by the message queue . In the PULL type transmission each worker polls the message queue and if a processing request is included in the message queue extracts the processing request. The presence of the message queue makes it possible for each worker to execute processing asynchronously with a processing request. As a result it is possible to reduce the necessity for a requestor of processing to wait for the completion of the processing by the workers

The log collection part collects logs related to processes executed in the application layer L and the common service layer L from each part and stores the collected logs in a log information storage part in the database layer L. The form of collecting logs may also be either a PUSH type or PULL type.

The database layer L is a layer including a database that stores various kinds of information. Referring to the database layer L includes the log information storage part the organization information storage part the user information storage part the license information storage part the apparatus information storage part the temporary image storage part a job information storage part and an application information storage part

The log information storage part stores logs collected by the log collection part . The organization information storage part stores the attribute information of each of organizations of the cloud service system hereinafter referred to as organization information . The term organization refers to a group of one or more users of which examples include enterprises or other associations. The organization information includes an organization ID for identifying the organization. The user information storage part stores the attribute information of each user belonging to the organization hereinafter referred to as user information . The user information includes a user ID for identifying the user and a password used for authenticating the user. The user information includes the organization ID of an organization to which the user belongs as well. This is because it is satisfactory if the uniqueness of the user ID is guaranteed within the organization. That is in this embodiment each user is identified by the combination of an organization ID and a user ID.

The license information storage part stores with respect to each organization information on a license possessed by the organization. The license is a license for an apparatus cooperation service. The apparatus cooperation service is basically in one to one correspondence with a server application. Accordingly the license for an apparatus cooperation service may also be a license for a server application.

The apparatus information storage part stores the attribute information of an apparatus used in an organization hereinafter referred to as apparatus information . The apparatus information includes for example identification information for identifying the machine body individual body of each apparatus .

The temporary image storage part stores a temporary image. The temporary image is data temporarily generated by processing by the workers . Although the term image is used for convenience purposes the temporary image does not necessarily have to be image data. For example the temporary image may be text data. The job information storage part stores information related to processing by the workers . The application information storage part stores with respect to each organization or user configuration information with respect to a server application available to the organization or user.

Basically the server application may access each storage part of the database layer L through a corresponding management part in the common service layer L. The application information storage part however may be directly accessed by each server application.

The management layer L is a layer where functions for maintaining and managing the cloud service system are implemented. Referring to the management layer L includes a monitoring part a deployment part an account management part and a login management part

The monitoring part monitors the operations of the application layer L the common service layer L and the database layer L which are hereinafter referred to as upper three layers and detects the occurrence of an abnormality. The deployment part performs software deployment installation upgrading etc. for the upper three layers. The account management part manages the account of a manager who may log into each of the below described servers of the upper three layers. The manager refers to a user in an organization that operates the cloud service system and is a term for making a distinction from a user in the apparatus usage environment .

The login management part operates as a platform for logging into the above mentioned servers by the manager. That is the manager may log into each server via the login management part

The operation layer L is a layer where functions for operations carried out by the cloud service system are implemented. Referring to the operation layer L includes a customer information management part a contract management part a sales management part a license management part and a development environment provision part

The customer information management part manages information on customers. The customers are basically organizations. The contract management part manages information on contracts made with customers in their usage of apparatus cooperation services. The sales management part manages information on the sales of apparatus cooperation services. The license management part manages with respect to each customer information on a license possessed by the customer. The license management part in the operation layer L registers information to be set on the operator side and updates the registered information. The information to be set on the operator side includes for example license registration and deletion information. On the other hand the license management part in the common service layer L registers information to be set on the user side and updates the registered information. The information to be set on the user side includes information on for example the start of use of a license and the end of use of a license.

The development environment provision part provides a developer with a development environment of software with respect to the upper three layers. The developer is for example a developer in an enterprise that operates the cloud service system . The development environment provided by the development environment provision part may be made open to software vendors outside the enterprise.

The functional configuration of the cloud service system may be implemented as illustrated in . is a diagram illustrating a second functional configuration of a cloud service system according to an embodiment of the present invention. In the same elements as those of are referred to by the same reference characters and their description is omitted.

Referring to a domain specific service layer L is provided between the application layer L and the common service layer L. The domain specific service layer L is a layer that provides services of higher completeness coarser granularity or higher applicability than the common service layer L. The services provided by the domain specific service layer L are available through a domain specific API . The domain specific API is an API of coarser granularity than the platform API . The domain specific API may also be made open to the outside.

Referring to the common service layer L includes a scan logic part and a print logic part . The scan logic part executes a logic part of the cloud scan service. The logic part of the cloud scan service is the function of the scan application except for a user interface UI function in the configuration of . The user interface function mainly refers to the function of generating and providing a Web UI Web page . Accordingly in the configuration of the main function of the scan application is related to the user interface function as a result of using the scan logic part

The print logic part executes a logic part of the cloud print service. The logic part of the cloud print service is the function of the print application except for a user interface function in the configuration of . Accordingly in the configuration of the main function of the print application is related to the user interface function as a result of using the print logic part

The provision of the domain specific service layer L and the provision of the domain specific API make it possible to reduce the amount of source codes to be implemented when other cloud services or the like cooperate with apparatus cooperation services for example. That is a single function or method hereinafter collectively referred to as method of the domain specific API provides a function close to a server application by calling multiple methods of the platform API . Accordingly the domain specific API is effective in such a case where early cooperation with a service is desired although the service is ready made. Furthermore a server application having multiple functions may be implemented using the domain specific API .

On the other hand in the case where it is desired to implement a unique server application it is preferable to use the platform API .

The front end segment g is the forefront segment to the network N. A firewall FW is provided between the front end segment g and the network N.

The connecting segment g is a segment for connecting the front end segment g to the application segment g the common service segment g the database segment g and the management segment g via a firewall FW. Gateways such as an Internet gateway an operation gateway and a management gateway are connected to the connecting segment g. In this embodiment gateways are apparatuses that balance a load of processing with respect to an external message and determine whether to allow passage of a message. Firewalls FW also determine whether to allow passage of a message. The difference however lies in that while firewalls FW monitor the TCP IP layers gateways monitor the HTTP layer which is a layer higher than the TCP IP layer. For example firewalls FW determine whether to allow passage of a packet based on the IP address of at least one of the source and the destination of the packet and a port number. On the other hand gateways determine whether to allow passage of a message based on for example the uniform resource locator URL of the destination of the message.

The Internet gateway is a gateway that processes messages via the network N. Accordingly messages via the network N are first received by the Internet gateway .

The operation gateway is a gateway that processes messages from the operation segment g. The operation segment g corresponds to part of the intra WAN of the operator operating enterprise of the cloud service system . The other segments g through g also constitute the intra WAN. Accordingly for example when a developer or the like of software related to the cloud service system tests or uses a server application using a computer connected to the operation segment g a message from the computer is received by the operation gateway via the intra WAN without going through the network N.

The application segment g is a segment corresponding to the application layer L and the domain specific service layer L in . An application gateway an application server and a domain specific server are connected to the application segment g.

The application gateway is a gateway that processes messages to the application segment g. The application server is a computer that implements the application layer L. That is a server application is implemented in the application server . Referring to two housings are graphically represented with respect to the application server . This indicates that the application server has a redundant configuration. The same is the case with other servers. A redundant configuration may also be adopted for a server for which only one housing is graphically represented.

The domain specific server is a computer that implements the domain specific service layer L. Accordingly the domain specific API is provided by the domain specific server . Furthermore one or more programs that cause a computer to operate as the scan logic part and the print logic part are installed in the domain specific server .

In the case where a third party vendor different from the operator of the cloud service system implements a server application for example the application segment g may be divided into a segment under the management of the operator and a segment available to the third party vendor.

The common service segment g is a segment corresponding to the common service layer L. That is the platform API is provided by a group of computers connected to the common service segment g. The platform API and the domain specific API are called via a network. For example representational state transfer REST may be used in implementing an API via a network. Alternatively the platform API and the domain specific API may be implemented using other communication protocols.

A common service gateway a log collection server a management server a queue server an image transmission server and an image conversion server are connected to the common service segment g. The common service gateway is a gateway that processes messages to the common service segment g. The log collection server is a computer that operates as the log collection part . That is a program that causes a computer to operate as the log collection part is installed in the log collection server . The management server is a computer that operates as the authentication part the organization management part the user management part the apparatus management part and the license management part . That is one or more programs that cause a computer to operate as the authentication part the organization management part the user management part the apparatus management part and the license management part are installed in the management server . The parts through implemented by the management server may be implemented by different computers respectively.

The queue server is a computer that operates as the message queue . That is a program that causes a computer to operate as the message queue is installed in the queue server . The image transmission server is a computer that operates as the image transmission part which is one of the workers . That is a program that causes a computer to operate as the image transmission part is installed in the image transmission server . The image conversion server is a computer that operates as the image conversion part which is one of the workers . That is a program that causes a computer to operate as the image conversion part is installed in the image conversion server .

The queue server the image transmission server and the image conversion server constitute the image processing control part

The database segment g is a segment corresponding to the database layer L of . A database gateway a log information storage server a temporary image storage server a management information storage server and an application information storage server are connected to the database segment g.

The database gateway is a gateway that processes messages to the database segment g. The log information storage server is a computer that operates as the log information storage part . The temporary image storage server is a computer that operates as the temporary image management part and the temporary image storage part . The management information storage server is a computer that operates as the organization information storage part the user information storage part the license information storage part the apparatus information storage part and the job information storage part . The application information storage server is a computer that operates as the application information storage part . In the computers in the database segment g programs for example database management system DBMS s that cause the computers to operate as the corresponding storage parts are installed.

The management segment g is a segment corresponding to the management layer L. A monitoring server an account management server a deployment server and a login management server are connected to the management segment g.

The monitoring server is a computer that operates as the monitoring part . That is a program that causes a computer to operate as the monitoring part is installed in the monitoring server . The account management server is a computer that operates as the account management part . That is a program that causes a computer to operate as the account management part is installed in the account management server . The deployment server is a computer that operates as the deployment part . That is a program that causes a computer to operate as the deployment part is installed in the deployment server . The login management server is a computer that operates as the login management part . That is a program that causes a computer to operate as the login management part is installed in the login management server .

The operation segment g is a segment corresponding to the operation layer L of . An information management server and a development server are connected to the operation segment g. The information management server is a computer that operates as the customer information management part the contract management part the sales management part and the license management part . That is one or more programs that cause a computer to operate as these parts through are installed in the information management server . The development server is a computer that operates as the development environment provision part . That is a program that causes a computer to operate as the development environment provision part is installed in the development server .

The license management part in the information management server copies license information stored in the information management server to the license management part in the management server of the common service segment g. A message for this copy is transmitted to the license management part via the management gateway . That is the management gateway is used for the license management part to copy license information to the license management part . The license information is information of extremely high confidentiality. Therefore the management gateway that restricts messages with higher security is used in copying the license information.

Furthermore in a network group n which starts at the connecting segment g and ends at the management segment g is a network group that is used to transmit messages received in the gateways through in the connecting segment g perform communications according to the messages and perform communications for the monitoring of servers by the monitoring server . The network group n is a group of networks each connecting corresponding two of the segments between the connecting segment g and the management segment g. That is the segments are connected by independent networks each connecting corresponding two of the segments. A firewall FW not graphically represented is provided in each of the inter segment networks. Accordingly high security is ensured for inter segment communications as well.

The network group n does not reach the operation segment g in order to prevent access to the operation segment g intra WAN from outside the intra WAN of the operator of the cloud service system .

Furthermore a network group n which starts at the operation segment g and ends at the application segment g is a network group used to access the segments from the operation segment g for operation purposes. The network group n is a group of networks each connecting corresponding two of the segments between the operation segment g and the application segment g. A firewall FW not graphically represented is provided in each of the inter segment networks.

As illustrated in the network of the cloud service system is divided into segments corresponding to the layers in the functional configuration of . The layers are classified by functional or obligational commonality. Furthermore the calling relationship between parts over layers has commonality layer by layer. Accordingly with respect to firewalls FW whether to allow passage of a message may be set not server by server but segment by segment. If there is an exceptional server settings may be configured with respect to the exceptional server.

For example is a diagram illustrating communications allowed by a firewall. illustrates the contents of an allowed communication such as a communication protocol or a communication purpose with respect to each combination of a communication source segment and a communication destination segment. In SSH Secure Shell is a communication protocol used for authentication. Furthermore INTERNET corresponds to the network N in this embodiment.

According to communications from the Internet are allowed with respect to the application segment g and are not allowed with respect to other segments. Exceptionally however communications regarding an authentication request are allowed with respect to the common service segment g.

Furthermore communications from the application segment g to the common service segment and the database segment g are allowed. The communications from the application segment g to the common service segment g include calling the platform API and transferring a log to the log collection server . The communications from the application segment g to the database segment g are mainly communications for accessing the application information storage server .

Furthermore communications from the common service segment g to the Internet the application segment g and the database segment g are allowed. As described below the communications from the common service segment g to the Internet are required in the case of storing image data in an external storage such as a storage service. The communications from the common service segment g to the application segment g are mainly communications for transmitting a response to a processing request registered with the queue server . That is because the response is made asynchronously with the processing request is called back the communications from the common service segment g to the application segment g need to be allowed. The communications from the common service segment g to the database segment g are communications for accessing the storage parts in the database layer L from the common service layer L.

Communications for transferring logs from the database segment g to the common service segment g are allowed.

Communications from the management segment g to the application segment g the common service segment g and the database segment g are allowed.

Communications from the operation segment g to the application segment g the common service segment g and the management segment g are allowed.

Basically communications from any segment to the operation segment g are prevented. Exceptionally however communications from the license management part in the management server of the common service segment g to the license management part of the information management server of the operation segment g are allowed.

Furthermore is a diagram for illustrating control of communications by each gateway. illustrates with respect to each URL path a destination to which each gateway transfers when receiving a message related to a URL including the path the received message. In hyphen indicates that passage of a message related to the corresponding URL is prevented. Furthermore 1 indicates that in addition to HTTP communications an HTTPS HTTP over SSL TLS communication is received and an SSL server certificate is returned. Furthermore 2 indicates that an HTTPS communication is received and an SSL client certificate is returned. In some URL paths are omitted. For example home indicates home and other URLs that start with home . The same applies to other URLs.

For example messages having a URL path home may be received by the Internet gateway the operation gateway and the application gateway . These gateways and transfer the messages to the application server . The messages basically relate to requests to obtain a Web UI Web page .

Messages having a URL path dscan or dprint may be received by the Internet gateway the operation gateway and the application gateway . These gateways and transfer the messages to the domain specific server . Specifically dscan corresponds to the scan logic part and dprint corresponds to the print logic part

Messages having a URL path login may be received by the Internet gateway the operation gateway the management gateway and the common service gateway . These gateways and transfer the messages to the authentication part of the management server . The messages relate to authentication requests.

Messages having a URL path jobqueue may be received by the common service gateway . The common service gateway transfers the messages to the queue server .

Messages having a URL path tmpfile may be received by the database gateway . The database gateway transfers the messages to the temporary image storage server .

Messages having a URL path license may be received by the management gateway . The management gateway transfers the messages to the authentication part of the management server . The messages relate to requests to copy license information from the license management part of the information management server .

Messages having a URL path logbrowser may be received by the operation gateway . The operation gateway transfers the messages to the log collection server . The messages relate to requests to obtain a log at the time of viewing logs. The viewing of logs is authorized in the operation layer L. That is users of the apparatus usage environment are not authorized to view logs. Accordingly the Internet gateway is prevented inhibited from receiving these messages.

Referring back to to each of the segments g through g computers corresponding to the functional parts in a layer in corresponding to the segment are connected. By thus installing computers unit by unit with respect to the units classified by functional commonality it is possible to flexibly address unbalanced loads on functions. That is the frequency of use and the load may differ from function to function. When loads on functions are not balanced it is possible to easily level loads on servers by adding one or more computers corresponding to a functional part whose frequency of use or load is high. Specifically for example if a load on an image processing server is extremely high so that processing by the image processing server has become a bottleneck it is possible to reduce the load by adding a computer to the computer s of the image processing server.

In view of facilitating the addition of a computer scaling out the computers gateways and firewalls FW illustrated in may be implemented by virtual machines. In this case each segment also is virtualized.

Furthermore according to this embodiment a segment that requires higher security is located at a position more distant from the network N such as the Internet. Specifically the database segment g which corresponds to the database layer L in which information specific to users and should not be leaked such as log information organization information user information license information apparatus information and temporary images is stored is located deeper than the application segment g and the common service segment g. As a result it is possible to ensure high security with respect to the above described information.

Next a description is given of hardware configurations of computers. is a diagram illustrating a hardware configuration of each of computers of a cloud service system according to an embodiment of the present invention. Each computer includes a drive unit a secondary storage device a memory device a central processing unit CPU and an interface unit all of which are interconnected by a bus B.

A program that implements processing in each computer is provided by a recording medium such as a CD ROM. When the recording medium containing a program is loaded into the drive unit the program is installed into the secondary storage device from the recording medium via the drive unit . The program however does not necessarily have to be installed from the recording medium and may be downloaded from another computer via a network. The secondary storage device stores the installed program and stores files and data.

The memory device reads a program from the secondary storage device and stores the program in response to a command to activate the program. The CPU executes functions pertaining to the computer in accordance with the program stored in the memory device . The interface unit is used as an interface for connecting to a network.

On the other hand the image forming apparatus has for example the software configuration as illustrated in . is a diagram illustrating a software configuration of an image forming apparatus according to an embodiment of the present invention. Referring to the image forming apparatus includes one or more client applications hereinafter collectively referred to as client application and an application platform .

The client application is an application that provides an apparatus cooperation service to users using the domain specific API . Basically the client application implements a UI function a screen display function and a control function of the image forming apparatus in the apparatus cooperation service. For example the client application for the cloud scan service is required to be installed in the image forming apparatus that is caused to cooperate with the cloud scan service.

The application platform includes APIs for controlling the image forming apparatus and provides an environment for executing the client application . The form of APIs may be for example a function or a class and a method of the class of object oriented programming. For example the application platform provides the client application with APIs including an API related to a scan function an API related to a print function and an API related to a copy function. The application platform may include a Java registered trademark virtual machine VM . In this case the client application may be implemented by the Java registered trademark language.

The application platform includes a mechanism for causing a server application and the client application to cooperate.

The projector and the video conference apparatus may have the same software configuration as illustrated in . On the other hand the PC may have the same software configuration as illustrated in or include a general purpose Web browser.

A description is given below of a process procedure in an apparatus cooperation service provided by the cloud service system illustrated in .

If the combination of the organization ID user ID and password included in the message is stored in the user information storage part of the management information storage server the authentication part of the management server determines that the login has succeeded. Once the logon has succeeded the authentication part returns a token for example a cookie that indicates that the user has been authenticated. The token is returned to the image forming apparatus via the common service gateway and the Internet gateway . The token is added to the subsequent messages from the image forming apparatus . In this embodiment the communications between the image forming apparatus and the scan cloud service are performed using HTTPS HTTP over SSL TLS .

At step S the client application hereinafter referred to as scan client application which is an object of operation causes the image forming apparatus to scan an original material in response to the user s operation. Next at step S the scan client application causes the image forming apparatus via the application platform to transmit a message including a processing request related to image data scanned from the original material. The URL of the message includes dscan in its path. Accordingly the message is transferred to the scan logic part of the domain specific server by the Internet gateway and the application gateway . That is the processing request included in the message corresponds to calling the domain specific API .

At step S the scan logic part transmits a request to store the image data included in the message to the temporary image storage server . As a result the image data are stored in the temporary image storage server . At step S the scan logic part transmits to the queue server a request to register the processing request included in the message with the message queue . For example if the processing request is a request to store the image data in an external storage service the processing request is registered with the message queue corresponding to the image transmission part the image transmission server . A URL pertaining to the message indicating a request to store the image data from the scan logic part includes tmpfile in its path. Accordingly the message is transferred to the temporary image storage server via the database gateway . Furthermore a URL pertaining to the message indicating a request to register the processing request with the message queue from the scan logic part includes jobqueue in its path. Accordingly the message is transferred to the queue server via the common service gateway . Thus a request over segments is transferred via a gateway in the segment of the destination of the request. At this point the gateway in the segment of the destination of the request determines whether to authorize passage of the request. In the following a description of going through a gateway is omitted for convenience of description.

Next at step S the image transmission server obtains the processing request from the message queue corresponding to the image transmission server in the queue server . Next at step S the image transmission server obtains the image data that are determined as an object of processing in the processing request from the temporary image storage server . Next at step S because the processing request is a transmission to storage in the external storage service the image transmission server obtains a token for logging into the external storage service from the authentication part in the management server . Next at step S the image transmission server logs into the external storage service using the token and transmits the image data to stores the image data in the external storage service .

Next a description is given of a process procedure of the cloud print service. is a diagram for illustrating a process procedure at the time of registration of print data in the cloud print service. In it is assumed that a user s login to the cloud service system from the PC is completed. Furthermore it is assumed that a print request screen provided by the print application is displayed on a Web browser of the PC . It is possible to specify a file to be printed on the print request screen. Furthermore with respect to a portable terminal such as a smartphone or a tablet terminal may be used in place of the PC

At step S when a file to be printed is specified and an instruction to register a request to print the file is input via the print request screen the PC transmits a message indicating a request to register the print request to the cloud service system . The message includes the file to be printed.

The message is transferred to the print application of the application server via the Internet gateway and the application gateway . At step S the print application transmits the request to register the print request pertaining to the file included in the message to the print logic part of the domain specific server .

At step S the print logic part transmits a request to store the file to the temporary image storage server . As a result the file is stored in the temporary image storage server . Furthermore at step S the print logic part transmits to the queue server a request to register the print request included in the message with the message queue . The print request means a request to convert the data included in the file to be printed into print data. Therefore the print request is registered with the message queue corresponding to the image conversion part the image conversion server .

Next at step S the image conversion server obtains the print request from the message queue corresponding to the image conversion server in the queue server . Next at step S the image conversion server obtains the file determined as an object of processing in the print request from the temporary image storage server . Next at step S the image conversion server generates print data with respect to the data included in the file based on print settings specified in the print request. Next at step S the image conversion server transmits a request to store the print data to the temporary image storage server . As a result the print data are stored in the temporary image storage part in correlation with the organization ID and the user ID pertaining to the login user.

Next is a diagram for illustrating a process procedure at the time of printing in the cloud print service. In it is assumed that a user s login to the cloud service system from the image forming apparatus is completed. Furthermore on the operations panel of the image forming apparatus the bibliographic information of print data pertaining to the login user is displayed in a list on a print data list screen caused to be displayed by the client application hereinafter referred to as print client application corresponding to the cloud print service. The print data list screen is displayed as a result of for example the bibliographic information of print data correlated with the organization ID and the user ID of the login user among the print data stored in the temporary image storage server being returned to the print client application in response to a request to the print logic part from the print client application . The bibliographic information of each print data includes the identification information of the print data.

At step S when a line including the bibliographic information of one of the print data is selected and a print instruction is input on the print data list screen by the user the print client application executes a process corresponding to the print instruction. That is the print client application causes the image forming apparatus via the application platform to transmit a message indicating a download request including the identification information of the selected print data. The URL of the message includes dprint in its path. Accordingly the message is transferred to the print logic part of the domain specific server by the Internet gateway and the application gateway .

At step S the print logic part obtains the print data included in the message from the temporary image storage server . Next at step S the print logic part returns the print data to the image forming apparatus

At step S when the print data are received by the image forming apparatus the print client application causes the image forming apparatus to execute a print job based on the print data. As a result paper on which an image represented by the print data is printed is output from the image forming apparatus . The PC in and the image forming apparatus in may be operated at locations separated from each other in terms of a network. For example the PC may be operated at the user s home or a location visited by the user and the image forming apparatus may be operated at the user s office.

Thus according to the cloud service system of the embodiments it is possible to provide services that cooperate with apparatuses.

In the above described embodiments the cloud service system is an example of an information processing system. The database segment g is an example of a first network segment. The common service segment g is an example of a second network segment. The application segment g is an example of a third network segment. The management segment g is an example of a fourth network segment.

All examples and conditional language provided herein are intended for pedagogical purposes of aiding the reader in understanding the invention and the concepts contributed by the inventors to further the art and are not to be construed as limitations to such specifically recited examples and conditions nor does the organization of such examples in the specification relate to a showing of the superiority or inferiority of the invention. Although one or more embodiments of the present invention have been described in detail it should be understood that the various changes substitutions and alterations could be made hereto without departing from the spirit and scope of the invention.

