---

title: Authentication survivability for assigning role and VLAN based on cached radius attributes
abstract: A system and method is described that allows the assignment of roles and/or VLANs to an authenticated client device even when an external remote authentication dial in user service (RADIUS) server is inaccessible. In particular, using RADIUS key-reply attributes stored locally after a previous successful authentication using the external RADIUS server, an internal RADIUS server may perform authentication and pass the stored RADIUS key-reply attributes to an authentication module for assignment of a role and/or VLAN to the client device. Accordingly, roles and/or VLANs may be assigned to enforce access privileges of the client device even when an external RADIUS server is inaccessible.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09531700&OS=09531700&RS=09531700
owner: Aruba Networks, Inc.
number: 09531700
owner_city: Sunnyvale
owner_country: US
publication_date: 20150130
---
The present disclosure relates to ensuring network access for client devices within a branch office network when an external remote authentication dial in user service RADIUS server is inaccessible by storing RADIUS attributes locally in the branch office network. By storing RADIUS attributes locally roles and virtual local area networks VLANs which define access privileges may be assigned to client devices even when the external RADIUS server is inaccessible.

Over the last decade there has been a substantial increase in the use and deployment of networked client devices. For example personal computers tablet computers and cellular telephones may communicate in accordance with one or more Institute of Electrical and Electronics Engineers IEEE standards. In some instances these client devices may operate in one of a distributed set of branch offices.

To ensure a client device is authorized to gain access to network resources an authentication procedure may be performed. The authentication procedure may involve client devices seeking approval from an external RADIUS server to operate within the network system. This approval may include RADIUS attributes provided by the external RADIUS server over a data connection to a local network controller or switch. These RADIUS attributes may be used to assign roles and VLANs which define access privileges to the client devices. Although this approach may provide an efficient centralized technique for authenticating client devices and assigning roles and VLANs when the external RADIUS server is accessible authentication may be halted and client devices may not be able to gain access to the network when the external RADIUS server is inaccessible.

The approaches described in this section are approaches that could be pursued but not necessarily approaches that have been previously conceived or pursued. Therefore unless otherwise indicated it should not be assumed that any of the approaches described in this section qualify as prior art merely by virtue of their inclusion in this section.

In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding. One or more embodiments may be practiced without these specific details. Features described in one embodiment may be combined with features described in a different embodiment. In some examples well known structures and devices are described with reference to a block diagram form in order to avoid unnecessarily obscuring the present invention.

Each element of the network system shown in will now be described by way of example. In other embodiments the network system may include more elements than the items shown in . For example each of the branch offices and may include additional networking devices including switches access points and routers. Further in some embodiments the network system may include more or less branch offices . Accordingly the network system of is used for illustrative purposes and is not restrictive.

Each of the branch offices and may be installed in any region or area. For example the network controller and the client devices which represent the branch office may be installed in an office building at a first location while the network controller and the client devices and which represent the branch office may be installed in an office building at a second location. Similarly the external RADIUS servers and which represent the headquarters may be installed in an office building at a third location. Each of the first second and third locations may be separated by any distance e.g. 500 feet or 500 miles . Further the devices at each of the branch offices and and the headquarters may form respective local networks that are communicatively connected by the network . For example the network controller and the client devices may form a first local network the network controller and the client devices and may form a second local network and the external RADIUS servers and may form a third local network. As noted above each of these local networks may include more networking devices than those shown e.g. switches access points and or routers .

As described herein the network system may control access and privileges through the assignment of roles and or VLANs. For example roles may define network resources and levels of access available to assigned users and client devices and VLANs may be segmented portions of the network that provide different levels of access to network resources. For instance a user client device assigned to the role of marketing may be placed on a VLAN that only allows the user client device to make Hypertext Transfer Protocol HTTP requests and access a marketing server within the network system . In comparison a user client device with an administrator role may be placed on a VLAN that provides unrestricted access to the network system .

Turning now to the network controller will be described by way of example. Although the network controller is described herein the network controller may be similarly structured and configured. The network controller may be any device that can associate with the client devices to transmit and receive data over wired or wireless connections. As noted above in some embodiments the network controller may facilitate assignment of roles and VLANs to client devices based on 1 recently received RADIUS attributes from one of the external RADIUS servers and corresponding to a current authentication routine or 2 previously received and locally stored RADIUS attributes from one of the external RADIUS servers and corresponding to a previously performed authentication routine. shows a component diagram of the network controller according to one embodiment. As noted above the network controller may include similar or identical components to those shown and described in relation to the network controller .

As shown in the network controller may comprise one or more of a hardware processor data storage an input output I O interface and device configuration logic . Each of these components of the network controller will be described in further detail below.

The data storage of the network controller may include a fast read write memory for storing programs and data during performance of operations tasks and a hierarchy of persistent memory such as Read Only Memory ROM Erasable Programmable Read Only Memory EPROM and or Flash memory for example for storing instructions and data needed for the startup and or operation of the network controller . In one embodiment the data storage is a distributed set of data storage components. The data storage may store data that is to be transmitted from the network controller or data that is received by the network controller . In some embodiments the data storage may be used for storing client device credentials and or RADIUS attributes which were received from an external RADIUS server during a previous successful authentication re authentication attempt. As noted above these RADIUS attributes may be used for assigning roles and VLANs to corresponding client devices .

In one embodiment the I O interface corresponds to one or more components used for communicating with other devices e.g. the client devices and or the external RADIUS servers and via wired or wireless signals. The I O interface may include a wired network interface such as an IEEE 802.3 Ethernet interface and or a wireless interface such as an IEEE 802.11 WiFi interface. In one embodiment the I O interface facilitates communications between the network controller and one or more of the external RADIUS servers and through the network . In one embodiment the network includes a set of network components that facilitate communications between multiple devices. For example the network may be composed of one or more switches routers hubs etc. These network components that comprise the network may operate using both wired and wireless mediums. In one embodiment the network or a portion of the network may be the Internet.

In one embodiment the hardware processor is coupled to the data storage and the I O interface . The hardware processor may be any processing device including but not limited to a MIPS ARM class processor a microprocessor a digital signal processor an application specific integrated circuit a microcontroller a state machine or any type of programmable logic array.

In one embodiment the device configuration logic includes one or more functional units implemented using firmware hardware software or a combination thereof for configuring parameters associated with the network controller and or the client device . In one embodiment the device configuration logic may be configured to perform authentication and or to assign roles and VLANs to authenticated client devices . For instance the internal RADIUS server may authenticate a client device when the external RADIUS servers and are inaccessible or otherwise unavailable. As will be described in greater detail below upon successfully authenticating a client device the internal RADIUS server may pass transmit corresponding client device RADIUS attributes stored locally within the network controller or stored locally elsewhere in the branch office to the authentication module . The RADIUS attributes may have been received from the external RADIUS servers or during a previous successful authentication of the client device . The authentication module may use the locally stored RADIUS attributes to assign a role and or VLAN to the client device .

Although shown and described as being implemented within the configuration logic the internal RADIUS server and the authentication module may reside in any portion of the network controller . For instance in other embodiments the internal RADIUS server and or the authentication module may reside in the data storage .

As described above the network controller may be similarly configured as described above in relation to the network controller . For example the network controller may comprise a hardware processor data storage an input output I O interface and device configuration logic in a similar fashion as described above in relation to the network controller .

Although described as controllers in other embodiments the network controllers and may be other types of networking devices. For example in other embodiments one or more of the network controllers and may be network switches.

In one embodiment the client devices may be any wireless or wired electronic devices capable of receiving and transmitting data over wired and wireless mediums. For example the client devices may be one or more of personal computers laptop computers netbook computers wireless music players portable telephone communication devices smart phones tablets and digital televisions. In one embodiment the client devices are digital devices that include a hardware processor memory hierarchy and input output I O interfaces including a wired and or wireless interface such as an IEEE 802.3 interface. In one embodiment the configuration of the components within the client devices may be similar to those discussed above in relation to the network controller . In other embodiments the client devices may include more or less components than those shown in in relation to the network controller .

In one embodiment the external RADIUS servers and are digital devices that include a hardware processor memory hierarchy and input output I O interfaces including a wired and or wireless interface such as an IEEE 802.3 interface. In one embodiment the configuration of the components within the external RADIUS servers and may be similar to those discussed above in relation to the network controller . In other embodiments the external RADIUS servers and may include more or less components than those shown in in relation to the network controller . Although shown with two external RADIUS servers and the network system may similarly operate with a single external RADIUS server . Accordingly the use of multiple external RADIUS servers and may be for purposes of redundancy.

As will be discussed in greater detail below when accessible the external RADIUS servers and may authenticate one or more of the client devices to operate within the local network of the branch offices and respectively and or the network . In particular the external RADIUS servers and may provide RADIUS attributes to the network controllers and in response to a successful authentication of a client device . The RADIUS attributes may be used to assign roles and or VLANs to the client devices . These roles and VLANs define the access privileges of the client devices within the network system . The network controllers and may store these RADIUS attributes for use during subsequent authentication re authentication procedures when the external RADIUS servers and are inaccessible. The process and procedure for storing and utilizing RADIUS attributes will be described in greater detail below by way of example.

Although each of the operations in the method are shown and described in a particular order in other embodiments the operations of the method may be performed in a different order. For example although the operations of the method are shown as being performed sequentially in other embodiments the operations of the method may be performed concurrently or during partially overlapping time periods.

In the description that follows the method will be described in relation to the network controller the client device and the external RADIUS server . However it is understood that the method may be similarly performed with other network controller client device and external RADIUS server combinations that are communicatively connected.

In one embodiment the method may commence at operation with the determination as to whether the external RADIUS server is accessible or inaccessible. Accessibility may be defined as the external RADIUS server receiving and responding to messages from the network controller and or the client device . The external RADIUS server may be inaccessible for a variety of reasons including 1 the network is down or otherwise not operating correctly 2 the external RADIUS server is down or otherwise not operating correctly and 3 the network controller is not operating correctly and is unable to access the network . In one embodiment and as will be described herein operation may determine that the external RADIUS server is inaccessible after the network controller has transmitted one or more authentication request messages to the external RADIUS server on behalf of the client device . For example after the network controller has failed to receive an acknowledgement or response to an authentication request message after a predefined period of time and or after a predefined number of retries operation may determine that the external RADIUS server is inaccessible. Conversely upon receiving a response from the external RADIUS server e.g. an acknowledgment message an authentication success message or an authentication failure message operation may determine that the external RADIUS server is accessible. In one embodiment operation may be performed by the authentication module of the network controller .

Upon determining that the external RADIUS server is accessible at operation operation may determine whether an authentication success or an authentication failure message was received from the external RADIUS server . In particular as noted above in relation to operation the network controller may have transmitted an authentication request message for the client device to the external RADIUS server . The authentication request message may include credentials for the client device e.g. a user name and password for a user of the client device . In response to receipt of this authentication request message the external RADIUS server may determine whether the client device is authorized to access the network system . For example the external RADIUS server may compare the credentials received in the authentication request message with a set of authorized credentials. In response to locating a match between the credentials of the client device and a set of authorized credentials the external RADIUS server may generate and transmit an authentication success message to the network controller . Conversely in response to failing to locate a match between the credentials of the client device and a set of authorized credentials the external RADIUS server may generate and transmit an authentication failure message to the network controller . At operation the method may determine whether an authentication success or an authentication failure message was received from the external RADIUS server . In one embodiment operation may be performed by the authentication module of the network controller .

Upon receiving an authentication failure message from the external RADIUS server operation may delete all credentials and RADIUS attributes for the unauthorized client device that are stored locally on the network controller and or locally on the local network of the branch office where the client device and the network controller reside. As noted above the client device credentials may correspond to a user name and password for a user of the client device . In contrast the RADIUS attributes are data values that indicate a role and or a VLAN with which the client device would be associated with if authentication were successful. As will be described in greater detail below the RADIUS attributes may have been received from the external RADIUS server and stored locally by the network controller during a previous successful authentication of the client device using the external RADIUS server . In one embodiment operation may be performed by the internal RADIUS server and or the authentication module of the network controller .

Following deletion of locally stored client device credentials and RADIUS attributes operation may deny the client device access to the network system . This denial may be carried out through a failure of the network controller to assign a role or VLAN to the client device . In one embodiment operation may be performed by the authentication module of the network controller .

Returning to operation upon receiving an authentication success message for the client device the method may move to operation . At operation the credentials of the client device may be stored locally on the network controller or at a different location within the local network of the branch office . For example the credentials of the successfully authenticated client device may be stored in the data storage of the network controller at operation . Storing the client device credentials locally ensures that a subsequent authentication may be performed by the network controller when the external RADIUS server is inaccessible. In one embodiment operation may be performed by the internal RADIUS server and or the authentication module of the network controller .

Following storage of the client device credentials operation may determine if RADIUS attributes have been received from the external RADIUS server during the current authentication procedure. In one embodiment the RADIUS attributes may be passed to the network controller within the authentication success message. For example Table 1 below shows a set of credentials e.g. user names and passwords along with RADIUS attributes and RADIUS attribute values that may be transmitted along with the authentication success message. Table 1 is an example of data including user credentials e.g. user names and passwords and RADIUS attribute names and values stored locally with the network controller . The credential data may be stored at operation and the RADIUS attribute data may be stored at operation .

As shown in Table 1 various numbers and types of RADIUS attributes may be transmitted in the authentication success message. In some instances no RADIUS attributes may be transmitted in the authentication success message as shown in Table 1 in relation to User.

In response to determining at operation that no RADIUS attributes were received from the external RADIUS server the method may move to operation . At operation the client device may be assigned a default role and or VLAN in the network system . For example the default role and or VLAN may restrict the client device to a small segment of network resources e.g. only access to the World Wide Web . The default role and VLAN may be preset by an administrator of the network system .

Conversely in response to determining at operation that RADIUS attributes were received from the external RADIUS server the method may move to operation . At operation the RADIUS attributes may be stored locally within the network controller or otherwise locally within the local network of the branch office where the network controller and the client device reside. For example the RADIUS attributes of the successfully authenticated client device may be stored in the data storage of the network controller at operation . Storing the client device RADIUS attributes locally ensures that a subsequent assignment of role and VLAN may be performed by the network controller when the external RADIUS server is inaccessible.

In some embodiments all the RADIUS attributes may not be able to be stored locally within the network controller and or within the local network of the branch office . For instance the data storage of the network controller may be limited in size and cannot hold all the RADIUS attributes of each of the client devices within the local network of the branch office . Accordingly in these embodiments a subset of the RADIUS attributes may be selected at operation for storage. In particular operation may select those RADIUS attributes needed for assigning a role and or VLAN to the authenticated client device . This subset of RADIUS attributes may be termed RADIUS key reply attributes and can be divided into two parts 1 hard coded implementation attributes and 2 attributes configured for each network controller or switch at run time. When RADIUS attributes are detected at operation only those attributes that match the predefined RADIUS key reply attributes are stored at operation to ensure efficient usage of storage resources. In one embodiment operations and may be performed by the authentication module of the network controller .

Following storage of RADIUS key reply attributes operation may assign a role and or VLAN to the client device based on the RADIUS key reply attributes. For example the authentication module of the network controller may assign a role and or a VLAN by directly examining the RADIUS key reply attributes or by applying configured Server Derivation Rules using the RADIUS key reply attributes. Table 2 shows the role and VLAN assignments based on the RADIUS attributes shown in Table 1.

As shown above each of User User is assigned a role and VLAN based on respective attribute values. Of particular note although User includes VLAN specific RADIUS key reply attributes that are used to assign a VLAN the lack of role based RADIUS key reply attributes results in the client device corresponding to the User being assigned a default role and a RADIUS key reply attribute specific VLAN. Similarly the User lacks any RADIUS key reply attributes. Accordingly the client device corresponding to the User is assigned both default role and VLAN values.

As described above the client device is authenticated using the external RADIUS server . However in some instances the external RADIUS server may be inaccessible. As noted above this inaccessibility may be for a variety of reasons including 1 the network being down or otherwise not operating correctly 2 the external RADIUS server being down or otherwise not operating correctly and 3 the network controller is not operating correctly and is unable to access the network . In these situations the method may rely on an internal RADIUS server within the network controller to perform authentication and to pass stored RADIUS key reply attributes to the authentication module of the network controller to assign a role and or VLAN.

In particular returning to operation upon determining that the RADIUS server is inaccessible the method may move to operation . At operation the internal RADIUS server of the network controller may perform authentication of the client device within the network system . Similar to authentication with the external RADIUS server authentication with the internal RADIUS server may involve comparing credentials of the client device with a set of authorized credentials. In response to locating a match between the credentials of the client device and a set of authorized credentials the internal RADIUS server may determine that authentication was successful. Conversely in response to failing to locate a match between the credentials of the client device and a set of authorized credentials the internal RADIUS server may determine that authentication was unsuccessful.

At operation the method may determine whether credentials associated with a user of the client device match with credentials stored locally. Upon operation determining that credentials associated with a user of the client device match with locally stored credentials an authentication failure message may be generated and transmitted passed from the internal RADIUS server to the authentication module of the network controller at operation . In response to this authentication failure message the authentication module may deny the client device access to the network system at operation .

Conversely upon determining that there was not a match of credentials at operation the method may move to operation to determine if RADIUS attributes and in particular RADIUS key reply attributes are locally stored within the network controller and or within the local network of the branch office . As noted above in relation to operation upon a previous successful authentication of the client device by the external RADIUS server RADIUS key reply attributes may be stored locally within the data storage of the network controller or elsewhere in the local network of the branch office where the client device and the network controller reside. These locally stored RADIUS key reply attributes may now be used by the authentication module to assign a role and or VLAN to the client device .

Upon detection of locally stored RADIUS key reply attributes for the client device operation may generate an authentication success message with the locally stored RADIUS key reply attributes. Operation may further transmit pass this authentication success message along with the RADIUS key reply attributes to the authentication module of the network controller . The authentication module may assign a role and or VLAN to the authenticated client device at operation based on these RADIUS key reply attributes which were locally stored after a previous authentication using the external RADIUS server . In some embodiments operation may be similar or identical to operation which was discussed above.

Upon failing to detect locally stored RADIUS key reply attributes for the client device operation may generate an authentication success message without any RADIUS attributes and transmit pass this authentication success message along to the authentication module of the network controller . Since the authentication success message lacks any RADIUS attributes the authentication module may assign a default role and or VLAN to the authenticated client device at operation . For example the default role and or VLAN may restrict the client device to a small segment of network resources e.g. only access to the World Wide Web . The default role and VLAN may be preset by an administrator of the network system .

As described above the method allows the assignment of roles and or VLANs to an authenticated client device even when an external RADIUS server is inaccessible. In particular using RADIUS key reply attributes stored locally after a previous successful authentication using the external RADIUS server an internal RADIUS server may perform authentication and pass the stored RADIUS key reply attributes to an authentication module for assignment of a role and or VLAN. Accordingly roles and VLANs may be assigned to enforce access privileges of the client device even when an external RADIUS server is inaccessible.

Herein certain terminology is used to describe features for embodiments of the disclosure. Examples of digital devices include a computer a tablet a laptop a desktop a netbook a server a web server an authentication server an authentication authorization accounting AAA server a Domain Name System DNS server a Dynamic Host Configuration Protocol DHCP server an Internet Protocol IP server a Virtual Private Network VPN server a network policy server a mainframe a television a content receiver a set top box a video gaming console a television peripheral a printer a mobile handset a smartphone a personal digital assistant PDA a wireless receiver and or transmitter an access point a base station a communication management device a router a switch and or a controller.

It is contemplated that a digital device may include hardware logic such as one or more of the following i processing circuitry ii one or more communication interfaces such as a radio e.g. component that handles the wireless data transmission reception and or a physical connector to support wired connectivity and or iii a non transitory computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory and or random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive etc. or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive portable hard disk drive or the like.

The term logic or logic unit may refer to any combination of hardware and or software. For example as hardware logic may include a processor e.g. a microcontroller a microprocessor a CPU core a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be for example one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine source code object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory storage medium or transitory computer readable transmission medium e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals or digital signals .

Lastly the terms or and and or as used herein are to be interpreted as inclusive or meaning any one or any combination. Therefore A B or C or A B and or C mean any of the following A B C A and B A and C B and C A B and C. An exception will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

An embodiment of the invention may be an article of manufacture in which a machine readable medium such as microelectronic memory has stored thereon instructions which program one or more data processing components generically referred to here as a processor to perform the operations described above. In other embodiments some of these operations might be performed by specific hardware components that contain hardwired logic e.g. dedicated digital filter blocks and state machines . Those operations might alternatively be performed by any combination of programmed data processing components and fixed hardwired circuit components. Also although the discussion focuses on uplink medium control with respect to frame aggregation it is contemplated that control of other types of messages is applicable.

Any combination of the above features and functionalities may be used in accordance with one or more embodiments. In the foregoing specification embodiments have been described with reference to numerous specific details that may vary from implementation to implementation. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. The sole and exclusive indicator of the scope of the invention and what is intended by the applicants to be the scope of the invention is the literal and equivalent scope of the set of claims that issue from this application in the specific form in which such claims issue including any subsequent correction.

