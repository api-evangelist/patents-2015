---

title: Apparatus and systems for providing location-based services within a wireless network
abstract: A system for providing wireless telecommunications services to mobile devices includes structure and functionality for location-based services, and includes both server and client/mobile device apparatuses. One apparatus includes a data store storing at least a first record associated with a first wireless device or a second record associated with a second wireless device. A computer is coupled to the data store and is configured to receive a request from the first wireless device to obtain location information associated with the second wireless device. The computer is configured to receive a change location privileges request, and to update the first or second records in the data store based on the received change request. Other apparatuses provide additional structures and functions.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09451405&OS=09451405&RS=09451405
owner: AT&T Mobility II LLC
number: 09451405
owner_city: Atlanta
owner_country: US
publication_date: 20150518
---
This application is continuation of and claims priority to U.S. patent application Ser. No. 14 135 780 filed Dec. 20 2013 now U.S. Pat. No. 9 037 159 which issued May 19 2015 which is a continuation of U.S. patent application Ser. No. 13 274 953 filed Oct. 17 2011 now U.S. Pat. No. 8 634 857 which issued Jan. 21 2014. U.S. patent application Ser. No. 13 274 953 is a divisional application of U.S. patent application Ser. No. 12 412 640 filed Mar. 27 2009 which issued with U.S. Pat. No. 8 068 857 on Nov. 29 2013. U.S. patent application Ser. No. 12 412 640 is a continuation of U.S. patent application Ser. No. 11 766 304 filed Jun. 21 2007 which issued with U.S. Pat. No. 7 532 900 on May 12 2009. U.S. patent application Ser. No. 11 766 304 is a continuation of U.S. patent application Ser. No. 10 325 270 filed Dec. 20 2002 which issued with U.S. Pat. No. 7 236 799 on Jun. 26 2007. U.S. patent application Ser. No. 10 325 270 claims benefit of U.S. Provisional Patent Application No. 60 388 944 filed Jun. 14 2002. U.S. patent application Ser. No. 10 325 270 also claims benefit of U.S. Provisional Patent Application No. 60 388 942 filed Jun. 14 2002. The contents of each of the above referenced applications and patents are incorporated by reference herein in their entirety.

U.S. patent application Ser. No. 14 135 780 is incorporated by reference herein in its entirety. U.S. patent application Ser. No. 13 274 953 is incorporated by reference herein in its entirety. U.S. patent application Ser. No. 12 412 640 is incorporated by reference herein in its entirety. U.S. patent application Ser. No. 11 766 304 is incorporated by reference herein in its entirety. U.S. patent application Ser. No. 10 325 270 is incorporated by reference herein in its entirety. U.S. provisional patent application No. 60 388 944 is incorporated by reference herein in its entirety. U.S. provisional patent application No. 60 388 942 is incorporated by reference herein in its entirety. U.S. Pat. No. 8 068 857 is incorporated by reference herein in its entirety. U.S. Pat. No. 7 532 900 is incorporated by reference herein in its entirety. U.S. Pat. No. 7 236 799 is incorporated by reference herein in its entirety.

This application is related to U.S. patent application Ser. No. 10 324 984 filed Dec. 20 2002 now U.S. Pat. No. 7 203 502 entitled System For Providing Location Based Services In A Wireless Network Such As Locating Individuals And Coordinating Meetings U.S. patent application Ser. No. 10 325 566 filed Dec. 20 2002 now U.S. Pat. No. 7 190 960 entitled System For Providing Location Based Services In A Wireless Network Such As Modifying Locating Privileges Among Individuals And Managing Lists Of Individuals Associated With Such Privileges U.S. patent application Ser. No. 10 325 032 filed Dec. 20 2002 now U.S. Pat. No. 7 181 227 entitled Data Structures And Methods For Location Based Services Within A Wireless Network and U.S. patent application Ser. No. 10 325 322 filed Dec. 20 2002 now U.S. Pat. No. 7 116 985 entitled Method For Providing Location Based Services In A Wireless Network Such As Varying Levels Of Services. The contents of each of the above referenced applications and patents are incorporated by reference herein in their entirety.

 Where am I Where are you Where is it are questions often asked but not always easily answered. Global positioning system GPS and similar location determining devices have allowed users to locate themselves on our planet. Together with mapping software the GPS network allows users to identify themselves with respect landmarks streets and the like. These and other location determining systems have been used with vehicles often referred to as telematics .

Such telematic systems help users identify where their vehicles are with respect to an electronic map to determine directions to a location. A user can input a destination on such telematic systems and mapping software often stored in the vehicle with a database of maps helps determine an appropriate route for the vehicle using an associated GPS device. The mapping software and associated maps may include lists of addresses or points of interest POIs to which the system may compute a route.

Fleet tracking systems or automatic vehicle location AVL systems allow a central location to track the locations of various vehicles in a fleet where each vehicle includes an onboard system having wireless circuitry to provide the position of a vehicle in the fleet to the central location. Examples of such systems are provided by for example Qualcomm of San Diego Calif.

Certain services such as Maps.com allow users to access a large database of maps and request directions or routes from a starting point to an ending point. If a user has a wireless Internet enabled device such as a wireless palmtop computer the user may then access such maps and associated directions wirelessly.

Three patents and one patent application in this area are U.S. Pat. Nos. 6 212 392 6 321 092 and 6 381 535 and PCT DK99 00548 respectively.

The headings provided herein are for convenience only and do not necessarily affect the scope or meaning of the claimed invention.

In the drawings the same reference numbers identify identical or substantially similar elements or acts. To easily identify the discussion of any particular element or act the most significant digit or digits in a reference number refer to the Fig. number in which that element is first introduced e.g. block is first introduced and discussed with respect to .

A portion of this disclosure contains material to which a claim for copyright is made. The copyright owner has no objection to the facsimile reproduction by anyone of the patent disclosure including Figs. as it appears in the United States Patent and Trademark Office patent file or records but reserves all other copyright rights whatsoever.

Described in detail below is a system and associated method that allows users to locate friends or other contacts businesses points of interest POIs or other locations and manage this information in a user friendly environment. A user with a wireless device such as a cellular phone may identify the locations of select individuals via their wireless devices . Likewise the user may receive directions to a desired location and even coordinate a meeting place with a friend. For example the user may notify a friend or other person about wishing to meet identify a location nearby and receive directions all via a central system that coordinates the meeting including RSVPs reply or response and other messages.

Aspects of the system allow a user to identify effectively in one step a location of a friend. Users can modify privileges quickly and in near real time. For example a user may always deny requests to become another s friend for purposes of various location services. Likewise the user may remove him or herself from a friend s list at any time but later then request that they be added to that friend s list. Various other features are described in detail herein.

In a broad sense embodiments of the invention relate to location based services in a system for providing wireless telecommunications services to mobile devices. The system obtains a request from a first mobile device for a meeting with a person associated with a second mobile device. The system automatically determines locations of the first and second mobile devices and automatically provides information to at least the first or second mobile device regarding a meeting location based at least in part on the determined location of the first or second mobile device. The system can also determine a local time or time zone of the first or second mobile devices and with one or a minimum number of menu choices a user of a mobile device may readily receive a location of a user or another mobile device.

The invention will now be described with respect to various embodiments. The following description provides specific details for a thorough understanding of and enabling description for these embodiments of the invention. However one skilled in the art will understand that the invention may be practiced without these details. In other instances well known structures and functions have not been shown or described in detail to avoid unnecessarily obscuring the description of the embodiments of the invention.

A representative system in which functionality described herein will first be described. Representative message flows performed by the representative system will then be discussed with respect to adding a friend obtaining directions meeting friends and finding locations. Thereafter a representative user interface and location based functionality is described. Finally representative data structures are described.

Referring to a system is shown where a wireless device or mobile unit shown as a 2.5G GPRS enable mobile handset communicates wirelessly to a 2.5G uplink . A typical 2.5G uplink includes multiple components not shown such as in order a base transceiver station BTS a base station controller BSC and in a General Packet Radio Service GPRS a Gateway Serving GPRS Support Node SGSN a GPRS wide area network WAN a Gateway GPRS Support Node GGSN a wireless access protocol WAP gateway and other components known by those skilled in the relevant art. Of course while a 2.5G network and wireless device are shown embodiments of the invention may be used in various other wireless systems.

One or more load balancers such as Alteon load balancers by Nortel of Canada receive communication packets from or provide packets to the wireless device via the uplink . A portal application server or servers communicate with the one or more optional load balancers . The portal application servers include various components.

For example the application server includes a servlet which may be a JAVA application for handling location requests to or from the wireless device . User interaction and business logic application code and respectively work in conjunction with the servlet and an application server . The user interaction and business logic code as well as the application server provide much of the functionality described herein. The application server may be a WebLogic server provided by BEA of San Jose Calif.

Working below the application server is an application programming interface API layer that includes various APIs such as Java Database Connectivity JDBC JAVA Transaction API JTA JAVA Transaction Service JTS JavaMail JAVA Cryptography Architecture JCA and EnterpriseJavaBeans EJB .

Working below the API layer is a JAVA Virtual Machine JVM such as Hotspot by Sun Microsystems of Santa Clara Calif. A suitable operating system such as Solaris by Sun Microsystems interfaces with the JVM as well as a hypertext transfer protocol daemon HTTPD e.g. that is provided by Apache and JDBC and shared libraries. In general a single server may be used to track all sessions for a given wireless device based on for example the internet protocol IP address Electronic Serial Number ESN Mobile Station ISDN MSISDN or some other unique identifier . This makes it easier for the system to track sessions for a given device.

The application server interacts with four components a portal database a Gateway Mobile Location Center GMLC a location engine and a Simple Mail Transfer Protocol SMTP gateway or other electronic messaging mail service. The portal database includes a database application such as those provided by Oracle of Redwood Shores Calif. The portal database stores much of the location based information friends lists pending requests etc. described herein.

The GMLC includes a phone locator subsystem that works with the GMLC such as the e Mobility Location Center provided by Nortel. A WAN connects the GMLC with the application server . The phone locator provides a GMLC API for providing the latitude and longitude information over the WAN for use by the application server or location engine . The GMLC provides location data to the location engine and other location service clients that may interface with it. The phone locator subsystem provides latitude and longitude information about the cell site to which a subscriber is connected. Alternatively the phone locator subsystem can provide the latitude and longitude coordinates of the wireless device within the cell site.

A Location Based Service LBS application operates on the location engine . The location engine and LBS application may be provided by for example Kivera of Oakland Calif. The LBS application provides geo coding providing latitude and longitude based on an address reverse geo coding providing address information based on latitude and longitude proximity searching providing items within a predetermined proximity including points of interest information routing providing directions from a first to a second point and map generation generating maps of locations and directions . The LBS application provides this functionality as a set of classes that connect to the location engine via a Java based connection pooling class which in turn attaches to a load balancer such as the load balancer . This class is responsible for maintaining a set of connections providing keep alive reconnect functionality etc. The load balancer may provide a virtual address space to the Location Engine and automatic fail over.

While shown together as a single block in the portal application servers are logically separate functions. A portal server provides much of the communication handling with the mobile devices. One or more application servers provide many of the location functions described herein such as the meet friends functionality. Prior systems provided some location functionality at the GMLC or as middleware. However as described herein the portal server is tied closely with the application servers such that authentication and access control as well as querying location and providing location based services are more intimately integrated. Subscriber information is tied more closely with location based information and other information. Thus as described below when the user receives notification that a friend is attempting to locate him or her the user receives the friend s mobile number email address portal subscriber username or other information with respect to the friend. Such a configuration provides privacy and control because the portal subscriber and other applications are within a common network such as a LAN all on one side of a firewall where the firewall may be typically located between the uplink and the load balancers . Thus while the terms portal portal server application server and the like are used interchangeably herein those skilled in the relevant art will recognize that such servers are logically separate entities.

The portal application server the portal database GMLC and location engine may be provided together on one physical server or divided each among one or more separate servers. The portal database or other mass storage described herein may be implemented by storage devices provided by EMC of Massachusetts. The location engine may be implemented on for example a Netra 20 server by Sun Microsystems.

Various alternative system configurations are possible beyond those shown in . For example while one or more servers may be co located some servers may be remotely located and connected to the remaining components by way of for example a virtual private network VPN . Firewalls and encryption may well be required for security. Alternatively an application service provider ASP model may be provided where the various functions are performed by various servers which may be either remotely distributed or co located. However the applications such as the LBS application may be maintained by a third party. Mass storage may be employed as a Storage Area Network SAN a Network Attached Storage System NAS or other known mass storage systems.

While a mobile phone is shown in those skilled in the relevant art will appreciate that the invention can be practiced with other devices and configurations including Internet appliances hand held devices wearable computers multi processor systems microprocessor based or programmable consumer electronics set top boxes network PCs mini computers mainframe computers and the like. The invention can be embodied in a special purpose computer or data processor that is specifically programmed configured or constructed to perform one or more of the computer executable instructions explained in detail below. Indeed the term computer or wireless device as used generally herein refers to any of the above devices and systems as well as any data processor.

A benefit of the system configuration noted above is reducing latency for providing location based services. For example no wide area network WAN connections are necessary to get information. Another advantage is an increase in privacy or security for location based services. Only one service provider has access to a database containing user or subscriber information. Subscriber information need not be shared with third parties or transmitted over public networks. Further as described below the location based service functionality described herein provides an opt in model whereby location information is only provided after users first agree to the system providing such information to others.

Referring to some functionality performed by the system is shown as a routine . Beginning in block the routine determines whether a user wishes to add friends and if so the routine branches to perform the message flow shown in . Under blocks and the user can determine whether to accept or deny a friend and if so the routine branches to perform the message flows of either respectively.

In block the routine determines whether the user requests more information and if so branches to perform the message flow of . In blocks and the routine determines whether the user wishes to alter the display select or modify location and if so the routine branches to perform the message flow of respectively.

In block the routine determines whether the user wishes to view directions and if so the routine branches to perform the message flow shown in . In blocks and the routine determines whether the user wishes to meet a friend at a location between the two of them near the friend or near the user and if so the routine branches to perform the message flows of respectively.

In block the routine determines whether the user wishes to find nearby places and if so the routine branches to perform the functions shown in . In block the routine determines whether the user wishes to find nearby friends and if so branches to perform the functions shown in . In block the routine determines whether the user wishes to edit a list of friends and if so branches to perform the functions shown in . In block the routine determines whether the user wishes to RSVP to friends and if so branches to perform the functions shown in .

The routine and others described herein may be implemented as computer executable instructions such as routines executed by a general purpose computer e.g. a server or personal computer . Such instructions may be stored or distributed on computer readable media including magnetic and optically readable and removable computer disks hard wired or preprogrammed in chips e.g. EEPROM semiconductor chips or ASICs as well as distributed electronically over the Internet or over other networks including wireless networks . Computer readable storage media disclosed herein does not include signals. Those skilled in the relevant art will recognize that portions of some embodiments of the invention may reside on a server computer while corresponding portions may reside on a client computer or wireless device. Data structures and transmission of data particular to aspects of the invention are also encompassed within the scope of the invention. In general while hardware platforms such as the system are described herein aspects of the invention are equally applicable to nodes on a network having corresponding resource locators or addresses to identify such nodes for data routing and requesting execution of commands.

Referring to representative message or data flow diagrams depict exchange of communications between the gateway and other components of the uplink the portal application server and other components of the system . These and other flow diagrams do not show all functions or exchanges of data but instead provide an understanding of commands and data exchanged under the system. Of course those skilled in the relevant art will recognize that some functions or exchange of commands and data may be repeated and other less important aspects not shown may be readily implemented.

Referring to a representative call or message flow diagram for allowing a user to add a friend under the system is shown. The wireless uplink such as the WAP gateway receives a request from the wireless device to enter a new friend into the user s database of friends. The term friend as generally used herein refers not only to any acquaintance or other person with whom the user wishes to interact but any addressable wireless device. Indeed the terms user and subscriber are used interchangeably and refer to a given individual employing or otherwise effected by functionality or systems described herein. A subscriber need not necessarily be one who subscribes to the location based services described herein. With respect to system functionality the terms friend user subscriber and the like are logically equivalent and represent any data that the system uses to track and manage wireless devices. The invention may be used for providing location based services with respect to one or more wireless devices in a group or nodes in any network.

The flow of begins by the gateway receiving a request from a wireless device to add a friend to a database of friends associated with the wireless device . The gateway receives a mobile number or username associated with the wireless device and passes this to the portal . The database receives a query from the portal to check whether the mobile username corresponds to a subscriber of the service or is otherwise authorized and if not the database returns an error that is then forwarded by the portal to the gateway . The above authorization functions may be performed with most requests to authorize each user of the system.

If the database does identify the mobile number or username in the database and returns a valid response then the portal in response sends a request prompt to the wireless device requesting input of information regarding the friend to be added. In response the gateway receives from the wireless device and provides to the portal information regarding the friend to be added e.g. a mobile telephone number URL or other electronic or network address associated with the new friend . The portal in response sends an update request to the database asking that the database reflect that the user has requested the friend be added to the user s friends list. As explained below the database stores lists of pending requests and the status of various functions provided by the system . The portal may query the database to retrieve the friend s username based on the received MSISDN mobile telephone number or other address. The portal may also generate an SMS message or email to send to the friend asking whether the friend wishes to be added to the user s list of friends where this SMS message or email is forwarded to the SMTP gateway for delivery to the user over the Internet or other data packet network not shown .

In addition to having a user request a friend to be added to the user s friends list the user can also ask to become listed on his or her friend s list. The user simply provides the mobile telephone number user ID or other identifier for the friend into the portal and the portal then makes an appropriate request to the friend in much the same manner as described above.

The friend may accept or deny the request which is shown in respectively. Referring to the accept friend flow of after validating the friend as explained above the portal receives from the friend s wireless device via the gateway a request to view pending friend requests. The database receives a query from the portal to look up pending requests and returns a list of friends to the portal which the portal delivers to the friend s wireless device via the gateway . The portal then receives from the friend s wireless device via the gateway one of the friend s requests to accept and resends back a confirmation message. In response thereto the wireless device provides the portal via the gateway a response to the confirmation message. The portal in turn requests the database to update the user s list of friends to now include the newly accepted friend.

The portal sends an SMS message to the user indicating that the friend has accepted being added to the user s friends list. The portal may also send an SMS message reflecting the addition once the database has been updated. The friend may be listed in the user s friends list under the friend s unique username. Alternatively the user may be able to change or edit the friend s name appearing on the list to something that the user desires e.g. an alias .

The system is not reciprocal in that even though the friend has accepted being added to the user s friends list this does not mean that the user is automatically added to the friend s list of friends. Thus the user may be prompted to send a request to the friend asking the friend whether the friend wishes to locate the user. The portal updates the database to reflect that such a request is pending and sends an SMS message to the friend asking whether the friend would like to add the user to his or her list of friends.

As explained herein information displayed to the user or friends may be in the form of WAP messages. While not shown in these Figs. the portal and mobile device may receive or exchange multiple transmissions or cards that form a deck to represent a complete display command or other transmission as is common under WAP.

Referring to the deny friend flow of after returning a list of pending friend requests as described above for the portal receives a response from the user of deny request or always deny request rather than an accept request. In response to each pending request to be added to someone s friends list a user can deny each request from a particular friend individually but keep open the possibility of later being added to the requestor s friends list or select an option to deny the current request and always deny future requests from that requester. Regardless of whether the portal receives a response from the user of deny request or always deny request the portal sends a confirmation message to the friend s wireless device and receives from the wireless device a response to the confirmation message all via the gateway . The portal then requests that the database make appropriate changes and then sends an SMS message to the requester indicating whether the user has denied or always wishes to deny being added to the requestor s friends list.

Under an alternate embodiment the user may establish sublists of friends similar to subfolders . Thus the user can establish hierarchical friends lists that include certain upper level groupings e.g. friends clients co workers etc. with individual friends provided in one or more of these upper level groupings. The user may thus manage friends lists in a manner similar to that with respect to files and folders under the Windows and other PC operating systems. Furthermore under this alternative embodiment the user may select certain friends in a list but not others e.g. be able to find the first third and fourth friends in the list but not the second and fifth in a list of five friends . Having selected a subset of friends in a list the user may then perform other functionality described herein such as automatically and simultaneously locate the subset of friends. The system then simply performs the steps described herein for each of the selected friends in the list.

If the user attempts to add a friend who is not subscribed to a system compatible with system the friend cannot be added to the user s friends list. However the system could send a predetermined solicitation message prerecorded voice message SMS message etc. to the requested friend or alternatively the system could prompt the user to do so asking the friend whether he or she wishes to become a subscriber to the service. Thus in one embodiment the system sends an appropriate solicitation message to the friend where the message is tailored to the particular circumstances. For example if the friend is a wireless subscriber under the system but has not subscribed to data services and thus cannot benefit from the location based services described herein the solicitation message encourages the friend to subscribe for such data services. Alternatively if the friend is a wireless subscriber of another service provider then the solicitation message encourages the friend to switch service providers.

Alternatively or additionally the system may send a solicitation message to the user requesting that the user send a message to the friend requesting that the friend join as a subscriber. Such a solicitation message to the user may simply ask the user to prepare and send such a message or include a sample message for the user to forward to the friend. The user in turn may receive certain compensation if in fact the friend does join as a subscriber.

Such solicitation messages could include information to permit the friend to readily become a subscriber of the system such as providing a URL or toll free number. For example a main menu of location based services options may include an option to send a pre formatted message to a phone number of the user s choice where the message may read Hello user s mobile identification number wants to use Find Friends with you. If you aren t already a subscriber call 1 877 400 1080. The system may track in the database such pending requests for friends to subscribe to the system. Once a friend has subscribed the portal may send an SMS or other communication to the user indicating that the friend has subscribed and asking whether the user wishes the friend to now become a member of the user s friends list.

While a text or visual interface is described generally herein an alternate embodiment may employ a speech or other audio interface. Thus the portal may provide directions under either a text to speech methodology or other known ways to provide aural information to users over their wireless devices.

Referring to the example of message flow in the system is shown for when the user requests information. The portal receives from the wireless device via the gateway a request for more information. In response the portal requests the database to look up a particular message or otherwise retrieve information. In response to a message received from the database the portal formats the message and returns it to the wireless device via the gateway . The returned information may be for example frequently asked questions a tutorial for the user on how to add friends or perform other functionality etc. Furthermore as described herein the user may request and receive information regarding a person requesting that the user grant them location privileges.

As noted above the system can provide directions between two points where the directions may be delivered in any number of ways such as to the user s wireless device in an email and or with respect to a map image. shows an example of a message flow for network element interaction in generating a screen to display a from location with respect to directions. As explained herein the portal may provide to the user s mobile device location information of mobile devices within the network where the location information is to a cell site or cell site sector level of granularity. If the user wishes to receive for example directions with greater specificity from a particular location rather than the center point of a cell the user may be required to enter a current street address. Thus as shown in the meet friend controller passes the user s and friend s location as well as a destination location such as a meeting place if desired. In response the direction controller displays the from selection screen which is provided by the portal via the gateway to the user s mobile device . The user may then enter a specific from location via this screen. Alternatively no from selection screen may be displayed or such screen may not be filled out when the level of location granularity is unnecessary undesired.

With most location based services provided under the system the system must determine the location of the user s wireless device . However under certain wireless protocols such as GPRS when a wireless device is in data mode the system cannot determine the location of the device. Therefore referring to the system may periodically perform a routine for allowing the system to determine the location for the wireless device .

Beginning in step the portal determines whether a wireless device has been in data mode for more than a predetermined time e.g. more than 5 minutes . A small subroutine running on the portal monitors the accumulated time during which each wireless device is in data mode and when a wireless device exceeds the time threshold the portal transmits an appropriate message to the wireless device instructing it to exit from data mode. Alternatively each wireless device could have a locally running counting subroutine that determines when the device has been continuously operating in data mode for more than the predetermined time. The system may alternatively or additionally request the mobile device to exit data mode whenever the device requests certain location based services or whenever the location of mobile device has been requested by for example a find friends request from a friend authorized to obtain such location. After the time threshold has been exceeded the routine in block requests the wireless device to send a currently displayed page to the portal for storage. For example the wireless device may be viewing a particular WAP page which the portal receives and stores. In block the portal requests the GMLC and location engine to determine the location of the wireless device . In block the portal receives the location of the wireless device from the GMLC and or location engine . Thereafter in block the portal transmits back to the wireless device the stored page to be reloaded by the wireless device and allows the wireless device to return to data mode. The process then repeats.

Referring to an example of a message flow is shown for modifying the from location with respect to directions for location based services provided under the system. For example the user may request directions from a location in which the user is not currently located or may be required to enter a specific address if the user s location cannot be determined with specificity. Thus as shown in the portal receives from the wireless device via the gateway a request by the user to modify the from location. In response the portal instructs a direction controller to modify the from location and receives therefrom an appropriate screen to permit the user to modify the from location. The direction controller represents a subsystem subroutine or group of functions for providing directions as described herein.

In response to the received screen the gateway receives from the user s wireless device a new from location which it forwards to the portal . The portal in turn forwards the new from location to the direction controller to check if the new from location corresponds to a new address or one already recognized by the direction controller . If the address is new the direction controller returns an appropriate input display screen. The input display screen is then forwarded to the wireless device via the gateway . The gateway receives new address information from the user s wireless device which the portal receives and forwards to the direction controller for updating. The direction controller generates and forwards back to the portal an updated from screen reflecting the new address which in turn is forwarded to the wireless device via the gateway . In a very similar manner to that described above the user may change the to location.

Referring to an example of a message flow for receiving or viewing directions is shown. The generation and display of directions and other data is tracked or managed via a hypertext transfer protocol HTTP session running on the portal or application server as described above. While not shown in all of the Figs. the portal or application server initiates a session for managing the state of the mobile device s access to functionality provided herein. For example when viewing directions a user may request to view a next screen full of directions act on the directions e.g. sending the directions by email or fax or jump to a specific screen of directions. The HTTP session manages the current state to ensure proper functionality. HTTP is the long haul protocol for handling a Find Friends subscriber s transactional request and helps to minimize the network traffic required to process the request. Other suitable protocols may be substituted for HTTP to perform transaction request handling and or to reduce network traffic associated with transaction requests. Likewise other methods for tracking the state of the mobile device or user accessed functionality may be employed.

Thus when a user requests directions the direction controller and a find friend controller described below each set from and to locations to initiate a session via the HTTP session . Thereafter the direction controller requests directions from the location engine . After receiving the directions the direction controller stores the directions in the session under the HTTP session and formats the directions as a display screen for the portal . The wireless device receives the display screen of directions from the portal via the gateway . If more directions are to be displayed the wireless device may provide a request for more directions to the portal via the gateway . In response thereto the portal requests the direction controller to display more directions and if such directions are available they are provided to the wireless device via the portal and gateway .

The user may also view a particular screen of directions. For example if six screens of directions are provided to the user to navigate the user from a current location to a desired location the user may jump to the third of six screens. Thus as shown at the bottom of the user may select a particular screen of directions and provide this desired screen number to the portal which in turn provides the direction number to the direction controller . In response the direction controller provides the desired screen of directions which the portal provides back to the mobile device .

As noted above the system includes a meet friend subsystem or controller that represents a subroutine or group of functions allowing users to meet their friends identify points of interest search for meeting places and schedule such meetings. The meet friends subsystem also forwards this information on to the direction controller if directions are needed. Referring to a message flow for requesting the system to allow a user to coordinate a meeting with a friend between the user and the friend is shown. The flow begins where the portal receives via the gateway a request by the user s wireless device to meet a friend. The portal queries the database to look up all friends of that user and provides back to the user a friends display page containing the user s friends list. Under an alternate embodiment the friends display page may include not only a list of the user s friends or first five friends in the list but also last identified locations for these friends. Thus the user can identify which friend may be closest and coordinate a meeting with that friend.

As shown in the portal receives from the wireless device a friend that the user has picked. In response the portal requests the GMLC to locate and provide the geo code for this friend. In response to receiving the geo code the portal requests the location engine to perform a reverse geo code to determine the address location of the friend. In response to receiving the friend s address location the portal sends an SMS message to the friend via the email gateway . The SMS message indicates to the friend that the user has attempted to locate the friend. The portal also sends a friend s location display page to the user s wireless device providing the friend s address location. In response to the user s requesting to meet with the friend the portal sends a meet options display page to the user. The options page includes at least three options meet near the user meet near the friend or meet between the user and friend.

As shown in the example of the user requests to meet between himself or herself and the friend which is indicated by a between us message the portal receives from the wireless device via the gateway . The portal then gets the user s geo code from the GMLC and requests a reverse geo code location from the location engine for the user. Reverse geo coding converts a latitude and longitude to a street address or other position easily locatable on a map. Thereafter the portal requests the location engine to identify a midpoint between the user and friend and based on the midpoint requests the location engine to find neighborhoods cities or other sites around the midpoint. In response to the list of neighborhoods cities sites the portal provides a neighborhood display page for the user s wireless device via the gateway . The user selects a neighborhood city sites and provides this information to the portal via the gateway . In response the portal requests point of interest POI categories based on the chosen neighborhood city sites and provides to the wireless device a display page listing POI categories. Categories may include for example restaurants bars parks cafes etc.

The portal receives from the wireless device a chosen POI category and requests from the database search radius parameters which are returned to the user s wireless device in an appropriate radius select display page. The user submits a desired radius to the portal and the portal requests from the location engine POIs for the given category within the user s selected radius. In response the portal receives from the location engine a list of all POIs fulfilling the user s desired criteria and provides to the user s wireless device a POI display page listing such POIs. The user chooses a particular POI from the list and provides this to the portal via the gateway . The portal in turn provides a POI display page providing details on the selected POI. While not shown the portal sends an SMS message email message or other communication to the friend requesting an RSVP.

The database stores a list of pending RSVP s in both a record for the user and another record for the friend. The system may thus keep track of pending RSVP s and other meeting requests. Indeed the system sends numerous SMS messages to keep the user as well as friends updated on the status of various requests. In an alternative embodiment the portal provides the user and friends with options for opting in or out of receiving various SMS messages such as messages indicating whether friends have attempted to locate the user. Under this alternative the user may select whether to receive any such messages or indicate whether to receive such messages from particular friends or others that the user has allowed the system to provide the user s location. Thus for example the user may wish to be notified when a first friend tries to locate the user but not a second friend.

If the user wishes to receive directions to the POI the user may request via the wireless device directions. In response the portal receives the request for directions and performs many of the functions described above for obtaining and providing the desired directions to the wireless device . The portal may email directions to both the user and the friend via the email gateway . For example the portal may create and format e mail messages which the email gateway sends to users at for example username mobile.att.net. Alternatively or additionally the portal may communicate with an appropriate fax server not shown to generate a fax of a map image and send such an image to the user or friend for receipt by a computer fax machine etc. Software utilities for generating and sending facsimile images are well known to those skilled in the relevant art. The portal may send an SMS or other communication to mobile devices to alert the users to check their email or fax machine.

The system requires users to share their mobile phone numbers and usernames twice once when requesting permission to locate a friend so that the friend knows who is making the request and again when granting access to someone. The portal stores the mobile phone number and username in the friend list so that the portal can identify the user and make it easy and secure for friends to contact the user.

Referring to if the user wishes to meet near the friend much of the same message flow repeats from that shown in . However rather than providing a request to meet between us when receiving the meet options page the user s wireless device provides a meet near friend request to the portal. The system then provides POIs within the desired radius with respect to the friend s location. Likewise if the user wishes to meet near himself or herself a substantially similar message flow is performed as shown in .

The functions described above for meeting a friend allow the user to meet one friend at a time. Under an alternate embodiment the system permits the user to select two or more friends and coordinate a meeting equidistant between these friends and the user. The system via the location engine computes a midpoint between the user and friends and performs the functions above to permit the user to identify a desired POI at this midpoint or geographic center. 

In another alternative embodiment the portal may integrate or interface with the user s calendaring application contact management application or both applications. For example the portal receives data regarding a meeting that the user has requested with a friend and using standard API s associated with Microsoft Outlook Infospace Calendar or similar applications adds the meeting and particulars regarding the meeting to the user s calendar. Likewise when the user adds a new friend or otherwise adjusts his or her friends list described herein then contacts records in the user s contact management software such as Microsoft Outlook are modified to include information regarding the friend.

The portal may determine the time zone or current local time in which the user is located based on the user s location. Alternatively or additionally the user may provide his or her home or office zip code when subscribing for the service described herein which the portal may use to associate a time zone or local time with that user. Also when a user locates a friend via the system the portal may return to the user s mobile device the time zone or local time at the friend s current location. The portal may determine the time zone from the mobile device s location request it from the mobile device or obtain it from another system element such as the location engine or GMLC .

The time zone or current local time may be useful in a variety of applications. For example the local time may be used in coordinating meetings. The user may be traveling from Seattle to New York City and may use the meeting function to schedule or coordinate a meeting with a colleague in New York City. The user may enter a from location corresponding to a hotel at which the user will be staying and the meeting location such as a restaurant near the hotel . The system can then coordinate the meeting based on East Coast time rather than the user s current West Coast time. The system may also use the user s or friend s associated local time to determine appropriate times for receiving or sending messages deciding whether it s an appropriate time to call the located friend etc. Thus the system may use the local time of the user friend or others to populate appropriate applications or functionality described herein.

Under an alternative embodiment the portal may provide the user with a dropdown list of cross streets near a location such as the current location of the user or the location of a point of interest . Such list of cross streets may be particularly helpful in orienting the user with respect to a desired location filling out a screen e.g. a from location screen etc. Such a list of cross streets may be provided as an option selectable by the user via any known user input technique e.g. touch sensitive screen on mobile devices employing such user input devices simple button selection from a menu list with mobile devices employing only numeric keypad etc. . The location engine may provide the identification of cross streets.

The portal may notify the user when a friend on the user s list is nearby. For example if a friend on the user s friends list is in the same cell sector as the user then the portal may provide an SMS message to the user to identify the friend and indicate that such a friend is very nearby. 

As another example the user may find friends or other individuals sharing a similar interest who are within a certain radius or based on other criteria. As explained below the portal database may store public profiles for each user of the location based services described herein. This public profile may include hobbies interests and other information regarding that individual. Thus a user may attempt to locate anyone within 200 meters that likes golf so that the user can send a meeting request and establish a foursome. Many other examples are possible as described herein.

More specifically show examples of software routines or subroutines that provide functionality shown or described in greater detail with respect to FIGS. through and the previous Figs. described above. Without sacrificing clarity but for brevity and to orient those skilled or unskilled in the art portions of will now be discussed in detail. From these detailed discussions of one can more readily understand even though those skilled in the relevant art will find self explanatory.

As shown in a FindNearbyController routine initializes and provides to the user a page FindNearbyPage which presents to the user the choice between finding a nearby place or a friend. In the example the user selects place and in response the system initiates a subroutine NearbySearchController which interacts with a subroutine CategoryListBuilding which gets all categories from a category database CategoryFactory. The server may execute a script or other executable code to generate a page or other display to the user. Thus while aspects of this embodiment are described with respect to for example providing or displaying the FindNearbyPage page the system may actually execute a script entitled FindNearbyPage to generate a page or display that is transmitted for display on the user s mobile device. Thus for the sake of brevity but without sacrificing clarity the following discussion simply refers to displaying or providing a page to the user.

The user next receives a page NearbyPlaceMenuPage which provides the option between restaurants and bars pubs or more places. If the user selects more then the NearbySearchController requests more categories to display to the user from the CategoryListBuilding . In this example the user selects restaurant and in response a subroutine PlaceSearchRadiusController displays to the user a search radius page which provides search radius options of one five and fifteen miles or other shown as PlaceSearchRadiusOptionPage . After selecting a search radius a subroutine PlaceSearchResultController launches and gets the information based on the user choice within the radius from the location engine and displays location information. If the user had selected other from the page then the user receives a page PlaceSearchRadiusInputPage . If nothing was found within the selected radius then the user receives a page NoLocationsFoundPage that allows the user to return to the routine FindNearbyController or to select another radius from the page .

A subroutine PlaceListBuilder finds places from the selected category and within the selected radius while maintaining a session. A subroutine FriendLocator calls the GMLC and the location agent which provides location data regarding the location of for example the user s mobile device. Places in the selected category and within the selected radius are provided to the user via a NearbyPlaceInfoPage which in this example shows a McDonald s 0.5 miles away and a Burger King one mile away. The user may receive more details regarding a selected place where such details are provided in a NearbyPlaceDetailsPage . From the page the user may call the displayed location or receive directions thereto via a subroutine NearbyPlaceDescriptionController . Following the page a subroutine DirectionsController receives source and destination information and obtains directions to provide to the user.

Representative user interface screens for displaying information to users and associated logic branching and functionality will now be discussed with respect to . These Figs. show examples of information displayed to a user display pages and examples of choices selected by the user. Those skilled in the relevant art will readily recognize that other examples are possible. Likewise are generally self explanatory to one skilled in the relevant art based on the detailed description provided herein . Aspects of some initial user displays and functionality will be described in detail but subsequent displays and functionality may be described in less detail. Those skilled in relevant art will recognize that subsequently discussed displays and functionality have much of the same details as those described previously. While the following discussion describes providing information to the user the portal actually provides via the gateway a display page for display on the wireless device or other communication to the user.

The display pages may be implemented in WAP XML Extensible Markup Language HTML HyperText Markup Language Handheld Device Markup Language HDML Wireless Markup Language WML or other language or scripts that provide information to a user. The display pages provide facilities to receive user input data such as a fields to be filled in one or more numbered items to be selected from menus hypertext links to select displays allowing one or more of several options to be selected or other known user interface tools for receiving user input. Of course while one or more ways of displaying information to users in pages are shown and described herein those skilled in the relevant art will recognize that various other alternatives may be employed. The terms screen display page and page are generally used interchangeably herein.

The display pages are stored as display descriptions graphical user interfaces or as other methods of depicting information on a computer screen e.g. commands links fonts colors layout sizes and relative positions and the like where the layout and information or content to be displayed on the page is stored in the database or other location . In general a link refers to any resource locator identifying a resource on a network such as a display description provided by an organization having a site or node on the network. A display description as generally used herein refers to any method of automatically displaying information on a display screen in any of the above noted formats as well as other formats such as email or character code based formats algorithm based formats e.g. vector generated or matrix or bit mapped formats.

Referring to the portal provides a Main Menu to the user under block . As shown the Main Menu provides the user with seven options 1 locate friends 2 locate on off 3 meet friend 4 find nearest . . . 5 add edit friends 6 edit profile and 7 help. The Main Menu provides the starting place and initial branching for options and functions provided to the user. Each of these options will be described in detail below.

As explained below the system permits users and friends to modify privileges and profiles whenever desired. Thus users or friends may turn off the ability to have the system locate them to go invisible . Likewise users can modify their friends lists to permanently or temporarily remove friends from the list. Users and friends may create edit and view public profiles that provide information regarding such users friends. Further description of the ability for users to modify privileges in real time is described herein.

Referring to if the user selects locate friends such as by depressing the 1 button on a mobile phone the portal provides a list of friends to the user in block . If the user selects a friend the system attempts to locate the friend and if the friend cannot be found provides a locate error message and may send a locate alert SMS message to the user as described herein. If the friend is found then one of two results are provided to the user depending upon e.g. how accurately the system can locate the friend as shown in blocks and .

If the user wishes to view more friends than those shown in the initial friends list under block the user may ask the portal to display more friends as shown in block . Under block additional friends are displayed to the user together with the options to add a friend as described below or the ability to find all friends. In this example the user has selected the option find all friends and if the user has more than 20 friends the system provides under block an error message indicating that the system cannot locate more than 20 friends at a time. The user can then request additional friends or a subset of these 20 friends under block . If the user elects to act on the 20 friends or a subset thereof both blocks and branch to an option menu that permits the user to call one or more friends send an SMS message to one or more friends or meet one or more friends. Likewise after selecting the friend in block or or finding all friends under block the routine branches to the option menu .

Many display screens shown in the include options OK and Menu . Selecting the OK option selects a given choice or command displayed on the screen. The selecting the Menu option returns the user to the Main Menu. Additionally many display screens shown in the and other functionality described herein provide specific suitable values for certain parameters. Those skilled in the relevant art will readily recognize that system may employ other values. For example while the system is indicated above as not being able to locate more than 20 friends at a time an alternative system may locate only 10 friends at a time or may be capable of locating 30 or more friends simultaneously. Thus such specific numbers or values provided herein are only examples and many other values may be employed.

Referring if the user elects to call a selected friend under block then in block in the system calls that friend and the display shown in block is provided to the user. Alternatively if the user elects to send an SMS message then the user is shown an input screen block in which to enter text and after clicking OK is shown a display block indicating that the message has been sent. The option for meeting a friend is described below. Following blocks or the routine branches back to displaying the Main Menu.

Referring to if the user wishes to turn his or her location on or off with respect to the system also referred to as going invisible visible the portal displays under block a screen indicating a current location status for the user. The user then may edit this state under a screen . Thus the invisibility functions are provided as a top level menu item to permit the user to readily turn off the ability to locate the user with only a minimum number of keystrokes. Invisibility may be based on time group etc. such as after 10 P.M. I don t want to be visible or only let my family find me. The portal saves the results and the routine branches back to the Main Menu. Alternatively some embodiments of the invention would maintain a list of friends to whom the user can never be invisible and from whom location permission cannot be withdrawn. Such a list would be useful for parents who wish to be able to locate their children employers who wish to locate their deliverymen or other persons who might sponsor a user s account.

Referring to if the user selects from the Main Menu to meet a friend then under blocks or the user may select a friend and view a location of the friend in block . In block the user receives a meeting area display page which provides the options 1 meet near the friend 2 meet near the user or 3 meet between the user and the friend.

Referring to if the user selects to meet near him or herself or near the user s friend the system acquires the user s location. After selecting to meet near the user or the friend the user receives a meeting place or POI category list under block . As shown the list may include options such as restaurants coffee shops bars pubs bookstores etc. Other examples of points of interest include pharmacies hospitals fire police department locations and other emergency type locations. In general a point of interest may be any physical or geographic location. The system provides a list of most common types of meeting places as described herein. The meeting places are associated with a location or location context. The location context need not be an exact street location but a general area such as city state neighborhood site e.g. cell site . The portal database location engine or both store such information regarding these points of interest.

If the user is too far away from his or her friend then the user receives a too far display under block . If the user wishes to meet at a geographic midpoint then the user receives one of three possible displays multiple cities or neighborhoods are located at the midpoint block the friend is in the same cell site or is otherwise nearby the user block or the friend is in the same city or neighborhood as the user. If more than one city neighborhood are available then the user receives a city neighborhood select screen as shown in block .

Referring to after the user has selected a category of meeting places under block the user receives a search radius screen under block to select a 1 5 15 or other mile radius. If the user selects a radius and no POI is found within that radius the user receives an expand search screen whereby the user may expand the radius and is then returned to block . If the user selects to enter a desired radius the user may enter the desired radius in a radius input screen blocks . Under block the user receives a list of POIs associated with the chosen meeting place category in this example restaurants . After selecting a restaurant the user receives in block details on the selected restaurant such as its address a distance from the user telephone number and options to call the restaurant or receive directions to the restaurant. If the user selects to call the restaurant the user receives a calling display block .

Referring to if the user requests directions to the restaurant the user receives a get directions screen where the user must input a starting or from location the to location i.e. the restaurant is already provided . To get directions the user must input the from location and thus receives a from location screen block from which the user may select a from location the user s location the friend s location or another address. If the user selects either his or her location or the friend s location and the system is only capable of approximately locating a user then the system may provide a suitable warning screen blocks and indicating that the system provides the nearest cell site as the current starting location and provides that back for display in the directions screen of block . If the user wishes to enter an address e.g. to provide greater geographic specificity then the user receives an enter address screen block . If the address is not found the user receives an address not found screen block and then again receives the enter address screen of block . The portal may automatically populate city state and other fields when the user enters an address. For example as the user begins to type in a city the portal begins to automatically fill in the entire name of a first city within an appropriate radius of the user having for example the first two letters input by the user The location engine may provide such a list of cities.

Referring to after receiving the from directions the user receives screens through that provide several screens of directions to the user. Under block the user may perform three options with respect to the directions return to the previous screen of or step in the directions jump to a desired screen of or step in the directions or email the directions. The portal may provide a small map with each step in the driving directions where the map may include the current street location of the user or friend and any other nearby or important streets. While not shown in all Figs. if the user inputs an invalid instruction number or otherwise selects an invalid entry the user receives an error screen such as that shown in block . If the user wishes to email the directions the user receives an email entry display to enter an email address block . Alternatively the portal could automatically supply an email address by reference to information in the database such as the user public profile or friend data record described below or other suitable records. Thereafter the routine returns to the Main Menu.

Referring back to if the user chooses to find the nearest friend or place from the Main Menu the user receives a find nearby places screen at block . Thereafter the routine lists categories of meeting places or lists of friends in blocks and in a manner substantially similar to that described above. The system may of course find any type of location to satisfy user needs such as automotive services e.g. gas stations tow services automotive repair locations auto dealerships etc. financial institutions e.g. banks automatic teller machines ATMs check cashing locations etc. governmental locations e.g. libraries post offices vehicle license registration locations police stations fire departments etc. travel services e.g. taxi services hotels motels train stations etc. and general consumer services e.g. laundromats dry cleaners grocery stores convenience stores newsstands health clubs shopping malls copy print stores etc. .

Referring to after electing to locate a place the user receives screens for entering a search radius list of POIs location specifics options and directions under screens and in a manner similar to that described above for meeting friends. If the user elects to locate a friend the user receives the search radius screens of . Thereafter in the user receives a list of friends in the selected search radius under block . If the user wishes to view more friends than those shown in the initial list one or more additional friends screens are displayed under block . Thereafter the system allows the user to perform several functions such as place a call to the friend schedule a meeting with a friend send an SMS message to the friend or any other functions described herein. Additionally the user may search for POIs in a radius around the user the friend a midpoint between the user and the friend or around another POI for example the user may search for restaurants within one mile of a particular intersection .

Referring to if the user selects under the Main Menu to add or edit friends the user receives an add friends option display under block . As shown the user may accept friends remove friends retract permissions or edit a deny always list. If the user wishes to add a friend then referring to the user receives an add friend menu under block . As shown the add friend menu allows the user to enter the mobile number of a friend enter the username of a friend or search a database of public profile records for friends based on specified search criteria. Although the friends list pending friend request list and deny always list are discussed primarily in the context of storage in the network in some embodiments of the invention these and other lists could be stored in and modified with the mobile device . For example the mobile device may locally store the lists or records described herein within on board memory or in a Subscriber Identity Module SIM card smart card or other removable memory.

If the user elects to enter a friend s mobile number then the user receives an enter mobile number screen block and if the mobile number is not found the user receives a not found screen block . If the user wishes to enter the username then the user receives an enter username screen block and a username not found error screen if the username is not found block . If the user wishes to search for a friend then the user receives a search criteria screen under block . As shown the search criteria screen allows the user to search various fields in public profile records such as first name last name city state age email address interests or any combination of these search criteria or fields. After entering search criteria the user receives either a search results screen block or an error screen block .

Of course these above fields are only examples and other fields or search criteria may be provided to the user. When users initially subscribe to the system they may be required to complete a form such as a Web page form or other electronic document that includes not only personal information but public profile information that the users will permit others to see or search. Of course users may provide access privileges to some or all of the users fields in this form and users may edit such profile or modify such access privileges at any time.

Jumping to an example of a user s public profile is shown as a record . The user s public profile record includes first and last name fields and together with city state email address and zip code fields and respectively. The user s public profile may also include an image file or a link to an image file that allows friends to view an image of the user. The image may be any digital image such as a digital photograph cartoon animation etc. The record may include an age field as well as one or more interest or hobby fields through . Of course many other fields may be provided. Other fields may include an instant messaging IM handle or username or other user communication IDs described herein. As noted above the user may retrieve or download a web page for electronically inputting data for these fields and create such a record that is then provided back to the portal application server .

Referring to after identifying a friend to add the user receives a screen that lists the friend s mobile number or username block and provides two options send requests to the friend to ask whether he or she wishes to be added to the user s friends list or view a public profile of the friend beforehand. If user wishes to simply add the friend then the user receives an informational message under block that indicates that an SMS message or other message has been sent to the friend requesting that the user have access to the friend s location.

Alternatively or additionally the system provides some indication to the user with respect to screens displayed on the friend s mobile device. For example the next time the friend accesses the location based services described herein he or she will see an asterisk next to the add edit friends option in the main menu. Such a visual indication tells the user that a pending request for access exists. If the friend denies access the user receives a denial message. 

Once the friend accepts the request the friend is added to the user s friends list and the user may thereafter locate the friend unless the friend has gone invisible or denied the user access to this friend s location . If user wishes to first view the friend s profile then the user receives a public profile screen block that includes the fields listed above e.g. first name last name city state age etc. .

Referring back to if the user wishes to accept a friend who has requested the user be added to that friend s list of friends then in block the user receives a status screen indicating a number of pending requests the user has to be added to friends lists so that these friends may have access to the user s location. In block the user receives a list of friends with pending requests from which the user may select a friend and associated request .

Referring to after selecting a friend from the list of pending requests the user receives an option menu in block where the user may accept the request deny the request always deny requests from this friend or view a profile with respect to the requesting friend. If the user wishes to accept the request then the user receives a confirmation screen block that requires the user to confirm that the user wishes to permit the friend to access the user s location and mobile number. If not then the user receives the option menu block but if so the user receives an access granted screen block that also asks the user whether the user would like the system to request that the friend grant the user access to the friend s location. In other words the system does not automatically provide location reciprocally between a user and a friend but instead first requests permission from one and then requests permission from the other. If so then the system sends an appropriate SMS message and a request sent confirmation screen is provided to the user under block .

If the user wishes to deny location information to the requesting friend then the user receives a deny confirmation screen block that indicates that the selected friend will not have access to the user s location. If the user wishes to always deny that the selected friend will have access to the user s location or the user wishes to view the friend s public profile then the user receives screens shown with respect to blocks and respectively. After always denying the friend the user again receives the list of pending requests screen block but without the selected friend listed. After viewing the selected friends profile or not agreeing to always deny the selected friend the routine loops back and the user again receives the screen in block .

Referring to if the user chooses to remove a friend under block then in block the user receives a retract permission screen that lists friends for which the user can retract permission to locate the user. Under block the user receives a confirmation screen requesting the user to confirm that the selected friend is to not to be given access to the user s location. If the user agrees then in block the user receives a screen confirming that the selected friend can no longer have access to the user s location and asking whether the user wishes to have the friend removed from the user s friends list.

If the user wishes to remove a friend from the user s friends list following blocks or then the user receives a list of friends that may be removed under block . Under block the user receives a confirmation screen requesting the user to confirm removal of the selected friend from the user s friends list. If the user agrees then in block the user receives a screen confirming that the selected friend has been removed from the user s friends list and asking whether the user wishes to retract permission for this friend to access the user s location. If so the routine loops back to display the options under block through otherwise the routine loops back to the Main Menu.

If the user wishes to edit his or her deny always list then the user receives under block a list of friends on the deny always list. Under block the user receives a confirmation screen requiring the user to confirm that a selected friend on the deny always list is now to be given access to the user s location. Under block the user receives a screen indicating that the user s deny always list was successfully edited and requesting whether the user would like the selected friend to be given notification that he or she may now have access to the user s location. If so then the system sends an SMS message to the selected friend and the user receives a notification sent confirmation screen under block . An example of such an SMS message may state user has removed you from the Deny Always list. If you wish to request access to user s location go to Add Friend Menu. 

If a friend no longer grants access or location information to the user that friend s user name will disappear from the user s friend list. The friend may or may not choose to send a message notifying the user of such a change. To reacquire access the user will need to perform the add edit friends functions described above to make another request to the friend.

Referring to if the user selects from the Main Menu to edit the user s public profile then the user receives a public profile screen that lists the user s public profile fields any of which the user to edit. The user s public profile is described above. The user may set flags indicating which of the fields are to be made publicly available and may specify in which locations or which location applications these fields are to be provided. For example certain location functions may display some public profile fields which the user has specified as being made available for that application. If the user selects from the Main Menu to view help functions then in block the user receives three options to view tutorials to view frequently asked questions FAQ and to view about information. In response to these three options the user receives one or more tutorial screens block FAQs screens block or about screens block .

Referring to examples of some errors and other alerts are shown in addition to the error messages and alerts described above. In general while not shown in each of the the user may receive one or more error screens in response to certain user input or system responses. For example if the user is trying to locate a friend who is no longer permitting the user to access to the friend s location then the user receives a permission retracted error message block . If the friend is no longer a subscriber under the system then the user receives a dropped service error message block .

Following blocks or other error messages the user may be presented with one or more options. For example if the user attempted to locate a friend under block or group of friends under block and receives an error message e.g. the friend cannot be currently be found the user may be presented with options to communicate with one or more of the friends. In the case of an individual friend that the user has attempted to locate the system may allow the user to call or send an SMS message to that friend. Alternatively in the case of multiple friends the user may choose an individual friend to call or send an SMS message to all friends. The user may have the same options to communicate with a friend had a successful location occurred.

If the user is attempting to obtain map information for a given. location but such information is unavailable the user receives a no map data error message block . If the system is unable to obtain location information then the user receives an out of coverage error message block . If a friend is currently unwilling to be located has gone invisible then the user receives a locate set to off error message block . Following blocks through the routine loops back to display a previous menu of options to the user under block .

Referring to examples of tables records or other data structures stored in the portal database to assist in providing the above functionality will now be described. The public profile of described above is also stored in the portal database . Referring to a table shows a list of friends who have granted the user permission to receive their location the friends list . As shown this friends list includes five friend fields through having usernames associated with Friends through respectively. As shown a locate flag is associated with only Friends and which indicates that the user may only receive location information with respect to these two friends. The other friends have not yet granted the user permission to receive their location information.

While each friend is identified in the record based on the friend s username each friend may be associated with another data element. Alternative data elements or identifiers include the friend s mobile number email address instant messaging handle username alias or any other type of user communication ID that identifies the user or computing or telecommunications equipment associated with the user. In other words while the record and other records is keyed to the friend s username other data may be employed such as the friend s mobile number email address alias or other information provided in a friend data record described below .

Referring to a record is shown as a table of friends to whom the user has granted permission to receive his or her location sometimes referred to above as a friend s list of friends . Again five friend fields through are provided for five friends Friend through Friend and their associated usernames. As shown a locate flag is associated with Friend and Friend . Thus Friends and may receive information from the system regarding the location of the user.

Referring to a record is shown as a table of friends who the user wishes to always deny his or her location often referred to above as a deny always list . Again Friends through are shown associated with their usernames in fields through respectively. As shown a locate flag is associated with Friend indicating that the user wishes to always prohibit Friend from locating the user.

As noted above the user may send messages via the system to friends to ask that these friends provide their location data to the user and thereby allow the user to add friends to the record . If a friend accepts then the system adds an appropriate locate flag possibly with an appropriate username to the record . Similarly the user may readily modify the records and to change locate flags and grant permission to friends to receive the user s location or always deny the user s location under these records respectively. Thus the portal database maintains these records above to ensure current permissions or privileges are provided.

While three records are shown and described the system may instead employ a single record or other data structure configurations to track this information. Likewise for each friend listed under records through additional information may be provided regarding each friend such as the friend s mobile number email address instant messaging handle etc. Alternatively referring to a record is shown for friend data associated with one of the user s friends. Each of the records through may be linked or keyed to a particular friend data record to provide the user with access to additional information regarding each friend. Alternatively such additional information may be provided by the friend s public profile .

As shown in the friend data record includes a username field that includes the user s alphanumeric username. A mobile number field includes a numeric value of the friend s mobile telephone number or other related number. While the mobile number is used here as a key to identifying friends or the user various other numeric identifiers may be employed such as a Mobile Identification Number MIN Temporary Mobile Subscriber Identifier TMSI International Mobile Equipment Identifier IMEI International Mobile Station Identifier IMSI and others. Thus one or more of these values may also be included in the friend data record and other relevant records described herein.

An email address field includes the friend s email address while an instant messaging handle field includes an IM username for the friend. A username alias field may be an alphanumeric name that the friend has provided as a more complete description or identifier from the user beyond the other fields provided here. The friend data record may include other fields such as a user image field or file . Other user communication identifiers may be provided such as facsimile numbers associated with the friend pager numbers URLs network addresses for equipment associated with the friend and the like.

Referring to a record is shown as a table of options for affecting user location data invisibility list . As noted above a user may not only prohibit the system from providing location data with respect to the user but may also provide more customized invisibility options. For example the user may establish invisibility options with respect to certain individuals. As shown in a user in this example has previously established and identified three friends under fields to which he or she wishes to provide customized invisibility options. A locate flag associated with Friend is set to always be on so that Friend may always locate the user even if the user turns the locate feature off goes invisible . For example Friend may be the user s spouse and the user always wishes his or her spouse to locate him or her. In this example a Set On flag may not be easily modified by the user.

As explained above the user may become invisible so that the system does not provide the user s location data to any friend. Alternatively or additionally the user may selectively become visible or invisible to certain friends. For example the user has set an On flag with respect to Friend so that when the user goes invisible Friend will still be able to find the user. The On flag may be readily turned off or removed at the user s discretion. Conversely the user may set an Off flag with respect to a friend so that that friend may not locate the user until the user has removed the Off flag.

Likewise the user may establish invisibility options with respect to certain schedules. As shown the user has identified three schedules fields . Schedule 1 has a flag Set Off associated with a schedule indicating to the system not to provide the user s location to anyone before 6 AM and after 10 PM. In other words the user automatically goes invisible between 10 PM and 6 AM. Again the user may not readily modify the Set Off flag. To avoid conflicts with other rules or flags the user or the system may establish that e.g. friend options take precedence over schedule options. Thus the system may always provide location information to Friend even if before 6 AM and after 10 PM.

In this example the user has established two additional schedules Schedule 2 for a lunchtime schedule of 12 PM to 1 PM and Schedule 3 every Friday the latter of which has a flag Off . Thus the user has indicated to the system that the user is to be automatically invisible every Friday.

The user may establish invisibility options with respect to geographical criteria. As shown the user has identified three location criteria fields through . Location 1 has a flag Set off associated with a radius of more than 50 miles which may represent that whenever the user leaves the user s predetermined metropolitan area the user is to automatically go invisible. Location 2 is associated with a 30 mile radius surrounding ZIP code 70047 while Location 3 is associated with a particular city Tacoma . As shown the user has set an Off flag associated with Location 3 and thus whenever the system detects that the user s mobile device is in the Tacoma area the user is to go invisible.

Various other alternatives are possible. For example the user may establish custom rules for going invisible. As shown a Custom field indicates that the system may provide the user s location to Friend during lunchtime even if the user has gone invisible. Those skilled in the relevant art will recognize that various other options or rules for affecting user location data may be established. For example the user may establish a rule whereby the system automatically provides the user s location to a friend such as via an appropriate SMS message when the user is within or reaches a particular location. Alternatively or additionally the portal may notify the user when friends who have previously accepted the user s meeting request are arriving at the meeting location. Such an option may be desirable for careers or common carriers to indicate to a central dispatcher or location that a courier has arrived at a desired destination. In addition to permitting the user to modify such options on the user s mobile device the system may provide a Web front end so that users may access the portal and modify these and other options and menus via the Internet using a computer.

While the terms field and record are used herein any type of data structure can be employed. For example relevant data can have preceding headers or other overhead data preceding or following the relevant data. Alternatively relevant data can avoid the use of any overhead data such as headers and simply be recognized by a certain byte or series of bytes within a serial data stream. Any number of data structures and types can be employed herein.

In some embodiments of the invention the mobile device could store friend list information in the removable memory or non removable memory . Such friend list information could include for example the list of which friends the user has granted permission to locate the user the list of friends that have granted the user permission to locate them the list of pending requests for location permission the list of meeting RSVPs or the list of other subscribers who will always be denied permission to locate the user. Indeed any of the data structures or records described above may be stored in the removable memory . Upon receiving a command from an input device such as a keystroke on the keypad the processor unit would retrieve or store friend list information from to the removable memory or non removable memory .

In some embodiments of the invention a software flag could be implemented in the removable memory or non removable memory to indicate the be invisible status of the mobile device . When the system attempts to locate the mobile device it may perhaps interrogate the mobile device for the status of the be invisible flag. If the flag is set to be invisible then the system would report back to the application that requested the location of mobile device that mobile device cannot be located at this time. Having the be invisible flag in the mobile device rather than the portal would require extra signaling in the network from the portal to the mobile device to discover the invisibility status of the mobile device after a request for its location has been made.

If the mobile device is equipped with a GPS receiver that provides latitude and longitude information about the mobile device s current location then portal may skip the requests to GMLC for geo coding and proceed directly to the requests for reverse geo coding from location engine . Thus an on board GPS receiver would affect signal flows by eliminating the need for some latitude longitude requests to the GMLC discussed above.

Many alternatives are possible. For example a dedicated button or switch may be provided on the mobile device to permit the user to readily turn invisibility on and off. Alternatively or additionally much of the functionality described as being implemented by the portal server may be performed by the mobile device such as tracking pending requests RSVPs formulating finding requests or queries for location based services etc.

A service provider providing the functionality described above may derive revenue based on kilobyte traffic or usage. For example each message sent or corresponding reply may generate revenue based on system usage. Alternatively or additionally the service provider may provide such functionality on a subscription basis. The service provider may provide premium content or features to users at rates higher than simple subscription fees for a data plan. For example a user may coordinate to meet a friend at a movie theater concert play etc. With premium services the user may then have access to ticket purchasing services such as those provided over the Internet to purchase tickets e.g. www.fandango.com or www.ticketmaster.com . Likewise if the user wishes to identify a restaurant at which to meet a friend the user may access a restaurant ratings service such as www.zagat.com.

Alternatively or additionally a service provider providing the functionality described above may derive revenue by billing content providers for responding to certain user location requests. For example if a user requests the system to identify the closest Starbucks or other name brand retailer the system may then bill the corresponding retailer for providing such information to the user. Likewise the user may request the location of the nearest retailer offering a particular deal e.g. a sale on a particular vehicle and the service provider then receive a fee from the merchant for providing the information or even a fraction of any sale consummated with the user.

The service provider may also obtain revenue on a per use basis. For example each time the user performs a proximity search e.g. to find the nearest name brand fast food restaurant the user may be charged a flat fee. Other fee generating examples may include the user requesting a graphical map of locations or directions results of a traffic query etc.

Those skilled in the relevant art will recognize that the location based functionality and systems described above have many potential applications. For example young adults may employ such functionality and systems to find friends and arrange a meeting at a local mall. College friends may locate one another nearby for a pick up game of basketball. A business person may locate a nearest technician to arrange for her to service the user s computer. One family member can determine whether another family member is near a grocery store to pick up groceries on the way home from work. Content developers can use the location technology to develop advanced applications like treasure hunt games orienteering events sophisticated fleet tracking systems etc.

In at least one embodiment described above the system provides options to protect user s privacy. For example users can quickly and easily turn on off the location feature go invisible at any time. Users must grant permission before a friend can add them to the list of friends he or she can locate. Once granted users can revoke permission at any time halting access by any or all individuals to their location information. Once a user gives a friend permission to locate his or her phone that friend can do so any time the phone is on unless the user turns off the locating ability to make the phone go invisible or revokes access for that person. To prevent unwanted requests users can permanently block a person from re requesting access to their location deny always . Further the system may share a user s location only with parties a user has expressly authorized to receive the user s location.

Unless the context clearly requires otherwise throughout the description and the claims the words comprise comprising and the like are to be construed in an inclusive sense as opposed to an exclusive or exhaustive sense that is to say in the sense of including but not limited to. Words using the singular or plural number also include the plural or singular number respectively. Additionally the words herein above below and words of similar import when used in this application shall refer to this application as a whole and not to any particular portions of this application. When the claims use the word or in reference to a list of two or more items that word covers all of the following interpretations of the word any of the items in the list all of the items in the list and any combination of the items in the list.

The above detailed descriptions of embodiments of the invention are not intended to be exhaustive or to limit the invention to the precise form disclosed above. While specific embodiments of and examples for the invention are described above for illustrative purposes various equivalent modifications are possible within the scope of the invention as those skilled in the relevant art will recognize. For example while steps or functions are presented in a given order alternative embodiments may perform routines having steps or functions in a different order. The teachings of the invention provided herein can be applied to other systems not necessarily the wireless telephone system described in detail herein. These and other changes can be made to the invention in light of the detailed description.

The elements and acts of the various embodiments described above can be combined to provide further embodiments. All of the above U.S. patents and applications and other references are incorporated herein by reference. Aspects of the invention can be modified if necessary to employ the systems functions and concepts of the various references described above to provide yet further embodiments of the invention.

These and other changes can be made to the invention in light of the above detailed description. In general the terms used in the following claims should not be construed to limit the invention to the specific embodiments disclosed in the specification unless the above detailed description explicitly defines such terms. Accordingly the actual scope of the invention encompasses the disclosed embodiments and all equivalent ways of practicing or implementing the invention under the claims.

Although the invention has primarily been described in the context of acquiring latitude and longitude from a GMLC a GPS or similar receiver in the mobile device could furnish latitude and longitude information. For mobile devices so equipped latitude and longitude could be obtained by a query from the portal to the mobile device or even passed from the mobile to the portal without use of a query. For instance a request from the mobile to locate nearby restaurants could include the user s current location as a data field in the request thus eliminating the network signaling to the GMLC and resulting in a quicker response from the system. Moreover any location determining system may be employed with the functionality described above.

Although the invention has been primarily described in the context of delivering messages and notifications with SMS many equivalent technologies could be used instead such as e mail or multi media messages that may include pictures icons animation or sounds.

While certain aspects of the invention are presented below in certain claim forms the inventors contemplate the various aspects of the invention in any number of claim forms. For example while only one aspect of the invention is recited as embodied in a computer readable medium other aspects may likewise be embodied in a computer readable medium. Accordingly the inventors reserve the right to add additional claims after filing the application to pursue such additional claim forms for other aspects of the invention.

