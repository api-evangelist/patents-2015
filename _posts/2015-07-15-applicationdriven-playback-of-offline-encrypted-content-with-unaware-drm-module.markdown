---

title: Application-driven playback of offline encrypted content with unaware DRM module
abstract: Application-driven interceptor module enables offline playback of Digital Rights Management (DRM) protected content to work in a same way as online playback. Communications with the DRM module are intercepted by the application-driven interceptor that is aware of the client device's network connection status. When the interceptor application determines that the client device is offline, requests for the protected content, and license/key to the protected content may then be managed by the interceptor application. In one embodiment, the interceptor application may retrieve requests for the key/license from a locally protected data store, and provide the key/license to the DRM module. In this manner, the DRM module may be unaware that its messages are being intercepted, and may then operate the same, unaware of whether or not the client device is online or offline.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09311459&OS=09311459&RS=09311459
owner: Google Inc.
number: 09311459
owner_city: Mountain View
owner_country: US
publication_date: 20150715
---
This application is a continuation of U.S. application Ser. No. 13 586 664 filed Aug. 15 2012 which application claims the benefit of U.S. Provisional Application No. 61 569 755 filed Dec. 12 2011 both of which are incorporated by reference.

The present embodiments relate generally to playing protected content and more particularly but not exclusively to providing an interceptor interface application to intercept communications from to a Digital Rights Management DRM module on a client device to enable the DRM to operate without knowledge of whether the client device is offline or online to at least a key management device to obtain access to decryption keys or a license to enable play of protected content.

Today personal computers are ubiquitous. Merely take a look around a caf street corner in a bus airport or train station and one will see many people using their smart phones or other handheld devices. While often these devices are used to communicate messages they are also used to play video and or media content.

Although accessing media content over the Internet is quickly gaining popularity there remain many reasons that this may not be practicable. For example flying many of today s airlines means that one must either pay additional fees to obtain a network connection or perhaps not even have such network connectivity available. This may also be true when in underground facilities such as subways where a network connection may also be unavailable.

Downloading content and playing the content locally or offline may provide a higher quality of viewing of the content unimpeded by network delays low network bandwidth or the like. However when the content is protected through various digital rights management policies some downloaded content might simply not be playable without a network connection available. Thus it is with respect to these considerations and others that the present invention has been made.

The present embodiments now will be described more fully hereinafter with reference to the accompanying drawings which form a part hereof and which show by way of illustration specific aspects in which the embodiments may be practiced. These embodiments may however take many different forms and should not be construed as limited to the embodiments set forth herein rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope to those skilled in the art. Among other things the present embodiments may include methods or devices. Accordingly the present embodiments may take the form of entirely hardware or a combination of software and hardware aspects. The following detailed description is therefore not to be taken in a limiting sense.

Throughout the specification and claims the following terms take the meanings explicitly associated herein unless the context clearly dictates otherwise. The phrase in one embodiment as used herein does not necessarily refer to the same embodiment though it may. Furthermore the phrase in another embodiment as used herein does not necessarily refer to a different embodiment although it may. Thus as described below various embodiments of the invention may be readily combined without departing from the scope or spirit of the invention.

In addition as used herein the term or is an inclusive or operator and is equivalent to the term and or unless the context clearly dictates otherwise. The term based on is not exclusive and allows for being based on additional factors not described unless the context clearly dictates otherwise. In addition throughout the specification the meaning of a an and the include plural references. The meaning of in includes in and on. 

As used herein the terms content or media content includes any digital data that may be communicated over a network to be remotely played by a computing device. Non exhaustive examples of content include but are not limited to movies videos music spoken word pictures illustrations graphics images text and the like. Content is often described by its format or container in which the content is provided. Thus as used here the term container refers to a data stream or file format which encapsulates audio and visual content. This content often consists of interleaved audio and video data in frames or slices with accompanying metadata such as frame timing information audio and or video configuration information encoding information compression information and the like. Also the container is typically arranged to enable content to be presented for playback at a remotely located network device such as a client device. A container may also be named a systems stream . A non limiting and non exhaustive list of examples of container system streams formats are MPEG2 TS Moving Picture Experts Group MPEG transport stream TS flash video FLV MOV a QuickTime file format MP4 3GP and ASF Advanced Systems Form WebM Project file format Matroska multimedia container format or the like. A video encoding format such as H.264 VP8 or the like may be encapsulated in the container. The content may be distributed as a rights managed systems stream of data over a network such as Pay per View PPV Video On Demand VoD live streaming or the like for playback by a remote network device. In one embodiment the content may be protected through a license that describes how where when by whom or so forth content that is protected may be accessed distributed copied or the like. Protected content may be protected using a variety of content protection mechanisms including through one or more Digital Rights Management DRM policies licenses and encryption decryption keys.

As used herein encryption refers to the process of transforming digital content referred to as plaintext using an algorithm called a cipher to make it unreadable to anyone except those possessing special knowledge usually referred to as a key. Decryption is the process of converting encrypted digital content back into its original form. As used herein unencrypted digital content refers to digital content received in plaintext or that is otherwise not encrypted and therefore does not need to be decrypted. It should be understood such plaintext digital content may be received in at least one embodiment in a compressed form or encoded form and still be considered as plaintext for the purposes described herein. Moreover as discussed further below digital content may include portions that are encrypted and other portions that are unencrypted within a same stream of digital content. Further different encrypted portions of the stream of digital content may be encrypted using different encryption keys and or employ different licenses. In one embodiment keys useable for decrypting the differently encrypted digital content may be rotated reused or renegotiated.

As used herein the term automatically refers to actions performed by a computing device based on one or more decisions performed by the computing device without an input from a user to directly initiate the action.

As used herein the term online refers to a client device being connected through a network to a remote computing device that is in operation to enable communications between the client device and remote computing device. In contrast a client device is offline when the client device is not connected through a network to the remote computing device such that communications between the client device and remote computing device is unable to occur. In one embodiment offline and online are consistent with The Federal Standard 1037C of 1996 titled Telecommunications Glossary of Telecommunication Terms issued by the General Services Administration pursuant to the Federal Property and Administrative Services Act of 1949 and which is incorporated in its entirety herein by reference.

It should be understood however that the client device may be in communication over a network and therefore online to one remote computing device while being offline to another remote network device. For example in one embodiment the client device may be offline to a Key Management Device KMD while being online to a content provider device.

The following briefly provides a simplified summary of the subject innovations in order to provide a basic understanding of some aspects. This brief description is not intended as an extensive overview. It is not intended to identify key or critical elements or to delineate or otherwise narrow the scope. Its purpose is merely to present some concepts in a simplified form as a prelude to the more detailed description that is presented later.

Briefly stated subject innovations are directed towards employing an application driven interceptor or wrapper module that enables offline playback of DRM protected content to work in a same way as online playback. That is a DRM module operating on the client device does not need to be aware of whether the client device is offline or online to a remote license key service through a network connection. The DRM module may operate virtually the same in either configuration. In this manner legacy DRM modules need not be rebuilt modified or otherwise replaced with DRM modules that are specifically modified to be network connection aware. Moreover by placing the ability to manage actions based on network connectivity or lack thereof in the interceptor application a content provider may have increased flexibility of how to manage play of the provided content. This is because the content provider may also provide the interceptor application for use by the client device.

Messages and or other forms of communications with the DRM module are intercepted by the application driven interceptor that is aware of the client device s network connection status. In one embodiment when the client device is initially online such as when downloading the protected content the interceptor application may intercept keys and or licenses from the remote license key service that might be requested by the DRM module. In one embodiment the license may include policies for the purpose of offline playback. In one embodiment the interceptor application may request content and license s key s for storing them rather than for immediate playback or use. The interceptor application may store the license keys in a locally protected data storage device. In one embodiment the local data storage may be encrypted with a private key or a symmetric key used by the interceptor application.

In one embodiment the interceptor application may detect whether the client device is offline or online. When the interceptor application determines that the client device is offline in one embodiment messages and or other communications with the DRM module are intercepted by the interceptor application. Requests for the protected content and related license key to the protected content may then be managed by the interceptor application. In one embodiment the interceptor application may retrieve the requested key license from its locally protected data storage device and provide the key license to the DRM module. In this manner the DRM module may be unaware that its messages are being intercepted and may then operate the same whether or not the client device is online or offline.

In one embodiment the interceptor application may intercept messages and other communications from to the DRM module even when the client device is online or offline. In one embodiment the interceptor application might select to pass the messages and other communications directly through a network connection when the client device is online and respond to the messages communications itself when the client device is offline. In other embodiments the interceptor application may modify the messages from the DRM module with additional information or otherwise modify the message to ensure that the DRM module does not directly receive the messages.

The interceptor application may also include an integrity module that is configured to analyze an integrity of the client device to determine whether or not the protected content and or license keys are at a security risk. Should the integrity module detect for example an attempt to improperly access the protected content and or license keys or that the integrity of the client device is compromised the integrity module may instruct the interceptor application to destroy the license keys and or protected content so as to frustrate any further improper attempts. Moreover based on policy the integrity module may use different integrity based on being offline than when being online.

It should be noted that other embodiments are also allowable. For example in one embodiment the DRM module may store the license keys for use or the license keys may be stored and or managed through a media player stack or other application. In one embodiment the interceptor application may employ a HyperText Markup Language HTML 5 or greater application programming interface API . In still another embodiment a browser application may be configured to cache and or store the license key offline.

However it should be recognized that the interceptor application need not be configured merely to perform interceptions of actions communications or the like. For example in other embodiments interceptor application may initiate actions. Thus in some embodiments the interceptor application may provide communications to instruct the DRM and or media player stack on what actions to perform. For example the interceptor application might be configured to request that the DRM perform a key request or to send a license request or the like. In other embodiments the interceptor application might request content keys and or licenses to be provided to the client device without the media player DRM requesting the content keys and or licenses. The interceptor application may then store offline the content keys and or licenses to be sent to the DRM media player at some later time. Thus while the interceptor application is herein termed interceptor it should be understood that the interceptor application may also operate independently and thereby drive or direct actions to be performed.

One embodiment of client devices is described in more detail below in conjunction with . In one embodiment at least some of client devices may operate over a wired and or a wireless network such networks and . As shown client device may include virtually any computing device capable of communicating over a network to send and receive information including instant messages performing various online activities or the like. The set of such devices may include devices that typically connect using a wired or wireless communications medium such as personal computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs or the like. Also client device may include virtually any device usable as a video display device such as a television display monitor display screen projected screen and the like. Additionally client device may include any kind of Consumer Electronic device e.g. a Blu ray player DVD player CD player portable music playing device portable display projector and the like. Moreover client devices may provide access to various computing applications including a browser or other web based application.

Generally however client devices may include virtually any portable computing device capable of receiving and sending messages over a network accessing and or playing content such as network wireless network or the like. Further client devices may include virtually any portable computing device capable of connecting to another computing device and receiving information such as laptop computer smart phone and tablet computers and the like. However portable computer devices are not so limited and may also include other portable devices such as cellular telephones display pagers radio frequency RF devices infrared IR devices Personal Digital Assistants PDAs handheld computers wearable computers integrated devices combining one or more of the preceding devices and the like. As such client devices typically range widely in terms of capabilities and features.

A web enabled client device may include a browser application that is configured to receive and to send web pages web based messages and the like. The browser application may be configured to receive and display graphics text multimedia media content and the like employing virtually any Internet based and or network based protocol including but not limited to a wireless application protocol messages WAP Hypertext Transfer Protocol HTTP or the like. In one embodiment the browser application is enabled to employ Handheld Device Markup Language HDML Wireless Markup Language WML WMLScript JavaScript Standard Generalized Markup Language SGML HyperText Markup Language HTML eXtensible Markup Language XML and the like to display and send a message. In one embodiment a user of a client device may employ the browser application to perform various activities over a network online . However another application may also be used to perform various online activities.

Client devices also may include at least one other client application that is configured to receive and or send content between another computing device. The client application may include a capability to send and or receive content or the like. The client application may further provide information that identifies itself including a type capability name and the like. In one embodiment client devices may identify themselves as part of a class of devices. In another embodiment client devices may uniquely identify themselves through any of a variety of mechanisms including a phone number Mobile Identification Number MIN an electronic serial number ESN Internet Protocol IP Address network address or other mobile device identifier. The information may also indicate a content format that the mobile device is enabled to employ. Such information may be provided in a network packet or the like sent between other client devices CPD or other computing devices. Moreover it should be readily understood that devices and or components within a device that is communicating with a client device may also identify themselves using any of a variety of mechanisms including those used by the client device.

Client devices may further be configured to include a client application that enables an end user to log into an end user account that may be managed by another computing device such as CPD or the like. Such end user account in one non limiting example may be configured to enable the end user to manage one or more online activities including in one non limiting example search activities social networking activities browse various websites communicate with other users or the like. In one embodiment the end user s client device may receive content streamed to the client device for play at the client device. However participation in online activities may also be performed without logging into the end user account.

Also shown in is switch that is intended to symbolically represent that a client device such as client device may be online or offline to a network such as wireless network and or network . It should be noted however that any of client devices may be offline or online to a network although similar switches are not illustrated. While switch is illustrated as external to a client device this is merely a symbolic artifact and is not intended to represent an actual physical switch. Instead it merely illustrates that a client device may be offline or online. However it should be understood that a client device may be considered to be online to a network but not be in communications with a particular remote computing device. For example client device may be online and in communications with Content Provider Device CPD but not be online i.e. offline and therefore not in communications with Key Management Device KMD . However other variations may also exist. Thus online offline includes not only online offline to a network but also online offline with respect to a communications with another computing device.

Wireless network is configured to couple client devices and its components with network . Wireless network may include any of a variety of wireless sub networks that may further overlay stand alone ad hoc networks and the like to provide an infrastructure oriented connection for client devices . Such sub networks may include mesh networks Wireless LAN WLAN networks cellular networks and the like. In one embodiment the system may include more than one wireless network.

Wireless network may further include an autonomous system of terminals gateways routers and the like connected by wireless radio links and the like. These connectors may be configured to move freely and randomly and organize themselves arbitrarily such that the topology of wireless network may change rapidly.

Wireless network may further employ a plurality of access technologies including 2nd 2G 3rd 3G 4th 4G generation radio access for cellular systems WLAN Wireless Router WR mesh and the like. Access technologies such as 2G 3G 4G and future access networks may enable wide area coverage for mobile devices such as client devices with various degrees of mobility. In one non limiting example wireless network may enable a radio connection through a radio network access such as Global System for Mobil communication GSM General Packet Radio Services GPRS Enhanced Data GSM Environment EDGE Wideband Code Division Multiple Access WCDMA and the like. In essence wireless network may include virtually any wireless communication mechanism by which information may travel between client devices and another computing device network and the like.

Network is configured to couple network devices with other computing devices including CPD and through wireless network to client devices . Network is enabled to employ any form of network mechanism for communicating information from one electronic device to another. Also network can include the Internet in addition to LANs WANs direct connections such as through a universal serial bus USB port other forms of network mechanism or any combination thereof. On an interconnected set of LANs including those based on differing architectures and protocols a router acts as a link between LANs enabling messages to be sent from one to another. In addition communication links within LANs typically include twisted wire pair or coaxial cable while communication links between networks may utilize analog telephone lines full or fractional dedicated digital lines including T1 T2 T3 and T4 and or other carrier mechanisms including for example E carriers Integrated Services Digital Networks ISDNs Digital Subscriber Lines DSLs wireless links including satellite links or other communications links known to those skilled in the art. Moreover communication links may further employ any of a variety of digital signaling technologies including without limit for example DS 0 DS 1 DS 2 DS 3 DS 4 OC 3 OC 12 OC 48 or the like. Furthermore remote computers and other related electronic devices could be remotely connected to either LANs or WANs via a modem and temporary telephone link. In one embodiment network may be configured to transport information of an Internet Protocol IP . In essence network includes any communication method by which information may travel between computing devices.

Additionally network mechanisms by way of example network mechanisms include wired media such as twisted pair coaxial cable fiber optics wave guides and other wired media and wireless media such as acoustic RF infrared and other wireless media.

One embodiment of CPD is described in more detail below in conjunction with . Briefly however CPD includes virtually any network device usable to operate as a content server to connect to network to provide content to client devices . In some embodiments CPD may provide protected content to a client device. In one embodiment at least some portions of the content may be encrypted while at least some other portions of the content may be unencrypted.

CPD may also provide to a client device an interceptor application that is configured to be installed and execute within a client device. The interceptor application may be a script an HTML implemented application such as implemented in HTML5 or the like. However the interceptor application may be implemented using virtually any programming mechanism and is not limited to a particular type. In any event the interceptor application may include Application Programming Interfaces APIs or other components that enable monitoring of communications from to a DRM module and or media player stack application or the like. The Interceptor application described in more detail below in conjunction with may then intercept communications between the DRM module to enable the DRM module and or media player to operate unaware of whether the client device is online or offline to KMD and or CPD with respect to access to protected content decryption keys and or related licenses.

It should be readily recognized that CPD is configured to operate on behalf of a content owner distributor or similar business entity. However while used herein to represent such network devices useable to provide content it is further recognized that other devices may also be employed. For example a content provider may employ a Content Distribution Network Device not shown that operates on behalf of the content provider to provide content. Thus other configurations and variations of devices serving content are also envisaged and other embodiments are not constrained to a single configuration arrangement of devices.

Devices that may operate as CPD include various network devices including but not limited to personal computers desktop computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs server devices network appliances and the like.

Although illustrates CPD as a single computing device the invention is not so limited. For example one or more functions of CPD may be distributed across one or more distinct network devices. Moreover CPD is not limited to a particular configuration. Thus in one embodiment CPD may contain a plurality of network devices to provide content licenses and or decryption keys to a client device such as client devices . Similarly in another embodiment CPD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices of CPD operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the CPD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

In one embodiment CPD may also be configured to manage license requests and or access to decryption keys useable to decrypt portions of the encrypted digital content by a client device for play based on the license.

It should be noted that the encrypted content may be encrypted using any of a variety of symmetric and or asymmetric key technologies. For example possible asymmetric keys technologies include but are not limited to Diffie Hellman RSA Merkle Hellman PGP X.509 elliptic curve techniques EIGamal or the like. Similarly various possible symmetric key technologies include but are not limited to Twofish Serpent AES Rijndael Blowfish CAST5 RC4 3DES and IDEA to name just a few. Moreover the content may be protected using a combination of symmetric and asymmetric key technologies. For example a symmetric content decryption key might be used to encrypt decrypt the content and an asymmetric key technology might be used to encrypt decrypt the content decryption key.

KMD represents one of a variety of network devices for managing access to symmetric and or asymmetric keys. In one embodiment KMD may operate to certify an ownership of a public key named within a digital certificate that provides a public key where the public key is part of a public private key associated with any of a variety of asymmetric key technologies. This allows others such as CPD or the like to rely upon signatures or assertions made by the owner that corresponds to the public key that is certified. In one embodiment KMD may then operate as a trusted third party. Thus in one embodiment KMD may operate as a Certification Authority such as employed by many public key infrastructures PKI schemes. Further KMD may also provide Certificate Revocation Lists CRLs indicating when a public key certificate is no longer valid and might no longer be trusted trustable.

In one embodiment KMD may receive a public key from a content provider or the like and based on various criteria elect to make accessible the public key through a certificate that KMD digitally signs. In one embodiment access to the public key may enable an authorized client device to decrypt a content key that may then be used to decrypt at least a portion of the encrypted content.

In one embodiment KMD or CPD might operate to negotiate a license and or access to a key with client devices . In one embodiment different content decryption keys might be used to encrypt different portions of a provided content. Thus in one embodiment multiple key negotiations may be performed for a given at least one content stream.

It should be understood that while KMD is illustrated as a separate device from CPD in other embodiments the functions of these devices may be integrated.

Although illustrates KMD as single computing devices the invention is not so limited. For example one or more functions of KMD may be distributed across one or more distinct network devices. Moreover KMD is not limited to a particular configuration. Thus in one embodiment KMD may contain a plurality of network devices. Similarly in another embodiment KMD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the KMD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

As shown in the figure client device includes a central processing unit CPU in communication with a mass memory via a bus . Client device also includes a power supply one or more network interfaces an audio interface a display a keypad an illuminator a video interface an input output interface a haptic interface a global positioning systems GPS receiver and presence detector interfaces .

Power supply provides power to client device . A rechargeable or non rechargeable battery may be used to provide power. The power may also be provided by an external power source such as an alternating current AC adapter or a powered docking cradle that supplements and or recharges a battery.

Client device may optionally communicate with a base station not shown or directly with another computing device. Network interface includes circuitry for coupling client device to one or more networks and is constructed for use with one or more communication protocols and technologies including but not limited to GSM code division multiple access CDMA time division multiple access TDMA user datagram protocol UDP transmission control protocol Internet protocol TCP IP Short Message Service SMS GPRS WAP ultra wide band UWB Institute of Electrical and Electronics Engineers IEEE 802.16 Worldwide Interoperability for Microwave Access WiMax session initiated protocol real time transport protocol SIP RTP or any of a variety of other wired and or wireless communication protocols. Network interface is sometimes known as a transceiver transceiving device or network interface card NIC .

Audio interface is arranged to produce and receive audio signals such as the sound of a human voice. For example audio interface may be coupled to a speaker and microphone not shown to enable telecommunication with others and or generate an audio acknowledgement for some action.

Display may be an LCD gas plasma light emitting diode LED or any other type of display used with a computing device. Display may also include a touch sensitive screen arranged to receive input from an object such as a stylus or a digit from a human hand.

Moreover display may be configured to employ any of a variety of network connection types including but not limited to High Bandwidth Digital Content Protection HDCP connection types Display Port DP Digital Visual Interface DVI and High Definition Multimedia Interface HDMI as well as Gigabit Video Interface GVIF Standard definition SD Unified Display Interface UDI or Intel Wireless Display WiDi . At least some of these network connection types provide a form of digital copy protection. A detection of whether display is connected through one of these or other types of network connection types may be determined using a variety of techniques including signature transmissions protocol handshakes authentication procedures or the like. Changing usage of a network connection type may indicate a change in the configuration of at least one component of client device that might result in being detected as a compromise to the integrity of client device .

Keypad may comprise any input device arranged to receive input from a user. For example keypad may include a push button numeric dial or a keyboard. Keypad may also include command buttons that are associated with selecting and sending images.

Illuminator may provide a status indication and or provide light. Illuminator may remain active for specific periods of time or in response to events. For example when illuminator is active it may backlight the buttons on keypad and stay on while the client device is powered. Also illuminator may backlight these buttons in various patterns when particular actions are performed such as dialing another client device. Illuminator may also cause light sources positioned within a transparent or translucent case of the client device to illuminate in response to actions.

Video interface is arranged to capture video images such as a still photo a video segment an infrared video or the like. For example video interface may be coupled to a digital video camera a web camera or the like. Video interface may comprise a lens an image sensor and other electronics. Image sensors may include a complementary metal oxide semiconductor CMOS integrated circuit charge coupled device CCD or any other integrated circuit for sensing light.

Client device also comprises input output interface for communicating with external devices such as a headset or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like. Haptic interface is arranged to provide tactile feedback to a user of the client device. For example the haptic interface may be employed to vibrate client device in a particular way when another user of a computing device is calling.

GPS transceiver can determine the physical coordinates of client device on the surface of the Earth. GPS transceiver in some embodiments may be optional. GPS transceiver typically outputs a location as latitude and longitude values. However GPS transceiver can also employ other geo positioning mechanisms including but not limited to triangulation assisted GPS AGPS Enhanced Observed Time Difference E OTD Cell Identifier CI Service Area Identifier SAI Enhanced Timing Advance ETA Base Station Subsystem BSS or the like to further determine the physical location of client device on the surface of the Earth. It is understood that under different conditions GPS transceiver can determine a physical location within millimeters for client device and in other cases the determined physical location may be less precise such as within a meter or significantly greater distances. In one embodiment however mobile device may through other components provide other information that may be employed to determine a physical location of the device including for example a Media Access Control MAC address IP address or the like.

Mass memory includes a Random Access Memory RAM a Read only Memory ROM and other storage means. Mass memory illustrates an example of computer readable storage media devices for storage of information such as computer readable instructions data structures program modules or other data. Mass memory stores a basic input output system BIOS for controlling low level operation of client device . The mass memory also stores an operating system for controlling the operation of client device . It will be appreciated that this component may include a general purpose operating system such as a version of UNIX or LINUX or a specialized client communication operating system such as Windows Mobile or the Symbian operating system. The operating system may include or interface with a Java virtual machine module that enables control of hardware components and or operating system operations via Java application programs.

Mass memory further includes one or more data storage which can be utilized by client device to store among other things applications and or other data. For example data storage may also be employed to store information that describes various capabilities of client device . The information may then be provided to another device based on any of a variety of events including being sent as part of a header during a communication sent upon request or the like. Data storage may also be employed to store social networking information including address books buddy lists aliases user profile information or the like. Further data storage may also store messages web page content or any of a variety of user generated content. At least a portion of the information may also be stored on another component of network device including but not limited to computer readable storage device a disk drive or other computer readable storage device not shown within client device .

In some embodiments data storage may act as a buffer for content received from CPD of . As noted above it is recognized that providing of such content may also be performed by another device on behalf of CPD of .

Applications may include computer executable instructions which when executed by client device transmit receive and or otherwise process messages e.g. SMS Multimedia Message Service MMS instant messages IM email and or other messages audio video and enable telecommunication with another user of another client device. Other examples of application programs include calendars search programs email clients IM applications SMS applications voice over Internet Protocol VOIP applications contact managers task managers transcoders database programs word processing programs security applications spreadsheet programs games search programs and so forth. Applications may include for example browser media player Digital Rights Management DRM module and interceptor application . Interceptor application may also include integrity manager and protected store . As discussed further below interceptor application might not be a native application but may be downloaded and installed based on a communication with a content provider or the like.

Browser may include virtually any application configured to receive and display graphics text multimedia and the like employing virtually any web based protocol. In one embodiment the browser application is enabled to employ HDML WML WMLScript JavaScript SGML HTML XML and the like to display and send a message. However any of a variety of other web based programming languages may be employed. In one embodiment browser may enable a user of client device to provide and or receive content from another computing device such as CPD of . Although browser is described herein it should be noted that there are a plurality of other applications that may operate as user agent configured to request and or access content. Thus other user agents may also be included within client device .

Media player represents any of a variety of software and or hardware configurations arranged to receive and play various content. As such in one embodiment media player may also represent a hardware component that might be installed within client device and or coupled electrically to client device to enable client device to access and play content.

In one embodiment media player may receive content that is protected by one or more encryption keys and or one or more DRM licenses that determine who when where and or how the protected content may be accessed distributed copied and or played. In one embodiment media player may provide one or more portions of the protected content to DRM to be unencrypted or otherwise prepared for play by media player .

DRM represents any of a class of access control technologies that is configured to manage the digital access rights to protected content. In one embodiment DRM may operate to include a content decryption module CDM functionality to receive one or more decryption keys and or licenses and to employ the decryption keys to decrypt at least a portion of the content. In one embodiment DRM might be configured to receive information indicating that content is protected with keys licenses. DRM may then send a communications requesting the keys licenses. In one embodiment DRM might be configured to provide a communications that might be intended for a Key Management Device such as KMD of to obtain the keys licenses. DRM may then receive portions of the protected content from media player browser or another application. DRM may then employ the keys licenses to decrypt the encrypted content and provide the decrypted content to media player or the like for play. In one embodiment DRM may operate as a secure pipeline to provide the content directly to a display audio output device or otherwise securely to media player .

Interceptor application is configured to intercept communications between DRM media player or the like for protected content and keys licenses. Interceptor application may then store the protected content keys licenses in a protected store such as protected store . In one embodiment protected store may be configured such that content keys licenses or the like are encrypted using a private key symmetric key or the like known to interceptor application . Interceptor application may then monitor communications and a network status of client device to provide the stored protected content keys licenses or the like to DRM media player or the like from protected store when client device is offline to a key management service a content provider or other related remote computing device. It should be noted that the protected content and keys licenses may also be stored in data storage in one embodiment.

Interceptor application may also include integrity manager that is configured to monitor an integrity of client device for possible security issues that might be construed as enabling improper access to the protected content keys or licenses. Integrity manager may monitor a variety of components and actions within client device to determine the integrity including but not limited to memory content types of programs being executed by operating system types of drivers hardware configuration or the like. When integrity manager determines that the integrity of client device is compromised integrity manager may perform a variety of actions including but not limited to destroying the protected content the keys and or licenses. Integrity manager may also send one or more messages to another computing device indicating that the integrity of client device is compromised.

While integrity manager and protected store are herein illustrated as components within interceptor application other configurations are also envisaged. Thus for example integrity manager and or protected store may be distinct and separate components from interceptor application . Further protected store may also reside in another device of client device including for example processor readable storage device or the like. Moreover interceptor application and or integrity manager may perform actions such as described in more detail below in conjunction with .

Further interceptor application integrity manager and protected store may be configured to be downloaded from a remote computing device for installation within client device .

Network device includes central processing unit computer readable storage device network interface unit an input output interface hard disk drive video display adapter and a mass memory all in communication with each other via bus . The mass memory generally includes RAM ROM and one or more permanent non transitory mass storage devices such as hard disk drive tape drive optical drive and or floppy disk drive. The mass memory stores operating system for controlling the operation of network device . Any general purpose operating system may be employed. BIOS is also provided for controlling the low level operation of network device . As illustrated in network device also can communicate with the Internet or some other communications network via network interface unit which is constructed for use with various communication protocols including the TCP IP protocol. Network interface unit is sometimes known as a transceiver transceiving device or network interface card NIC .

Network device also comprises input output interface for communicating with external devices such as a keyboard or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like.

The mass memory as described above illustrates another type of computer readable media namely computer readable storage media and or processor readable storage media. Computer readable storage media devices may include volatile nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Examples of computer readable storage media include RAM ROM Electrically Erasable Programmable Read only Memory EEPROM flash memory or other memory technology Compact Disc Read only Memory CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other physical media which can be used to store the desired information and which can be accessed by a computing device.

As shown data storage may include a database text spreadsheet folder file or the like that may be configured to maintain and store user account identifiers user profiles email addresses IM addresses and or other network addresses or the like. Data storage may further include program code data algorithms and the like for use by a processor such as central processing unit to execute and perform actions. In one embodiment at least some of data storage might also be stored on another component of network device including but not limited to computer readable storage device hard disk drive or the like.

Data storage may further store streams of protected content . Streams of protected content represent any of a variety of content that may be protected from access using a license encryption and or the like. In some embodiments protected content may include a plurality of available versions of content. In one embodiment the available versions may include one or more video tracks and or one or more one or more audio tracks.

The mass memory also stores program code and data. One or more applications are loaded into mass memory and run on operating system . Examples of application programs may include transcoders schedulers calendars database programs word processing programs Hypertext Transfer Protocol HTTP programs customizable user interface programs IPSec applications encryption programs security programs SMS message servers IM message servers email servers account managers and so forth. Web server key manager and content delivery server may also be included as application programs within applications .

Web server represent any of a variety of services that are configured to provide content including messages over a network to another computing device. Thus web server includes for example a web server an FTP server a database server a content server or the like. Web server may provide the content including messages over the network using any of a variety of formats including but not limited to WAP HDML WML SGML HTML XML Compact HTML cHTML Extensible HTML xHTML or the like. Web Server may also be configured to enable a user of a client device such as client devices of to browse content such as streams of protected content and select content for display play on the client device. Further web server may be configured to provide for installation at a client device an interceptor application and or integrity manager.

Key manager is configured to manage negotiations of decryption keys and or licenses for content streams. In one embodiment key manager may provide decryption keys and or licenses to KMD of . In other embodiments key manager may perform negotiations directly with a client device. In one embodiment key manager may select one or more content decryption keys for use in encrypting different portions of a content stream.

Key manager may also be configured to revoke a license and or invalidate one or more decryption keys based for example on an unauthorized request for a license key or even based on receiving an indication that an integrity of a requesting client device is determined to be compromised.

Content Delivery Server CDS is configured to manage access to protected content . In one embodiment the content may be protected through a license or licenses. In another embodiment the content may be protected by being encrypted. In one embodiment one portion of content may be encrypted using a first content encryption key while another portion of the content may be encrypted using a second content encryption key. Thus to decrypt the protected content a user s client device may need access to a license that indicates how where and or when the protected content may be accessed. The user s client device may also need access to one or more decryption keys usable to decrypt various portions of the protected content. In one embodiment where multiple encryption keys are used to encrypt the content a key rotation scheme may be employed where the client device is provided an indication that the content is encrypted using a different key and that the client device will have to use the different key. However in another embodiment the content may be protected by a license s and not be encrypted using encryption key s .

The operation of certain aspects of various embodiments will now be described with respect to . illustrates a flow chart of one embodiment of a process usable to enable content protected by a Digital Rights Management DRM module to be playable whether the client device is online or offline. Portions of process of may be performed by interceptor application and or integrity manager of where download and installation of these modules may be performed at least in part by browser of .

Process begins after a start block where the interceptor application including integrity manager is installed on a client device. In one embodiment a user of the client device may perform actions with a content provider device or the like that might include registering to receive protected content selecting protected content for access or performing any of a variety of other actions that may initiate a download and installation of the interceptor application onto the client device.

Processing then flows to block where the installed integrity manager optionally monitors various components of the client device to determine an integrity of the client device. In one embodiment a plurality of rules policies or the like may be analyzed to determine the integrity. In one embodiment while block is illustrated as a separate block performed sequentially other configurations are also possible. For example the integrity of the client device optionally may be continually monitored concurrently with execution of other blocks of .

In any event flowing to decision block a determination is made whether the integrity of the client device is compromised such that it is determined that protected content keys and or licenses might be improperly accessed or accessible. When such a compromise is detected processing flows to block otherwise processing flows to block .

At block access to the protected content may be blocked using any of a variety of mechanisms including destroying or otherwise rendering inoperative a key license or protected content. Processing moves next to block where optionally a message may be sent to another computing device providing notification of the compromise. Process may then return to a calling process.

At block the interceptor application may continually monitor a network connection status to determine whether the client device is online or offline for communications with a key management device and or content provider device.

Flowing to decision block a determination is made whether the client device is online to the content provider device and or key management device. When it is determined that the client device is online to one or more of these devices processing flows to block otherwise processing flows to block .

At block communications between the DRM and or media player and a remote computing device are monitored by interceptor application. Such communications might include a request to download or otherwise access and or play protected content. The communications might also include a request for access to a decryption key or keys and or a DRM license. Also monitored are responses to the requests including any protected content keys and or licenses that might be provided in response. Should the communication include sending of passwords credentials or other information to enable access of the requested items these too may also be monitored for. Thus proceeding to decision block a determination is made whether protected content is being received. If so processing flows to block otherwise processing flows to decision block .

At block the received protected content may be stored locally on the client device. Flowing next to block the protected content may also be provided to a media player browser or other requesting module on the client device. Processing then flows to decision block .

At decision block a determination is made whether a key license for the protected content is received. When it is processing flows to block otherwise processing flows to decision block . At block the received license s key s is are stored securely in a local store on the client device. The key license may then also be provided to the DRM module. Processing then flows to decision block .

At block it was determined back at decision block that the client device is not online to the content provider device and or key management device. Thus at block the client device is offline for one or more of these devices. This is relevant because in one embodiment the client device may be online to access remotely the protected content but offline for access to the key license to the protected content. Thus below illustrates one embodiment where the protected content and key license are obtained during offline situations from local storage. However it should be understood that the content might be obtained online while the key license are obtained offline. Processing in any event flows next to decision block .

In one embodiment at decision block a determination is made whether the protected content is being requested. If so processing flows to block otherwise processing flows to decision block . At block the protected content is accessed and provided to the requesting browser media player or the like. As noted above in one embodiment the content may be obtained online to the content provider while in another embodiment the content might be obtained locally during an offline condition offline that is to the content provider device. Processing then moves to decision block where a determination is made whether a license key to the protected content is requested while the client device is in an offline condition to the key management device.

In the offline condition to the key management device the requested license key may be obtained by the interceptor application from a local store and provided to the DRM module in response to the request for the license key. Processing continues to decision block where a determination is made to continue monitoring for offline online status of the client device. If so the processing flows back to block otherwise processing returns to a calling process.

It should be understood that storage and access of protected content and keys licenses during an offline condition of the client device provides numerous advantages. For example by wrapping and intercepting communications with the DRM module and or media player the DRM module and media player need not be modified to behave differently when the client device is offline versus online. Thus legacy DRM modules and media players may continue to operate. Moreover use of the interceptor application provides more control and flexibility to the content providers. Further locally stored content keys and licenses may be retrieved and used more quickly than requesting and obtaining these items over a network. Therefore it might be feasible to expect a faster time to a first frame or seek point in the content for playing the content. However other benefits also arise and thus the innovations are not limited to these benefits.

Thus as can be seen the above is directed to dynamically changing the stream quality to match a current level of presence of the user and a configuration of the client device. This is performed to maintain a best level of user experience consistent with the level of presence and configuration. Moreover as noted such changes are directed to occur at least downwards when the user is unlikely to notice the difference and in a manner that is directed to optimizing consumption of resources.

As noted above the interceptor application need not operate merely to intercept communications between a browser media player and or DRM. In other embodiments the interceptor application may actually be configured to drive communications and or other actions. For example in some embodiments the interceptor application may request content to be downloaded onto the client device absent a request for the content from the browser media player or the like. Further the interceptor application may also request keys and or licenses to be downloaded absent a request from the DRM media player or the like. In this manner the interceptor application may store the content keys licenses offline for a subsequent use.

Further the interceptor application may initiate communications with the media player browser and or DRM instructing these components to perform other actions. For example in one embodiment the interceptor application may request that the media player request a key license request from by the DRM.

To illustrate some of these and other actions is directed towards showing one non limiting non exhaustive example of communications flow between components using an application to drive the communications. Flows may include many more or less components than those shown in . However the components and flows shown are sufficient to disclose an illustrative embodiment for practicing the innovations.

Shown in are Content Provider Device CPD Key Management Device KMD and client device . CPD and KMD are described above in conjunction with . Client device represents one embodiment of client device of having interceptor application browser media player and DRM which are each described above in conjunction with .

As discussed above interceptor application may operate to intercept communications between browser media player and or DRM as well as CPD and or KMD . However interceptor application may also initiate actions to be performed.

As shown in a content request may be sent from interceptor application to CPD . In one embodiment content request may be intercepted from for example browser media player or the like. However in other embodiment content request may be initiated by interceptor application absent interception of a request from another component within client device . In response CPD may provide the content which may again be intercepted by interceptor application . In one embodiment interceptor application may provide the content to browser and or media player . However in another embodiment interceptor application may elect to store content offline for a subsequent use.

In one embodiment media player may receive the content and send a request indicating that a key license is needed . However in another embodiment absent this request or based on request interceptor application might send a request to generate key license request to media player and or DRM . In response DRM may then send key license request which may then be intercepted by interceptor application . In one embodiment interceptor application may pass key license request directly to KMD or modify the request as get key license . In response KMD may provide the key license which may be intercepted by interceptor application . In one embodiment interceptor application may select to store the key license and or forward the key license as flow communication to media player and or DRM . DRM may then employ the key license when a request to decrypt a frame is received. DRM may then provide the decrypted frame to the media player or otherwise securely to an output device. Also shown get key license may represent communications with interceptor application that are initiated by interceptor application rather than based on actions and or requests from media player browser and or DRM .

Thus as disclosed above interceptor application may operate to drive various actions and or operate to intercept various actions.

It will be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by computer program instructions. These program instructions may be provided to a processor to produce a machine such that the instructions which execute on the processor create means for implementing the actions specified in the flowchart block or blocks. The computer program instructions may be executed by a processor to cause a series of operational steps to be performed by the processor to produce a computer implemented process such that the instructions which execute on the processor to provide steps for implementing the actions specified in the flowchart block or blocks. The computer program instructions may also cause at least some of the operational steps shown in the blocks of the flowchart to be performed in parallel. Moreover some of the steps may also be performed across more than one processor such as might arise in a multi processor computer system a cloud system a multi server system or the like. In addition one or more blocks or combinations of blocks in the flowchart illustration may also be performed concurrently with other blocks or combinations of blocks or even in a different sequence than illustrated without departing from the scope or spirit of the invention.

Accordingly blocks of the flowchart illustration support combinations of means for performing the specified actions combinations of steps for performing the specified actions and program instruction means for performing the specified actions. It will also be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by special purpose hardware based systems which perform the specified actions or steps or combinations of special purpose hardware and computer instructions.

The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

