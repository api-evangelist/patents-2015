---

title: Method for processing data based on bluetooth protocol and electronic device thereof
abstract: The present disclosure relates to a method and an electronic device for processing data on the basis of a Bluetooth Low Energy (BLE) protocol. The electronic device includes a Bluetooth control module and a processor. The Bluetooth control module stores a modified BLE protocol stack including at least two Attribute Protocols (ATTs) for use with an application, the modified BLE protocol stack includes a first path and a second path. The first path includes a first ATT protocol to process an ATT command of the application, and the second path includes a second ATT protocol to process an ATT command of the application. The processor is coupled to the Bluetooth control module. The processor processes data of the application including the ATT command, using the modified BLE protocol stack including the at least two ATTs of the Bluetooth control module.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09654906&OS=09654906&RS=09654906
owner: Samsung Electronics Co., Ltd
number: 09654906
owner_city: 
owner_country: KR
publication_date: 20150612
---
This application claims priority under 35 U.S.C. 119 a to U.S. Patent Application No. 62 011 323 filed in the United States Patent and Trademark Office on Jun. 12 2014 and Korean Patent Application Serial No. 10 2014 0115480 filed in the Korean Intellectual Property Office on Sep. 1 2014 the entire contents of which are incorporated herein by reference.

The present disclosure relates generally to Bluetooth communication by an electronic device and more particularly to a method and an electronic device for processing various types of data on the basis of a modified Bluetooth low power protocol stack.

Recently a service for personal health care has been developed in which health information of a user is measured using a personal medical device on the basis of a near field communication technology and the measured health information is transmitted through a gateway or a mobile device to a server.

Bluetooth Low Energy BLE technology is especially effective for power consumption and product size and is thus widely used in various health care related sensors.

Bluetooth profiles correspond to standards for technologies in which Bluetooth can be utilized and allow devices supporting the same profile to be compatibly operated. The health care related Bluetooth profiles which have been established thus far include profiles for measuring blood pressure glucose levels and heart rates a thermometer and a pulse oximeter.

BLE technology is employed in hearing aids to provide various types of functions to users. In particular BLE technology is applied in the form of an auxiliary device for improving the sound quality of a hearing aid when a sound device such as a television a telephone or an MP3 player is used. However products recently released in the market include a product which includes a separate microphone receiving sound using Bluetooth technology and a receiver provided in the form of Bluetooth earphones.

Moreover a hearing aid application enables an electronic device such as a smart phone to control a microphone and an amplifier of a hearing aid or control a receiver of the hearing aid to use the receiver as an earphone.

It is assumed that the hearing aid described herein is based on BLE technology. With the development of various applications relating to the hearing aid various types of applications not using BLE technology can be used in the hearing aids which are based on BLE technology.

However some commands defined in a non BLE based hearing aid application are not able to be used in the BLE protocol stack structure of a BLE based hearing aid due to certain limitations existing in Android platform implementations.

Among the commands the HA CHECK BATTERY and the HA CHANGE GAIN can be transferred to a hearing aid using the Generic Attribute Profile GATT and Attribute Protocol ATT in a hearing aid application of an electronic device e.g. smart phone .

However the HA SUSPEND the HA START and the HA RECONFIGURE cannot be accessed by the hearing aid application of the electronic device. This is because in an Android platform the protocol for audio reproduction of Audio Video Distribution Transport Protocol AVDTP exists on the basis of Bluetooth Basic Rate Enhanced Data Rate BR EDR and not on the basis of BLE and the AVDTP can be used to transfer an audio stream start command environment configuration suspend command etc. to a counterpart device e.g. the hearing aid . In other words when a user starts or interrupts music through a User Interface UI using a media reproduction application a media reproduction framework receives the corresponding command and transfers the command to an audio flinger. The audio flinger then transfers the command to the counterpart device. A codec configuration may be directly transferred according to a reproduced sound source regardless of the user input. For example the user input may be directly transferred to the media reproduction framework. Therefore a codec configuration may be changed according to a reproduced sound source without a direct relation to the user input.

The BLE technology which has been developed for the purpose of low energy does not have protocols for transmission of audio and audio related commands. Therefore audio and audio related commands such as the HA SUSPEND the HA START and the HA RECONFIGURE commands should be transmitted using an ATT in the BLE protocol stack. However as described above the media reproduction application can directly access only the media reproduction framework and cannot access a media task transmitting the corresponding commands.

Therefore a method and an electronic device for processing various types of data on the basis of the BLE protocol stack are necessary.

The present disclosure has been made to address at least the problems and disadvantages described above and to provide at least the advantages described below.

Accordingly an aspect of the present disclosure is to provide a method and an electronic device for processing various types of data on the basis of the BLE protocol stack.

Accordingly another aspect of the present disclosure is to provide a method and an electronic device for transferring audio or audio related commands to a counterpart device in an environment based on a BLE protocol stack.

Accordingly another aspect of the present disclosure is to provide a method and electronic device for performing communication on the basis of a BLE protocol stack including a plurality of ATTs.

Hereinafter embodiments of the present disclosure will be described in conjunction with the accompanying drawings. The present disclosure may have various modifications and embodiments and specific embodiments thereof are illustrated in the drawings and described in detail. However it should be understood that the present disclosure is not limited to the particular embodiments but includes all modifications equivalents and or alternatives within the spirit and scope of the present disclosure. In the description of the drawings identical or similar reference numerals are used to designate identical or similar elements.

In the present disclosure the expression include or may include refers to existence of a corresponding function operation or element and does not limit one or more additional functions operations or elements. Terms such as include and or have may be construed to denote a certain characteristic number step operation constituent element component or a combination thereof but may not be construed to exclude the existence of or a possibility of addition of one or more other characteristics numbers steps operations constituent elements components or combinations thereof. The expression or includes any or all combinations of words enumerated together. For example the expression A or B may include A may include B or may include both A and B. Expressions including ordinal numbers such as first and second etc. may modify various elements. However such elements are not limited by the above expressions. For example the above expressions do not limit the sequence and or importance of the elements. The above expressions are used merely for the purpose of distinguishing an element from the other elements. For example a first user device and a second user device indicate different user devices although both of them are user devices. For example a first element could be referred to as a second element and similarly a second element could be referred to as a first element without departing from the scope of various embodiments of the present disclosure.

In the case where an element is referred to as being connected to or accessed by another element it should be understood that not only may the element be directly connected to or accessed by the other element but also a new element may exist between the two elements. Meanwhile in the case where an element is referred to as being directly connected to or directly accessing another element it should be understood that no element exists between the two elements.

As used herein terms are used merely for describing specific embodiments and are not intended to limit the scope of the present disclosure. As used herein the singular forms are intended to include the plural forms as well unless the context clearly indicates otherwise.

Unless defined otherwise all terms used herein including technical and scientific terms have the same meaning as commonly understood by those of skill in the art to which various embodiments of the present disclosure pertains. Such terms as those defined in a generally used dictionary are to be interpreted to have meanings equal to the contextual meanings in the relevant field of art and are not to be interpreted to have ideal or excessively formal meanings unless clearly defined in various embodiments of the present disclosure.

An electronic device according to various embodiments of the present disclosure may be a device including a communication function. For example the electronic device may include at least one of a smartphone a tablet Personal Computer PC a mobile phone a video phone an electronic book e book reader a desktop PC a laptop PC a netbook computer a Personal Digital Assistant PDA a Portable Multimedia Player PMP an MP3 player a mobile medical appliance a camera and a wearable device e.g. a Head Mounted Device HMD such as electronic glasses electronic clothes an electronic bracelet an electronic necklace an electronic appcessory electronic tattoos or a smart watch .

According to some embodiments the electronic device may be a smart home appliance with a communication function. The smart home appliance as an example of the electronic device may include at least one of a television a Digital Versatile Disk DVD player an audio a refrigerator an air conditioner a vacuum cleaner an oven a microwave oven a washing machine an air cleaner a set top box a TV box e.g. Samsung HomeSync Apple TV or Google TV a game console an electronic dictionary an electronic key a camcorder and an electronic picture frame.

According to some embodiments the electronic device may include at least one of various medical appliances e.g. Magnetic Resonance Angiography MRA Magnetic Resonance Imaging MRI Computed Tomography CT machine a movie camera and an ultrasonic machine navigation devices Global Positioning System GPS receivers Event Data Recorders EDRs Flight Data Recorders FDRs automotive infotainment devices electronic equipment for ships e.g. navigation equipment for ships gyrocompasses or the like avionics security devices head units for vehicles industrial or home robots Automatic Teller Machines ATM and Point Of Sales POS systems.

According to some embodiments the electronic device may include at least one of a part of furniture or a building structure having a communication function an electronic board an electronic signature receiving device a projector and various kinds of measuring instruments e.g. a water meter an electric meter a gas meter a radio wave meter and the like . The electronic device according to the present disclosure may be a combination of one or more of the aforementioned various devices. An electronic device according to various embodiments of the present disclosure may be a flexible device. Further it is obvious to those skilled in the art that the electronic device according to various embodiments of the present disclosure is not limited to the aforementioned devices.

Hereinafter an electronic device according to various embodiments will be described with reference to the accompanying drawings. The term user used in various embodiments may refer to a person who uses an electronic device or a device for example an artificial intelligence electronic device that uses an electronic device.

Referring to a network environment and an electronic device are provided. The electronic device includes a bus a processor a memory an input output interface a display a communication interface and a Bluetooth control module .

The bus is a circuit which interconnects the above described elements and delivers communication e.g. a control message between the above described elements.

For example the processor receives commands from the aforementioned other elements e.g. the memory the input output interface the display the communication interface and the Bluetooth control module through the bus deciphers the received commands and performs calculation or data processing according to the deciphered commands.

The memory stores commands or data received from or created by the processor or other elements e.g. the input output interface the display the communication interface or the Bluetooth control module . The memory may include programming modules such as a kernel middleware an Application Programming Interface API and an applications . The aforementioned programming modules may be formed of software firmware hardware or a combination of at least two thereof.

The kernel controls or manages system resources e.g. the bus the processor or the memory used for executing an operation or a function implemented in the other programming modules for example the middleware the API or the applications . In addition the kernel may provide an interface through which the middleware the API or the applications control or manage the individual elements of the electronic device while accessing the individual elements.

The middleware performs a relay function allowing the API or the applications to communicate with the kernel to exchange data therewith. Furthermore in regard to task requests received from the applications the middleware performs a control e.g. scheduling or load balancing for the task requests using a method of allocating at least one of the applications a priority for using the system resources e.g. the bus the processor and the memory of the electronic device .

The API is an interface through which the applications controls functions provided by the kernel or the middleware and may include at least one interface or function e.g. command for file control window control image processing or text control.

According to various embodiments the applications may include a Short Message Service SMS Multimedia Message Service MMS application an e mail application a calendar application an alarm application a health care application e.g. an application for measuring an amount of exercise or blood sugar and an environmental information application e.g. an application for providing atmospheric pressure humidity temperature and the like . Additionally or alternately the applications may include an application related to the exchange of information between the electronic device and an external electronic device . The application related to the exchange of information may include for example a notification relay application for transferring particular pieces of information to the external electronic device or a device management application for managing the external electronic device .

The notification relay application includes a function of transferring to the external electronic device notification information generated in other applications of the electronic device e.g. an SMS MMS application an e mail application a health management application an environmental information application and the like . Additionally or alternatively the notification relay application may receive notification information from for example the external electronic device and provide the received notification information to a user.

The device management application manages e.g. install delete or update functions for at least a part of the external electronic device communicating with the electronic device e.g. turning on off the external electronic device itself or some elements thereof or adjusting the brightness or resolution of a display applications operating in the external electronic device or services e.g. a telephone call service or a message service provided from the external electronic device .

According to various embodiments the applications may include an application appointed according to the attribute e.g. the type of the external electronic device . For example in cases where the external electronic device is an MP3 player the applications may include an application related to the reproduction of music. Similarly in cases where the external electronic device is a mobile medical appliance the applications may include an application related to health care. According to one embodiment the applications may include at least one of an application designated to the electronic device and an application received from the external electronic device or a server .

The input output interface transfers commands or data input from a user through an input output device e.g. the sensor a keyboard or a touch screen to for example the processor the memory the communication interface or the Bluetooth control module through the bus . For example the input output interface may provide to the processor data for a user s touch input through the touch screen. Furthermore through the input output device e.g. a speaker or a display the input output interface may output commands or data received from the processor the memory the communication interface or the Bluetooth control module through the bus . For example the input output interface may output voice data processed through the processor to a user through a speaker.

The communication interface connects communication between the electronic device and the external electronic device or or the server . For example the communication interface may be connected to a network through wireless or wired communication to communicate with the external electronic device or or the server . The wireless communication may include at least one of Wi Fi Bluetooth BT Near Field Communication NFC Global Positioning System GPS and cellular communication e.g. Long Term Evolution LTE LTE A Code Division Multiple Access CDMA Wideband CDMA WCDMA Universal Mobile Telecommunication System UMTS Wireless Broadband WiBro and Global System for Mobile communication GSM . The wired communication may include at least one of a Universal Serial Bus USB a High Definition Multimedia Interface HDMI Recommended Standard 232 RS 232 and a Plain Old Telephone Service POTS .

According to one embodiment the network may be a telecommunication network. The communication network may include at least one of a computer network the Internet the Internet of Things and a telephone network. According to one embodiment a protocol e.g. a transport layer protocol data link layer protocol or a physical layer protocol for communication between the electronic device and an external device may be supported by at least one of the applications the application programming interface the middleware the kernel and the communication interface .

The Bluetooth control module processes at least some information acquired from other elements e.g. the processor the memory the input output interface or the communication interface and provides the processed information to a user in various methods. For example based on a Bluetooth connection between the electronic device and an external device the Bluetooth control module can perform communication with an external device e.g. a hearing aid . For example according to a hearing aid application the Bluetooth control module controls a microphone and an amplifier of a hearing aid and controls a receiver of the hearing aid in order to transfer an audio signal to the hearing aid.

As defined in the Bluetooth Specification Version 4.1 Vol. 3 Part A Section 2.1 the Channel IDentifier CID for an Attribute Protocol ATT is fixed to 0x0004. That is only one ATT exists in a device.

Since the ATT corresponds to a sequential request response protocol no processing can be performed before a response after a request between two devices using the ATT. Since the ATT of the current single structure has a limitation of simultaneously performing various operations in order to enable various applications operating on a modularized platform which provides various services such as the Android platform to use the lower electric power of the Bluetooth various embodiments of the present disclosure propose a structure using a plurality of ATTs. For example in the case of a hearing ad a structure using two ATTs offers efficiency for a media task layer and a hearing aid application layer.

An electronic device includes a Bluetooth control module and a processor. The Bluetooth control module stores a modified BLE protocol stack including at least two ATTs for use of an application the modified BLE protocol stack includes a first path and a second path. The first path includes a first ATT protocol to process an ATT command of the application the second path includes a second ATT protocol to process an ATT command of the application. The processor is coupled to the Bluetooth control module. The processor can process data of the application including the ATT command using the modified BLE protocol stack including the at least two ATTs of the Bluetooth control module.

The first path may include an application layer a GATT the first ATT protocol a Logical Link Control and Adaptation Protocol L2CAP and a link layer.

The first ATT protocol may use a fixed channel identifier and the second ATT protocol may use a channel identifier allocated to a reserved area or a dynamic allocation area.

The modified BLE protocol stack may further include a third path including a Digital Signal Processing DSP an L2CAP and a link layer.

Referring to a BLE protocol stack structure for connection between electronic devices and is provided. The electronic device e.g. smart phone include a BLE protocol stack structure hereinafter referred to as a modified BLE protocol stack structure including a first path and a second path for processing ATT based data or commands. For example data or a command in the second path may be an audio related command processed according to an AVDTP on the basis of Bluetooth BR EDR.

The first path for processing BLE based ATT data or commands includes an application layer a Generic ATTribute Profile GATT an ATTribute ATT protocol a Logical Link Control and Adaptation Protocol L2CAP and a link layer .

The second path for processing BLE based ATT data or commands includes the application layer an audio flinger an audio Hardware Abstraction Layer HAL a media task the ATT the L2CAP and the link layer . Otherwise when there is no user input the second path for processing BLE based ATT data or commands includes the media task the ATT the L2CAP and the link layer .

According to various embodiments a third path including the Digital Signal Processing DSP the L2CAP and the link layer may be included in the modified BLE protocol stack structure. In implementation audio data may be transferred through the third path. The DSP processes an input signaling from the application layer e.g. Voice call data or the media task e.g. music data . For example audio data may be transferred directly to the L2CAP or the DSP from the media task without passing through the ATT.

Although illustrates two L2CAPs included in the modified BLE protocol stack structure one skilled in the art apply one L2CAP or more than two L2CAPs thereto.

Further according to the application type and the application command type more than two ATTs may be used for the modified BLE stack structure. For example ATTs may exist in the modified BLE protocol stack structure according to the application type or ATTs may exist in the modified BLE protocol stack structure according to the application command type.

In the modified BLE protocol stack structure each application program is implemented at the upper end of a Generic Access Profile GAP or the GATT . Basically Bluetooth is divided into two parts a host e.g. GATT ATT and L2CAP and a controller. The host performs a protocol of a high level like a security function. The controller e.g. link layer and physical layer performs a function of a low level such as a link management or base operation in a physical channel. The host may include the other parts of the application program.

The GAP directly communicates with the application program. In the GAP idle and connecting mode processes are defined. While the connecting mode process manages a connection to a device the idle mode process includes a discovery of Bluetooth devices. Further the GAP provides a security process of a high level such as encryption of connection.

The ATT defines communication between two devices performing functions of a server and a client in a higher layer of a dedicated L2CAP channel. The server manages an attribute set. The attribute has a data structure for storing information managed by the GATT operating in a higher layer of the ATT and is separate from the function of a slave or a master. For example the attribute may include an attribute handle attribute type attribute value and attribute permission.

The client accesses the attribute of the server by sending a request for triggering of a response message by the server. Further the server transmits an unidentified notification and an indication which is required to send identification thereof to the client to the client. Further the client transmits a command to the server to enable an attribute value to be written.

In order to find a service and exchange characteristics between one device and another device the GATT defines a framework used by the ATT . The characteristics correspond to a data set including values and properties. Services and data relating to characteristics are stored in the attribute. For example a server for operating a temperature sensor service may transact the temperature characteristic using an attribute for describing the sensor an attribute for storing temperature measurement and an additional attribute for specifying a measurement unit.

The L2CAP is a protocol for setting managing a logical link relating to higher layer protocols and applications by using a link configured in the link layer . A transport function of the logical link managed by the L2CAP includes logical channel management protocol multiplexing packet segmentation fragmentation and reconstruction Quality of Service QoS and grouping. The higher layer protocol operating using such a function includes a plurality of ATTs defined therein. The logical channel refers to a channel configured for data transferred in an application or a protocol of a higher layer of the L2CAP .

For example on the basis of protocol multiplexing the L2CAP relays data transferred from the plurality of ATTs configures and manages each piece of data according to the logical channel and then transfers the data to a lower layer protocol e.g. link layer .

Further segmentation and reassembly of a protocol are performed by the L2CAP . In the link layer the lengths of packets are limited in view of the relation to the Maximum Transfer Unit MTU . Therefore when the length of a packet transferred from an application or a higher layer protocol is long the packet should be segmented according to the limitation on the length of a baseband packet. In contrast multiple baseband packets which have been received after being divided are reassembled before being transferred to a higher layer protocol or application. In addition the L2CAP performs work related to grouping at the time of configuring a piconet or QoS.

The link layer controls the status of a BLE device. This device may enter standby advertisement scanning initiating and connection states. The advertisement state allows a BLE device to discover other devices connect to another device or broadcast user data. The advertisement is introduced in the BLE section of the Bluetooth Specification Version 4.0. Three channels for example channels and are reserved in order to send an advertisement. Therefore advertisements are transmitted sequentially and one by one to channels. A device listening to the advertisement is required to be in a scanning state. The initiating state may be entered in order to start the connection state and the connection state allows active participation in the connection. The standby state allows entry into safe power consumption when no messages are exchanged. Moreover the link layer takes charge of transmission framing and prevention of error in a particular link and performs error detection and correction.

In the second path for processing the BLE based ATT data or commands the audio flinger mixes audio data of multiple applications and sends the mixed data to various output devices the audio HAL corresponds to a set of routines for processing hardware subordinate details necessary for implementing audio related input output interface interrupt control and multi processor communication and the media task can process audio related tasks.

Meanwhile through the first path e.g. the path including the application layer the GATT the ATT the L2CAP and the link layer in the electronic device a command of the corresponding application may be transferred to the electronic device .

The electronic device performs corresponding work within a control service layer according to the command of the corresponding application transferred through the link layer the L2CAP and the ATT . For example according to a volume control or battery check command of a hearing aid application the electronic device may control the volume of the hearing aid or check the current battery state of the hearing aid and provide a result thereof to the electronic device .

In various embodiments through the second path e.g. the path including the application layer the audio flinger the audio HAL the media task the ATT the L2CAP and the link layer or the path including the media task the ATT the L2CAP and the link layer in the electronic device a related command may be transferred to the electronic device . For example an audio related command may be transferred to the electronic device through the second path.

The electronic device processes audio data transferred through the link layer the L2CAP and the ATT and the audio related command may be processed after being transferred through the link layer the L2CAP and the ATT .

In other various embodiments through the third path e.g. the path including the DSP the L2CAP and the link layer in the electronic device audio data is transferred to the electronic device .

Referring to a packet data processing procedure in a BLE protocol stack structure of the electronic device is provided. BLE based packet data is transferred to a counterpart device through an application layer a GATT a first ATT an L2CAP and a link layer and BLE based packet data is received from a counterpart device through the GATT the first ATT the L2CAP the link layer the L2CAP the first ATT the GATT and the application layer .

Referring to a procedure for processing audio signaling in a BLE protocol stack structure of the electronic device is provided. BLE based audio signaling e.g. control signal or audio data is transferred to a counterpart device through an application layer a media player an audio flinger an Advanced Audio Distribution Profile A2DP audio HAL a media task a second ATT an L2CAP and a link layer .

In various embodiments the first ATT may use a fixed L2CAP Channel ID CID e.g. 0x0004 and the second ATT may use an unfixed L2CAP CID e.g. a channel identifier newly added to a reserved or dynamically allocated area .

According to various embodiments both the first ATT and the second ATT may use an unfixed L2CAP CID e.g. a channel identifier newly added to a reserved or dynamically allocated area .

Referring to when a check battery request is generated in a hearing aid application in the electronic device a check battery command is transferred through GATT ATT to an electronic device e.g. hearing aid and the electronic device transfers a response to the check battery request to the electronic device through the GATT ATT .

Referring to when a volume up down command request for a hearing aid is generated in a hearing aid application in the electronic device the volume up down command is transferred through GATT ATT to an electronic device e.g. hearing aid and the electronic device controls the volume of the hearing aid according to the volume up down command request and then transfers a response to the volume up down request to the electronic device through the GATT ATT .

Referring to an electronic device starts booting or rebooting according to a pre defined process when electric power is supplied in step .

In step the electronic device stores in a memory a BLE protocol stack including at least two ATTs. For example at the time of booting or rebooting the electronic device loads related protocols in the memory in order to perform BLE communication. Further the BLE protocol stack including at least two ATTs is used in order to process BLE based data e.g. a user input signal of a hearing aid application and data e.g. audio related signaling which is not based on BLE technology.

In step the electronic device determines whether an event is generated in a higher layer e.g. a media task layer or application layer which are higher layers of the ATT layer . For example the electronic device determines whether a battery check request a volume control request or audio related signaling is generated in a hearing aid application.

The electronic device identifies the application type or application command type corresponding to the event in step and selects one of two or more ATTs according to the application type or application command type corresponding to the event in step .

In step the electronic device processes the event using the selected ATT. For example the electronic device may transfer among the hearing aid application commands the HA CHECK BATTERY and HA CHANGE GAIN commands to the hearing aid using the GATT and ATT see . The electronic device may transfer the HA SUSPEND HA START and HA RECONFIGURE commands to a counterpart device using a protocol or another ATT for audio reproduction of AVDTP on the basis of Bluetooth BR EDR see .

Referring to an electronic device starts booting or re booting according to a pre defined process when electric power is supplied in step .

In step the electronic device stores a BLE protocol stack in a memory . For example at the time of booting or rebooting the electronic device loads related protocols in the memory in order to perform a BLE communication including one ATT.

In step the electronic device determines whether an event is generated in a higher layer e.g. a media task layer or application layer which are higher layers of the ATT layer . For example the electronic device determines whether a battery check request a volume control request or audio related signaling is generated in a hearing aid application.

The electronic device identifies the application type or application command type corresponding to the event in step and determines whether to copy at least one different ATT according to the application type or application command type corresponding to the event in step .

In step the electronic device processes the event using a corresponding ATT. For example the electronic device may transfer among the hearing aid application commands the HA CHECK BATTERY and HA CHANGE GAIN commands to the hearing aid using the GATT and ATT see . The electronic device may transfer the HA SUSPEND HA START and HA RECONFIGURE commands to a counterpart device using the copied ATT since it is required to use a protocol for audio reproduction of AVDTP on the basis of Bluetooth BR EDR see .

Referring to the electronic device configures a BLE protocol stack including at least two ATTs in step .

In step the electronic device processes packet data on the basis of the configured BLE protocol stack including the at least two ATTs.

The methods described above with reference to can be further implemented in a device e.g. a chip set .

Referring to electronic device is provided in block diagram . The electronic device may for example constitute all or a part of the electronic device shown in . The electronic device includes at least one Application Processor AP a communication module a Subscriber Identifier Module SIM card a memory a sensor module an input device a display an interface an audio module a camera module a power management module a battery an indicator and a motor .

The AP controls a plurality of hardware or software elements connected to the AP by driving an operating system or an application program processes various types of data including multimedia data and performs calculations. The AP may be implemented by for example a System on Chip SoC . According to one embodiment the AP may further include a Graphic Processing Unit GPU .

The communication module e.g. the communication interface performs data transmission reception in communication between the electronic device e.g. the electronic device and other electronic devices e.g. the electronic device or the server connected thereto through a network e.g. network . According to an embodiment the communication module may include a cellular module a Wi Fi module a BT module a GPS module an NFC module and a Radio Frequency RF module .

The cellular module provides a voice call a video call a Short Message Service SMS or an Internet service through a communication network e.g. LTE LTE A CDMA WCDMA UMTS WiBro or GSM . Furthermore the cellular module distinguishes and authenticates electronic devices within a communication network using for example a subscriber identification module for example the SIM card . According to one embodiment the cellular module may perform at least some functions which the AP provides. For example the cellular module may perform at least some of the multimedia control functions.

According to one embodiment the cellular module may include a Communication Processor CP . Furthermore the cellular module may be implemented by for example an SoC. Although the elements such as the cellular module e.g. a communication processor the memory and the power management module are illustrated to be separate from the AP in the AP may include at least some e.g. the cellular module of the aforementioned elements in an embodiment.

According to an embodiment the AP or the cellular module e.g. communication processor loads in a volatile memory a command or data received from at least one of a non volatile memory and other elements connected thereto and processes the loaded command or data. Furthermore the AP or the cellular module stores data received from or generated by at least one of other elements in a non volatile memory.

Each of the Wi Fi module the BT module the GPS module and the NFC module may include for example a processor for processing data transmitted or received through a corresponding module. In the cellular module the Wi Fi module the BT module the GPS module and the NFC module are illustrated as separate blocks but at least some for example two or more of the cellular module the Wi Fi module the BT module the GPS module and the NFC module may be included in one Integrated Chip IC or one IC package. For example at least some e.g. the communication processor corresponding to the cellular module and the Wi Fi processor corresponding to the Wi Fi module of the processors corresponding to the cellular module the Wi Fi module the BT module the GPS module and the NFC module may be implemented by one SoC.

The RF module transmits receives data for example an RF signal. The RF module may for example include a transceiver a power amp module PAM a frequency filter a low noise amplifier LNA or the like. Further the RF module may further include an element for transmitting receiving electronic waves over a free air space in wireless communication for example a conductor a conducting wire or the like. Although the cellular module the Wi Fi module the BT module the GPS module and the NFC module share one RF module in at least one of the cellular module the Wi Fi module the BT module the GPS module and the NFC module may transmit receive an RF signal through a separate RF module in one embodiment.

The SIM card is a card that may be inserted into a slot formed in a particular portion of the electronic device. The SIM card includes unique identification information for example an Integrated Circuit Card IDentifier ICCID or subscriber information for example International Mobile Subscriber Identity IMSI .

The memory e.g. the memory may include an internal memory or an external memory . The internal memory may include for example at least one of a volatile memory e.g. a Dynamic RAM DRAM a Static RAM SRAM and a Synchronous Dynamic RAM SDRAM and a non volatile Memory e.g. a One Time Programmable ROM OTPROM a Programmable ROM PROM an Erasable and Programmable ROM EPROM an Electrically Erasable and Programmable ROM EEPROM a mask ROM a flash ROM a NAND flash memory and an NOR flash memory .

According to one embodiment the internal memory may be a Solid State Drive SSD . The external memory may further include a flash drive for example a Compact Flash CF a Secure Digital SD a Micro Secure Digital Micro SD a Mini Secure Digital Mini SD an extreme Digital xD or a memory stick. The external memory may be functionally connected to the electronic device through various interfaces. The electronic device may further include a storage device or a storage medium such as a hard disc drive.

The sensor module measures a physical quantity or detects an operation state of the electronic device and converts the measured or detected information to an electric signal. The sensor module includes at least one of a gesture sensor A a gyro sensor B an atmospheric pressure sensor C a magnetic sensor D an acceleration sensor E a grip sensor F a proximity sensor E a color sensor H for example red green and blue RGB sensor a bio sensor I a temperature humidity sensor J an illumination sensor K and a Ultra Violet UV sensor M. Additionally or alternatively the sensor module may include an E nose sensor an electromyography EMG sensor an electroencephalogram EEG sensor an electrocardiogram ECG sensor an Infrared IR sensor an iris sensor a fingerprint sensor and the like. The sensor module may further include a control circuit for controlling at least one sensor involved therein.

The input device may include a touch panel a digital pen sensor a key or an ultrasonic input device .

The touch panel recognizes a touch input in at least one of a capacitive scheme a resistive scheme an infrared scheme and an acoustic wave scheme. Further the touch panel may further include a control circuit. In the case of the capacitive type physical contact or proximity recognition is possible. The touch panel may further include a tactile layer. In this event the touch panel provides a tactile response to the user.

The digital pen sensor may be implemented using the same or a similar method to receiving a user s touch input or using a separate recognition sheet.

The ultrasonic input device identifies data by detecting an acoustic wave with a microphone of the electronic device through an input unit generating an ultrasonic signal and performs wireless recognition.

According to one embodiment the electronic device may receive a user input from an external device for example a computer or server connected thereto by using the communication module .

The panel may be for example a Liquid Crystal Display LCD and an Active Matrix Organic Light Emitting Diode AM OLED display and the like.

The panel may be implemented to be for example flexible transparent or wearable. The panel may be integrated with the touch panel to be configured as one module.

The projector projects light onto a screen to display an image. The screen may be located for example inside or outside the electronic device .

According to one embodiment the display may further include a control circuit for controlling the panel the hologram device or the projector .

The interface may include for example a High Definition Multimedia Interface HDMI a Universal Serial Bus USB an optical interface or a D subminiature D sub .

The interface may be included in for example the communication interface illustrated in . Additionally or alternatively the interface may include a Mobile High definition Link MHL interface a Secure Digital SD card Multi Media Card MMC interface or an Infrared Data Association IrDA standard interface.

The audio module bilaterally converts a sound and an electric signal. At least some elements of the audio module may be included in for example the input output interface illustrated in . The audio module processes sound information input or output through for example the speaker the receiver the earphones or the microphone .

The camera module is a device for capturing a still image or a video and may include one or more image sensors e.g. a front sensor or a rear sensor a lens an Image Signal Processor ISP or a flash e.g. an LED or xenon lamp .

The power management module manages power of the electronic device . The power management module may include a Power Management Integrated Circuit PMIC a charger Integrated Circuit IC or a battery gauge.

The PMIC may be mounted for example in an integrated circuit or an SoC semiconductor. The charging methods may be classified into wired charging and wireless charging. The charger IC charges a battery and prevents inflow of excessive voltage or excessive current from a charger. The charger IC includes a charger IC for at least one of the wired charging type or the wireless charging type. Examples of the wireless charging include magnetic resonance charging magnetic induction charging and electromagnetic charging and an additional circuit such as a coil loop a resonance circuit and a rectifier may be added for the wireless charging.

The battery gauge measures for example a residual quantity of the battery or a voltage a current or a temperature during the charging. The battery stores or generates electricity and may supply power to the electronic device by using the stored or generated electricity. The battery may include a rechargeable battery or a solar battery.

The indicator displays a specific status of the electronic device or a part for example the AP of the electronic device for example a booting status a message status a charging status and the like.

The electronic device may include a processing device e.g. a GPU for supporting a mobile TV. The processing device for supporting mobile TV processes media data according to standards such as for example a digital multimedia broadcasting DMB a digital video broadcasting DVB or a media flow.

Each of the described elements of the electronic device according to various embodiments of the present disclosure may include one or more components and the name of a corresponding element may be changed based on the type of an electronic device. An electronic device according to various embodiments of the present disclosure may be configured to include at least one of the described elements a few of the elements may be omitted or an additional element may be further included. Also some of elements of an electronic device according to various embodiments of the present disclosure may be combined into one entity which may perform functions identical to those of the relevant elements before the combination.

The term module used in various embodiments of the present disclosure may refer to for example a unit including one or more combinations of hardware software and firmware. The module may be interchangeably used with a term such as unit logic logical block component or circuit. The module may be the smallest unit of an integrated element or a part thereof. The module may be the smallest unit that performs one or more functions or a part thereof. The module may be mechanically or electronically implemented. For example the module according to various embodiments of the present disclosure may include at least one of an Application Specific Integrated Circuit ASIC chip a Field Programmable Gate Arrays FPGA and a programmable logic device for performing operations which has been known or are to be developed hereinafter.

According to various embodiments at least some of the devices for example modules or functions thereof or the method for example operations may be implemented by a command stored in a computer readable storage medium in a programming module form. The commands when executed by at least one processor e.g. the processor enables the at least one processor to perform functions corresponding to the commands. The computer readable storage medium may be for example the memory . At least a part of the programming module may be implemented e.g. executed by the processor . At least a part of the programming module may include a module a program a routine a set of instructions or a process for performing at least one function.

The computer readable recording medium may include magnetic media such as a hard disk a floppy disk and a magnetic tape optical media such as a Compact Disc Read Only Memory CD ROM and a Digital Versatile Disc DVD magneto optical media such as a floptical disk and hardware devices specially configured to store and perform a program command for example programming module such as a Read Only Memory ROM a Random Access Memory RAM a flash memory and the like. In addition the program commands may include high class language codes which can be executed in a computer by using an interpreter as well as machine codes made by a compiler. The aforementioned hardware device may be configured to operate as one or more software modules in order to perform the operation of the present disclosure and vice versa.

Any of the modules or programming modules according to various embodiments of the present disclosure may include at least one of the above described elements exclude some of the elements or further include other additional elements. The operations performed by the modules programming module or other elements according to various embodiments of the present disclosure may be executed in a sequential parallel repetitive or heuristic manner. Further some operations may be executed in a different order some of the operations may be omitted or other operations may be added.

According to various embodiments a storage medium may store commands configured to be executed by at least one processor to perform at least one operation by the at least one processor wherein the at least one operation may include a method of a first electronic device the method including during booting loading a modified BLE protocol stack which includes at least two ATTs for use of an application stored in a first memory in a second memory performing a Bluetooth connection to a second electronic device through a physical layer and a link layer in the modified BLE protocol stack determining whether an event is generated in a higher layer of the link layer in the BLE protocol stack and according to a type of the event transferring a command of the application to the second electronic device.

The transferring of the command of the application to the second electronic device include transferring an ATT command of the application to the second electronic device through a first path including a first ATT protocol in the modified BLE protocol stack when the event relates to an ATT command in the first path and transferring the ATT command of the application to the second electronic device through a second path including a second ATT protocol in the modified BLE protocol stack when the event relates to an ATT command in the second path.

The first path may include an application layer a GATT the first ATT protocol a L2CAP and a link layer.

The first ATT protocol may use a fixed channel identifier and the second ATT protocol may use a channel identifier allocated to a reserved area or a dynamic allocation area.

The modified BLE protocol stack may further include a third path including a DSP an L2CAP and a link layer.

As described above by using a BLE protocol stack including a plurality of ATTs it is possible to achieve concurrent processing.

Through one of the plurality of ATTs it is possible to access a media task processing audio or audio related commands. Therefore audio or audio related commands can be processed on the basis of the BLE protocol stack.

According to various embodiments of the present invention a device is configured to store a modified Bluetooth Low Energy BLE protocol stack including at least two Attribute Protocols ATTs for use with an application the modified BLE protocol stack including a first path and a second path the first path including a first ATT protocol to process an ATT command of the application the second path including a second ATT protocol to process an ATT command of the application and process data of the application including the ATT instruction using the modified BLE protocol stack including the at least two ATTs of the Bluetooth control module.

According to various embodiments of the present invention a device is configured to during booting load a modified Bluetooth Low Energy BLE protocol stack which includes at least two ATTribute protocols ATTs for use of an application stored in a first memory in a second memory perform a Bluetooth connection to a second electronic device through a physical layer and a link layer in the modified BLE protocol stack determine whether an event is generated in a higher layer of the link layer in the BLE protocol stack and according to a type of the event and transfer a command of the application to the second electronic device.

According to various embodiments of the present invention transferring the command of the application to the second electronic device comprises transferring an ATT command of the application to the second electronic device through a first path including a first ATT protocol in the modified BLE protocol stack when the event relates to an ATT command in the first path and transferring the ATT command of the application to the second electronic device through a second path including a second ATT protocol in the modified BLE protocol stack when the event relates to an ATT command in the second path.

Further embodiments of the present disclosure disclosed herein and the accompanying drawings are merely examples for easily describing the technical contents of the present disclosure and for assisting in an understanding of the present disclosure however the present disclosure is not limited thereto. It should be understood by those skilled in the art that in addition to the embodiments disclosed herein all modifications and changes or modified and changed forms derived from the technical idea of the present disclosure fall within the scope of the present disclosure. Therefore the scope of the present disclosure is defined not by the detailed description and embodiments but by the following claims and their equivalents and all differences within the scope will be construed as being included in the present disclosure.

