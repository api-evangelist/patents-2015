---

title: Connecting a printer and a mobile device using identification information printed by the printer
abstract: A computer-implemented method for pairing a point of sale printer with a client device, using two-way identification, is disclosed. The method comprises receiving, using the point of sale printer and a wireless communication protocol, a request to pair the point of sale printer. The method also comprises deriving, using the point of sale printer, the client device, and a device pairing protocol, a shared secret at the client device and the point of sale printer. The method also comprises printing, using the point of sale printer and upon deriving the shared secret, client device association information on a printout. The method also comprises receiving, using the client device and the printout, the client device association information. The method also comprises associating the point of sale printer and the client device using the client device association information as received using the client device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09591175&OS=09591175&RS=09591175
owner: Clover Network, Inc.
number: 09591175
owner_city: Sunnyvale
owner_country: US
publication_date: 20151029
---
This application claims the benefit of U.S. Provisional Application No. 62 074 062 filed on Nov. 2 2014 which is incorporated by reference in its entirety herein for all purposes.

Point of sale POS systems allow users such as merchants to offer customers flexibility in completing goods or services sales transactions. However such systems do not allow for enhanced usability functions. The lack of options to interface with other electronic devices may lead to poor user experience and or inefficient transactions.

In one embodiment a computer implemented method for pairing a point of sale printer with a client device using two way identification is provided. The method comprises receiving using the point of sale printer and a wireless communication protocol a request to pair the point of sale printer. The method also comprises deriving using the point of sale printer the client device and a device pairing protocol a shared secret at the client device and the point of sale printer. The method also comprises printing using the point of sale printer and upon deriving the shared secret client device association information on a printout. The method also comprises receiving using the client device and the printout the client device association information. The method also comprises associating the point of sale printer and the client device using the client device association information as received using the client device.

In another embodiment a computer implemented method for pairing a point of sale printer with a client device using two way identification is provided. The method comprises receiving using the point of sale printer and a wireless communication protocol a request to pair the point of sale printer. The method also comprises deriving using the point of sale printer the client device and a device pairing protocol a shared secret at the client device and the point of sale printer. The method also comprises printing using the point of sale printer and upon deriving the shared secret client device association information on a printout. The method also comprises receiving using the client device and the printout the client device association information. The method also comprises associating the point of sale printer and the client device using the client device association information as received using the client device.

In another embodiment a system for pairing a printing device with a client device using two way identification is provided. The system comprises a communications module instantiated on the client device. The communications module is configured to send a request to pair the printing device using a wireless communication protocol and subsequently derive a shared secret with the printing device. The system also comprises a printer. The printing device is configured to instruct the printer to print client device association information upon the communications module deriving the shared secret. The system also comprises a first printout. The first printout is printed by the printer and includes the client device association information that is printed upon the communications module deriving the shared secret. The system also comprises an input device provided on the client device to receive the client device association information. The communications module is also configured to associate the printing device with the client device using the client device association information received via the input device.

Reference now will be made in detail to embodiments of the disclosed invention one or more examples of which are illustrated in the accompanying drawings. Each example is provided by way of explanation of the present technology not as a limitation of the present technology. In fact it will be apparent to those skilled in the art that modifications and variations can be made in the present technology without departing from the scope thereof. For instance features illustrated or described as part of one embodiment may be used with another embodiment to yield a still further embodiment. Thus it is intended that the present subject matter covers all such modifications and variations within the scope of the appended claims and their equivalents.

Described herein are systems and methods for providing a POS point of sale platform. Broadly the systems and methods described herein may enable a POS platform to interact with local services and third party applications during POS transactions e.g. financial transactions advertisement transactions coupon transactions etc. at physical and remote retail locations. Thus one or more user devices may be accessed by one or more users e.g. merchants employees customers etc. . For example an employee may access a POS platform to complete a transaction with a customer who may have placed an order for products or services e.g. purchasing batteries etc. . The POS platform may allow multiple employees to access their accounts on the POS platform to perform certain functions associated with those employees. Some of these functions may be logging time completing a sales transaction printing of receipts or any other function related to a POS platform.

Referring now to there is shown an example network architecture for a POS platform system according to certain embodiments of the disclosure. The POS platform system may include one or more client devices . The one or more client devices may be any of suitable devices that may be configured to execute one or more applications software and or instructions to provide one or more services to the user . User may be any person accessing a client device e.g. client device such as merchants employees customers system administrators etc. Each client device may be a POS stationary device e.g. attached to a physical location a mobile POS e.g. able to be used in remote locations a mobile device a laptop computer a desktop computer other device with computer functionalities or any combination thereof and or other types of devices associated with a merchant at various locations. Each client device may have a built in stand that may support the client device . Further each client device may include a handle that a user e.g. user may hold and or otherwise support the device with for instance the user s hand or arm. For example the client device s may be purpose built POS equipment a self service kiosk a smart phone a tablet a wearable computer device or an e reader operating a mobile operating system.

The POS platform system may also include one or more back end servers . Each back end server may be one or more independent computer systems such as instances of the computer system of for performing back end processes for sales transactions. Each back end server may be coupled to one or more remote services servers via a back end API application program interface . The back end API may be an application programming interface for one or more back end servers to supplement the services provided by the one or more remote services servers . The one or more back end servers may communicate with the one or more remote services servers via one or more networks as well.

The one or more client devices may be coupled to the one or more remote services servers via a client API which may be used to access the services and functionalities provided by the one or more services servers . Each client device may communicate with the one or more services servers via one or more networks . Each services server may be implemented by a computer system such as the computer system of . In some embodiments each services server may be a cloud based computer system where no on premise servers are required which can reduce relative cost and complexity of hardware installation and ongoing maintenance and administration.

The POS platform system may include a printing server . The printing server may communicate with one or more POS printing devices . As shown in respective the client device may be connected directly to a printing server or may be connected to the printing server through one or more networks . Further in some instances the client device may connect directly to one or more POS printing devices .

The one or more networks may be a system for communication. The network channel may encompass a variety of mediums of communication such as wired communication for one part and wireless communication for another part. The network channel may be part of the Internet. Each network may include an Ethernet or other wire based network or a wireless NIC WNIC or wireless adapter for communicating with a wireless network such as a WI FI network. Each network may include any suitable network for any suitable communication interface. As an example and not by way of limitation the network channel may include an ad hoc network a personal area network PAN a local area network LAN a wide area network WAN a metropolitan area network MAN or one or more portions of the Internet or a combination of two or more of these. One or more portions of one or more of these networks may be wired or wireless. As another example the network channel may be a wireless PAN WPAN such as for example a BLUETOOTH WPAN a WI FI network a WI MAX network a 3G or 4G network a cellular telephone network such as for example a Global System for Mobile Communications GSM network .

Each network may include links using technologies such as Ethernet 802.11 worldwide interoperability for microwave access WiMAX 3G 4G CDMA digital subscriber line DSL etc. Similarly the networking protocols used on the network channel may include multiprotocol label switching MPLS the transmission control protocol Internet protocol TCP IP the User Datagram Protocol UDP the hypertext transport protocol HTTP the simple mail transfer protocol SMTP and the file transfer protocol FTP . The data exchanged over the network channel may be represented using technologies and or formats including the hypertext markup language HTML and the extensible markup language XML . In addition all or some of links may be encrypted using conventional encryption technologies such as secure sockets layer SSL transport layer security TLS and Internet Protocol security IPsec .

With reference to there is shown a diagrammatic representation of an example architecture of a client device for a POS platform in accordance with one or more embodiments of the disclosure. illustrates one or more users e.g. user with one or more client devices e.g. client device interacting with one or more printing servers e.g. printing server and one or more printers POS printer . As mentioned above client device can also communicate directly with POS printer .

The client device may include a client operating system at least one point of sale application e.g. POS application and one or more applications e.g. application s . Additionally client device may be configured to provide a number of services via internal modules. For example client device may include a PIN personal identification number pad module a security module a power module a printing module an employee module and a communications module . The communications module may be a Bluetooth module.

Each of the modules can operate individually and independently of other modules. Some or all of the modules can be combined as one module. A single module can also be divided into sub modules each performing separate method operations or method operations of the single module. The modules can share access to a memory space. One module can access data accessed by or transformed by another module. The modules can be considered coupled to one another if they share a physical connection or a virtual connection directly or indirectly allowing data accessed or modified from one module to be accessed in another module.

The client device can include additional fewer or different modules for various applications. Conventional components such as network interfaces security functions load balancers failover servers management and network operations consoles and the like are not shown so as to not obscure the details of the system.

The operating system may an operating system of the client device such as Android or iOS or any other operating system that may be suitable for a point of sale system. The operating system may be an open or closed format. An open format may be an operating system that may allow users to modify and interact with its source code e.g. Windows and Android . A closed format operating system may be a stand alone operating system that defines parameters for interacting with such operating systems without allowing users to make modifications. For example a closed operating system may not allow root access to the file system e.g. iOS .

The POS application may contain modules executable on the client device to perform point of sale services e.g. Clover services or any other POS services . The POS application may include a timecards module a self serve module a register module a store inventory module or any combination thereof. The one or more applications such as may include applications that may be built in or may be provided by third party applications. For example one or more applications may include a register module which may be configured to provide an interface for a merchant to facilitate sales transactions in a business. The register module may have bar code scanner functionality check out functionality payment functionality or any combination thereof. It is understood that the register module is one of many possible modules that may exist within one or more applications executing on respective client devices and that other modules may be implemented.

The PIN pad module may be configured to allow a user e.g. user to interact with a particular client device such as . The PIN pad module may allow customers to enter information associated with a transaction such as a sales transaction. The PIN pad module may be configured to operate with either a touch screen or a physical PIN pad system associated with the client device . The PIN pad module may be configured to operate in a secure or insecure mode. A secure mode may be a mode that may require heightened security when entering information e.g. payment authentication information .

The PIN pad module may be configured to operate with the operating system in a secure mode even if the operating system is an open format e.g. Windows and Android . The information may be related to a debit card or a credit card or any other form of information related to a point of sale system. For example a customer e.g. user may be purchasing a product from a business using a debit card. The customer may enter a code associated with the debit card in order to facilitate or otherwise complete the transaction.

The security module may be configured to interact with the PIN pad module to enable secure transactions e.g. payments entering personal information etc. to operate in a secure mode and to follow industry standard for secure transactions. Payment Card Industry PCI as a governing body for payment security may provide for guidelines to follow when implementing a secure sales transaction. For example operating a physical PIN pad may allow for better control for implementing a secure sales transaction. However operating a touch screen PIN pad may present challenges when operating with an open format operating system e.g. Android . In one embodiment the PIN pad module may operate a touch screen PIN pad that allows a user to enter the PIN of their debit card. The security module may be configured to operate with one or more central processing units CPUs to implement secure sales transactions. For example a client device such as may be configured to operate using a CPU that may be dedicated for secure transactions and an insecure CPU dedicated for insecure transactions. Secure transactions may be for example swiping a credit card entering a PIN for a debit card or any other transactions related to executing a secure transaction. Insecure transactions may be any transaction that may be related to using the client device without handling secure data. For example during a sales transaction if a customer swipes his or her credit card the security module may select a secure CPU to complete the transaction. Although the above example is presented with two CPUs other combinations of secure and insecure processors may be envisioned. For example a CPU may be divided into two areas one secure and one insecure or a plurality of CPUs may be separated into secure or insecure processors.

The security module may be implemented independent of the operating system . For example this may allow developers to work independently from the firmware of the operating system which may allow for better code control in situations where the operating system is an open platform e.g. Android .

The power module may be configured to power on the client device . For example the power module may allow the client device to power on using a physical button a touchscreen button or without the use of buttons. For example client device may contain a touch sensitive handle that may work in conjunction with a wristband to activate a near field communication NFC type device. It is understood that NFC is a set of standards for smartphones and similar devices to establish radio communication with each other by touching them together or bringing them into proximity usually no more than a few inches.

The communications module may be configured to enable the client device to communicate in accordance with a wireless protocol. For example the communications module could be a Bluetooth module to allow the client device to utilize Bluetooth technology e.g. Bluetooth LE or BLE to communicate with other devices. The communications module could also be a Zigbee iBeacon or Eddystone module or a module for any alternative low energy communication protocol. The communications module may enable BLE payments or may enable using digital wallets e.g. Google Wallet or any other digital wallets that may be used without the need for physically possessing a payment card . It is understood that BLE may provide low power consumption while maintaining communication range. The communications module may enable a user e.g. user to communicate with a printing server e.g. printing server or directly with a printing device e.g. POS printer to print a document such as a receipt on a printer e.g. POS printer . It is understood that the above are only examples for using the Bluetooth module to interact with other devices and that other uses may be envisioned.

The communications module or the communications module on POS printer may facilitate discovery for a pairing procedure. For example either the client device or the POS printer may broadcast low energy packets that identify the device to counterpart devices that may be looking for devices to pair to. As a more particular example POS printer may broadcast low energy advertisement packets that identify itself as a POS printer of a particular kind meant to be paired with the particular class of client devices represented by client device . Also either device may utilize their communication modules to scan for devices that claim to be the kind of devices they are meant to pair with. For example client device could scan for devices that claim to be POS printers . The devices could identify themselves based on the contents of a general identification field such as the device name fields of certain protocols. For example the general identification field could include a company name an additional identifier such as printer and the last few digits of a manufacturer s serial number for POS printer . In this example the POS printer will come out of the box with this information in the general identification field. As another example the device name could be a registered object identifier prefix in a reserved MAC address range for the communications protocol used by the POS printer and communications module . The prefix could be registered with an industry standards body.

The communications module may be configured to enable the client device to be associated with POS printer . For example the communication module could include executable instructions in accordance with a pairing protocol. In specific approaches POS printer will also have a communications module to enable pairing of client device and POS printer . In these instances the communications module may work in combination with a communications module on POS printer to derive a shared secret to serve as part of the pairing procedure conducted between the two devices. In accordance with certain pairing procedures the shared secret is generated in such a way that it cannot be intercepted by an external device that is spoofing client device and POS printer into thinking they are communicating directly with each other. As a result the dynamically generated shared secret or a hash thereof can be obtained from the POS printer or the client device to confirm that the link established by the pairing procedure is secure. The dynamically generated shared secret or a hash thereof can be the client device association information that is referred to below in this disclosure.

Client device association information can be used to provide two way identification to the pairing procedure. The information can be obtained from either device and passed to the other device for confirmation using an alternative communications channel i.e. a channel that is separate from the one that is being set up via the pairing procedure . For example the printer could print the client device association information for visual inspection by user and the user could manually enter that information into client device via a user interface on client device . Other channels could include outputting the information on a display on POS printer outputting the information in the form of a printed scannable code from POS printer for scanning by a scanner of device or an alternative wireless link between POS printer and client device provided via modulated visible light IR communication NFC communication or others.

The printing module may also be configured to enable a user e.g. user to send one or more print jobs to one or more printing servers e.g. printing server . For example a printing server e.g. printing server may be connected to at least one printing device e.g. POS printer . The printing device e.g. POS printer may be a stationary e.g. associated with a physical location or a mobile printer e.g. portable printer that may be independent of a physical location . The POS printer may be a mobile printer e.g. portable printer that may accompany the client device . For example a client device may be used in a food truck where the POS printer may also be used to allow portability.

The location of the POS printer may determine whether client device begins a pairing procedure with that printer. For example if a printer is in close proximity with client device the client device may enable the POS printer to power on to engage in a pairing procedure. For example using a communication protocol e.g. BLE client device may find a printing server e.g. printing server and or printer e.g. POS printer and may enable the POS printer to power on. The client device may enable the POS printer to power on by generating a wake up message associated with the printing server and or POS printer . Once POS printer has been powered on the client device can engage in a pairing procedure with POS printer .

The location of the POS printer may determine whether the client device may interact with that printer. For example if two printers are in close proximity to a client device the client device may choose to communicate with the printer that meets certain criteria e.g. the closest the newest the biggest etc. . For example using a communication protocol e.g. BLE the client device may find the closest printing server e.g. printing server and or the closest printer e.g. POS printer and may enable the POS printer to power on.

The client device may enable the POS printer to power on by generating a wake up message associated with the printing server and or POS printer . The printing module may establish a communication session with the printing server e.g. printing server and or the closest printer e.g. POS printer . The communication session may allow the client device to print to a printer e.g. POS printer or to power on a printer e.g. POS printer . The client device may remotely control the power of the POS printer during data transmission. For example the POS printer may be powered on to complete a print job. After the print job is complete the POS printer may be powered off. In some embodiments BLE may be used to control hardware interrupts to power on and or power off the POS printer . For example the POS printer may stay in sleep mode until the client device using BLE wakes up the POS printer . At that point a regular Bluetooth connection may be established through which the print job may be sent to be printed.

In another embodiment the client device may utilize remote servers such as cloud services servers e.g. services servers to complete a transaction with a customer. Each services server may be implemented by a computer system such as the computer system of which may be controlled by operating system software. Each services server may also include any number of POS applications e.g. Clover services or any other application that relate to a POS system . Additionally each services server may include applications that may be built in or may be provided by third party applications. In an illustrative example a user e.g. user may initiate a transaction and or modify a transaction e.g. creating modifying a purchase order of a product or a service on a client device e.g. client device . The POS applications may notify the services server e.g. services server that a change to a transaction may have occurred. A change to a transaction may be for example adding new items to the order adding taxes applying coupons adding special notice of the transaction or any other changes associated with the transaction.

Referring now to therein is shown a diagrammatic representation of a machine in the example form of a computer system within which a set of instructions for causing the machine to perform any one or more of the methodologies or modules discussed herein may be executed or instantiated according to certain embodiments of the disclosure.

In the example of the computer system may include a processor memory non volatile memory and an interface device . Various common components e.g. cache memory are omitted for illustrative simplicity. The computer system is intended to illustrate an example hardware device on which any of the components depicted in the examples of and any other components described in this specification may be implemented. The computer system may be of any applicable known or convenient type. The components of the computer system may be coupled together via a bus or through some other known or convenient device.

This disclosure contemplates the computer system taking any suitable physical form. As example and not by way of limitation computer system may be an embedded computer system a system on chip SOC a single board computer system SBC such as for example a computer on module COM or system on module SOM a desktop computer system a laptop or notebook computer system an interactive kiosk a mainframe a mesh of computer systems a mobile telephone a personal digital assistant PDA a wearable computer device a server or a combination of two or more of these. Where appropriate computer system may include one or more computer systems be unitary or distributed span multiple locations span multiple machines or reside in a cloud which may include one or more cloud components in one or more networks. Where appropriate one or more computer systems may perform without substantial spatial or temporal limitation one or more steps of one or more methods described or illustrated herein. As an example and not by way of limitation one or more computer systems may perform in real time or in batch mode one or more steps of one or more methods described or illustrated herein. One or more computer systems may perform at different times or at different locations one or more steps of one or more methods described or illustrated herein where appropriate.

The processor may be for example a conventional microprocessor such as an Intel Pentium microprocessor or Motorola Power PC microprocessor. One of skill in the relevant art may recognize that the terms machine readable storage medium or computer readable storage medium include any type of device that is accessible by the processor. The processor may include instructions .

The memory may be coupled to the processor by for example a bus . The memory may include by way of example but not limitation random access memory RAM such as dynamic RAM DRAM and static RAM SRAM . The memory may be local remote or distributed. The memory may include instructions .

The bus may also couple the processor to the non volatile memory and drive unit . The non volatile memory may often be a magnetic floppy or hard disk a magnetic optical disk an optical disk a read only memory ROM such as a CD ROM EPROM or EEPROM a magnetic or optical card or another form of storage for large amounts of data. Some of this data may often be written by a direct memory access process into memory during execution of software in the computer . The non volatile storage may be local remote or distributed. The non volatile memory is optional because systems may be created with all applicable data available in memory. A typical computer system may usually include at least a processor memory and a device e.g. a bus coupling the memory to the processor .

Software may typically be stored in the non volatile memory and or the drive unit . The drive unit may include machine readable storage medium . The machine readable storage medium may include instructions . Indeed for large programs it may not even be possible to store the entire program in the memory . Nevertheless it should be understood that for software to run if necessary it is moved to a computer readable location appropriate for processing and for illustrative purposes that location is referred to as the memory in this disclosure. Even when software is moved to the memory for execution the processor may typically make use of hardware registers to store values associated with the software and local cache that ideally serves to speed up execution. As used herein a software program is assumed to be stored at any known or convenient location from non volatile storage to hardware registers when the software program is referred to as implemented in a computer readable medium. A processor is considered to be configured to execute a program when at least one value associated with the program is stored in a register readable by the processor .

The bus may also couple the processor to the network interface device to communicate via one or more networks . The interface may include one or more of a modem or network interface. It will be appreciated that a modem or network interface may be considered to be part of the computer system . The interface may include an analog modem ISDN modem cable modem token ring interface satellite transmission interface e.g. direct PC or other interfaces for coupling a computer system to other computer systems. The interface may include one or more input and or output devices e.g. video display alpha numeric input device cursor control device etc. . The I O devices may include by way of example but not limitation a keyboard a mouse or other pointing device a gesture control and or detection device an eye movement control and or detection device disk drives printers a scanner and other input and or output devices including a video display device . The display device may include by way of example but not limitation a cathode ray tube CRT liquid crystal display LCD or some other applicable known or convenient display device. For simplicity it is assumed that controllers of any devices not depicted in the example of reside in the interface.

In operation the computer system may be controlled by operating system software that includes a file management system such as a disk operating system. One example of operating system software with associated file management system software is the family of operating systems known as Windows from Microsoft Corporation of Redmond Wash. and their associated file management systems. Another example of operating system software with its associated file management system software is the Linux operating system and its associated file management system. The file management system may typically be stored in the non volatile memory and or drive unit and causes the processor to execute the various acts required by the operating system to input and output data and to store data in the memory including storing files on the non volatile memory and or drive unit.

Some portions of the detailed description may be presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of operations leading to a desired result. The operations are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated e.g. by signal generation device . It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

Turning now to a flow diagram of a method for activating a POS printer in a POS platform is illustrated according to one or more example embodiments. The method may include block in which a computer such as a client device remote service server s and or a combination thereof may determine the location of a print server or POS printer within a distance from the client device . In block the computer may generate a wake up message associated with the print server using a communication protocol. For example the wake up message could be generated by printing module and the communication protocol could be BLE . In block the computer may establish a communication session with the print server. The communication session could be a regular Bluetooth connection that is established after the POS printer has received the wake up message from the client device. In block the computer may generate a print job associated with the print server.

Referring now to a flow diagram of a method for associating a printing device and a client device as described herein is illustrated according to one or more example embodiments. illustrate example user interfaces at the client device that may be presented during implementation of the method and will be discussed in conjunction with . These user interfaces may be displayed on a touch display of client device and allow the user to administrate a pairing procedure with two way identification between the client device and a printing device. Certain steps in method are optional as will be apparent from the following disclosure.

Prior to the execution of any of the steps in method a computer such as client device remote service server s and or a combination thereof may be powered on while a printing device such as POS printer is not powered on. Alternatively client device may be outside a distance from any discoverable printing device. In either situation the client device may be configured to present a user interface such as that illustrated in with instructions to begin establishing a connection between the client device and a printing device. For example the user interface may instruct a user to power on a POS printer and or load paper into the printer. The user interface may additionally include instructions to move into closer proximity with a POS printer .

Next but still prior to the execution of any of the steps in method the printing device may be powered on. As described herein the printing device may be powered on in response to client device generating a wake up message associated with the printing device or in response to the printing device being manually powered on. As mentioned previously the wake up message may be generated by a low power short range communication protocol such as BLE . In some embodiments the printing device and or client device may present status indicators such as light emitting diodes audible sounds lights or other indicators to indicate a power and or operational status of the printing device to the user. Power status may indicate an on or off state or a low battery state for example. Operational status may include active connection no paper or low paper for example. When or before the printing device is powered on paper may be loaded into the printing device.

Turning to optional steps may be conducted to assist in a two way pairing procedure between the printing device and a client device. At block the printing device may determine that paper is loaded in the printing device. At block the printing device may determine that the printing device is unassociated with at least one client device. For example the POS printer may determine that it is unassociated with the client device . This step can involve the POS printer identifying a particular client device via a short range wireless discovery process or it can involve the POS printer checking an internal data store to determine that it has not recorded an association with any client device. Upon determining that the printing device is unassociated with at least one client device at block the printing device may automatically print device identification information for the printing device. For example the POS printer may print all of or a portion of the device hardware serial number. The printing device can be configured to execute steps once every time the printing device is manually turned on every time it receives a wake up message or every time it engages in a discovery process with an unassociated client device via short range wireless communication. In another embodiment the POS printer may print a numerical sequence a scannable barcode such as a Quick Response Code or other information associated with the printing device that allows the printing device to be identified.

In some embodiments the printing device may be positioned nearby the client device such that short range communication e.g. BLE NFC etc. with the printing device is possible. Therefore optional steps and which involve a discovery process for a short range communications protocol may also be conducted to assist in the two way pairing procedure between the printing device and a client device. Steps and could each be individually conducted in combination with steps . Notably steps and may be the impetus for step in that they both involve the POS printer and client device engaging in a discovery process via short range wireless communication.

In step the printing device will broadcast low energy packets that identify the device as a printing device. These packets could be broadcast repeatedly with a period of for example greater than 10 milliseconds in order to preserve the battery life of a mobile printer while still allowing for rapid discovery to facilitate a seamless pairing procedure. For example the printing device could broadcast BLE packets identifying itself as a POS printer for reception by client devices that are within range. The client devices that are configured to operate with the printing device could be configured to scan for packets of that type and add them to a list of printing devices displayed on a user interface of the client device. The client devices could alternatively or in combination be configured to send wake up messages to devices broadcasting such packets.

In step the client device will send out scans to find devices that claim to be the kind of devices they are meant to pair with. For example client device could scan for devices that claim to be POS printers . The devices could identify themselves based on the contents of a general identification field such as the device name fields of certain protocols. For example the general identification field could include a company name an additional identifier such as printer and the last few digits of a manufacturer s serial number for POS printer . In this example the POS printer will come out of the box with this information in the general identification field. As another example the device name could be a registered object identifier prefix in a reserved MAC address range for the communications protocol used by the POS printer and communications module . The prefix could be registered with an industry standards body.

Prior to the execution of step the user interface could be updated to user interface as shown in . The user interface further identifies POS printers that are detected or are otherwise available for pairing or establishing a connection with. Again steps and as well as the introductory steps of any low energy wireless pairing procedure can serve as the impetus for steps and the display of printing devices in user interface can in turn be conducted upon determining that the devices are unassociated in step . As a result the user interface can display any number of printing devices that are within the discoverable range of the client device.

In some embodiments where multiple printing devices are present and or within communication range of the client device the client device may utilize a two way identification method of establishing a connection between one or more of the available printing devices so as to avoid unintentional pairings or pairings intended to disrupt or interrupt the connection between a printing device and another client device. As shown in user interface the list of POS printers could include a device identifier that matches the device identifier printed by the POS printer in step . This would allow the user to visually inspect the device identifier on the POS printer and cross reference it with user interface to assure that they were pairing with the appropriate device. Since the POS printer can be configured to print this information as soon as it engages in a discovery process with an unassociated client device as described above the information will be readily and conveniently made available to the holder of an unassociated client device as they approach the POS printer.

User interface may present a user with detected POS printers and may present an option to pair with or otherwise establish a connection with one or more available printing devices. Referring briefly to in some instances the client device may detect more than one printing device and may present a user interface with selectable options allowing the user to select one or more printing devices to establish a connection with. The client device may further present device identification information of one or more printing devices within communication range. The device identification information can take on any of the forms described above with respect to the device identifier . A user may select one or more of the presented printing devices on the client device. The client device may be configured to establish a connection or be paired with a single or multiple printing devices such that the client device can initiate printing at the printing device nearest the client device. In some embodiments more than one client device may establish a connection or be paired with a single printing device such that the single printing device serves as a shared printer. In other embodiments multiple client devices may establish connections or be paired with multiple printers such that an active client device can initiate printing at the nearest one of multiple possible printing devices.

Upon receiving user input and or a selection of a printing device to pair with the client device may transmit a request to associate with the selected printing device. Upon transmitting the request to establish a connection the client device may present a user interface indicating an attempted connection as shown in . In some embodiments communication may be established between the client device and the printing device using any device pairing protocol where there is shared secret commonly derived between two devices for example a Diffie Hellman key agreement protocol where the shared secret or a derived hash thereof must be confirmed by the operator between the two devices to ensure there is not a man in the middle. Such a procedure can be used to establish a standard Bluetooth communication link between the printing device and the client device. In some embodiments other forms of communication may be established between the client device and the printing device such as WiFi in accordance with established standards and protocols such as the IEEE 802.11 family of standards including via 2.4 GHz channels e.g. 802.11b 802.11g 802.11n 5 GHz channels e.g. 802.11n 802.11 ac or 60 GHZ channels e.g. 802.11ad . Other suitable forms of communication between the client device and the printing device include WiFi Direct or wireless communication over cellular network infrastructure such as Global System for Mobile Communications GSM including 3G standards e.g. Universal Mobile Telecommunications System UMTS Wideband Code Division Multiple Access W CDMA CDMA2000 etc. 4G standards e.g. Long Term Evolution LTE WiMax etc. 5G standards direct satellite communications or the like.

At block of the printing device may receive a request to associate with a client device. For example the POS printer may receive a request to pair with the client device . At block the printing device may automatically print client device association information upon receiving the request to pair with the client device. For example the POS printer may print a numerical sequence a scannable barcode such as a Quick Response Code or other information configured to associate or otherwise establish a connection between the printing device and the client device. The client device association information can be derived from a shared secret that is generated on both the printing device and the client device using any device pairing protocol where such a shared secret is so derived between the two devices. For instance the client device association information can be a string of human readable characters that are equivalent to the shared secret or represent a hash thereof.

Referring to the client device may present a user interface prompting the user to input client device association information for the printing device for which a connection is to be established with. The user may enter the client device association information at the client device for example at the user interface of or in some embodiments may scan or otherwise capture an image of the client device association information printed by the printing device. The scan can be conducted by a scanner on the client device when the client device includes a scanner such as that described with reference to .

Certain benefits accrue to this approach in that an alternative channel is provided via a printer and that is already configured to output information to a user in the ordinary course of its use and a scanner that saves the user from having to enter the client device association information. Furthermore some client devices used as POS terminals will already have scanners to obtain data from bar codes on merchandise or from payment tokens like coupons with QR codes. As such the pairing procedure utilizes two way communication but does not require any additional hardware. Notably any input device used during the ordinary course of operation of the client device can be re appropriated temporarily to conduct this portion of the pairing procedure. For example a POS terminal with a camera used to conduct OCR processing of a drivers license can take a picture of a human readable string of characters on a printout to receive the client association information. As another example the printer may be able to broadcast the client association information via NFC communication and the client device may utilize a built in NFC receiver used to process NFC payments to obtain the client association information. In general since POS terminals take in payment data from a user and embodiments of the pairing procedure likewise requires the client device to take in client association information the input device can advantageously be any input device that is also used to accept payment information from the user.

Upon receiving the client device association data the client device may automatically pair with the printing device without further input from the user. At block the printing device associates with the client device based at least in part on the client device association information. For example the POS printer may be paired with the client device when the client device receives the client device association information. Upon association of the printing device with the client device the printing device may automatically print a test page or sample page to confirm association with the client device. If the client device association information entered on user interface or received by the client device via some other input device matches the information expected by the client device in accordance with the pairing protocol the client device may present a user interface such as in indicating that a connection has been established with the printing device and prompting the user to initiate a test print at the printing device. If the client device association information entered on user interface does not match the information expected by the client device in accordance with the pairing protocol the client device can refuse to complete the pairing operation and can display a user interface requesting the client device information to be entered again.

As depicted in the POS device may include a housing enclosing internal components of the POS device . The internal components of the POS device may include but are not limited to a touchscreen flat panel display short range wireless communication antenna and a support frame . Other components that may be included within the POS device are structural supports processors memory data storage input output I O interface network interface power adapter adhesive described more fully in etc.

In some embodiments the touchscreen may be an electronic visual display that a user can control through simple or multi touch gestures by touching an outer layer of the touchscreen with an instrument e.g. stylus pen glove etc. or one or more fingers. Touchscreen technologies may include but are not limited to resistive touch technology surface acoustic wave technology capacitive sensing surface capacitance technology projected capacitance technology mutual capacitance technology self capacitance technology infrared technology infrared acrylic projection technology optical imaging technology dispersive signal technology acoustic pulse recognition technology etc.

In the embodiment shown in the flat panel display may be positioned behind or underneath the touchscreen within the POS device wherein the touchscreen is mounted to a first outer surface of the flat panel display . In some embodiments the flat display may be a four inch diagonal or larger display.

The flat panel display may be categorized as volatile or static. A volatile display may require that pixels be periodically refreshed to retain their state which may occur many times a second. Examples of a volatile flat panel display may include but are not limited to active matrix liquid crystal display AMLCD electronic paper electroluminescent display ELD digital light processing display DLP organic light emitting diode display OLED light emitting diode display LED liquid crystal display LCD plasma display panel PDP etc. A static flat panel display may rely on materials whose color states are bi stable where the image they hold requires no energy to maintain but requires energy to change. Examples of a static display can include cholesteric displays electrophoretic displays etc.

In the embodiment shown in the short range wireless communication antenna associated with a short range wireless communication device described in more detail in may be positioned behind or underneath the flat panel display within the POS device wherein the antenna is mounted to an opposing or other outer surface of the flat panel display . That is the flat panel display is sandwiched between the touchscreen and the antenna . A relatively thin layer of adhesive may be used to mount the antenna directly to the opposing surface of the flat panel display . In some embodiments the thin layer of adhesive may be used to mount the antenna directly to the support frame . In any instance the antenna may be electrically coupled to an associated wireless communication reader and optional amplifier which are shown in .

One example of short range wireless communication is near field communication NFC . Many handheld user devices such as smartphones tablets smart watches and the like may use short range wireless communication technology to facilitate transactions. The short range wireless communication antenna is described with more detail with regards to . As depicted the short range wireless communication antenna may be positioned to provide a predefined radio frequency RF field which may be generated from behind or opposing side of the flat panel display and the touchscreen but operable from above the flat panel display and the touchscreen . In some embodiments the RF field is generally operable adjacent to and above the touchscreen of the POS device . For example a predefined radio frequency RF field can be generated from the POS device to permit certain short range wireless communication enabled user devices such as smartphones tablets smart watches and the like to detect or otherwise communicate via the RF field and facilitate a purchase transaction with the POS device . In some embodiments the predefined RF field range may extend up to approximately four centimeters from a particular location such as the center portion of the touchscreen .

In some embodiments the support frame may be positioned underneath the short range wireless communication antenna . In some embodiments the support frame may be called the midframe and may provide certain rigidity to the POS device and or the associated housing of the POS device . In any instance the support frame may be positioned in an internally central position of the POS device to provide support for other internal components of the POS device . In some embodiments the support frame may be constructed out of metal plastic acrylic or other material strong enough to support the weight and internal layout or design of the internal components of the POS device .

Turning to an overhead view of example configuration of a short range wireless communication device is shown that includes a short range wireless antenna similar to in with an associated wireless communication reader and optional amplifier in accordance with one or more embodiments of the disclosure. As depicted these components may be collectively known as a short range wireless communication device and may include a reader an optional amplifier and an antenna .

In some embodiments the short range wireless communication device may operate using relatively low frequencies e.g. 13.56 MHz . Such low frequencies may be utilized for exchanging information related to financial transactions as the low frequency range makes it difficult for third parties to eavesdrop on associated communications and or messages. In some embodiments the short range wireless communication device may be a NFC device. The reader may drive the amplifier and the antenna to generate the RF field similar to RF field in that in turn bridges the physical space between the POS device and short range wireless communication enabled devices. In some embodiments the reader may drive the optional amplifier and antenna to generate an electromagnetic field transmitted above the touchscreen . The short range wireless communication enabled device may be positioned above the touchscreen of the POS device receive and convert the RF energy into power and uses the same energy and electromagnetic field signal to transport data back to the reader through antenna . A communication link may be established and completed between the reader and the short rant wireless communication enabled device. The reader may communicate the received data to other components of the POS device to facilitate a transaction between the short range wireless communications enabled device and the POS device .

In some embodiments the short range wireless communication device may include the reader and the antenna and may not include the optional amplifier where the reader may drive the antenna to generate the RF field receive signals from the short range wireless communication enabled devices and transmit the received data to the other components of the POS device to facilitate transactions between the POS device and the short range wireless communication enabled devices.

As seen in the antenna is shown with respect to a flat panel display similar to shown in . As described with respect to the antenna can be mounted to a flat panel display such as wherein the antenna is mounted to an opposing or other outer surface of the flat panel display . In some embodiments the antenna may be mounted to a support such as in wherein the antenna is mounted to a surface of the support frame facing towards the flat panel display .

At block of method a touchscreen and flat panel display of a POS device such as may be provided wherein the touchscreen can include a first outer surface and an opposing outer surface and the opposing outer surface is positioned adjacent to one side of the flat panel display . In some embodiments the touchscreen may utilize one of many different touchscreen technologies that have different methods of sensing touch as described herein. The flat panel display may be of any type of flat panel display such as those described herein. The flat panel display may be positioned behind the touchscreen where the front of the touchscreen is oriented to face outward or away from the POS device and visible by the user. In some embodiments the flat panel display may be positioned along the side of the touchscreen not facing the user. In some embodiments the flat panel display may be positioned along the backside of the touchscreen using positioning mechanisms such as adhesives clamps screws mounts rails or the like.

At block a short range wireless communication antenna may be positioned adjacent to an opposing side of the flat panel display . That is the flat panel display may be sandwiched between the touchscreen and the short range wireless communication antenna . In some embodiments a relatively thin layer of adhesive can be used to mount the short range wireless communication antenna to the opposing side of the flat panel display . The short range wireless communication antenna may be any kind of antenna suitable for a short range wireless communication device such as those described herein. In some embodiments the short range wireless communication antenna may be positioned along the backside of the flat panel display using any number of positioning mechanisms such as adhesives clamps screws mounts rails or the like. In some embodiments any technique and or device to mount the short range wireless communication antenna to a portion of the opposing side of the flat panel display can be used as long as any mura effects on the flat panel display are minimized or otherwise eliminated.

At block a RF field can be generated from the short range wireless communication antenna wherein the RF field extends outward from the first outer surface of the touchscreen . When the short range wireless communication antenna is electrically connected to an associated wireless communication reader and amplifier all of these components may collectively be known as a short range wireless communication device similar to shown in . In some embodiments the short range wireless communication device may be an NFC device. In any instance the reader may drive the optional amplifier and antenna to generate an electromagnetic field transmitted above the touchscreen . The short range wireless communication enabled device may be positioned above the touchscreen of the POS device receive and convert the RF energy into power and uses the same energy and electromagnetic field signal to transport data back to the reader through antenna . A communication link may be established and completed between the reader and the short range wireless communication enabled device. The reader may communicate the received data to other components of the POS device to facilitate a transaction between the short range wireless communications enabled device and the POS device .

In one embodiment a support frame such as may be positioned behind the flat panel display and the short range wireless communication antenna . The support frame may be positioned adjacent to the opposing side of the flat panel display using any number of positioning mechanisms such as relatively thin adhesives clamps screws mounts rails or the like. In some embodiments the support frame may be positioned to provide a relatively small air gap between the short range wireless communications antenna and the support frame .

In one embodiment the short range wireless communication antenna can be mounted to a portion of the support frame wherein the antenna is adjacent and in close proximity to the opposing side of the flat panel display . In such an embodiment a relatively small air gap may exist between the flat panel display and the antenna . The antenna may be mounted to the support frame using any number of positioning mechanisms such as relatively thin adhesives clamps screws mounts rails or the like.

In some embodiments multiple applications may be executed on the POS devices. The applications may be in communication with each other to share credentials and information. For example one application that may execute on a POS device is a register application. A second application that may execute on the POS device may be an inventory application. Once a user signs into the register application the register application and inventory application may communicate with each other to pass authentication credentials so the user only has to sign into the system once. The register application may communicate with the inventory application to obtain information regarding the status of certain items in inventory. The different applications may be provided by the system or may be developed by third parties. In some embodiments applications may have the ability to automatically discover each other and authenticate and interact with each other.

In example embodiments of the disclosure there may be a computer implemented method. The method may include determining by a POS device including one or more processors the location of a print server within a distance. The method may include generating by the POS device a wake up message associated with the print server using a communication protocol. The method may include establishing by the POS device a communication session with the print server. The method may include generating by the POS device a print job associated with the print server. Determining the location of a print server may include determining the closest printer associated with the print server. A wake up message may power on a printer associated with the print server. The communication protocol may be a BLE protocol. Establishing a communication session may include establishing a payment session. The payment session may include digital wallets. The method may further include powering off a printer associated with the print server when the print job is completed.

According to example embodiments of the disclosure there may be a POS device. The POS device may include at least one memory storing computer executable instructions and at least one processor wherein the at least one processor may be configured to access the at least one memory and to execute computer executable instructions. The at least one processor may be configured in response to execution of the instructions to determine by a POS device including one or more processors the location of a print server within a distance. The at least one processor may be configured in response to execution of the instructions to generate by the POS device a wake up message associated with the print server using a communication protocol. The at least one processor may be configured in response to execution of the instructions to establish by the POS device a communication session with the print server. The at least one processor may be configured in response to execution of the instructions to generate by the POS device a print job associated with the print server. Determining the location of a print server may include determining the closest printer associated with the print server. A wake up message may power on a printer associated with the print server. The communication protocol may be a BLE protocol. Establishing a communication session may include establishing a payment session. The payment session may include digital wallets. The at least one processor may be further configured in response to execution of the instructions to power off a printer associated with the print server when the print job is completed.

In example embodiments of the disclosure there may be a computer readable medium storing computer executable instructions which when executed by a processor cause the processor to perform operations. The operations may include determining by a POS device including one or more processors the location of a print server within a distance. The operations may include generate by the POS device a wake up message associated with the print server using a communication protocol. The operations may include establishing by the POS device a communication session with the print server. The operations may include generating by the POS device a print job associated with the print server. Determining the location of a print server may include determining the closest printer associated with the print server. A wake up message may power on a printer associated with the print server. The communication protocol may be a BLE protocol. Establishing a communication session may include establishing a payment session. The payment session may include digital wallets. The operations may further include powering off a printer associated with the print server when the print job is completed.

The operations and processes described and shown above may be carried out or performed in any suitable order as desired in various implementations. Additionally in certain implementations at least a portion of the operations may be carried out in parallel. Furthermore in certain implementations less than or more than the operations described may be performed.

These computer executable program instructions may be loaded onto a special purpose computer or other particular machine a processor or other programmable data processing apparatus to produce a particular machine such that the instructions that execute on the computer processor or other programmable data processing apparatus create means for implementing one or more functions specified in the flow diagram block or blocks. These computer program instructions may also be stored in a computer readable storage media or memory that can direct a computer or other programmable data processing apparatus to function in a particular manner such that the instructions stored in the computer readable storage media produce an article of manufacture including instruction means that implement one or more functions specified in the flow diagram block or blocks. As an example certain implementations may provide for a computer program product comprising a computer readable storage medium having a computer readable program code or program instructions implemented therein said computer readable program code adapted to be executed to implement one or more functions specified in the flow diagram block or blocks. The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational elements or steps to be performed on the computer or other programmable apparatus to produce a computer implemented process such that the instructions that execute on the computer or other programmable apparatus provide elements or steps for implementing the functions specified in the flow diagram block or blocks.

While the specification has been described in detail with respect to specific embodiments of the invention it will be appreciated that those skilled in the art upon attaining an understanding of the foregoing may readily conceive of alterations to variations of and equivalents to these embodiments. For example although a majority of the application was directed specifically to pairing a POS printing device with a client device the methods devices and systems disclosed above can be utilized to facilitate the association of any peripheral with a client device including networking devices e.g. routers to connect the client device to a network. As another example any of the communications between the client device and the printing device described above may be conducted directly or be routed through a print server one or more networks or the like. These and other modifications and variations to the present invention may be practiced by those skilled in the art without departing from the scope of the present invention which is more particularly set forth in the appended claims.

