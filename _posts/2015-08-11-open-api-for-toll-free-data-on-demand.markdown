---

title: Open API for toll free data on demand
abstract: A network device receives registration information for a vendor application that selectively provides access to toll-free data for users. The registration information include a vendor account to which data charges can be billed. In response to the registration information, the network device sends a token corresponding to the vendor application. The network device receives, from a vendor device, an application programming interface (API) call that includes the token, a data flow identifier, and flow information. The flow information identifies a particular data flow directed to a copy of the vendor application residing on a user device. The network device validates the token; causes data charges for particular data packets, corresponding to the flow information, to be billed to the vendor account; and sends, to the vendor device, a response to the API call that includes the data flow identifier.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09402002&OS=09402002&RS=09402002
owner: VERIZON PATENT AND LICENSING INC.
number: 09402002
owner_city: Basking Ridge
owner_country: US
publication_date: 20150811
---
An API application programming interface uses a collection of software functions and procedures referred to as API calls that can be executed by other software applications. Service providers e.g. telecommunications providers may provide APIs that vendors can use to access services features that are included in software products that vendors may eventually offer to consumers e.g. end users .

In wireless data plans data usage for end users is typically charged to an account associated with each end user. The end user account may have a periodic limit on total data usage for example on wireless networks e.g. a 2 Gigabyte per month data plan . End users on networks that have periodic limits for data usage often arrange their data usage behavior to avoid overages associated with periodic limits on data usage. Toll free data services allow service providers to charge certain types of data usage by end users to third party vendors thus allowing end users to access certain content without concern for overages.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

Systems and methods provided herein provide an on demand toll free data TFD service for third party vendors that provide mobile applications. The systems and methods use data captured for each data call going through a wireless access network such as network flows. The data is applied to an application program interface API call that enables the third party vendors to provide on demand TFD usage to mobile applications. The service provider network may charge each data flow for a user device e.g. a Hyper text Transfer Protocol HTTP Transmission Control Protocol TCP or User Datagram Protocol UDP connection to either a user account for the user device or a third party vendor account. Using the API call the third party vendor may signal to pay wireless data fees for any particular data flow related to a mobile application on the user device. Otherwise the default is to charge the user s account.

According to one implementation described herein a network device may receive registration information for a vendor application that selectively provides access to toll free data for users. The registration information includes a vendor account to which data charges can be billed. In response the network device may send a token corresponding to the vendor application. The network device may later receive from a vendor device an API call that includes the token a data flow identifier and flow information. The flow information identifies a particular data flow directed to a copy of the vendor application residing on a user device. The network device may validate the token may cause data charges for particular data packets corresponding to the flow information to be billed to the vendor account and may send to the vendor device a response to the API call that includes the data flow identifier.

Service provider network may include one or more wired wireless and or optical networks that are capable of receiving and transmitting data voice and or video signals including multi media signals that may include voice data and video information. For example Service provider network may include one or more public switched telephone networks PSTNs or other type of switched network. Service provider network may also include one or more wireless networks e.g. cellular networks and may include a number of transmission towers for receiving wireless signals and forwarding the wireless signals toward the intended destinations. Service provider network may further include one or more satellite networks one or more packet switched networks such as an IP based network a local area network LAN a wide area network WAN a personal area network PAN e.g. a wireless PAN a wireless local area network WLAN an intranet the Internet or another type of network that is capable of transmitting data.

Service provider network may provide among other services access to digital content such as web pages downloads or streaming media available from third party vendor systems for user devices . In an exemplary implementation service provider network may represent a network associated with a service provider that provides various services such as Internet protocol IP related services value added services etc. For example in one implementation service provider network may represent an Internet protocol Multimedia Subsystem IMS network that provides services to IMS subscribers.

Service provider network may monitor data consumption by user devices over all or portions of service provider network . In some instances service provider network may manage accounts with limited data quotas over some or all of network environment . For example a single user device may be registered with a mobile data plan that includes a one 1 GB per month limit with charges incurred by the user for additional data use over the monthly limit. As another example a home account with an Internet service provider ISP may be accessible by multiple user devices and may include a cumulative 250 GB data limit per month with charges incurred for additional data use over the monthly limit. According to implementations described herein some content from the third party vendor systems may be signaled as TFD content that is provided to user devices without being credited toward a user s monthly data limit and or accruing data use charges.

User device may include a computational or communication device. User device may be associated with a subscriber to telephony services and or data usage services provided in association with service provider network . Data usage services may include any activity that consumes data and may be implemented for example in conjunction with or as a consequence of user device sending or receiving data from accessing websites applications etc. User device may enable a user to view data content from third party vendor systems . For example user device may include a personal computer e.g. a laptop or desktop PC a tablet computer a smart phone an Internet enable television e.g. a smart TV a set top box STB a gaming system or another type of computational or communication device that can communicate with devices in network environment . In one implementation user device may include one or more applications to access data from third party vendor systems via service provider network . Applications may also be referred to herein as mobile applications or vendor applications. Copies of the same application may be distributed to multiple user devices . As used herein the terms application and copy of the application may be used interchangeably.

According to implementations described herein applications on user device may receive select TFD designations from third party vendor systems and employ API calls that enable third party vendor systems to designate particular data flows e.g. HTTP or TCP flows or a UDP connection for application as toll free data. Applications may be developed by third parties and include for example streaming media applications to access content from a particular content provider e.g. a particular third party .

Third party vendor systems may include one or more network devices or computing devices. Third party vendor systems may collect generate and provide data consuming content that may be accessed by subscribers of network via user devices . Data consuming content may include for example web pages applications encoded video content in any of a variety of formats including for example Multiview Video Coding MVC Moving Picture Experts Group MPEG 2 TS etc. Third party vendor systems may provide media content to a mobile user device or a user device connected to a subscriber s home network. Additionally third party vendor systems may interface with service provider network to register applications that third party vendor systems provide to user devices . The registration process provides third party vendor systems with information to allow third party vendor systems to designate selectively particular data content that a third party may want to make toll free for end users of application . Examples of TFD content may include without limitation website content movie trailers mobile app downloads sample music tracks product catalogs promotional videos etc.

In operation third party vendor system may register an application with service provider network . A unique application identifier is assigned to application and service provider network issues to third party vendor system a secret token for the application. Third party vendor system may then designate via application particular content that will be toll free for the user of user device application . Application may be used to indicate to the user which data is toll free and third party vendor systems can modify toll free designations as desired.

When toll free content is selected by the user application may provide a first API call to third party vendor system that identifies the particular data flow of the toll free content e.g. by indicating the source IP address the source port the destination IP address and the destination port . In response to the first API call third party vendor system may generate a second API call to service provider network that provides the application identifier the secret token and the data flow information. In response to the second API call service provider network will validate the token identify the flow and direct billing to an account associated with the application identifier. The service provider can then return a confirmation back to third party vendor system to indicate a successful TFD exchange.

In the particular arrangement and number of components of network environment are illustrated for simplicity. In practice there may be more service provider networks user devices and third party vendor systems . For example there may be thousands of third party vendor systems and hundreds of thousands user devices .

Processor includes one or multiple processors microprocessors data processors co processors application specific integrated circuits ASICs controllers programmable logic devices chipsets field programmable gate arrays FPGAs application specific instruction set processors ASIPs system on chips SoCs central processing units e.g. one or multiple cores microcontrollers and or some other type of component that interprets and or executes instructions and or data. Processor may be implemented as hardware e.g. a microprocessor etc. a combination of hardware and software e.g. a SoC an ASIC etc. may include one or multiple memories e.g. cache etc. etc.

Processor may control the overall operation or a portion of operation s performed by device . Processor may perform one or multiple operations based on an operating system and or various applications or programs e.g. software . Processor may access instructions from memory storage from other components of device and or from a source external to device e.g. a network another device etc. .

Memory storage includes one or multiple memories and or one or multiple other types of storage mediums. For example memory storage may include one or multiple types of memories such as random access memory RAM dynamic random access memory DRAM cache read only memory ROM a programmable read only memory PROM a static random access memory SRAM a single in line memory module SIMM a phase change memory PCM a dual in line memory module DIMM a flash memory and or some other type of memory. Memory storage may include a hard disk e.g. a magnetic disk an optical disk a magneto optic disk a solid state disk etc. a Micro Electromechanical System MEMS based storage medium and or a nanotechnology based storage medium. Memory storage may include drives for reading from and writing to the storage medium.

Memory storage may be external to and or removable from device such as for example a Universal Serial Bus USB memory stick a dongle a hard disk mass storage off line storage or some other type of storing medium e.g. a compact disk CD a digital versatile disk DVD a Blu Ray disk BD etc. . Memory storage may store data software and or instructions related to the operation of device .

Software includes an application or a computer program that provides a function and or a process. Software may include firmware. For example with reference to user device software may include an application that when executed by processor provides the ability trigger a request for TFD data on demand as described herein.

Communication interface permits device to communicate with other devices networks systems etc. Communication interface may include one or multiple wireless interfaces and or wired interfaces. Communication interface may include one or multiple transmitters and receivers or transceivers. Communication interface may include one or multiple antennas. Communication interface may operate according to a protocol layers e.g. radio resource control RRC packet data convergence control PDCC non access stratum NAS etc. and a communication standard e.g. Long term Evolution LTE etc. .

Input permits an input into device . For example input may include a keyboard a mouse a display a touchscreen a touchless screen a button a switch an input port speech recognition logic and or some other type of visual auditory tactile etc. input component. Output permits an output from device . For example output may include a speaker a display a touchscreen a touchless screen a light an output port and or some other type of visual auditory tactile etc. output component.

Device may perform a process and or a function as described herein in response to processor executing software stored by memory storage . By way of example instructions may be read into memory storage from another memory storage not shown or read from another device not shown via communication interface . The instructions stored by memory storage may cause processor to perform a process described herein. Alternatively for example according to other implementations device may perform a process described herein based on the operation of hardware processor etc. .

Tracking server may capture data for each data call going through service provider network or in some implementations a wireless access portion of service provider network . For example tracking server may collect data from network layer 3 or layer 4 flows. Collected data for each data flow may include for example a subscriber identity value e.g. a mobile station ID MSID a MDN or an international mobile subscriber identity IMSI of the user device an allocated IP address for IPv4 or IPv6 an allocated network address translation NAT IPv4 address i.e. the public IPv4 address assigned to the subscriber for 3G or session for 4G a NAT address port chunk start i.e. the first port of a group of contiguous ports assigned to a NAT realm and a NAT address port chunk size i.e. the block size of a group of contiguous ports assigned to a NAT realm .

API module may receive and manage API calls from third party vendor system . Particularly API module may receive an API call for designating TFD on demand. The API call may identify a particular flow e.g. based on information received from application for which toll free billing is desired. API module may verify a secret token in the API call match the flow identified in the API call to the flow tracking data from tracking server and direct charges for the flow to a billing account associated with application and or third party vendor .

Billing server may control the process that charges a user or vendor for data used over service provider network . As a default billing server may direct charges for each tracked data flow to a subscriber account associated with user device . However based on instructions from API module billing server may direct charges for designated data flows to particular third party accounts.

Registration module may allow third party application developers to register an application e.g. applications for designating TFD on demand. In one implementation registration module may accessed through a developer s portal that also provides other services to third party vendors. Access to the developer s portal and or registration module may require a user account and authentication. Registration module may assign an application ID for application and solicit obtain financial account information e.g. a credit card account for billing TFD associated with application . Registration server may also assign a secret token that is required for each API call that designates TFD on demand. In some implementations registration module may update the secret token e.g. periodically or upon request .

Although shows exemplary functional components of service provider network in other implementations service provider network may include fewer components different components or additional components than depicted in . Alternatively or additionally one or more functions of service provider network may be performed by one or more other devices of network environment .

User module may associate users and or user devices with applications . For example user module may include a database or other memory unit to store user registration information for copies of application that are downloaded to user devices .

Content server may store and provide content requested by applications . In one implementation access to content server e.g. by user device and or application may be restricted to users with particular subscription packages and enforced by for example password protection device identifiers for user devices and or application identifiers e.g. application . Content server may generate a content stream that is compatible with a platform e.g. a particular combination of hardware software of some types user devices while another content stream may be used for other types of user devices .

Application server may inform applications that particular content will be tool free e.g. so that each application may present a toll free indication to a user . Application server may receive API calls from applications that indicate content requested by the user of user device is designated as TFD. In response application server may send to service provider network e.g. API module an API call for designating the particular data flow for the requested content as TFD. Application server may also receive a conformation from service provider network that a designated data flow has been charged to the third party account.

Although shows exemplary functional components of third party vendor system in other implementations third party vendor system may include fewer components different components or additional components than depicted in . Alternatively or additionally one or more functions of third party vendor system may be performed by one or more other devices of network environment .

Referring to a third party application developer may use third party vendor system to register an application e.g. applications for designating TFD on demand. After providing authentication information to login third party vendor system may provide application information such as a title description or internal identifier. In response registration server may provide a globally unique application identifier for application . Application identifier may include an alphanumeric string a hash value or another unique value.

Registration server may also generate a secret token that may be associated with application or more particularly unique application identifier . Secret token may be stored by third party vendor system e.g. application server and used during each subsequent API call to service provider network for TFD on demand.

As shown in third party vendor system may provide a toll free data designation to indicate particular content available through application that is designated as toll free. Application may receive TFD designation and present to a user e.g. of user device that toll free content is available. A user may provide user input for application to present the toll free content. In response to the user input application may generate a content request . Content request may include for example an API call to identify and obtain the selected content. In response to content request third party vendor system may provide the content to application via a data flow . Data usage amounts for data flow may be logged by tracking server .

For each toll free data call e.g. HTTP TCP or UDP application will record data flow identification information such as the source IP address source port destination IP address and destination port. Because the content in data flow in has been designated e.g. via TFD designation as toll free application may generate and send a toll free indication for data flow . Toll free indication may include for example an API call to initiate an on demand request to charge data flow as toll free.

Returning to the timing of when toll free indication is provided by application may vary. Also a trigger for when application may send toll free indication may be applied differently for different applications . For example toll free indication may be sent based on usage thresholds detected by application user participation in other application features e.g. a survey trial etc. predicated upon a user s entry of a coupon code etc. In one implementation application may provide toll free indication as soon as the required information e.g. the five tuple information for the data flow is known. In another implementation application may provide toll free indication at a minimum duration or at the completion of a designated TFD flow.

Third party vendor system may receive toll free indication and in response may generate an on demand TFD billing request . In one implementation third party vendor system may connect to API module via a virtual private network VPN or another secure connection to provide TFD billing request . On demand TFD billing request may be in the form of for example an API call to API module .

Returning to in response to TFD billing request API module may provide billing instructions to billing server . Billing instructions may override a default to charge a user s wireless data plan and instead charge data over the particular data flow to an account associated with application and or third party vendor system . Billing server may receive billing instructions and provide toll free billing for the indicated dataflow accordingly.

Also in response to TFD billing request API module may provide confirmation to third party vendor system . Confirmation may include for example the data flow ID e.g. the same data flow ID included in data flow identifier field the data flow size e.g. the number of bytes of the data flow and a success fail indication. The success fail indication may indicate success if API module finds data packets matching descriptions in TFD billing request . The success fail indication may indicate failure for example if API module does not find any data packets matching descriptions in TFD billing request .

According to implementations described herein users at third party vendor system or other devices may check TFD data usage through a registered login such as the same authentication information used to register application e.g. described above in connection with . In one implementation users of third party vendor system may access information from billing server or an intermediate proxy server to view TFD usage in real time by application ID by data flow ID and time by data volume by operating system etc.

As shown in process may include a service provider network receiving registration information for a vendor application to offer toll free data block the service provider network providing a token for API calls relating to the vendor application block and the third party server receiving a toll free data flow indication from the vendor application block . For example registration server of service provider network may receive registration information for a vendor application that selectively provides access to toll free data for users. The registration information may include a vendor account to which data charges are to be billed. In response service provider network may provide a unique token to the third party vendor that can be used with future on demand TFD API calls associated with the vendor application. Later third party vendor system may receive from a copy of the vendor application residing on user device flow information such as toll free flow indication .

Process may also include the third party server generating and or sending an API call with the token and flow information block and service provider network receiving the API call block and determining if the API call includes a valid token block . For example third party vendor system may generate and send an API call to service provider network e.g. API module . The API call such as TFD billing request may include the token a vendor s data flow identifier and flow information. The flow information may identify a particular data flow directed to the copy of the vendor application residing on user device . Service provider network may receive the API call and validate the token by checking if the token matches a token in a stored list is current and or is associated with the correct vendor.

If the API call includes a valid token block YES toll free data may be logged for the indicated flow block and a success response may be provided to the API call block . For example if service provider network validates the token service provider network may identify particular data packets corresponding to the flow information and cause data charges for the particular data packets to be billed to the vendor account. Service provider network may also send to the third party vendor system a response to the API call that includes the vendor s data flow identifier and a success indication.

If the API call does not include a valid token block NO a Fail response may be provided to the API call block . For example service provider network may deny the request and return a Fail response to third party vendor system .

Systems and methods described herein may provide toll free data on demand that can be implemented for individual data flows in a mobile network. The use of toll free data on demand enables application developers to be in control of their toll free data campaigns allowing vendors to dynamically control which data calls are toll free and which are not. The systems and methods described herein give freedom for mobile applications and at the same time reduces the complexity of backend services of the service provider network.

In the preceding specification various preferred embodiments have been described with reference to the accompanying drawings. It will however be evident that various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense. For example while series of blocks have been described with respect to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel.

To the extent the aforementioned embodiments collect store or employ personal information provided by individuals it should be understood that such information shall be used in accordance with all applicable laws concerning protection of personal information. Additionally the collection storage and use of such information may be subject to consent of the individual to such activity for example through well known opt in or opt out processes as may be appropriate for the situation and type of information. Storage and use of personal information may be in an appropriately secure manner reflective of the type of information for example through various encryption and anonymization techniques for particularly sensitive information.

It will be apparent that different aspects of the description provided above may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement these aspects is not limiting of the invention. Thus the operation and behavior of these aspects were described without reference to the specific software code it being understood that software and control hardware can be designed to implement these aspects based on the description herein.

Further certain portions of the invention may be implemented as a component or system that performs one or more functions. These components systems may include hardware such as a processor an ASIC or a FPGA or a combination of hardware and software.

Additionally embodiments described herein may be implemented as a non transitory storage medium that stores data and or information such as instructions program code data structures program modules an application etc. A non transitory storage medium includes one or more of the storage mediums described in relation to memory storage .

The word exemplary is used herein to mean serving as an example. Any embodiment or implementation described as exemplary is not necessarily to be construed as preferred or advantageous over other embodiments or implementations.

No element act or instruction used in the present application should be construed as critical or essential to the invention unless explicitly described as such. Also as used herein the article a and one of is intended to include one or more items. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

