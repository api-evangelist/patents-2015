---

title: Mode switching user device
abstract: Techniques for monitoring radio and network conditions to improve performance for a wireless device are described. A diagnostic monitoring module may receive diagnostic messages from a modem via a diagnostic interface at the wireless device. The module may process (e.g., parse) the diagnostic messages to obtain network status information indicative of the status of a radio network. The module may provide the network status information to an application for use to control communication with the radio network. The module may also process the diagnostic messages to obtain diagnostic information indicative of the performance of a radio connection or a data session or both for the wireless device. The module may send the diagnostic information to a network server for network monitoring, debugging, etc.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09474046&OS=09474046&RS=09474046
owner: QUALCOMM Incorporated
number: 09474046
owner_city: San Diego
owner_country: US
publication_date: 20150622
---
The present application is a continuation of U.S. Non Provisional application Ser. No. 12 272 994 entitled DIAGNOSTIC MONITORING BY A WIRELESS DEVICE filed Nov. 18 2008 which claims priority to provisional U.S. Application Ser. No. 60 989 050 entitled MODE SWITCHING USER DEVICE filed Nov. 19 2007.

The present disclosure relates generally to communication and more specifically to techniques for supporting wireless communication for a wireless device.

Wireless communication networks are widely deployed to provide various communication services such as voice video packet data messaging broadcast etc. These wireless networks may be multiple access networks capable of supporting multiple users by sharing the available network resources. Examples of such multiple access networks include Code Division Multiple Access CDMA networks Time Division Multiple Access TDMA networks Frequency Division Multiple Access FDMA networks Orthogonal FDMA OFDMA networks and Single Carrier FDMA SC FDMA networks. The wireless networks may also be referred to as radio networks radio access networks access networks etc.

A wireless device may be within the coverage of zero one or multiple radio networks at any given moment. The wireless device may access the most preferred radio network among all available radio networks and may establish a radio connection with this radio network. The wireless device may also establish a data session with a designated network entity. The wireless device may thereafter exchange data via the radio connection for the data session. The radio conditions and or network conditions may change during the data session and may affect the performance of the wireless device. It is desirable to efficiently monitor the radio and network conditions in order to obtain good service for the wireless device.

Techniques for monitoring radio conditions and network conditions to improve performance for a wireless device are described herein. In one design the wireless device may include a diagnostic monitoring module a modem and an application. The diagnostic monitoring module may communicate with the modem via a diagnostic interface to receive diagnostic messages indicative of radio and network conditions data performance of the wireless device etc. The diagnostic monitoring module may provide pertinent information to the application which may use the information to make decisions on service activation network selection etc.

In one design the diagnostic monitoring module may receive diagnostic messages from the modem via the diagnostic interface. The module may process the diagnostic messages to obtain network status information indicative of the status of a radio network. The module may parse the diagnostic messages to obtain pertinent parameters for the radio network and may determine the network status information based on these parameters. The module may provide the network status information via a second interface e.g. APIs to the application for use by the application to control communication with the radio network.

In another design the diagnostic monitoring module may process the diagnostic messages to obtain diagnostic information indicative of the performance of a radio connection or a data session or both for the wireless device. The module may parse the diagnostic messages to extract parameters of interest discard remaining parameters and store the extracted parameters in a buffer. The module may generate a report comprising a set of parameters stored in the buffer and may send the report to a network server. The report may comprise diagnostic information which may be used by the network server for network monitoring debugging etc.

In yet another design paging messages may be sent to the wireless device in different manners depending on the operating mode of the wireless device. The wireless device may receive a first paging message sent based on a first identifier e.g. a Mobile Directory Number MDN for the wireless device when it is operating in an inactive mode. The wireless device may receive a second paging message sent based on a second identifier e.g. an Internet Protocol IP address for the wireless device when it is operating in an active mode. The IP address may be associated with the MDN and a socket for an application at the wireless device. The second paging message may be sent to the socket for the application.

The techniques described herein may be used for various wireless communication networks such as CDMA TDMA FDMA OFDMA SC FDMA and other networks. The terms network and system are often used interchangeably. A CDMA network may implement a radio technology such as cdma2000 Universal Terrestrial Radio Access UTRA etc. cdma2000 covers IS 2000 IS 95 and IS 856 standards. IS 2000 Releases 0 and A are commonly referred to as CDMA2000 1 1 RTT 1 etc. IS 856 is commonly referred to as High Rate Packet Data HRPD CDMA2000 1 EV DO 1 EV DO EVDO etc. UTRA includes Wideband CDMA WCDMA and other variants of CDMA. A TDMA network may implement a radio technology such as Global System for Mobile Communications GSM . An OFDMA network may implement a radio technology such as Ultra Mobile Broadband UMB Evolved UTRA E UTRA IEEE 802.11 Wi Fi IEEE 802.16 WiMAX IEEE 802.20 Flash OFDM etc. UTRA and E UTRA are part of Universal Mobile Telecommunication System UMTS . 3GPP Long Term Evolution LTE is an upcoming release of UMTS that uses E UTRA which employs OFDMA on the downlink and SC FDMA on the uplink. UTRA E UTRA UMTS LTE and GSM are described in documents from an organization named 3rd Generation Partnership Project 3GPP . cdma2000 and UMB are described in documents from an organization named 3rd Generation Partnership Project 2 3GPP2 . For clarity certain aspects of the techniques are described below for 1 RTT and EVDO.

A wireless device may be stationary or mobile and may also be referred to as a mobile station MS 1 RTT terminology an access terminal AT EVDO terminology a user equipment UE 3GPP terminology a subscriber unit a station etc. Wireless device may be a cellular phone a personal digital assistant PDA a wireless modem a laptop computer a wireless local loop WLL station a user device etc. Wireless device may communicate with a base station on the forward link and or reverse link. The forward link or downlink refers to the communication link from the base station to the wireless device and the reverse link or uplink refers to the communication link from the wireless device to the base station. Wireless device is also referred to as device MS and AT in the description below.

In 1 RTT network a Base Station Controller BSC may couple to a set of base stations and provide coordination and control for these base stations. BSC may handle allocation of traffic channels to wireless devices control handoff of wireless devices etc. A Mobile Switching Center MSC may couple to BSC and support circuit switched communication for wireless devices. MSC may provide routing for circuit switched calls and perform mobility management for wireless devices located within the area served by the MSC. wireless devices

In EVDO network a BSC Packet Control Function PCF may couple to a set of base stations and control the exchange of packet data between these base stations and a Packet Data Serving Node PDSN . PDSN may support packet switched communication for wireless devices communicating with radio networks and . PDSN may handle establishment maintenance and termination of data sessions for wireless devices. PDSN may couple to a private network which may be owned and operated by a network operator.

A diagnostic monitoring server may couple to private network and support monitoring of radio and network conditions. Server may receive reports describing radio and network conditions observed by wireless devices. Server may support network monitoring and debugging and may provide the status of the radio networks when requested. A Radius server may support authentication authorization and accounting AAA functions for users. Radius server may also store a database of MDN to IP address binding which may be used to page wireless devices with active data sessions as described below. A paging server may support paging of wireless devices via 1 RTT network and EVDO network . Other servers supporting other functions may also be coupled to private network . The servers may also be referred to by other names. Private network may be coupled to a public network which may include the Internet and or other data networks.

A customer content server may support one or more services that can be subscribed to and obtained by wireless devices. For example server may provide multi media services e.g. download of audio video and or other media content to wireless devices. One such multi media service may be download of book content as described in the aforementioned provisional U.S. Application Ser. No. 60 989 050.

Wireless device may establish a data session with PDSN and may send and receive data during the data session. The data session may also be referred to as a Point to Point Protocol PPP session a data connection etc. The data session may be valid for any period of time and may be closed by either wireless device or PDSN .

Wireless device may or may not have data to send or receive at any given moment during the data session. Wireless device may establish a radio connection with a radio network whenever there is data to send or receive. The radio connection may be referred to as a data call a data service etc. Wireless device may be assigned traffic channels for the radio connection and may send and or receive data via the assigned traffic channels. The radio connection and the traffic channels may be valid for as long as there is data to send or receive and may be released when there is no data activity in order to conserve radio resources.

Applications may include various applications such as a multi media application an email application a web browser application a location services application etc. An application may communicate with a network entity in order to provide a service requested by a user. For example a multi media application may communicate with customer content server to download media e.g. book content to wireless device for display to the user. Applications may communicate with modem by exchanging AT commands via an AT interface which is commonly used for modems.

An application may desire to establish a data call with a radio network in order to provide a service requested by the user. The application may exchange AT commands with modem to establish a data call. The AT commands may support operations such as dialing hanging up and changing parameters of the data call. The AT commands may provide the application with limited information regarding the network conditions e.g. which radio networks are available. The application may attempt to establish a data call with different radio networks until a successful data call is established. The application may thereafter communicate with a network entity e.g. customer content server via the established data call. The AT commands may not be available once the data call is established. An escape sequence may be performed to interrupt the data call and allow for exchanges of AT commands. However this interrupt may be disruptive to the service being provided to the user. In any case the application may have limited visibility on network conditions and device performance.

In an aspect a diagnostic monitoring module may communicate with modem via a diagnostic interface to receive diagnostic messages indicative of radio and network conditions data performance of wireless device etc. Diagnostic monitoring module may also communicate with applications to receive requests from the applications and to provide pertinent information to the applications. The applications may use the information to make decisions on service activation and network selection to control communication with the selected radio network etc. Diagnostic monitoring module may perform various functions and provide various types of information as described below.

Diagnostic monitoring module may collect various parameters from modem . These parameters may be for quality of service QoS metrics encompassing user experience and network performance. The QoS metrics may be used to determine whether QoS issues exist and whether the QoS issues are related to a radio connection i.e. radio network issues or a data connection i.e. data connectivity issues . Module may process the parameters to obtain various types of information that may be useful to applications diagnostic monitoring server customer content server and or other entities. In one design module may collect and provide the types of information listed in Table 3.

The network status information may comprise received signal strength detected radio networks etc. The device status information may comprise identifiers for wireless device information on items configured for wireless device etc. The data connectivity information may comprise data connection status data performance metrics etc. The diagnostic information may comprise information related to a radio connection and or a data session for wireless device . These different types of information are described in further detail below.

Control module may send configuration messages to modem to configure modem to report certain parameters periodically and or when triggered by events. Control module may also send command request messages to modem to ask for specific parameters. As used herein the term parameter generically refers to any piece of information which may be static or dynamic. Modem may provide diagnostic messages such as command response messages log messages event messages and debug messages which may be as described in Table 4.

The different types of messages in Table 4 may be characterized by how they are sent and possibly what is sent in the messages. The command request messages from diagnostic monitoring module and the command response messages from modem may operate in a trigger response manner. A command request message may ask for a specific parameter and a command response message may provide the requested parameter. A command request message may also direct modem to perform a specific action and a command response message may confirm completion of the action. For example a command request message may invoke an item write to provision modem with activation parameters for normal operation.

Log messages may be sent periodically and may provide designated parameters. The reporting of log messages may be configured by a configuration message which may be referred to as a log mask. Different log messages may be defined and may be enabled based on the configuration of the log mask. Each log message may be associated with a specific bit of the log mask and may be enabled by setting the associated bit in the log mask to a predetermined value e.g. 1 . Each log message may provide a specific set of parameters based on a reporting schedule applicable for that log message. Modem may provide log messages in a periodic manner to diagnostic monitoring module .

Event messages may be sent when triggered by events and may be enabled by a configuration message. Each event message may provide a specific set of parameters when triggered by a specific event which may be expiration of a timer a parameter value crossing a threshold etc. Modem may provide event messages in an asynchronous manner as events occur.

Debug messages may be streamed from various modules within modem into a file during normal operation. Debug messages may be used to collect create a debug log as an aid for troubleshooting.

In general modem may provide a given parameter in any message. Certain parameters may be more suitably provided by certain types of message. For example command request messages may be used to retrieve static or semi static parameters. Log messages may be used to provide parameters that can change dynamically. Event messages may be used to provide parameters that may be pertinent when there are changes in the operation of wireless device the radio connection the data session etc. A given parameter may also be provided in different types of message e.g. in a log message as well as an event message. The different types of messages are described in further detail below.

An input processor and buffer may receive command response messages log messages event messages and debug messages from modem . Processor may process the received messages to collect parameters of interest and may store the collected parameters in an input buffer. Processor may provide the collected parameters to control module and or other modules when requested. An output processor and buffer may receive reports from control module and may buffer the reports until they are ready to be sent. Processor may provide the reports to modem for transmission to diagnostic monitoring server in and or other network entities.

An initialization module may receive parameters from input processor and may process the parameters to determine network status information. Module may monitor system determination and network access status of radio networks. Module may receive requests for specific information from applications and may provide the requested information. For example an application may invoke a GetBars API. In response module may obtain pilot measurements for sectors in an active set ASET of wireless device translate the pilot measurements to a bar value e.g. 0 to 5 bars indicative of the received signal strength of the radio network and provide the bar value to the application. As another example the application may invoke a GetRBI API. In response module may determine whether wireless device is communicating with a preferred or non preferred radio network and may provide a roaming bit indicator RBI as defined in a Preferred Roaming List PRL for the radio network. The application may also request for other types of information e.g. system time local time offset. etc. Module may obtain the requested information and provide it to the application. The application may use the bar value the RBI and or other information from module to determine whether or not to activate a service and initiate a data call to select a radio network on which to initiate the data call etc.

A QoS monitoring module may receive log messages and event messages from modem and may process these messages to determine the status and or performance of a data call. In one design module may be activated during an active window and disabled outside of the active window. Module may detect for origination of the data call which may be the start of the active window. Module may also detect for release of the data call which may be the end of the active window. Module may monitor radio performance and data performance during the active window e.g. as background task. In another design module may operate whenever activated e.g. by control module .

Module may parse e.g. in real time the log messages and event messages received from modem to obtain different parameters for the radio connection the data session etc. Module may group the different parameters and store them in the input buffer. Module may detect for trigger conditions which may include dropped call PPP failure call termination failure to establish radio connection failure to establish data connection failure to acquire radio frequency RF lock or channel assignment loss of sync channel or paging channel etc. The trigger conditions typically denote abnormal conditions for wireless device . Whenever a trigger condition is detected module may collect parameters that are stored in the input buffer and associated with the trigger condition to obtain a snapshot of the current radio and network conditions. Module may generate a report containing pertinent parameters for the trigger condition and may forward the report to processor for transmission to diagnostic monitoring server and or other network entities.

In general diagnostic monitoring module may send reports due to various trigger conditions which may cover different types of failures and abnormal conditions. The reports may be used for various purposes such as trouble shooting network monitoring etc. For example an application may encounter a failure that is captured by a trigger condition and a report may be sent for the trigger condition. The user may call the network operator to report the failure and the network operator may have information from the report to diagnose the cause of the failure. The network operator may also use the reports to monitor the performance of the radio network to detect for error or overloading conditions etc. The network operator may then take appropriate corrective actions.

An interactive diagnostic module may support debug and diagnostic of a data call and a data session for wireless device . Module may be invoked by the user the network operator a content provider etc. When invoked module may present a debug diagnostic screen on wireless device . The debug diagnostic screen may provide radio parameters for the radio connection. Module may obtain the radio parameters from among the parameters stored in the input buffer and may update these radio parameters on the screen as new log messages and event messages are received from modem . The user may navigate through the screen to view different radio parameters. The user may also capture the radio parameters on the screen e.g. by hitting an S button and may save the radio parameters to a file for export to diagnostic monitoring server . Module may also use the radio parameters to determine network status network access failures etc.

Module may also collect parameters for the data session and may provide data connectivity information as an aid for debugging etc. The data connectivity information may indicate whether wireless device is on line or dormant whether there is a data connection failure etc. The data connectivity information may provide Mobile IP MIP authentication status data connection status etc. The data connection status may identify data connection issues and may provide a timestamp and an error code for localized identification of a data connection issue.

Module may also capture information for various events affecting the operation of wireless device . Module may capture information for a MIP event e.g. a registration reply RRP code and a timestamp. Module may capture information for a paging event e.g. a timestamp of an incoming page the location e.g. latitude and longitude of a base station sending the page a local time offset of the geographic location etc. Module may capture information for an authentication event e.g. failure condition for rejection of service by Radius server Registration Reply Code RRC timestamp of failed authentication etc. Module may capture information on an event that may block an application from establishing a data call. The information may indicate whether the application is denied access due to i no service or out of range condition or ii roaming condition on an unauthorized radio network. The information may comprise parameters such as a PRL provisioned on wireless device a System Identification SID a Network Identification NID a base station identification BaseID latitude and longitude of the base station a color code a sector ID etc. Module may also capture information on rejection of access by wireless device e.g. due to an incorrect Mobile Station ID MSID a network rejection etc. In general module may present captured information for any event on a debug diagnostic screen and or may send the capture information to diagnostic monitoring server .

Wireless device may perform authentication with 1 RTT network or EVDO network during establishment of a data call. Diagnostic monitoring module may keep track of the status of the authentication process. The status may be OK if modem access credentials e.g. ESN and MSID have passed authentication to a designated network entity e.g. a Home Location Registry HLR or a Home Authentication Authorization and Accounting H AAA . The status may be FAIL if wireless device has failed authentication e.g. due to mismatch in the modem access credentials. Module may store information regarding the authentication process and may provide the information to facilitate debugging of data connectivity issues.

Wireless device may utilize MIP for a data session and may perform registration for MIP. Diagnostic monitoring module may keep track of the status of the MIP registration process. Module may store information regarding the MIP registration process and may provide the information to facilitate debugging of data connectivity issues.

Diagnostic monitoring module may support a set of APIs that may be invoked by applications to retrieve pertinent information. In general any set of APIs may be supported and each API may provide any information. In one design the supported APIs may include all or a subset of the APIs shown in Table 5.

Diagnostic monitoring module may also support APIs to set MDN IMSI parameters for the active MIP user profile etc. Module may also support different and or additional APIs.

As described above modem may send different types of messages containing different parameters. In general any set of messages may be supported for each message type and each message may carry one or more parameters. For clarity exemplary sets of command response messages log messages and event messages are given below.

In one design modem may return command response messages for command request messages received from diagnostic monitoring module . There may be a one to one mapping between a command request message and a corresponding command response message. In one design the supported command response messages may include all or a subset of the messages shown in Table 6.

In one design modem may periodically send log messages containing various parameters. Each log message may provide a set of parameters applicable for that log message. For example a log message for airlink summary may provide a measured pilot energy a pilot pseudo random number PN etc. In one design the supported log messages may include all or a subset of the messages shown in Table 7.

Diagnostic monitoring module may send configuration messages to modem to configure the log messages. The configuration messages may specify which log messages are enabled the conditions in which each log message should be sent by modem the frequency of each log message which parameters should be sent for each log message etc. Modem may send the log messages as configured by diagnostic monitoring module .

In one design modem may send event messages containing various parameters when triggered by events. Each event message may provide a set of parameters applicable for that event message. In one design the supported event messages may include all or a subset of the messages shown in Table 8.

Different timer values may be used for different event messages and are denoted as Txx in Table 8 where xx is a timer index. Each timer value may be any suitable value and may be specified by standards.

Diagnostic monitoring module may send configuration messages to modem to configure the event messages. The configuration messages may specify which event messages are enabled the conditions in which each event message should be sent by modem which parameters should be sent for each event message etc. Modem may send the event messages as configured by diagnostic monitoring module .

Diagnostic monitoring module may generate reports whenever certain trigger conditions occur e.g. when certain event messages are received from modem . The last column of Table 8 lists the report s that may be generated for each event message. Table 9 lists a set of parameters that may be sent in each of reports A through E and provides the source of each parameter. RX0 denotes a primary receiver and RX1 denotes a diversity receiver at wireless device .

Other reports may also be generated in response to the trigger conditions. For example a 1 RTT throughput report may contain parameters for a data call with 1 RTT network an EVDO throughput report may contain parameters for a data call with EVDO network an EVDO connection attempt report may contain parameters for connection attempts in EVDO network an EVDO connection termination report may contain parameters for connection terminations in EVDO network an EVDO connection status report may contain parameters for connection statistics and a device parameter report may contain parameters for wireless device .

Diagnostic monitoring module may generate reports whenever failure events or abnormal conditions are detected. Module may also periodically generate reports e.g. for network performance or device performance.

Diagnostic monitoring module may send the generated reports to diagnostic monitoring server or some other network entity. The reports may be sent when they are generated or at a later time e.g. if a radio connection or a data session is not established. Diagnostic monitoring server may use the reports for network monitoring debugging etc.

In one design a lightweight reporting protocol may be used to send the reports from wireless device to diagnostic monitoring server or some other network entity. A dictionary may be dynamically defined for events and parameters to be report by wireless device . Each event may be assigned a different event code. Each parameter may also be assigned a different field code. A report may then include values for parameters given by the associated field codes. The use of the lightweight reporting protocol may reduce the amount of data to send for reports.

In one design wireless device may send a session start message to diagnostic monitoring server to start a reporting session. The session start message may serve as a handshake between wireless device and diagnostic monitoring server and may also be used by server to control or throttle reporting by wireless device . Server may either accept or reject the reporting session and may return a session reply message to wireless device . If the reporting session is accepted then wireless device may send a data block for one or more reports which may be generated by wireless device using the dictionary. If the reporting session is rejected then wireless device may either i discard the reports that have been queued for transmission e.g. automatically or if instructed by server or ii attempt to send the reports at a later time. The reports may be discarded to avoid transmission of duplicate reports for the same network error by different wireless devices in the same geographic area.

In one design the session start message may comprise the fields shown in Table 10. In the following description 0xV . . . V denotes a hexadecimal value of V . . . V where each V may be a hex value between 0 and F.

In one design a data block may be sent in the reporting session and may comprise a dictionary and a set of one or more records. The dictionary may comprise definitions of field codes for parameters contained in the records. The dictionary may be given by a sequence of field code definitions. Each field code definition may have the form event code field code field code description. For example a field code definition may be 99.1 RX0 AGC where 99 is an event code 1 is a field code and RX0 AGC is a parameter for the field.

Each record may include a set of fields for an associated event. Each record may have the format given in Table 12. An Event Type field may comprise one or more field code value pairs of the form field code field value. The field code may be interpreted based on the field code definition given in the dictionary. For example the Event Type field may include 1 58 where 1 may refer to RX0 AGC and 58 may refer to an AGC value of 58. In one design the data block may comprise the fields shown in Table 12.

In the design shown in Table 12 a dictionary may be dynamically defined for a reporting session and may be conveyed in a data block. The dictionary may be tailored for the events and parameters reported in the data block. In another design a dictionary may be predefined and known a priori by wireless device as well as diagnostic monitoring server and does not need to be conveyed in the data block. In yet another design a set of dictionaries may be predefined and assigned unique dictionary IDs. The data block may then convey the dictionary ID of the specific dictionary to use for the data block. The dictionary may also be defined and conveyed in other manners.

Diagnostic monitoring server may terminate a reporting session by sending a session stop message. The session stop message may indicate whether the reporting session is successfully closed or has failed e.g. if the data connection is dropped for whatever reason before the reporting session can be closed. In one design the session stop message may comprise the fields shown in Table 13.

Wireless device may decide how to handle an improperly closed reporting session. If the reporting session is rejected by diagnostic monitoring server then wireless device may discard all data that has been queued for transmission or may initiate another reporting session e.g. after waiting some amount of time. Wireless device may make a decision based on the amount of resources needed to send reports to diagnostic monitoring server .

A specific design of various messages and a data block for reporting diagnostic information has been described above. Diagnostic information may also be reported using other messages which may include different and or additional fields.

Diagnostic monitoring module may provide a debug diagnostic screen e.g. when invoked by the user. The debug diagnostic screen may provide various parameters for wireless device the radio connection the data session the application etc. In one design the debug diagnostic screen may provide all or a subset of the parameters shown in Table 14.

Referring back to wireless device may communicate with 1 RTT network or EVDO network at any given moment. Wireless device may operate in different manners for different radio networks.

Wireless device may operate in EVDO preferred state while in an active mode and may operate in an 1 RTT only state while in an inactive mode. The inactive mode may also be referred to as a sleep mode an idle mode etc. Wireless device may enter the inactive mode and transition from EVDO preferred state to 1 RTT only state if there is a sleep trigger or if modem is reboot. The sleep trigger may occur due to a period of no user activity or some other condition. In the inactive mode much of wireless device and diagnostic monitoring module may be powered down in order to conserve battery power. While in 1 RTT only state modem may listen for paging messages from 1 RTT network . Wireless device may transition from 1 RTT only state to EVDO preferred state when a wakeup trigger is received. The wakeup trigger may be due to reception of a paging message for wireless device origination of a data call or some other condition. Diagnostic monitoring module may be enabled upon transitioning to EVDO preferred state .

In one design wireless device may be paged via different mechanisms for the active and inactive modes. Wireless device may be paged via 1 RTT network or EVDO network in the active mode and via 1 RTT network in the inactive mode.

In one design wireless device may be paged based on a voice service option e.g. Service Option 3 SO3 via 1 RTT network while operating in the inactive mode. Wireless device may register with 1 RTT network and may update its location with 1 RTT network as wireless device moves about. Wireless device may also be assigned specific paging slots which are time periods in which paging messages can be sent to wireless device . 1 RTT network may send a paging message to wireless device during an assigned paging slot and based on the current location of wireless device . The paging message may be sent to wireless device using an MDN which is a phone number for wireless device . Wireless device may be ringed for a sufficiently long duration in order to assure multiple page notifications. Wireless device may avoid answering a paging message sent using SO3 and may instead use this message as a trigger to originate a packet data call e.g. with Service Option 33 SO33 call back.

While in 1 RTT only state wireless device may power down as much circuitry as possible and may wake up periodically during its assigned paging slots. Wireless device may process the paging channel from 1 RTT network in each assigned paging slot to determine whether a paging message has been sent for wireless device . If a paging message is received and a response is needed then wireless device may transition to EVDO preferred state .

In one design wireless device may be paged based on its IP address while operating in the active mode. Upon acquiring a radio network wireless device may establish a data session e.g. a PPP session with PDSN . Wireless device may acquire an IP address during data session establishment e.g. from a Home Agent after successful MIP authentication and may use this IP address for the duration of the data session. The IP address may be associated with i.e. linked to the MDN of wireless device as well as a socket for an application at wireless device . A socket is one endpoint of a two way communication path between an application at one entity and an application at another entity. A socket may be bound to a port number so that transport layer protocols such as TCP can identify the application mapped to the socket. The association between IP address MDN and socket may be stored in a binding table in a database by Radius server as assumed in much of the description below or by some other network entity. Radius server may receive framed IP attribute as well as i a session start record that indicates that a data session for wireless device has begun and that the IP address is valid and ii a session stop record that indicates that the data session is closed.

A network entity e.g. customer content server may desire to page wireless device and may invoke a network API interface to ring the MDN of wireless device . A lookup in the binding table may be performed to determine if the MDN has an active IP address assigned to it. If an active IP address is assigned then a notification packet may be sent to a specific port where a TCP server or TCP listener is running on wireless device . When the TCP listener detects the notification packet an application may be notified. The application may then establish a mobile originated packet data call to the network entity. However if a valid IP address is not assigned to the MDN then a voice page SO3 may be sent to the MDN of wireless device .

A socket based paging message may thus be sent to wireless device by determining the IP address of wireless device determining the MDN and socket linked to the IP address and sending a paging message e.g. a notification packet to the socket using the MDN. Wireless device may receive the paging message and may process the paging message by detecting a payload string for content match. If there is a match then an application is notified of the page and a TCP listener may send an acknowledgement payload back to paging server to complete the handshake. Both entities may then close their sockets after the exchange.

Paging server may receive a paging message for wireless device and may determine whether wireless device is operating in the active mode or the inactive mode. Paging server may send the paging message using SO3 based paging if wireless device is operating in the inactive mode or using socket based paging if wireless device is operating in the active mode. Wireless device may power down its protocol stack during the inactive mode and may not be able to receive socket based paging messages during the inactive mode.

In one design of block the module may parse the diagnostic messages to obtain designated parameters for the radio network and may determine the network status information based on these parameters. The network status information may comprise a bar value indicative of the received signal strength for the radio network an RBI an indication of the radio technology of the radio network system time etc.

The module may also process the diagnostic messages to obtain device status information indicative of the status of the wireless device. The device status information may comprise an ESN an MDN a modem version a PRL version and or other information for the wireless device. The module may provide the device status information via the second interface to the application.

The module may send at least one configuration message to the modem to configure the modem to send log messages. The configuration message s may define specific log messages to send parameters to send in the log messages conditions for sending the log messages etc. The module may thereafter receive log messages sent by the modem as configured by the configuration message s . The module may send a command request message for at least one parameter to the modem and may receive a command response message with the at least one parameter. The module may receive from the application an API requesting a parameter for network status information and may provide the requested parameter to the application.

The module may send at least one configuration message to the modem to configure the modem to send log messages. The configuration message s may define parameters to send in the log messages and conditions for sending the log messages. The module may receive log messages sent by the modem as configured by the configuration message s .

The module may send at least one configuration message to the modem to configure the modem to send event messages. The configuration message s may define specific event messages to send parameters to send in the event messages conditions for sending the event messages etc. Each event message may be sent when triggered by an associated event and may provide a set of parameters defined for that event message. The module may receive the event messages sent by the modem as configured by the configuration message s .

In one design of block the module may parse the diagnostic messages to obtain designated parameters and discard remaining parameters in the diagnostic messages. The module may store the designated parameters in a buffer. In one design of block the module may generate a report comprising a set of parameters stored in the buffer. The set of parameters may form the diagnostic information. The module may send the report to the network server.

In one design the module may send a start message to initiate a reporting session with the network server. The module may receive from the network server a reply message accepting the reporting session. The module may generate and send the data block during the reporting session.

The first identifier may comprise an MDN for the wireless device and the first paging message may be sent using a voice service option e.g. SO 3 to the wireless device. The second identifier may comprise an IP address for the wireless device and the second paging message may be sent to a socket for an application at the wireless device. The wireless device may receive the first paging message via a first radio network e.g. a 1 RTT network. The wireless device may receive the second paging message via the first radio network or a second radio network e.g. an EVDO network.

The first identifier may comprise an MDN for the wireless device and the first paging message may be sent using a voice service option to the wireless device. The second identifier may comprise an IP address for the wireless device and the second paging message may be sent to a socket for an application at the wireless device. The paging server a Radius server or another network entity may store an association of the IP address the socket and the MDN for the wireless device.

A controller processor may direct the operation at wireless device . Processor and or may implement modules to in . Processor and or may also perform or direct process in process in process in process in and or other processes for the techniques described herein. A memory may store program codes and data for wireless device . Modem processors and and memory may be implemented on an application specific integrated circuit ASIC .

At radio network transmitter receiver may support radio communication with wireless device and other wireless devices. A controller processor may perform various functions for communication with the wireless devices. A memory may store program codes and data for radio network . A communication Comm unit may support communication with other network entities e.g. network server . In general radio network may include any number of controllers processors memories transmitters receivers communication units etc.

At network server a controller processor may perform various functions to support communication services e.g. paging. Controller processor may perform or direct process in and or other processes for the techniques described herein. A memory may store program codes and data for network server . A communication unit may support communication with other network entities e.g. radio network PDSN etc. In general network server as well as other servers in may be implemented with any number of controllers processors memories communication units etc.

Those of skill in the art would understand that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Those of skill would further appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the disclosure herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present disclosure.

The various illustrative logical blocks modules and circuits described in connection with the disclosure herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The steps of a method or algorithm described in connection with the disclosure herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary designs the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a general purpose or special purpose computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code means in the form of instructions or data structures and that can be accessed by a general purpose or special purpose computer or a general purpose or special purpose processor. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

The previous description of the disclosure is provided to enable any person skilled in the art to make or use the disclosure. Various modifications to the disclosure will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other variations without departing from the spirit or scope of the disclosure. Thus the disclosure is not intended to be limited to the examples and designs described herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

