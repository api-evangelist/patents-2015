---

title: Method and systems for optimizing bandwidth utilization in a multi-participant full mesh peer-to-peer video session
abstract: An endpoint optimizes bandwidth by initiating a peer-to-peer conference with a plurality of remote devices, generating a first quality list comprising a first device of the plurality of remote devices from which to receive a first data stream at a first quality level, transmit a request to the first device to receive the first data stream at the first quality level, determining that a second device of the plurality of remote devices is not a member of the first quality list, and in response to determining that the second device of the plurality of remote devices is not a member of the first quality list, transmitting a request to the second device to receive a second data stream at a second quality level.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09380266&OS=09380266&RS=09380266
owner: Polycom, Inc.
number: 09380266
owner_city: San Jose
owner_country: US
publication_date: 20150331
---
This application claims the benefit of U.S. Provisional Application No. 61 973 055 filed Mar. 31 2014 entitled METHOD AND SYSTEMS FOR OPTIMIZING BANDWIDTH UTILIZATION IN A MULTI PARTICIPANT FULL MESH PEER TO PEER VIDEO SESSION which is expressly incorporated herein in its entirety by reference.

The present disclosure relates generally to videoconferencing systems and more particularly to a system for optimizing bandwidth utilization in a multi participant full mesh peer to peer video session.

A full mesh peer to peer video conference is achieved by setting up independent audio video real time transport protocol RTP streams between each participant of the conference such that each participant transmits one audio video and possibly content stream to each other participant and receives the same from each other participant as shown in . The main advantage of a full mesh conference by way of comparison to the more traditional centralized bridge conference method is the lower latency of media and the elimination of bottlenecks in the form of centralized media servers. Setting up individual streams with each participant also allows the video conferencing clients the capability to independently compose the video or to select which participant s it wants to send receive the video. The main disadvantage of the full mesh approach is that a potentially larger amount of bandwidth is required to set up video streams to send and received video from every participant in the conference. The full mesh approach limits the size of a given conference to around 3 4 participants depending on available bandwidth to clients.

The disclosure is directed to a method system and computer readable medium for optimizing bandwidth in a mesh system. The method includes initiating at a local mesh conferencing unit a peer to peer conference with a plurality of remote devices. The method also includes generating a first quality list comprising a first device of the plurality of remote devices from which to receive a first data stream at a first quality level. The method also includes transmitting a request to the first device to receive the first data stream at the first quality level. The method also includes determining that a second device of the plurality of remote devices is not a member of the first quality list. The method also includes in response to determining that the second device of the plurality of remote devices is not a member of the first quality list transmitting a request to the second device to receive a second data stream at a second quality level.

In embodiments according to the present invention participants in a full mesh peer to peer video session maintain one or more lists that each indicate a preferred quality level at which to receive data streams from other devices in the session. The local device generates one or more lists of other devices in the session indicating a preferred quality sends a request to the various remote devices to receive an associated data stream indicated by the list on which each remote device appears or a default remote device. Because data streams at a high quality level require more bandwidth than data streams at a lower quality level a local device can select a subset of the total number of devices in the full mesh peer to peer video session from which to receive data streams such as video streams at a high quality level. As a result the bandwidth for data transmitted to the local device is optimized. The quality lists are maintained at each participant device and the lists may vary between participant devices.

EP A is shown in greater detail and the contents of EP A may also be included in one or more of EP B and EP C . As depicted EP A includes various components connected across a bus . The various components include a processor which controls the operation of the various components of EP A . Processor can be a microprocessor microcontroller a field programmable gate array FPGA an application specific integrated circuit ASIC or a combination thereof. Processor can be coupled to a memory which can be volatile e.g. RAM or non volatile e.g. ROM FLASH hard disk drive etc. . In one or more embodiments memory includes bandwidth optimization module which optimizes bandwidth by throttling the quality of incoming data streams such as video streams using methods which will be discussed in further detail below.

Storage may also store all or portion of the software and data associated with EP A . In one or more embodiments storage includes non volatile e.g. ROM FLASH hard disk drive etc. and stores data related to the bandwidth optimization module . For example storage may include a list store . In one or more embodiments list store includes one or more quality lists which determine at what quality level EP A should request to receive data streams such as video data streams from remote devices such as EP B and EP C . For example if an endpoint is mobile device the associated participant may have only a Low Quality list of size 1. In one or more embodiments list store includes at least a high quality list which indicates endpoints from which EP A should receive data streams at a high quality. Said another way the high quality list indicates remove devices whose data stream quality should be prioritized when optimizing bandwidth. In one or more embodiments list store may include a single list which identifies devices from which to request data streams at a high quality. Alternatively list store may include numerous lists each associated with a different quality level.

The example EP A includes additional components such as a network interface which may allow EP A to communicably connect to remote devices such as EP B and EP C . That is in one or more embodiments EP A EP B and EP C are connected across a network such as a packet switched network a circuit switched network an IP network or any combination thereof. The multimedia communication over the network can be based on protocols such as but not limited to H.320 H.323 SIP HTTP HTML5 e.g. WebSockets REST SDP and may use media compression standards such as but not limited to H.263 H.264 VP8 G.711 G.719 and Opus. HTTP stands for Hypertext Transfer Protocol and HTML stands for Hypertext Markup Language.

EP A also includes various I O devices that allow a user to interact with EP A . The various I O devices may include for example one or more of a speaker a microphone a camera and a display that allow a user to send and receive data streams. Thus EP A may generate data streams to transmit to EP B and EP C by receiving audio or video signals through the various I O devices . EP A may also present received data signals to a user using the various I O devices . Further in one or more embodiments I O devices may also include devices that allow a user of EP A to manage the bandwidth optimization module and or quality lists in list store . For example I O devices may also include a keyboard and a mouse such that a user may interact with a user interface displayed on a display device to manage quality lists for the device.

In one or more embodiments the components of EP A optimize the bandwidth of data signals received from remote devices using bandwidth optimization module which may be stored in the form of software within EP A . Alternatively bandwidth optimization module may be accessed from a remote device across a network such as the Internet. That is the bandwidth optimization module and the list store may be stored locally in EP A in either storage or memory or may be accessed remotely such as through a website or other cloud storage or service but are accessible to EP A .

In one or more embodiments each of EP A EP B and EP C sends and receives individual streams from every other participant in the video session. In order to optimize the bandwidth at each endpoint the various endpoints may request to receive data streams from some remote devices at a high quality and other data streams from remote devices at a lower quality. For example video quality can be modified by either changing the bitrate the size or the frame rate of the video or a combination of all of these. In one or more embodiments video quality may be modified while audio quality or other data stream quality remains consistent.

The various quality levels are depicted in by a difference in line thickness between various endpoints. The stream quality is not expected to be symmetric i.e. the participant may be receiving high quality stream from a participant but may be sending a low quality stream to that participant. For example data stream indicates that EP A has requested to receive a data stream from EP C at a lower quality than data stream from EP B . In one or more embodiments EP B may be listed in a quality list in list store that indicates data streams from EP B should be requested at a high quality. Alternatively or additionally list store may also include a low quality list that indicates that data stream from EP C should be requested at a low quality thus requiring less bandwidth. As an example list store may include a list associated with a bandwidth of zero in a case where a user does not care to receive a video stream for example from one or more participants in a peer to peer conference. Because the quality lists are controlled individually by each endpoint the quality of a data stream received by a particular endpoint is not necessarily reciprocated.

Bandwidth optimization module may determine whether to add or remove a participant from a quality list based on a number of conditions before and during a peer to peer conference. Bandwidth optimization module may request a modified video quality when a participant is added or removed from a particular quality list using standard Session Description Protocol SDP offer answer negotiation by specifying the correct video quality details in the SDP. Some of these conditions may be based on characteristics of the remote participant such as identifying an active speaker at the endpoint or determining that the audio stream from a particular endpoint has been inactive for a period of time. As another example these conditions may be determined based on local characteristics such as a screen size available memory processor speed or available bandwidth. Further as another example the bandwidth optimization module may provide a user interface to allow a user of the local endpoint to manual select which quality list remote endpoints belong. In one or more embodiments the user interface may allow a user to manually assign remote devices to default lists or to assign remote devices to various quality lists on demand for example when the content of the conversation between users would be improved by a high quality video stream. Each participant can decide on the quality it is capable of sending and receiving and can signal that accordingly over SDP to its peer.

In one or more embodiments bandwidth optimization module may manage removing participants from a particular quality list based on a number of conditions. These conditions may include determining that a new participant has met conditions to be added to the list and the list already contains a maximum number of list members. The list may be associated with a maximum number of list members allowed based on a total available bandwidth for example. Each endpoint may have multiple quality lists each of different sizes based on different criteria for example one high quality list one medium quality list and one low quality list based on characteristics of the local device and other parameters such as available bandwidth. The number of members allowed in each list may vary. For example a particular device with a small bandwidth may only allow a single member in a high quality list and many members in a medium or low quality list whereas a device with a large bandwidth may allow multiple members in a high quality list. Thus when a new member satisfies conditions to be added to a particular quality list that is already at a maximum capacity a current member must be removed. In one or more embodiments the removed member is added to another quality list that is associated with a lower quality level. In one or more embodiments regardless of the modifications to the quality of stream managed by the bandwidth optimization module the various endpoints may continue to receive audio streams from each endpoint at a high quality level.

At the bandwidth optimization module generates a first quality list including a first device of the plurality of remote devices from which to receive a first data stream at a first quality level. In one or more embodiments generating a first quality list at includes determining that the first device is the first to join the peer to peer conference . Determining that the first device is the first to join the peer to peer conference may include detecting the first device as a first active device in the peer to peer conference. In response to determining that the first device is the first to join the peer to peer conference the flow diagram also includes adding the first device to the first quality list at . In one or more embodiments the first quality list includes a list of remote devices from which to request a high quality data stream such as a video stream.

The flow diagram continues at the bandwidth optimization module transmits a request to the first device to receive the first data stream at the first quality level. The bandwidth optimization module may request the stream quality using standard Session Description Protocol SDP offer answer negotiation by specifying the correct video quality details in the SDP. In one or more embodiments the first device may not be honored if the first device does not have enough bandwidth to fulfill that request.

The flow diagram also includes the bandwidth optimization module identifying that a device in the peer to peer conference is not a member of the first quality list at . In one or more embodiments identifying that a device is not a member of the first quality list may include determining that the device is a member of a second quality list or is not a member of any quality list managed by the local device.

At the bandwidth optimization module transmits a request to the device identified at to receive a data stream at a second quality level. In one or more embodiments bandwidth optimization module may determine that the identified device is included in a second quality list where the second quality list indicates remote devices from which the bandwidth optimization module should request a data stream at a second quality level. Alternatively the bandwidth optimization module may transmit a request to the identified device to receive a data stream at a quality level different than the quality level indicated by the first quality list such as a quality level lower than the first quality level. In one or more embodiments if the second quality level is not indicated by a second quality list the second quality level may be a predetermined default quality level that is lower than the first quality level. Further the bandwidth optimization module may add the identified device to a list associated with a bandwidth of zero such that the device does not receive a data stream such as a video stream from the device. Again the second device may not honor the request if the second device does not have enough bandwidth to fulfill that request.

At the bandwidth optimization module identifies a new device that satisfies conditions to be a member of the first quality list. In one or more embodiments the first quality list may be associated with certain characteristics. For example bandwidth optimization module may indicate that a device associated with a currently active audio stream should be included in a high quality list or the bandwidth optimization module has predefined that a certain device should always be included in a high quality list. The bandwidth optimization module may determine that the device satisfies the conditions to join the list. In another embodiment a user of the local mesh conferencing unit may manually indicate that a particular device should be added to a particular quality list for example through a user interface that allows a user of the local mesh conferencing unit to manage the members of one or more lists in list store .

At the bandwidth optimization module determines whether the first quality list includes the maximum number of members allowed in the list. If so then the flow diagram continues to and the bandwidth optimization module identifies a device member to remove from the list. In one or more embodiments the bandwidth optimization module may identify a member to remove from the list based on a variety of characteristics of the members of the list. For example the device member identified for removal may be identified based on bandwidth usage or because the identified member has been inactive for the longest period of time. As another example each member of the list may be listed in a particular order of preference and the least preferable member may be removed. Further as another example the bandwidth optimization module may prompt a user of the bandwidth optimization module to manually select a member to remove from the first quality list through the use of a user interface.

The flow diagram continues at and the identified member is removed from the first quality list. In one or more embodiments removing the identified member from the first quality list may also include adding the member to a second quality list associated with a quality level lower than the quality level associated with the first quality list. In another embodiment the bandwidth optimization module may simply remove the identified member from the first list. The flow diagram continues at and the bandwidth optimization module transmits a request to the identified member to receive a data stream at a second quality level. The second quality level may be a quality level associated with a second quality list if the device has been moved to the second quality list or the second quality level may be any quality level that is different than the quality level associated with the first quality list.

Following and additionally following in the case that the first quality list does not include a maximum number of members the flow diagram continues at and the bandwidth optimization module adds the new device to the first quality list. At the bandwidth optimization module transmits a request to the new device to receive a data stream at quality level associated with the first quality list. In one or more embodiments the first device may not be honored if the first device does not have enough bandwidth to fulfill that request.

In one or more embodiments the advantage in this disclosure is that there is no requirement for media server involvement and hence the elimination of associated latency. The lists criteria and decision making are distributed to each participant and without reliance on centralized servers. In doing so the bandwidth at each peer to peer conferencing unit is managed and optimized by the individual unit.

The above description is intended to be illustrative and not restrictive. It will be appreciated with the benefit of the present disclosure that features described above in accordance with any embodiment or aspect of the disclosed subject matter can be utilized either alone or in combination with any other described feature in any other embodiment or aspect of the disclosed subject matter. For example the above described embodiments may be used in combination with each other. With respect to the flow diagrams identified above it should be understood that any of the various actions could be performed in a different order or simultaneously with each other. Many other embodiments will be apparent to those of skill in the art upon reviewing the above description. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled. In the appended claims the terms including and in which are used as the plain English equivalents of the respective terms comprising and wherein. 

