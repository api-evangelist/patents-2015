---

title: System, method, and apparatus for using alternative numbers for routing voice calls and short messages in a communications network
abstract: A system, method and computer-readable medium for allowing the use of an alternative numbering plan for delivering short messages to mobile subscribers using the public mobile telephone network is provided. Users of an enterprise or other closed networks as well as users that are not part of a closed network may send short messages destined to members of an enterprise or closed network from their mobile or other devices associated with their subscription using an alternative enterprise directory number, such as the office number, instead of the mobile number, such that the alternative number will be presented at the destination device as the originating number. The recipient may respond to the message by addressing the response to the enterprise or closed network number, and the response may be delivered to the originator's mobile or other device associated with their subscription.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09596353&OS=09596353&RS=09596353
owner: Tango Networks, Inc.
number: 09596353
owner_city: Richardson
owner_country: US
publication_date: 20150126
---
This application claims priority of and is a continuation of U.S. Ser. No. 14 140 497 entitled SYSTEM METHOD AND APPARATUS FOR USING ALTERNATIVE NUMBERS FOR ROUTING VOICE CALLS AND SHORT MESSAGES IN A COMMUNICATIONS NETWORK filed on Dec. 25 2013 now issued U.S. Pat. No. 8 942 664 issued on Jan. 27 2015 which is a continuation of U.S. Ser. No. 13 846 991 entitled SYSTEM AND METHOD Ser. No. 13 846 991 entitled SYSTEM METHOD AND APPARATUS FOR USING ALTERNATIVE NUMBERS FOR ROUTING VOICE CALLS AND SHORT MESSAGES IN A COMMUNICATIONS NETWORK filed on Mar. 19 2013 now issued U.S. Pat. No. 8 634 800 issued on Jan. 21 2014 which is a continuation of U.S. Ser. No. 13 307 112 entitled SYSTEM METHOD AND APPARATUS FOR USING ALTERNATIVE NUMBERS FOR ROUTING VOICE CALLS AND SHORT MESSAGES IN A COMMUNICATIONS NETWORK filed on Nov. 30 2011 now issued U.S. Pat. No. 8 412 241 issued on Apr. 2 2013 which is a continuation of U.S. Ser. No. 11 750 756 entitled SYSTEM METHOD AND APPARATUS FOR USING ALTERNATIVE NUMBERS FOR ROUTING VOICE CALLS AND SHORT MESSAGES IN A COMMUNICATIONS NETWORK filed on May 18 2007 now issued U.S. Pat. No. 8 086 254 issued on Dec. 27 2011 incorporated herein by reference in their entirety.

The present disclosure relates to telecommunications and more particularly to telecommunications including voice calls and short message service enterprise servers wireless communications and the interoperability of communication technologies.

Corporations are increasingly relying on the use of cellular technology by their employees yet enterprises do not have adequate means to control cellular service in terms of costs Quality of Service and corporate monitoring. This is because cellular service has conventionally been controlled by wireless carrier networks and managed independently of and with no connectivity to the enterprise voice and data networks.

Enterprises today control their enterprise fixed voice and data networks by deployment of private branch exchanges PBXs . The enterprise may own and manage PBXs within each branch and between branch offices. The enterprise may also own and manage their own data networks and corporate local area network LAN wide area network WAN . Bulk voice minutes and data capacity may be purchased from land line carriers or from other providers that have purchased bulk minutes and data capacity from carriers. The purchased capacity may then be used to connect branch offices using public IP Network providers e.g. MCI Sprint L3 etc. for Data and Voice over IP VoIP . Heretofore no mechanisms have been provided to extend the enterprise fixed voice and data networks paradigm to cellular services.

Embodiments disclosed herein provide mechanisms for enabling the use of an alternative numbering plan for delivering voice calls and short messages to mobile subscribers using the public mobile telephone network. Using the methods described herein users of an enterprise or other closed networks as well as users that are not part of a closed network may send short messages destined to members of an enterprise or closed network from their mobile or other devices associated with their subscription using an alternative enterprise directory number. The alternative enterprise directory number may comprise an office number of a land line telephony device. In accordance with embodiments the alternative enterprise directory number rather than the mobile number will be presented at the destination device as the originating number. The recipient can respond to the message by addressing the response to the enterprise or closed network number and it will be delivered to the originator s mobile or other devices associated with their subscription. The disclosure additionally addresses alternative routing of voice calls directed to the enterprise or closed network numbers such as when the public landline networks is not available during an emergency as well as addressing potential routing conflicts between the public mobile and land line networks.

It is to be understood that the following disclosure provides many different embodiments or examples for implementing different features of various embodiments. Specific examples of components and arrangements are described below to simplify the present disclosure. These are of course merely examples and are not intended to be limiting. In addition the present disclosure may repeat reference numerals and or letters in the various examples. This repetition is for the purpose of simplicity and clarity and does not in itself dictate a relationship between the various embodiments and or configurations discussed.

With the ubiquity of cellular communication devices it is desirable to seamlessly integrate public wireless voice and data networks with enterprise networks. More particularly it is desirable to provide enterprise cellular solutions that may operate in conjunction with public network infrastructure. While enterprise provisioned cellular services may provide enhanced personnel communications and connectivity the variety of user communication devices e.g. land line phones cellular phones personal digital assistants and the like may introduce challenges for providing timely delivery of communication services. For example enterprise personnel may be assigned numerous communication devices such as a land line phone for use when the employee is at a work station or office and a cellular phone or a personal digital assistant when the employee is away from the office either at other locations in the enterprise or outside the enterprise premises. Because the employee may be equipped with communication devices best suited for use when the employee is at a particular location as well as a mobile communication device for use when the employee is on the move persons attempting to contact the employee may not be aware of the best means for communication with the employee at a particular time.

In accordance with the present disclosure the enterprise is able to equally extend the enterprise fixed voice and data networks paradigm to cellular services by connecting the public wireless voice and data network with the enterprise. A gateway server inter connects the carrier s Mobile Switching Center MSC that manages cellular voice traffic as well as the carrier s Serving GPRS Support Node SGSN that manages cellular data traffic with the enterprise s voice and data network. In accordance with a particular embodiment a one number service feature may be provided that allows the enterprise subscribers or personnel the use of multiple communication devices with a single enterprise directory number. An enterprise member may be assigned a land line phone and a cellular telephone and may be only aware of the enterprise directory number of the land line phone. Likewise colleagues or personal contacts may only be provided with the enterprise member s land line phone number yet may advantageously contact the enterprise member on both the enterprise member s land line phone and cellular telephone using the land line phone number assigned to the enterprise member. More particularly an enterprise member may originate short message service SMS messages from the mobile terminal assigned to the member. The MSISDN number of the originating mobile terminal may be replaced with the land line phone number assigned to the member when the SMS message is in transit. Accordingly a destination user that receives the SMS message will be presented with the land line number of the originating member. In a similar manner a contact of the enterprise member may originate an SMS message to the member using the member s land line enterprise directory number as the destination number of the SMS message. The enterprise land line number entered as the destination number may be replaced with the land line phone number assigned to the member when the SMS message is in transit. Accordingly the enterprise member may then receive the SMS message on the member s mobile terminal although the SMS message was originally addressed to the land line phone number.

Each of SS and BSS contain a number of functional units well understood by those skilled in the art and a detailed explanation of the various components is unnecessary. Nevertheless a cursory review of various components is provided. SS contains a Mobile services Switching Center MSC a Home Location Register HLR and a Visitor Location Register VLR . MSCs carry out switching functions and manage the communications between mobile phones and the Public Switched Telephone Network PSTN . HLR comprises the central database that contains details of each mobile phone subscriber that is authorized to use the cellular core network. VLR comprises a database which stores information about all the mobiles terminals that are currently serviced by the associated MSC MSC in the present example . VLR stores various information regarding the mobile terminals such as the current location area identity that specifies a particular base station controller BSC that the mobile station is currently serviced by.

Various other sub systems or functional modules may and typically are included in SS such as an Authentication Center an Equipment Identity Register or various other functions. A serving general packet radio service GPRS support node SGSN may be included in cellular network system to facilitate provisioning of packet services to and from mobile terminals in network system . GPRS provides mobility management session management and transport for Internet Protocol packet services in GSM cellular packet networks.

As is understood various GPRS infrastructure may be included in network system to provide packet services to mobile terminals and only SGSN of the GPRS core network is depicted to simplify the discussion of embodiments disclosed herein. In general a gateway GPRS support node may interface the GPRS backbone with an external packet network such as the Internet.

SGSN may interface with various subsystem of network system . For example SGSN may have a Gs interface with MSC and VLR that facilitates paging and station availability notification when performing data transfers. SGSN may additionally have a Gr interface with HLR through which messaging may be performed for example over the Mobile Application Part protocol. SGSN may additionally have a Gb interface with packet control unit PCU not shown of BSS that facilitates connection of BSS with SGSN .

Network system may also include a signaling system such as a SS7 network . SS7 network provides a set of telephony signaling protocols which are used to set up the vast majority of the world s PSTN telephone calls. SS7 network is also used in cellular networks such as GSM and UMTS for circuit switched voice and packet switched data applications. As is understood SS7 network includes various signaling nodes such as any number of service control points SCPs signal transfer points STPs and service switching points SSPs .

BSS contains a Base Station Controller BSC that may be in communication with and in control of a plurality of Base Transceiver Stations BTSs . Each individual BTS under the control of a given BSC may define a radio cell operating on a set of radio channels thereby providing service to a Mobile Terminal MT .

Network system may also include a short message service center SMSC adapted to deliver short message service SMS messages to mobile terminals. When an SMS message is sent to a user the SMS message is stored in SMSC which delivers it to the destination mobile terminal when the destination mobile terminal is available. As is known the SMS message may be delivered via a control channel e.g. a cell broadcast control channel or bearer channel.

Network may include an enterprise network such as a switched Ethernet that interconnects various network nodes via various network infrastructure such as hubs and switches. In the illustrative example enterprise network includes various client nodes such as desktop clients and land line Internet Protocol IP telephones and an IP private branch exchange PBX which carries calls over IP e.g. via voice over IP VoIP . Enterprise network may interface with the PSTN via a router disposed at the enterprise.

Likewise enterprise network may interface with cellular network system via routers and . It is understood that enterprise network may and typically does include hundreds or thousands of client devices and networking nodes and the architecture depicted in is greatly simplified to facilitate a discussion of embodiments disclosed herein.

In accordance with an embodiment an enterprise gateway server may be deployed in enterprise network that is adapted to inter connect the mobile network s MSC that manages cellular voice traffic as well as the SGSN that manages cellular data traffic. Enterprise gateway server may include or interface with a softswitch media gateway . From an IT organization perspective gateway server appears as an extension to PBX . To cellular network system gateway server appears as a standard in network endpoint for delivering calls. To PBX gateway server appears as a set of standard PBX endpoints e.g. deskphones or IP clients . Gateway server mediates between the two disparate sets of network protocols and state machines.

Gateway server may include the network functions for both voice gateway MSC and data gateway GPRS Support Node or Home Agent VoIP capability for interconnecting mobile network with enterprise network thereby eliminating PSTN interconnect charges a billing gateway and a next generation Network Services gateway that enables third party value added services for the enterprise such as mobile phone activation de activation corporate directory integration based on IMS IP Multimedia Subsystem or other services. Gateway server may also include the element management subsystem EMS and a service management subsystem for the operational support system OSS .

In the example depicted in call control may be managed by the enterprise in which the gateway server is located. In this implementation the gateway server interfaces with cellular network system nodes supporting SS7 and SIP or other messaging with the carrier network and the cellular network must be able to address gateway server in order to send and receive messages.

In another embodiment call control may be split or partitioned between the carrier and enterprise networks as depicted in the network configuration of . In this implementation an enterprise gateway server GS E interacts with a carrier gateway server GS C deployed in the carrier network. The connection between GS E and GS C may be made over SIP or other protocols. This configuration may enable cellular network system to have a central point of control for interacting with multiple enterprises and may not require the use of SS7 messaging to the enterprise. Rather it is possible to have a secure IP connection supporting SIP. This is also useful for offering a Centrex solution for interconnecting with a carrier hosted PBX or for interconnecting a carrier hosted gateway server with enterprise hosted PBX systems. GS C may support an SS7 point code multiplexer in which only one or two point codes are needed to address all enterprises since GS C can identify for which enterprise the message is intended. In the illustrative example GS C has a point code Point Code and softswitch media gateway has a point code Point Code . GS E may be adapted to provision GS C automatically over the IP interface to manage subscribers e.g. to add new pilot directory numbers DNs for new subscribers. In this case originating and terminating triggers used in cellular network system for routing calls to GS C can add identifying information of the specific enterprise in the triggering messages. Alternatively GS C may identify the enterprise based on the calling party information.

In the illustrative examples provided herein Party A and Party B are both members of enterprise network . Party A is assigned a mobile terminal having an MSISDN of 1 972 444 1001 and Party B is assigned a mobile terminal having an MSISDN of 1 972 444 1002. Party A is assigned enterprise land line telephony device having an enterprise directory number of 1 972 555 2001 and Party B is assigned enterprise land line telephony device having an enterprise directory number of 1 972 555 2002. Additionally Party A and Party B are assigned a respective desktop client and . In some examples reference is made to another mobile terminal user Party C that is not a member of enterprise network . In the illustrative example Party C is assigned a mobile terminal having an MSISDN of 1 214 777 7777.

GS E may include or interface with an Enterprise member database that stores records or profiles that define services for members of enterprise network . Enterprise member database may facilitate one number servicing implemented in accordance with embodiments by associating a land line telephony device and a mobile terminal commonly assigned to a particular enterprise member. For example enterprise member database may include a record allocated for Party A that is a member of enterprise network. In the illustrative example record includes a Land line field that stores an enterprise directory number of a land line telephony device assigned to Party A and an MSISDN field that stores a directory number of mobile terminal assigned to Party A. In this manner the land line number and the directory number MSISDN of the mobile terminal of the user Party A are associated with one another. In a similar manner Party B that is a member of enterprise network has a record that associates the enterprise directory number of an enterprise telephony device assigned to Party B with the mobile number of mobile terminal assigned to Party B.

In general exemplary processing routines described herein are provided with reference to a split call control configuration featuring both enterprise and carrier gateway servers. However embodiments disclosed herein are not limited to such a configuration and may be similarly implemented in a system deploying a gateway server in the enterprise as depicted in as will be apparent to those skilled in the art.

The gateway server enables the enterprise to manage and control its cellular service in addition to providing a significant overall cost reduction for telecommunications. Moreover the gateway server includes an overall platform and architecture for improved and integrated wireless enterprise solutions and facilitates convergence between the enterprise s cellular and Voice over IP Internet Protocol infrastructure.

The gateway server leverages the benefits of Voice over IP with cellular to extend the cellular network into the enterprise. The gateway server addresses both cellular voice and data and is a networking solution that works together with the enterprise s existing PBX performing mobile call control functions routing and services .

Additionally the gateway server bridges the enterprise PBX and public cellular environments to enable telecom applications for the cellular user such as short code dialing e.g. 4 and 5 digit dialing one number service one phone number for the land line and cellular phone and single voice mail box that services both a user s land line and cellular telephone. The gateway server enables the enterprise to leverage existing telecom assets for cellular use e.g. least cost routing over a corporation s VoIP or leased lines network for discounted long distance use of existing PBX voicemail system .

The gateway server is an application platform for deploying mobile IT applications. Either the enterprise IT department or a Systems Integrator may develop and integrate specific applications to interface with the corporation s cellular devices. For example the enterprise can choose to replace the desk phone of an office employee with an inexpensive mobile phone. For this employee when they badge out of the building at the end of the day the enterprise security budging system can be used to inform the gateway server to de activate the mobile phone until the employee returns to the office and badges in the next morning. Alternatively the gateway server can track and record the calls made outside the office hours and enable the enterprise to charge them to the business to the employee or record them as a corporate benefit.

The gateway server may be a software only solution that can execute on standard inexpensive Linux platforms. The gateway server may comprise a mobile core network for call handling and routing and services network voice and data services such as PBX based short code dialing voicemail conference calling VPN etc. components. It may be appropriately scaled down to the smaller subscriber base of a decentralized large enterprise in the order of hundreds to several thousand subscribers compared with carrier systems that manage many millions of centralized subscribers. The gateway server is designed to be managed and maintained by the same IT group that currently manages the enterprise s PBX system.

In accordance with an embodiment one number service provides for call termination with multiple terminals e.g. a land line phone and a cellular telephone. An enterprise employee may be assigned a land line phone and a cellular telephone and may use a single destination number for either device for receiving and originating telephone calls and data service. Accordingly users attempting to contact an enterprise employee need only have a single phone number assigned to the employee for making a phone call to either the employee s land line phone or cellular telephone. In accordance with a particular embodiment short message service SMS messages may be originated by an enterprise employee from a cellular telephone assigned thereto and the SMS message may ultimately be delivered to a destination device with the land line enterprise directory number associated with the originating employee included in the SMS as the origination number. Thus an enterprise employee originating a SMS message from a cellular phone may have the SMS message delivered to the target device whereupon the SMS message is displayed as originating from the enterprise employee land line phone number. In a similar manner a person originating an SMS may enter the land line number of an enterprise employee and the MSISDN assigned to the cell phone of the enterprise employee may be substituted for the land line number by the gateway server either the GS E or GS C and subsequently delivered to the enterprise employee s cell phone. In this manner a user may be only aware of the employee s land line enterprise directory number but may advantageously deliver SMS messages to the enterprise employee s cell phone as will be described more fully hereinbelow.

HLR record comprises a plurality of fields which each store information regarding a particular mobile terminal assigned to a subscriber of cellular network . Fields have respective labels of IMSI MSISDN Voice SMS. GPRS Settings VLR ID SGSN ID SMS CSI SMSC Number and MSC ID . A particular field e.g. IMSI field and MSISDN field may be designated as a key field and each respective data element is unique within key fields .

In the illustrative example IMSI field maintains an International Mobile Subscriber Identity IMSI stored in the subscriber identity module SIM of the mobile terminal for which HLR record is allocated. The IMSI comprises a unique number associated with a particular mobile terminal. The IMSI is typically a 15 digit number having the first 3 digits that specify a mobile country code followed by a 3 digit mobile network code associated with cellular network to which the mobile terminal is registered. The remaining digits may comprise a mobile subscriber identification number MSIN assigned to the customer Party A in the present example associated with the mobile terminal. In the illustrative example the IMSI has a value of 3101501234567890 assigned thereto.

A mobile subscriber ISDN MSISDN field may store the MSISDN or directory number assigned to the mobile terminal for which record is allocated. In the illustrative example the MSISDN field specifies a MSISDN number of 19724441001 that is the directory number assigned to mobile terminal . Each of IMSI field and MSISDN field may be used as primary keys for accessing HLR record .

HLR record may record various subscription services for the mobile terminal. In the illustrative example various service fields may have values that indicate whether the subscriber for which the HLR record is allocated is authorized to use a particular service. In the present example Voice field has a value of true T that indicates that associated subscriber is authorized for voice service and SMS field has a value of true that indicates the mobile terminal is authorized to originate and receive SMS messages. Various other service fields may and typically are included in HLR that each specify any one or more of various subscription services such as call waiting call forwarding and the like.

A GPRS Settings field may specify whether the mobile terminal has a GPRS subscription and settings thereof. For instance GPRS Settings field may have a false setting or have another indicator that specifies the mobile terminal associated with HLR record does not have a valid GPRS subscription. In the event that the mobile terminal has a GPRS subscription GPRS Settings field may specify a service class. In the illustrative example GPRS Settings field specifies that the associated mobile terminal has a GPRS subscription with a service setting of Class 10 .

VLR ID field may specify the current VLR servicing the mobile terminal associated with HLR record . In the present example VLR ID field indicates the mobile terminal is being serviced by a VLR having an ID of VLR. In a similar manner SGSN ID field may specify the current SGSN servicing the mobile terminal associated with HLR record . In the present example SGSN ID field indicates the mobile terminal is being serviced by an SGSN having an ID of SGSN.

An Short Message Service Customized Applications for Mobile networks Enhanced Logic CAMEL Subscription Information SMS CSI field may contain trigger information required to invoke CAMEL Service Logic for Mobile Originating Short Message Submissions. In the illustrative example the trigger information maintained in SMS CSI field is diagrammatically represented as trigger info . A short message service center SMSC Number field may include an identifier e.g. an SS7 point code assigned to an SMSC that is to service the associated subscriber. In the illustrative example SMSC Number field has a value of Point Codeassigned to SMSC depicted in . An MSC ID field may include an identifier e.g. a point code of the MSC currently or most recently servicing the mobile terminal associated with HLR record . In the present example the point code of the MSC specified by MSC ID field is represented as Point Code .

To facilitate provisioning of one number service the HLR may additionally include a dummy profile assigned to a land line telephony device to facilitate one number voice and data services. is a diagrammatic representation of an exemplary HLR record that may be associated with a particular enterprise user that facilitates one number voice and data services. HLR dummy record is assigned to a land line telephony device assigned to an enterprise subscriber and is distinct from an HLR record assigned to the subscriber s mobile terminal. In the illustrative example HLR record is allocated for Party A that is a member of the enterprise network and is associated with Party A s enterprise land line telephony device depicted in . HLR record may include an IMSI field that may be nulled or assigned an identifier that indicates that no IMSI is associated with the telephony device for which HLR record is allocated. An MSISDN field may have a land line number assigned thereto for associating dummy HLR record with a land line telephony device. In the present example MSISDN field has a value of 19725552001 that is the enterprise directory number of the land line device assigned to Party A in . HLR record may include various service fields that indicate validity invalidity or other subscription characteristics of various services. In the present dummy HLR record includes a Voice field having a value false F that indicates voice services are not to be prescribed via the cellular network for the telephony device associated with dummy record . An SMS field on the other hand indicates SMS services are authorized for the telephony device for which dummy HLR record is allocated. Thus in the present example HLR record indicates SMS services are authorized for the telephony device specified by MSISDN field . Various fields may be nulled. An MSC ID field may be assigned a value to redirect services associated with HLR dummy record to an enterprise entity in accordance with an embodiment. In the present example MSC ID field is assigned Point Code the SS7 point code of GS C such that signaling normally directed to a MSC is instead directed to the GS C that services the enterprise network of the land line telephony device for which dummy HLR record is allocated. In accordance with embodiments SMS messages directed to the telephony device specified by MSISDN field are ultimately routed to a cellular telephony device associated with HLR record as will be described more fully hereinbelow.

In accordance with embodiments the phone numbers specified by Sender Num field may be changed in transit of SMS message to facilitate one number servicing of multiple telephony devices. For instance for a subscriber that is to be provided with one number servicing the subscriber may originate an SMS message from a mobile terminal assigned to the subscriber and the sender number of the Sender Num field may be replaced with a land line enterprise directory number of a land line telephony device assigned to the user prior to delivery of the SMS message to the destination device. In this manner the user receiving the SMS message is presented with the land line phone number of the originator in the SMS message. In a similar manner when an SMS message is directed towards a user that is provided with one number servicing an enterprise directory number of a land line telephone assigned to the user may be entered by an originating party as the destination number to which the SMS message is directed. The destination number comprising a land line phone number may be changed in transit of the SMS message to a MSISDN number assigned to the destination user such that the SMS message is routed to the mobile terminal of the destination user. In this manner a person originating an SMS message to a destination user that is provided with one number servicing need only be aware of the destination user s land line enterprise directory number.

In the following example assume Party A and Party B are mobile subscribers that are members of an Enterprise hosting enterprise network and that are assigned respective mobile terminals and . Party A s mobile number is 1 972 444 1001 and Party A s office number for land line telephony device deployed in enterprise network is 1 972 555 2001. Further assume Party A s short code or office extension is 2001. Party B s mobile terminal number is 1 972 444 1002 Party B s office number for land line telephony device deployed in enterprise network is 1 972 555 2002 and Party B s short code is 2002.

In a first example Party A desires to send a SMS message to Party B. Party A can address the SMS message to either Party B s mobile number office number or short code. For purposes of illustration assume Party A enters Party B s office number as the SMS destination number. Accordingly an SMS message is generated at mobile terminal as generally depicted in . SMS message may include a Sender Num field assigned the MSISDN of mobile terminal a Destination Num field assigned the enterprise directory number of Party B s land line telephony device and the SMS message content illustratively designated Message in a Message field as depicted in . When Party B receives the SMS message the originator s address will display as Party A s office number or short code in accordance with one number servicing implemented in accordance with an embodiment.

SMS message as depicted in is entered at mobile terminal and is sent from Party A s mobile terminal to a serving MSC step . MSC includes or interfaces with a VLR that has previously downloaded Party A s subscriber profile from the HLR to which Party A s mobile terminal is registered as is understood. As the network supports CAMEL Phase 3 the Short Message Service CAMEL Subscription Information SMS CSI is transferred to VLR . The SMS CSI contains trigger information which is required to invoke CAMEL Service Logic for Mobile Originating Short Message submissions. In this case MSC will trigger to GS C which will act as the SMSC step .

After the trigger is launched to the GS C GS C identifies the enterprise to which Party A belongs and subsequently sends SMS message to corresponding GS E step . GS E verifies if the destination address of SMS message is a member of Enterprise X by interrogating an Enterprise Member profile database . Enterprise Member profile database may include records or profiles for respective enterprise members that associate a land line number of an enterprise telephony device assigned to a particular enterprise member with a MSISDN number of a mobile terminal assigned to the enterprise member as described with reference to . In the present example Party A has entered Party B s land line number as the destination number of SMS message . Interrogation of profile database with Party B s land line number results in selection of a record allocated for Party B that indicates the destination number is Party B s land line and provides the MSISDN of Party B s mobile terminal to GS E . GS E may then modify the destination address of SMS message to be the corresponding mobile number of Party B as depicted by SMS message in having a Destination Num field with the MSISDN of mobile terminal . This enables the message to be routed through the mobile network to the destination party.

In addition the GS E retrieves the member record assigned to Party A by interrogating Enterprise Member profile database with Party A s mobile terminal number retrieved from Sender Num field of SMS message . Party A s member record includes Party A s land line number in association with Party A s mobile terminal MSISDN or directory number. Accordingly GS E may modify the source address to be Party A s office number or short code in place of Party A s mobile number such that the recipient will receive the SMS with Party A s office number as the originator as depicted by Sender Num field of SMS message in .

In accordance with another embodiment GS E may upon determining the destination subscriber is a member of Enterprise X invoke an enterprise messaging service such as a corporate Instant Messaging service for delivery of SMS message . For example the member record for Party B retrieved from member database may indicate that SMS messages are to be additionally delivered to Party B via an Instant Messaging service. Assuming the SMS message is to be additionally delivered to Party B via an Instant Messaging service GS E may convert the SMS message to an Instant Message and send the IM to an Enterprise IM server step . The IM may then be forwarded to Party B e.g. to Party B s enterprise desktop step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

Delivery of SMS message to Party B s mobile terminal may continue with GS E responding to GS C step which in turn responds to the MSC trigger with the instructions to route the message to SMSC for delivery step . MSC in turn forwards the SMS message to SMSC for delivery to Party B step . SMSC then queries HLR to determine the serving MSC of the recipient based on the recipient s mobile number step . HLR responds to SMSC with the serving MSC of the recipient step . SMSC will then deliver the message with the modifications made by GS E to MSC step which delivers the SMS to mobile terminal via an appropriate base station sub system step . The source address will be Party A s office number or short code and the destination address will be Party B s mobile number as depicted in .

As in the example depicted in Party A desires to send an SMS message to Party B and for purposes of illustration assume Party A enters Party B s office number as the SMS destination number. Accordingly an SMS message is generated at mobile terminal as generally depicted in . SMS message may include a Sender Num field assigned the MSISDN of mobile terminal a Destination Num field assigned the enterprise directory number of Party B s land line telephony device and the SMS message content illustratively designated Message in a Message field as depicted in .

In the present example however assume the network does not support CAMEL Phase 3 triggers. Instead a Transparent Router is placed in front of SMSC and monitors the link for SMS messages originated by subscribers of the enterprise service. Subscriber A may originate SMS message addressed to Subscriber B step that is transmitted to serving MSC which attempts to forward the SMS to SMSC step . However transparent router detects the SMS message and evaluates whether the originator subscribes to the enterprise service. If the originator is not subscribed to the enterprise service transparent router may allow the message to pass through unmodified. Assuming Subscriber A is subscribed to the enterprise service transparent router intercepts the message and re routes it to GS C step which forward SMS message to GS E step . GS E verifies if the destination address of the SMS message is a member of Enterprise X by interrogating an Enterprise Member profile database . In the present example Party B the destination party is a member of Enterprise X. Assume Party A entered Party B s land line number as the destination number of the SMS message. Interrogation of profile database with Party B s land line number results in selection of record that indicates the destination number is Party B s land line and provides the MSISDN of Party B s mobile terminal to GS E . GS E may then modify the destination address of the SMS message to be the corresponding mobile number of Party B as depicted by Destination Num field of SMS message in . This enables the message to be routed through the mobile network to the destination party.

In addition GS E retrieves member record assigned to Party A which includes Party A s land line number. Accordingly GS E may modify the source address to be Party A s office number or short code in place of Party A s mobile number such that the recipient will receive the SMS with Party A s office number as the originator as depicted by Sender Num field in .

In accordance with another embodiment GS E may upon determining the destination subscriber is a member of Enterprise X invoke an enterprise messaging service such as a corporate Instant Messaging service for delivery of the SMS message. For example member record for Party B retrieved from member database may indicate that SMS messages are to be additionally delivered to Party B via an Instant Messaging service. Assuming the SMS message is to be additionally delivered to Party B via an Instant Messaging service GS E may convert the SMS to an Instant Message and send the IM to an Enterprise IM server step . The IM may then be forwarded to Party B e.g. to Party B s enterprise desktop step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

Delivery of the SMS message to Party B s mobile terminal may continue with GS E responding to GS C by returning the SMS message to be re injected to GS C step with the modifications performed by GS E as depicted in which forwards the SMS message to transparent router step . Transparent router in turn forwards the SMS message to SMSC step . SMSC then queries HLR to determine the serving MSC of the recipient based on the recipient s mobile number step . HLR responds to SMSC with the serving MSC of the recipient step . SMSC will then deliver the message with the modifications made by GS E to MSC step which delivers the SMS to mobile terminal via an appropriate base station sub system step . The source address will be Party A s office number or short code and the destination address will be Party B s mobile number as depicted in .

As in the example depicted in Party A desires to send a SMS message to Party B and for purposes of illustration assume Party A enters Party B s office number as the SMS destination number. Accordingly an SMS message is generated at mobile terminal as generally depicted in . SMS message may include a Sender Num field assigned the MSISDN of mobile terminal a Destination Num field assigned the enterprise directory number of Party B s land line telephony device and the SMS message content illustratively designated Message in a Message field as depicted in .

In the present example however a Transparent Router is used only to intercept and re route short messages originated by subscribers of the enterprise service but is not used to re inject the message once processed by the GS E.

Subscriber A may originate SMS message addressed to Subscriber B step that is transmitted to serving MSC which attempts to forward the SMS to SMSC step . However transparent router detects SMS message and evaluates whether the originator subscribes to the enterprise service. If the originator is not subscribed to the enterprise service transparent router may allow the message to pass through unmodified. Assuming Subscriber A is subscribed to the enterprise service transparent router intercepts the message and re routes it to GS C step which forwards SMS message to GS E step . GS E verifies the destination address of SMS message is a member of Enterprise X by interrogating Enterprise Member profile database . In the present example Party B the destination party is a member of Enterprise X. Assume Party A entered Party B s land line number as the destination number of SMS message . Interrogation of profile database results in selection of record that indicates the destination number is Party B s land line number and provides the MSISDN of Party B s mobile terminal to GS E . GS E may then modify the destination address of the SMS message to be the corresponding mobile number of Party B as depicted by Destination Num field in . This enables the message to be routed through the mobile network to the destination party.

In addition GS E retrieves member record assigned to Party A which includes Party A s land line number. Accordingly GS E may modify the source address to be Party A s office number or short code in place of Party A s mobile number such that the recipient will receive the SMS message with Party A s office number as the originator as depicted by the Sender Num field in .

In accordance with another embodiment GS E may upon determining the destination subscriber is a member of Enterprise X invoke an enterprise message service such as a corporate Instant Messaging service for delivery of the SMS message. For example member record for Party B retrieved from member database may indicate that SMS messages are to be additionally delivered to Party B via an Instant Messaging service. Assuming the SMS message is to be additionally delivered to Party B via an Instant Messaging service GS E may convert the SMS to an Instant Message and send the IM to an Enterprise IM server step . The IM may then be forwarded to Party B e.g. to Party B s enterprise desktop step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

Delivery of SMS message to Party B s mobile terminal may continue with GS E responding to GS C by returning SMS message to be re injected to GS C step with the modifications performed by GS E as depicted by SMS message in . GS C may then forward the SMS message to SMSC step rather than the transparent router as performed in the configuration depicted in with the modified information. In this instance GS C is adapted to handle any response from SMSC resulting from transmission of the SMS message thereto. SMSC then queries HLR to determine the serving MSC of the recipient based on the recipient s mobile number step . HLR responds to SMSC with the serving MSC of the recipient step . SMSC will then deliver the message with the modifications made by GS E to MSC step which delivers the SMS to mobile terminal via an appropriate base station sub system step . The source address will be Party A s office number or short code and the destination address will be Party B s mobile number as depicted in .

In the following example assume Party C and Party A are mobile subscribers Party C is not a member of the Enterprise hosting enterprise network and that Party A is a member of the Enterprise hosting enterprise network . Further assume Party C and Party A are assigned respective mobile terminals and . Party A s mobile number is 1 972 444 1001 Party A s office number is 1 972 555 2001 and Party A s short code is 2001. Party C s mobile number is 1 214 777 7777.

The non enterprise subscriber may originate an SMS to the office number of the enterprise user at mobile terminal . Accordingly an SMS message is generated at mobile terminal as generally depicted in . SMS message may include a Sender Num field assigned the MSISDN of mobile terminal a Destination Num field assigned the enterprise directory number of Party A s land line telephony device and the SMS message content illustratively designated Message in a Message field as depicted in . The SMS message is sent from mobile terminal to servicing MSC step . MSC includes or interfaces with a VLR that has previously downloaded Party C s subscriber profile from the HLR to which Party C s mobile terminal is registered as is understood. In this case MSC identifies SMSC as the servicing SMSC and forwards the SMS message thereto step . 

SMSC may then query HLR based on the office number entered by Party C as the destination to identify the serving MSC step . Prior to this HLR will have been provisioned with a standalone or dummy subscriber profile for the enterprise user s office number similar to dummy HLR record depicted and described with reference to . Dummy record will indicate Party A associated with the destination office number has SMS service. In addition prior to these events GS C will register with HLR as the serving MSC of the enterprise subscriber in the HLR dummy profile associated with the office number. For instance assume dummy HLR record depicted in is allocated for Subscriber A s land line office telephony device . In this instance GS C may be registered as the serving MSC of the land line telephony device assigned to Party A by assigning the point code illustratively designated Point Code of GS C to the MSC ID field of dummy HLR record . The HLR profile associated with the enterprise subscriber s office number will be supported throughout mobile networks such that any MSC can query the HLR for the profile. Note that this HLR profile is entirely separate from the existing HLR profile associated with the enterprise subscriber s mobile number i.e. HLR record . The handling of voice calls to the office number from mobile networks will be described in a subsequent section.

HLR responds with the serving MSC being the GS C which had previously registered as the serving MSC step . SMSC may then send the SMS message to GS C accordingly step . GS C identifies the enterprise to which the destination number Subscriber A s land line office number belongs and routes SMS message to corresponding GS E step . GS E may modify the destination number to be the mobile number of the enterprise user that is to the mobile number of mobile terminal in order to enable the message to be routed through the mobile network as depicted by Destination Num field in .

In accordance with another embodiment GS E upon determining the destination subscriber is a member of Enterprise X may invoke an enterprise message service such as a corporate Instant Messaging service for delivery of the SMS message. For example the member record for Party A retrieved from member database may indicate that SMS messages are to be additionally delivered to Party A via an Instant Messaging service. Assuming the SMS message is to be additionally delivered to Party A via an Instant Messaging service GS E may convert the SMS to an Instant Message and send the IM to an Enterprise IM server step . The IM may then be forwarded to Party A e.g. to Party A s enterprise desktop step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

Delivery of the SMS message to Party A s mobile terminal may continue by GS E responding to GS C with the SMS message having the modified destination information step . GS C may then originate an SMS message to SMSC with the modified destination information as depicted in step .

SMSC may then query HLR based on the destination mobile number step and HLR may respond with the serving MSC of the enterprise user s mobile terminal step . SMSC may then deliver the SMS message to MSC and to the destination mobile terminal step .

In the following example assume Party C is a mobile subscriber and that Party A is a member of the Enterprise hosting enterprise network . Further assume Party C is assigned mobile terminal and Party A is assigned office land line telephony device . In this instance assume Party A has a dummy HLR record similar to dummy HLR record allocated in the HLR for land line telephony device to facilitate delivery to Party A s mobile terminal of SMS messages submitted with the enterprise directory number of device as the destination number as described above.

A call may be originated by Party C at mobile terminal to the office number of device assigned to Party A step . As noted above Party A has a profile in HLR for the office number of device for the purpose of enabling SMS messages submitted with the office number as the destination number.

MSC on receipt of the call setup request queries HLR for a routing number to the serving MSC in order to deliver the call to the recipient step . HLR queries GS C that has previously registered as the serving MSC for the office number step . GS C is responsible for maintaining the periodic registrations such that the HLR profile continuously points to GS C as the serving MSC.

GS C identifies the enterprise network associated with the office number destination and sends the message to the corresponding GS E step . GS E sets the routing number to be returned to the originating MSC to be the office number on the public network. GS E may also communicate with another enterprise messaging service step to convey an incoming call to a user terminal step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

GS E may then respond to GS C step which in turn responds to HLR step . HLR then may respond to serving MSC with the routing number to the serving MSC set to the office number on the public land line network step .

With this information originating MSC routes the call to the routing number. The call is routed out to the public network to the office number which could be in the enterprise PBX step . In this case enterprise PBX may route the call to the office number of telephony device assigned to the subscriber step .

Returning again to step in the event that the destination number is evaluated as being assigned to an enterprise member an evaluation may then be made to determine if the destination number is a land line number assigned to the destination party step . In the event that the destination number is evaluated as comprising a land line number the processing routine may proceed to evaluate the sender number according to step . In the event that the destination number is evaluated as a land line number of a telephony device assigned to the destination party the destination number of the SMS message may be replaced with the mobile or MSISDN number of the mobile terminal assigned to the destination party step . The SMS message processing routine may then continue to step to evaluate the sender number of the SMS message.

In the event that the sender number is not determined to be assigned to an enterprise member at step the SMS message processing routine may proceed to continue with routing of the SMS message step . Alternatively if the sender number is determined to be assigned to an enterprise member at step the SMS processing routine may then evaluate whether the sender number is a mobile number of the mobile terminal assigned to the sending party step . In the event that the sender number is not evaluated as comprising a mobile number the SMS message may be routed according to step . If however the sender number is evaluated as comprising a mobile number of a mobile terminal assigned to the sending party the sender number may be replaced with the land line number assigned to the sending party step and the gateway server may then continue with routing of the SMS message according to step . The SMS message processing routine cycle may then end step .

In the following example assume Party C is a mobile subscriber and that Party A is a member of the Enterprise hosting enterprise network . Further assume Party C is assigned mobile terminal and Party A is assigned office land line telephony device . In this instance assume Party A has a dummy HLR record similar to dummy HLR record allocated in HLR for land line telephony device to facilitate delivery to Party A s mobile terminal of SMS messages submitted with the enterprise directory number of device as the destination number.

A call may be originated by Party C at mobile terminal to the office number of device assigned to Party A step . As noted above Party A has a profile in HLR for the office number of device for the purpose of enabling SMS messages submitted with the office number as the destination number.

MSC on receipt of the call setup request queries HLR for a routing number to the serving MSC in order to deliver the call to the recipient step . HLR queries GS C that has previously registered as the serving MSC for the office number step . GS C is responsible for maintaining the periodic registrations such that the HLR profile continuously points to GS C as the serving MSC.

GS C identifies the enterprise network associated with the office number destination and sends the message to the corresponding GS E step .

GS E sets the routing number to be returned to the originating MSC to be the corresponding mobile number of enterprise user Party A. Note that if GS E is not available GS C may set the routing number to be returned to the originating MSC to be the corresponding mobile number of the enterprise user Party A.

GS E may also communicate with another enterprise messaging service step to convey an incoming call to user terminal step . In addition GS E may record the transaction as part of Party A s logs within the enterprise.

GS E may then respond to GS C step which in turn responds to HLR step . HLR then may respond to serving MSC with the routing number to the serving MSC set to the mobile number to be routed out to the public landline network step . If both Party C and Party A are subscribers on the same mobile operator network the call would instead be routed directly from the MSC serving Party C to the GMSC in the same network of which Party A is a subscriber. Otherwise the call is routed out to the public network as described below.

The call is then routed via the public network step to the Gateway MSC GMSC of the network to which the mobile subscriber subscribes step . GMSC responds to PSTN step which in turn responds to MSC step after which the originating call leg is through connected from the Party C i.e. mobile terminal to the GMSC .

GMSC then queries HLR step to obtain a routing to the serving MSC of Party A. HLR requests a routing number from serving MSC step which is returned to HLR step . HLR returns the routing number to GMSC step . GMSC then routes the call to the routing number over the public landline network step to serving MSC step . Serving MSC responds step to the public landline network which in turn responds to GMSC step . The terminating call leg is through connected to the serving MSC step .

As described embodiments disclosed herein provide mechanisms for enabling the use of an alternative numbering plan for delivering short messages to mobile subscribers. Enterprise members or other users subscribed to a one number service may send short messages destined to members of an enterprise or closed network from their mobile or other devices associated with their subscription using an alternative enterprise directory number. The alternative enterprise directory number may comprise an office number of a land line telephony device. The alternative enterprise directory number rather than the mobile number will be presented at the destination device as the originating number. The recipient can respond to the message by addressing the response to the enterprise or closed network number and the SMS message will be delivered to the originator s mobile or other devices associated with their subscription.

Although the specific network architecture and nomenclature are depicted and described according to the GSM it is understood that this is done so for illustrative purposes only and that the network architecture on which embodiments disclosed herein may be applied is not limited to any particular standard but rather may be equivalently implemented on any other communications system supporting any variety of cellular communication systems e.g. D AMPS GSM CDMA IS 41 ANSI 41 UMTS etc.

The flowchart of depicts process serialization to facilitate an understanding of disclosed embodiments and is not necessarily indicative of the serialization of the operations being performed. In various embodiments the processing steps described in may be performed in varying order and one or more depicted steps may be performed in parallel with other steps. Additionally execution of some processing steps of may be excluded without departing from embodiments disclosed herein.

The illustrative block diagrams and flowcharts depict process steps or blocks that may represent modules segments or portions of code that include one or more executable instructions for implementing specific logical functions or steps in the process. Although the particular examples illustrate specific process steps or procedures many alternative implementations are possible and may be made by simple design choice. Some process steps may be executed in different order from the specific description herein based on for example considerations of function purpose conformance to standard legacy structure user interface design and the like.

Aspects of the present invention may be implemented in software hardware firmware or a combination thereof. The various elements of the system either individually or in combination may be implemented as a computer program product tangibly embodied in a machine readable storage device for execution by a processing unit. Various steps of embodiments of the invention may be performed by a computer processor executing a program tangibly embodied on a computer readable medium to perform functions by operating on input and generating output. The computer readable medium may be for example a memory a transportable medium such as a compact disk a floppy disk or a diskette such that a computer program embodying the aspects of the present invention can be loaded onto a computer. The computer program is not limited to any particular embodiment and may for example be implemented in an operating system application program foreground or background process driver network stack or any combination thereof executing on a single computer processor or multiple computer processors. Additionally various steps of embodiments of the invention may provide one or more data structures generated produced received or otherwise implemented on a computer readable medium such as a memory.

Although embodiments of the present disclosure have been described in detail those skilled in the art should understand that they may make various changes substitutions and alterations herein without departing from the spirit and scope of the present disclosure.

