---

title: Modified delta-sigma modulator for phase coherent frequency synthesis applications
abstract: A phase coherent fractional-N phase-locked loop synthesizer for maintaining phase coherence of a synthesized frequency includes a phase coherent delta-sigma modulator (DSM) having a plurality of feed-forward accumulator stages. The DSM is operatively coupled to a reference clock configured to generate a cyclical reference signal. The DSM configured to count a number of cycles of the reference signal, to cause, at each cycle of the reference signal, each of the stages of the DSM to accumulate a sum of a previous stage of the DSM, and to multiply each sum by a fractional divide word to produce a multiplier output, thereby causing the DSM to output a sequence of signals that tracks with the reference clock.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09479185&OS=09479185&RS=09479185
owner: BAE Systems Information and Electronic Systems Integration Inc.
number: 09479185
owner_city: Nashua
owner_country: US
publication_date: 20151214
---
This application claims the benefit of U.S. Provisional Patent Application Ser. No. 62 091 042 filed Dec. 12 2014 which is hereby incorporated by reference in its entirety.

This invention was made with U.S. Government support under Contract No. HR0011 12 C 0083 awarded by the Defense Advanced Research Projects Agency DARPA . The U.S. Government has certain rights in this invention.

The present disclosure relates generally to frequency synthesis and more particularly to phase coherent frequency synthesis applications using a Delta Sigma Modulator DSM Modulator or Sigma Delta Modulator .

Fractional N phase locked loops PLLs can be used for synthesizing frequencies at a non integer scalar frequency of an input reference signal. Phase coherent means that the phase relationship between the input reference signal and the output signal is deterministic. However it has been found in existing fractional N PLLs that when the PLL tunes away from one frequency to another frequency and returns to the original frequency the relationship between the phase of the output signal and the phase of the input reference signal is not phase coherent. In other words when changing from a frequency A to a frequency B and then back to the frequency A signal the phase of the frequency A signal is not necessarily matched to that of the previously generated frequency A signal. Further with existing fractional N phase locked loops the phase difference between an originally generated frequency A signal and a subsequently generated frequency A signal may be significantly more than a rounding error of a few degrees.

In fractional N PLL architectures a DSM can be used to generate a sequence that enables fractional reference frequency tuning of a voltage controlled or digitally controlled oscillator. The DSM reduces the magnitude of fractional spurs near the PLL carrier in comparison to single accumulator fractional N PLLs. For phase coherency the PLL should return to the same phase relative to the PLL reference. However DSMs may have hidden states that cause the PLL to return to a random phase relative to the reference when tuning away from a frequency and back again. This occurrence may break phase coherency. Phase coherency is important when considering multiple instances of the frequency synthesizers in a system.

U.S. Pat. No. 8 115 519 which is incorporated in this disclosure by reference in its entirety discloses a phase accumulator that generates phase data for a direct digital synthesis DDS device based on a reference phase to provide analog sinusoidal outputs that are locked to the reference phase and thus are phase coherent. The frequency of a sinusoidal DDS output may be controlled by changing a frequency control word FCW provided to the phase accumulator without affecting the incrementing reference phase. The sinusoidal DDS output is based on a multiple of the FCW and the reference phase and thus remains locked to the reference phase providing phase coherency even when the FCW changes to change the frequency.

U.S. Pat. No. 8 664 990 which is incorporated in this disclosure by reference in its entirety discloses a fractional N phase locked loop PLL in which the frequency control word multiplies by the output of a reference counter to provide the carry bit utilized in n n 1 switching.

In accordance with an embodiment of the present disclosure an apparatus for phase coherent frequency synthesis applications using a Delta Sigma Modulator DSM is provided. A phase coherent fractional N phase locked loop synthesizer for maintaining phase coherence of a synthesized frequency includes a phase detector and a phase coherent delta sigma modulator DSM having a plurality of feed forward accumulator stages. The DSM and the phase detector are each clocked by a reference clock which is configured to generate a cyclical reference signal. The DSM is configured to count a number of cycles of the reference signal. The DSM is further configured to cause at each cycle of the reference signal each subsequent stage of the stages of the DSM to accumulate a sum of a previous stage of the DSM and to multiply each sum by a fractional divide word to produce a multiplier output thereby causing the DSM to output a sequence of words that have a deterministic relationship with respect to the reference clock. In some cases the DSM is configured to control a divide ratio in an analog or digital fractional N phase locked loop such that a phase of the synthesized frequency is deterministic from a given point in time with respect to the reference signal. In some cases the DSM is configured to shape the quantization noise of a numerically controlled oscillator NCO operatively coupled to the reference clock thereby maintaining no phase bias. In some such cases the DSM is configured to compare a truncated multiplied output of each stage of the DSM with a previous truncated multiplied output of the same stage and to generate carry out bits for a delta path of the DSM based on the comparison. In some cases the stages are serially arranged. In some cases the number of cycles of the reference signal is the number of cycles of the reference signal generated by the reference clock since a given reset event. In some cases the synthesizer includes a plurality of phase coherent fractional N phase locked loop synthesizers.

In accordance with another embodiment of the present disclosure a methodology for phase coherent frequency synthesis applications using a Delta Sigma Modulator DSM is provided. A method of maintaining phase coherence of a synthesized frequency using a phase coherent delta sigma modulator DSM includes counting by a phase coherent delta sigma modulator DSM having a plurality of feed forward accumulator stages a number of cycles of a reference signal generated by a reference clock operatively coupled to the DSM. The method further includes causing at each cycle of the reference signal each of a plurality of stages of the DSM to accumulate a sum of a previous stage of the DSM and multiplying each sum by a fractional divide word thereby causing the DSM to output a sequence of signals that tracks with the reference clock. In some cases the method includes controlling a divide ratio in an analog or digital fractional N phase locked loop such that a phase of the synthesized frequency is deterministic from a given point in time with respect to the reference signal. In some cases the method includes shaping by a numerically controlled oscillator NCO operatively coupled to the reference clock quantization noise due to phase truncation thereby maintaining no phase bias. In some cases the method includes truncating the result of multiplying the sum by the fractional divide word. In some such cases the method includes comparing the truncated result of each stage of the DSM with a previous truncated multiplied result of the same stage and generating carry out bits for a delta path of the DSM based on the comparison. In some cases the stages are serially arranged. In some cases the number of cycles of the reference signal is the number of cycles of the reference signal generated by the reference clock since a given reset event.

In accordance with another embodiment of the present disclosure a phase coherent fractional N phase locked loop synthesizer for maintaining phase coherence of a synthesized frequency includes a reference clock and means operatively coupled to the reference clock. The means is configured to output a sequence of signals that tracks with the reference clock. In some cases the means is configured to control a divide ratio in an analog or digital fractional N phase locked loop such that a phase of the synthesized frequency is deterministic from a given point in time with respect to the reference signal. In some cases the means is configured to shape the quantization noise from phase truncation in a numerically controlled oscillator NCO operatively coupled to the reference clock thereby maintaining no phase bias. In some such cases the means is configured to compare a truncated result of an accumulator stage of a DSM with a previous truncated multiplied result of the same stage and generate carry out bits for a delta path of the DSM based on the comparison. In some cases the synthesizer includes a plurality of phase coherent fractional N phase locked loop synthesizers.

In general with existing fractional N phase locked loops PLLs the control of switching the divider among multiple different frequencies so as to adjust the instantaneous divide ratio and thus achieve an average of the multiple frequencies is accomplished by accumulating a fractional divide control number and using any accumulator overflow to adjust a divide ratio of the divider. In such existing PLLs a lack of phase coherency of a frequency A signal which is synthesized after dwelling an arbitrary time at a different frequency B with respect to an originally generated frequency A signal results from accumulating a different fractional divide number e.g. the one used to synthesize frequency B in the accumulator. More particularly if the fractional divide number added to the accumulator causes a roll over the corresponding carry bit of the accumulator will no longer start in phase with the carry bit that was used earlier to generate the original frequency. The result is that the signal generated by the frequency switching does not align in phase with the originally generated signal. Thus existing techniques for adding numbers to an accumulator to control the instantaneous divide ratio of the fractional N PLL result in a lack of coherency between an originally generated signal and a subsequently generated signal after having switched from the original frequency to another frequency and then back again.

To this end and in accordance with an embodiment of the present disclosure techniques for phase coherent frequency synthesis applications using a Delta Sigma Modulator DSM are provided. The DSM can be implemented in a fractional N phase locked loop PLL . The DSM is configured to count the number of reference clock cycles of the PLL that have passed since some point in time such as a reset event. The DSM has multiple accumulator stages where each stage can accumulate the sum of the previous stage at each reference clock cycle. A fractional divide word fed into the DSM can then be multiplied by the output of each stage of the DSM. In this manner the DSM is configured to output a sequence of signals that tracks with the reference clock when the PLL tunes to a different frequency and back to the original frequency. Numerous configurations and variations will be apparent in light of this disclosure.

As used herein the phrases phase coherent and phase coherency refer to the phase of a sinusoidal PLL output remaining substantially deterministic for a number of different frequencies and or frequency changes. For example the frequency of the PLL output may be switched from any frequency to any other frequency or to multiple other frequencies and return in phase to the original frequency. As used herein the term sinusoidal refers to a succession of waves similar to a sine wave but does not require a waveform that exactly corresponds to a sine wave. For instance the output sinusoidal waveform may be in the form of a sine wave square wave triangle wave or other desired waveform shape.

The fractional divide control number controls the switching of the divider between at least two different frequencies so as to be able to control the average of the frequencies in terms of a controllable duty cycle. The frequency of the signal output by the PLL can be finely controlled by adjusting the duty cycle. For example fine frequency control may be obtained by adding the fractional divide control number to the count in the accumulator of the DSM for the duty cycle.

In operation PLL uses the reference frequency which is the desired PLL output frequency divided by N. The VCO generates the synthesized output frequency . If the reference frequency and the PLL output divided by N are the same frequency and at the same phase then the phase detector has zero output the VCO controlled output frequency is not changed and the PLL phase is locked. When the reference frequency and the PLL output divided by N are different either having the same frequency but a different phase or are at different frequencies the phase detector output controls VCO to either speed up and increase the PLL output frequency or slow down to decrease the PLL output frequency . The VCO is thus adjusted via the phase detector until the reference frequency and PLL output divided by N are locked in both frequency and phase.

In various embodiments a frequency control word FCW e.g. the fractional divide control number can be used to change a frequency in the phase coherent fractional N PLL . The FCW is a binary number that is added to the accumulators of the DSM to control a divide ratio in an analog or digital fractional N phase locked loop such that a phase of the synthesized frequency is deterministic from a given point in time with respect to the reference signal. The result of adding the FCW binary number to the DSM is an output word the divide ratio that controls the switching between states of the PLL to vary the average output frequency via the divider . The result is that the PLL output is a signal whose frequency may be altered between for example two frequencies associated with two multipliers in the DSM .

For comparison shows an existing MASH 111 multi stage noise shaping structure DSM generally indicated at . shows an example phase coherent implementation of a MASH 111 DSM generally indicated at in accordance with an embodiment of the present disclosure. According to this embodiment the DSM of can be a modified MASH 111 DSM such as shown in . The MASH 111 DSM generally cancels reduces or otherwise shapes noise generated by the phase detector or other components of the PLL . The modified MASH 111 DSM is configured to generate a sequence of signals which are dependent on the reference frequency . By generating the sequence of signals from the reference frequency instead of from the divider as with existing techniques the generated sequence has a phase bias that is always the same when returning to a different fractional divide state as if the PLL never tuned away from the frequency of the reference.

The modified MASH 111 DSM includes several feed forward accumulator stages . The first accumulator in the summation path of the modified MASH 111 DSM is incremented by one at each clock cycle of the reference clock. This operation counts the number of reference clock cycles modulo 2 where B is the number of bits that have passed since for example a given reset event or other point in time. In the existing MASH 111 DSM the accumulator is incremented by a fractional word modulo 2. A fundamental phase coherency problem occurs because when the output signal is synthesized by a different FCW the accumulator adds an arbitrary word for an arbitrary time which can be viewed as a phase bias error with respect to the previous phase relationship. By contrast in the modified MASH 111 DSM according to an embodiment the fractional control word is multiplied by the output of each of the feed forward accumulator stages . It will be understood that this technique can be extended to any feed forward DSM and is not limited to the MASH 111 as shown in .

The multiplication operation in the MASH 111 DSM can be computed modulo 2to match the behavior of the DSM. Since a modulo operation that is a power of two is a truncation of most significant bits in some cases only the bottom B bits of the multiplication are kept or computed.

A delta path of the modified MASH 111 DSM can receive an overflow event of each accumulator . In the existing MASH 111 DSM the overflow event is the carry out bit of the addition operation. However by contrast in the modified MASH 111 DSM the overflow event can occur as part of the multiplication operation. Therefore in accordance with an embodiment overflow detection circuitry compares the truncated word of a stage against the value of the truncated word of the same stage from a previous clock cycle. The overflow detection circuitry generates the overflow condition bit that can be used in the delta path .

Applications of the present disclosure include but are not limited to any application in which phase coherency is desired including direct digital synthesis DDS devices phase locked loop PLL devices or any digital circuit that accumulates phase and then truncates a portion of the phase during the conversion to amplitude e.g. where phase error is injected through the use of a DSM . In such applications using a phase coherent DSM such as disclosed herein helps ensure that the exact phase is returned when switching between frequencies.

While embodiments of the present disclosure have been described it will be understood that other similar embodiments may be used or modifications or additions may be made to the described embodiments for performing the same or similar functions without deviating therefrom. Therefore the present disclosure should not be limited to any single embodiment but rather construed in breadth and scope in accordance with the recitation of the appended claims.

