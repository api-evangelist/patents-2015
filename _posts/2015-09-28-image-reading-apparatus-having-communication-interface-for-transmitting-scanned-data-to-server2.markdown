---

title: Image reading apparatus having communication interface for transmitting scanned data to server
abstract: An image reading apparatus is configured to: control a scanner unit to optically scans a document and generate scanned data; provide an input screen for allowing a user to input format information defining a particular file format of transmission data that contains the scanned data, wherein the format information includes additional information and wherein the input screen includes a first field for inputting item name of the additional information to be included in the transmission data and a second field for inputting a value of the additional information corresponding to the item name of the additional information; receive the format information input by the user; generate the transmission data, wherein the generated transmission data contains the scanned data and has the format according to the format information received in the receiving processing; and transmit the transmission data to the server through the communication interface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09591174&OS=09591174&RS=09591174
owner: BROTHER KOGYO KABUSHIKI KAISHA
number: 09591174
owner_city: Nagoya-shi, Aichi-ken
owner_country: JP
publication_date: 20150928
---
This application claims priorities from Japanese Patent Application No. 2014 201154 filed on Sep. 30 2014 the entire subject matters of which is incorporated herein by reference.

The present disclosure relates to a configuration for enabling an image reading apparatus to perform communication with a service providing server through a network.

In order to transmit scanned data to servers through a network an image reading apparatus contains the scanned data in transmission data for example HTTP requests . In this case the formats of the transmission data may differ depending on the servers. For this reason in order to transmit scanned data to servers an image reading apparatus has transmission programs corresponding to transmission data formats for the servers. There has been disclosed a communication system which includes a relay apparatus for relaying scanned data transmission in order to transmit scanned data from an image reading apparatus to service providing servers through a network. In this communication system the relay apparatus executes a transmission program prepared for each server thereby relaying transmission of scanned data.

However in the above described configuration a transmission program for each server may be required. For this reason an apparatus for storing the corresponding transmission program and executing the corresponding transmission program may be required.

The present disclosure has been made in view of the above circumstances and one of objects of the present disclosure is to provide a configuration enabling an image reading apparatus to store scanned data in transmission data having an appropriate format and transmit the transmission data to each server without using a transmission program which is prepared for the corresponding server.

According to an illustrative embodiment of the present disclosure there is provided an image reading apparatus including a scanner unit configured to optically scans a document a communication interface configured to be connectable with a network and establishes communication with a server that provides a service through the network a processor and memory storing computer readable instructions that when executed by the processor causing the image reading apparatus to perform image reading processing of controlling the scanner unit to optically scans a document and generating scanned data input screen providing processing of providing an input screen for allowing a user to input format information defining a particular file format of transmission data that contains the scanned data wherein the format information includes additional information and wherein the input screen includes a first field for inputting item name of the additional information to be included in the transmission data and a second field for inputting a value of the additional information corresponding to the item name of the additional information receiving processing of receiving the format information with the item name and the value of the additional information input by the user through the input screen data generating processing of generating the transmission data wherein the generated transmission data contains the scanned data and has the particular file format according to the format information received in the receiving processing and data transmitting processing of transmitting the transmission data generated in the data generating processing to the server through the communication interface.

According to another illustrative embodiment of the present disclosure there is provided a non transitory computer readable recording medium storing computer readable instructions for a terminal device that is provided with a communication interface and a processor wherein the instructions when executed by the processor causing the terminal device to perform input screen providing processing of providing an input screen for allowing a user to input format information defining a format of transmission data wherein the input screen includes a plurality of fields the plurality of fields including field for inputting item name of additional information to be included in the transmission data and field for inputting a value of the additional information corresponding to the item name of the additional information the transmission data containing a scanned data generated by an image reading apparatus and is transmitted to a server to store the scanned data in the server from the image reading apparatus and transmitting processing of transmitting the format information input by the user through the input screen to the image reading apparatus through the communication interface.

A mode of a configuration according to the present disclosure will be described based on an embodiment. is a block diagram illustrating a configuration of a system according to the embodiment. The system includes a plurality of multi function apparatuses A to C a personal computer PC and a plurality of servers A to C. The plurality of multi function apparatuses A to C and the personal computer are connected to one local area network LAN and are used for example by members of one group of a company or the like. The LAN is connected to the Internet . The servers A to C are connected to the Internet . The multi function apparatuses A to C and the personal computer perform communication with one another through the LAN . Also the multi function apparatuses A to C and the personal computer perform communication with the servers A to C through the LAN and the Internet .

The servers A to C provide WEB services capable of storing image data to clients for example the personal computer and the multi function apparatuses A to C through the Internet . That is the clients can access those servers by use of HTTP an abbreviation for HyperText Transfer Protocol thereby receiving WEB service provision. Each server is for example a cloud server which includes a plurality of computers connected to one another such that communication is possible and a plurality of storage units. Examples of WEB services include a storage service to store data received from clients a social networking service to perform storing and disclosing of data received from clients and an interpreting service to interpret image data received from clients and extract information from images.

The WEB services which are provided by the servers A B and C are named SN SN and SN respectively. Providers of the WEB services SN SN and SN which are provided by the servers A to C are different from one another. The providers of the WEB services SN SN and SN are also different from the vendors of the multi function apparatuses A to C. In order to use the WEB services SN SN and SN it is required to access different URLs URL is an abbreviation for Uniform Resource Locator . It can be said that these URLs are location information items representing the locations of the servers A to C which provide the WEB services SN SN and SN on the Internet respectively.

The multi function apparatus A which is example of an image reading apparatus in the embodiment includes a CPU a non volatile storage unit such as a hard disk or an EEPROM a volatile storage unit such as a RAM a printer unit for printing images in a predetermined system such as a laser system or an inkjet system a scanner unit for optically reading documents thereby acquiring scanned data an user interface such as a touch panel and buttons a display unit such as a liquid crystal panel superimposed on the touch panel and a communication interface IF .

The communication IF is for example an interface based on Ethernet standards and is used for connection with the LAN .

The non volatile storage unit stores a computer program PG and a setting information database DB storing setting information related to the multi function apparatus A. The volatile storage unit is used as a buffer area for temporarily storing a variety of intermediate data which are generated when the CPU performs processing.

The computer program PG is stored in advance in the non volatile storage unit during shipment of the multi function apparatus A. Alternatively the computer program PG may be downloaded from a server connected to the multi function apparatus A through the Internet or may be installed from a CD ROM a DVD ROM or the like.

The CPU executes the computer program PG thereby serving as a controller of the multi function apparatus A. Specifically the CPU controls the printer unit or the scanner unit thereby performing printing or scanning. Also the CPU provides user interface screens also referred to as UI screens for accessing the setting information database DB to a terminal device for example the personal computer of a user. The UI screens include for example an input screen for inputting the setting information stored in the setting information database DB. These UI screens are provided in a WEB page form to the terminal device. That is the terminal device of the user can display those UI screens on the terminal device by accessing the multi function apparatus A by use of a WEB browser. In this case the user performs inputting or reading of a variety of setting information through the UI screens which are displayed on the terminal device. Also the CPU performs a collective setting process to be described below in cooperation with the user s terminal device which acts a device manager to be described below .

The configurations of the multi function apparatuses B and C are the same as the configuration of the multi function apparatus A described above.

The personal computer is a computer of the user of the multi function apparatuses A to C and is used as a terminal device which manages the multi function apparatuses A to C. The personal computer includes a CPU serving as a controller of the personal computer a non volatile storage unit such as a hard disk drive a volatile storage unit such as a RAM an user interface such as a mouse and a keyboard a display unit such as a liquid crystal display and a communication IF for connection with the Internet .

The non volatile storage unit stores a browser program PG and a device management program PG. The volatile storage unit is used as a buffer area for temporarily storing a variety of intermediate data which are generated when the CPU performs processing.

The CPU executes the browser program PG thereby serving as a WEB browser. The CPU serving as a WEB browser can access the multi function apparatuses A to C thereby receiving provision of UI screens having a WEB page form. That is the CPU serving as a WEB browser can display the UI screens such as input screens for inputting setting information to the multi function apparatuses A to C based on the display unit .

Also the CPU executes the device management program PG thereby serving as a device manager. The device manager has a function of managing the multi function apparatuses A to C. The CPU serving as the device manager can access each of the multi function apparatuses A to C by use of a predetermined protocol for example SNMP an abbreviation for Simple Network Management Protocol and acquire or change setting information stored in the setting information database DB. The CPU serving as the device manager can display a UI screen on the display unit . This UI screen is different from the above described UI screens which are provided in the WEB page form.

Now an overview of a Scan to HTTP process will be described. The Scan to HTTP process is a process of optically reading a document by a multi function apparatus thereby generating scanned data and transmitting uploading the corresponding scanned data from the multi function apparatus to a server which provides a WEB service. For transmission of scanned data HTTP an abbreviation for HyperText Transfer Protocol is used.

In STEP S the CPU of the multi function apparatus A performs a scanning process. Specifically first the CPU controls the scanner unit such that the scanner unit optically scans the document according to pre set scanning options thereby generating scanned data representing the document. The CPU stores the generated scanned data in a file format for example PDF an abbreviation for Portable Document Format or JPEG an abbreviation for Joint Photographic Experts Group set in the scanning options. Scanning option information such as information representing the file format is included in the setting profile designated by the user.

In STEP S the CPU performs a storing process of storing the scanned data a scan file generated in STEP S in transmission data specifically an HTTP request having a format according to pre set format information. By the storing process an HTTP request including the scanned data and the format according to the format information is generated. The format information is included in the setting profile designated by the user.

In STEP S the CPU uploads the scanned data to the server A. That is the CPU transmits the generated HTTP request including the scanned data to the server A.

When the server A receives the HTTP request including the scanned data in STEP S a CPU of the server A performs a storing process. Specifically the CPU of the server A performs an authentication process using authentication information for example a password included in the corresponding HTTP request. If the authentication is successful the CPU stores the scanned data included in the corresponding HTTP request in a storage unit included in the server A.

In STEP S the CPU of the server A transmits a response that is a HTTP response representing the transmission result of the scanned data to the multi function apparatus A. For example in a case where the scanned data is received by the server A without problems and is stored in a storage unit of the server A without problems the transmission result response includes information representing success of uploading of the scanned data. Meanwhile for example in a case where the scanned data is not received by the server A or is not stored in a storage unit of the server due to an error the transmission result response includes information representing failure of uploading of the scanned data.

When the multi function apparatus A receives the transmission result response in STEP S the CPU of the multi function apparatus A displays the result of transmission uploading of the scanned data on the display unit and finishes the Scan to HTTP process. Specifically a notification screen similar to a notification screen WP for notifying information representing the result of transmission of test data to be described below is displayed on the display unit . That is in the notification screen which is displayed in STEP S information character strings included in the HTTP request RQ transmitted to the server A in STEP S is shown as it is and in the notification screen which is displayed in STEP information character strings included in the HTTP response RS received with respect to the HTTP request including the scanned data from the server A in STEP S is shown as it is see .

Although the case of uploading the scanned data to the server A has been described as an example according to other setting profiles it is possible to similarly upload scanned data to another server B or C.

Now a Scan to HTTP setting process of configuring the setting information also referred to as Scan to HTTP setting information related to the Scan to HTTP process in other words a Scan to HTTP setting process of generating a setting profile including the corresponding Scan to HTTP setting information and storing the setting profile in the setting information database DB will be described. The Scan to HTTP setting process is performed prior to the Scan to HTTP process. Specifically the Scan to HTTP setting information include the above described scanning option information the setting information related to the scanning process such as the file format and the format information representing the format of the HTTP request including the scanned data.

In STEP S the CPU transmits a request for input screen data representing an input screen to the multi function apparatus A by use of the predetermined URL and the destination URL. If the multi function apparatus A receives the input screen data request in STEP S the CPU transmits the input screen data as a response to the corresponding request to the personal computer .

When the personal computer receives the input screen data in STEP S the CPU displays an input screen WP represented by the input screen data on the display unit .

The input screen WP includes a format information area A for inputting format information representing an HTTP request format and a scanning option area A for inputting the above described scanning option information the setting information related to the scanning process .

The format information area A includes a plurality of fields F to F where arbitrary character strings texts are input by operations of the user on the user interface such as the keyboard.

The field F is a field for inputting a HTTP request destination URL. Destination URLs are determined for the WEB services respectively. In the example shown in the URL of the WEB service which is provided by the server A is input.

The field F is a field for inputting a method to be included in an HTTP request. A method which can be used to upload scanned data is generally POST or PUT .

The fields F and F are fields for inputting information defining the header of the HTTP request. Specifically in the fields F and F additional information to be included in the header of the HTTP request is input. More specifically each field F is a field for inputting an additional information item name and each field F is a field for inputting an additional information value. In the example of the format information area A includes three fields F and three fields F such that it is possible to input three additional information items. In the example of in the first field F from the top as an item name X UPLOAD FILENAME is input. Also the first field F from the top as a value corresponding to the item name X UPLOAD FILENAME  USER TIME .PDF is input. This is additional information designating a scanned data file name.

The field F is a field for inputting information designating the format of the body of the HTTP request. Specifically in the field F additional information and scanned data a scan file to be included in the body of the HTTP request are input in the order in which they will be included. In the example of in the field F character strings type pdf tag invoice and data  File DATA  base64 corresponding to three rows are input. type pdf and tag invoice are additional information and type and tag are item names of the additional information file format information and tag information and pdf and invoice are values corresponding to those item names. data is an item name representing scanned data and  File DATA  is a variable representing scanned data.

The information specifically character strings which should be input in the fields F to F especially item names are determined for WEB services of scanned data transmission destinations and can differ depending on the WEB services. In general the information which should be input in the fields F to F is described as an API abbreviation for Application Programming Interface by each WEB service. The user inputs the information which should be input in the fields F to F for example with reference to a published API.

The fields F and F are fields for inputting authentication information for accessing a WEB service. Specifically in the field F a user name is input and in the field F a password is input. In the example of in the field F as the user name  USER  base64 is input and in the field F as the password  PASS  base64 is input.

Here the user can input character strings hereinafter referred to simply as variables which are variables as values which are input in the fields F to F specifically values which are input in the fields F and values which are input in the fields F and F . In the present embodiment as a variable a character string having underbars   attached to its start and its end is used. In the example of  TIME   USER   PASS  and  File DATA  are variables. Each of these variables is substituted with specific information of a type represented by the corresponding variable in an actual HTTP request. For example the variable  TIME  is substituted with information representing time when the scanned data is uploaded that is when the HTTP request is transmitted . The variable  USER  is substituted with a user name registered in advance in the multi function apparatus A in association with a user logging in to the multi function apparatus A when the scanned data is uploaded. The variable  PASS  is substituted with a password registered in advance in the multi function apparatus A in association with the user name of the user logging in to the multi function apparatus A when the scanned data is uploaded. The variable  File DATA  is substituted with the scanned data a scan file which needs to be uploaded when the scanned data is uploaded. Likewise the variables can be referred to as type information representing the type of information to be substituted. Also it can be said that variables such as  USER  and  PASS  are information which are determined for each multi function apparatus that is device dependent information which can differ depending on the multi function apparatuses devices .

Also the user is allowed to add information designating a system for encoding specific information of a type represented by each of those variables to the end of the corresponding variable. For example in the character string  File DATA  base64 input in the third row of the field F represents that the scanned data which is substituted for the variable  File DATA  in an actual HTTP request should be encoded using an encoding system called base64 . Even with respect to other information which is transmitted when the scanned data is transmitted uploaded that is other information which is included in the HTTP request it is possible to designate an encoding system. For example with respect to all or some of the file name the authentication information the password and or the user name and the destination URL of the scanned data an encoding system can be designated.

The types of the variables which are allowed to be input in the fields F to F the types of encoding systems of the variables and formats for inputting those information items are determined in advance by the vendor of the multi function apparatus A. Examples of the formats include a format in which an encoding system should be input next to a variable with a colon interposed therebetween like the above described character string  File DATA  base64 . For example information on the variables the types of encoding systems and the formats are described in a manual which is provided from the vendor to the user. For example with reference to the corresponding manual the user inputs information character strings in the fields F to F.

The scanning option area A includes a plurality of pull down menus M to M for inputting scanning options for generating scanned data. Each pull down menu is a kind of input element UI element and is a selection area for selecting one specific option from a plurality of options prepared in advance. The user can operate the pull down menus M to M thereby inputting scanning options represented by corresponding specific options. The pull down menu M is a menu for inputting options related to the image quality of a scan image to be represented by scanned data specifically a color black and white option and a scan resolution option. The pull down menu M is a menu for inputting a file format option for scanned data. Examples of selectable file format options include PDF JPEG and TIFF. The pull down menu M is a menu for inputting a size document size option for a scan image which is represented by scanned data. Examples of setting option for document size include A4 A3 B5 a letter size and a legal size. The pull down menu M is a menu for inputting a data size option in other words a compression level for scanned data. Examples of selectable data sizes include a large size a medium size and a small size. Also in place of the pull down menus M to M selection areas which are configured by input elements having another form like radio buttons may be used.

As can be understood from the above description the Scan to HTTP setting information which are input through the input screen WP include first type setting information specifically the format information which differ depending on the WEB services of the scanned data transmission destinations and have relatively low commonality between the plurality of WEB services like additional information which need to be included in HTTP requests. Also the setting information which are input through the input screen WP include second type setting information specifically the scanning option information which do not depend on the WEB services of the scanned data transmission destinations and have relatively high commonality between the plurality of WEB services like the options related to the scanning process. Further with respect to the first type setting information as a user interface the fields F to F where it is possible to input arbitrary character strings are used. Further with respect to the second type setting information as a user interface the pull down menus M to M where it is possible to select one from a plurality of prepared options are used. As a result according to the types of Scan to HTTP setting information to be input appropriate user interfaces are used. Therefore the user can input appropriate Scan to HTTP setting information through the input screen WP.

The input screen WP further includes a read button BT a cancellation button BT a registration button BT and a test transmission button BT.

The read button BT is a button for instructing an instruction for reading registered setting profiles. For example if the user inputs a registered setting profile name in the field F and presses the read button BT a list of registered setting profiles not shown is displayed. Thereafter a registered setting profile selected from the list by the user is read from the setting information database DB. The name of the read setting profile is displayed in the field F of the input screen WP. Also the content of the read setting profile a set of Scan to HTTP setting information is displayed in the fields F to F and the pull down menus M to M of the input screen WP. The user can freely edit the content of the read setting profile displayed on the input screen WP. That is the multi function apparatus A can receive changes to the content of the read setting profile through the input screen WP thereby registering a new setting profile. Examples of the new setting profile include a setting profile for transmitting the scanned data to a transmission destination different from the scanned data transmission destination included in the read setting profile.

The cancellation button BT is a button for issuing an instruction for canceling the Scan to HTTP setting information input on the input screen WP. If the user presses the cancellation button BT for example information input in the fields F to F of the input screen WP are deleted.

The registration button BT is a button for issuing an instruction for registering a setting profile. If the registration button BT is pressed at that moment the set of Scan to HTTP setting information that is a setting profile input in the fields F to F and the pull down menus M to M of the input screen WP is registered as will be described below.

The test transmission button BT is a button for issuing an instruction for performing test transmission to be described below. If the test transmission button BT is pressed test transmission is performed as will be described below.

Now a case where in a state where the input screen WP is displayed the registration button BT is pressed and then the test transmission button BT is pressed will be described as an example. This order may be reversed.

When the registration button BT is pressed in STEP S of the CPU transmits a setting profile input in the input screen WP at that moment to the multi function apparatus A. If the multi function apparatus A receives the setting profile in STEP S the CPU registers the corresponding setting profile. That is the setting profile is newly stored in the setting information database DB. In STEP S the CPU transmits a registration completion notification to the personal computer .

When the test transmission button BT is pressed in STEP S the CPU transmits a test transmission instruction to the multi function apparatus A. When the multi function apparatus A receives the test transmission instruction the CPU transmits a HTTP request for testing communication with the server A to the server A. To this end the CPU generates test data TD in STEP S. The test data TD is generated without reading a document by the scanner unit . Specifically the CPU generates the test data TD a test file according to the scanning options included in the setting profile registered in STEP S using previously prepared dummy data for example RGB image data representing a predetermined dummy image . Therefore the generated test data TD has the file same format for example PDF as that of the scanned data the scan file which is generated according to the corresponding setting profile in the scanning process STEP S of the above described Scan to HTTP process .

In STEP S the CPU performs a storing process of storing the test data TD the test file generated in STEP S in an HTTP request having the format according to the format information included in the registered setting profile. At this time a file name included in the HTTP request is overwritten with the file name of the test data TD. This storing process is the same as the storing process which is performed using scanned data in STEP S of the above described Scan to HTTP process except that it uses the test data TD.

By the storing process an HTTP request RQ including the test data TD and having the format according to the format information included in the registered setting profile is generated.

In the example of it can be seen that the header RQH has the format according to the information input in the fields F to F of the input screen WP of . For example in the first row L of the header RQH POST input as a method in the field F is included. Also in the first row L and second row L of the header RQH a HTTP request RQ is defined using the destination URL input in the field F. Further in the fourth row L of the header RQH the file name of the test data TD is described according to the information input in the fields F and F. That is it can be seen that in the fourth row L of the header RQH a name which is a combination of a user name Alice and information 201406301150 representing the generation time of the test data TD is described as the file name of the test data TD. Furthermore in the fifth row L of the header RQH according to information input in the fields F and F the authentication information the user name and the password encoded by the base64 system is described.

Also in the example of it can be seen that the body RQB has the format according to the information input in the field F of the input screen WP of . That is the body RQB includes character strings type pdf tag invoice and data and the test data test file TD encoded by the base64 system.

In STEP S the CPU uploads the test data TD. That is the CPU transmits the HTTP request RQ including the test data TD to a server designated by the destination URL included in the HTTP request RQ. Here on the assumption that the transmission destination uploading destination server is the server A a description will be made.

If the server A receives the HTTP request RQ including the test data TD in STEP S the CPU of the server A performs a storing process. This storing process is the same process as the storing process of STEP S of the Scan to HTTP process .

In STEP S the CPU of the server A transmits a response representing the result of transmission of the test data TD to the multi function apparatus A. For example in a case where the test data TD is received by the server A without problems and is stored in a storage unit of the server A without problems the transmission result response includes information representing success of uploading of the test data TD. Meanwhile for example in a case where the test data TD is not received by the server A or is not stored in a storage unit of the server due to an error the transmission result response includes information representing failure of uploading of the test data TD.

The response representing the transmission result is specifically an HTTP response RS to the HTTP request RQ. An example of the HTTP response RS is shown in . The HTTP response RS includes a header RSH and a body RSB. In the example of the header RSH includes a status code 200 OK representing that the request was successful and the body RSB includes a message SM representing that the transmission result is successful. These information items which are included in HTTP responses RS can differ depending on the WEB services. For this reason unless there are dedicated different programs for the WEB services respectively it is difficult for the CPU of the multi function apparatus A or the CPU of the personal computer to interpret those information items.

In STEP S the CPU transmits transmission result notification screen data to the personal computer . This notification screen data represents a notification screen WP for notifying information representing the result of the transmission of the test data TD to the server A. If the personal computer receives the notification screen data in STEP S the CPU displays the notification screen WP based on the notification screen data on the display unit .

In a case of determining that the transmission of the test data TD was successful based on the notification screen WP the user finishes the Scan to HTTP setting process for example by finishing the browser program. In a case of determining that the transmission of the test data TD was failed based on the notification screen WP for example the user can change the Scan to HTTP setting information such as the format information input on the input screen WP. Thereafter the user may request transmission of the test data TD again using a changed setting profile a set of Scan to HTTP setting information .

As described above in the Scan to HTTP setting process the multi function apparatus A provides the input screen WP for inputting the setting information related to the Scan to HTTP process to the personal computer STEP S of . The input screen WP is a screen for inputting format information defining a format for transmission data for transmitting the scanned data to a server that is an HTTP request which stores the scanned data and is transmitted to a server . The input format information includes format information defining a format for additional information which is stored together with the scanned data in the HTTP request. The format information for the additional information includes an additional information item name for example X UPLOAD FILENAME of or tag and an additional information value for example  USER TIME .pdf or invoice corresponding to the additional information item name. Thereafter in the Scan to HTTP process the multi function apparatus A generates transmission data specifically an HTTP request having the format according to the format information included in the setting profile input through the input screen WP and stores the scanned data in the corresponding HTTP request STEP S of . Thereafter the multi function apparatus A transmits the corresponding HTTP request to the server thereby transmitting the scanned data to the server STEP S of . As a result the multi function apparatus A can receive information related to formats which can differ depending on servers for example an item name to be given to additional information through the input screen and thus can transmit scanned data in an appropriate format to a server.

More specifically in the related art a transmission program based on an API published for each server WEB service is prepared for the corresponding server. Thereafter the corresponding transmission program is executed whereby scanned data is uploaded to the corresponding server. This transmission program may be executed by a multi function apparatus or may be executed by a relay apparatus for example a relay server for relaying transmission of scanned data from a multi function apparatus to a server. In contrast to this the multi function apparatus A of the present embodiment can transmit scanned data in an appropriate format to each server without using a transmission program which is prepared for the corresponding server. Therefore it is possible to reduce resources for example an amount of memory of the multi function apparatus A necessary for transmitting scanned data from the multi function apparatus A to a server. Further it is possible to simplify a system for transmitting scanned data from the multi function apparatus A to a server. Furthermore if the user inputs Scan to HTTP setting information such as format information with respect to a server a WEB service for which a transmission program has not been prepared through the input screen WP it is possible to transmit scanned data to the corresponding server.

Also before storing scanned data in an HTTP request having the format according to the format information input through the input screen WP in the Scan to HTTP process of and transmitting the HTTP request the multi function apparatus A stores the test data TD in an HTTP request having the format according to the format information and transmits the HTTP request to a server STEPS S to S of . As a result it is possible to check in advance whether it is possible to appropriately transmit scanned data to the server using the setting profile input through the input screen WP.

Also in the test transmission the multi function apparatus A generates the test data TD to be stored in an HTTP request STEP S of without using the scanner unit . This test data TD has the same format as that of scanned data to be transmitted in the Scan to HTTP process. As a result it is possible to appropriately check in advance whether it is possible to appropriately transmit scanned data to the server without generating scanned data.

Also the multi function apparatus A transmits the screen data representing the notification screen WP including the result information representing the result of transmission of the test data TD to the server to the personal computer STEP S of . The result information which is included in the notification screen WP includes a response for example the HTTP response RS of received with respect to the HTTP request including the test data TD from the server. As a result the user can appropriately determine whether the transmission of the test data TD to the server was successful or not. That is although the multi function apparatus A does not retain a transmission program based on an API published for the server the WEB service and thus cannot determine whether the transmission of the test data TD to the server was successful or not the user can appropriately perform the corresponding determination with reference to the notification screen WP.

Similarly even in STEP S of the Scan to HTTP process of as a notification screen including information representing the transmission result of the scanned data a screen similar to the notification screen WP of is displayed on the display unit . As a result the user can appropriately perform determination on whether the transmission of the scanned data to the server was successful or not.

Also the format information which is input through the input screen WP includes information designating a system for encoding the scanned data for example base64 of the character string  File DATA  base64 in the field F of . Further the format information includes information for example base64 of the character string  USER  base64 in the field F of designating a system for encoding at least a portion for example the authentication information or the file name of the additional information to be transmitted to the server during transmission of the scanned data. As a result it is possible to appropriately encode the scanned data and the additional information and then transmit them to the server. For example it is possible to encode scanned data and additional information by an encoding system permitted to be used in an API published for each server a WEB service and then transmit them to the corresponding server.

Also the input screen WP includes input areas specifically the fields F to F of which are input areas for inputting format information and where arbitrary character strings can be input by the user. Especially in the fields F and F it is possible to input arbitrary character strings as additional information item names. As a result it is possible to flexibly cope with WEB services which can require various formats together with additional information item names which differ depending on the WEB services. As a result it is possible to improve versatility of the Scan to HTTP process.

Also the input screen WP includes selection areas specifically the pull down menus M to M of for selecting one specific option from a plurality of options as input elements for inputting scanning options. It is unlikely that the scanning options will differ depending on the WEB services and selectable scanning options are often determined in advance according to the specification of the scanner unit and so on. According to the present embodiment the user can easily set scanning options.

Now a collective setting process will be described. The collective setting process is a process which the CPU serving as the device manager and the multi function apparatuses A to C perform in cooperation with one another in a state where the device management program PG of the personal computer is active. The collective setting process is a process of collectively setting information set in a specific device also referred to as a master device in one or more other devices also referred to as copy devices . Hereinafter a case of setting one or more sets of Scan to HTTP setting information that is one or more setting profiles set in the multi function apparatus A in two multi function apparatuses B and C will be described.

The user selects one master device as a processing object and inputs an individual setting command on the device selection screen WPa. For example as shown in the example of the user selects the multi function apparatus A as a master device and selects an INDIVIDUAL SETTING command from a command window CW by operating a cursor CS by use of a pointing device such as a mouse.

When the individual setting command is input in STEP S the CPU displays a device management screen WPb shown in . The device management screen WPb includes a plurality of menu buttons MBa to MBc a plurality of check boxes CBa to CBe a setting display window SW and a setting transmission button BTa. The plurality of menu buttons MBa to MBc is buttons for displaying menus for inputting various instructions. The plurality of check boxes CBa to CBe is check boxes for selecting processing object setting information.

As shown in the user selects setting profile for the Scan to HTTP process as processing object setting information by checking the check boxes CBd and CBe.

When setting profiles for the Scan to HTTP process are selected in STEP S the CPU transmits a setting profile request to the multi function apparatus A selected as a processing object. When the multi function apparatus A acquires the corresponding request the CPU of the multi function apparatus A transmits all setting profiles stored in the setting information database DB of the multi function apparatus A to the personal computer . At this time variables such as  USER  and  PASS  described above included in Scan to HTTP setting information included in the setting profiles are transmitted as they are to the personal computer . An outline of the setting profiles received by the personal computer is displayed in the setting display window SW for example as shown in .

The user selects a menu STORING OF SETTING INFORMATION from menus corresponding to the menu button MBa thereby inputting an instruction for storing the received setting profiles. When the corresponding storing instruction is input in STEP S the CPU stores the received setting profiles. Specifically the received setting profiles are stored as one file in the non volatile storage unit included in the personal computer .

Subsequently based on an operation of the user in STEP S the CPU displays the device selection screen WPa again.

The user selects one or more copy devices as processing objects and then inputs a collective setting command on the device selection screen WPa. For example the user selects two multi function apparatuses B and C as copy devices and selects a COLLECTIVE SETTING command from the command window CW by operating the cursor CS.

When the collective setting command is input the CPU re displays the device management screen WPb shown in .

The user selects a menu READING OF SETTING INFORMATION from the menus corresponding to the menu button MBa and inputs a setting profile read instruction.

When the setting profile read instruction is input in STEP S the CPU reads the setting profiles saved in STEP S from the non volatile storage unit and stores them in the buffer area of the volatile storage unit . An outline of the read setting profiles is displayed in the setting display window SW for example as shown in .

The user confirms the display of the setting display window SW and then presses the setting transmission button BTa thereby inputting a setting transmission instruction. The setting transmission instruction is input the CPU transmits the setting profiles to each of the copy devices.

Specifically in STEP S the CPU transmits the setting profiles to the multi function apparatus B. If the multi function apparatus B receives the setting profiles in STEP S the CPU of the multi function apparatus B registers the corresponding setting profiles as they are. That is the CPU of the multi function apparatus B stores the corresponding setting profiles in the setting information database DB. As a result it becomes possible to perform a Scan to HTTP process using the corresponding setting profiles in the multi function apparatus B. In STEP S the CPU of the multi function apparatus B transmits a setting profile registration completion notification to the personal computer .

Similarly in STEP S the CPU transmits the setting profiles to the multi function apparatus C. In STEP S the CPU of the multi function apparatus C registers the received setting profiles. In STEP S the CPU of the multi function apparatus C transmits a registration completion notification to the personal computer .

According to the collective setting process described above the user can easily register setting profiles registered in one master device for example the multi function apparatus A in one or more copy devices for example the multi function apparatuses B and C . As a result it is possible to reduce a burden of the user and improve the convenience of the multi function apparatuses A to C for the user.

In the collective setting process the multi function apparatus A serves as the master device transmits the setting profiles including the format information to an external device specifically the personal computer STEP S of without substituting the variables included in the format information with specific device dependent information. Therefore the external device can be used to register the received format information in other devices. A case where it is impossible to use variables to input format information to the input screen WP or a case where variables included in format information is substituted with specific information and the format information is transmitted to an external device is assumed. In this case some processes such as a process of changing specific device dependent information included in format information of a setting profile to be transmitted to each copy device for the corresponding copy device are required and thus it is inconvenient. According to the collective setting process of the present embodiment that problem does not occur.

That is the multi function apparatuses B and C serves as copy devices need only to register the individual profiles received from the master device as they are STEPS S and S of . That is the format information including variables is stored in the setting information database DB of each of the multi function apparatuses B and C without being changed. As a result it is possible to reduce a burden of the user for inputting format information and a processing load on each of the multi function apparatuses B and C.

Also in the above described collective setting process a case where the master device is the multi function apparatus A and the copy devices are the multi function apparatuses B and C has been described as an example. However each of the multi function apparatuses A to C can act as a master device or can act as a copy device.

In the input screen WP of the first embodiment described above in the format information area A all format information are input in the fields F to F where arbitrary character strings can be input. Alternatively some information of the format information may be specifically input using a selection area for selecting one specific option from a plurality of options prepared in advance.

In other words the input screen WP of the second embodiment includes first areas specifically the field F and the fields F to F where arbitrary character strings can be input by the user as areas for inputting first type format information items of the format information and includes a second area specifically the pull down menu M for selecting one specific information item from the plurality of options as an area for inputting a second type format information item of the format information. As a result according to the type of each format information item the corresponding format information item can be input through an appropriate area in the input screen WP. Therefore it is possible to reduce a burden of the user.

More specifically the first type format information items include additional information item names which can be input using the field F or the field F. Also the second type format information item includes an instruction specifically a method which can be input using the pull down menu M so as to be issued to a server defined according to a communication protocol. As a result through the input screen WP additional information item names which can be freely determined by the provider of a WEB service can be appropriately input and a method which is a limited kind of information can be appropriately input. Further since a method is input using the pull down menu M it is possible to reduce an input burden of the user as compared to a case where a method is input through a field.

 1 In the Scan to HTTP setting process of the embodiment described above the CPU of the multi function apparatus A provides the input screen WP in a WEB page form to the personal computer STEP S of . Thereafter the CPU of the multi function apparatus A acquires a setting profile through the input screen WP and registers the corresponding setting profile in the setting information database DB. Alternatively the CPU of the personal computer may provide the input screen WP as a UI screen of the device manager. That is the CPU serving as the device manager displays the input screen WP on the display unit . Thereafter the CPU serving as the device manager receives setting information such as format information from the user through the input screen WP. Thereafter the CPU serving as the device manager may transmit the Scan to HTTP setting information the setting profile received from the user to the multi function apparatus A such that the corresponding setting profile is stored in the setting information database DB of the multi function apparatus A. In other words the Scan to HTTP setting process of the embodiment described above is performed by a function which is implemented by the computer program PG stored in the multi function apparatus A. Meanwhile the Scan to HTTP setting process of the present modification is performed by a function which is implemented by the device management program PG stored in the personal computer serving as a terminal device connected to the multi function apparatus A such that communication is possible.

 2 In the Scan to HTTP setting process of the embodiment described above the information items character strings input in the fields F to F of the input screen WP are included as they are in the HTTP request RQ in the test data transmission STEP S of or the scanned data transmission STEP S of from the multi function apparatus A to a server. Alternatively the CPU may check the information items input in the fields F to F especially additional information items input in the fields F and F and may not include information items which will obviously disturb communication between the multi function apparatus A and the server in the HTTP request RQ. Examples of these information items include an information item which should be dynamically determined in communication between the multi function apparatus A and the server and an information item which should not be changed since a standard has been determined. These information items are for example additional information items such as Connection transfer encoding and Content Length .

 3 In the above described embodiment the CPU generates the test data TD the test file using the dummy data STEP S of . Alternatively the volatile storage unit may store the test data TD in advance and the CPU may acquire the corresponding test data TD from the volatile storage unit . For example a plurality of test data items TD having a plurality of conceivable file formats such as PDF JPEG and BMP may be stored in the volatile storage unit in advance and the CPU may acquire a test data item TD having the same file format as that of scanned data to be generated according to a setting profile from the volatile storage unit .

 4 In the above described embodiment some processing steps of the Scan to HTTP setting process can be appropriately changed. For example the processes of STEPS S to S related to test data transmission can be omitted. Also the Scan to HTTP setting information items which are included in the input screen WP of are examples and can be appropriately changed. For example the input screen WP may not include the pull down menus M to M for inputting scanning options. In this case scanning options may be sequentially set during performance of the Scan to HTTP process or pre set basic scanning related options may be used during performance of the Scan to HTTP process.

 5 In each above described embodiment some of components implemented by hardware may be replaced with software and conversely some or all of components implemented by software may be replaced with hardware.

Although the present disclosure has been described based on the embodiment and the modifications the above described mode for carrying out the present disclosure is to enable a better understanding of the present disclosure but does not limit the scope of the present disclosure. The present disclosure may include alterations changes and modifications of the embodiment without departing from the gist of the present disclosure and the scope of claims and also includes equivalents thereof.

Also the configuration which is disclosed in this disclosure may be implemented in various forms besides the above described image reading apparatus and can be implemented in forms such as a system including the image reading apparatus a control method of the image reading apparatus computer programs for realizing the image reading apparatus the system or the control method and recording media with those computer programs.

