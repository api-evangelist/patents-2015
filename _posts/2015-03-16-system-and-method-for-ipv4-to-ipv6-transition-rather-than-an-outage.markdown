---

title: System and method for IPv4 to IPv6 transition rather than an outage
abstract: Disclosed is a system and method to provide a seamless transition to IPv6 from IPv4 rather than the outage that occurs presently. This system and method for transition to IPv6 also takes into consideration the application, which must also be migrated to IPv6. There are two types of applications available to the customer, those that he has source code for, and those that he doesn't. The disclosed system and method differentiates between the two automatically.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09479475&OS=09479475&RS=09479475
owner: 
number: 09479475
owner_city: Raleigh
owner_country: US
publication_date: 20150316
---
The present application claims the benefit of U.S. Provisional Patent Application No. 61 954 231 filed Mar. 17 2014 by Michael E. Mazarick and entitled System and Method for IPv4 to IPv6 Transition Rather Than Outage which is incorporated herein by reference as if reproduced in its entirety.

This disclosure describes a system and method of providing for a controlled transition from IPv4 to IPv6 and the routing necessary to effect that transition.

In general any time an IP address changes there is initial outage while that change occurs. Disclosed is a system and method for allowing the IP address between IPv4 and IPv6 to change with a controlled transition rather than an undergoing an outage.

Though the concepts are simple to understand there are many steps disclosed that are necessary to enable a smooth and orderly transition to IPv6 rather than an outage per IP deployment. In the claims and drawings the major requirements of the present embodiment have been disclosed. The complex details underlying a successful IPv4 to IPv6 transition are hidden from the end network customer but all of them are required to be implemented in the underlying infrastructure. The complexity and non obviousness of the solution disclosed in this patent explains why this has not been achieved to date.

Typical RIR acronyms are ARIN for North America RIPE for Europe APNIC for Asia LANIC for Latin America AFRINIC for Africa. It is also disclosed that the precise physical location is provided in a manner analogous to GPS for every packet that generated or transmitted by the system which is why it needs encryption with its own certificate per customer is necessary and important. The results of where the packet originates is also highly proprietary. This information may or may not be stripped off in the management system and is a separate feature that may be offered to some customers. The key components are identified as a unified system and method for Applications and Databases utilizing XML an Application Programming Interface API a compiled virtual machine the application source code and libraries that create the compiled virtual machine the development system that is needed by the application source code and libraries a compiler or compilers and an operating system.

Each ISP is also provided with an application rsync access to information in each RIR s DMZ. The rsync application obtains bidirectional information from the Member Certificate Authorization and the RIR Certificate Authorization. The RIR Certificate Authorization has bidirectional communications with a RIR Signing Engine a RIR RPKI Database and a RIR Certificate Authorization. The RIR Signing Engine had bidirectional information between both the RIR Certificate Authorization and the RIR RKPI Database. There is also an internal Firewall at each RIR and a Hardware Security Module that has bidirectional access thru the firewall to the RIR Signing Engine. There is a Registry Database that has bidirection information requirements from both the customer s Command and Control function and the RIR Certificate Authorization.

It is also disclosed that the occurrence and timing of this transition is completely hidden and private between the Intranet Service Provider ISP and the customer private network. This system and method allows the customer s private network to be completely encapsulated and thus not available for internet surveillance providing the required level of isolation and security. It is not necessary to broadcast information regarding the private network s IPv4 IPv6 transition over the internet encrypted or not . The required routing information is provided by broadcasting permissible routes to AS numbers. In order to accomplish this while still interoperating with the Regional Internet Registrar s standards this system or method provides for a subset of the information to be made available on the internet. This is accomplished by using a private instance of the Resource Key Public Infrastructure and feeding only the required information to the Regional Internet Registrar. For example ARIN the US based Internet Naming Authority for the Americas Northern Hemisphere has a hosted solution for providing an encrypted version of this routing information which is as secure as possible using today s technology. The Up Down interface is used by the Regional Internet Registrars to tell which routes are up and down . Access to this information and interface is provided for compatibility with existing standards.

All information regarding the status and progress of the IPv4 IPv6 transition is completely proprietary to a customer. If a competitor were to gain access to this information they would be able to deduce which applications are legacy and incapable uneconomical to migrate and which were in the process of transition. They would then be able to use this information to gain an unfair competitive advantage. The control of the transition has to be under customer direction and guidance. Since the IPv4 addresses from the customer will be sold to the highest bidder it will have to meet the business needs of the customer.

As shown in and the customers applications must be able to properly use gethostbyaddress32 and gethostbyaddress128 library calls. The preferred method to address this is to have gethostbyaddress migrated either by recompiling the source code to a new library provided by the Operating System or by direct binary substitution. Where the source code is not available or it is uneconomical to provide a direct substitution there is a legacy capability built in that utilizes both IPv4 32 bit gethostbyaddress32 library calls without the larger addressing possible and IPv6 128 bit gethostbyaddress128 library calls for applications that support the larger addressing range. This dual capability will exist as long as the customer has legacy applications and it is economically viable for the ISP to support dual capabilities libraries. The library gethostbyaddress must provide valid and correct information for both cases. Every Virtual Machine in the library must provide this capability and any Virtual Machines that are imported into the system must include both copies or it will be automatically a legacy gethostbynames32 without the extended addressing capabilities.

Although the background of facts for this invention are well known to anyone skilled in the art there is also a unique insight that has been disclosed for a potential solution to this well known and global problem. It has been known for some years that the world is running out of IPv4 addresses. IPv6 has been in existence for 15 years as of the writing of this patent application as a replacement for IPv4 but it hasn t gotten any traction because there is no incentive to change. Recently in the last few years IANA has decided to use economic incentive or it should be said economic dis incentive because the price projected for new IPv4 addresses is planned to rise. For the transition between the old IPv4 and new IPv6 IP addresses the price of existing IPv4 addresses will need to rise also. Credit will be given to IANA and the Regional Internet Registrars for the very tough job of creating a market and developing policies and procedures to regulate a market and coming up with an approach to solving the basic problem of the world running out of IPv4 addresses. The IPv4 addressing scheme was invented back in the early 1980s and has lasted a very long time. IANA IETF and the Regional Internet Registrars who look at the allocation of IPv4 addresses on a daily basis knows that the world will eventually have to transition to IPv6 and are taking the steps that they see need to be taken and are committed to a very innovative but tough approach of yanking the old tooth out before a new one can be put in the same place.

Likewise insight was available because of the extreme pain rendered years ago when the IPs changed from one set of IPv4 addresses to another . Now this is very specialized knowledge but someone skilled in the art knows about this potential pain from an outage of transition between IP addresses. Several steps have been taken by the industry since the internal outage years ago but those with a few gray hairs knows about this potential outage and it may have even caused a few gray hairs along the way. Many of the younger generation skilled in the art haven t experienced this because of the knowledge that has been garnered and processes that have been put in place to mitigate this circumstance. It would take someone who was very skilled in the art to recognize there is a potential problem because even years ago it wasn t a well known problem except to a very few individuals.

So the first step is to recognize that there is a potential problem. The solution to this problem is non obvious and requires an understanding of software an understanding of hardware interfaces and software drivers an understanding of networking and an understanding of how systems operate to even conceive of the elegant but simple solution that is disclosed.

If both IPv4 and IPv6 addresses are allocated at the same time with a system of coordination of these addresses which can control the routing and have a method of issuing both IPv4 and IPv6 addresses to allocate then the benefits of this solution can be available. The benefits include 1 no outage on transition to a new network addressing system 2 the ability to recycle the original IPv4 address to a new network 3 a secure list of applications for the customer that highlight which applications are legacy and which can be transitioned to the wider addressing capability of IPv6 4 a means to transfer the legacy IPv4 addresses and receive some remuneration to the owner of the IPv4 addresses for this effort at market prices that is built in 5 a pure IPv6 network rather than the kluge planned of utilizing existing IPv4 addresses inside of an IPv6 tunnel 6 the timing necessary for this transition will be per customer and will be controlled by their schedule rather than an outside force dictating that it should occur all at once at a given time.

Also disclosed is the routing necessary to effect this change and the security of knowing that it will not be disclosed to an outside party.

There are several unique components needed to control the routing. The end effect of an IPv4 to IPv6 address transition without an outage is like the skin . There are several things required to make this transition possible besides the skin that is novel and unique. The current embodiment of a solution is 1 a core router under control of the customer that allows his data to transition to a new data center at a different location 2 a software defined network virtualizing common network components so that a customer can be totally isolated and secure 3 a unique certificate system for encryption 4 timing information from each of the Regional Internet Registrars that is combined to provide a timing source for a particular physical data center which is integrated with the Certificate system and several of the Regional Internet Registrar s Cryptographic system 5 an RPKI validation of the data 6 RPKI XML for a method of decoding the data.

The core router can be either physical or virtual. The customer will have access to creating his own core router. The core router will only be able to transmit packets to a data center that has the components necessary to provide a transition from IPv4 to IPv6 without an outage or to an edge router within the data center that can then transfer the information encrypted by default thru a customer s firewall and onto the internet. The internet is used as a transport mechanism and other transport mechanisms can be other systems and methods besides the internet.

The other networking components for a software defined network will also be available for the customer to create their own virtual network available to each customer and allowed to join the customer s network that the customer creates. The key components from a customer perspective are a software defined core router a software defined edge router and a firewall physical or virtual . It will be noticed by someone skilled in the art that other components such as load balancers and other appliances can be made available too but these will not be described for simplification.

Since the network deployment is software defined networking a unique module that controls the allocation of IPv4 and IPv6 addresses controls both of the IP address registers and the allocation of the software library call gethostbyname to each register on a per customer per network basis and reports an ongoing status to the customer network for both the IP address allocation and software library status is disclosed. The sequence of operations will be to deploy both the IPv4 and IPv6 addresses at the same time with the gethostbyname32 pointing to the IPv4 register and the gethostbyname128 pointing to the IPv6 register change the gethostbyname library calls to only access the IPv6 register de allocate the IPv4 register and differentiate which application database is using the gethostbyname32 vs. the gethostbyname128. Since this will be done on a per device basis it will be under the control of the customer network. It will be under customer control to decide if this is to be implemented in their virtual data center only their datacenters only or throughout their organization including the desktops and mobile devices. The system and method can be achieved in chunks with the required timing and deployment under the control of the customer network.

The certificate system will work in a manner that is analogous via two key PKI encryption public private but the keys will be private isolated. The similar to a public key the private one in the new system is known only to particular customer and the isolated one is encased in a black box inside the management system of the data center where it is unknown to all parties even the operator of the data center. Unlike conventional systems when the key is compromised it will be simpler to provide new keys. This is analogous to providing a new set of keys and changing the lock rather than replacing the entire strongbox. Every packet of information will be encrypted with this set of keys whether the information is transmitted over the internet or is transmitted to a different data center with the same capabilities.

It should be noticed that so far the ingredients have been disclosed but the systems and methods necessary have not been disclosed with the exception of sync timing . This is similar to having the ingredients for a cake specified but no recipe. The system and methods used will be disclosed in this description specification and claims of uniqueness in this patent application document.

It would be obvious to anyone skilled in the art that the virtual and physical network interfaces will need to have the capability of having an IPv4 address and an IPv6 address stored at the same time in separate registers. It would also be obvious to anyone skilled in the art that the software call of gethostsbyname will also need to be routed to the correct register which implies that the virtual machine images will also need to have both library calls available gethostbyname32 and gethostbyname128 . It would also be obvious that both libraries will be used for quite some time but the IPv4 address will be removed and deployed to a new network. The unique routing necessary to make these transitions happen will now be disclosed.

The heart of this system is the clock reference signal that provides a sync clock source from multiple Regional Internet Registrars. This is accomplished by utilizing the cryptographic system inherent in each Regional Internet Registrar and instructing the hardware in the Regional Internet Registrar to issue an encrypted packet or packets on a regular interval approximately every 3 seconds per RIR that contains a very exact and precise time the packet was generated. It will be contain a difference in time between the current packet and the last packet that was sent by the Regional Internet Registrar. Most packets will take the same path and take roughly the same time to reach the same destination a particular data center . The location of the clock source is already very stable and known so that the location of the original RIR packet is also known. For the case that either the RKPI system at a particular RIR moves receipt timing is altered or otherwise does not meet the historical guidelines then that particular RIR s packet is disabled and a new request for an original packet is placed. The particular RIRs RPKI system will either respond or not but it will still be disabled until it is approved to join with other RIRs in furnishing the encrypted time sync signal. If a signal from a particular RIR interferes with a signal from another RIR it is backed off a random amount of time when it will try again until it succeeds. When the RIR s packet is received by the data center s after a prescribed amount of transmissions it is then allowed to join with other RIRs in providing a very precise clustered clock sync signal. This furnishes an equivalent of NTP without the need of GPS satellites to provide timing. The amount of jitter introduced by a particular Regional Internet Provider on a particular client data center will be measured at the local data center.

The certificate disclosed will be utilized with a sync clock time source. It is disclosed that a system and method will be used that is compatible with existing standards but the isolated key which unlocks the packet is known by no one and is in an encrypted folder in the management system of the ISP and the contents are under the control of the customer. There will be a lot of transmitting receiving and signing that meets the standard and doesn t interfere with existing patents that are in force.

The practical application offered today is the ability to utilize resource certificates to help secure Internet routing particularly BGP origin validation.

Resource Certification RPKI is a community driven system in which all Regional Internet Registries open source software developers and several major router vendors participate. It uses open standards that were developed in the Secure Inter Domain Routing sidr Working Group in the IETF.

A resource certificate offers validatable proof of holdership of a resource s allocation or assignment by an RIR. Using their resource certificate network operators can create cryptographically validatable statements about the route announcements they authorize to be made with the prefixes they hold. This is known as BGP Origin Validation.

It is disclosed in this patent application how to utilize RPKI information to provide validatable proof of the origination of the packet if it originated in a system and method that utilizes this patent. This disclosure is that a unique certificate will be utilized to issue encrypt decrypt and obsolete any packet and that a Regional Internet Registrar must be licensed for this technology in order for the packet to be transmitted from the Regional Internet Registrar to the data center that also must be licensed for this technology.

There are about 550 000 route announcements on the Internet at the time of submission of this patent application. The most common routing error is the accidental mis origination of a prefix meaning someone unintentionally announces an IP prefix that they are not the holder of. RPKI offers BGP origin validation so the question it tries to answer is 

RPKI allows network operators to create cryptographically validatable statements about the route announcements they authorize to be made with the prefixes they hold. These statements are called Route Origin Authorizations ROAs .

A ROA states which Autonomous System AS is authorized to originate certain IP address prefixes. In addition it can determine the maximum length of the prefix that the AS is authorized to advertise. Based on this information other network operators can make routing decisions.

When a network operator creates a ROA for a certain combination of origin AS and prefix this will have an effect on the RPKI validity of one or more route announcements. They can be 

Please note that the current RPKI functionality solely offers origin validation. However it lays the foundation to offering true Secure BGP including path validation. Work on creating the standards for this are currently being developed in the IETF.

RPKI XML is the method used to provide cryptographically valid routing information. At the time of submission of this patent application RPKI XML is used for validation of addresses assigned by the RIR to the AS number of the ISP for purposes of BGP routing decisions. The unique and non obvious difference is shown in the drawings.

Depending on the embodiment certain acts events or functions may be substituted by someone who is sufficiently skilled in the art.

Conditional language used herein such as among others can might may e.g. and the like unless specifically stated otherwise or otherwise understood within the context as used is generally intended to convey that certain embodiments include while other embodiments do not include certain features elements and or states. Thus such conditional language is not generally intended to imply that features elements and or states are in any way required for one or more embodiments or that one or more embodiments necessarily include logic for deciding with or without author input or prompting whether these features elements and or states are included or are to be performed in any particular embodiment. The terms comprising including having and the like are synonymous and are used inclusively in an open ended fashion and do not exclude additional elements features acts operations and so forth. Also the term or is used in its inclusive sense and not in its exclusive sense so that when used for example to connect a list of elements the term or means one some or all of the elements in the list.

While the above detailed description has shown described and pointed out novel features as applied to various embodiments it will be understood that various omissions substitutions and changes in the form and details of the devices or algorithms illustrated can be made without departing from the spirit of the disclosure. As will be recognized certain embodiments of the inventions described herein can be embodied within a form that does not provide all of the features and benefits set forth herein as some features can be used or practiced separately from others. No element or feature is necessary or indispensable to each embodiment. The scope of certain inventions disclosed herein is indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.

