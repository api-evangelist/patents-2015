---

title: Systems and methods for anticipatory locking and unlocking of a smart-sensor door lock
abstract: An electronic device associated with a lock device obtains a number of users detected within a premises, and detects a trigger event related to a lock device and premises. When the trigger event is detected, a target state of the lock device is determined based on: (1) the number of users within the premises, (2) user security profiles indicating a desired target state of the lock device when a respective user is within the premises, (3) locations of detected users; (4) user states of detected users indicating whether the respective user is asleep or active; and/or (5) a current premises mode, including an armed state and a disarmed state. A current state of the lock device is determined, and if the current state and the target state of the lock device are not the same, instructions are provided to the lock device based on the target state.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09396599&OS=09396599&RS=09396599
owner: GOOGLE INC.
number: 09396599
owner_city: Mountain View
owner_country: US
publication_date: 20150529
---
This relates generally to smart door locks including but not limited to methods and systems for automatically locking and unlocking doors based on a variety of factors.

Electronic door locks offer the convenience of locking and unlocking doors without requiring a user to physically turn a key. Some electronic door locks include electromechanical components such as battery powered motors for actuating and retracting the bolt of the door lock. Consequently electronic door locks have substantial limitations with respect to power consumption particularly given the typical frequency with which electronic door locks are operated on a daily basis.

Accordingly there is a need for methods systems and interfaces for automatically determining a target state of a lock device when a trigger event is detected and locking or unlocking the lock device accordingly. By utilizing inputs retrieved from one or more devices such as smart devices with sensory capabilities positioned throughout an environment a target state of the lock device is determined e.g. locked unlocked state and instructions based on the determined target state are provided to the lock device if needed. Thus the bolt of a lock device is actuated or retracted only if determined to be necessary otherwise the lock device maintains its current state. Average power consumption is therefore reduced while maintaining the advantages of typical electronic door locks.

In accordance with some implementations a method is performed at an electronic device e.g. a smart device in a smart home network with one or more processors and memory storing instructions for execution by the one or more processors wherein the electronic device is associated with a lock device. The method includes obtaining a number of users detected within a premises and detecting a trigger event related to the lock device and the premises. When the trigger event is detected a target state of the lock device is determined based on at least one of a plurality of factors. Factors include 1 the obtained number of users detected within the premises 2 respective security profiles of the one or more detected users wherein a respective security profile of a respective user indicates a desired target state of the lock device when the respective user is within the premises 3 a location of the one or more detected users 4 a user state of the one or more detected users wherein a respective user state of a respective user indicates that the respective user is asleep or active and 5 a current premises mode including an armed state and a disarmed state. A current state of the lock device is determined and if the current state of the lock device and the target state of the lock device are not the same instructions are provided to the lock device based on the target state of the lock device.

In accordance with some implementations an electronic device e.g. a smart device in a smart home network includes one or more processors memory and one or more programs the one or more programs are stored in the memory and configured to be executed by the one or more processors. The one or more programs include instructions for performing the operations of the method described above. In accordance with some implementations a non transitory computer readable storage medium has stored therein instructions that when executed by the electronic device cause the electronic device to perform the operations of the method described above.

Thus electronic devices are provided with more effective and efficient methods for automatically determining a target state of a lock device when a trigger event is detected and locking or unlocking the lock device accordingly thereby increasing the effectiveness and efficiency of such devices and systems.

Reference will now be made in detail to implementations examples of which are illustrated in the accompanying drawings. In the following detailed description numerous specific details are set forth in order to provide a thorough understanding of the various described implementations. However it will be apparent to one of ordinary skill in the art that the various described implementations may be practiced without these specific details. In other instances well known methods procedures components circuits and networks have not been described in detail so as not to unnecessarily obscure aspects of the implementations.

It will also be understood that although the terms first second etc. are in some instances used herein to describe various elements these elements should not be limited by these terms. These terms are only used to distinguish one element from another. For example a first unlocked state could be termed a second unlocked state and similarly a second unlocked state could be termed a first unlocked state without departing from the scope of the various described implementations. The first unlocked state and the second unlocked state are both unlocked states but they are not the same unlocked state.

The terminology used in the description of the various described implementations herein is for the purpose of describing particular implementations only and is not intended to be limiting. As used in the description of the various described implementations and the appended claims the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. It will also be understood that the term and or as used herein refers to and encompasses any and all possible combinations of one or more of the associated listed items. It will be further understood that the terms includes including comprises and or comprising when used in this specification specify the presence of stated features integers steps operations elements and or components but do not preclude the presence or addition of one or more other features integers steps operations elements components and or groups thereof.

As used herein the term if is optionally construed to mean when or upon or in response to determining or in response to detecting or in accordance with a determination that depending on the context. Similarly the phrase if it is determined or if a stated condition or event is detected is optionally construed to mean upon determining or in response to determining or upon detecting the stated condition or event or in response to detecting the stated condition or event or in accordance with a determination that a stated condition or event is detected depending on the context.

It is to be appreciated that smart home environments may refer to smart environments for homes such as a single family house but the scope of the present teachings is not so limited. The present teachings are also applicable without limitation to duplexes townhomes multi unit apartment buildings hotels retail stores office buildings industrial buildings and more generally any living space or work space. Moreover the techniques and methods disclosed herein can be used for locks other than locks for buildings such as safes storage units tool boxes gun cases or security devices e.g. bike locks etc. .

It is also to be appreciated that while the terms user customer installer homeowner occupant guest tenant landlord repair person and the like may be used to refer to the person or persons acting in the context of some particularly situations described herein these references do not limit the scope of the present teachings with respect to the person or persons who are performing such actions. Thus for example the terms user customer purchaser installer subscriber and homeowner may often refer to the same person in the case of a single family residential dwelling because the head of the household is often the person who makes the purchasing decision buys the unit and installs and configures the unit and is also one of the users of the unit. However in other scenarios such as a landlord tenant environment the customer may be the landlord with respect to purchasing the unit the installer may be a local apartment supervisor a first user may be the tenant and a second user may again be the landlord with respect to remote control functionality. Importantly while the identity of the person performing the action may be germane to a particular advantage provided by one or more of the implementations such identity should not be construed in the descriptions that follow as necessarily limiting the scope of the present teachings to those particular individuals having those particular identities.

The depicted structure includes a plurality of rooms separated at least partly from each other via walls . The walls may include interior walls or exterior walls. Each room may further include a floor and a ceiling . Devices may be mounted on integrated with and or supported by a wall floor or ceiling .

In some implementations the integrated devices of the smart home environment include intelligent multi sensing network connected devices that integrate seamlessly with each other in a smart home network e.g. and or with a central server or a cloud computing system to provide a variety of useful smart home functions. The smart home environment may include one or more intelligent multi sensing network connected thermostats hereinafter referred to as smart thermostats one or more intelligent network connected multi sensing hazard detection units hereinafter referred to as smart hazard detectors one or more intelligent multi sensing network connected entryway interface devices and hereinafter referred to as smart doorbells and smart door locks and one or more intelligent multi sensing network connected alarm systems hereinafter referred to as smart alarm systems .

In some implementations the one or more smart thermostats detect ambient climate characteristics e.g. temperature and or humidity and control a HVAC system accordingly. For example a respective smart thermostat includes an ambient temperature sensor.

The one or more smart hazard detectors may include thermal radiation sensors directed at respective heat sources e.g. a stove oven other appliances a fireplace etc. . For example a smart hazard detector in a kitchen includes a thermal radiation sensor directed at a stove oven . A thermal radiation sensor may determine the temperature of the respective heat source or a portion thereof at which it is directed and may provide corresponding blackbody radiation data as output.

The smart doorbell and or the smart door lock may detect a person s approach to or departure from a location e.g. an outer door control doorbell door locking functionality e.g. receive user inputs from a portable electronic device to actuate bolt of the smart door lock announce a person s approach or departure via audio or visual means and or control settings on a security system e.g. to activate or deactivate the security system when occupants go and come .

The smart alarm system may detect the presence of an individual within close proximity e.g. using built in IR sensors sound an alarm e.g. through a built in speaker or by sending commands to one or more external speakers and send notifications to entities or users within outside of the smart home network . In some implementations the smart alarm system also includes one or more input devices or sensors e.g. keypad biometric scanner NFC transceiver microphone for verifying the identity of a user and one or more output devices e.g. display speaker . In some implementations the smart alarm system may also be set to an armed mode such that detection of a trigger condition or event causes the alarm to be sounded unless a disarming action is performed.

In some implementations the smart home environment includes one or more intelligent multi sensing network connected wall switches hereinafter referred to as smart wall switches along with one or more intelligent multi sensing network connected wall plug interfaces hereinafter referred to as smart wall plugs . The smart wall switches may detect ambient lighting conditions detect room occupancy states and control a power and or dim state of one or more lights. In some instances smart wall switches may also control a power state or speed of a fan such as a ceiling fan. The smart wall plugs may detect occupancy of a room or enclosure and control supply of power to one or more wall plugs e.g. such that power is not supplied to the plug if nobody is at home .

In some implementations the smart home environment of includes a plurality of intelligent multi sensing network connected appliances hereinafter referred to as smart appliances such as refrigerators stoves ovens televisions washers dryers lights stereos intercom systems garage door openers floor fans ceiling fans wall air conditioners pool heaters irrigation systems security systems space heaters window AC units motorized duct vents and so forth. In some implementations when plugged in an appliance may announce itself to the smart home network such as by indicating what type of appliance it is and it may automatically integrate with the controls of the smart home. Such communication by the appliance to the smart home may be facilitated by either a wired or wireless communication protocol. The smart home may also include a variety of non communicating legacy appliances such as old conventional washer dryers refrigerators and the like which may be controlled by smart wall plugs . The smart home environment may further include a variety of partially communicating legacy appliances such as infrared IR controlled wall air conditioners or other IR controlled devices which may be controlled by IR signals provided by the smart hazard detectors or the smart wall switches .

In some implementations the smart home environment includes one or more network connected cameras that are configured to provide video monitoring and security in the smart home environment . The cameras may be used to determine occupancy of the structure and or particular rooms in the structure and thus may act as occupancy sensors. For example video captured by the cameras may be processed to identify the presence of an occupant in the structure e.g. in a particular room . Specific individuals may be identified based for example on their appearance e.g. height face and or movement e.g. their walk gait . Cameras may additionally include one or more sensors e.g. IR sensors motion detectors input devices e.g. microphone for capturing audio and output devices e.g. speaker for outputting audio .

The smart home environment may additionally or alternatively include one or more other occupancy sensors e.g. the smart doorbell smart door locks touch screens IR sensors microphones ambient light sensors motion detectors smart nightlights etc. . In some implementations the smart home environment includes radio frequency identification RFID readers e.g. in each room or a portion thereof that determine occupancy based on RFID tags located on or embedded in occupants. For example RFID readers may be integrated into the smart hazard detectors .

The smart home environment may also include communication with devices outside of the physical home but within a proximate geographical range of the home. For example the smart home environment may include a pool heater monitor that communicates a current pool temperature to other devices within the smart home environment and or receives commands for controlling the pool temperature. Similarly the smart home environment may include an irrigation monitor that communicates information regarding irrigation systems within the smart home environment and or receives control information for controlling such irrigation systems.

By virtue of network connectivity one or more of the smart home devices of may further allow a user to interact with the device even if the user is not proximate to the device. For example a user may communicate with a device using a computer e.g. a desktop computer laptop computer or tablet or other portable electronic device e.g. a mobile phone such as a smart phone . A webpage or application may be configured to receive communications from the user and control the device based on the communications and or to present information about the device s operation to the user. For example the user may view a current set point temperature for a device e.g. a stove and adjust it using a computer. The user may be in the structure during this remote communication or outside the structure.

As discussed above users may control smart devices in the smart home environment using a network connected computer or portable electronic device . In some examples some or all of the occupants e.g. individuals who live in the home may register their device with the smart home environment . Such registration may be made at a central server to authenticate the occupant and or the device as being associated with the home and to give permission to the occupant to use the device to control the smart devices in the home. An occupant may use their registered device to remotely control the smart devices of the home such as when the occupant is at work or on vacation. The occupant may also use their registered device to control the smart devices when the occupant is actually located inside the home such as when the occupant is sitting on a couch inside the home. It should be appreciated that instead of or in addition to registering devices the smart home environment may make inferences about which individuals live in the home and are therefore occupants and which devices are associated with those individuals. As such the smart home environment may learn who is an occupant and permit the devices associated with those individuals to control the smart devices of the home.

In some implementations in addition to containing processing and sensing capabilities devices and or collectively referred to as the smart devices are capable of data communications and information sharing with other smart devices a central server or cloud computing system and or other devices that are network connected. Data communications may be carried out using any of a variety of custom or standard wireless protocols e.g. IEEE 802.15.4 Wi Fi ZigBee 6LoWPAN Thread Z Wave Bluetooth Smart ISA100.11a WirelessHART MiWi etc. and or any of a variety of custom or standard wired protocols e.g. Ethernet HomePlug etc. or any other suitable communication protocol including communication protocols not yet developed as of the filing date of this document.

In some implementations the smart devices serve as wireless or wired repeaters. In some implementations a first one of the smart devices communicates with a second one of the smart devices via a wireless router. The smart devices may further communicate with each other via a connection e.g. network interface to a network such as the Internet . Through the Internet the smart devices may communicate with a smart home provider server system also called a central server system and or a cloud computing system herein . The smart home provider server system may be associated with a manufacturer support entity or service provider associated with the smart device s . In some implementations a user is able to contact customer support using a smart device itself rather than needing to use other communication means such as a telephone or Internet connected computer. In some implementations software updates are automatically sent from the smart home provider server system to smart devices e.g. when available when purchased or at routine intervals .

In some implementations the network interface includes a conventional network device e.g. a router and the smart home environment of includes a hub device that is communicatively coupled to the network s directly or via the network interface . The hub device is further communicatively coupled to one or more of the above intelligent multi sensing network connected devices e.g. smart devices of the smart home environment . Each of these smart devices optionally communicates with the hub device using one or more radio communication networks available at least in the smart home environment e.g. ZigBee Z Wave Insteon Bluetooth Wi Fi and other radio communication networks . In some implementations the hub device and devices coupled with to the hub device can be controlled and or interacted with via an application running on a smart phone household controller laptop tablet computer game console or similar electronic device. In some implementations a user of such controller application can view status of the hub device or coupled smart devices configure the hub device to interoperate with smart devices newly introduced to the home network commission new smart devices and adjust or view settings of connected smart devices etc. In some implementations the hub device extends capabilities of low capability smart device to match capabilities of the highly capable smart devices of the same type integrates functionality of multiple different device types even across different communication protocols and is configured to streamline adding of new devices and commissioning of the hub device.

In some implementations some low power nodes are incapable of bidirectional communication. These low power nodes send messages but they are unable to listen . Thus other devices in the smart home environment such as the spokesman nodes cannot send information to these low power nodes.

In some implementations some low power nodes are capable of only a limited bidirectional communication. For example other devices are able to communicate with the low power nodes only during a certain time period.

As described in some implementations the smart devices serve as low power and spokesman nodes to create a mesh network in the smart home environment . In some implementations individual low power nodes in the smart home environment regularly send out messages regarding what they are sensing and the other low powered nodes in the smart home environment in addition to sending out their own messages forward the messages thereby causing the messages to travel from node to node i.e. device to device throughout the smart home network . In some implementations the spokesman nodes in the smart home network which are able to communicate using a relatively high power communication protocol such as IEEE 802.11 are able to switch to a relatively low power communication protocol such as IEEE 802.15.4 to receive these messages translate the messages to other communication protocols and send the translated messages to other spokesman nodes and or the smart home provider server system using e.g. the relatively high power communication protocol . Thus the low powered nodes using low power communication protocols are able to send and or receive messages across the entire smart home network as well as over the Internet to the smart home provider server system . In some implementations the mesh network enables the smart home provider server system to regularly receive data from most or all of the smart devices in the home make inferences based on the data facilitate state synchronization across devices within and outside of the smart home network and send commands to one or more of the smart devices to perform tasks in the smart home environment.

As described the spokesman nodes and some of the low powered nodes are capable of listening. Accordingly users other devices and or the smart home provider server system may communicate control commands to the low powered nodes. For example a user may use the electronic device e.g. a smart phone to send commands over the Internet to the smart home provider server system which then relays the commands to one or more spokesman nodes in the smart home network . The spokesman nodes may use a low power protocol to communicate the commands to the low power nodes throughout the smart home network as well as to other spokesman nodes that did not receive the commands directly from the smart home provider server system .

In some implementations a smart nightlight which is an example of a smart device is a low power node. In addition to housing a light source the smart nightlight houses an occupancy sensor such as an ultrasonic or passive IR sensor and an ambient light sensor such as a photo resistor or a single pixel sensor that measures light in the room. In some implementations the smart nightlight is configured to activate the light source when its ambient light sensor detects that the room is dark and when its occupancy sensor detects that someone is in the room. In other implementations the smart nightlight is simply configured to activate the light source when its ambient light sensor detects that the room is dark. Further in some implementations the smart nightlight includes a low power wireless communication chip e.g. a ZigBee chip that regularly sends out messages regarding the occupancy of the room and the amount of light in the room including instantaneous messages coincident with the occupancy sensor detecting the presence of a person in the room. As mentioned above these messages may be sent wirelessly e.g. using the mesh network from node to node i.e. smart device to smart device within the smart home network as well as over the Internet to the smart home provider server system .

Other examples of low power nodes include battery operated versions of the smart hazard detectors . These smart hazard detectors are often located in an area without access to constant and reliable power and may include any number and type of sensors such as smoke fire heat sensors e.g. thermal radiation sensors carbon monoxide dioxide sensors occupancy motion sensors ambient light sensors ambient temperature sensors humidity sensors and the like. Furthermore smart hazard detectors may send messages that correspond to each of the respective sensors to the other devices and or the smart home provider server system such as by using the mesh network as described above.

Examples of spokesman nodes include smart doorbells smart thermostats smart wall switches and smart wall plugs . These devices are often located near and connected to a reliable power source and therefore may include more power consuming components such as one or more communication chips capable of bidirectional communication in a variety of protocols.

In some implementations the smart home environment includes service robots that are configured to carry out in an autonomous manner any of a variety of household tasks.

As explained above with reference to in some implementations the smart home environment of includes a hub device that is communicatively coupled to the network s directly or via the network interface . The hub device is further communicatively coupled to one or more of the smart devices using a radio communication network that is available at least in the smart home environment . Communication protocols used by the radio communication network include but are not limited to ZigBee Z Wave Insteon EuOcean Thread OSIAN Bluetooth Low Energy and the like. In some implementations the hub device not only converts the data received from each smart device to meet the data format requirements of the network interface or the network s but also converts information received from the network interface or the network s to meet the data format requirements of the respective communication protocol associated with a targeted smart device. In some implementations in addition to data format conversion the hub device further processes the data received from the smart devices or information received from the network interface or the network s preliminary. For example the hub device can integrate inputs from multiple sensors connected devices including sensors devices of the same and or different types perform higher level processing on those inputs e.g. to assess the overall environment and coordinate operation among the different sensors devices and or provide instructions to the different devices based on the collection of inputs and programmed processing. It is also noted that in some implementations the network interface and the hub device are integrated to one network device. Functionality described herein is representative of particular implementations of smart devices control application s running on representative electronic device s such as a smart phone hub device s and server s coupled to hub device s via the Internet or other Wide Area Network. All or a portion of this functionality and associated operations can be performed by any elements of the described system for example all or a portion of the functionality described herein as being performed by an implementation of the hub device can be performed in different system implementations in whole or in part on the server one or more connected smart devices and or the control application or different combinations thereof.

In some implementations the devices and services platform communicates with and collects data from the smart devices of the smart home environment . In addition in some implementations the devices and services platform communicates with and collects data from a plurality of smart home environments across the world. For example the smart home provider server system collects home data from the devices of one or more smart home environments where the devices may routinely transmit home data or may transmit home data in specific instances e.g. when a device queries the home data . Example collected home data includes without limitation power consumption data blackbody radiation data occupancy data HVAC settings and usage data carbon monoxide levels data carbon dioxide levels data volatile organic compounds levels data sleeping schedule data cooking schedule data inside and outside temperature humidity data television viewership data inside and outside noise level data pressure data video data etc.

In some implementations the smart home provider server system provides one or more services to smart homes and or third parties. Example services include without limitation software updates customer support sensor data collection logging remote access remote or distributed control and or use suggestions e.g. based on collected home data to improve performance reduce utility cost increase safety etc. In some implementations data associated with the services is stored at the smart home provider server system and the smart home provider server system retrieves and transmits the data at appropriate times e.g. at regular intervals upon receiving a request from a user etc. .

In some implementations the extensible devices and services platform includes a processing engine which may be concentrated at a single server or distributed among several different computing entities without limitation. In some implementations the processing engine includes engines configured to receive data from the devices of smart home environments e.g. via the Internet and or a network interface to index the data to analyze the data and or to generate statistics based on the analysis or as part of the analysis. In some implementations the analyzed data is stored as derived home data .

Results of the analysis or statistics may thereafter be transmitted back to the device that provided home data used to derive the results to other devices to a server providing a webpage to a user of the device or to other non smart device entities. In some implementations usage statistics usage statistics relative to use of other devices usage patterns and or statistics summarizing sensor readings are generated by the processing engine and transmitted. The results or statistics may be provided via the Internet . In this manner the processing engine may be configured and programmed to derive a variety of useful information from the home data . A single server may include one or more processing engines.

The derived home data may be used at different granularities for a variety of useful purposes ranging from explicit programmed control of the devices on a per home per neighborhood or per region basis for example demand response programs for electrical utilities to the generation of inferential abstractions that may assist on a per home basis for example an inference may be drawn that the homeowner has left for vacation and so security detection equipment may be put on heightened sensitivity to the generation of statistics and associated inferential abstractions that may be used for government or charitable purposes. For example processing engine may generate statistics about device usage across a population of devices and send the statistics to device users service providers or other entities e.g. entities that have requested the statistics and or entities that have provided monetary compensation for the statistics .

In some implementations to encourage innovation and research and to increase products and services available to users the devices and services platform exposes a range of application programming interfaces APIs to third parties such as charities governmental entities e.g. the Food and Drug Administration or the Environmental Protection Agency academic institutions e.g. university researchers businesses e.g. providing device warranties or service to related equipment targeting advertisements based on home data utility companies and other third parties. The APIs are coupled to and permit third party systems to communicate with the smart home provider server system including the services the processing engine the home data and the derived home data . In some implementations the APIs allow applications executed by the third parties to initiate specific data processing tasks that are executed by the smart home provider server system as well as to receive dynamic updates to the home data and the derived home data .

For example third parties may develop programs and or applications e.g. web applications or mobile applications that integrate with the smart home provider server system to provide services and information to users. Such programs and applications may be for example designed to help users reduce energy consumption to preemptively service faulty equipment to prepare for high service demands to track past service performance etc. and or to perform other beneficial functions or tasks.

In some implementations processing engine includes a challenges rules compliance rewards paradigm that informs a user of challenges competitions rules compliance regulations and or rewards and or that uses operation data to determine whether a challenge has been met a rule or regulation has been complied with and or a reward has been earned. The challenges rules and or regulations may relate to efforts to conserve energy to live safely e.g. reducing the occurrence of heat source alerts e.g. reducing exposure to toxins or carcinogens to conserve money and or equipment life to improve health etc. For example one challenge may involve participants turning down their thermostat by one degree for one week. Those participants that successfully complete the challenge are rewarded such as with coupons virtual currency status etc. Regarding compliance an example involves a rental property owner making a rule that no renters are permitted to access certain owner s rooms. The devices in the room having occupancy sensors may send updates to the owner when the room is accessed.

In some implementations processing engine integrates or otherwise uses extrinsic information from extrinsic sources to improve the functioning of one or more processing paradigms. Extrinsic information may be used to interpret data received from a device to determine a characteristic of the environment near the device e.g. outside a structure that the device is enclosed in to determine services or products available to the user to identify a social network or social network information to determine contact information of entities e.g. public service entities such as an emergency response team the police or a hospital near the device to identify statistical or environmental conditions trends or other information associated with a home or neighborhood and so forth.

In some implementations the smart home provider server system or a component thereof serves as the hub device server system . In some implementations the hub device server system is a dedicated video processing server that provides video processing services to video sources and client devices independent of other services provided by the hub device server system .

In some implementations each of the video sources includes one or more video cameras that capture video and send the captured video to the hub device server system substantially in real time. In some implementations each of the video sources optionally includes a controller device not shown that serves as an intermediary between the one or more cameras and the hub device server system . The controller device receives the video data from the one or more cameras optionally performs some preliminary processing on the video data and sends the video data to the hub device server system on behalf of the one or more cameras substantially in real time. In some implementations each camera has its own on board processing capabilities to perform some preliminary processing on the captured video data before sending the processed video data along with metadata obtained through the preliminary processing to the controller device and or the hub device server system .

As shown in in accordance with some implementations each of the client devices includes a client side module . The client side module communicates with a server side module executed on the hub device server system through the one or more networks . The client side module provides client side functionalities for the event monitoring and review processing and communications with the server side module . The server side module provides server side functionalities for event monitoring and review processing for any number of client side modules each residing on a respective client device . The server side module also provides server side functionalities for video processing and camera control for any number of the video sources including any number of control devices and the cameras .

In some implementations the server side module includes one or more processors a video storage database device and account databases an I O interface to one or more client devices and an I O interface to one or more video sources . The I O interface to one or more clients facilitates the client facing input and output processing for the server side module . The databases store a plurality of profiles for reviewer accounts registered with the video processing server where a respective user profile includes account credentials for a respective reviewer account and one or more video sources linked to the respective reviewer account. The I O interface to one or more video sources facilitates communications with one or more video sources e.g. groups of one or more cameras and associated controller devices . The video storage database stores raw video data received from the video sources as well as various types of metadata such as motion events event categories event category models event filters and event masks for use in data processing for event monitoring and review for each reviewer account.

Examples of a representative client device include but are not limited to a handheld computer a wearable computing device a personal digital assistant PDA a tablet computer a laptop computer a desktop computer a cellular telephone a smart phone an enhanced general packet radio service EGPRS mobile phone a media player a navigation device a game console a television a remote control a point of sale POS terminal vehicle mounted computer an ebook reader or a combination of any two or more of these data processing devices or other data processing devices.

Examples of the one or more networks include local area networks LAN and wide area networks WAN such as the Internet. The one or more networks are optionally implemented using any known network protocol including various wired or wireless protocols such as Ethernet Universal Serial Bus USB FIREWIRE Long Term Evolution LTE Global System for Mobile Communications GSM Enhanced Data GSM Environment EDGE code division multiple access CDMA time division multiple access TDMA Bluetooth Wi Fi voice over Internet Protocol VoIP Wi MAX or any other suitable communication protocol.

In some implementations the hub device server system is implemented on one or more standalone data processing apparatuses or a distributed network of computers. In some implementations the hub device server system also employs various virtual devices and or services of third party service providers e.g. third party cloud service providers to provide the underlying computing resources and or infrastructure resources of the hub device server system . In some implementations the hub device server system includes but is not limited to a handheld computer a tablet computer a laptop computer a desktop computer or a combination of any two or more of these data processing devices or other data processing devices.

The server client environment shown in includes both a client side portion e.g. the client side module and a server side portion e.g. the server side module . The division of functionalities between the client and server portions of operating environment can vary in different implementations. Similarly the division of functionalities between the video source and the hub device server system can vary in different implementations. For example in some implementations client side module is a thin client that provides only user facing input and output processing functions and delegates all other data processing functionalities to a backend server e.g. the hub device server system . Similarly in some implementations a respective one of the video sources is a simple video capturing device that continuously captures and streams video data to the hub device server system without no or limited local preliminary processing on the video data. Although many aspects of the present technology are described from the perspective of the hub device server system the corresponding actions performed by the client device and or the video sources would be apparent to ones skilled in the art without any creative efforts. Similarly some aspects of the present technology may be described from the perspective of the client device or the video source and the corresponding actions performed by the video server would be apparent to ones skilled in the art without any creative efforts. Furthermore some aspects of the present technology may be performed by the hub device server system the client device and the video sources cooperatively.

It should be understood that operating environment that involves the hub device server system the video sources and the video cameras is merely an example. Many aspects of operating environment are generally applicable in other operating environments in which a server system provides data processing for monitoring and facilitating review of data captured by other types of electronic devices e.g. smart thermostats smart hazard detectors smart doorbells smart wall plugs appliances and the like .

The electronic devices the client devices or the server system communicate with each other using the one or more communication networks . In an example smart home environment two or more devices e.g. the network interface device the hub device and the client devices are located in close proximity to each other such that they could be communicatively coupled in the same sub network A via wired connections a WLAN or a Bluetooth Personal Area Network PAN . The Bluetooth PAN is optionally established based on classical Bluetooth technology or Bluetooth Low Energy BLE technology. This smart home environment further includes one or more other radio communication networks B through which at least some of the electronic devices of the video sources exchange data with the hub device . Alternatively in some situations some of the electronic devices of the video sources communicate with the network interface device directly via the same sub network A that couples devices and . In some implementations e.g. in the network C both the client device and the electronic devices of the video sources communicate directly via the network s without passing the network interface device or the hub device .

In some implementations during normal operation the network interface device and the hub device communicate with each other to form a network gateway through which data are exchanged with the electronic device of the video sources . As explained above the network interface device and the hub device optionally communicate with each other via a sub network A.

The hub device optionally includes one or more built in sensors not shown including for example one or more thermal radiation sensors ambient temperature sensors humidity sensors IR sensors occupancy sensors e.g. using RFID sensors ambient light sensors motion detectors accelerometers and or gyroscopes.

The radios enables one or more radio communication networks in the smart home environments and allows a hub device to communicate with smart devices. In some implementations the radios are capable of data communications using any of a variety of custom or standard wireless protocols e.g. IEEE 802.15.4 Wi Fi ZigBee 6LoWPAN Thread Z Wave Bluetooth Smart ISA100.11a WirelessHART MiWi etc. custom or standard wired protocols e.g. Ethernet HomePlug etc. and or any other suitable communication protocol including communication protocols not yet developed as of the filing date of this document.

Communication interfaces include for example hardware capable of data communications using any of a variety of custom or standard wireless protocols e.g. IEEE 802.15.4 Wi Fi ZigBee 6LoWPAN Thread Z Wave Bluetooth Smart ISA100.11a WirelessHART MiWi etc. and or any of a variety of custom or standard wired protocols e.g. Ethernet HomePlug etc. or any other suitable communication protocol including communication protocols not yet developed as of the filing date of this document.

Memory includes high speed random access memory such as DRAM SRAM DDR RAM or other random access solid state memory devices and optionally includes non volatile memory such as one or more magnetic disk storage devices one or more optical disk storage devices one or more flash memory devices or one or more other non volatile solid state storage devices. Memory or alternatively the non volatile memory within memory includes a non transitory computer readable storage medium. In some implementations memory or the non transitory computer readable storage medium of memory stores the following programs modules and data structures or a subset or superset thereof 

Each of the above identified elements e.g. modules stored in memory of hub device may be stored in one or more of the previously mentioned memory devices e.g. the memory of any of the smart devices in smart home environment and corresponds to a set of instructions for performing a function described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various implementations. In some implementations memory optionally stores a subset of the modules and data structures identified above. Furthermore memory optionally stores additional modules and data structures not described above.

Each of the above identified elements may be stored in one or more of the previously mentioned memory devices and corresponds to a set of instructions for performing a function described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various implementations. In some implementations memory optionally stores a subset of the modules and data structures identified above. Furthermore memory optionally stores additional modules and data structures not described above.

Memory includes high speed random access memory such as DRAM SRAM DDR RAM or other random access solid state memory devices and optionally includes non volatile memory such as one or more magnetic disk storage devices one or more optical disk storage devices one or more flash memory devices or one or more other non volatile solid state storage devices. Memory optionally includes one or more storage devices remotely located from one or more processing units . Memory or alternatively the non volatile memory within memory includes a non transitory computer readable storage medium. In some implementations memory or the non transitory computer readable storage medium of memory stores the following programs modules and data structures or a subset or superset thereof 

Each of the above identified elements may be stored in one or more of the previously mentioned memory devices and corresponds to a set of instructions for performing a function described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures modules or data structures and thus various subsets of these modules may be combined or otherwise re arranged in various implementations. In some implementations memory optionally stores a subset of the modules and data structures identified above. Furthermore memory optionally stores additional modules and data structures not described above.

The built in sensors include for example one or more thermal radiation sensors ambient temperature sensors humidity sensors IR sensors occupancy sensors e.g. using RFID sensors ambient light sensors motion detectors accelerometers and or gyroscopes.

The radios enable one or more radio communication networks in the smart home environments and allow a smart device to communicate with other devices. In some implementations the radios are capable of data communications using any of a variety of custom or standard wireless protocols e.g. IEEE 802.15.4 Wi Fi ZigBee 6LoWPAN Thread Z Wave Bluetooth Smart ISA100.11a WirelessHART MiWi etc. custom or standard wired protocols e.g. Ethernet HomePlug etc. and or any other suitable communication protocol including communication protocols not yet developed as of the filing date of this document.

Communication interfaces include for example hardware capable of data communications using any of a variety of custom or standard wireless protocols e.g. IEEE 802.15.4 Wi Fi ZigBee 6LoWPAN Thread Z Wave Bluetooth Smart ISA100.11a WirelessHART MiWi etc. and or any of a variety of custom or standard wired protocols e.g. Ethernet HomePlug etc. or any other suitable communication protocol including communication protocols not yet developed as of the filing date of this document.

Memory includes high speed random access memory such as DRAM SRAM DDR RAM or other random access solid state memory devices and optionally includes non volatile memory such as one or more magnetic disk storage devices one or more optical disk storage devices one or more flash memory devices or one or more other non volatile solid state storage devices. Memory or alternatively the non volatile memory within memory includes a non transitory computer readable storage medium. In some implementations memory or the non transitory computer readable storage medium of memory stores the following programs modules and data structures or a subset or superset thereof 

Each of the above identified elements may be stored in one or more of the previously mentioned memory devices and corresponds to a set of instructions for performing a function described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various implementations. In some implementations memory optionally stores a subset of the modules and data structures identified above. Furthermore memory optionally stores additional modules and data structures not described above.

Each of the above identified elements may be stored in one or more of the previously mentioned memory devices and corresponds to a set of instructions for performing a function described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various implementations. In some implementations memory optionally stores a subset of the modules and data structures identified above. Furthermore memory optionally stores additional modules and data structures not described above.

Furthermore in some implementations the functions of any of the devices and systems described herein e.g. hub device hub server system client device smart device and or smart home provider server system are interchangeable with one another and may be performed by any other devices or systems where the corresponding sub modules of these functions may additionally and or alternatively be located within and executed by any of the devices and systems. As one example referring to a smart camera a smart doorbell and or a smart door lock detect a trigger event e.g. motion of an unverified user on the premises of the smart home environment while a smart camera and a smart hazard detector detect occupancy within the premises. Furthermore in this example a hub device determines a target state of the smart door lock based on the inputs of the devices that detected occupancy and the trigger event and provides instructions to the smart door lock accordingly. The devices and systems shown in and described with respect to are merely illustrative and different configurations of the modules for implementing the functions described herein are possible in various implementations.

The example illustrates a situation in which a trigger event is detected on the premises of the smart home environment . Trigger events are occurrences detected by one or more devices e.g. devices in a smart home environment that may or may not constitute a security breach. As some situations do not rise to the level of a security threat it is sometimes permissible and at times even desirable that a door lock device retains a current locked unlocked state until it is absolutely necessary to extend or retract the lock. This is particularly beneficial with respect to energy conservation which is critical given that many smart lock devices are battery operated and because actuating and retracting the bolt of a lock device consumes considerable power. Thus by determining a target state of the lock device at a particular instance e.g. when a trigger event is detected and comparing the target state to a current state of the lock device a determination can be made as to whether instructions should be sent to either actuate i.e. lock or retract i.e. unlock the bolt. As described in greater detail below the target state of the lock device may be based on several factors such as a current premises mode e.g. armed disarmed a number of occupants detected within the premises security profiles i.e. profiles indicating desired target states when a respective user is detected locations of detected users e.g. particular room and or user states e.g. asleep of detected users. The determination of a target state based on such factors may be entirely automatic or predefined by a user.

In the example illustrated an unverified user is detected approaching the front door of the smart home environment . The unverified user approaching is a trigger event that is detected by the presence detection capabilities of multiple devices positioned external to the structure including the smart door lock the smart doorbell and the camera . Upon detecting the trigger event one or more devices e.g. the hub device determine a target state of the lock device e.g. smart door lock . In this example assuming the threshold number of users to enable an unlocked state is four the target state of the lock device will be unlocked since five users e.g. users through are within the premises a number determined by collecting data from several devices e.g. the hub device for detecting user and camera and or the smart alarm system for detecting users through . Afterwards the determined target state of the lock device is compared against the current state of the lock device. If a discrepancy is detected e.g. current state of the lock device is unlocked but the target state is locked instructions are provided to the lock device based on the target state e.g. instructions to actuate the bolt of the door lock . Thus in situations in which the current state of the lock device already reflects the target state commands will not be sent to the lock device. As a result battery life is conserved and device wear is reduced.

Three different states of a lock device e.g. smart door lock are illustrated specifically states in which 1 the bolt is retracted a first unlocked state 2 the bolt is extended into door jamb a locked state and 3 the bolt is extended out of the a second unlocked state . Solely for the purposes of illustrating these various states a visible gap is shown between the door and the door jamb .

In most situations it is inadequate for security purposes to simply identify whether the bolt of a lock device is extended or retracted. For example when the bolt is extended out of the door jamb it is expected that the door is in a locked state as indicated by the Locked indication on the smart door lock in state 3 when in fact the door is effectively unlocked. This gives rise to a security risk that should be brought to the attention of occupants within or away from the premises especially in situations in which the lock device should be locked i.e. the target state of the lock device is a locked state since physical intervention would be required to properly lock the door.

The door jamb and or the bolt may include one or more passive active components for detecting whether the bolt has partially or fully extended into the door jamb . For example the one or more passive active components may operate jointly to form an electrical circuit where a short circuit would indicate that the bolt has extended into the door jamb and where an open circuit would indicate that the bolt is not extended into the door jamb . In some implementations the bolt and or the door jamb include touch sensitive components for detecting whether the bolt is extended into the door jamb .

As described in greater detail below in some implementations when the target state of the lock device is determined to be a locked state i.e. state 2 and it is detected that the lock device is currently in the second unlocked state i.e. state 3 instructions are provided to the lock device which cause the bolt to be retracted and a notification is sent to an occupant of the premises e.g. user .

The GUIs shown in may be displayed on any devices e.g. devices of the smart home environment connected to network having an output component e.g. display speaker tactile feedback generator etc. such as mobile phones e.g. client devices smart devices e.g. hub device smart television or other electronic devices e.g. personal computers tablet computers etc. . The GUIs may be provided by an application for managing devices of a smart home environment e.g. applications and or a web browser application.

Referring to the example of the notification in indicates that a trigger event has been detected at a smart home environment associated with the authorized user of the client device . In this example the notification indicates the particular area and time at which the trigger event was detected e.g. front door 11 00 PM the type of trigger event e.g. motion detected within proximity the number of detected occupants e.g. 5 the target state of the lock device e.g. unlocked and the current state of the lock device e.g. unlocked . In this example the threshold number of occupants for maintaining an unlocked target state of the lock device is four occupants. Thus because five occupants e.g. users through are detected the target state of the lock device e.g. smart door lock is an unlocked state. Consequently because the current state of the lock device is also an unlocked state the notification requests confirmation from the user to maintain the unlocked state.

Various user interface UI elements e.g. to are displayed corresponding to various operations and commands that an authorized user may choose to execute in response to the notification . The user may choose to keep the door unlocked lock the door or change the settings of his security profile .

The GUI illustrates various examples of such settings that be configured for a security profile . For example a user may keep the door locked if the user is the only occupant within the premises if the user is asleep or at all times . Optionally the user may configure other settings related to security profiles . Security profiles are described in greater detail with respect to .

The electronic device obtains a number of users detected within a premises. Referring to the example of five users e.g. users through are detected within the smart home environment . Furthermore the electronic device detects a trigger event related to a lock device e.g. smart door lock and the premises. As noted above trigger events are occurrences detected by one or more devices e.g. devices in a smart home environment that may or may not constitute a security breach. Premises upon which a trigger event may be detected include a perimeter established by the smart home environment e.g. in a room on the front yard outside of the structure on a porch of the structure etc. or by multiple smart home environments e.g. within a geo fence perimeter established by multiple smart devices across multiple smart home environments within a neighborhood . Trigger events may include detection of motion around or within the premises such as detecting motion within a predefined range of a structure e.g. within 20 feet of the structure within a 100 foot radius of the center of the structure or in a specified area of the premises e.g. front lawn back yard a room etc. . Trigger events may also include detecting an applied force on the premises e.g. touch detected on the structure touch detected on a door handle coupled to the smart door lock etc. . In some implementations trigger events include attempted openings of entryways e.g. window front door garage . In some implementations detecting the trigger event includes detecting that an unverified user entered the premises e.g. the smart home environment in including an area surrounding the structure . In some implementations detecting the trigger event includes detecting that an unverified user is approaching or attempting to enter the premises i.e. detecting that a user is approaching rather than breaching a perimeter of the premises . In some implementations trigger events are detected by one or more sensing capabilities of a device or a group of devices in the smart home environment . For example referring to the unverified user approaching the door is a trigger event that is detected based on data gathered from the camera the smart doorbell and or the smart door lock .

In some implementations the lock device includes a bolt e.g. smart door lock that includes a bolt . The state of the lock device is a locked state wherein the bolt of the lock device is extended into a door jamb e.g. state 2 a first unlocked state wherein the bolt of the lock device is refracted e.g. state 1 or a second unlocked state wherein the bolt of the lock device is extended but not into the door jamb e.g. state 3 .

Optionally in implementations in which an unverified user is detected step the electronic device determines whether the unverified user is an authorized user. In some implementations whether the unverified user is an authorized user is determined via user input received on an interactive touch screen device e.g. selection of a response on the touch screen of the hub device a biometric sample e.g. fingerprint retinal scan user credentials e.g. username and password PIN detection of an authenticated RFID device e.g. RFID tag wireless pairing of an authenticated device e.g. Wi Fi IR Bluetooth key fob and or any other personal identification means known to those skilled in the art.

When the trigger event is detected the electronic device determines a target state of the lock device. The target state is a state of the lock device e.g. locked unlocked that is desirable based on circumstantial information surrounding a trigger event e.g. data gathered by devices within a smart home environment pre configured user settings e.g. defined by a security profile behavioral user information and or other information known or unknown to a user. In other words the target state reflects whether the user given available circumstantial information surrounding a trigger event would want the lock device to be unlocked or locked. Furthermore as described in greater detail below a current state of the lock device is determined and if the current state and the target state of the lock device are not the same instructions are provided to the lock device based on the target state.

The target state of the lock device is determined based on at least one or a combination of factors. A non exhaustive discussion of such factors and signals is described with respect to with examples of determined target states being described with respect to target state is a locked state and target state is an unlocked state . Moreover in some implementations the target state of the lock device may be based on additional factors or signals that utilize the sensory and data processing capabilities of devices described herein e.g. devices of a smart home environment . Additional examples include hazard signals e.g. alerts regarding carbon monoxide levels personal details of occupants detected within the premises e.g. user IDs age gender relationship to other occupants home owner community status etc. environmental conditions e.g. local state of emergency extreme weather etc. or other signals and or information indicative of a risk associated with an unlocked locked state of the lock device.

In some implementations the target state of the lock device is determined based on the obtained number of users detected within the premises. In some implementations the target state of the lock device is an unlocked state if the number of users detected within the premises satisfies a predefined threshold . For example in if the predefined threshold of detected occupants within the premises is four the target state of the smart door lock is an unlocked state since five occupants are detected e.g. users through .

In some implementations if one or more users are detected within the premises the target state of the lock device is determined based on respective security profiles of the one or more detected users wherein a respective security profile of a respective user indicates a desired target state of the lock device when the respective user is within the premises. Security profile are configurable by each individual to dictate a desired target state e.g. locked unlocked of a lock device when the user is at home or away. An example of various conditions that may be configured for a security profile is provided in . In some implementations security profiles indicate a type of a respective user where the target state of the lock device is based on the type of the respective user e.g. security profiles for children indicate that the lock device should be in a locked state at all times . In some implementations the security profile of a respective user of one or more detected users indicates that the desired target state of the lock device is the locked state when the respective user is within the premises e.g. while user detected within the smart home environment target state of the smart door lock is a locked state . Security profiles may indicate the desired lock state based on a user state e.g. awake asleep engaged in a particular activity . In some implementations security profiles are specified with respect to time such as a particular time of day e.g. target state is unlocked during Monday mornings or a threshold duration of time for which a respective user is detected within the premises e.g. after a user is detected within the premises for more than an hour target state is locked .

In some implementations when a plurality of users with security profiles are detected within the premises the target state of the lock device is based on the security profile with the most stringent requirements e.g. the target state is a locked state if the security profile of any detected user indicates that the target state is locked at all times . In some implementations user security profiles have a respective priority where the target state of the lock device is determined based on the security profile with the highest priority.

In some implementations if one or more users are detected within the premises the target state of the lock device is determined based on a location of the one or more detected users. Locations may be a general region of a premises e.g. front lawn of the smart home environment or a particular room e.g. room . In some implementations the target state of the lock device is a locked state if the current location of a respective user of one or more detected users indicates that the respective user is located within a predefined area of the premises. For example an authorized user may specify that the target state should be a locked state if a trigger event is detected while the user is in a specified room e.g. a bathroom such as the room . In some implementations the target state of the lock device is based on a distance between a detected location of a user and the location of the detected trigger event e.g. the front door of the premises satisfies a predefined threshold e.g. target state is a locked state if distance is more than 100 feet away . In some implementations the target state of the lock device is based on the average distance of all users and the location of the trigger event is determined and whether the average distance satisfied a predefined threshold.

In some implementations if one or more users are detected within the premises the target state of the lock device is determined based on a user state of the one or more detected users wherein a respective user state of a respective user indicates that the respective user is asleep or active. In some implementations the target state of the lock device is a locked state if the user state of a respective user of one or more detected users indicates that the respective user is asleep. Additionally and or alternatively the user state indicates a particular activity in which a respective user is engaged e.g. target state is locked state if user is gardening cooking watching television etc. .

In some implementations the target state of the lock device is determined based on a current premises mode including an armed state and a disarmed state. In some implementations the premises mode is set manually by the user e.g. user arms the smart alarm system upon leaving the premises or automatically e.g. when smart home environment detects that a user leaves the premises . In some implementations the target state of the lock device is a locked state if the current premises mode is a first armed state e.g. an Away mode of a smart alarm system indicating that no authorized users are currently within the premises. In some implementations the target state of the lock device is a locked state if the current premises mode is a second armed state e.g. a Home Armed mode of a smart alarm system used for arming a smart home environment if a user is within the premises but asleep indicating that at least one authorized user is currently within the premises and that the lock device is configured to be in the locked state. In some implementations the target state of the lock device is an unlocked state if the current premises mode is a disarmed state e.g. a Home mode of a smart alarm system indicating that one authorized user is currently within the premises and that the lock device is configured to be in the unlocked state.

In some implementations the target state of the lock device is determined based on the determination of whether the unverified user is an authorized user. In some implementations the target state of the lock device is an unlocked state if the unverified user is an authorized user. For example the unverified user in is determined to be authorized based on detection of an authorized key fob.

In some implementations the target state of the lock device is determined based on the trigger event . For example the smart home environment may be configured such that the target state of the lock device remains unlocked if movement is detected around the window room so as to exclude expected movement of domestic animals from triggering a locked state.

In some implementations determining the target state includes obtaining one or more inputs from one or more devices distinct from the electronic device and the lock device. For example referring to the number of users within the premises is detected by retrieving data from the smart hazard detector and or the hub device in room for detecting user and by the smart alarm system smart wall plug smart wall switch and or camera in room for detecting users through .

In some implementations the factors upon which the target state of the lock device is based described above with respect to have respective weights wherein the target state of the lock device is determined based on the respective weights. Thus in some implementations factors having greater respective weights take precedence over other factors with lesser respective weights with respect to determining the target state of the lock device. As an example if the current premises mode has a greater respective weight than the weight associated with the number of users detected within the premises if the current premises mode is determined to be the second armed state a Home Armed mode where the target state is a locked state for example the target state of the lock device will be a locked state regardless of how many users are detected on the premises.

Referring to the electronic device determines a current state of the lock device. In some implementations the current state of the lock device is a locked state a first unlocked state i.e. bolt retracted or a second unlocked state i.e. bolt extended but not into door jamb . In some implementations the current state of the lock device is an unlocked state e.g. default state of the lock device is unlocked and lock device is only locked when necessary .

If the current state determined at of the lock device and the target state determined at of the lock device are not the same instructions are provided to the lock device based on the target state of the lock device. In doing so the lock device is operated e.g. extending retracting the bolt and power is consumed only if necessary based on the determined target state of the lock device. In some implementations the instructions cause the bolt of the lock device to be extended if the current state of the lock device is the first unlocked state and the target state of the lock device is the locked state i.e. the lock device is currently unlocked and should be locked . In some implementations the instructions cause the bolt of the lock device to be retracted if the current state of the lock device is the locked state and the target state of the lock device is the first unlocked state i.e. the lock device is currently locked and should be unlocked . In some implementations the instructions cause the bolt of the lock device to be retracted if the current state of the lock device is the second unlocked state and the target state of the lock device is the locked state i.e. the lock device is currently in a faulty lock position e.g. bolt extended but not into the door jamb and should be locked so bolt is first retracted . Optionally a notification regarding the current state of the lock device e.g. the second unlocked state is sent to one or more users so that the lock device may be properly secured.

In some implementations if the current state of the lock device and the target state of the lock device are not the same prior to providing the instructions to the lock device a notification is provided indicating that the current state and the target state are not the same. Subsequently an override input is received e.g. if instructions are based on a locked target state the override input corresponds to an unlocked target state wherein the instructions provided to the lock device are further based on the override input e.g. instructions to maintain current state of lock device . Prior to engaging the target state of the lock device a user is therefore given the opportunity to decide whether the automatically determined target state is desirable and may send an override command to toggle the target state. An example GUI for providing a notification e.g. notification and for receiving an override input e.g. for toggling the target state from locked to unlocked is illustrated in and described with respect to . Additionally and or alternatively an override input includes the manual extension or retraction of a bolt of the lock device by a user e.g. toggling the latch of a smart door lock . In some implementations the notification is provided and the override input is received after the instructions based on the target state of the lock device have been provided to the lock device. In some implementations a notification is provided indicating that the current state and the target state of the lock device are the same and the override input is received in response to the notification e.g. to toggle target state from unlocked to locked or locked to unlocked .

In some implementations after receiving an override input an adjustment rule is created in accordance with the override input. After creating the adjustment rule when a subsequent trigger event is detected a subsequent target state of the lock device is determined based on at least the adjustment rule. An example is illustrated in . Here the user provided an override input for keeping the lock device unlocked . As the notification in indicates the user is prompted with a request to create an adjustment rule based on the user s observed pattern for keeping the lock device unlocked during the particular time of day at which the trigger event was detected e.g. 11 00 PM . Accordingly if the user chooses to create an adjustment rule the target state of the lock device determined for subsequent trigger events of the same or similar nature e.g. movement detected at the front door around 11 00 PM will be based on the adjustment rule e.g. the target state will be an unlocked state as opposed to a locked state . Adjustment rules therefore dynamically track and adapt to user behavior and allow for the calibration and refinement of algorithms used for determining the target state of the lock device. In some implementations machine learning techniques known to those skilled in the art are used for automatically creating the adjustment rules. In some implementations the adjustment rule includes details with respect to the parameters upon which the initial target state was determined e.g. the initial target state determined prior to creating the adjustment rule was based on a threshold of five users detected within the premises . In some implementations the adjustment rule is created when a threshold number of override inputs has been received with respect to a plurality of trigger events having similar corresponding circumstances e.g. override inputs are received for five separate trigger events in which motion was detected at the front door at 11 00 PM while five occupants were detected within the premises . In some implementations the adjustment rule is created when an override input is received within a predefined window of time after instructions based on the target state are provided so as to avoid tracking of lock state toggles that do not suggest that the target state was inaccurately determined e.g. only lock toggles occurring within 1 minute after instructions are provided to the lock device are considered override inputs with respect to creating an adjustment rule .

As stated above operations of the method described herein are entirely interchangeable and may be performed by different devices or the same device. For example a smart device in the vicinity having a greater number of interconnections with nearby smart devices more processing power Internet connectivity and a persistent power source e.g. a hub device may be better suited for determining a target state of the lock device. In other implementations given the limited storage space of some smart devices it may be preferable that a remote server system e.g. smart home provider server system stores and determines appropriate target states of the lock device. In other implementations however the lock device itself manages its own state without requiring the additional processing power and storage capabilities of other devices. In some implementations a determination of where and by which devices operations are performed is based on current or changing environmental conditions e.g. in the event of a power outage the task of determining the target lock state is delegated to the lock device assuming it is battery operated .

For situations in which the systems discussed above collect information about users the users may be provided with an opportunity to opt in out of programs or features that may collect personal information e.g. information about a user s preferences or usage of a smart device . In addition in some implementations certain data may be anonymized in one or more ways before it is stored or used so that personally identifiable information is removed. For example a user s identity may be anonymized so that the personally identifiable information cannot be determined for or associated with the user and so that user preferences or user interactions are generalized for example generalized based on user demographics rather than associated with a particular user.

Although some of various drawings illustrate a number of logical stages in a particular order stages that are not order dependent may be reordered and other stages may be combined or broken out. While some reordering or other groupings are specifically mentioned others will be obvious to those of ordinary skill in the art so the ordering and groupings presented herein are not an exhaustive list of alternatives. Moreover it should be recognized that the stages could be implemented in hardware firmware software or any combination thereof.

The foregoing description for purpose of explanation has been described with reference to specific implementations. However the illustrative discussions above are not intended to be exhaustive or to limit the scope of the claims to the precise forms disclosed. Many modifications and variations are possible in view of the above teachings. The implementations were chosen in order to best explain the principles underlying the claims and their practical applications to thereby enable others skilled in the art to best use the implementations with various modifications as are suited to the particular uses contemplated.

