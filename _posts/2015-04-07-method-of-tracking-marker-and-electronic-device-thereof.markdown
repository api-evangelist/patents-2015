---

title: Method of tracking marker and electronic device thereof
abstract: Disclosed are a method and an apparatus for tracking a marker. The method of tracking a marker by an electronic device includes: detecting a position of a marker in a first frame; tracking a position of the marker in a second frame based on the position of the marker detected in the first frame; and estimating a 3D position based on the tracked position of the marker. Further, the method of tracking a marker is implemented through various embodiments.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09424651&OS=09424651&RS=09424651
owner: Samsung Electronics Co., Ltd.
number: 09424651
owner_city: Suwon-si
owner_country: KR
publication_date: 20150407
---
The present application is related to and claims priority under 35 U.S.C. 119 a to Korean Application Serial No. 10 2014 0041258 which was filed in the Korean Intellectual Property Office on Apr. 7 2014 the entire content of which is hereby incorporated by reference.

The present disclosure relates to a technology for tracking a position of a marker in an electronic device.

Electronic devices have been developed as multimedia devices that provide various services such as a voice and video call function an information input output function and data transmission or reception.

Recently various pieces of information are frequently shared through a quick response QR code. Information on the QR code is provided offline and online. According to various embodiments when a user scans a QR code of one product in a paper magazine through a camera of an electronic device the user is linked to a website of the corresponding product and acquires various pieces of product information such as information on the production circulation and price event information and coupons. Further when the user scans a QR code of a sports game or a movie poster through the camera the user receives promotional video and picture information coupon and ticket information and cinema or stadium information.

When information is provided based on a coordinate of a QR code an electronic device continuously detects a position change of the QR code. In certain embodiments the electronic device consumes resources thereof to continuously track the QR code. Accordingly the electronic device requires an improved method to track the QR code.

To address the above discussed deficiencies it is a primary object to provide apparatus and a method for tracking a marker included in a frame of an image.

According to various embodiments the electronic device provides an apparatus and a method for tracking a position of a marker in a current frame based on a position of a marker in a previous frame.

According to various embodiments the electronic device provides an apparatus and a method for tracking a position of a marker in a current frame by applying a scan line scheme to a position of a marker in a previous frame.

In accordance with various embodiments of the present disclosure a method of tracking a marker by an electronic device is provided. The method includes detecting a position of a marker in a first frame tracking a position of the marker in a second frame based on the position of the marker detected in the first frame and estimating a 3D position based on the tracked position of the marker.

The tracking of the position of the marker in the second frame includes identifying coordinates of edges of the marker detected in the first frame and tracking the position of the marker in the second frame by using scan lines orthogonal to the edges of the markers detected in the first frame.

The identifying of the coordinates of the edges of the marker detected in the first frame includes identifying coordinates of corners of the marker detected in the first frame determining lines connecting the coordinates of the corners of the marker detected in the first frame and identifying coordinates of the lines.

The detecting of the position of the marker in the first frame includes converting the first frame into a binary code or gray scale and detecting the position of the marker based on edge detection or thresholding on the first frame converted into the binary code or gray scale.

The method further includes applying noise reducing to the first frame having passed through the edge detection or thresholding.

The estimating of the 3D position includes estimating the 3D position by comparing a position of a reference marker with the detected position of the marker.

The method further includes reducing noise by applying at least one of a Kalman filter and a particle filter to the estimated 3D position based on a position spatial speed rotation and angular speed of the marker.

In accordance with another aspect of the present disclosure an electronic device for tracking a marker is provided. The electronic device includes a memory a camera and at least one processor for detecting a position of a marker in a first frame of an image acquired through the camera and making a control to store the detected position of the marker in the memory tracking a position of the marker in a second frame based on the position of the marker detected in the first frame stored in the memory and estimating a 3D position based on the tracked position of the marker.

The processor identifies coordinates of edges of the marker detected in the first frame stored in the memory and track the position of the marker in the second frame by using scan lines orthogonal to the edges of the markers detected in the first frame.

The processor identifies coordinates of corners of the marker detected in the first frame stored in the memory determine lines connecting the coordinates of the corners of the marker detected in the first frame and identify the coordinates of the edges of the marker by using coordinates of the lines.

The processor converts the first frame into a binary code or gray scale and detect the position of the marker based on edge detection or thresholding on the first frame converted into the binary code or gray scale.

The processor applies noise reducing to the first frame having passed through the edge detection or thresholding.

The processor estimates the 3D position by comparing a position of a reference marker with the detected position of the marker.

The processor reduces noise by applying at least one of a Kalman filter and a particle filter to the estimated 3D position based on a position spatial speed rotation and angular speed of the marker.

In accordance with various embodiments of the present disclosure a computer readable recording medium records a program is provided. The program executes operations including detecting a position of a marker in a first frame tracking a position of the marker in a second frame based on the position of the marker detected in the first frame and estimating a 3D position based on the tracked position of the marker.

Before undertaking the DETAILED DESCRIPTION below it may be advantageous to set forth definitions of certain words and phrases used throughout this patent document the terms include and comprise as well as derivatives thereof mean inclusion without limitation the term or is inclusive meaning and or the phrases associated with and associated therewith as well as derivatives thereof mean to include be included within interconnect with contain be contained within connect to or with couple to or with be communicable with cooperate with interleave juxtapose be proximate to be bound to or with have have a property of or the like and the term controller means any device system or part thereof that controls at least one operation such a device may be implemented in hardware firmware or software or some combination of at least two of the same. It should be noted that the functionality associated with any particular controller may be centralized or distributed whether locally or remotely. Definitions for certain words and phrases are provided throughout this patent document those of ordinary skill in the art should understand that in many if not most instances such definitions apply to prior as well as future uses of such defined words and phrases.

Hereinafter various embodiments will be described with reference to the accompanying drawings. Although specific embodiments are illustrated in the drawings and related detailed descriptions are discussed in the present disclosure the present disclosure includes various modifications and several embodiments. Accordingly the present disclosure is not limited to a specific implementation form and it should be understood that the present disclosure includes all changes or equivalents and substitutes included in the spirit and scope of the present disclosure. In connection with descriptions of the drawings similar components are designated by the same reference numeral.

For example the electronic device is one or a combination of a smart phone a tablet Personal Computer PC a mobile phone a video phone an e book reader a desktop PC a laptop PC a netbook computer a Personal Digital Assistant PDA a Portable Multimedia Player PMP an MP player a mobile medical device an electronic bracelet an electronic necklace an electronic appessory a camera a wearable device an electronic clock a wrist watch a home appliance for example refrigerator air conditioner cleaner an artificial intelligence robot a Television TV a Digital Video Disk DVD player an audio player oven microwave oven washing machine air cleaner and electronic picture frames various types of medical devices for example Magnetic Resonance Angiography MRA Magnetic Resonance Imaging MRI Computed Tomography CT scanner an ultrasonic device and the like a navigation device a Global Positioning System GPS receiver an Event Data Recorder EDR a Flight Data Recorder FDR a set top box a TV box for example SAMSUNG HOMESYNC APPLE TV or GOOGLE TV an electronic dictionary a vehicle infotainment device electronic equipment for a ship for example a navigation device for ship a gyro compass and the like avionics a security device electronic clothes an electronic key a camcorder game consoles a Head Mounted Display HMD a flat panel display device an electronic frame an electronic album furniture or a part of buildings structures having a communication function an electronic board an electronic signature receiving device a wearable device and a projector. It is obvious to those skilled in the art that the electronic device according to the present disclosure is not limited to the aforementioned devices. It is obvious to those skilled in the art that the electronic device according to the present disclosure is not limited to the aforementioned devices.

Referring to an electronic device includes a bus a processor a memory a user input module a display module a communication module or a camera .

The bus is a circuit for connecting components for example the bus the processor the memory the user input module the display module the communication module or the camera included in the electronic device and transferring communication for example control messages between the components.

The processor receives commands from the components included in the electronic device through the bus analyze the received commands and perform calculations or data processing according to the analyzed commands. The processor executes one or more applications stored in the memory and provides services according to the corresponding applications. For example the processor is configured as illustrated in to track a marker in an image through the execution of a marker detection program a marker tracking program a 3D position estimation program a filtering program and a display control program .

The processor includes one or more Application Processors APs or one or more Communication Processors CPs . The AP and the CP are included in the processor or are included in different integrated circuit IC packages respectively. Further the APs and the CPs are included in one IC package. The AP controls a plurality of hardware or software components connected to the AP by driving an operating system or an application program and perform processing of various pieces of data including multimedia data and calculations. The AP is implemented by a System on Chip SoC . The CP performs at least some of the multimedia control functions. Further the CP distinguishes between and authenticates terminals within a communication network using a subscriber identification module for example a SIM card . At this time the CP provides a user with services including a voice call a video call a text message and packet data. Further the CP controls data transmission or reception of the communication module . The AP or the CP loads commands or data received from at least one of a non volatile memory and other components connected to each of the AP and the CP in a volatile memory and processes the loaded commands or data. Further the AP or the CP stores data received from or generated by at least one of the other components in a non volatile memory. The CP manages a data link in communication between an electronic device including hardware and other electronic devices connected to the electronic device and performs a function of switching a communication protocol. The CP is implemented by the SoC. The processor further includes a Graphic Processing Unit GPU .

The memory stores commands or data received from the processor or other components for example the user input module the display module the communication module and the camera or generated by the processor or other components. At this time the memory includes an internal buffer and an external buffer. For example the memory compresses or decompresses an image acquired through the camera and store the compressed or decompressed image. In another example the memory stores the position of the marker.

Further the memory includes the marker detection program the marker tracking program the 3D position estimation program the filtering program and the display control program . Each application includes a programming module and each programming module includes software firmware hardware or a combination of two or more thereof.

The marker detection program includes at least one software component for detecting a marker included in an image. For example the marker detection program detects a marker in an image acquired through the camera . More specifically the marker detection program converts a frame of the image into binary code or gray scale to detect a position of the marker through edge detection or thresholding. The marker detection program further applies noise reducing after the edge detection or thresholding.

The marker tracking program includes at least one software component for tracking a position of the marker based on the position of the marker detected by the marker detection program . For example when a second frame is currently acquired and a position of the marker is detected in a first frame through the marker detection program the marker tracking program tracks the position of the marker in the current frame the second frame based on the position of the marker detected in the first frame. More specifically referring to when the position of the marker is detected in the first frame the marker tracking program identifies coordinates of edges of the marker detected through the marker detection program and The coordinates of the edges of the detected marker are stored in the memory. After identifying the coordinates of the edges of the marker detected in the first frame the marker tracking program determines lines connecting the edges of the detected marker as illustrated in . The marker tracking program tracks a position of the marker in the current frame the second frame using scan lines orthogonal to the lines .

The 3D position estimation program includes at least one software component for estimating a 3D position based on the position of the marker tracked by the marker tracking program . For example the 3D position estimation program estimates a 3D position based on the position of the marker tracked by the marker tracking program . The 3D position estimation program provides a 3D position to an application program to display a route along which the movement is made at a crosswalk as illustrated in to estimate topography in a construction site as illustrated in and to determine a landing position of an aircraft as illustrated in .

The filtering program includes at least one software component for applying a filter to the 3D position estimated by the 3D position estimation program . For example the filtering program reduces noise by applying at least one of a Kalman filter and a particle filter to the estimated 3D position based on a position spatial speed rotation and angular speed of the marker.

The display control program includes at least one software component for making a control to display at least one piece of display data through the display module . For example the display control program displays display data according to a control of an application program having received the 3D position from the 3D position estimation program through the display module .

Further the memory includes an internal memory or an external memory. The internal memory includes at least one of a volatile memory for example a Dynamic Random Access Memory DRAM a Static RAM SRAM or a Synchronous Dynamic RAM SDRAM and a non volatile memory for example a One Time Programmable Read Only Memory OTPROM a Programmable ROM PROM an Erasable and Programmable ROM EPROM an Electrically Erasable and Programmable ROM EEPROM a mask ROM a flash ROM a NAND flash memory or a NOR flash memory . The internal memory is a Solid State Drive SSD type. The external memory includes at least one of a Compact Flash CF a Secure Digital SD a Micro Secure Digital Micro SD a Mini Secure Digital Mini SD an extreme Digital xD and a memory stick.

The memory further includes a kernel middleware and an Application Programming Interface API . The kernel controls or manages system resources for example the bus the processor or the memory used for executing operations or functions implemented in the remaining other programming modules for example the middleware the API or applications . Further the kernel provides an interface through which the middleware API or applications access individual components of the electronic device to control or manage the components. The middleware serves to mediate between the API or applications and the kernel so that they communicate to exchange data with each other. Further the middleware performs load balancing for operation requests received from one or more applications by using a method of assigning priorities to the operation requests to first use system resources for example the bus the processor or the memory of the electronic device . The API corresponds to an interface through which applications control functions provided from the kernel or middleware and includes at least one interface or function for performing a file control window control image processing or text control.

The user input module receives commands or data from the user and transmits the received commands or data to the processor or the memory through the bus . For example the user input module includes a touch panel a pen sensor a key or an ultrasonic input device. For example the touch panel recognizes a touch input through at least one type of for example a capacitive type a resistive type an infrared type and an ultrasonic type. The touch panel further includes a controller. In the capacitive type the touch panel recognizes proximity hovering as well as a direct touch. The touch panel further includes a tactile layer. At this time the touch panel provides the user with a tactile reaction. For example the pen sensor is implemented using a method identical or similar to a method of receiving a touch input of a user or using a separate recognition sheet. For example the key include a keypad or a touch key. For example the ultrasonic input device is a device which identifies data by detecting sound waves by a microphone of the electronic device through a pen generating an ultrasonic signal and performs radio recognition.

The display module displays an image a video or data for the user. For example the display module includes a panel or hologram. For example the panel is a Liquid Crystal Display LCD or an Active Matrix Organic Light Emitting Diode AM OLED . Further the panel is implemented to be for example flexible transparent or wearable. The panel is implemented by one module together with the touch panel. For example the hologram shows a three dimensional image in the air using interference of light. In addition the display module further includes a control circuit for controlling the panel or the hologram.

The display module displays display data according to a control of the display control application . The display module displays display data of an application program having received the 3D position from the 3D position estimation program according to a control of the display control program .

The communication module connects communication between the electronic device and other electronic devices and . The communication module supports a short range communication protocol for example Wi Fi BLUETOOTH BT or Near Field Communication NFC or network communication for example Internet Local Area Network LAN Wide Area Network WAN telecommunication network cellular network or satellite network a Plain Old Telephone Service POTS or the like .

The camera acquires a subject for photography through an image sensor. An image processor not shown corresponds to an Image Signal Processor ISP and converts output data for example raw data from the camera into image frame RGB YUV data having a predetermined standard format and provide the converted data to the processor . The image processor is included in the camera . Further the image processor is included in the processor .

Each of the electronic devices and is a device that is the same as the electronic device for example same type device or another device for example different type device .

Additionally the electronic device further includes a sensor module. The sensor module includes at least one of a gesture sensor a gyro sensor an atmospheric pressure sensor a magnetic sensor an acceleration sensor a grip sensor a proximity sensor a Red Greed and Blue RGB sensor a bio sensor a temperature humidity sensor an illumination sensor and an Ultra Violet UV sensor. Further the sensor module measures a physical quantity or detects an operation state of the electronic device and converts the measured or detected information into an electrical signal. For example the sensor module includes an E nose sensor an electromyography EMG sensor an electroencephalogram EEG sensor an electrocardiogram ECG sensor or a fingerprint sensor. The sensor module further includes a control circuit for controlling one or more sensors included in the sensor module.

The names of the above described hardware components according to various embodiments vary depending on the type of electronic device. The hardware according to various embodiments includes at least one of the above described components a few of the components can be omitted or an additional component can be further included. Also some of the hardware components according to various embodiments can be combined into one entity which performs functions identical to those of the relevant components before the combination.

As illustrated in the processor includes a marker detection unit a marker tracking unit a 3D position estimation unit a filtering unit and a display control unit .

The marker detection unit detects a marker in an image by executing the marker detection program stored in the memory . For example the marker detection unit detects a marker in an image acquired through the camera . More specifically the marker detection unit converts a frame of the image into binary code or gray scale to detect a position of the marker through edge detection or thresholding. The marker detection unit further applies noise reducing after the edge detection or thresholding.

The marker tracking unit tracks a position of the marker based on the position of the marker detected by the marker detection unit by executing the marker tracking program stored in the memory . For example when a second frame is currently acquired and a position of the marker is detected in a first frame through the marker detection unit the marker tracking unit tracks the position of the marker in the current frame the second frame based on the position of the marker detected in the first frame. More specifically referring to when the position of the marker is detected in the first frame the marker tracking unit identifies coordinates of edges of the marker detected through the marker detection unit and The coordinates of the edges of the detected marker are stored in the memory. After identifying the coordinates of the edges of the marker detected in the first frame the marker tracking unit determines lines connecting the edges of the detected marker as illustrated in . Thereafter the marker tracking unit tracks a position of the marker in the current frame the second frame by using scan lines orthogonal to the lines .

The 3D position estimation unit estimates a 3D position based on the position of the marker tracked by the marker tracking unit by executing the 3D position estimation program stored in the memory . For example the 3D position estimation unit estimates a 3D position based on the position of the marker tracked by the marker tracking unit . The 3D position estimation unit provides a 3D position to an application program to display a route along which the movement is made at a crosswalk as illustrated in to estimate topography in a construction site as illustrated in and to determine a landing position of an aircraft as illustrated in .

The filtering unit applies a filter to the 3D position estimated by the 3D position estimation unit by executing the filtering program stored in the memory . For example the filtering unit reduces noise by applying at least one of a Kalman filter and a particle filter to the 3D position estimated by the 3D position estimation unit based on a position spatial speed rotation and angular speed of the marker.

The display control unit displays display data through the display module by executing the display control program stored in the memory . For example the display control unit displays display data according to a control of an application program having received the 3D position from the 3D position estimation unit .

In step the electronic device detects a position of a marker in a first frame. For example the electronic device detects the position of the marker in the first frame of the image acquired through the camera. The electronic device converts the first frame into binary code or gray scale in order to detect the position of the marker in the first frame and perform edge detection or thresholding. Additionally the electronic device applies noise reducing to the first frame which has passed through the edge detection or thresholding.

In step the electronic device tracks a position of the marker in a second frame. For example the electronic device identifies coordinates of edges of the marker detected in the first frame and tracks a position of the marker in the second frame by using scan lines orthogonal to the edges of the marker detected in the first frame.

In step the electronic device track a 3D position based on the position of the marker. For example the electronic device estimates the 3D position by comparing a position of a reference marker with the position of the detected marker. Additionally the electronic device reduces noise by applying at least one of a Kalman filter and a particle filter to the 3D position estimated based on a position spatial speed rotation and angular speed of the marker. The electronic device provides the estimated 3D position to the driven application program.

In step the electronic device acquires an image through the camera in step . The electronic device acquires the image through the camera in the unit of frames. Further the image acquired through the camera is a decompressed or compressed type.

Thereafter in step the electronic device identifies whether a position of the marker is detected in an N 1th frame. For example when a second frame is currently acquired the electronic device identify whether the position of the marker is detected in the first frame. A process of identifying whether the position of the marker is detected in the N 1th frame is performed to identify whether a position of the marker detected in a previous frame is used to track the position of the marker in the current frame.

In step when the position of the marker is detected in the N 1th frame the electronic device tracks a position of the marker in an Nth frame based on the position of the marker detected in the N 1th frame. For example when the second frame is currently acquired and the position of the marker is detected in the first frame the electronic device tracks the position of the marker in the current frame based on the position of the marker detected in the first frame. More specifically referring to when the position of the marker is detected in the first frame the electronic device identifies coordinates of edges of the marker detected in the first frame and the coordinates of the edges of the detected marker are stored in the memory. After identifying the coordinates of the edges of the marker detected in the first frame the electronic device determines lines connecting the edges of the detected marker as illustrated in . The electronic device tracks a position of the marker in the current frame the second frame by using scan lines orthogonal to the lines .

In step when the position of the marker is not detected in the N 1th frame the electronic device detects the position of the marker in the Nth frame. For example when the second frame is currently acquired and the position of the marker is not detected in the first frame the electronic device detects the position of the marker in the current frame the second frame . More specifically the electronic device converts the second frame into binary code or gray scale to detect a position of the marker through edge detection or thresholding. The electronic device further applies noise reducing after the edge detection or thresholding.

In step when the position of the marker is detected in the Nth frame the electronic device track a position of the marker in an N 1th frame based on the position of the marker detected in the Nth frame. For example when the position of the marker is detected in the second frame the electronic device tracks the position of the marker in a current frame a third frame based on the position of the marker detected in the second frame. More specifically referring to when the position of the marker is detected in the second frame the electronic device identifies coordinates of edges of the marker detected in the second frame and the coordinates of the edges of the detected marker are stored in the memory. After identifying the coordinates of the edges of the marker detected in the second frame the electronic device determines lines connecting the edges of the detected marker as illustrated in . Thereafter electronic device tracks a position of the marker in the current frame the third frame by using scan lines orthogonal to the lines .

In step the electronic device estimates a 3D position based on the position of the marker. For example the electronic device estimates the 3D position based on the position of the marker detected in the previous frame the first frame in step or the second frame in step . The 3D position is used for displaying a route along which the movement is made at a crosswalk as illustrated in estimate topography in a construction site as illustrated in and determining a landing position of an aircraft as illustrated in .

As described above by tracking the position of the marker in the current frame through the use of the position of the marker detected in the previous frame the electronic device does not need to perform a process of detecting the marker in every frame thereby reducing resource waste which is generated in the process of detecting the marker.

Methods stated in claims and or specifications according to various embodiments are implemented by hardware software or a combination of hardware and software.

In the implementation of software a computer readable storage medium for storing one or more programs software modules is provided. The one or more programs stored in the computer readable storage medium are configured for execution by one or more processors within the electronic device. The one or more programs include instructions for allowing the electronic device to perform methods stated in claims and or specifications according to various embodiments.

The programs software modules or software are stored in non volatile memories including a random access memory and a flash memory a Read Only Memory ROM an Electrically Erasable Programmable Read Only Memory EEPROM a magnetic disc storage device a Compact Disc ROM CD ROM Digital Versatile Discs DVDs or other type optical storage devices or a magnetic cassette. Alternatively the programs are stored in a memory configured by a combination of some or all of the listed components. Further a plurality of configuration memories is included.

In addition the programs are stored in an attachable storage device which accesses the electronic device through communication networks such as the Internet Intranet Local Area Network LAN Wide LAN WLAN and Storage Area Network SAN or a combination thereof. The storage device accesses the electronic device through an external port.

Although specific exemplary embodiments have been described in the detailed description of various embodiments of the present disclosure various changes and modifications can be made without departing from the spirit and scope of various embodiments of the present disclosure. Therefore the scope of the present disclosure should not be limited to the aforementioned embodiments but should be defined by the equivalents to the appended claims as well as the claims.

