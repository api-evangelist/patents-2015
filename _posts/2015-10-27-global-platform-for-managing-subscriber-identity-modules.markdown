---

title: Global platform for managing subscriber identity modules
abstract: Disclosed is method comprising: storing in a home location register (HLR) at least one subscription record of a mobile device of the plurality of mobile devices, the mobile device having a subscriber identity module (SIM) identified by a currently activated first international mobile subscriber identity (IMSI), the currently activated first IMSI belonging to a set of IMSIs allocated to the system, wherein the provisioning server is operative to: receive a notification that the mobile devices has moved into a first one of the wireless networks; confirm that an allocation rule is satisfied; add and activate a second one of the IMSIs in the set of IMSIs to the HLR and remove the currently activated first IMSI from the HLR; and send the second IMSI to the mobile device to enable the mobile device to communicate wirelessly in the first wireless network as a local device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09462453&OS=09462453&RS=09462453
owner: Jasper Technologies, Inc.
number: 09462453
owner_city: Santa Clara
owner_country: US
publication_date: 20151027
---
This application is a continuation of U.S. patent application Ser. No. 14 624 419 entitled Global Platform for Managing Subscriber Identity Modules filed on Feb. 17 2015 which is a continuation of U.S. patent application Ser. No. 14 511 022 entitled Global Platform for Managing Subscriber Identity Modules filed on Oct. 9 2014 issued on Oct. 21 2015 as U.S. Pat. No. 8 965 332 which is a continuation of U.S. patent application Ser. No. 14 270 143 entitled Global Platform for Managing Subscriber Identity Modules filed May 5 2014 issued on Oct. 21 2014 as U.S. Pat. No. 8 868 042 which is a continuation of U.S. patent application Ser. No. 13 911 438 entitled Global Platform for Managing Subscriber Identity Modules filed on Jun. 6 2013 issued as U.S. Pat. No. 8 725 140 on May 13 2014. U.S. patent application Ser. No. 13 911 438 claims the benefit of priority for prior Provisional Patent Application No. 61 567 017 filed on Dec. 5 2011 and is also a continuation of U.S. patent application Ser. No. 13 413 516 entitled Global Platform for Managing Subscriber Identity Modules filed on Mar. 6 2012 and issued as U.S. Pat. No. 8 478 238 on Jul. 2 2012 which is a continuation in part of co pending U.S. patent application Ser. No. 11 119 401 entitled SELF PROVISIONING OF WIRELESS TERMINALS IN CELLULAR NETWORKS filed Apr. 29 2005 and issued as U.S. Pat. No. 8 346 214 on Jan. 1 2013 a continuation in part of co pending U.S. patent application Ser. No. 11 398 493 entitled SELF PROVISIONING OF WIRELESS TERMINALS IN CELLULAR NETWORKS filed Apr. 4 2006 and issued as U.S. Pat. No. 8 498 615 on Jul. 30 2013 and a continuation in part of co pending U.S. patent application Ser. No. 11 804 582 entitled WIRELESS COMMUNICATION PROVISIONING USING STATE TRANSITION RULES filed May 18 2007 and issued as U.S. Pat. No. 8 745 184 on Jun. 3 2014.

In a wireless system the wireless terminal has a Subscriber Identity Module SIM which contains the identity of the subscriber. One of the primary functions of the wireless terminal with its SIM in conjunction with the wireless network system is to authenticate the validity of the wireless terminal for example a cell phone and the wireless terminal s subscription to the network. The SIM is typically a microchip that is located on a plastic card a SIM card which is approximately 1 cm square. The SIM card is then placed in a slot of the wireless terminal to establish the unique identity of the subscriber to the network. In some cases the wireless terminal itself contains the subscriber identification and authentication functionality so that a separate SIM and or SIM card is not utilized.

In the SIM or within the wireless terminal an authentication key and a subscriber identification pair are stored. An example of such a pair would be the authentication key Ki as used in GSM networks and the associated subscriber identification IMSI International Mobile Subscriber Identity . Another example would be the authentication key A Key and subscriber identification MIN Mobile Identification Number as used in CDMA and TDMA networks. In either case a corresponding identical set of an authentication key and a subscriber identification are stored in the network. In the SIM or in the wireless terminal and within the network the authentication functionality is run using the local authentication key and some authentication data which is exchanged between the SIM and the network. If the outcomes of running the authentication functionality in the SIM and in the network leads to the same result then the SIM wireless terminal are considered to be authenticated for the wireless network.

In existing wireless systems a SIM or wireless terminal has an authentication key associated with only one subscriber identification and this subscriber identity is typically tied to a local region or network. When a SIM or wireless terminal authenticates in a region that is not local or with a network that is not local then usually the SIM or wireless terminal needs to pay additional roaming service charges to connect with the wireless network. It would be beneficial if the SIM or wireless terminal were not permanently tied to a local region or network. For example equipment vendors would then be able to sell the same equipment in multiple regions and for multiple networks with one physical SIM card. Additionally end users may avoid roaming service charges or at least more favorable subscription terms may be available.

The invention can be implemented in numerous ways including as a process an apparatus a system a composition of matter a computer readable medium such as a computer readable storage medium or a computer network wherein program instructions are sent over optical electronic or wireless communication links. In this specification these implementations or any other form that the invention may take may be referred to as techniques. A component such as a processor or a memory described as being configured to perform a task includes both a general component that is temporarily configured to perform the task at a given time or a specific component that is manufactured to perform the task. In general the order of the steps of disclosed processes may be altered within the scope of the invention.

A detailed description of one or more embodiments of the invention is provided below along with accompanying figures that illustrate the principles of the invention. The invention is described in connection with such embodiments but the invention is not limited to any embodiment. The scope of the invention is limited only by the claims and the invention encompasses numerous alternatives modifications and equivalents. Numerous specific details are set forth in the following description in order to provide a thorough understanding of the invention. These details are provided for the purpose of example and the invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity technical material that is known in the technical fields related to the invention has not been described in detail so that the invention is not unnecessarily obscured.

A system and method for provisioning a subscriber identification to a wireless terminal in a wireless network is disclosed. A control center in which one or more control servers are located receives transmission from a wireless network. The transmission indicates that a wireless terminal is roaming outside its home network. The control center provisions a new subscriber identification to the wireless terminal where the subscriber identification is selected based at least in part on the identification of the visited wireless network in which the wireless terminal is roaming and a server database that provides prescribed subscriber identification s for a given visited network. Using the newly provisioned subscriber identification the wireless terminal acquires wireless service from the serving wireless network as a local wireless terminal or as a different visiting wireless terminal based on the server s prescription of subscriber identity for the particular visited network. The wireless terminal can operate as a local wireless terminal for that network or for a network with which the home network of the new subscriber identity has a preferred relationship. The wireless terminal can acquire telecommunications service as a local or visiting terminal by using a stored set of authentication key subscriber identification that is specific to the network it is operating in or the home network of the new subscriber identity. In various embodiments the wireless terminal can operate as a local or visiting terminal by receiving or downloading a specific set of authentication key subscriber identification or by receiving or downloading a subscriber identification to pair with an existing authentication key.

Communications from a wireless terminal are passed to another wireless terminal over the same wireless network using a local wireless network base station to the other wireless terminal or the communications are carried by a wired network or other wireless network to the destination terminal. Wireless network center communicates with its associated HLR where sets of authentication key subscriber identification are stored to help in authenticating a wireless terminal that is acquiring wireless network service. One example of a subscriber identification is an international mobile subscriber identifier IMSI . Wireless network center and its associated HLR communicate with provisioning server to enable a wireless terminal to acquire a new subscriber identification over the air OTA that is paired with an existing authentication key and or a new set of authentication key subscriber identification. In some embodiments the transmission of the authentication key or the authentication key subscriber identification is encrypted. In various embodiments the authentication key or the authentication key subscriber identification is are decrypted at the wireless terminal and or in the SIM card. The old authentication key new subscriber identification pair and or the new set of authentication key subscriber identification are added in the appropriate manner to the HLR AuC databases or the HLR databases associated with wireless network centers so that the wireless terminal can be authenticated and can acquire wireless network service using the new subscriber identification and or authentication key set. In various embodiments the wireless network system is a cellular system a GSM GPRS wireless system a CDMA or WCDMA wireless system or a TDMA wireless system or any other type of wireless network system.

In the wireless terminal performs a location update with the visited wireless network using the new Subscriber Identification. In the network center HLR AuC and provisioning server searches for the Subscriber Identification in its ADS and retrieves the corresponding Authentication Key. In a challenge is generated RAND and with the Authentication Key is used to calculate a Response SRES using an authentication algorithm A3 . In the RAND is sent to the wireless terminal and a response is requested. In the wireless terminal uses the RAND with the Authentication Key from its ADS to independently calculate a SRES using encryption algorithm A3 stored in its SIM. In the SRES is sent to the network center and or HLR AuC and or provisioning server . In authentication is passed if the received SRES matches the locally computed SRES otherwise the authentication fails.

Wireless communication provisioning using state transition or allocation rules associated with an identifier is disclosed. A first state associated with one or more identifiers is defined. A second state associated with one or more identifiers is defined. A state transition or allocation rule is defined between the first and second states. In some embodiments the one or more identifiers are stored in a subscriber identity module SIM . In some embodiments the one or more identifiers are IMSIs. In some embodiments a plurality of states are defined a plurality of state transition or allocation rules are defined and a group of states and transition allocation rules are selected and associated with one or more identifiers. In some embodiments wireless communications comprise mobile data mobile cellular communications or any other appropriate wireless communications.

In some embodiments a customer organization defines a sequence of states for devices that communicate data with a global platform provider s application server via one or more wireless carrier networks. The provider e.g. the global platform provider enables the communication via the wireless carrier networks. The plurality of states enables the activity of provisioning of a customer device or provider device used in the data communication with appropriate billing access and or authorization for each activity especially with regard to testing activation deactivation etc.

Carrier network includes carrier switching network e.g. SGSN serving General Packet Radio Services GPRS support node used in Global System for Mobile Communications GSM networks carrier data traffic handler e.g. GRX a GPRS roaming exchange and or SS7 signaling system 7 system and a plurality of carrier towers represented in by tower . Communications of data traffic to and from device are received by carrier network by a carrier tower which communicates the data traffic with carrier data traffic handler . Carrier data traffic handler communicates data traffic with carrier switching network . Carrier switching network can communicate with network and Authentication Center Home Location Register HLR and Authentication Authorization and Accounting AAA Server e.g. a Radius server of provider system . In one embodiment provider system is operated by a global platform provider as a control center.

Network enables communication with customer system which includes customer application server and customer administrator . In some embodiments network comprises the internet a local area network a wide area network a wired network a wireless network or any other appropriate network or networks for communicating with customer system . Customer application server receives data from and transmits data to device regarding the customer s services or products. In various embodiments the customer s services includes transaction related services monitoring services and or location tracking services. In some embodiments a state transition rule or allocation defining transition from one provisioning state to another provisioning state associated with device is implemented on customer application server . In some embodiments a state transition or allocation rule defining transition from one provisioning state to another provisioning state associated with device is not known to device .

Provider system includes HLR AAA server application server database DB administrator . In an embodiment where the provider system is the control center of a global platform provider application server can perform the function of a provisioning server such as provisioning server of in addition to other functions. Provider system enables customer services by enabling data communication services via the carrier network with device . HLR enables communication with the provider system by indicating if device is allowed to have data communication through carrier network with customer system . AAA server enables specific permissions that are available regarding data communications between device and customer system via carrier network . Application server enables provisioning and billing for the provider. Provisioning comprises enabling devices such as device to have mobile data communication services using a mobile carrier network. DB includes information related to provisioning and billing for the provider. Administrator administrates provider system. Customer system administrator communicates with provider application server to administrate customer system usage billing provisioning for data communication service of carrier network enable by provider . In some embodiments functionality of HLR and AAA server are performed by the same server are partitioned between two servers but not exactly as described herein or any other server configuration to achieve the same functionality.

In some embodiments one or more states are based on the lifecycle of the service of a wireless communication device.

A test ready state can be used to allow a manufacturer to test a SIM or a device with a SIM and its network communication infrastructure before delivering the SIM or device with a SIM to an end user a retail location or a distributor. A test ready state can be a default state for a SIM that allows authentication and authorization with a global platform provider s HLR and AAA server but does not have any billing associated with it. A SIM in a test ready state is able to conditionally transact data voice and or Short Message Service SMS communications for example some limits may be placed on the communications while in this state such as communication may occur up to a maximum data transmitted received amount or up to a maximum number of days since the initial data communication. A test ready state may have no prerequisite state have no limitation to a next state e.g. all states allowed as next state have no exclusivity rule be a required state and be allowed to have automatic and or manual transitions.

An inventory state can be used to allow a SIM to be placed in a device and associated with an identifier of the device e.g. a terminal identifier or a point of sale terminal identifier . An inventory state cannot coexist with an activation ready state. An inventory state cannot connect with the network and requires a manual change in order to change state. An inventory state may have a test ready state as a prerequisite have no limitation to a next state e.g. all states allowed as next state have an exclusivity rule in that it cannot coexist with an activation ready state not be a required state and be allowed only to have manual transitions.

An activation ready state can be used to allow a SIM to be ready to be activated. An activation ready state will authenticate and authorize with the HLR and AAA server of the provider system but no billing will occur. After the first data communication e.g. first packet data protocol PDP context communication the SIM state may automatically change to an activated state. An activation ready state may have a test ready state or inventory state as a prerequisite have no limitation to a next state e.g. all states allowed as next state have an exclusivity rule in that it cannot coexist with an inventory state not be a required state and be allowed to have an automatic transition to an activated state or a manual transition to other states.

An activated state can be used to allow a SIM or a device with a SIM to be used by a user. In an activated state the SIM will authenticate and authorize on the HLR and AAA server of the provider system. Billing commences immediately on changing to this state. The provider system may check to make sure that the proper information is contained on the provider system s HLR and AAA server databases as well as the billing databases. In some cases the checks will include checking the identifiers stored in the SIM e.g. international mobile subscriber identifier IMSI customer identifier device identifier etc. . An activated state may have a test ready state inventory or activation ready state as a prerequisite have possible next states of deactivated purged or retired have no exclusivity rule not be a required state and be only allowed to have a manual transition to a next state.

A deactivated state can be used to allow a SIM or a device with a SIM to be deactivated by the user. In a deactivated state the SIM will not be allowed to authenticate and will not be billed. The AAA server of the provider system and the gateway GPRS support node GGSN of carrier networks will be sent a notification e.g. a packet informing them that the SIM has been deactivated. An deactivated state may have an activated state as a prerequisite have possible next states of activated purged or retired have no exclusivity rule not be a required state and be only allowed to have a manual transition to a next state.

A retired state can be used to allow a SIM or a device with a SIM to be retired by the provider or the user. In a retired state the SIM will not be allowed to authenticate and billing ends. A retired state may have any state as a prerequisite except purged have any possible next states i.e. all states possible have no exclusivity rule not be a required state and be only allowed to have a manual transition to a next state.

A purged state can be used to allow a SIM or a device with a SIM to be purged by the provider. In a purged state the SIM will not be allowed to authenticate and the subscriber identification is removed from the system e.g. IMSI permanently removed from the HLR of the provider system . A purged state may have any state as a prerequisite have no possible next states have no exclusivity rule not be a required state and be not allowed to have any transitions to a next state.

In some embodiments a state is defined by a customer. In some embodiments the state is defined using an Internet based service.

In some embodiments a state definition does not support communication sessions and a transition to that state will terminate existing open communication sessions.

In some embodiments a first wireless communication provisioning state allows a communication device to pass traffic without incurring any billing charges and an associated state transition rule allows an automated transition to a second provisioning state where the second provisioning state incurs billing charges. In some embodiments a first wireless communication provisioning state allows a communication device to pass traffic without incurring any billing charges and an associated state transition rule allows an automated transition to the second provisioning state where the second provisioning state does not allow the communication device to pass traffic.

In state transition or allocation rule s between two states is are defined. A transition from one state to another may occur automatically on a predetermined condition or manually. If the transition is based on a condition is met e.g. upon first data communication packet data protocol context established the state will automatically change from one to another e.g. activation ready state to activated state . In various embodiments the transition condition is based on one or more of the following a predetermined amount of elapsed time since a prior state transition an amount of service usage above a predetermined amount of service usage one or more service signalings or any other appropriate condition. In various embodiments the condition is based on an exclusivity rule a state rule a communication data transfer or any other appropriate condition. A manual change from one state to another requires an intervention directly from the provider system for example an action through a manager portal by uploading a file to the SIM or device with the SIM or an application programming interface API call.

In various embodiments a state transition or allocation rule can be defined for an individual device or a group of devices or different rules can be defined for different individual devices or different groups of devices or any other appropriate combination as appropriate for meeting the needs of a supplier of devices.

In some embodiments a group of states are defined and a group of transition allocation rules are defined and then a selection of states and transition allocation rules are associated with one or more identifiers.

In some embodiments a customer selects a state transition allocation rule. In some embodiments a customer defines a state transition allocation rule. In various embodiments the state transition allocation rule is selected and or defined using an Internet based service using a local program interface or any other appropriate manner of selecting and defining a state transition rule.

In some embodiments a state transition allocation rule when activated terminates existing communication sessions.

In inventory state a device is waiting to be transferred to a user. In this state no connectivity is enabled and no billing occurs. The state is maintained until transition . Transition occurs when the OEM or the customer or its channel service providers manually triggers a state change. When the state change is triggered the SIM is changed to activated state . In activated state a device is being used by user. In activated state the SIM is able to establish a PDP session and connect and transfer data to a customer application server via a carrier network. The user is billed for the service provided by the provider. Billing information is provided to the customer by gathering the relevant data from the network carriers and the provider s data bases. The SIM remains in the active state until triggered to transition. Transition may be triggered manually or automatically. In various embodiments transition is triggered automatically by a maximum number of connections allowed a maximum amount of data transferred a maximum amount of time since the start of PDP sessions or any other appropriate automatic trigger condition. In some embodiments the user or the customer can also manually trigger transition to a deactivated state .

In deactivated state a device is finished being used as requested by an end user or by a customer system request by being in a deactivated state. In deactivated state the SIM is not able to connect and establish a PDP session. While in deactivated state there is no billing for connectivity. Transition can be triggered automatically e.g. after a period of time or manually e.g. by the customer . When transition is triggered the SIM changes state to purged state . In purged state the SIM and the device the SIM is in is removed from the system. In purged state the SIM is not able to connect and establish a PDP session. There is no billing associated with the trigger or the state. Accounting for the customer may remove the item from inventory or asset lists. Purged state automatically removes the IMSI and International Circuit Card Identifier ICCID from the HLR of the provider system.

In activation ready state a device is waiting to be transferred to a user. In various embodiments the activation ready state is set after testing by the OEM when the device is being shipped from the OEM to retail locations distribution partners directly to end users or when the SIM or device with the SIM is about to be in the end users hands but is not ready to have billing service fully implemented. In this state SIM connectivity is enabled and a PDP session can be established. Upon the first PDP session occurring transition is triggered. When the state change is triggered the SIM is changed to activated state . In activated state a device is being used by user. In activated state the SIM is able to establish a PDP session and connect and transfer data to a customer application server via a carrier network. The user is billed for the service provided by the provider. Billing information is provided to the customer by gathering the relevant data from the network carriers and the provider s data bases. The SIM remains in the active state until triggered to transition. Transition may be triggered manually or automatically. In various embodiments transition is triggered automatically by a maximum number of connections allowed a maximum amount of data transferred a maximum amount of time since the start of PDP sessions or any other appropriate automatic trigger condition. In some embodiments the user or the customer can also manually trigger transition to a deactivated state .

In deactivated state a device is finished being used as requested by an end user or by a customer system request by being in a deactivated state. In deactivated state the SIM is not able to connect and establish a PDP session. While in deactivated state there is no billing for connectivity. Transition can be triggered automatically e.g. after a period of time or manually e.g. by the customer . When transition is triggered the SIM changes state to purged state . In purged state the SIM and the device the SIM is in is removed from the system. In purged state the SIM is not able to connect and establish a PDP session. There is no billing associated with the trigger or the state. Accounting for the customer may remove the item from inventory or asset lists. Purged state automatically removes the IMSI and International Circuit Card Identifier ICCID from the HLR of the global platform provider system.

A global platform for managing subscriber identity modules SIMs of wireless devices is described. The global platform provides a business support system BSS and operational support system OSS for a wide range of network carriers that may be operating in different countries or continents. The global platform allows partner carriers to deliver wireless communication services to the customers in a seamless way to the customers regardless of their geographical locations. Through an alliance agreement that each partner carrier enters with the global platform provider a mobile device purchased from one partner carrier can freely move to an area e.g. country or continent operated by another partner carrier while incurring minimal if any performance impacts and roaming charges.

As described herein a mobile device may be a cell phone an eBook an automobile with wireless tracking ability a digital picture frame a game console a tablet computer a laptop computer or other portable wireless communication devices. Further the customers described herein may be an end consumer an organization or an enterprise that has an interest in the global deployment of network connected devices. In a conventional wireless system the operation of every network carrier is bound by the country. Thus a device e.g. an automobile purchased in one country cannot be easily shipped to another country without incurring permanent roaming charges in that other country. Further since the automobile is roaming in the other country its data traffic will be routed through its home network for both inbound and outbound signals and data transmission. This routing has a negative performance impact on the wireless communication. The global platform described herein allows such deployment to happen with minimal if any impact on the performance and roaming charges.

A mobile device having one of these IMSIs programmed in its SIM can avoid or reduce its roaming charges in regions that are operated by network carriers partnered with the global platform provider. The mobile device may incur temporary roaming charges after leaving its home network and entering a partner carrier network e.g. partner carrier network or . However at some point in time when one or more pre determined allocation rules are satisfied the mobile device can be provisioned with a new IMSI that is local to the partner carrier network or an IMSI that is predetermined by the global platform provider to be preferred for that visited country. With this new IMSI the mobile device can transmit and receive wireless packets in the partner carrier network without incurring roaming charges and without having the transmissions routed through its home network.

The determination of whether the mobile device can switch to a local or otherwise preferred IMSI can be made by a control center based on a set of allocation rules. The control center is coupled to a global platform provider network and includes at least a provisioning server and an over the air OTA server . Both the control center and the global platform provider network are operated by the global platform provider. The control center and the global platform provider network can include multiple servers multiple storage devices and multiple network nodes distributed across multiple geographical areas.

In one embodiment the global platform provider network includes a Home Location Register HLR that includes one or more servers and databases for managing and storing mobile subscriber information. The mobile subscriber information includes the International Mobile Subscriber Identity IMSI the MSISDN location information e.g. the identity of the currently serving Visitor Location Register VLR to enable the routing of mobile terminated calls and service subscription and restrictions. The HLR is coupled to an authentication center AuC for performing authentication of a mobile device that requests a network connection.

The HLR is operated and updated by the global platform provider. The HLR communicates with the partner carrier networks via Signaling System 7 SS7 messages through Signal Transfer Points STPs or via Internet Protocol IP messages through Mobility Management Entities MMEs . The SS7 IP messages can be sent via dedicated SS7 IP connections and or SS7 IP inter carrier networks . In some embodiments the HLR shown herein is a logical representation. Physically the HLR can be distributed across multiple geographical areas. In some embodiments the HLR can include distributed segments of the HLRs owned by multiple partner carriers. Thus in these embodiments the HLR can be the sum of multiple HLR segments with each HLR segment owned by a different partner carrier. For example a partner carrier may own and operate an HLR and a segment of the HLR can be read and updated by the global platform provider. The updates performed by the global platform provider can include adding provisioning and removing purging IMSIs and setting and editing subscriber wireless service permissions. The IMSIs that can be added and removed by the global platform provider are within a set of IMSIs that are allocated to the global platform provider. That is the HLR stores and manages the IMSIs that belong to the set of IMSIs allocated to the global platform provider. In one embodiment when a new IMSI is provisioned to a subscriber the subscriber may also be changed to a new billing account owner. That is the contractual ownership for the subscriber s wireless service may change with the provision of a new IMSI. After the provision of a new IMSI the subscriber may receive a billing statement from a new partner carrier in addition to or instead of the original carrier.

In the embodiment of each of the partner carrier networks includes one or more MSCs and one or more SGSNs . The MSCs are responsible for routing circuit switched voice calls fax data and short message service SMS . The MSCs can forward outgoing circuit switched signals from a mobile device to a circuit switched network not shown and can forward outgoing short messages to an SMS center SMSC . The circuit switched network and the SMSC then deliver the signals messages to their intended destinations. In addition the MSCs are responsible for requesting the HLR AuC to authenticate a mobile device when the mobile device requests for a network connection.

The SGSNs are responsible for routing data packets. Each SGSN is identified by an Access Point Name APN which can be used in a Domain Name System DNS query to resolve the IP address of a GGSN e.g. GGSN that serves the SGSN . The APN resolution function is shown as the APN DNS . The GGSN then delivers outgoing data packets from the mobile device to their destination s via a packet switched network e.g. the Internet . Before granting access to the packet switched network the GGSN can use Remote Authentication Dial In User Service RADIUS protocol to provide Authentication Authorization and Accounting AAA management shown as RADIUS . For incoming data packets destined for the mobile device the GGSN resolves the IP address of the destination SGSN using the SGSN s APN in a DNS query shown as the APN DNS . The communication between the SGSN and the GGSN can be provided by a GPRS roaming exchange GRX network for inter carrier connections. In some embodiments the communication between the SGSN and its associated GGSN can be provided by an intra carrier connection.

In the embodiment of the HLR the SMSC the GGSNs and the RADIUS are within the global platform provider network . In alternative embodiments one or more of the HLR the SMSC the GGSNs and the RADIUS can be located within and operated by one or more of partner carrier networks . Regardless of their locations and ownership the control center has access to each of the HLR the SMSC the GGSNs and the RADIUS to manage the information of the mobile subscribers who directly or indirectly e.g. through a partner carrier or through a customer organization having a contract with a partner carrier or with the global platform provider subscribes to the service of the global platform provider.

In some embodiments the IMSIs allocated to the global platform provider belong to a set of IMSIs that contain one or more contiguous or non contiguous segments of IMSIs. An IMSI is a unique non dialable number allocated to each mobile device in the GSM system. The IMSI is stored in the SIM of a mobile device and uniquely identifies a subscriber identity. Generally an IMSI includes three parts 1 the mobile country code MCC consisting of three digits for identifying a country 2 the mobile network code MNC consisting of two or three digits for identifying a network carrier and 3 the mobile subscriber identity number MSIN consisting of nine to ten digits.

In one embodiment the IMSIs allocated to the global platform provider can have an MCC and an MNC that identify a country and one of the partner carrier networks as well as an MSIN that includes one or more digits having one or more pre designated values. As an example suppose that the MCC 123 and the MNC 956 identify a country and a partner carrier network PN operated within that country respectively. Further suppose that the partner carrier agrees that among all of the IMSIs identifying the partner carrier network PN those IMSIs with the first digit of the MSIN being 9 or any other pre designated value are allocated to the global platform provider. Thus the IMSI 123 456 9xxxxxxxx indicates a range of IMSIs allocated to the global platform provider with x being any value from 0 9. This range of IMSIs can be provisioned by the control center to mobile devices that roam into the partner carrier network PN and need to be switched to local or otherwise preferred IMSIs. Since the global platform provider can enter into agreements with multiple partner carriers the IMSIs allocated to the global platform provider can include many disjoint ranges.

The MISN is to be distinguished from the Mobile Station International Subscriber Directory Number MSISDN . The MSISDN is a dialable number that a caller uses to reach a mobile device. Generally the HLR stores the IMSI and the MSISDN as a pair for identifying a mobile subscriber s device and for routing calls to the mobile subscriber. A SIM is uniquely associated to an IMSI while the MSISDN can change in time e.g. due to portability of phone numbers .

When a network carrier orders mobile devices from its equipment suppliers the equipment suppliers typically pre program each SIM in the mobile device with one or more IMSIs. In one embodiment the pre programmed SIM includes a bootstrap IMSI which is one of the IMSIs allocated to the global platform provider. This bootstrap IMSI also identifies a country and a carrier network that is the home to the pre programmed SIM. When an end user purchases a mobile device through any partner carrier channel the service representative creates a service order to enter the end user s subscription information including the MSISDN using the bootstrap IMSI as a key. This service order with the key is submitted to the control center which creates a subscription record that uses the bootstrap IMSI as the key and adds the subscription record to the HLR . The mobile device can then start wireless communications using the bootstrap IMSI within its home network or a partner carrier network.

In the example shown in the MSIN portion of the IMSI before and after roaming is the same e.g. 987654321 wherein the leading digit 9 indicates that the IMSI is allocated to the global platform provider. However it is understood that the global platform provider can provision another available MSIN that is different from 987654321 to its roaming devices.

Specific examples of allocation rules may include that the allocation rule specifies that a new or second one of the IMSIs is selected based on an initial network registration of the first IMSI e.g. bootstrap IMSI and or in an activation ready state or an activated state. A second one of the IMSIs is selected based on a country of an initial network registration and or in an activated state. A second one of the IMSIs is selected based on a first network registration of the first IMSI with a CDR. A second one of the IMSIs is selected based on a first network registration of the first IMSI with a CDR and or in an activated state. A second one of the IMSIs is selected based on a first network registration of the first IMSI with a first billable CDR in a first billing cycle. A second one of the IMSIs is selected based on a first network registration of the first IMSI with a last billable CDR in a first billing cycle. A second one of the IMSIs is selected based on a first network registration of the first IMSI with x billable volume in a first billing cycle.

If an IMSI replacement should be made the control center triggers IMSI switching by having the OTA send the new IMSI to the mobile device and by adding provisioning the new IMSI to the HLR and removing purging the bootstrap IMSI from the HLR .

With the new IMSI the mobile device can communicate wirelessly in the deployed location as if it were operating within its home network or as an otherwise preferred roaming network. Incoming and outgoing mobile transmissions may be managed by the local partner carrier network without being re routed to the home network. In one embodiment the control center can monitor the network usage and collect billing information. The billing information can be forwarded to the local partner carrier or preferred home network partner which generates an invoice for account settlement. The invoice will be sent to the end user or a customer organization through which the end user subscribes to the mobile communication service. In an alternative embodiment the control center can generate the invoice based on the collected billing information.

In the following description with reference to a number of examples illustrating the process of IMSI switching are described. To avoid obscuring the description some of the signaling paths and network elements are omitted from . Some of the network elements shown in refer back to . However it is understood that the processes illustrated in may be implemented by a network architecture different from the embodiment of . Further to simplify the discussion the following examples only describe 2 3G GSM packet based routing. It is understood that other types of wireless data such as messaging voice calls faxes and other types of wireless communications can also be supported as well as other wireless technologies such as 4G LTE or LTE Advanced. In the following description bracketed numerals are associated with actions while un bracketed numerals are associated with entities or data items e.g. IMSIs .

The notification from the VLR triggers the provisioning server to check allocation rules to determine whether the mobile device should be switched to a local or otherwise preferred new IMSI e.g. a first IMSI local to the first carrier network . This local IMSI is also within a range of IMSIs allocated to the global platform provider. By using the first IMSI in the deployed location the mobile device can communicate wirelessly without being treated as a roaming device. Additionally as the first IMSI is allocated to the global platform provider the global platform provider can monitor the signaling or usage of the mobile device to determine whether there is a need to perform further IMSI switching.

If the provisioning server determines that an IMSI switching should be performed based on the allocation rules the provisioning server directs the OTA server to send the first IMSI to the mobile device . The first IMSI can be sent by encrypted transmission e.g. an encrypted SMS . Upon receipt of the first IMSI the mobile device changes its profile in the SIM and returns a receipt to the OTA server . The provisioning server also updates the HLR by adding provisioning and activating the first IMSI to the mobile device s subscription record. When the mobile device re registers on the first carrier s network with the new IMSI via the HLR the HLR will send a message to the provisioning server that the mobile device has successfully registered with the new IMSI . At this point the provisioning server will remove the bootstrap IMSI from the HLR .

Upon authentication the BS tower routes data packets from the mobile device to the SGSN operated by the second carrier. The SGSN forwards the data packets to the GGSN operated by the first carrier . Before granting access to an external network e.g. the Internet the GGSN requests authorization and authentication from the Radius . Upon receipt of authorization and authentication the GGSN routes the data packets to the Internet . In this example as the GGSN is operated by the first carrier it is the first carrier that provides the CDRs and accounting to the usage and rating database operated by the global platform provider . In other embodiments the Radius server may provide the CDRs and accounting to the usage and rating database .

If the provisioning server determines that an IMSI switching should be performed based on the allocation rules the provisioning server directs the OTA server to send the second IMSI to the mobile device . The second IMSI can be sent by encrypted transmission e.g. an encrypted SMS . Upon receipt of the second IMSI the mobile device changes its profile in the SIM and returns a receipt to the OTA server . The provisioning server also updates the HLR by adding provisioning and activating the second IMSI to the subscription record of the mobile device and by removing purging the first IMSI from the HLR .

As described herein the processes performed by the provisioning server the OTA server the HLR and other network elements shown in may be implemented by specific configurations of hardware such as application specific integrated circuits ASICs configured to perform certain operations or having a predetermined functionality or electronic devices executing software instructions stored in memory embodied in a non transitory computer readable storage medium. Examples of non transitory computer readable storage media include magnetic disks optical disks random access memory read only memory flash memory devices phase change memory and the like. In addition such electronic devices typically include a set of one or more processors coupled to one or more other components such as one or more storage devices non transitory machine readable storage media user input output devices e.g. a keyboard a touchscreen and or a display and network connections. The coupling of the set of processors and other components is typically through one or more busses and bridges also termed as bus controllers . Thus the storage device of a given electronic device typically stores code and or data for execution on the set of one or more processors of that electronic device. One or more parts of an embodiment of the invention may be implemented using different combinations of software firmware and or hardware.

Although the foregoing embodiments have been described in some detail for purposes of clarity of understanding the invention is not limited to the details provided. There are many alternative ways of implementing the invention. The disclosed embodiments are illustrative and not restrictive.

