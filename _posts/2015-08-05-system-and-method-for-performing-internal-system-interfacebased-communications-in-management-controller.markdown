---

title: System and method for performing internal system interface-based communications in management controller
abstract: Certain aspects direct to systems and methods for performing internal system interface-based communications between Intelligent Platform Management Interface (IPMI) stack and management services in management controllers. The system includes a server management device, which has an IPMI stack and at least one management service module. The management service module, when executed, provides a corresponding management service. In operation, the server management device defines an internal system interface, and configures the internal system interface to establish an inter-process communication (IPC) channel between the IPMI stack and the management service using the internal system interface. Thus, an internal communication between the IPMI stack and the management service may be performed through the IPC channel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09519527&OS=09519527&RS=09519527
owner: AMERICAN MEGATRENDS, INC.
number: 09519527
owner_city: Norcross
owner_country: US
publication_date: 20150805
---
The present disclosure relates generally to server management technology and more particularly to systems and methods for performing internal system interface based communications between Intelligent Platform Management Interface IPMI stack and management services in management controllers.

The background description provided herein is for the purpose of generally presenting the context of the disclosure. Work of the presently named inventors to the extent it is described in this background section as well as aspects of the description that may not otherwise qualify as prior art at the time of filing are neither expressly nor impliedly admitted as prior art against the present disclosure.

Intelligent Platform Management Interface IPMI is an industry standard for system monitoring and event recovery. Currently baseboard management controller BMC chips fully support the IPMI Specification version 2.0 hereinafter the IPMI v2.0 which is publicly available from INTEL CORPORATION and is incorporated herein by reference. The IPMI v2.0 provides a common message based interface for accessing all of the manageable features in a compatible computer.

Generally a typical server management controller stack has an IPMI stack running at its core to serve the direct IPMI requests. Meanwhile the server management controller stack may have additional management services. Practically there is a need for communication between any of the management services to the IPMI stack within the server management controller stack. However the IPMI Specification does not define any internal interface to the BMC for the management services to communicate with the IPMI stack.

Therefore an unaddressed need exists in the art to address the aforementioned deficiencies and inadequacies.

Certain aspects of the disclosure direct to a system which includes a server management device. In certain embodiments the server management device includes a processor and a storage device storing an Intelligent Platform Management Interface IPMI stack at least one management service module and computer executable code. Each of the at least one management service module when executed at the processor is configured to provide a corresponding management service. The computer executable code when executed at the processor is configured to define an internal system interface and configure the internal system interface to establish an inter process communication IPC channel between the IPMI stack and the management service using the internal system interface and perform internal communication between the IPMI stack and the management service through the IPC channel.

In certain embodiments the management service is a service providing at least one out of band OOB functionality for the server management device.

In certain embodiments the management service is a web server service a keyboard video and mouse KVM service a Common Information Model CIM service a Systems Management Architecture for Server Hardware SMASH service or a combination thereof.

In certain embodiments the computer executable code includes a configuration module configured to define the internal system interface and configure the internal system interface to establish the IPC channel and an internal communication module configured to perform the internal communication between the IPMI stack and the management service through the IPC channel.

In certain embodiments the configuration module is configured to configure the internal system interface to establish IPC channel by referencing the IPC channel with an IPC file such that the IPC channel is accessible by the IPMI stack and the management service.

In certain embodiments the IPC channel is accessible by the IPMI stack and the management service as a file system wherein the file system includes a first file location representing the IPMI stack and a second file location representing the management device.

Certain aspects of the disclosure direct to a method for performing internal system interface based communications in a server management device. In certain embodiments the method includes defining by the server management device an internal system interface and configuring the internal system interface to establish an inter process communication IPC channel between an Intelligent Platform Management Interface IPMI stack and at least one management service within the server management device using the internal system interface wherein the at least one management service is provided by executing at least one management service module in the server management device and performing by the server management device internal communication between the IPMI stack and the at least one management service through the IPC channel.

In certain embodiments the server management device is a BMC. In certain embodiments the internal system interface is a UDS or an IPC socket. In certain embodiments each of the at least one management service is a service providing at least one OOB functionality for the server management device and wherein the at least one management service is a web server service a KVM service a CIM service a SMASH service or a combination thereof.

In certain embodiments the internal system interface is configured to establish IPC channel by referencing the IPC channel with an IPC file such that the IPC channel is accessible by the IPMI stack and the management service.

In certain embodiments the IPC channel is accessible by the IPMI stack and the management service as a file system wherein the file system includes a first file location representing the IPMI stack and a second file location representing the management device.

Certain aspects of the disclosure direct to a non transitory computer readable medium storing an IPMI stack at least one management service module and computer executable code. In certain embodiments the code when executed at a processor of a server management device is configured to define an internal system interface and configure the internal system interface to establish an IPC channel between the IPMI stack and at least one management service within the server management device using the internal system interface wherein the at least one management service is provided by executing at least one management service module at the processor of the server management device and perform an internal communication between the IPMI stack and the at least one management service through the IPC channel.

In certain embodiments the server management device is a BMC. In certain embodiments the internal system interface is a UDS or an IPC socket. In certain embodiments each of the at least one management service is a service providing at least one OOB functionality for the server management device and wherein the at least one management service is a web server service a KVM service a CIM service a SMASH service or a combination thereof.

In certain embodiments the computer executable code includes a configuration module configured to define the internal system interface and configure the internal system interface to establish the IPC channel and an internal communication module configured to perform the internal communication between the IPMI stack and the management service through the IPC channel.

In certain embodiments the configuration module is configured to configure the internal system interface to establish IPC channel by referencing the IPC channel with an IPC file such that the IPC channel is accessible by the IPMI stack and the management service.

In certain embodiments the IPC channel is accessible by the IPMI stack and the management service as a file system wherein the file system includes a first file location representing the IPMI stack and a second file location representing the management device.

These and other aspects of the present disclosure will become apparent from the following description of the preferred embodiment taken in conjunction with the following drawings and their captions although variations and modifications therein may be affected without departing from the spirit and scope of the novel concepts of the disclosure.

The present disclosure is more particularly described in the following examples that are intended as illustrative only since numerous modifications and variations therein will be apparent to those skilled in the art. Various embodiments of the disclosure are now described in detail. Referring to the drawings like numbers if any indicate like components throughout the views. As used in the description herein and throughout the claims that follow the meaning of a an and the includes plural reference unless the context clearly dictates otherwise. Also as used in the description herein and throughout the claims that follow the meaning of in includes in and on unless the context clearly dictates otherwise. Moreover titles or subtitles may be used in the specification for the convenience of a reader which shall have no influence on the scope of the present disclosure. Additionally some terms used in this specification are more specifically defined below.

The terms used in this specification generally have their ordinary meanings in the art within the context of the disclosure and in the specific context where each term is used. Certain terms that are used to describe the disclosure are discussed below or elsewhere in the specification to provide additional guidance to the practitioner regarding the description of the disclosure. For convenience certain terms may be highlighted for example using italics and or quotation marks. The use of highlighting has no influence on the scope and meaning of a term the scope and meaning of a term is the same in the same context whether or not it is highlighted. It will be appreciated that same thing can be said in more than one way. Consequently alternative language and synonyms may be used for any one or more of the terms discussed herein nor is any special significance to be placed upon whether or not a term is elaborated or discussed herein. Synonyms for certain terms are provided. A recital of one or more synonyms does not exclude the use of other synonyms. The use of examples anywhere in this specification including examples of any terms discussed herein is illustrative only and in no way limits the scope and meaning of the disclosure or of any exemplified term. Likewise the disclosure is not limited to various embodiments given in this specification.

Unless otherwise defined all technical and scientific terms used herein have the same meaning as commonly understood by one of ordinary skill in the art to which this disclosure pertains. In the case of conflict the present document including definitions will control.

As used herein around about or approximately shall generally mean within 20 percent preferably within 10 percent and more preferably within 5 percent of a given value or range. Numerical quantities given herein are approximate meaning that the term around about or approximately can be inferred if not expressly stated.

As used herein the terms comprising including carrying having containing involving and the like are to be understood to be open ended i.e. to mean including but not limited to.

As used herein the phrase at least one of A B and C should be construed to mean a logical A or B or C using a non exclusive logical OR. It should be understood that one or more steps within a method may be executed in different order or concurrently without altering the principles of the present disclosure.

As used herein the term module may refer to be part of or include an Application Specific Integrated Circuit ASIC an electronic circuit a combinational logic circuit a field programmable gate array FPGA a processor shared dedicated or group that executes code other suitable hardware components that provide the described functionality or a combination of some or all of the above such as in a system on chip. The term module may include memory shared dedicated or group that stores code executed by the processor.

The term code as used herein may include software firmware and or microcode and may refer to programs routines functions classes and or objects. The term shared as used above means that some or all code from multiple modules may be executed using a single shared processor. In addition some or all code from multiple modules may be stored by a single shared memory. The term group as used above means that some or all code from a single module may be executed using a group of processors. In addition some or all code from a single module may be stored using a group of memories.

The term interface as used herein generally refers to a communication tool or means at a point of interaction between components for performing data communication between the components. Generally an interface may be applicable at the level of both hardware and software and may be uni directional or bi directional interface. Examples of physical hardware interface may include electrical connectors buses ports cables terminals and other I O devices or components. The components in communication with the interface may be for example multiple components or peripheral devices of a computer system.

The terms chip or computer chip as used herein generally refer to a hardware electronic component and may refer to or include a small electronic circuit unit also known as an integrated circuit IC or a combination of electronic circuits or ICs.

The terms node or computing node as used herein generally refer to a basic unit of computer systems. A node may be implemented by a physical device or a virtual device. For example a computing device such as a personal computer a laptop computer a tablet or a mobile device may function as a node. A peripheral device such as a printer a scanner or a system on chip SoC may also function as a node. A virtual device such as a virtual machine VM may also function as a node. When defining nodes on the Internet a node refers to a device or a data point having an IP address.

The present disclosure relates to computer systems. As depicted in the drawings computer components may include physical hardware components which are shown as solid line blocks and virtual software components which are shown as dashed line blocks. One of ordinary skill in the art would appreciate that unless otherwise indicated these computer components may be implemented in but not limited to the forms of software firmware or hardware components or a combination thereof.

The apparatuses systems and methods described herein may be implemented by one or more computer programs executed by one or more processors. The computer programs include processor executable instructions that are stored on a non transitory tangible computer readable medium. The computer programs may also include stored data. Non limiting examples of the non transitory tangible computer readable medium are nonvolatile memory magnetic storage and optical storage.

Certain aspects of the present disclosure direct to systems and methods for performing internal system interface based communications in a server management device. As discussed above a typical server management controller stack has an IPMI stack running at its core to serve the direct IPMI requests. The IPMI Specification defines standard BMC in band interfaces such as a keyboard controller style KCS interface a block transfer BT interface and a server management interface chip SMIC for the host to BMC communications. Further the IPMI Specification also defines out of band OOB session based interfaces such as the local area network LAN the Intelligent Platform Management Bus IPMB interface and other serial interface or ports. However the IPMI Specification does not define any internal interface to the BMC for the management services to communicate with the IPMI stack. Thus certain embodiments of the present disclosure provide systems and methods to implement a software implemented internal system interface to fulfill the need for internal communication between the management services and the IPMI stack within the server management controller stack.

The server management device is a management controller to control a plurality of servers or services. In certain embodiments the server management device may be implemented by a system on chip SoC such as a BMC or a service processor SP or by other management controllers.

In certain embodiments the server management device may include necessary hardware and software components to perform certain predetermined tasks. For example as shown in the server management device includes a processor a memory and a storage device . Further the server management device may include other hardware components and software components not shown to perform its corresponding tasks. Examples of these hardware and software components may include but not limited to other required memory interfaces buses Input Output I O modules and peripheral devices.

The processor is configured to control operation of the server management device . In certain embodiments the processor may be a central processing unit CPU . The processor can execute any computer executable code or instructions such as the firmware of the server management device or other applications and instructions of the server management device . In certain embodiments the server management device may run on more than one processor such as two processors four processors eight processors or any suitable number of processors.

The memory can be a volatile memory such as the random access memory RAM for storing the data and information during the operation of the v server management device . In certain embodiments the memory may be a volatile memory array.

The storage device is a non volatile data storage media for storing the applications of the server management device . Examples of the storage device may include non volatile memory such as flash memory memory cards USB drives hard drives floppy disks optical drives or any other types of data storage devices. In certain embodiments the server management device may have multiple storage devices which may be identical storage devices or different types of storage devices and the applications may be stored in one or more of the storage devices of the server management device .

As shown in the storage device of the server management device stores a firmware which may include among other things an IPMI stack an internal system interface a management service module a configuration module and an internal communication module . In certain embodiments the firmware may store other applications necessary for the operation of the server management device . It should be noted that the stacks and modules of the firmware are each implemented by computer executable codes or instructions which collectively forms the firmware . In certain embodiments each of the stacks and modules may further include sub stacks or sub modules. Alternatively some of the stacks and modules may be combined as one stack.

The IPMI stack provides IPMI functionalities for the server management device . For example the IPMI stack may be used to process an IPMI message. In certain embodiments the IPMI stack may be in communication with the computing devices through the in band or OOB functions defined by the IPMI Specification. For example the IPMI stack may communicate with a host computer through the KCS BT or SMIC interfaces or may communicate with a remote computing device through LAN. In certain embodiments the IPMI stack may communicate with a satellite controller not shown through an IPMB interface.

The internal system interface is a software implemented internal interface implemented by the configuration module and the internal communication module for the purpose of performing an internal communication between the IPMI stack and the management service . In other words the internal system interface is a part of an extension of the IPMI stack to allow the internal communication to the management service . In certain embodiments the internal system interface may be a Unix domain socket UDS or an IPC socket.

The UDS or IPC socket is a data communications endpoint for exchanging data between processes executing within the same host operating system. The UDS supports transmission of a reliable stream of bytes SOCK STREAM compare to TCP and additionally supports ordered and reliable transmission of datagrams SOCK SEQPACKET or unordered and unreliable transmission of the same SOCK DGRAM compare to UDP . The UDS facility is a standard component of POSIX operating systems. The application programming interface API for UDS is similar to that of an Internet socket but rather than using an underlying network protocol all communication occurs entirely within the operating system kernel. Generally the UDS uses the file system as its address name space and may be referenced by processes as an index node generally referred to as an inode in the file system. This allows two processes to open the same socket in order to communicate.

The management service module is a module which when executed at the processor is configured to provide a corresponding management service instance hereinafter the management service . In certain embodiments a management service is generally a service not provided by the IPMI stack and not covered or defined by the IPMI Specification. In other words the management service may be a non IPMI service. In certain embodiments the management service provides one or more OOB functionalities for the server management device since it is not covered by IPMI and may operate independently from the operation of the IPMI stack . Examples of the management service may include without being limited to a web server service a keyboard video and mouse KVM service a Common Information Model CIM service a Systems Management Architecture for Server Hardware SMASH service. In certain embodiments the firmware may include multiple management service modules and each of the management service modules when executed may provide a corresponding management service and all the management services provided in one server management device may be independent and different from one another. For example the web server KVM CIM and SMASH services may all be provided in one single server management device at the same time.

The configuration module and the internal communication module are extensions of the IPMI stack to implement the internal communication between the IPMI stack and the management service. Specifically the configuration module is configured to define the internal system interface and configure the internal system interface to establish an IPC channel which is a bi directional channel between the IPMI stack and the management service using the internal system interface . In certain embodiments the configuration module may include an IPC file which contains the information for configuring the internal system interface to establish the IPC channel. In operation the configuration module may establish the IPC channel by referencing with the IPC file such that the IPC channel is accessible by the IPMI stack and the management service. For example when the internal system interface is the UDS the UDS may use the file system as its address name space and may be referenced by processes as an inode in the file system. Thus when the configuration module establishes the IPC channel the configuration module refer to the IPC file such that the IPC channel is accessible by the IPMI stack and the management service as a file system which may include a first file location representing the IPMI stack and a second file location representing the management device. Thus the internal communication between the IPMI stack and the management service may be established within the server management device .

The internal communication module is configured to perform an internal communication between the IPMI stack and the management service through the IPC channel. In certain embodiments when the management service sends data directed to the IPMI stack through the IPC channel the internal communication module receives the data and forwards the data to the IPMI stack . Further when the IPMI stack sends a response to the data sent by the management service the internal communication module receives the response and forwards the response to the management service.

For example the web server service may contain a web page for displaying information of the IPMI stack . To obtain the information of the IPMI stack the web server service must send a request command to the IPMI stack through the IPC channel to retrieve the information. Once the internal communication module receives the request command the internal communication module forwards the request command to the IPMI stack . The IPMI stack then retrieves the information being requested based on the request command and sends the information to the web server service through the IPC channel . The internal communication module receives the information and then forwards the information to the web server service . Thus the web server service may have the necessary information to be displayed on the web page.

A further aspect of the present disclosure is directed to a method for performing internal system interface based communications in a server management device. In certain embodiments the method may be implemented on a system as shown in .

At procedure the configuration module defines an internal system interface such as a UDS or IPC socket. At procedure the configuration module configures the internal system interface to establish an IPC channel between the IPMI stack and the management service using the internal system interface . Thus at procedure the internal communication module may be capable of performing the internal communication between the IPMI stack and the management service through the IPC channel .

In a further aspect the present disclosure is related to a non transitory computer readable medium storing computer executable code. The code when executed at one or more processer may perform the method as described above. In certain embodiments the non transitory computer readable medium may include but not limited to any physical or virtual storage media. In certain embodiments the non transitory computer readable medium may be implemented as the storage device of the server management device as shown in .

The foregoing description of the exemplary embodiments of the disclosure has been presented only for the purposes of illustration and description and is not intended to be exhaustive or to limit the disclosure to the precise forms disclosed. Many modifications and variations are possible in light of the above teaching.

The embodiments were chosen and described in order to explain the principles of the disclosure and their practical application so as to enable others skilled in the art to utilize the disclosure and various embodiments and with various modifications as are suited to the particular use contemplated. Alternative embodiments will become apparent to those skilled in the art to which the present disclosure pertains without departing from its spirit and scope. Accordingly the scope of the present disclosure is defined by the appended claims rather than the foregoing description and the exemplary embodiments described therein.

