---

title: Methods and apparatus for enabling proximity services in mobile networks
abstract: An apparatus and method to improve communications in a wireless communication network. Steps include sending specific information to user equipment or adjacent base stations so that the user equipment and adjacent base stations can determine minimum power requirements and interference levels in sidelink communications. The apparatus includes a localization module with a self-tracking component; a signal-detection component; and a location-estimation component. The apparatus may include a proximity system usable to locate one or more target transmitters and includes a localization module; a proximity-description module; and a proximity-display module. The proximity system may include a proximity advertisement module, which includes an access management component; an ownership management component; and a content management component.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09549411&OS=09549411&RS=09549411
owner: 
number: 09549411
owner_city: 
owner_country: 
publication_date: 20151103
---
This application claims the benefit of U.S. Provisional Application No. 62 085 327 filed 27 Nov. 2014 and U.S. Provisional Application No. 62 235 697 filed 1 Oct. 2015 which are hereby incorporated by reference herein.

In the field of wireless communication systems methods and devices are disclosed that enable individual mobile devices to determine if a device to device link within a cell may be created and how these devices should communicate.

This Background section of this specification is intended to provide a background or context to the invention that is recited in the claims. The description herein may include concepts that could be pursued but are not necessarily ones that have been previously conceived or pursued and thus should not be considered prior art unless it is expressly so stated.

The following abbreviations that may be found in the specification and or the drawing figures are defined as follows 

 access point In cellular networks like LTE A it is a conceptual point within the radio access network performing radio transmission and reception An access point is associated with one specific cell i.e. there exists one access point for each cell. It is an end point of a radio link. In other wireless systems like Wi Fi it is a device that allows wireless devices to connect to a wired network using Wi Fi or related standards Access point in this application refers to a conceptual point within the radio access network unless otherwise specified base station or eNodeB or eNB A base station is a network element in radio access network responsible for radio transmission and reception in one or more cells to or from the user equipment. Each eNodeB has a baseband processing unit. Each baseband processing unit is connectable to multiple radio units either remote radio heads or radio cards which enable transmit and receive functions involving radio frequency signals. Thus each radio unit is connected to one or more antennas serving a particular direction and thus forming a sector or a cell in the logical naming sense as shown in cell A radio network area that can be uniquely identified by a mobile terminal from a cell identification that is broadcasted over a geographical area from one access point. D2DBSIE parameters or signalings that carry stastical information of the tolerable performance loss of the primary UEs such as for example the total amount of interference from the device to device links that is tolerable by the user equipment in an uplink propagation constants related to a channel model coverage area for device to device links and an average sum of channel gain of existing device to device links to the base stations. D2DIE parameters or signalings that carry statistical information of existing active device to device links such as for example density or number of active device to device links propagation constants related to a channel model and a coverage area for device to device links. D2DIE2 parameters or signalings sent between adjacent access points or base stations and may include the density or the number of active device to device links in the serving area of the base station and may include a high interference indicator for sidelink communications in the wireless communications network D2DIE3 parameters or signalings sent from one user equipment of a device to device pair to adjacent base stations to indicate that in the near future potential transmission between the sidelink device to device communications will be scheduled in certain parts of the radio resources These include bandwidth frequency division multiplexing FDM symbols or resource blocks by the device to device pair. user equipment or UE or mobile terminal or terminal is a device that allows a person to access to network services. The interface between the UE and the network is the radio interface PSCCH Physical Sidelink Control Channel a transmission resource pool and physical channel defined in a sidelink carrying the control information. A physical channel is defined by code frequency relative phase I Q or time slot and so on and PSSCH Physical Sidelink Shared Channel a transmission resource pool and physical channel defined for a sidelink carrying data.

More and more devices are becoming connected. Market research by others suggests that in 2020 the total number of connected devices will grow from 9 billion today to 24 billion with half incorporating mobile technologies. These connected devices can be devices such as smart meters but increasingly all kinds of consumer electronic devices e.g. photo cameras navigation devices e books hi fi equipment and televisions are connected. Many of these connections are among devices in close proximity and there is evolving demand for enabling proximity services from different perspectives. This is described in CISCO Cisco Visual Networking Index Global Mobile Data Traffic Forecast Update 2014. For example social apps hyper local marketing and classifieds may be based on proximity.

Proximity will also be a new vector for mobile advertising and there will be growing need to enable new types of advertising for proximity services. For example a customer in a mall will prefer to receive information or ads related to the shops inside this mall rather than those worldwide.

Many consumer electronic devices will need to communicate with other consumer electronic devices in their neighborhood. For example a photo camera can communicate with a printer or a media server can communicate with hi fi equipment.

Providing proximity based services enables consumers to interact with their proximate environment in a spontaneous and direct way using their smartphone and thus bring about a huge array of benefits for the consumer for enterprises and in turn for the operator.

As a value added service proximity based services offer the potential for huge gains for operators including additional revenue gained from the consumers from access to services from new marketing tools for enterprise customers and from opportunities for revenue sharing with third party s via developer Application Programming Interfaces APIs .

A major economic opportunity of proximity based services is for mobile operators to hold the rights to the spectrum that enables this functionality. The party holding the rights to the spectrum could act as a gatekeeper controlling access to the services.

The start of the art research and inventions related to proximity based services and technologies may be summarized by a discussion of the 3rd Generation Partnership Project 3GPP . The 3rd Generation Partnership Project unites multiple telecommunications standard development organizations and provides the means to define systems for cellular telecommunications and network technologies.

IEEE 802.11 is a set of media access control MAC and physical layer PHY specifications for implementing wireless local area network WLAN computer communication in the 2.4 3.6 5 and 60 GHz frequency bands. The IEEE802.11 is hereby incorporated by reference herein. The IEEE 802.11 specifications are created and maintained by the IEEE LAN MAN Standards Committee IEEE 802 . In IEEE 802.11 the primary UEs are the devices that communicate directly to the access point while the device to device pair could be two devices that communicate directly to each other. Within 3GPP Proximity Based Services PBS provide discovery of devices and communications between devices in proximity. Thus Proximity Based Services support communication between devices that are physically located close to each other.

Device to device D2D communications is enabled by cellular networks e.g. 3GPP infrastructure that provides a generic communication capability that can generate a new revenue source for mobile network operators. As proximity based applications are growing fast the demand of Device to Device communications will increase dramatically. Developing scalable Device to Device communications for systems like 3GPP is of paramount importance.

The main idea of Device to Device communications is to enable two devices in proximity to communicate directly with each other re utilizing the resources of primary cellular networks or using a set of orthogonal resources. Its impact on the performance of existing cellular UEs should be minimal. For example in Long Term Evolution A device to device links may share the uplink resources of the cellular network or use orthogonal resources.

When downlink resources are reused device to device links may cause strong interference towards existing cellular user equipment whereas in the case of sharing uplink resources the interference caused by device to device links will affect only the base stations where the impact has been determined to be less harmful.

As more device to device pairs exist in the network the interference levels may increase to a point where the performance of both cellular and Device to Device networks could be seriously degraded. Thus one of the main limitations on the scalability of Device to Device communications is interference control. To solve this potential problem a careful interference coordination and power control technique is used to have scalable Device to Device communications to assure quality of service to both Device to Device UEs and existing cellular UEs.

When device to device links are added to the system two main levels of interferences are generated 1 A first level of interference caused by the cellular network namely from existing cellular user equipment towards other base stations inter cell interference and from Cellular User Equipment towards device to device links and 2 a second level of interference caused by Device to Device network namely from device to device links towards the base stations and from device to device links towards other device to device links.

The first level of interference includes inter cell interference. In the uplink of the last generation cellular networks the resources within each cell are allocated orthogonally resulting in zero intra cell interference. However the resources are shared by several cells causing inter cell interference between the Cellular User Equipment and base stations of different cells. This problem is well known and there has been important research done in the last years.

There are numerous studies and proposals that form the background of addressing cellular interference. One proposal includes an adaptive soft frequency reuse scheme that decreases inter cell interference improving the average throughput per UE. Another recommends an interference aware joint scheduling scheme based on proportional fairness. Others have studied the problem of resource allocation considering the impact of inter cell interference while maintaining a frequency reuse of one. Studies have been published on the evaluation of the Long Term Evolution Open Loop Fractional Power Control and the closed loop power control considering the impact of inter cell interference while giving an insight to the proper configuration of the design parameters.

For example in the conventional power control for sidelink communications the transmission power control formula for PSSCH or PSCCH is

In Long Term Evolution Inter Cell Interference Coordination a proactive indicator known as the High Interference Indicator can be sent by an Evolved Node B eNodeB or eNB to its neighboring Evolved Node B to inform them that it will in the near future schedule uplink transmissions by one or more cell edge user equipment in certain parts of the bandwidth and therefore that high interference might occur in those frequency regions. As illustrated in X2 is the name of the interface that connects one Evolved Node B to another Evolved Node B. S1 is the interface for the communications between Evolved Node B and a Mobility Management Entity MME .

Neighboring cells may then take this information into consideration in scheduling their own UEs to limit the interference impact. This can be achieved either by deciding not to schedule their own cell edge user equipment in that part of the bandwidth and only considering the allocation of those resources for cell center UEs requiring less transmission power or by not scheduling any UE at all in the relevant Resource Blocks RBs .

The High Interference Indicator HII is comprised of a bitmap with one bit per Resource Block and like the Overload Indicator OI is not sent more often than every 20 milliseconds. The High Interference Indicator bitmap is addressed to specific neighbor Evolved Node Bs. On the other hand the Overload Indicator being a reactive indicator can be exchanged over an X2 application protocol interface to indicate physical layer measurements of the average uplink interference plus thermal noise for each Resource Block. The Overload Indicator can take three values expressing low medium and high levels of interference plus noise. In order to avoid excessive signaling load it cannot be updated more often than every 20 milliseconds.

A method to improve communications in a wireless communication network including steps of controlling a message from a first base station to user equipment. The message sending statistical information on active device to device links and enabling each user equipment in the receiving area to determine whether or not to connect with another user equipment based using the statistical information to calculate an interference level for a new device to device link. The statistical information includes the density of active device to device links around the user equipment and a high interference indicator for device to device communications. The statistical information is usable by each user equipment to determine a projected interference level for a new device to device link. The method may include a step of sending the statistical information from the first base station in the wireless communication network to a second base station in the wireless communication network. The method may include a step of forming the high interference indicator to include a binary indicator where 1 means high interference and 0 means negligible interference or to include multiple levels of interference power. The high interference indicator may be obtained by adding one bit into an existing High Interference Indicator of Long Term Evolution A specification and this one bit is used to indicate whether or not the High Interference Indicator is from sidelink communications.

In an alternative embodiment the method includes sending power control parameters from a first base station to paired user equipment in the network. The power control parameters are usable in each paired user equipment to determine a power control function P and thereafter use the power control function to determine a calculated value for a minimum transmit power for reliable data communications of the device to device link or for a conventional power control value whose path loss is the path loss to the first base station. This method may include sending from the first base station to each paired user equipment information on a higher layer parameter for a channel and transmission mode a modulation and coding scheme cumulative transmit power control command and or a path loss number between user equipment forming the device to device link and enabling said user equipment to use that information to refine a determination of the power control function prior to using the power control function to determine the calculated value. The power control parameters may be configured by higher layers for a corresponding channel and transmission mode or may be preconfigured in the wireless communication network.

In an alternative embodiment the method may include steps of enabling each user equipment in any pairing to retrieve a set of parameters defined as a device to device information element that are used to calculate a tolerable mutual interference among potential device to device links. This method includes enabling each user equipment in any pairing to retrieve parameters or signalings named device to base station information element that is used to calculate tolerable performance loss of primary user equipment in an uplink. This method includes enabling each user equipment in any pairing to monitor downlink reference signals to obtain channel gain between the nearest base station and the device to device pair itself. This method includes enabling each user equipment in any pairing to estimate a number of active device to device links per unit area calculate a transmission power and decide whether or not an active status for the user equipment will be in sidelink mode. This method includes enabling each user equipment in any pairing to communicate in device to device mode if the pairing has decided to be in the device to device mode. This method includes enabling each user equipment in any pairing to notify an access point of a pair s suggestion of whether or not the device to device pair should be in device to device mode and after receiving the pair s suggestion. Finally this method includes commanding the device to device pair to communicate in a certain mode preferably the mode suggested by the device to device pair.

In an alternative embodiment the method includes enabling each base station in the wireless communication network to determine a device to device information element consisting of a set of parameters selected from the group consisting of density or number of active device to device links propagation constants related to a channel model and a coverage area for device to device links. This method includes enabling a base station to retrieve parameters or signalings named device to device information element 2 from adjacent base stations that include statistical information of active device to device links served by adjacent base stations wherein the pairing is made. This method includes enabling each base station in the wireless communication network to determine a device to base stations information element consisting of a set of parameters selected from the group consisting of a total amount of interference from the device to device links that is tolerable by the user equipment in an uplink propagation constants related to a channel model coverage area for device to device links and an average sum of channel gain of existing device to device links to the base stations. This method includes enabling each base station in the wireless communication network to utilize the device to device information element the device to device information element 2 and the device to base station information element to determine a mode selection result for a device to device paring. Finally this method includes sending the mode selection result to user equipment in the first plurality of user equipment desiring to create the device to device pairing. This method may require the device to base station information element 2 is a high interference indicator for sidelink communications in the wireless communication network and when so required then also include the step of sending the high interference indicator from a first base station to a second base station with an indication of a potential transmission between sidelink communications could be scheduled in certain parts of radio resources to include a high interference indicator for sidelink communications in the wireless communication network. When so included this method further includes sending the high interference indicator from a first base station to a second base station with an indication of a potential transmission between sidelink communications could be scheduled in certain parts of radio resources. This method may require that the high interference indicator be obtained by adding one bit into an existing High Interference Indicator of Long Term Evolution A specification and this one bit is used to indicate whether or not the High Interference Indicator is from the sidelink communications. This method may include a step of enabling a base station to retrieve a third set of parameters named device to device information element 3 from a device to device link in adjacent cells that include load and interference information of the device to device link.

An apparatus embodying the methods includes a localization module with a self tracking component a signal detection component and a location estimation component. The self tracking component comprises sensors to perform measurements of location information and non transitory computer readable memory to record the measurements and movements of the localization module. The signal detection component detects signal properties at locations selected from among those where the self tracking component performs a measurement for distance information between the localization module and one or more target transmitters the measurements comprising at least one of a distance between the localization module and the one or more of the target transmitters and received signal strength of signals received from said one or more target transmitters by the localization module. The location estimation component estimates location information the location information selected from the group consisting of geographic coordinates where signal properties were detected by the signal detection component a localization related parameter for such geographic coordinates based on input from the self tracking component and the signal detection component and a direction the localization module would have to go to approach said one or more target transmitters. The self tracking component the signal detection component and the location estimation component are interconnected so as to enable provision of data to the location estimation component. The localization module may require the sensors to be an accelerometer a gyroscope a global positioning system that can report its location and or a compass enabling estimation of a relative location and moving direction of the self tracking component at any sampling time period.

In an alternative embodiment the apparatus embodying the methods includes a proximity system working in a network that includes multiple base stations user equipment able to communicate with at least one base station target transmitters that are broadcasting signals. The proximity system is usable to locate one or more target transmitters and includes a localization module a proximity description module and a proximity display module. The localization module locates one or more target transmitters and sends proximity information on each located target transmitter to the proximity description module. The proximity description module includes a storage component with computer memory. The proximity description module includes a description component that reads the proximity information from the storage component or the Internet and sends the proximity information to the proximity display module for display. The proximity description module includes an Internet access component that provides an optional connection to the Internet. Finally the proximity description module includes a user interface component that inputs user data to the storage component the user interface component processes the proximity information and sends the proximity information to the proximity display module. The proximity display module displays the proximity information in a manner that represents the distance from the proximity system.

The proximity system may require that the proximity information be one or more of coordinates of each located target transmitter an identification of each located target transmitter a name for each store at each located target transmitter an advertisement that may be relevant to each located target transmitter a promotion coupon for any store at each located target transmitter a video relevant to the area near each located access point a photo relevant to the area near each located target transmitter any comments received on the area near each located target transmitter a price list for products or services available near each located target transmitter room availability near each located target transmitter direction and distance information for the first user equipment to approach the target transmitter and floor numbers of buildings near each located target transmitter.

The proximity system may include a proximity advertisement module which includes an access management component an ownership management component and a content management component. The access management component enables an Internet connection between the proximity advertisement module and a remote server. The ownership management component enables an upload of material to one or more remote servers. The upload of material enables the ownership management component to verify ownership of a target transmitter in the plurality of target transmitters. The content management component manages the proximity information on each verified target transmitter to the one or more remote servers.

There is a need for greater efficiency and interference coordination in device to device communications which can enable far greater automated interconnectivity between devices in proximity to each other. This need is for a simple device and method that provides a power control function for determining the minimum power necessary transmit a signal for reliable sidelink data communications communications between devices rather than simply the conventional power value i.e. the power control value whose path loss is the path loss to the serving station and for improved interference coordination for sidelink communications.

Despite the obvious potential benefits and revenue opportunities competition is present from existing similar proximity based services to some extent through Wireless Fidelity Wi Fi and or Bluetooth applications. Examples of proximity based services are Digital Living Network Alliance DLNA and Universal Plug and Play UPP .

Digital Living Network Alliance and Universal Plug and Play enable the discovery of other devices of interest after which Internet Protocol IP level data communication is made possible between the devices. Digital Living Network Alliance and Universal Plug and Play however only work within the confines of a single wireless local area network WLAN or a single local area network LAN . These have however seen limited mainstream adoption up to now which may be due to the fact that these existing solutions suffer a number of limitations including range and scalability issues privacy concerns as well as a huge drain on battery resources which limit their use by consumers.

Ultimately Long Term Evolution Device to Device LTED2D which is also called sidelink communications in 3rd Generation Partnership Project provides a universal platform for proximity services. Long Term Evolution Device to Device opens the potential for a host of new service opportunities while also achieving significant performance and efficiency benefits on the Long Term Evolution LTE networks.

From what is known in this field there is a need for a system and methods achieving low complexity interference coordination and localization techniques for proximity services.

The solution disclosed herein defines a new generic framework to coordinate the communications between the proximity devices and the base stations so that the interferences generated by the proximity devices are effectively controlled to achieve high network performance.

This solution of interference controls goes beyond first level interferences addressed in current technology and addresses second level interferences to enable high capacity D2D communications.

The generic framework consists of distributed mode selection power control and inter cell interference coordination to enable scalable direct communications between devices in proximity and localization of devices in proximity to provide more efficient services.

This generic framework has the potential to maximize the number of simultaneous active device to device links thus maximizing network frequency reuse and network throughput.

This framework provides a new and effective method to assure quality of service to both cellular UEs and Device to Device UEs.

This generic framework includes three key innovative technologies to greatly enhance the provision of proximity based services in mobile wireless networks. These key innovative technologies include A new air interface consisting of power control and interference coordination that is implemented in Long Term Evolution A cellular networks or like networks for scalable Device to Device communications and interference control and an autonomous localization technique for finding wireless transmitters in proximity to provide efficient proximity services.

These key innovative technologies while forming a holistic framework for proximity based services may be implemented independently in practice wherever it is necessary or convenient to do so.

To enhance the efficiency of proximity services a preferred embodiment introduces an autonomous location scheme to enable a device to locate other wireless devices in proximity.

This autonomous location scheme enables the device to approach the adjacent devices in proximity and communicate with lesser transmission power which effectively reduces the second level interference to the network.

The advanced technology disclosed herein may be implemented in any form of device to device direct communications. This means that any type of proximity based services with direct communications between UEs are able to use it. It can be integrated in currently technologies as in for example Wi Fi direct Device to Device communications in cellular networks including Machine to Machine M2M communications and so on.

In the following description reference is made to the accompanying drawings which form a part hereof and which illustrate several embodiments of the present invention. The drawings and the preferred embodiments of the invention are presented with the understanding that the present invention is susceptible of embodiments in many different forms and therefore other embodiments may be utilized and structural and operational changes may be made without departing from the scope of the present invention.

The core network also illustrated in is the medium to connect to the Internet and a remote server shown in or one or more remote servers shown in . These remote servers may include one or more databases shown in and . A server group one or more remote servers preferably includes multiple servers and data bases in the core network which may provide services together and may communicate with each other for functional purposes.

An example of a remote server or one or more remote servers accessed through the Internet is an advertisement server. The advertisement server stores in non transitory computer readable memory advertisements used in online marketing and delivers these advertisements to mobile terminals such as for example website visitors. Website users typically include mobile users of user equipment such as for example laptops desktops tablets and smartphones.

As shown in the core network may also serve as the X2 and S1 interfaces between the base stations. S1 and X2 are known interfaces in 3GPP network nodes The S1 interface separates E UTRAN and EPC and the X2 interface is the interface between base stations eNBs .

Each base station is a component entity that controls the signaling of the UE and routes traffic between primary UEs and the core network. The wireless links for primary UEs and Device to Device UEs generate the two levels of interferences to each other.

The primary UEs communicate to the network directly. For example in 3GPP the primary UE is user equipment that communicates directly to the eNodeBs. In Wi Fi the primary user equipment a devices that communicates directly to a Wi Fi access point. The devices in proximity are referred to herein as Device to Device D2D user equipment user equipment or proximity devices. A device to device pair involves two devices that is for example a first user equipment that communicates with a second user equipment. The communications of a D2D pair may also be called sidelink communications. Note that Device to Device communications may be present without the existence of primary UEs or base stations.

A preferred embodiment disclosed herein includes a set of technologies to determine mode selection and transmission power and interference coordination for Device to Device communications.

Mode selection refers to procedures to decide if a pair of devices in proximity should communicate directly with each other or through the base stations . These technologies work together to coordinate two levels of interferences generated by Device to Device communications to achieve the optimal network performance.

The set of technologies preferably enables two devices in proximity of each other to locate each other and track them so that they are better able to move closer to each other. Such tracking and knowledge of proximity enables the two devices to employ a higher data rate transfer with lower interference to the network which further improves network performance.

In a preferred embodiment the network e.g. an access point a base station or a group of base stations keeps the track of stastical information relating to active device to device links in its serving area one or more cells . The network sends to a mobile device a parameter preferably a set of parameters or signalings named Device to Device Information Element D2DIE that carries the statistical information of existing active device to device links. The Device to Device Information Element may be used to calculate i.e. derive the tolerable mutual interference among potential device to device links in a certain area.

One example of the parameter that is carried in a Device to Device Information Element is the density or number of existing active device to device links in a certain area e.g. cells. The density may then be used to derive the potential interference among different device to device links in the area. The higher the number of device to device links the higher the mutual interference that may be expected to exist in the area.

A second example of the parameter is an indicator of Device to Device interference in the cell where 1 means too much interference between device to device links and 0 means negligible interference among device to device links. Or the indicator can be of several e.g. three levels where each level indicates the strength of interferences among device to device links. A bitmap can be used to indicate the corresponding interference levels on all resource blocks of interest. For example the bitmap has the format BIT STRING 1 . . . 110 . . . and wherein the Semantics description is Each position in the bitmap represents a Physical Resource Block first bit PRB 0 and so on for which value 1 indicates high interference sensitivity and value 0 indicates low interference sensitivity .

Preferably the Device to Device Information Element is used to control the inteference among different device to device links. The Device to Device Information Element may also be used to prevent too many device to device links to be admitted in the network. For example when the Device to Device Information Element is carried in the discovery messages it can help determine whether or not an active status for the user equipment will be in sidelink mode.

The transmission of the Device to Device Information Element may be cell specific or may be broadcasted by the network. In addition the transmission of Device to Device Information Element may be user equipment specific and sent to the user equipment using dedicated resources.

In one example of transmission an Evolved Node B broadcasts this parameter to a plurality of user equipment within its cell. In another example several Evolved Node Bs may jointly determine this parameter and send it to a particular user equipment.

In another example of transmission existing device to device links estimate the average amount of interference that has already existed among themselves and broadcast this parameter so that new device to device links can estimate the interference if they start data communications.

In a third example of transmission the Device to Device Information Element is carried in the discovery messages from eNodeB to the D2D UE when a new device to device pair is established.

Preferably base station communicates with adjacent base stations sending one or more parameters or signalings named Device to Device Information Element 2 D2DIE2 that included or carries the statistical information of the active device to device links in its own serving area.

Thus in a preferred method the wireless communication network includes multiple base stations. The preferred method is utilizable in a wireless communication network. Each base station is able to send and receive communications to another base station in the wireless communication network. Each base station is able to send and receive communications and to a first plurality of user equipment. This first plurality of user equipment represents the user equipment within the area served by the wireless communication network . A second plurality of user equipment is created by each of said user equipment in the first plurality of user equipment that has formed a pairing with another user equipment. For example the second plurality of user equipment may be two mobile devices that are in sidelink communications. Each such pairing defined as a device to device link. In the method the base station implements steps of controlling a message from a first base station in the wireless communication network to user equipment in the first plurality of user equipment the message comprising statistical information on active device to device links and enabling each user equipment in the first plurality of user equipment to determine whether or not to connect with another user equipment in the first plurality of user equipment based using the statistical information to calculate an interference level for a new device to device link . The calculations are performed in accordance with the disclosure herein.

The statistical information includes at least one of the density of active device to device links and a high interference indicator for device to device communications wherein said statistical information is usable by each user equipment in the first plurality of user equipment to determine a projected interference level for a new device to device link .

The method may also include a steps of sending the statistical information from the first base station in the wireless communication network to a second base station in the wireless communication network forming the high interference indicator for device to device communications to include a binary indicator where 1 means high interference and 0 means negligible interference and forming the high interference indicator for device to device communications to include multiple levels of interference power. The high interference indicator may be obtained by adding one bit into the existing High Interference Indicator of Long Term Evolution A specification and this one bit is used to indicate whether or not the High Interference Indicator is from the sidelink communications.

Device to Device Information Element 2 may be used to derive a tolerable mutual interference from device to device links in areas served by the adjacent base stations.

A first example of a parameter that may be carried in Device to Device Information Element 2 is the density or number of active device to device links in the serving area of the base station i.e. those devices that the base station or cell serves. The Device to Device Information Element 2 can be used to derive the potential interference from these device to device links to the device to device links in adjacent cells. The higher the number of device to device links the higher the interference may be expected.

A second example of a parameter that may be carried in Device to Device Information Element 2 is a high Device to Device interference indicator in a cellular area where 1 means too much interference between device to device links and 0 means negligible interference among device to device links. Alternatively the indicator may be one of several levels e.g. three levels where each level indicates the strength of interferences among device to device links. A bitmap can be used to indicate the corresponding interference levels on all resource blocks of interest. For example the bitmap has the format BIT STRING 1 . . . 110 . . . and wherein the Semantics description is Each position in the bitmap represents a Physical Resource Block first bit PRB 0 and so on for which value 1 indicates high interference sensitivity and value 0 indicates low interference sensitivity .

Device to Device Information Element 2 is preferably exchanged on logic interfaces such as X2 or S1 interfaces as shown in .

Preferably the network broadcasts a parameter or signaling named Device to Base Stations Information Element D2DBSIE that carries stastical information of the tolerable performance loss of the primary UEs.

The network provides data on the maximum amount of interference that can be tolerated by primary user equipment i.e. user equipment directly connecting to the network using the Device to Base Stations Information Element. For example the parameter broadcast by the network may be a Signal to Interference plus Noise Ratio loss in decibels dB that can be tolerated by cellular users in 3GPP cellular networks.

Another example of the Device to Base Stations Information Element is the throughput loss that can be tolerated by the UEs connected directly to the base station.

A third example of the Device to Base Stations Information Element is a one bit indicator where 1 means additional Device to Device communications are allowed and the resulting interference to the network is negligible and 0 means additional Device to Device communications will create too much interference and new Device to Device communications should not be allowed.

A forth example of the Device to Base Stations Information Element is an N state indicator which means K of the N levels of the interference generated by the Device to Device communications can be tolerated. A bitmap can be used to send Device to Base Stations Information Element to indicate the corresponding tolerable interference levels on all resource blocks of interest.

A novel feature of a preferred embodiment disclosed herein is the power control for the transmission of sidelink communications to be the minimum of Pand the conventional power control. As introduced in the BACKGROUND section supra in the conventional power control path loss in the power control formula is the path loss from the user equipment to the serving cell and protects the serving cell from high interference from the sidelink communications. The power control function Pis used to determine the minimum transmit power necessary for reliable data communications of the sidelink. Selecting the minimum of Pand the conventional power control as the transmission power ensures a minimum transmission power for sidelink communications which reduces the overall second level interference and enables more D2D links to communicate at the same time.

Thus in a preferred method utilizable in a wireless communication network the wireless communication network comprising multiple base stations wherein each base station is able to send and receive communications to another base station in the wireless communication network and to a first plurality of user equipment wherein a second plurality of user equipment is created by each of said user equipment in the first plurality of user equipment that has formed a pairing with another user equipment each such pairing defined as a device to device link the method comprising the step of sending power control parameters from a first base station in the wireless communication network to the second plurality of user equipment the power control parameters usable in each user equipment in the second plurality user equipment to determine a power control function P and thereafter use the power control function to determine a calculated value the calculated value selected from the group consisting of a minimum transmit power for reliable data communications of the device to device link and a conventional power control value whose path loss is the path loss to the first base station.

This preferred method utilizable in a wireless communication network may further include a step of sending from the first base station to each user equipment in the second plurality user equipment information selected from the group consisting of a higher layer parameter for a channel and transmission mode a modulation and coding scheme cumulative transmit power control command and a path loss number between user equipment forming the device to device link and enabling said user equipment to use said information to refine the determination of the power control function prior to using the power control function to determine the calculated value. The term higher layer parameter as used herein is a term well known in the art and defined in the specification 3GPP TS 36.213 V12.7.0 2015 September Release 12 which is hereby incorporated by reference herein.

In a first example the transmit power required for reliable data transfer in sidelink communications is determined. PSSCH is the data channel for Device to Device communications PSSCH is short for physical sidelink control channel also termed sidelink communications. 

Sidelink transmission mode 1 is also referred to as Scheduled Resource Allocation because access to the sidelink resources is driven by the eNodeB and not the user equipment .

In mode 1 when the measured transmit power is too low the base station sends a special command to request an increase in the transmit power. And when the measured power is too strong the base station sends another command requesting a decrease in the power. This is a means for the transmitter to dynamically change its output power. This kind of power control mechanism is often called Closed Loop Power Control and the special command being used for power control is called Transmit Power Control TPC command.

For mode 1 and a PSSCH period of i the user equipment transmit power P when the Transmit Power Control command field in configured sidelink grant for Pperiod i is set to 1 is given by the following 

In the above formula min means take the minimum value of the three terms in the parentheses. Mis the transmission bandwidth of the PSSCH resource assignment expressed in number of resource blocks PL is the path loss where PL PLC where PLis the downlink path loss estimate calculated in the user equipment for serving cell c in dB and the conventional power control is min 10 log where Pand are provided by higher layer parameters p0 r12 and alpha r12 respectively and that are associated with the corresponding PSSCH resource configuration.

A second example uses sidelink transmission mode 2. Mode 2 is also referred to as User Equipment Autonomous Resource Selection In mode 2 the user equipment transmitting Device to Device data does not need to be connected to the eNodeB because the user equipment selects autonomously and randomly the resources within the PSSCH pool to transmit the Sidelink Control Information block. In this second example the user equipment transmit power Pis given by

In a third example the transmit power required for reliable control information transfer in sidelink communications is determined. PSCCH is the control information channel for Device to Device communications also termed sidelink communications. For Device to Device communications using the PSCCH channel in sidelink transmission mode 1 and a PSCCH period of i the user equipment transmit power P when the Transmit Power Control command field in configured sidelink grant for Pperiod i is set to 1 is given by the following 

In this third formula min means take the minimum value of the terms in parentheses. Pis the maximum UE power for the control information channel M 1 PL PL where PLis the downlink path loss estimate calculated for the user equipment for serving cell C in dB and the conventional power value is min 10 log 

In a fourth example using the control information channel for Device to Device communications in sidelink transmission mode 2 the user equipment transmit power P is given by

In this third formula Pis the maximum power limit for the transmitter user equipment M 1 and PL PLwhere PLis the downlink path loss estimate calculated in the user equipment for serving cell C in dB and the conventional power value is min 10 log where Pand are provided by higher layer parameters p0 r12 and alpha r12 respectively and that are associated with the corresponding PSCCH resource configuration.

In the examples given above the newly defined power control function P for sidelink communications determines the necessary transmit power for reliable data and control information communications of the sidelink. Pdoes not necessarily have the same value in each formula. Seven examples below designated a. g. illustrate seven different situations for setting the value of P 

a. P P a a . . . a dBm e.g. P 30 29 . . . 22 23 dBm i.e. an integer in decibel milliwatts dBm between 30 and 23. The value to be used is configured by higher layer parameters or preconfigured in the system e.g. stored in a SIM card 

b. For PSSCH or PSCCH 10 log Where MD2D denotes the D2D transmission bandwidth in number of PRBs for the corresponding channel e.g. PSSCH or PSCCH. Pis the adjustable power control parameter that is configured by higher layers for the corresponding channel and transmission mode. Pmay also be preconfigured in the system e.g. stored in a SIM card.

c. For when the sidelink is experiencing unicast or relay communications between two user equipment in proximity the power control function Pfor PSSCH or PSCCH is calculated as 10 log Mdenotes the D2D transmission bandwidth in number of PRBs for the corresponding channel e.g. PSSCH or PSCCH. Pand are the power control parameters that are adjustably configured by higher layers for the corresponding channel and transmission mode. Pand may also be preconfigured in the network e.g. stored in a SIM card. PLs is the path loss estimate in dB calculated in the user equipment for the link between the two user equipment devices of the sidelink. Thus the power control parameters may be configured by higher layers for the corresponding channel and transmission mode or are preconfigured in the wireless communication network .

d. For when the user equipment is in the groupcast or broadcast mode i.e. one to many Proximity Based Services Direct Communication the power control function P for PSSCH or PSCCH is given by 10 log where PLis a function of the path loss estimates in dB calculated in the user equipment for the links between a first user equipment and other user equipment in the groupcast or broadcast. For example assume a first user equipment plus N devices comprising other user equipment in the groupcast mode receiving data from the first user equipment and the path loss estimates from them to the first user equipment are PL PL . . . PLrespectively. PLcan be the maximum minimum or median of these path loss estimates.

e. For when a mapping table of the density of active device to device links is used Pis a function of the Device to Device Information Element. For example as illustrated in the following table of enumerated values 

f. For the Pin examples b. d. P while provided by higher layer parameters is determined by the Device to Device Information Element and given in the following table.

g. In this example Pis a function of i which is determined by the modulation and coding scheme used for the sidelink transmission. For example i is a function of OCQI which is the number of Channel Quality Indicator Pre coding Matrix Index CQI PMI bits including cyclic redundancy check CRC bits and N which is the number of resource elements.

h. In this example Pis adjusted based on the accumulative Transmit Power Control commands received from the receiver of the sidelink communications. With the accumulation of Transmit Power Control commands each Transmit Power Control command signals a power step relative to the previous level of the power control function P for sidelink communications.

A novel feature of a preferred embodiment disclosed herein is mode selection of a device to device pair. Mode selection is a function of Device to Device Information Element or Device to Base Stations Information Element. Mode selection is determined during device to device pairing by an algorithm that performs calculations based on either the Device to Device Information Element or the Device to Base Stations Information Element. Mode selection determines if the pairing should be in device to device mode or not.

The algorithm for mode selection may be implemented after device to device pairs have discovered each other. One example of the novel mode selection algorithm that can be implemented in Long Term Evolution A infrastructure is one or several of the following procedures 

1. A pair of Device to Device User Equipment in proximity retrieves Device to Device Information Element or Device to Base Stations Information Element.

2. The device to device pair monitors the downlink reference signals to obtain the channel gain between the nearest access points and the device to device pair itself which is already supported by existing standards.

3. The device to device pair may estimate the number of active device to device links per unit area calculate the transmission power and decide its active status i.e. whether in device to device mode or not.

4. In a network that allows the device to device link to decide its own communication mode the device to device pair will communicate in device to device mode if the pair has decided to be in the device to device mode Otherwise the device to device pair either the transmitter or receiver will notify the serving access point of the pair s suggestion of whether or not the device to device pair should be in device to device mode. After receiving the suggestion the network may implement a further calculation and then command the device to device pair to communicate in a certain mode preferrably the mode suggested by the device to device pair itself.

Thus in a preferred embodiment includes a method utilizable in a wireless communication network the wireless communication network comprising multiple base stations wherein each base station is able to send and receive communications to another base station in the wireless communication network and to a first plurality of user equipment wherein a second plurality of user equipment is created by each of said user equipment in the first plurality of user equipment that has formed a pairing with another user equipment each such pairing defined as a device to device link . This includes the steps of enabling each user equipment in any pairing to retrieve a set of parameters defined as a device to device information element said device to device information element used to calculate the tolerable mutual interference among potential device to device links enabling each user equipment in any pairing to retrieve parameters or signalings named device to device information element 2 that includes statistical information of the active device to device links served by the base station where by the pairing is made enabling each user equipment in any pairing to monitor downlink reference signals to obtain channel gain between the nearest access points and the device to device pair itself enabling each user equipment in any pairing to estimate the number of active device to device links per unit area calculate the transmission power and decide said user equipment s active status of being in sidelink mode or not enabling each user equipment in any pairing to communicate in device to device mode if the pairing has decided to be in the device to device mode enabling each user equipment in any pairing to notify an access point of the pair s suggestion of whether or not the device to device pair should be in device to device mode and after receiving the suggestion and commanding the device to device pair to communicate in a certain mode preferably the mode suggested by the device to device pair.

In another exemplary embodiment the wireless communication network e.g. an access point Evolved Node B may perform one or several of the following procedures 

In the wireless communication network each base station keeps track of the density or number of active device to device links in its coverage area which may be different in different areas or cells to determine Device to Device Information Element.

If primary users exist the base station estimates the maximum amount of interference that can be tolerated or the maximum tolerable performance loss e.g. throughput loss to determine Device to Base Stations Information Element.

The base station broadcasts the two parameters to all user equipment to device to device pairs to a specific set of user equipment or to a specific user equipment.

If and when the network performs the final mode decision for each device to device pair the network preferably receives the mode suggestion from device to device pairs and then sends a command back to the device to device pair notifying the pair of the result i.e. its mode decision.

Thus the above exemplary embodiment includes a method utilizable in a wireless communication network the wireless communication network comprising multiple base stations wherein each base station is able to send and receive communications to another base station in the wireless communication network and to a first plurality of user equipment wherein a second plurality of user equipment is created by each of said user equipment in the first plurality of user equipment that has formed a pairing with another user equipment each such pairing defined as a device to device link the method comprising the steps of enabling each base station in the wireless communication network to determine a device to device information element consisting of a set of parameters selected from the group consisting of density or number of active device to device links propagation constants related to a channel model and a coverage area for device to device links enabling each base station in the wireless communication network to determine a device to base stations information element consisting of a set of parameters selected from the group consisting of a total amount of interference from the device to device links that is tolerable by the user equipment in an uplink propagation constants related to a channel model coverage area for device to device links and an average sum of channel gain of existing device to device links to the base stations enabling each base station in the wireless communication network to utilize the device to device information element and the device to base station information element to determine a mode selection result for a device to device paring and sending the mode selection result to user equipment in the first plurality of user equipment desiring to create the device to device pairing.

For the above exemplary embodiment the device to base station information element may be a high interference indicator for sidelink communications in the wireless communication network. In addition when the high interference indicatory is present then the above exemplary embody further includes the step of sending the high interference indicator from a first base station to a second base station with an indication that in the near future a potential transmission between sidelink communications could be scheduled in certain parts of radio resources.

In one embodiment the high interference indicator is obtained by adding one bit into the existing High Interference Indicator of Long Term Evolution A specification and this one bit is used to indicate whether or not the High Interference Indicator is from the sidelink communications.

In another embodiment of the invention a device to device link base station or the wireless communication network may decide if a device to device pair should be in the device to device mode or not by using the device to device information element or device to base stations information element.

In one example of this embodiment a potential device to device link may estimate a lower bound and an upper bound of its transmission power for communication in the device to device mode. the lower bound is the minimum amount of transmission power needed to meet its own signal to interference plus noise ratio requirement. An example of the lower bound is P as is described above.

The upper bound of the transmission power is the maximum amount of power user equipment may use so that the interference generated to the network i.e. to the primary UEs and the other device to device links is tolerable by them. An example of the upper bound is the existing power control i.e. the conventional power control for sidelink communications in Long Term Evolution A in which the path loss is the poss loss for the serving cell.

For other instances the upper bound can be estimated using a function of the acceptable signal to interference plus noise ratio loss information in device to base stations information element and the density of device to device links in the surrounding area which is available in the device to device information element.

The lower bound can be estimated using a function of the signal to interference plus noise ratio requirement of the device to device pair itself the link gain between its transmitter and receiver and the density of device to device links in its surrounding area. If the upper bound is higher than the lower bound the device to device link can be in active device to device communications i.e. in the device to device mode otherwise it must not be active.

A novel feature of a preferred embodiment disclosed herein is a high interference indicator for device to device communications between adjacent base stations. In implementing this feature a device to device information element2 is sent from one base station to adjacent base stations to indicate that in the near future potential transmission between sidelink device to device communications will be scheduled in certain parts of the radio resources e.g. bandwidth frequency division multiplexing FDM symbols or resource blocks by the base station.

In another example of implementing this feature a device to device information element 3 is sent from one user equipment of a device to device pair to adjacent base stations to indicate that in the near future potential transmission between the sidelink device to device communications will be scheduled in certain parts of the radio resources e.g. bandwidth frequency division multiplexing FDM symbols or resource blocks by the device to device pair.

Thus high interference might occur in those radio resources. However since the interferences would be from sidelink communications it is likely these interferences would not be as strong as those indicated by the high interference indicator since sidelink communications have less priority. So other Evolved Node Bs would consider it as lower priority and would help in solving the interference issue if there were resources available. In addition device to device communications may use the least amount of power for transmission. The interference between adjacent cells can be negligible. So no high interference may exist.

In an exemplary embodiment one bit is added into the existing high interference indicator and this one bit is used to indicate whether the high interference indicator is from the sidelink communications or not. One example of the information element for high interference indicator is given in the next paragraph where the one bit is added to the front of the existing High Interference Indicator.

For a high interference indicator whose presence is marked as mandatory M the information element type and reference is BIT STRING 1 1 . . . 110 . . . the semantics description is The first bit represents if the high interference indicator is from device to device interferences or not for which value 1 indicates sidelink communications and 0 otherwise. Each position of the remaining bits in the bitmap represents a PResource Block second bit PResource Block 0 and so on for which value 1 indicates high interference sensitivity and value 0 indicates low interference sensitivity . The maximum number of Physical Resource Blocks is 110. The last bit represents if the High Interference Indicator is from device to device interferences or not for which value 1 indicates sidelink communications and 0 otherwise.

In another exemplary embodiment a dedicated information element is included in the load information in the 3GPP TS 36.423 specification Evolved Universal Terrestrial Radio Access Network E UTRAN X2 Application Protocol X2AP to indicate the potential high interference from sidelink communications. An example of the load information is given in the tables of and which describes a message sent by an Evolved Node B to neighboring Evolved Node Bs to transfer load and interference co ordination information. Direction Evolved Node B1 to Evolved Node B2.

An example of the Uplink High Interference Indication2 High Interference Indicator2 is defined as follows For Information Element Group Name High Interference Indicator2 having an optional presence where the Information Element type and reference is BIT STRING 1 . . . 110 . . . and wherein the Semantics description is Each position in the bitmap represents a Physical Resource Block first bit PRB 0 and so on for which value 1 indicates high interference sensitivity and value 0 indicates low interference sensitivity wherein the maximum number of Physical Resource Blocks is 110.

In another exemplary embodiment the information related to sidelink communications is carried in the load information between Evolved Node Bs. One example is given in the tables of and which shows load information where a new sidelink information is introduced for this purpose. For example Device to Device Information Element2 can be carried in the sidelink information. The detailed format of the sidelink information is up to implementation. This message is sent by an Evolved Node B to neighboring Evolved Node Bs to transfer load and interference co ordination information. Direction Evolved Node B1 to Evolved Node B2. The message of and is sent by an Evolved Node B to neighboring Evolved Node Bs to transfer load and interference co ordination information.

In another embodiment of the invention a logic interface like X2 is created between a mobile device in the sidelink communications to adjacent base stations or to adjacent devices in sidelink communications. The logic interface is used to send device to device information element 3 of the sidelink communications to adjacent base stations or adjacent sidelinks. Device to device information element 3 may carry load or interference information. A message that can be sent on the logic interface is a high interference indicator for sidelink communications which is sent from a mobile device in the sidelink communications to adjacent base stations or to adjacent devices in sidelink communications. The high interference indicator is used to inform the adjacent base stations or adjacent devices that in the near future a potential transmission between sidelink device to device communications will be scheduled in certain parts of the radio resources e.g. bandwidth frequency division multiplexing symbols or resource blocks by the sidelink communications. Thus high interference might occur in those radio resources.

An example of the high interference indicator is defined as follows The Information Element Group Name is high interference indicator its presence is mandatory the information element type and reference is BIT STRING 1 . . . 110 . . . and the semantics description is Each position in the bitmap represents a PRB first bit PRB 0 and so on for which value 1 indicates high interference sensitivity and value 0 indicates low interference sensitivity . The maximum number of Physical Resource Blocks is 110.

Thus an exemplary embodiment includes enabling a base station to retrieve a third set of parameters named device to device information element 3 from a device to device link in adjacent cells that include load and interference information of the device to device link. The device to device information element 3 is preferably a high interference indicator for the sidelink which sends device to device information element 3 and it a preferred method includes the setp of sending the high interference indicator from a first user equipment in sidelink communications such user equipment previously referred to as those in the second plurality of user equipment to a base station with an indication of a potential transmission between user equipment in the sidelink communications that could be scheduled in certain parts of radio resources.

A novel feature of a preferred embodiment disclosed herein is a localization module illustrated in . The localization module is implemented in a mobile device to locate target transmitters in proximity as illustrated in and by the mobile device itself. The mobile device can be for example a mobile phone a robot a car etc. The target transmitters can be for example mobile phones laptops a book with a radio transmitter robots cars etc. In the mobile device is moving on a path in an area where there are multiple target transmitters and the mobile device is not connected to the Internet .

In the mobile device is connected to the Internet and a remote sever while moving along a path inside an area where there are multiple target transmitters . The target transmitters are considered to be in proximity as long as their signals can be detected by the mobile device .

The main function of the localization module is to locate one or several of the target transmitters in proximity to the mobile device itself. In one example of the implementation the localization module guides the movement of the mobile device continuously so that the mobile device can approach one or more of the target transmitters of interest. With the localization module two mobile terminals in Long Term Evolution networks will be able to approach each other for sidelink communications. In addition for approaching devices their throughput can be significantly increased while the energy consumption can be reduced. Meanwhile approaching devices will also increase the network capacity and enable more simultaneous sidelink communications in Long Term Evolution networks.

The localization module consists of three key components self tracking component signal detection component and location estimation component . Other assisting components may be included. The key functions of the three key components are described below.

The key function of the self tracking component is to track the movement i.e. measures or estimates the movement of the mobile device and report the measurement results to the location estimation component . illustrates tracking measurements by the self tracking component in user equipment.

In one example the self tracking component in a smart phone e.g. an IPHONE can be one that estimates the relative location moving direction steps of the human being carrying the phone at any sampling time instant by using integrated sensors in the phone e.g. accelerometer gyroscope and compass. The path or trace of the mobile device can therefore be tracked by the self tracking component .

If the mobile device were a car and the self tracking component were in the car then the distance the car travels could be measured by counting the number of wheel rotations and direction of travel could be measured by angle of steering wheel.

If the mobile device were an airplane and the self tracking component were in the airplane then the path of the flight could be traced.

If the mobile device were a robot and the self tracking component were in the robot then knowing the robot s step size i.e. moving distance and its moving direction the path could be readily determined.

If the mobile device included a Global Positioning System GPS component then the location of the mobile device could be obtained by reading GPS signals.

Thus an embodiment of the localization module includes a self tracking component a signal detection component and a location estimation component .

In this embodiment the self tracking component comprises sensors to perform measurements of location information and non transitory computer readable memory to record the measurements and the movements of the localization module .

In this embodiment the signal detection component detects one or more signal properties at locations selected from among those where the self tracking component performs a measurement for distance information between the localization module and one or more target transmitters . See . The measurements include at least one of the distance between the localization module and the one or more of the target transmitters and received signal strength of signals received from said one or more target transmitters by the localization module . The location estimation component estimates location information the location information selected from the group consisting of geographic coordinates where signal properties were detected by the signal detection component a localization related parameter for such geographic coordinates based on the input from the self tracking component and the signal detection component and a direction the localization module would have to go to approach said one or more target transmitters and wherein the a self tracking component the signal detection component and the location estimation component are interconnected so as to enable the provision of data to the location estimation component . The sensors are selected from the group consisting of an accelerometer a gyroscope a global positioning system that can report its location and a compass enabling estimation of the relative location and moving direction of the self tracking component at any sampling time period.

An example of the measurement result by the self tracking component is illustrated in moving direction at the reporting time d dx dy dz and or

relative coordinate x 1 y 1 z 1 x 2 y 2 z 2 x 3 y 3 z 3 . . . x k y k z k which is the relative location of the mobile device itself sampled at k locations on its route. Here x y z can be a right handed Cartesian coordinate system illustrating the x right left y forward backward and z up down axes relative to a human being a robot a car and so on at the reporting time.

In the signal detection component each of the target transmitters is able to broadcast signals that can be detected by the signal detection component . This component detects a set of signal properties at each sampling location for each of the target transmitters of interest and reports this information to the location estimation component . The sampling locations are those where the self tracking component performs a measurement.

Below some examples are given relative to one of the target transmitters . Simpler examples can be applied to other target transmitters of interest. In the examples the signal properties that are detected contain information about the distance between the mobile device and one of the target transmitters . For example the signals could be radio signals like Wi Fi signals reference signals broadcasted by an Evolved Node B in Long Term Evolution networks the discovery signals in Device to Device sidelink communications or dedicated localization signals. These signals may be ultrasonic waves whose roundtrip traveling time can be used to estimate the distance between the mobile device and target terminal.

Additional examples of the signal properties at the sampling locations are the estimated distance from the target transmitter to the mobile device at the k sampling locations L 1 L 2 L 3 . . . L k the received signal strength indicator R 1 R 2 R 3 . . . R k the time of signal arrival T 1 T 2 T 3 . . . T k multiple received signal strength indicators for several directions in each sampling location R 11 d 11 R 12 d 12 . . . R 21 d 21 R 22 d 22 . . . . . . R K1 d K1 R K2 d K2 . . . where R ij is the jth received signal strength indicator at the ith location and d ij is the corresponding direction measurement of the mobile device.

The location estimation component estimates the location or any localization related parameter for each of the target transmitters of interest based on the input from the self tracking component and the signal detection component . In one example of the implementation the location of a target transmitter x y z is estimated by finding the maximum likelihood solution to the following equation group 1 2 1 2 1 2 1 2 2 2 2 2 2 2 2 2 . . . 2 2 2 2 Or other more advanced estimators can be implemented to estimate the location based on the signal properties provided by the signal detection component and the input from the self tracking component .

In an exemplary embodiment the location estimation component estimates which direction the mobile device would have to go to approach one of the target transmitters that is x x k y y k z z k . For example it may suggest that the mobile device go to the left or right forward or backward up or down so that it will be closer to the target transmitter.

In an exemplary embodiment a proximity system also referred to as a proximity platform is illustrated in and is composed of a localization module a proximity description module and a proximity display module within implemented in the mobile device .

The proximity platform is used for locating target transmitters also known as wireless transmitters in proximity to the mobile device and then to display the relevant information about the target transmitters on the mobile device . In addition assisting modules may be utilized to enhance functionality and add complementary features to the localization module the proximity description module and the proximity display module .

In this exemplary embodiment the localization module locates target transmitters in proximity to the mobile device and sends their information e.g. coordinates and ID to the proximity description module .

In this exemplary embodiment the proximity display module displays the information related to all the target transmitters that have been located by the localization module . The way that the information is preferably displayed is dependent on the locations of the target transmitters . This information is for example the name of the transmitter or of the store where the target transmitter is placed an advertisement promotion coupons video photos comments from visitors price lists room and floor numbers etc.

The information related to all the target transmitters may also be the direction and distance information for the mobile device to approach a target transmitter which has been provided by the localization module . In this exemplary embodiment the way the information is displayed depends on the locations of the target transmitters . For example in a top down mode the information of a wireless transmitter that is closer to the mobile device is on top of the one further away or the other way round.

An embodiment of the proximity description module is illustrated in . In addition to assisting components the proximity description module may include a storage component which includes non transitory computer readable memory a description component an Internet access component that provides an optional connection to the Internet so that the proximity description module may operate in the on line or off line mode and a user interface component . Depending on the availability of Internet access the proximity description module is operational in either the online mode connected to the Internet or the offline mode unconnected to the Internet .

In the offline mode the description component reads from the storage component any information related to the target transmitters also referred to as the wireless transmitters which have been located. The description component then sends that information for display. In addition the description component may also get information from the user interface component and store that information in the storage component . For example a user holding the mobile device may take a picture of a store where a wireless transmitter is located which is executed by the user interface component e.g. a camera. The description component will save the picture to the storage component .

In the online mode the switch shown in is closed establishing the connection enabling the description component to communicate with the one or more remote servers . These one or more remote servers may include one or more databases. Such communication enables the mobile device to update the information related to the target transmitters that have been located.

For example the description component may download information related to the target transmitters from the one or more remote servers and send it to the proximity display module for display or to the storage component so that it can be synchronized. In addition the description component may also upload the information that has been stored in the storage component to the one or more remote servers . The description component may also get information from the user interface component and store it in the storage component and or upload it to the one or more remote servers .

The proximity platform may also include a proximity advertisement module as illustrated in and . The proximity advertisement module is an independent module that can be implemented in any device that can access the Internet e.g. a smart phone an iPad a laptop a desktop etc. The main functions of the proximity advertisement module are illustrated in .

Thus an embodiment of the proximity system for a wireless communication network includes multiple base stations wherein each base station is able to send and receive communications in the wireless communication network a plurality of user equipment able to communicate with at least one base station a plurality of target transmitters that are broadcasting signals said plurality of target transmitters able to communicate with at least one base station the proximity system usable to locate one or more target transmitters in the plurality of target transmitters the proximity system comprising a localization module a proximity description module and a proximity display module .

In this embodiment the localization module locates one or more target transmitters within the plurality of target transmitters and sends proximity information on each located target transmitter to the proximity description module .

In this embodiment the proximity description module includes a storage component . The storage component includes non transitory computer readable memory a description component that reads the proximity information from the storage component and sends the proximity information to the proximity display module for display an Internet access component that provides an optional connection to the Internet and a user interface component that inputs user data to the storage component the user interface component processes the proximity information and sends proximity information to the proximity display module . In this embodiment the proximity display module displays the proximity information in a manner that represents the distance from the first user equipment.

In this embodiment the proximity system may utilize proximity information that is selected from the group consisting of coordinates of each located target transmitter an identification of each located target transmitter a name for each store at each located target transmitter an advertisement that may be relevant to each located target transmitter a promotion coupon for any store at each located target transmitter a video relevant to the area near each located access point a photo relevant to the area near each located target transmitter any comments received on the area near each located target transmitter a price list for products or services available near each located target transmitter room availability near each located target transmitter direction and distance information for the first user equipment to approach the target transmitter and floor numbers of buildings near each located target transmitter.

The proximity advertisement module includes three main components an access management component an ownership management component and content management component . These three main components may be combined with other assisting components.

The access management component is used to establish that is it enables an Internet connection between the proximity advertisement module and one or more remote servers also referred to as a remote server .

The ownership management component is used to upload material to wit information to one or more remote servers also referred to as a remote server . The information is used to verify the ownership of target transmitters . For example a store manager is using the proximity platform and will provide verification information through the ownership management component to prove that he is the owner of the wireless transmitters aka target transmitters deployed in his store.

In one example of a preferred embodiment ownership of the target transmitters is verified by uploading the MAC address SSID or a picture of the bar code on the target transmitter to the one or more remote servers using the ownership management component . In one example of a preferred embodiment ownership of the target transmitters is verified by uploading information related to the purchasing receipt for the target transmitters to the one or more remote servers using the ownership management component . After a wireless transmitter is verified the information related to this wireless transmitter is managed or administered through the content management component by its owner.

The content management component is used by the owner to manage the information related to the target transmitters that are verified to the one or more remote servers . For example a geolocation of any of the target transmitters can be uploaded to the one or more remote servers by the owner using the content management component . The floorplan of the building where each of the target transmitters is located can be uploaded to the one or more remote servers by the owner using the content management component . Store description sales promotion advertisement price list and so on of the store that owns the target transmitter can be uploaded to the one or more remote servers by the owner using the content management component . The same information e.g. promotion advertisement and price list may be uploaded for a group of verified wireless transmitters to the one or more remote servers by the owner.

Define xk 0 1 x 1 . . . N k 1 . . . N x as a binary random variable that indicates the state of a Device to Device link. For xk 1 the Device to Device link k in cell x is active i.e. in the device to device mode otherwise xk 0. The parameter N corresponds to the number of cells in the system and N x is the number of available device to device links in cell x.

The maximum level of interference that can be tolerated in the system is given by the Signal to Interference plus Noise Ratio requirements for the Cellular User Equipment and device to device links depicted in 2.1a and 2.1b respectively. An upper bound for the transmission power of device to device links shown in 2.1c .

The terms Iand Icorrespond to the interference received at the base stations x0 and x0 of cell x from the device to device links and Cellular User Equipment respectively. Similarly Iand Icorrespond to the interference received at the Device to Device link k of cell x from other device to device links and Cellular User Equipment respectively. Nand Nare the noise power at the base stations and device to device links receivers respectively. Pcorresponds to the transmission power from the Cellular User Equipment at cell x. Pis the power of the transmitting device of device to device pair k in cell x and P max is the maximum transmission power of device to device links. and represent the target Signal to Interference plus Noise Ratio of the Cellular User Equipment uplink and the Device to Device link k in cell x respectively.

The term G is the channel gain and has a subscript formed using a general rule. For example the general rule is that a subscript abij in Gcorresponds to the channel gain from the transmitter b in cell a to the receiver j in cell i . Note that in all variables cellular user equipment and base stations are indexed as 0 and Device to Device users are indexed with integer numbers greater than zero. In equations 2.1a and 2.1 b Gcorresponds to the channel gain between the Cellular User Equipment and the base stations of cell x while Gcorresponds to the channel gain between the transmitter and receiver of device to device pair k in cell x.

From equations 2.1a and 2.1b there are two levels of interference in the network. The Signal to Interference plus Noise Ratio target for cellular user equipment CUE is redefined as 

This definition allows a clear evaluation of the impact of device to device links to the Cellular User Equipment uplink thus the Quality of Service QoS of Cellular User Equipment is defined as the Signal to Interference plus Noise Ratio loss being below the desired target th. For the device to device links the Quality of Service is defined as the Signal to Interference plus Noise Ratio being above a given threshold th xk. The target Signal to Interference plus Noise Ratio for device to device links is xk D.

Consider a victim receiver v surrounded by N devices. The aggregated interference I received at v as 

Assume that interfering devices are randomly distributed within a given area A. Thus the channel gains can be represented as a random variable G. It is also assumed that the interfering devices have the same transmission power P P P where Pis the maximum transmission power allowed by regulatory entities or the power amplifier. The expected value for the aggregated interference within A is 2.5 where A is the number of interfering devices per unit area and can be derived by using Device to Device Information Element.

Define A dw as a circular interference area around v where dw is the maximum distance between v and an interfering device. Notice that the interference caused by devices outside of A is negligible compared to interference caused by the users inside due to the path loss attenuation. For example dcan be defined as 

It is assumed that device v to be located at a fixed point and device i to be positioned randomly following a circular distribution around v. Thus the probability density function of dis given by a triangular distribution depicted as 

Assume the channel to be invariant during the period of interest thus it is assumes that E h 1. Note also that for practical applications the probability density function of dcan be changed to match real users distribution. Then the expected interference to a victim in an area using 2.5 which is a generic formula and can be used to determine the mode selection procedures.

Consider a device to device pair k in a cell x denoted by D2D that needs to decide its operating mode i.e. Device to Device or cellular mode. Define the upper and lower bound for the transmission power as Pand P respectively.

To obtain the upper bound first the term Ifound in 2.2a is defined as 3.12 where corresponds to the aggregated interference caused by active Device to Device links to the base stations of cell x BS . Since D2Ddoes not have Channel State Information CSI to calculate I it is considered to be a random variable thus its expected value is calculated by applying the interference model presented above.

The statistical upper bound for the transmission power of device to device links Pby combining the expected value of 2.1a and 2.1c with 3.13 thus Pis given by 

The term Iis considered to be a random variable and can be estimated by applying the interference model presented in the above. The parameter is the total amount of interference that the device to device links cause to the base stations x so that the Quality of Service of the Cellular User Equipment can be assured.

To obtain the lower bound for the transmission power the Signal to Interference plus Noise Ratio requirement of device to device links in 2.1b where the term Irepresents the interference from other active device to device links to D2Dand can be estimated as 

Here the parameter Axk is the interference area and E G is the expected value of the channel gain between an interfering Device to Device link within Axk and D2D.

To estimate the number of active device to device links per unit area in the surrounding area of D2Dwe assume that the cells are divided into three sectors and which is highly common in practical applications like Long Term Evolution A as illustrated in .

Thus base station x BS BS and BS can know the number of active device to device links on each sector and this could be broadcasted to the users using Device to Device Information Element and exchanged among base stations using Device to Device Information Element 2. Nxd in the calculation represents the sum of active device to device links in the three sectors and that are closer to D2Dxk and Adk is the area enclosed by such sectors.

By calculating the expected value of 2.1b and combining it with 3.16 a statistical lower bound for the transmission power of device to device links is obtained as follows 

The term Gcorresponds to the channel gain between the transmitter and receiver of D2Dwhich is obtained from the discovery procedure. The parameter Icorresponds to the interference caused by Cellular User Equipment towards D2Dxk and can be estimated locally.

The transmission power can also use other formulas to determine for example 3GPP Long Term Evolution A closed loop power control.

In this implementation each of the base stations needs to broadcast a limited number of parameters using Device to Device Information Element or Device to Base Stations Information Element that are common to all device to device links. The base stations may also exchange Device to Device Information Element 2.

Below are several examples of the information that may be carried in Device to Device Information Element or Device to Base Stations Information Element in the implementation.

