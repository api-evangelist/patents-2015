---

title: System and method for efficient L3 mobility in a wired/wireless network
abstract: A system and method for efficiently handling mobility events includes detecting a mobility event associated with a movement of a mobile unit from a first subnet to a second subnet, forming one or more first flow control messages for updating routing information associated with the mobility event, transmitting the one or more first flow control messages to a core router, forming one or more second flow control messages for disabling layer 2 learning, transmitting the one or more second flow control messages to one or more network switching devices in the first subnet, forming one or more third flow control messages including layer 2 switching instructions for directing network traffic to the mobile unit in the second subnet, and transmitting the one or more third flow control messages.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09392527&OS=09392527&RS=09392527
owner: DELL PRODUCTS L.P.
number: 09392527
owner_city: Round Rock
owner_country: US
publication_date: 20150331
---
This application is a continuation of U.S. patent application Ser. No. 13 909 917 filed on Jun. 4 2013 the full disclosure of which is incorporated by reference herein in its entirety and for all purposes.

The present disclosure relates generally to information handling systems and more particularly to efficient Layer 3 L3 mobility in a wired wireless network.

As the value and use of information continues to increase individuals and businesses seek additional ways to process and store information. One option is an information handling system IHS . An IHS generally processes compiles stores and or communicates information or data for business personal or other purposes. Because technology and information handling needs and requirements may vary between different applications IHSs may also vary regarding what information is handled how the information is handled how much information is processed stored or communicated and how quickly and efficiently the information may be processed stored or communicated. The variations in IHSs allow for IHSs to be general or configured for a specific user or specific use such as financial transaction processing airline reservations enterprise data storage or global communications. In addition IHSs may include a variety of hardware and software components that may be configured to process store and communicate information and may include one or more computer systems data storage systems and networking systems.

Additionally some embodiments of information handling systems include non transient tangible machine readable media that include executable code that when run by one or more processors may cause the one or more processors to perform the steps of methods described herein. Some common forms of machine readable media include for example floppy disk flexible disk hard disk magnetic tape any other magnetic medium CD ROM any other optical medium punch cards paper tape any other physical medium with patterns of holes RAM PROM EPROM FLASH EPROM any other memory chip or cartridge and or any other medium from which a processor or computer is adapted to read.

Computer networks form the interconnection fabric that enables reliable and rapid communications between computer systems and data processors that are in both close proximity to each other and at distant locations. These networks create a vast spider web of intranets and internets for handling all types of communication and information. Making all of this possible is a vast array of network switching products that make forwarding decisions in order to deliver packets of information from a source system or first network node to a destination system or second network node. Due to the size complexity and dynamic nature of these networks sophisticated network switching products are often required to continuously make forwarding decisions and to update forwarding information as network configurations change. The forwarding decisions may be further complicated by use of these networks by mobile devices each having different types and amounts of data that needs to be transferred as network traffic.

Networks are hierarchical and often divided into different subnets. A subnet is a subdivision of a Layer 3 network for example an IP network that often terminates within each building sometimes within each access layer. One subnet may not span across all wireless access points in different subnets. Enterprise networks often see a large percentage of mobile units with mobile devices. These mobile devices are often called Bring Your Own Devices BYODs . BYODs are coupled to the wireless access points and as the BYOD moves from one wireless access point in one subnet to another wireless access point in a different subnet the network should efficiently handle these mobility events.

According to one embodiment a method of managing a network includes detecting a mobility event associated with a movement of a mobile unit from a first subnet to a second subnet forming one or more first flow control messages for updating routing information associated with the mobility event transmitting the one or more first flow control messages to a core router forming one or more second flow control messages for disabling layer 2 learning transmitting the one or more second flow control messages to one or more network switching devices in the first subnet forming one or more third flow control messages including layer 2 switching instructions for directing network traffic to the mobile unit in the second subnet and transmitting the one or more third flow control messages.

According to another embodiment a network controller includes a control unit and one or more ports coupled to the control unit. The network controller is configured to detect a mobility event associated with a movement of a mobile unit from a first subnet to a second subnet form one or more first flow control messages for updating routing information associated with the mobility event transmit the one or more first flow control messages on the one or more ports to a core router form one or more second flow control messages for disabling layer 2 learning transmit the one or more second flow control messages on the one or more ports to one or more network switching devices in the first subnet form one or more third flow control messages including layer 2 switching instructions for directing network traffic to the mobile unit in the second subnet and transmit the one or more third flow control messages on the one or more ports.

According to yet another embodiment an information handling system includes a core router first and second subnets and a network controller including a control unit and one or more ports coupled to the control unit. The network controller is configured to detect a mobility event associated with a movement of a mobile unit from a first subnet to a second subnet form one or more first flow control messages for updating routing information associated with the mobility event transmit the one or more first flow control messages on the one or more ports to a core router form one or more second flow control messages for disabling layer 2 learning transmit the one or more second flow control messages on the one or more ports to one or more network switching devices in the first subnet form one or more third flow control messages including layer 2 switching instructions for directing network traffic to the mobile unit in the second subnet and transmit the one or more third flow control messages on the one or more ports.

In the following description specific details are set forth describing some embodiments consistent with the present disclosure. It will be apparent however to one skilled in the art that some embodiments may be practiced without some or all of these specific details. The specific embodiments disclosed herein are meant to be illustrative but not limiting. One skilled in the art may realize other elements that although not specifically described here are within the scope and the spirit of this disclosure. In addition to avoid unnecessary repetition one or more features shown and described in association with one embodiment may be incorporated into other embodiments unless specifically described otherwise or if the one or more features would make an embodiment non functional.

For purposes of this disclosure an IHS may include any instrumentality or aggregate of instrumentalities operable to compute classify process transmit receive retrieve originate switch store display manifest detect record reproduce handle or utilize any form of information intelligence or data for business scientific control entertainment or other purposes. For example an IHS may be a personal computer a Personal Digital Assistant PDA a consumer electronic device a display device or monitor a network server or storage device a switch router or other network communication device or any other suitable device and may vary in size shape performance functionality and price. The IHS may include memory one or more processing resources such as a central processing unit CPU or hardware or software control logic. Additional components of the IHS may include one or more storage devices one or more communications ports for communicating with external devices as well as various input and output I O devices such as a keyboard a mouse and a video display. The IHS may also include one or more buses operable to transmit communications between the various hardware components.

In some embodiments Subnet includes a network switching device NSD or a switch . Subnet may also include an access point AP . In some embodiment Subnet includes a network switching device or a switch . Subnet may also include an access point . In some embodiments network switching device includes a layer 2 network switching device configured to forward data packets to and from access point . In some embodiments network switching device includes a layer 2 network switching device configured to forward data packets to and from access point . For example the layer 2 network switching device may be selected from an Ethernet switch and or an aggregation pair etc.

In some examples network switching device includes a layer 3 network switching device configured to handle the routing function of layer 3 Internet Protocol within Subnet . In some examples network switching device includes a layer 3 network switching device configured to handle the routing function of layer 3 Internet Protocol within Subnet . The layer 3 network switching device for example is selected from a router a managing server and or a network switching unit etc.

In some other examples each subnet in the autonomous system e.g. Subnet and Subnet may include one or more layer 3 network switching devices linked together. In some examples the subnet may include one or more layer 2 network switching devices linked together. In some examples one or more layer 3 network switching devices and one or more layer 2 network switching devices are linked together. In some examples one or more access points e.g. access point and access point are linked together. Although one network switching device and one access point are shown in a subnet in a person having ordinary skill in the art would be able to understand that each subnet may include any number of network switching devices and access points in any suitable topology. In one embodiment as illustrated in the autonomous system further comprises a controller coupled to access points and . In some examples controller includes a wireless controller.

In some examples after the mobility event of mobile unit in order to preserve any network sessions for example TCP sessions without disruption an IP address of mobile unit from the original subnet e.g. Subnet may be preserved for mobile unit . In some examples data packets destined to mobile unit may be first delivered to the original subnet due to the mobile unit s preserved IP address. After the mobility event is detected the data packets may then get routed from the original subnet to the subnet where mobile unit has moved.

In some examples as illustrated in when a network device in internet sends data packets destined to mobile unit to autonomous system the data packets may be received at core router via path . Because the IP address of mobile unit remains associated with Subnet based on the routing information in core router the data packets may be routed to network switching device in Subnet via path . In some examples the data packets are then forwarded to access point via path . Because controller has detected and notified access point of the mobility event of mobile unit the data packets may be directed from access point back to network switching device via path . In some examples the data packets are further sent back to core router via path . In some examples core router then routes the data packets to network switching device in Subnet via path . Network switching device may further forward the data packets to access point via path . In some examples paths and are accomplished using a tunnel and or an encapsulation mechanism. Then the data packets may be delivered to mobile unit from access point .

This data packets flow pattern for example as indicated as paths in may not be efficient. Tromboning or hairpinning may occur to the flow of the data packets as long as the mobile unit retains the IP address of its original subnet. The tromboning or hairpinning flow pattern of the data packets may take up network bandwidth and or create more redundant routing paths. In some examples with more users having their BYODs there are a large number of mobile units creating multiple mobility events. The above mentioned data packets flow pattern may significantly slow down the wired wireless enterprise networks.

In some embodiments a subnet includes one or more network switching devices or switches. The core router may be coupled to the one or more network switching devices via one or more ports of the core router . For example core router is coupled to network switching device in Subnet via ports . Core router may be coupled to network switching device in Subnet via ports .

Network switching device may include one or more ports that couple network switching device to core router for transmitting and receiving data packets. In some examples network switching device is network switching device . In some examples Subnet also includes an access point AP coupled to network switching device via ports . Access point may be wirelessly coupled to one or more mobile devices in Subnet . In some examples access point is access point . Similarly network switching device may include one or more ports that couple network switching device to core router for transmitting and receiving data packets. In some examples network switching device is network switching device . In some examples Subnet includes an access point coupled to network switching device via ports . Access point may be wirelessly coupled to one or more mobile devices in Subnet . In some examples access point is access point .

In some examples network switching device includes a layer 2 network switching device configured to forward data packets to and from access point . In some examples network switching device includes a layer 2 network switching device configured to forward data packets to and from access point . For example the layer 2 network switching device may be selected from an Ethernet switch and or an aggregation pair etc.

In some examples network switching device includes a layer 3 network switching device configured to handle the routing function of layer 3 Internet Protocol within Subnet . In some examples networks switching device includes a layer 3 networks switching device configured to handle the routing function of layer 3 Internet Protocol within Subnet . The layer 3 network switching device for example is selected from a router a managing server and or a network switching unit etc.

In some examples the subnet in the autonomous system may include one or more layer 3 network switching devices linked together. In some examples the subnet may include one or more layer 2 network switching devices linked together. In some examples one or more layer 3 network switching devices and one or more layer 2 network switching devices are linked together. In some examples one or more access points are linked together. Although one network switching device and one access point are shown in a subnet in a person having ordinary skill in the art would be able to understand that each subnet may include any number of network switching devices and access points in any suitable topology.

Network switching device may include a control unit and or memory . In some examples control unit may manage and or control the operation of network switching device . In some examples control unit may include one or more processors. In some examples control unit may maintain and or update the one or more forwarding information tables for example L2 table and L3 table in memory . In some examples the one or more forwarding information tables may be stored in memory coupled to control unit and or network switching device . In some examples the one or more forwarding information tables may include virtual LAN VLAN tables MAC tables L2 tables L3 tables layer 3 forwarding information bases access control lists ACLs flow processing FP tables and or the like. In some examples the one or more forwarding information tables may be implemented using data structures other than tables and or using databases. Similarly network switching device includes a control unit and or memory . Memory may include one or more forwarding information tables for example L2 table and L3 table as shown in .

In some embodiments autonomous system includes a network controller . As shown in network controller includes one or more ports for coupling network controller to one or more network switching devices for example network switching devices and or . One or more ports may also couple network controller to one or more network devices for example core router for transmitting and receiving management packets. Network controller may include control unit . In some examples control unit may manage and or control the operation of network controller . In some examples control unit may include one or more processors. In some examples network controller is operating as a managing controller for autonomous system . Thus network controller may include management table stored in memory coupled to network controller and or control unit . In some examples management table may be used by network controller and or control unit to store information regarding the configuration of other devices in autonomous system . In some examples management table may include one or more tables.

In some embodiments autonomous system includes wireless controller . In some examples wireless controller is wireless controller . In some examples network controller may include one or more Application Programming Interfaces APIs configured to facilitate communication between network controller and wireless controller . In some embodiments network controller is coupled to network switching devices and or via one or more ports and the one or more APIs may facilitate communication between the network controller and the other network switching devices. In some examples network controller is coupled to core router via one or more ports and the one or more APIs may facilitate communication between network controller and core router . In some examples wireless controller may be coupled to access point through network switching device . Wireless controller may be coupled to access point through network switching device and or core router . Wireless controller may be coupled to access point through other devices not shown in . Wireless controller may be further coupled to access point . Although wireless controller and network controller are illustrated separately in a person having ordinary skill in the art would be able to understand that in any suitable topology the wireless controller and the network controller may be replaced with a unified wireless wired controller. In some examples core router networks switching devices and access points and wireless controller and network controller may be in the same management and control domain.

In some embodiments after detecting the mobility event control unit in network controller creates one or more flow control messages to update layer 3 routing information in core router . In some examples the layer 3 routing information includes IP routing information. In some examples control unit transmits the flow control messages on one or more ports to core router . In some examples control unit inserts IP routing information of mobile unit to core router . Control unit may insert the IP routing information into L3 table stored in the memory . In some examples the IP routing information includes a 32 IP routing entry for the IP address of mobile unit . In some examples the 32 IP routing entry may have higher priority than the subnet routing information so that this 32 IP routing entry may override the default layer 3 routing information that would normally forward data packets for mobile unit to Subnet as described in .

In some embodiments control unit of network controller further creates one or more flow control messages to disable layer 2 learning in Subnet . In some examples the layer 2 learning includes MAC learning. In some examples the layer 2 learning includes Address Resolution Protocol ARP learning in Subnet . The flow control messages are then transmitted by control unit on one or more ports to one or more ports of network switching device in Subnet . In some examples control unit turns off the MAC and or ARP learning in Subnet by network switching device .

In some embodiments control unit in network controller creates one or more flow control messages to update layer 2 switching instructions associated with the mobility event in core router . In some embodiments the layer 2 switching instructions include a MAC address of mobile unit in Subnet . In some embodiments the layer 2 switching instructions include instructions for forwarding layer 2 traffic to mobile unit using Subnet . Control unit of network controller may transmit the flow control messages on one or more ports to core router . In some examples the one or more flow control messages include a static MAC address entry into core router . In some embodiments control unit may insert the MAC address of mobile unit into L2 table stored in memory so that layer 2 traffic may be directed to mobile unit in Subnet through network switching device . Thus the data packets destined to mobile unit may be routed to Subnet after the mobility event.

In some embodiments control unit in network controller also creates one or more flow control messages to update layer 2 switching instructions in network switching device and or other network switching devices in Subnet . In some embodiments the layer 2 switching instructions include MAC address of mobile unit in Subnet . In some embodiments the layer 2 switching instructions include instructions for forwarding layer 2 traffic to mobile unit via Subnet . Control unit of network controller may transmit the flow control messages on one or more ports to network switching device and or other network switching devices in Subnet . In some examples the one or more flow control messages include a static MAC address entry into network switching device and or other network switching devices in Subnet . In some embodiments control unit may insert the MAC address of mobile unit into L2 table stored in the memory so that layer 2 traffic is directed to mobile unit through network switching device .

In some examples as illustrated in when internet sends data packets destined to the mobile unit to autonomous system the data packets may be received at core router via path . The data packets may be then routed to network switching device in Subnet via path . The data packets may be forwarded to access point via path and delivered to mobile unit coupled to access point .

This data packets flow pattern for example as indicated as paths in may be more efficient because the tromboning or hairpinning flow pattern of the data packets can be avoided. Data packets may be routed and forwarded without taking up extra bandwidths or creating redundant routing paths. The data packets flow pattern disclosed herewith may be beneficial for the wired wireless enterprise networks with large numbers of mobile units and mobile events.

At process a mobility event is detected. A mobility event may include a mobile unit such as mobile unit moving from a first subnet e.g. Subnet to a different second subnet e.g. Subnet . A network device such as an access point may find a new connection from mobile unit in Subnet . Access point may notify a network controller of the mobility event. In some examples access point may notify a wireless controller of the mobility event. Wireless controller may further notify network controller of the mobility event. In some examples wireless controller may notify network controller using one or more APIs of network controller . In some examples network controller detects the mobility event.

At process one or more flow control messages are formed and transmitted to update layer 3 routing information in the core router e.g. core router . The flow control messages may be formed and transmitted by network controller . The flow control messages include instructions to update the layer 3 routing information in core router . The routing information may be associated with the location of mobile unit in Subnet . In some examples the layer 3 routing information may include a 32 IP address routing entry based on an IP address of mobile unit . In some examples control unit of core router may update one or more tables having routing information in core router .

At process one or more flow control messages are formed and transmitted to disable layer 2 learning in the first subnet Subnet . The flow control messages may be formed and transmitted by network controller . The flow control messages may be transmitted to one or more selected network switching devices e.g. network switching device in Subnet . In some examples the instructions to disable layer 2 learning may include instructions to disable MAC and or ARP learning in Subnet .

At process one or more flow control messages are formed and transmitted to update layer 2 switching instructions in core router . In some embodiments the layer 2 switching instructions include instructions to insert the MAC address of mobile unit in the second subnet Subnet to core router . In some examples the one or more flow control messages include a static MAC address entry into core router . The flow control messages are formed to direct layer 2 traffic for mobile unit to Subnet .

At process one or more flow control messages are formed and transmitted to update layer 2 switching instructions in the first subnet Subnet . In some embodiments the layer 2 switching instructions include instructions to insert the MAC address of mobile unit in the second subnet Subnet to the network switching device and or other network switching devices in the first subnet Subnet . In some examples the one or more flow control messages include a static MAC address entry into the network switching device and or other network switching devices in Subnet . The flow control messages are formed to direct layer 2 traffic for mobile unit to Subnet .

At optional process it is determined whether all network sessions e.g. TCP and or UDP sessions associated with the IP address of mobile unit from the first subnet Subnet are closed. In some examples network controller determines whether the related network sessions are closed. In some examples network controller may actively exchange messages with one or more routers in the autonomous system. In some examples network controller may actively exchange messages with one or more network switching devices in the autonomous system. When all network sessions associated with the IP address of mobile unit from Subnet are closed method may proceed to the process . In some examples when not all network sessions associated with the IP address of mobile unit from Subnet are closed method continues to process .

At optional process one or more flow control messages are formed and transmitted to undo the layer 3 routing information updates in core router . One or more flow control messages are formed and transmitted to undo the layer 3 routing updates made during process . In some examples the flow control messages include instructions to remove a 32 IP address routing entry performed during process . The flow control messages may be formed and transmitted by network controller . In some examples a new IP address associated with the second subnet is assigned to mobile unit .

At optional process one or more flow control messages are formed and transmitted to enable layer 2 learning in the first subnet Subnet . In some examples this undoes the layer 2 learning disabled during process . The flow control messages may be formed and transmitted by network controller . The flow control messages may be transmitted to one or more selected network switching devices e.g. network switching device in Subnet . In some examples the instructions to enable layer 2 learning may include instructions to enable MAC and or ARP learning in Subnet .

Some embodiments of network controller of may include non transient tangible machine readable media that include executable code that when run by one or more processors may cause the one or more processors to perform the processes of methods as described above. Some common forms of machine readable media that may include the processes of method are for example floppy disk flexible disk hard disk magnetic tape any other magnetic medium CD ROM any other optical medium punch cards paper tape any other physical medium with patterns of holes RAM PROM EPROM FLASH EPROM any other memory chip or cartridge and or any other medium from which a processor or computer is adapted to read.

As discussed above and further emphasized here the figure of the network controller is merely an example which should not unduly limit the scope of the claims. One of ordinary skill in the art would recognize many variations alternatives and modifications. According to some embodiments other architectures are possible for the network controller.

Although illustrative embodiments have been shown and described a wide range of modification change and substitution is contemplated in the foregoing disclosure and in some instances some features of the embodiments may be employed without a corresponding use of other features. One of ordinary skill in the art would recognize many variations alternatives and modifications. Thus the scope of the invention should be limited only by the following claims and it is appropriate that the claims be construed broadly and in a manner consistent with the scope of the embodiments disclosed herein.

