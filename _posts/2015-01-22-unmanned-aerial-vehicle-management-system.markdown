---

title: Unmanned aerial vehicle management system
abstract: An Unmanned Aerial System configured to receive a request from a user and fulfill that request using an Unmanned Aerial Vehicle. The Unmanned Aerial System selects a distribution center that is within range of the user, and deploys a suitable Unmanned Aerial Vehicle to fulfill the request from that distribution center. The Unmanned Aerial System is configured to provide real-time information about the flight route to the Unmanned Aerial Vehicle during its flight, and the Unmanned Aerial Vehicle is configured to dynamically update its mission based on information received from the Unmanned Aerial System.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09489852&OS=09489852&RS=09489852
owner: Zipline International Inc.
number: 09489852
owner_city: San Francisco
owner_country: US
publication_date: 20150122
---
This disclosure relates generally to Unmanned Aerial Systems UASs and in particular it describes a system for reliably operating one or more Unmanned Aerial Vehicles UAVs to perform various functions including but not limited to package delivery data capture mapping surveillance and infrastructure provisioning.

While there are existing systems that perform package delivery data capture mapping and surveillance using manned aircraft operating a reliable system using unmanned and autonomous aerial vehicles has been challenging. Yet the benefits of using autonomous aerial vehicles rather than manned aircraft are substantial. For example manned aircraft require human operators and large secure areas for takeoff landing storage and other logistics and infrastructure. Moreover large manned aircraft are expensive to maintain and operate making them unsuitable for performing shorter missions or missions requiring smaller payloads. Further installations for operating manned aircraft e.g. airfields airports etc. are difficult to scale or relocate. For example it is neither simple nor inexpensive to relocate aircraft facilities and personnel in response to changes in demand for air services. Finally human error accounts for a large percentage of aircraft accidents.

Accordingly it would be beneficial to provide unmanned and autonomous aerial vehicle systems and associated methods in order to address these and other drawbacks of traditional manned aircraft.

Embodiments discussed herein are related to methods and systems for fulfilling a service request from a user using an unmanned aerial vehicle.

In some embodiments a method for fulfilling a request from a user includes receiving a service request from a remote client device operated by the user where the service request specifies a destination site and selecting a distribution center based on the destination site. The method further includes sending at least a portion of the service request to the distribution center generating mission data that is communicated to an unmanned aerial vehicle and configuring the unmanned aerial vehicle to navigate to the destination site using the mission data.

The mission data comprises a skymap where the skymap contains data about one or more flight corridors. The unmanned aerial vehicle is configured to navigate to the destination site using the one or more flight corridors.

The method further comprises computing a traversal cost for each of a plurality of flight corridors and determining a lowest cost route to the destination site using the computed traversal cost.

The method may further comprise selecting the distribution center based on its distance from the destination site and the availability of a payload type specified in the service request at the distribution center.

The method may further comprise generating a route to the destination location based on a route refinement selection received from the remote client device.

Other embodiments are disclosed herein. The features utilities and advantages of various embodiments of this disclosure will be apparent from the following description of embodiments as illustrated in the accompanying drawings.

While the present disclosure has been described with reference to various embodiments it will be understood that these embodiments are illustrative and that the scope of the disclosure is not limited to them. Many variations modifications additions and improvements are possible. Modules and procedures may be separated or combined in different ways in various embodiments or described with different terminology. These and other variations modifications additions and improvements may fall within the scope of the disclosure as defined in the claims that follow.

As noted above the benefits of using autonomous aerial vehicles rather than manned aircraft are substantial. For example systems utilizing autonomous vehicles are capable of operating without skilled human pilots and can bring many benefits when compared to human piloted systems. Because UAVs do not need to carry a human pilot they can be made smaller than conventional aircraft. A small UAV can perform missions that are impossible or uneconomical for a full sized manned aircraft. It is possible for smaller UAVs to access locations that lack the infrastructure or physical space to accommodate full sized aircraft. For example UAVs can land in undeveloped locations that lack paved runways and can fly in urban environments where space between structures is limited.

In addition expanding and relocating operations for a UAS can be done more easily in response to market conditions since often a UAS is not as constrained by the availability of skilled workers such as pilots as a manned system would be and some of the skilled workers can perform their tasks remotely largely removing the need for worker relocation as the system expands.

Finally UASs can improve the safety and reliability of large scale air operations through the application of rigidly enforced safety rules automatic checks comprehensive reporting and logging and other safety measures.

The UAS system described herein provides a reliable and efficient aerial platform for performing various target functions including but not limited to package delivery data capture mapping surveillance and infrastructure provisioning. While specific embodiments of the UAS system are described herein some embodiments may comprise systems and methods that are not generally relevant to every target function. One skilled in the art will readily recognize the relevance of a recited system or method in relation to the target functions.

The service requestor is a human user or an autonomous system that issues a service request to the UAS . In the case where the service requestor is a human user that user may use a remote client device such as a mobile phone tablet or personal computer to issue the request. A service request is an instruction to the UAS to provide some service at the destination site . The destination site may be any designated location such as a portion of open ground a building a mailing address a GPS coordinate or a slice of airspace. In some embodiments the destination site is the location of a beacon device. The beacon device may be any device that emits a signal that can be used to track or identify a location such as for example a transponder a mobile phone etc. The destination site may also be designated by identifying a particular object such as for example a designated vehicle a mailbox a delivery pad or some other target object that can be tracked to indicate a target location for a service. In another embodiment the destination site is the location of the service requestor although this need not be the case. Although one service requestor and one destination site are illustrated in this embodiment in practice there can be many service requestors and destination sites .

The requested service may be any service that can be provided from an airborne platform. For example in one embodiment the service request issued by the service requestor is a request to deliver a package containing a specific payload to the destination site . In another embodiment the service request is a request to capture image data using a camera mounted on the UAV at the destination site or along a route to and from the destination site . In yet another embodiment the service request is a request to provide an Internet access point at the destination site using a Wi Fi gateway mounted on the UAV . Many other services can be provided using the UAS at the destination site such as package pickup surveillance mapping data capture using UAV mounted instruments etc.

The UAV is an Unmanned Aerial Vehicle. The UAV can be implemented using a variety of systems and airframes. Almost any practical flying platform can be used as the vehicle base for the UAV including gliders airplanes balloons helicopters etc. In one embodiment the UAV is implemented using a fixed wing aircraft with redundant propulsion systems that is optimized for long range flight. In another embodiment the UAV is implemented using a quad rotor aircraft that is optimized for short range flight and vertical takeoff and landing. In yet another embodiment the UAV is implemented using a hybrid fixed wing aircraft with tilt rotors capable of both long range flight and vertical takeoff and landing. In another embodiment the UAV is implemented using a fixed wing aircraft with fixed horizontally oriented motors configured to provide horizontal thrust and separate fixed vertically oriented motors configured to provide vertical thrust. The UAV may also be implemented using a lighter than air platform such as a balloon blimp or other dirigible. One purpose of the UAV in the UAS is to serve as a flexible platform that can be rapidly deployed on demand with minimum human involvement.

The UAV may carry any suitable payloads depending on the nature of the service request received from the service requestor . Components of the UAV are explained in more detail in the description for . Although a single UAV is depicted in there may be more than one UAV in a UAS .

The distribution center is a fixed or mobile facility that facilitates the launch recharge communications repair and payload logistics for the UAV . The distribution center is explained in further detail in the description for . Although a single distribution center is shown in there may be more than one distribution center in the UAS . In one embodiment each UAV in the UAS is based at a single distribution center and is repaired reloaded and recharged at that distribution center . In another embodiment each UAV can be repaired reloaded and recharged at any distribution center in the UAS and UAVs may be routed between distribution centers based on the logistical requirements of current service requests and the projected requirements for future service requests.

The global services may be comprised of one or more computer server systems running software services i.e. computer software programs accessible through the Internet which provide offsite support administration air traffic control communications data storage and logistics functions for the distribution centers and the UAVs . In one embodiment the global services route a service request from a service requestor to a distribution center that is geographically adjacent to or in relative geographic proximity to the destination site . The global services are explained in more detail in the description for .

The global system operator may be a human user that monitors and operates the UAS to ensure the correct and efficient functioning of the system. For example in some embodiments the global system operator may monitor the UAS through the computer servers of the global services to ensure that a distribution center has the appropriate payload in stock to fulfill a service request from a service requestor . In one example embodiment the global system operator may use the global services to route new stock of a particular payload to a distribution center in anticipation of that payload stock being depleted.

There may be more than one global system operator and the global system operators may monitor and provide services for multiple distribution centers UAVs and service requestors . In some embodiments one or more of the global system operators are trained UAV pilots and the UAS may hand over control of a UAV to one such operator temporarily or for the duration of a UAV mission.

The distribution center operator is a human user that monitors and operates the distribution center . The distribution center operator may ensure that the UAS components that are local to the distribution center function correctly. This includes the UAVs based at the distribution center as well as other components such as launchers rechargers payloads etc. The distribution center provides systems and methods to facilitate the tasks of the distribution center operator . For example in some embodiments the distribution center operator operating a distribution center is provided with an operator interface that allows her to determine the inventory of each type of payload at that distribution center and that enables her to order more of any type of payload that is in short supply. The distribution center systems and methods that facilitate the distribution center operator s work are explained in more detail in the description for .

Once a distribution center is selected at least a portion of the information in the service request is sent to that distribution center . In addition to the destination site location and payload information the service request may contain other information that is useful at the distribution center for the fulfillment of the service request. For example in some embodiments the service request further comprises a time designating when the service request should be fulfilled at the destination site .

A UAV can be selected to fly a mission to fulfill the request either during the distribution center selection process or afterwards. The UAV that will fly the mission may be selected based on one or more criteria that are relevant to the service request and or system efficiency. For example in one embodiment the UAV is selected based on the charge level of its battery and the distance to the destination site . In another embodiment the UAV is selected based on the instruments that are installed on its airframe and a type of data capture specified in the service request. In yet another embodiment the UAV is selected based on a package in its payload matching a package specified for delivery in the service request.

In an alternative embodiment the UAS does not select from pre configured UAVs for a given mission. Instead either the distribution center or the global services determine a set of components that are required to complete the service request and the distribution center causes a UAV comprising the required components to be assembled for the mission. For example if the destination site is a certain distance from the distribution center the UAV for the mission can be configured with a suitable battery pack and engines to complete a round trip flight to that destination.

The selection of the UAV may occur after the selection of the distribution center or may be used as a factor in selecting the distribution center . For example the distribution center may be selected from only those distribution centers that have a particular type of UAV airframe UAV battery or UAV engine based on the weight of a payload required by the service request.

Once the UAV is selected for the mission mission data is generated for it. The mission data is information that enables the UAV to navigate to the destination site and fulfill the service request. In some embodiments the mission data includes GPS coordinates for the destination site as well as flight corridor information facilitating navigation to those GPS coordinates. The flight corridor information is discussed in more detail in the descriptions for and . Further details related to the mission data are discussed in the descriptions for and . After the mission data is generated it is uploaded into a database on the UAV .

Once the mission data is generated and uploaded the UAV is launched . From the time the UAV is launched and until it lands again it is considered to be on a mission to complete the service request. In one embodiment the UAV may be launched with a mission to fulfill more than a single service request. In another embodiment at least a part of the mission data is uploaded and perhaps even generated after the UAV is launched .

Although not depicted in the figure the modules of the UAV are interconnected via at least one communications bus. The bus allows the modules to communicate with each other to receive and send information and commands. The bus may be implemented using any of the methods known to those with familiarity in aviation and vehicle engineering. For example the bus may be implemented using the Controller Area Network CAN standard. To improve the reliability of the system embodiments may use additional redundant buses. For example a dual CAN bus can be implemented to prevent a bus failure from causing the UAV to lose control.

The mission planner is a module that provides the other modules of the UAV with high level directives and goals the execution of these directives and goals causes the UAV to fulfill a service request. The goals and directives produced by the mission planner are communicated to the other modules of the UAV which may then take other actions to complete a mission including the generation of additional directives and goals for other modules of the system.

For instance in one embodiment the mission planner determines a set of waypoints that the UAV may traverse in order to reach a destination site and provides the location of a first waypoint to the flight controller as a goal along with a directive to fly to that location. In this embodiment the flight controller may then in turn compute the orientation and propulsion needed to move the UAV towards the goal location the flight controller may also generate further directives for other modules such as for example for the actuator control system and for the propulsion management system . The directives sent to the actuator control system and the propulsion management system may cause them to take actions that change the orientation of the UAV and propel it towards the goal location. As a result of the actions taken by various modules in the UAV in response to the directives and goals of the mission planner the UAV will fly to the designated first waypoint. Once that goal is achieved the mission planner may send new goals and directives to the other modules such that the UAV flies to a second waypoint and a third waypoint and so on until the higher level goal of reaching the destination site is fulfilled.

Besides movement directives the mission planner may issue other directives to the modules of the UAV that cause actions such as dropping of a payload capturing of image data transmitting of data etc. The mission planner may also receive commands from the global services from human operators or from third party controllers such as air traffic controllers and may issue directives to the UAV modules based on these commands. For instance in one example embodiment the mission planner on board a UAV may receive a command from a human operator to fly back to a distribution center due to an approaching storm. In response to this command the mission planner will produce new goals and directives that are sent to other modules in the UAV and as a result of these new goals and directives the UAV will change course and return to the distribution center .

The mission planner is provided with mission data prior to the launch of the UAV from the distribution center . The mission data includes information that enables the mission planner to locate the destination site to determine an appropriate route to that location and to perform any request specific actions required to complete the service request. For example in some embodiments the mission planner is provided with a destination location a route to the destination location and a series of points along the route where images are to be captured with an on board camera.

In some embodiments the mission data includes a local skymap for an area of operation. The area of operation is a geographic region that encompasses the distribution center and the destination site . The local skymap includes information about a plurality of flight corridors within the area of operation. In some embodiments the local skymap is generated from a global skymap which contains information about flight corridors within a wider geographic area by selecting the information in the global skymap that pertains to flight corridors within the area of operation.

A flight corridor is an area of airspace that is designated by the UAS for UAV flight. The local conditions in a flight corridor may be monitored by the UAS and the flight corridors may be used by the UAVs to travel safely and efficiently between locations. The local skymap comprises information about each of a plurality of flight corridors. The information about each flight corridor may include but is not limited to data about the flight corridor s location local wind conditions local air traffic i.e. other UAVs and aircraft within the flight corridor precipitation aerial hazards geographic obstacles e.g. Mountains etc.

Using the information in the skymap the mission planner develops a dynamic route from the distribution center to the destination site prior to launch or soon after launch. The dynamic route takes into account the goals of the mission as well as the requirement of the UAV to return to a distribution center after fulfilling the service request. In some embodiments the mission planner receives a pre generated route from the distribution center or the global services and modifies that route only as conditions in the skymap change over time.

The dynamic route is a sequence of flight corridors that the UAV may traverse to fly from its present location to some goal location. As the UAV flies its mission it may receive updates to the skymap from the UAS including updates concerning local conditions of the flight corridors in the area of operation. The updates may be received from the global services from the distribution centers or from other UAVs . In some embodiments updates may also be received from the service requestors or from third parties such as weather information providers news services air traffic controllers satellites civil aviation authorities law enforcement military aviation authorities etc.

The mission planner may modify the dynamic route during the mission as the flight corridor updates are received. For example in some embodiments the mission planner may alter the dynamic route to avoid flight hazards such as inclement weather aircraft trespassing into a flight corridor etc. When the route is modified the mission planner will re determine the sequence of flight corridors that will be traversed to reach the goal location.

In one embodiment the skymap that is provided to the UAV is a global skymap that contains data about the entire area that the UAS covers. In another embodiment the skymap contains information about only the area of operation for the UAV s current mission.

Once the skymap is received the mission planner computes a traversal cost for each flight corridor in the area of operation. The traversal cost for a flight corridor is a measure of the suitability of the corridor s path for a flight to the goal location. The goal location may be any point that the UAV must traverse to complete its mission. For example the destination site may be the goal location on the outward leg of the UAV s mission while the distribution center may be the goal location on the return leg of the UAV s mission. The traversal cost of a flight corridor may take into account many factors including but not limited to the wind speed and weather in the flight corridor the air traffic within the flight corridor the length and elevation of the flight corridor and the number and direction of maneuvers required to navigate the flight corridor. The traversal cost for a flight corridor may take into account the predicted energy consumption necessary to fly the UAV along the flight corridor s path. Flight corridors that are predicted to require greater energy to traverse may be assigned a greater traversal cost than flight corridors that require less energy. For example a flight corridor that has a tailwind may have a lower traversal cost than a flight corridor with a headwind. The traversal cost may also take into account regulatory limits to flight paths. For example if a flight corridor intersects an area that has been temporarily designated as a no fly zone by the local aviation authority the traversal cost for that flight corridor may be set to infinity until the no fly restriction is lifted.

In some embodiments the traversal cost for flight corridors is pre computed by the global services or the distribution center and is included in the skymap received by the UAV .

After the traversal cost for each flight corridor in the skymap is computed the mission planner determines a lowest cost route from the UAV s current position to the goal location using the flight corridors. Any appropriate path finding and or graph traversal algorithms can be used to find the lowest cost route including the A algorithm Dijkstra s algorithm and other similar algorithms known to those with skill in the art.

Once the lowest cost route is determined the UAV will traverse the lowest cost route. As the UAV flies to the goal location it may periodically receive information from the global services the distribution centers other UAVs and third party information sources such as weather services aviation authorities etc. . Any of the data received from such sources may constitute a local skymap update in the sense that the traversal cost of one or more flight corridors in the area of operations may need to be changed. For example if the weather in a particular region changes the traversal cost of flight corridors in that region may increase or decrease depending on the wind in those flight corridors and the direction that the UAV must fly.

The mission planner will determine whether a given piece of data received by the UAV constitutes a local skymap update by applying rules and heuristics to the received information. For example in some embodiments if the mission planner receives information that pertains to regions outside the area of operations it may determine that this information does not constitute a local skymap update.

Some information that the UAV receives may be filtered out from consideration because it is not related to factors that may affect the flight of an aircraft. For example if the UAV receives information regarding inventory levels at a distribution center this information may be stored or forwarded but it will not influence the local skymap since inventory levels will not influence the traversal cost of flight corridors. Note however that changing inventory levels may influence the mission planner s selection of a goal destination. For example after a service request has been fulfilled a UAV may be routed to land at a distribution center where there are insufficient UAVs in the inventory for future missions as opposed to the distribution center that it took off from. 

As long as the mission planner determines that no data requiring an update to the local skymap has been received the UAV continues to fly on the lowest cost route that has already been determined . However if a local skymap update has been received then the mission planner will update the traversal cost for each affected flight corridor in the local skymap.

The mission planner will then re determine the lowest cost route to the goal location based on the updated traversal costs of the flight corridors in the local skymap.

As illustrated in the UAV also includes a flight controller . The flight controller provides the mission planner with guidance navigation and control functions. For example the mission planner is required to know the location orientation altitude and speed of the UAV at various times during the mission and the flight controller provides this information through a process called state estimation. Similarly when the mission planner requires the UAV to move from one point to another it sends commands to the flight controller to achieve that goal. The flight controller communicates over the bus with the sensor system the actuator control system and the propulsion management system to provide the guidance navigation and control functions.

The sensor system provides information from sensor instruments to the flight controller . In some embodiments the sensor system comprises several instruments such as for example a Global Positioning System GPS unit an Inertial Measurement Unit IMU dynamic pressure sensor static pressure sensor air temperature reader etc.

The actuator control system includes motorized actuators or actuators that are moved by any other means such as hydraulics that control various moving parts on the UAV including the control surfaces on the airframe. The actuator control system can change the state of the motorized actuators based on commands from the flight controller . The actuator control system can also report the current state of the motorized actuators back to the flight controller .

The propulsion management system controls the force exerted by the engines mounted on the UAV for example by adjusting the speed of propellers mounted on a propeller powered UAV and monitors the amount of fuel and or battery capacity remaining on the UAV. The flight controller can adjust the speed of travel of the UAV by communicating with the propulsion management system .

The flight controller receives information from the sensor management system and the actuator control system and performs a state estimation that provides a best guess of the UAV s position orientation and speed to the mission planner . The state estimation is continuously updated and checked as the various systems of the UAV provide new information.

The mission planner determines the high level goal location that the UAV must travel to and communicates the goal location to the flight controller . The mission planner may communicate commands and goals to the flight controller using any appropriate technique s . For example in one embodiment the mission planner communicates movement goals to the flight controller via a sequence of waypoints. In another alternative embodiment the mission planner communicates movement goals to the flight controller via splines.

The flight controller receives the movement goals as waypoints splines or any other suitable form and determines based on rules or physics based models the commands that must be communicated to the actuator control system and the propulsion management system to achieve the movement goals. For example according to some embodiments the physics based models output the required rudder and elevator state and the engine thrust for the UAV based on the current state estimation i.e. the UAV s position orientation and speed and the local conditions including wind and temperature.

The communication system comprises transmitters and receivers that enable the UAV to send and receive information using different communications protocols. The communication system may include transmitters and receivers for standard cellular radio technologies such as CDMA GSM 3G 4G LTE etc. as well as custom line of sight and mesh protocols that allow the UAV to directly communicate with a distribution center or another UAV .

Although the UAV is designed to operate autonomously the mission planner is configured to receive instructions via the communications system that may override the mission planner s flight plans. For example the UAV may receive instructions from a distribution center or the global services that command the UAV to return to base immediately due to bad weather or a passenger aircraft entering the area. On receiving such a command the mission planner will change the movement goals of the UAV and issue new directives to the other modules so that the UAV adjusts its flight path as necessary.

The payload management system performs various functions related to the payload carried by the UAV depending on the nature of the service request and the payload. For example when the payload is attached to the UAV prior to launch the payload management system will communicate that the attachment is successful to the mission planner and or the distribution center . In the case where the service request is a package delivery the payload management system also monitors the state of the payload for example the temperature of the payload in the case where the payload is perishable and manages the release of the payload at the destination site . In this example the mission planner determines the location altitude speed and orientation of the UAV required to drop the payload safely at the destination site and communicates a command to release the payload at the appropriate time to the payload management system . The payload management system receives the command and releases the payload.

The payload management system may perform other functions depending on the nature of the payload. For example in the case where the service request is related to surveillance or mapping the payload management system may interface with a camera system included in the payload and can capture images or video based on instructions received from the mission planner . For instance in this embodiment the mission planner may issue a command to the payload management system to capture images when the UAV flies over some point of interest in its route.

The safety system manages various failsafe components mounted on the UAV . For example in one embodiment the safety system monitors and controls a parachute system that may be deployed based on a command received from the mission planner or based on information received directly from the flight controller or sensor system . For instance if the UAV enters a non recoverable dive the safety system may deploy the parachute based on data received from the sensor system . In another embodiment the mission planner may instruct the safety system to deploy a parachute based on a message received from the global services or a distribution center . Parachute deployment on command may be useful in situations where an air traffic control process detects the possibility of imminent collision between multiple aircraft in an area with heavy air traffic. Forcing a UAV to deploy its parachute and descend may prevent it from entering the flight path of other aircraft.

The structure and functionality of the UAV described above has been divided into modules based on one example implementation but the functionality of various modules may be merged or further split such that there are more or less components than have been illustrated in . It is also possible to devolve some of the functionality of the various modules directly into the actuators sensors and other hardware components of the UAV . For instance the flight controller may communicate directly with a plurality of actuator motors each of which has the functionality of the described actuator control system . Such a decentralization of hardware component control may be beneficial in some implementations from the point of view of fault tolerance.

The distribution center handles the local logistics for the UAS . When the global services receive a service request from a service requestor the global services will select a distribution center to fulfill the service request according to criteria in the service request including the location of the destination site . The global services will then send at least a portion of the information in the service request to the selected distribution center .

The distribution center is responsible for launching and recovering UAVs maintaining and monitoring inventories of payloads and UAVs and communicating local information to the global services . Other functions such as UAV or component selection for missions mission data preparation UAV monitoring and communication during the mission and other tasks can be performed by either the distribution centers or the global services depending on implementation and or system status. A distribution center operator may be stationed at the distribution center to facilitate the distribution center operations.

In this embodiment the distribution center is comprised of a propulsion inventory management system a payload inventory management system a verification and launch system a distribution center management system an operator interface and a UAV inventory management system .

The distribution center management system serves as the hub of the distribution center . In this embodiment the distribution center management system comprises a mission manager sensor station communications station logistics system skymap database terrain map database and interface handler . In one example embodiment the distribution center management system is implemented using one or more computer servers that have specialized sensor and communications peripherals installed.

Some of the functions of the distribution center may require the assistance of a human distribution center operator . For example UAV assembly UAV repair payload attachment and detachment UAV recovery battery replacement and refueling are tasks that may require human involvement if they are not fully automated. The operator interface allows the distribution center operator to receive information and instructions from the distribution center management system and the global services as well as to send information and instructions back to the distribution center management system and the global services . The distribution center management system communicates with the operator interface via the interface handler . In some embodiments the operator interface is an application running on a smartphone a tablet computer or a personal computer and the interface handler communicates with the application via a wireless communications protocol such as IEEE 302.11.

The mission manager is a module that is responsible for managing the local aspects of mission operations at the distribution center . In some embodiments the mission manager receives service requests or data derived from the service requests from the global services selects a UAV or UAV components that will be assembled into a UAV prepares the mission data that will be utilized by the UAV during the mission selects an appropriate payload for the mission tests and launches the UAV and monitors the status of the UAV and payload during the mission. The mission manager communicates with the distribution center operator via the operator interface during various stages of the mission to communicate both the status of the mission as well as instructions indicating the actions to be taken to facilitate the preparation loading launch and recovery of UAVs .

The mission manager utilizes the other components of the distribution center management system to monitor the status of the local environment and various local components of the UAS including the UAVs and the local inventories.

The mission manager maintains contact with the global services and local UAVs through the communications station . Information about service requests is received from the global services and information about local conditions ongoing missions inventories etc. is transmitted back to the global services . The communications station may have transmitters and receivers for several different standard telecommunications protocols including but not limited to GSM CDMA GSM 3G 4G LTE etc. In addition to these standard protocols the communications station may also support line of sight or mesh protocols to enable direct communications with UAVs and other distribution centers . Finally the communications station may also include a wired connection to the Internet for high speed communication with the other components of the UAS and third party information providers. The mission manager may send some of the information received via the communications station to the operator interface so that the distribution center operator can monitor the status of UAVs or other components of the UAS that are relevant to a local mission.

The sensor station is primarily used to gather local weather data for the distribution center s location. The sensor station may include pressure sensors thermometers wind sensors precipitation detectors etc. The sensor station may also be used to detect and track UAVs using instruments such as radars radio trackers and optical object recognition systems. The mission manager may present information from the sensor station to the distribution center operator via the operator interface so that the distribution center operator can take actions necessary to protect the UAVs and distribution center from inclement weather. For example if the sensor station detects an approaching storm the mission manager may display a notification to the distribution center operator via the operator interface and the operator can follow procedures to recover UAVs that have already been launched to abort missions that have not been launched and the like.

The logistics system tracks the inventory levels of various components at the distribution center and reports these inventory levels to the global services and the mission manager . This inventory information may be used when selecting a particular distribution center to fulfill a service request.

The logistics system interfaces with the propulsion inventory management system the payload inventory management system and the UAV inventory management system to determine the inventory levels of fuel batteries payloads and UAVs UAV components respectively. The logistics system is capable of requesting deliveries of additional stock when inventory levels fall below a threshold level or when inventory levels are predicted to fall below a threshold level within a specified period of time.

The global services may monitor the inventory levels reported by the logistics system and may proactively dispatch additional inventory items to a distribution center based on current inventory levels or the predicted inventory levels in the future. The logistics system may also directly notify the distribution center operator of inventory shortages or of errors with specific items in an inventory via the operator interface . Based on these notifications the distribution center operator may restock or repair items as needed.

Each item at the distribution center may be affixed with a tracking tag that can be monitored by the logistics system . Various technologies can be used to implement the tracking tags including bar codes RFID tags NFC tags etc. These tags may be affixed to every item at the distribution center that requires tracking including UAVs UAV components payloads batteries spare parts etc. The tags associate an object identifier with each tracked physical object at the distribution center . For example each payload at the distribution center will have an object identifier associated with it that is indicated by the tag affixed to it. The object identifier may be read from the tag by way of a reader that is configured to scan the tag. For example an RFID tag would be read using an RFID reader an NFC tag using an NFC reader etc.

The object identifiers can be used to determine the type of an object that has been scanned as well as its unique identity. For example the tag affixed to a payload object will identify that the object is a payload of a specific type as well as that it is a specific instance of that payload different from other payloads of the same type in the inventory. In some embodiments the object identifier can be used to determine a database entry associated with the object in an inventory database.

The logistics system reports the inventory levels for objects associated with each object identifier to the global services .

Propulsion related components of the UAV s such as batteries and or fuel are stored and tracked by the propulsion inventory management system . The propulsion inventory management system also has means for recharging batteries refilling fuel tanks etc. The propulsion inventory management system reports the inventory levels and status of fuel and or batteries to the logistics system . For example the propulsion inventory management system may track not only the number of batteries stocked at a particular distribution center but may also track the level of charge in each of those batteries and the expected time for each battery to reach full charge. Additional properties of batteries may also be tracked such as battery capacity charge retention over time etc.

The mission manager is made aware via the logistics system of the battery charge levels and or fuel available for UAVs prior to a mission launch. The mission manager determines the energy resources that are required for each UAV based on the service requests and may instruct the distribution center operator to replace batteries on a UAV or to refuel a UAV to ensure that the aircraft has sufficient energy to complete a mission. For example the mission manager may instruct the distribution center operator via the operator interface to load a battery having a particular charge state onto a specific UAV prior to that UAV being launched on a mission.

The payload inventory management system tracks inventory levels and status for various payloads that may be mounted to the UAVs . The payload inventory management system may also provide recharging refrigeration and other maintenance related functions related to specific payloads. For instance if the payload is a vaccine then the payload inventory management system may provide a refrigerated storage container for vaccine doses and may monitor and report the temperature in the storage container and the number of doses stored in the container to the logistics system . The mission manager may notify the distribution center operator of the status of various payloads stored at the distribution center via the operator interface . For example in some embodiments the mission manager may send a notification to the operator interface to notify the distribution center operator that a particular vaccine stored in the payload inventory management system has expired. Based on this notification the distribution center operator may remove the expired vaccine from storage and replace it with new stock.

The UAV inventory management system tracks the assembled UAVs and UAV components stored at the distribution center and reports this information to the logistics system . The mission manager or global services may query the logistics system to determine the UAV resources available for missions at a particular distribution center and may allocate these resources based on the requirements of service requests received by the UAS . When a particular UAV configuration is required to fulfill a mission the mission manager may send instructions to the distribution center operator via the operator interface to assemble a particular set of UAV components stored in the UAV inventory management system to construct a UAV suitable to complete that mission. As UAVs or UAV components are added and removed from the inventory the UAV inventory management system tracks not only the availability of these resources but also the status of components such as their condition and need for replacement. This information may be used by the mission manager and the global services to order deliveries of new UAVs or components for the distribution center .

The mission data that will be uploaded to the UAV is prepared based on the requirements of the service request received from the global services . Although we discuss the preparation of the mission data by the mission manager alternative embodiments are possible where either the global services or the mission planner onboard the UAV prepare the mission data. The mission data includes not only the location of the destination site and the payload required to satisfy the service request but also information required to generate a flight route to the destination location. The information required for route generation is stored locally in the skymap database and the terrain map database .

The skymap database contains data about a plurality of flight corridors in the geographic region served by the distribution center . The skymap database may be at least partially synchronized with a global skymap database that is part of the global services . The flight corridor data includes information about the real time conditions within the flight corridors such as weather air traffic etc. The local skymap database updates the flight corridor data based on the latest information received from the global services other distribution centers and third parties such as weather services and air traffic controllers . UAVs that have recently flown in a flight corridor may also send data to the distribution center about the last monitored conditions present in the flight corridor and this information may be used by the skymap database to update the relevant flight corridor data. When the local skymap database at the distribution center has more recent information about a flight corridor than the global skymap database the global skymap database is updated via the communications station . The reverse is also true and the latest updates from the global skymap database are received via the communications station and incorporated into the local skymap database .

The terrain map database contains terrain data which is information about the terrain and ground obstacles in the geographic region served by the distribution center . This terrain data can be stored in a number of ways including but not limited to as raw images as a heightmap and as a three dimensional 3D mesh. The global services also include a global terrain map database which is at least partially synchronized with the local terrain map database . As in the case with the skymap databases the terrain map database is updated based on data captured from UAVs during their mission flights. For example if a UAV flies over a location and captures information regarding a new obstacle that was not present at that location in the terrain map database the terrain map database will be updated with the new information via data received from the UAV either during the mission or after the UAV has been returned to the distribution center .

Although the information about the flight corridors from the skymap database may be sufficient to route the UAV to the destination site information about the ground that the UAV is flying over can also be useful during various phases of the mission. For instance during UAV launch and recovery the terrain and obstacles near the launch and recovery sites are relevant. In addition if the service request requires a package delivery then the terrain and obstacles at the destination site are relevant as the UAV s mission planner must determine a location from which to drop the payload such that the payload lands in an accessible place and does not damage local structures objects or persons.

The information from the terrain map database is also useful for fulfilling service requests that require surveillance or mapping. In some instances the terrain data from the terrain map database can be used to fulfill a surveillance or mapping request without launching a UAV. For example if a UAV has recently captured imagery at a destination site at a particular location and a subsequent service request asks for image capture at the same location within some threshold time limit then the most recent information from the destination site that has been stored in the terrain map database can be sent to the service requestor .

To prepare the mission data locally the mission manager first determines the location of the destination site from the service request information received from the global services . Based on this destination location and the launch location which is typically the location of the distribution center the mission manager determines the relevant area of operations for the mission and extracts the data associated with this geographic region from the skymap database and the terrain map database . The extracted information is sent to the UAV as part of the mission data. In some embodiments the mission manager also provides the UAV with a lowest cost route to the destination site as part of the mission data. Depending on the implementation the route can be dynamically updated by the global services the mission planner in the UAV and or the mission manager . When the connectivity to the UAV cannot be guaranteed during the mission flight the mission planner onboard the UAV may be allowed to dynamically update the route. The process for dynamic route generation is explained in more detail in the description for . In embodiments discussed in connection with the UAV receives the skymap data and determines the lowest cost route to the destination site using the onboard mission planner instead of receiving the route from the mission manager .

In some embodiments the UAV stores complete mirrors of the skymap database and the terrain map database instead of only subsets of the information in these databases. This can be done when the size of the databases is small enough that the storage resources on the UAV are sufficient to store the entire dataset. When this is not the case a subset of the information may be stored in the UAV as described earlier. Similarly in the case where the local skymap database and local terrain map database have sufficient storage capacity the entire global skymap and global terrain map may be stored locally at the distribution center . Subsets of the global data may be extracted and stored locally only when the global data sets are too large for complete local mirroring to be economical.

The verification and launch system is responsible for testing verification and launching of UAVs . The UAVs are loaded into the verification and launch system and their components are tested to ensure that they will perform during the mission. Any faulty components are identified at this stage and brought to the attention of the distribution center operator via the operator interface . The verification and launch system also verifies via the affixed tags that each component in the assembled UAV is a component allocated by the mission manager for the current mission. For example the verification and launch system detects the battery and engines attached to the UAV and ensures that they have adequate charge and performance for the mission prior to launch. Any discrepancies are brought to the attention of the distribution center operator for correction. Similarly the verification and launch system verifies that the payload loaded onto the UAV is the right payload for the current mission.

Once the verification and launch system verifies the UAV the UAV is launched and the mission manager continues to monitor the aircraft during the mission flight. The mission manager receives status updates from the UAV and these status updates enable the mission manager to track the progress of the mission at least intermittently. The mission manager may present information related to the UAV s status to the distribution center operator via the operator interface . In the event that there is some local event that requires a mission termination such as for example an approaching storm either the mission manager or the distribution center operator or both via the operator interface can send a command to the UAV through the communications station to instruct the UAV to return to the distribution center .

The structure and functionality of the distribution center described above has been divided into modules based on one example implementation but the functionality of various modules may be merged or further split such that there are more or fewer components than have been illustrated in . For instance it is possible to implement many parts of the distribution center management system including the mission manager communications station logistics system and interface handler on a single piece of computer hardware such as a computer server or embedded SOC. Similarly the different inventory management systems could be merged under a single inventory manager while the verification and launch system could be split into a separate verification system and launch system.

The global services are a collection of software services running on one or more computer servers accessible through the Internet or another communications protocol. In one example embodiment the global services are software modules running on virtual machines in a third party data center such as Amazon Web Services or Google Cloud.

One purpose of the global services is to provide a global infrastructure to coordinate support and manage multiple distribution centers service requestors and UAVs . However in some embodiments it is conceivable that the functionality of the global services is provided by a local computer server and that the server serves a local set of UAVs distribution centers and service requestors possibly only a single one of each.

One or more global system operators connect to the global services and provide human intervention for systems that cannot be fully automated or are otherwise selected to not be fully automated . The global system operators typically connect to the global services through control devices. A control device may be a computer workstation a personal computer a tablet device a smartphone or any other computing device that can communicate through a network with the global services . For instance in one example embodiment a global system operator uses a laptop computer with an Internet connection to connect to the global services executing on a computer server which is also connected to the Internet.

In the example embodiment illustrated in the global services are configured to serve a plurality of distribution centers UAVs and service requestors . In this embodiment the global services comprise a global skymap database a global terrain map database a database manager a service request handler a global logistics manager an air traffic control system and a system interface manager .

As discussed earlier the global skymap database and the global terrain map database are global repositories for skymap and terrain map data in the UAS . As was the case with the local versions of these databases the information in these databases can be represented in various ways depending on the needs of the UAS . Although these databases are represented as single units in the illustrated embodiment in practice the databases may be implemented using several mirrored data stores to provide improved read speed redundancy and error recovery.

The data manager manages data writes into and data reads out of the global databases. For example as updates to the local skymap databases and local terrain map databases are communicated to the global services the data manager ensures that the information is stored in the appropriate database and that the latest information is always available and is not overwritten by out of date information. The data manager also manages information received from outside of the UAS and integrates this information into the global databases. For instance information received from third party weather information providers aviation authorities and external air traffic controllers may be integrated into the global skymap database . Similarly third party topographical data map imagery and surveillance data may be integrated into the global terrain map database.

The data manager also manages the updates sent to the local databases at each distribution center . In one embodiment as the global skymap database and global terrain map database are updated the data manager will monitor the regions where those updates are relevant and will send at least a portion of those updates to distribution centers that are in the relevant regions. In another embodiment the mission manager at a distribution center in a particular region will periodically request information about that region from the global services and the data manager will determine the set of information that is relevant to that region from the global databases and will send that information to the distribution center where the information may be integrated into the local databases. Similarly a UAV in flight may request information about its current location from the global services and the data manager may similarly determine the relevant information that should be sent back to the UAV based on the UAV s location.

The service request handler manages service requests sent by service requestors that are received by the global services . When a service request is received by the global services the service request handler will communicate with the global logistics manager to determine a distribution center that is suitable for handling the service request locally. As mentioned previously the selection of the distribution center may take into account not only the location of a destination site specified in the service request but also the logistic requirements of the request such as payload UAV capability etc. For instance a service request may include information that specifies a payload type required to complete the request and the distribution center may be selected based on the availability of that payload type at various distribution centers .

The payload type may be specified directly by means of a payload identifier associated with a type of payload or it may be specified by implication. For example a camera payload may be specified by implication if the service request is a request for image data at the destination site .

In some embodiments the service request handler takes input from a global system operator to determine the distribution center that will be used to fulfill a service request.

Once the distribution center and UAV have been identified and reserved to fulfill a service request the service request handler may notify the service requestor that the service request is in process. The service request handler may also receive information from the distribution center and or the UAV that allows a predicted time of mission completion to be estimated and sent to the service requestor .

The service request handler is capable of communicating with the service requestor via the system interface manager . A human service requestor will typically send a service request to the global services by means of some remote client device such as a mobile phone a tablet or a personal computer. The system interface manager is capable of sending information to the client device operated by the service requestor that is configured to be displayed on the client device. For example in one embodiment the system interface manager functions as a web server and the client device connects to the web server and displays a web page that is downloaded from the system interface manager . In this example the system requestor can receive and send information to the global services via the displayed web page. In another embodiment the system interface manager exposes an application interface over the Internet such as a representational state transfer or REST interface and an application running on the client device is configured to display information received from the global services to the service requestor and to send information inputted by the service requestor back to the global services .

The service request handler may also play an active part in determining the route a UAV takes on a mission to complete a service request. For example the service request handler may use the system interface manager to query a service requestor for the precise location of the destination site and the information provided by the service requestor may be used to refine the flight route used by the UAV in fulfilling the service request. illustrates one example embodiment of a process that may be used to refine a UAV s flight route for a mission using information from a service requestor .

This embodiment of the process begins when the service request is received . Based on the service request an approximate service region is determined . The service region may be a geographic area around a requestor defined destination site or it may be a geographic area determined based on a location associated with the service requestor such as for example a human requestor s home address or the GPS determined location of a client device operated by the service requestor .

Based on this geographic area the service request handler queries the data manager for terrain information for the service region. The geographic area of the service region is associated with specific terrain data in the global terrain map database . The data manager extracts the terrain data associated with the geographic area of the service region from the global terrain map database . The terrain data may be in any relevant form such as image data height map data voxel data contour data 3D mesh data etc. Based on the extracted terrain data the service request handler generates a displayable representation of the geographic area of the service region. The displayable representation may be in any form that can be visualized on a client device. For example the displayable representation may be an image a series of images a 3D mesh etc.

The displayable representation is sent to the client device operated by the service requestor where it is displayed. The service requestor is then presented with a route refinement User Interface UI that enables the service requestor to select relevant route parameters that can be used to adjust and refine a route. The relevant route parameters depend on the nature of the service request but are related to information that allows the UAV to refine its flight path at the destination location. For example in the case of a service request that is a package delivery the displayable representation on the client device may be a map image of the region where the delivery is requested and the route refinement UI may allow the service requestor to select a precise point on the image which will correspond to a location where the UAV will deliver the package. In this example the route parameter is the selected point which corresponds to a geographic location within the geographic area of the service region.

In a different embodiment the displayable representation is a 3D mesh and a 3D render of the delivery location is displayed on the client device. In this embodiment the service requestor selects a trajectory in three dimensions which the UAV will follow to approach the delivery point. In this case the route parameters may be a spline that defines the three dimensional trajectory selected by the service requestor . The route refinement selection whether a point a trajectory or some other data is sent to the global services .

The global services receives the route refinement selection from the client device and then validates the route refinement selection to confirm that the route refinement selection will not cause the UAV to crash or cause the mission to otherwise fail. Validation is done to ensure that the service requestor has not introduced human error into the routing process. For example a service requestor could specify a delivery location that is in a body of water or a trajectory that intersects a building.

Validation may be done using the data in the global terrain map database . For example in some embodiments validation is performed by checking that the geometry of the route refinement selection received from the client device does not intersect the geometries of objects or terrain in the terrain map database .

If the route refinement selection is not valid the system interface manager will send information to the client device that will cause a selection invalid indicator to be presented on the client device so the service requestor realizes that the route refinement selection previously made cannot be used. Additional information may also be sent such as for example information explaining how the previous route refinement selection was invalid or visual cues that highlight the invalid route refinement selection in the displayed representation of the region. For instance an invalid selected trajectory or point may be highlighted in red in a map or 3D render. The client device may then present the route refinement selection UI once more and send a new route refinement selection to the global services .

Once a route refinement selection has been received and validated by the global services the information from the route refinement selection can be used to generate a route or partial route that can be incorporated into mission data that is uploaded into the UAV that will fulfill the service request. For example if the route refinement selection indicates a location for a package delivery then the destination site location can be refined to that point and that refined location may be sent to the distribution center for upload to the UAV or it may be sent directly to the UAV . The mission planner of the UAV may use the refined location when it is determining a route to the destination site . Similarly if the route refinement selection is a trajectory that indicates an approach route to the destination site that trajectory can be included in the mission data and the mission planner in the UAV can incorporate that trajectory in the flight path that the UAV takes on its approach to the destination site .

In some embodiments the service request handler solicits route refinement selection input from the global system operators instead of or in addition to soliciting the route refinement selection input from the service requestors . The process for obtaining route refinement selections from a global system operator is almost identical to that used for a service requestor . In this embodiment the control devices operated by the global system operators are used to display the route refinement selection UI and to collect and send the route refinement selections to the global services .

Returning to the service request handler utilizes the global logistics manager to obtain information required for distribution center and UAV selection. The global logistics manager tracks the inventory information in each local logistics system at each distribution center . The global logistics manager may proactively route additional stock to local distribution centers when supplies of any inventory item are depleted are below some threshold quantity or are predicted to be depleted within some threshold time. The global logistics manager may also notify a global system operator in the event of an inventory shortage at a distribution center . The global system operator may take actions outside the UAS to route new inventory items to the distribution center such as for example ordering and shipping items from a third party warehouse.

In one embodiment the global logistics manager relocates UAVs from a first distribution center that has an excess of UAVs to a second distribution center that has a shortage of UAVs. In this embodiment the global logistics manager may monitor the daily monthly or yearly patterns of service requests to determine the estimated UAV requirements at each distribution center over a period of time. Based on these estimated UAV requirements the global logistics manager may preemptively relocate UAVs from one distribution center to another. The relocation of UAVs may be done using third party shippers or the relocation may be done by sending requests to the distribution centers to launch UAVs with destination sites set to other distribution centers . As an optimization these relocation flights may be scheduled during times when the service request volume is low for example late at night or during holidays.

The air traffic control system is responsible for tracking the UAVs and aircraft that are known to be in flight in the area served by the UAS . The air traffic control system receives information from the distribution centers the UAVs in flight and from third party air traffic information providers. The information received by the air traffic control system includes the known positions of aircraft in the area of the UAS as well as flight routes that are registered with the system. Distribution centers and or UAVs may register flight routes for missions with the air traffic control system . The air traffic control system may also allow UAVs and aircraft operated by third parties to register their flight routes.

The air traffic control system provides real time information updates regarding the positions of aircraft and UAVs to UAVs that are flying missions. Using this information the mission planners onboard the UAVs may modify their flight routes to avoid colliding with other aircraft. The air traffic control system may offer similar information updates to UAVs and other aircraft that are operating outside the UAS in order to maintain a safer airspace for all aircraft operations.

The air traffic control system also provides information to the service request handler and the global logistics manager . Information from the air traffic control system may be used to influence the selection of distribution centers for service requests and the relocation of UAVs . For example a service request may be routed away from distribution centers where there is an excess of air traffic in the vicinity and UAV relocation may be timed to avoid periods when air traffic is at its highest.

The structure and functionality of the global services described above has been divided into modules based on one example implementation but the functionality of various modules may be merged or further split such that there are more or less components than have been illustrated in . For example it is possible to merge the skymap and terrain map databases into a single data store. Some of the services illustrated can be moved outside the UAS for example the air traffic control system and the global logistics manager may be operated outside the UAS as independent services accessible through an Application Programming Interface API . These and other changes to the structure do not change the overall architecture of the system and systems with such changes will be recognized by those with skill in the art as equivalent to the system disclosed.

