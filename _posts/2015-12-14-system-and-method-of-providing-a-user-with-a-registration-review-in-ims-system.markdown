---

title: System and method of providing a user with a registration review in IMS system
abstract: Disclosed are a network-based device, method and computer-readable medium for operating an IP Multimedia Subsystem (IMS) to provide registration review. The method embodiment includes tracking and storing all current registrations for each user in an IMS system, receiving a request from a user for a status of the user's current registrations and presenting, in response to the request, the current status of current registrations for the user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09467964&OS=09467964&RS=09467964
owner: AT&T Intellectual Property I, L.P.
number: 09467964
owner_city: Atlanta
owner_country: US
publication_date: 20151214
---
The present application is a continuation of U.S. patent application Ser. No. 12 019 102 filed Jan. 24 2008 the content of which is incorporated herein by reference in its entirety.

The present application is related to application Ser. Nos. 12 019 064 12 019 073 12 019 085 12 019 118 12 019 136 and 12 019 152 all filed on Jan. 24 2008 the contents of which are incorporated herein by reference in their entirety.

The present invention relates the IP Multimedia Subsystem IMS and more specifically to systems and methods of managing user registrations and portability of services within these systems.

The IMS IP Multimedia Subsystem is technology that merges the internet with the cellular world. It makes internet technology such as the web email instant messaging user presence video conferencing and so forth available in nearly any location. The IMS is a key element in third generation 3G architecture that makes it possible to provide ubiquitous sailor access to all services that the internet provides. For example it enables one to access their favorite web pages read their email watch a movie or take part in the video conference wherever one is by simply using a mobile device and accessing the desired services. There are several references with which it is assumed that the reader is familiar as background for the present disclosure related to the IMS. Accordingly further details provided herein may be found in the 3G IP Multimedia Subsystem IMS Merging the Internet and Cellular Worlds by Gonzalo Camarillo and Miguel A. Garcia Martin John Wiley and Sons Ltd. 2006 and the IMS IP Multimedia Concepts and Services by Poikselka Mayer Khaitabil and Niemi John Wiley and Sons Ltd. 2006. A brief introduction shall be provided while further details may be found in these references.

The IMS aims to combine the latest trends in packet switch technology and circuit switch technology to make a mobile internet available. It also aims to create a common platform to develop various multimedia services and to create a mechanism to boost margins for service providers due to extra usage of mobile packet switch networks. There are various protocols used in the IMS which include the session control protocol and a session initiation protocol SIP as well as other protocols known to those of skill in the art that are utilized for providing the multimedia services. The IMS architecture is a collection of functions linked by standardized interfaces. Most venders follow the IMS architecture closely and implement each function in a single node although other nodes may be used.

Also shown in is one or more PSTN gateways each one decomposed into a signaling gateway press SGW a media gateway controller function MGCF and a media gateway MGW . The HSS is a central repository for user related information. It is understood that the HSS is an evolution of the home location register HLR which is a GSM node. The HSS contains all the user related subscription data requires to handle multimedia sessions. The data can include among other items location information security information authorization information authentication information user profile information which may include the services that the user has subscribed to and the serving CSCF S CSCF allocated to the user. The CSCFs which are typically SIP servers are important nodes in the IMS. The CSCF processes SIP signaling in the IMS. Shown in are three types of CSCFs that depend on the functionality they provide. The proxy CSCF P CSCF A is typically a first point of contact in a signaling plane between the IMS terminal and the IMS network . From the point of view of the SIP protocol the P CSCF A B acts as an inbound outbound SIP proxy server. This means that all requests initiated by the IMS terminal or destine for the IMS terminal traverse the P CSCF A B. The P CSCF forwards SIP requests and responses to the appropriate direction such as toward the IMS terminal or toward the IMS network . The P CSCF A B is allocated to the IMS terminal during IMS registration and does not change for the duration of the registration which typically means that the IMS terminal communicates with a single P CSCF during the registration. The P CSCF includes several functions which may be related to security. For example it may establish a number of IP SEC security associations toward the IMS terminal . These IP SEC security associations offer integration protection which is the ability to detect whether the contents of the message have been changed since its creation. Once the P CSCF authenticates the user the P CSCF asserts the identity of the user to the rest of the nodes in the network. In this way other nodes do not need to further authenticate the user because they trust the P CSCF and the rest of the nodes in the network user s identity have a number of purposes such as providing personalized services and generating account records. The P CSCF also verifies the correctness SIP request sent by the IMS terminal . This verification keeps the IMS terminals from creating SIP requests that are not built according to the SIP rules. Each P CSCF serves a number of IMS terminals depending on the capacity of the node. Further details regarding the P CSCF are known to those of skill in the art.

Next an interrogating CSCF I CSCF may also be used in the network . This is a SIP proxy located typically at the edge of an administrative domain. A serving CSCF S CSCF is a central node of the signaling. This node is essentially a SIP server but performs session control as well. In addition to SIP server functionality the S CSCF also acts as a SIP registrar. This means that it maintains a binding between the user location which is the IP address of the terminal the user is logged on and the user s SIP address of record which is also known as a public user identity PUID . The S CSCF also implements a diameter interface to the HSS for the purpose of downloading authentication vectors of the user that trying to access the IMS from HSS. The S CSCF uses these vectors to authenticate the user. The S CSCF may download a user profile from the HSS . The user profile includes the service profile and a set of triggers that may cause a SIP message to be routed through one or more application servers. The interface may also inform the HSS that this is the S CSCF allocated to the user for the duration of the registration.

The SIP AS is a native application server that hosts and executes IP multimedia services based on SIP. The open service access service capability server OSA SCS is an application server that provides an interface to the OSA framework application server. It inherits all the OSA capabilities and especially the capability to access the IMS securely from external network. The node acts as an application server on one side and is the interface between the OSA application server and the OSA application programming interface on the other side. The IP multimedia services switching function IM SSF is a specialized application server that allows the system to use customized applications for mobile network enhanced logic CAMEL services that were developed for GSM in the IMS. The details on these various nodes are known to those of skill in the art.

The signaling gateway SGW interfaces the signaling plane of the CS network such as the PSTN. The SGW performs lower layer protocol conversion such as being responsible for replacing the lower MTP transport with a stream control transmission protocol SCTP over IP. The media gateway control function MGCF is a central node of the PSTN SC gateway and implements a state machine that does protocol conversion and maps SIP to either ISUP over IP or VICC over IP which are control protocols in circuit switch networks. The media gateway MGW interfaces the media plane of the PSTN or CS network. On the one side the MGW is able to send and receive IMS media over the real time protocol RTP . On the other side the MGW uses one or more pulse code modulation time slots to connect to the CS network. The MGW may also perform transcoding when the IMS terminal does not support the codec used on the CSI.

Many other basic aspects of the IMS architecture may be found in Camarillo et al. Chapter 3. With this basic introduction in mind we now focus on the IMS registration process which includes a number of deficiencies.

Prior to IMS registration the user equipment UE must discover the IMS entity to which it will send a register request. This concept is called a proxy call session control function. This is called P CSCF discovery and is described in Section 3.8 of Poikselka et al. In addition before the registration process the UE needs to fetch user identities from identity modules. An S CSCF will be assigned authentication will be formed and its corresponding security associations will be established. A user profile will be downloaded from the HSS to the assigned S CSCF and SIP compression will be initialized and implicitly registered PUIDs will be delivered. The IMS registration process contains basically two phases. The first phase is shown in which involves how the network challenges the UE . illustrates the second phase which is how the UE responds to the challenge and completes a registration.

First as shown in the UE sends a SIP register request to the discovered P CSCF A. This request may contain an identity to be registered in a home domain name or an address of the interrogating CSCF I CSCF . The P CSCF A processes the register request and uses the provided home domain name to resolve the IP address of the I CSCF . The I CSCF in turn will contact the HSS to fetch the required capabilities for the S CSCF selection. After HSS selects the S CSCF the I CSCF forwards the register request to the S CSCF . The S CSCF realizes that the user is not authorized and therefore retrieves authentication data from the HSS and challenges the user with a 401 unauthorized response.

Second the UE will calculate a response to the challenge and send another register request to the P CSCF A. This is shown in . Again the P CSCF A finds the I CSCF and in turn finds the S CSCF . The S CSCF then checks the response and if it is correct downloads a user profile from the HSS and accepts the registration with a 200 OK response. Once the UE is successfully authorized the UE is able to initiate and receive sessions. During the registration procedure both the UE and the P CSCF A learn which S CSCF in the network will be serving the UE . Table 1 illustrates the information storage before during and after the registration process.

It is the UE s responsibility to keep its registration active by periodically refreshing its registration. If the UE does not refresh its registration then the S CSCF may silently remove the registration when the registration time lapses. When the UE wants to de register from the IMS it sets a registration timer to 0 and sends a registered request. Poikselka et al. Sections 10.5 and 10.14 incorporated herein by reference as background material provide further details regarding IMS registration and de registration.

The basic IMS registration process is insufficient to meet customer needs in support of service mobility and a user centered network. There are several aspects of the basic IMS approach that are problematic. First all registrations and de registrations must come from the contact address at which the PUID is being registered or de registered. This can be problematic because the user may not have the device in question or a legacy device may not be able to originate the registration. Further registrations may expire without intervention.

The use of the Private User Identify as part of the authentication process for registrations introduces difficulty in service mobility. The Private User Identify represents both the equipment and the user. This works well for single user devices such as cell phones but creates unaddressed issues for shared devices and for users who want services on devices that they are using temporarily such as hotel phones or visitors office phones. Further there is no support for event driven registration and de registration except based on registration expiration. Yet another issue in the IMS registration process is that it assumes that all equipment will be capable of self registration. For users that are mobile between devices registrations and de registrations will become common place.

Another problem arises when a customer decides that he or she wants to stop receiving calls from a device after having already left it. For example a business women waiting for an important business call may leave children with a babysitter and go out for the evening. After she has left while she may be able to register her business persona on her cell phone she may not be able to de register from the phone using the basic IMS registration approach which may still maintain the registration. This could result in a child or a babysitter answering an awaited call from a business associate.

Single point management of registrations also would be difficult. While it would be possible to request a network service to give information on where a PUID was registered the requirement that registration and de registration be done from the device itself forces any registration manager to rely on accessing capabilities within the device to change registrations. Accordingly what is needed in the art is an approved system and method of managing the registration process within an IMS context to enable improved user flexibility in receiving IMS services.

Additional features and advantages of the invention will be set forth in the description which follows and in part will be obvious from the description or may be learned by practice of the invention. The features and advantages of the invention may be realized and obtained by means of the instruments and combinations particularly pointed out in the appended claims. These and other features of the present invention will become more fully apparent from the following description and appended claims or may be learned by the practice of the invention as set forth herein.

There are a number of solutions to the above identified issues with regards to managing registrations in an IMS context. A network based node which may or may not be termed a registration manager may act as a proxy for the user equipment performing proxy registrations and de registrations without using the actual device.

Requiring private user identities that are dedicated to a specific user multiple public user PUIDs may be supported to be resident on the device limits the possibilities for new users to register on a device that is not pre provisioned for that user. This is not a problem for dedicated personal devices that are always used by one user. However it does become a problem for shared or visited devices. Examples of these include home phones shared store office or work phones or visitor s offices and so forth. A network registration server that performs registration as a proxy for the user could have access to user specific private user identities to be used after authenticating the user. Another area of limitation is in the area of network initiated registrations or de registrations. These might be event driven. They could happen at designated times of the day when a user s location has changed or when a change has been made in the presence or location information about a user. With the basic IMS system any changes in registration status would have to involve a register message coming from the user equipment as shown above.

There is also the issue of user equipment that is not capable of registering and de registering itself. Examples of such user equipment include non SIP VOIP phones and phones behind line access gateways. This equipment will not have universal integrated circuit cards UICC a chip card used in wireless cards to register and will not be able to register and de register PUIDs especially if it is shared equipment. GSM phones are in a similar category. The ability to register and de register PUIDs independent of each other is not well supported by current standards. Some SIP equipment without UICCs may also be on carriers networks.

These deficiencies stem from the initial needs of IMS. The first implementers of IMS were the wireless service provides that believed in the concept of a personal all purpose wireless device. They initially determined that their customers would have exactly one device per user and that this device would not be shared. Service mobility was not necessary because they had device mobility in only a single device. Other devices were provided by other service providers. Therefore they wish that their customers could abandon all of the services and the other devices were certainly not part of their concept of IMS. However there are providers with more expansive needs and customers that user a variety of devices both wired and wireless. Many have multiple devices that span the home office cell and video. People are mobile between devices and sometimes use one device and sometimes another. Many of the devices are shared such as a home phone. Frequently users want telecommunication services at a device with which they have no previous relationship such as a neighbor s phone a hotel phone air phone and so forth. All of these issues are addressed by the present invention which provides a network based node or nodes with a web interface and capable of performing proxy registrations and de registrations.

The present invention provides a network node server or device that makes registration de registration and the management of registration possible and easy for customers in a variety of environments at which they would like to get their PUID based services. The network device may be characterized as a network device but the ideas are described herein based on functionality rather than particular hardware configuration. The network device disclosed herein addresses a number of deficiencies in the standard IMS registration process. Each of these deficiencies is disclosed as a separate embodiment of the invention and addresses various issues. For example one embodiment shall provide a system and method of registering at non compatible IMS devices such as POTS phones. Another embodiment provides a system and method of using registration macros and an IMS registration system which make possible macros such as a move macro that is a combination of registration at one location and de registration at another or a macro which can return the user to a defined registration state for one or more public user identities such as a default state at night or while the user is at the office.

Another embodiment relates to a remote de registration process which is an improvement on the IMS specifications which force the de registration to come from the location being de registered . The network device or registration manager of this embodiment enables remote de registration of a device.

Yet another embodiment relates to a system and method providing automated registration changes in an IMS registration system. In this regard the network may automatically change registration states for example one registration configuration might apply during work hours another outside of work hours.

Another embodiment enables a mechanism for a user to check current registrations via a registration review process which is not currently available in the IMS registration system.

Yet another embodiment relates to registration alerts and provides via the network device the ability to receive an alert in a situation for example wherein a device is registered at an unusual address for a defined period of time or when not registered at the usual address for a defined period of time. For example the network device may provide an alert to a user if the user does not register at a home address for 24 or 48 hours. The IMS network device may determine these states and alert the user appropriately using notification mechanisms such as phone instant messaging email and so forth.

Yet another embodiment of the invention relates to support for users in circuit switch CS networks and specifically support for IMS customers. A benefit provided in this aspect is service portability where an IMS user may receive his or her IMS services whether the device is being used as an IP device cell phone or a circuit switch phone. The portability aspect means that the same services and same bill accounting will be available on any device. An example all of one s work services including abbreviated dialing special access means and separate accounting would be available to the PUID associated with the user at work whether they were actually working at the office on an office phone virtual office on a home phone in transit on a cell phone or visiting on another s device. Therefore a user is able to get IMS services from any visiting PSTN or non IP phone for both originating and terminating services. Because of the different approaches one embodiment relates to handling IMS for an originating non IP device and another embodiment relates to providing IMS services to a non IP terminating device.

Various embodiments of the invention are discussed in detail below. While specific implementations are discussed it should be understood that this is done for illustration purposes only. A person skilled in the relevant art will recognize that other components and configurations may be used without parting from the spirit and scope of the invention.

With reference to an exemplary system includes a general purpose computing device including a processing unit CPU and a system bus that couples various system components including the system memory such as read only memory ROM and random access memory RAM to the processing unit . Other system memory may be available for use as well. It can be appreciated that the invention may operate on a computing device with more than one CPU or on a group or cluster of computing devices networked together to provide greater processing capability. The system bus may be any of several types of bus structures including a memory bus or memory controller a peripheral bus and a local bus using any of a variety of bus architectures. A basic input output BIOS stored in ROM or the like may provide the basic routine that helps to transfer information between elements within the computing device such as during start up. The computing device further includes storage devices such as a hard disk drive a magnetic disk drive an optical disk drive tape drive or the like. The storage device is connected to the system bus by a drive interface. The drives and the associated computer readable media provide nonvolatile storage of computer readable instructions data structures program modules and other data for the computing device . The basic components are known to those of skill in the art and appropriate variations are contemplated depending on the type of device such as whether the device is a small handheld computing device a desktop computer or a computer server.

Although the exemplary environment described herein employs the hard disk it should be appreciated by those skilled in the art that other types of computer readable media which can store data that are accessible by a computer such as magnetic cassettes flash memory cards digital versatile disks cartridges random access memories RAMS read only memory ROM a cable or wireless signal containing a bit stream and the like may also be used in the exemplary operating environment.

To enable user interaction with the computing device an input device represents any number of input mechanisms such as a microphone for speech a touch sensitive screen for gesture or graphical input keyboard mouse motion input speech and so forth. The device output can also be one or more of a number of output mechanisms known to those of skill in the art. In some instances multimodal systems enable a user to provide multiple types of input to communicate with the computing device . The communications interface generally governs and manages the user input and system output. There is no restriction on the invention operating on any particular hardware arrangement and therefore the basic features here may easily be substituted for improved hardware or firmware arrangements as they are developed.

For clarity of explanation the illustrative system embodiment is presented as comprising individual functional blocks including functional blocks labeled as a processor . The functions these blocks represent may be provided through the use of either shared or dedicated hardware including but not limited to hardware capable of executing software. For example the functions of one or more processors presented in may be provided by a single shared processor or multiple processors. Use of the term processor should not be construed to refer exclusively to hardware capable of executing software. Illustrative embodiments may comprise microprocessor and or digital signal processor DSP hardware read only memory ROM for storing software performing the operations discussed below and random access memory RAM for storing results. Very large scale integration VLSI hardware embodiments as well as custom VLSI circuitry in combination with a general purpose DSP circuit may also be provided.

Charging records may also be generated according to this module. The P CSCF A B can also provide a registration communication to a serving CSCF . This is a central node of the signaling plane and is a SIP server but performs session control too. It is typically located in the home network and uses diameter Cx Dx interfaces to the home subscriber server HSS to download and upload user profiles. It has no local storage of the user information. All necessary information used by the S CSCF is loaded from the HSS . Other functions of the S CSCF include handling SIP registrations which allows it to bind the user location and the SIP address sitting on the path of all signal messages and can inspect every message deciding to which application server S the SIP message will be forwarded in order to provide their services providing routing services using electronic numbering ENUM lookups when necessary enforcing the policy of the network operator. ENUM lookups are used when there is a dialed number. There may be multiple S CSCFs in the network for load distribution and high availability reasons and it is the HSS that assigns the S CSCF to a user when it is queried by an interrogation CSCF . A network device such as an interface registration manager IRM is shown as providing registration communications with the P CSCF A B as well as notification of registration communication from the S CSCF .

As shown in there are several interfaces to the registration network device IRM . First there is a web interface that is usually used by user equipment wired or wireless or may be used by a telecommunications portal. This interface may represent any communication link or protocol. The equipment may represent any wired or wireless computing device or communication device. The user may either actively give the information needed for a registration or can rely on populated scripts chosen from menus buttons or other interface mechanisms. The telecommunications portal is the only application for which an interface to the network device to initiate registration is preferred for this embodiment because of its direct user involvement. Registrations by other application servers would be possible by the architecture of .

Another source of initial registration is a notification of events from the enablers . An enabler is software that can be accessed by multiple applications over a defined interface. For example many applications may need to know the location of a cell phone with a GPS. Each application could get that information from a location enabler. Those of skill in the art would understand how an enabler may communicate with other network elements to obtain various types of information that may be needed by an enabler. For example signals such as a notification signal of a location of a user may be provided from an enabler to the network device . The network device may subscribe to specific events and get notifications when they occur. Any enabler capable of sending notifications may be used. For example a presence enabler would usually receive information from the registrations rather than giving it. Enablers may also be used for authentication of the user or the user s device that requests registrations of a web interface. An identity management enabler could be used. If the device were an IMS device with a UICC the generic bootstrapping architecture GBA would preferably be used for authentication. An application server may also change a registration as is shown by the interface in .

The network device preferably requires credentials for each user that it could register in order to partake of the basic IMS registration process which is not being changed according to the principles disclosed herein. These credentials would either be provisioned in the network device or made available over an interface not shown . The other interfaces to enables can include the notification enabler which allows the network device to notify the user when registrations of the registration state meets user defined criteria. As viewed by the P CSCF A B the S CSCF and HSS the network device looks like a user. Therefore there would be no need for changes to the S CSCF or the HSS . The same interfaces would be supported.

For example interfaces for the network device would include Gm to the P CSCF A B which is used to exchange messages between user equipment and the CSCFs typically using the SIP protocol. Another interface may include the Gm to P CSCF functionality in SGW using a signaling gateway interface. Another interface may include Ut HTTP or WAP to user. Yet another interface may be Mb voice connectivity to the user or Sh to HSS and possibly a separate interface to a credential server. An interface between the identity management enabler and the equipment or computing device may be via an internet protocol IMS based protocol or any other communication mechanism. As has been noted above a primary service of the network device is to serve as a proxy for endpoints that current cannot register in the IMS system such as PSTN or off network endpoints. Secondary functions of the network device can make the user experience easier and more intuitive and involve providing functionality disclosed which encompasses the other various embodiments of the invention which include providing macros defining registration states providing remote de registration process providing automated registration changes providing the user with the ability to receive a registration for review and receive registration alerts. Details on these various functions are provided in more detail below. The network device may need to communicate with the P CSCF A B and user equipment in enhanced ways to allow setting up of a tunnel between them and where appropriate may enable the communication between the various nodes in the system. Normal registration from user equipment using the standard IMS defined protocol will continue to be supported.

Before proceeding to further discuss the various embodiments of the invention related to registrations this disclosure will next provide some background information the concept of personas service mobility and a user centric network paradigm. illustrates the major entities involved in a user centric approach.

The term personas is being used herein this patent to denote the change to a network architecture that supports a user centric paradigm. In the industry personas tends to be used to mean only multiple service profiles on a single device usually for outgoing calls. For example a cell phone would offer the user a choice of personas when making a call. Therefore the term user centric paradigm is preferred.

The customer should be able to have different sets of services for the different roles personas that they may assume in different situations with different contacts. These persona based sets of services should be available for both originating and terminating sessions from any equipment used by our customer from any access network. This capability is captured by the following definition.

A user centric paradigm provides the ability of the network architecture to support one or more service profiles per user each of which could be used from multiple if not all network accessible devices .

There are two parts to this definition. The first part involves the ability of a single user on a single device to have a choice of services defined by a choice of service profiles. This is what is frequently meant by personas. IMS is designed to support this concept. The different services available to each persona are defined in the IMS Service Profile. Each user profile may contain multiple service profiles. The method for determining the service profile by the S CSCF is through the use of Public User Identities PUIDs . Each PUID will indicate a specific service profile . The originating S CSCF uses the PUID in the P Asserted Identity Header or the IMS message to determine which service profile to process for originating services. The terminating S CSCF uses the PUID in the Request URI Header to determine which service profile to process for the terminating services. The fact that a single user may have different public user identities that can be used means that a single user may have multiple personas.

The second part of the definition focuses on the concept of service mobility. The user may have these persona related services on any equipment that the user employs. This is what gives real power to the concept of personas and changes the network paradigm to a user centric one. Without this concept each piece of equipment would have its own dedicated service profiles. With service mobility the service profiles are bound to the user and not the equipment. They follow the user to any piece of equipment. With them the PUIDs carry the network addressing approach PUIDs are used by IMS to address users and the network accounting approach PUIDs are used by IMS to determine to which account a session is charged making the transition to a user centric network paradigm complete. The network notes the movement of the user and PUIDs between different network addresses and equipment through the process of registration.

Service mobility the mobility of services from device to device is distinguished from device mobility the mobility of devices from location to location e.g. cell phones .

The HSS is where the user profiles are stored and accessed. When a request for registration comes for a PUID which is part of a user profile that has no PUIDs registered the HSS chooses an S CSCF to handle that user profile and sends the appropriate user profile information to it.

The Private User Identity PRUID is specific to a particular device and a particular user profile . It is used to authenticate the specific User on the specific device.

This and other related inventions place functionality in the network that will allow the user to have more control of personas on both incoming and outgoing sessions and will allow persona based services to be portable usable from any device. Three new elements are introduced. The persona manager gives the user control of personas on incoming calls something not provided by basic IMS allows personas to be supported on equipment that is not able to assert multiple personas through network based capabilities and makes the use of personas easier for all users. The registration manager or network device enables more ways to register PUIDs. This will make it easier for the user to invoke personas using any equipment. The 2 Stage dialing server or any other server device or network element that performs a similar functionality disclosed herein utilizes the standard voice portal capabilities gives the user a way to access outgoing persona based services from any telephony equipment that can call the network.

Until now telephony services have been offered with an equipment based paradigm. Services of all types were applied to a line. If one had call forwarding all the calls to that line would be forwarded. If one had Caller ID identification would be based on the line that was used to make the call. Follow me services of various types would take all the calls to one line and try other lines. Call waiting would be applied to a line regardless of the user and would not be available to the user on a different line unless that line also had call waiting. Advanced Intelligent Network triggers were also line based. Addressing in telephony has also been line based. One dials a number that is associated with a specific piece of equipment.

However that is not how people think. People want their calls forwarded not necessarily all the calls to a line. Usually they care more about who is calling them than from where the call originated. They want services such as call waiting that are not associated with specialized equipment to be available from any phone not just one. When they call someone they want to reach a person a family an institution a store or a service.

Many of telephony s most successful services tried to bridge the gap between the user whose needs were communication oriented and the network which was based on equipment. The 800 service created a level of abstraction between the dialed number and the terminating number to which the caller was eventually connected. This created more of a sense of dialing a service rather than a line. Interactive Voice Response systems got additional information from the calling party to determine how to complete the call. Wireless service providers met this consumer need by providing personal mobile devices. By equating the device with one specific user and allowing device mobility an identity was created between the device and user that gave the illusion of dialing a number associated with the user rather than just the device. This proved to be a very powerful concept. To some extent wireless devices have displaced some wireline devices because of the power of this paradigm. However many continue to list multiple devices with which they are associated cell home work etc. and there will continue to be a need for both wireless and wireline access because they will always support different form factors. Mobile devices will never have 50 inch screens or large woofers.

Billing and accounting also began as line based. Basic billing is done based on the line that is used to make the call. The movement towards enabling some degree of user based billing began with third party billing. Operators would charge a call with confirmation to a third number. Later calling cards helped automate this capability. With these the network authenticates a user by validating a PIN and charges an account associated with the user rather than the equipment employed in the call.

This new paradigm will allow many new classes of services that better meet customers needs. Some of these benefits are explained next. Users can obtain specific services on shared devices. Many customers have shared phones in their homes stores or offices. The user centric paradigm enables the treatment of each user separately including distinctive alerting and individual call forwarding. Users have a choice of service profile personas . The customer may choose different service profiles for communicating with different groups of people. Different uses of a phone used for shared purposes e.g. a lawyer may want different services for personal use for calls with clients and for calls with colleagues. Service mobility is available. Customers can access the same services on any device within the limits of its capabilities. They can get their voice and video services from the service provider whether they are on wired or wireless networks. Persona based accounting is available. Accounting can be done by PUID. For example all work calls could be accounted for together indicating the network device and whether they were the originating or terminating party. Users can obtain selective access capabilities. By selectively registering PUIDs users can control how they can be reached even in environments where most calls are sent to voice mail.

This new paradigm is based on two core capabilities. These are the ability of the S CSCF to determine which service profile to process for each session leg and the registration capability that will allow PUIDs to be registered at any network location. These capabilities are combined with the addressing concept from SIP and IMS.

In SIP and IMS addressing is done based on the Public User Identifier preferably a SIP URI but may be some other identifier . An example of a dial able PUID would be sip 1 732 420 2159 att.net. Other examples of PUIDs include sip steven.siegel att.net sip steven.siegel.student att.net sip siegel.family att.net or sip Middletown Library att.net. Each of these may be considered a user. The middle column of shows this relationship. In IMS a user may have one or more PUIDs associated with its user profile. Each of these may be considered a persona. Each PUID may belong to one and only one user profile. A user profile may contain one or more PUIDs.

However the PUID is more than just a telephone number. While it does play the role of a telephone number a means to determine the other party in a session it is not wed to a line or piece of equipment. It provides the basis for the user centric paradigm.

A public identity is either a SIP URI or a TEL URI. A TEL URI looks like a dial able SIP URI except that it starts with tel instead of sip and does not have a domain at the end. For example for the SIP URI sip 1 732 420 2159 att.net the comparable TEL URI would be tel 1 732 420 2159. From the time that a number is dialed until there is an ENUM lookup the domain is unclear. After the ENUM lookup or a lookup by the BGCF the domain should be clear and a SIP URI specifying the domain should be used. If this approach is used the only PUIDs that will indicate service profiles to be processed by S CSCFs will be SIP URIs that belong to a service provider s domain or a domain provided service by a service provider. The S CSCF will look at TEL URIs only when determining how to route a session.

The left side of shows that the PUID may be associated with any network address and the equipment at that address. This association can be made by a flexible registration process. Registering the PUID at an address means that the services associated with the PUID s service profile can be made available at that address and equipment. The result is service mobility.

Personas are the different roles that a customer may play when receiving telecommunication services. The PUID represents the persona. In IMS the persona of the originating party is represented by the PUID in the P Asserted Identity of the message and the persona of the called party is represented by the PUID in the Request URI. The services associated with the persona are defined by the service profile for that persona The right side of shows that the PUID determines which service profile is used. The S CSCF processes the service profile indicated by the PUID. The service profile determines which application servers are involved. On the originating leg the S CSCF determines which service profile to use based on the PUID in the P Asserted Identity header of the message it is processing. On the terminating leg it uses the PUID in the Request URI. The service profiles include initial Filter Criteria iFCs . These provide the means to decide which application servers should be involved in a given session.

The PUID indicates one and only one service profile . The service profile indicates one set of zero or more initial Filter Criteria and the initial Filter Criteria are used to determine which application servers to involve in the call. This relationship between personas and services is shown in F.

The user profiles have two parts. The core network service authorizations part is an optional part of the user profile and include what high level services the user may have. Examples would be video services or voice services. The other part is the service profiles belonging to that user profile . Each service profile has two parts. The first part is a list of public identities to which the service profile applies. The other part is the initial Filter Criteria 0 or more associated with that service profile.

The fact that multiple PUIDs may indicate the same service profile has several uses in IMS. They may be aliases for the same persona. For example one might be dial able and another might be more descriptive. As aliases they should be part of the same implicit registration set. Another use of having more than one PUID indicating the same service profile would be to give different access capabilities to the user of these PUIDs. If for example at night one is registered and the other is not and people called the unregistered PUID the S CSCF would process initial Filter Criteria associated with the unregistered state of the PUID. This might result in the call being sent directly to voice mail. If the registered PUID were addressed The S CSCF would process the service profile normally and have the INVITE sent to the network address at which it was registered. When both were registered they would be treated identically. A third use would be to preserve the capability to define the service profiles for the two PUIDs differently in the future even though they are the same currently.

Once the S CSCF has determined the service profile to process based on the PUID of the customer getting the service it processes the initial Filter Criteria iFCs that make up the service profile . Each of the iFCs is processed in priority order. For each iFC the S CSCF determines whether to invoke a specific application server based on evaluating the information in the message header. Each service or package of services to which the PUID is subscribed would be represented by an iFC. Removing the iFC would prevent the services associated with the designated application server from being executed.

The first field in the iFC is the iFC Priority. The iFC Priority is a positive cardinal number. Because each service profile may have a set of iFCs the S CSCF knows to process them in priority order the lowest number processed first. The S CSCF will process iFCs in priority order until it runs out of iFCs when it routes the message forward or when it determines it must send the message to an applications server.

The second part of the iFC is the trigger point. The iFC trigger point is a boolean expression that is evaluated using the initial SIP message as the input data. When the trigger Point evaluates as TRUE the S CSCF sends the message to the SIP URI in the application server portion of the iFC . If it evaluates as FALSE the next priority iFC is processed if there is one or the S CSCF sends the SIP message to its next hop. The trigger point applies boolean operatives to more atomic iFC service point triggers. The iFC service point triggers are used to check specific aspects of the SIP message being processed. Each service point trigger evaluates data in headers of the SIP message including any of the following information.

The Request URI could be checked for triggers to be used only when a specific resource is addressed. The SIP Method could be checked so that different application servers are invoked for INVITEs as opposed to MESSAGEs or other methods . The presence or absence of a SIP header could be checked to prevent invoking a server that would process a specific header when it is not there.

The session case is usually checked so that different services could be applied to the originating leg from those applied to the terminating leg. Session case refers to whether the S CSCF is handling the originating leg of a session or the terminating leg. The session description can be checked when special processing is needed by application servers for different services negotiated using the Session Description Protocol SDP . The session description and session description protocol are used for the two sides of a session to negotiate capabilities media formats and ports. This can include the session identifier and other session level parameters such as IP address subject contact information about the session and or creator. Poikselka et al. Chapter 13 provides further details. The tests mentioned above could be for values partial matches or even the existence of a specific header. Time of day and day of week are not tests that can be done in the iFCs. Tests that cannot be done in the iFC trigger point can usually be done by the application server . In fact CARTS and IMS allow these tests which can be performed by the iFCs to be done in the application server .

The last part of the iFC is the iFC application server part. It includes a SIP URI which tells the S CSCF where to route the message if the trigger point evaluates as TRUE. The default handling field tells the S CSCF whether to continue processing the SIP message or to stop processing it when the application server it tries to send the message to cannot be reached. The last part of this section of the iFC is the service information. Service information is data that is appended to the SIP message when it is sent to the application server . Application servers generally do not look into the body of the messages working with headers except for registration messages.

When the iFC evaluates to TRUE the S CSCF sends the message to the application server designated in the application server part of the iFC . If it sends the message to an application server the S CSCF will mark the message so that the application server will know where to send the message when it is finished with it back to the S CSCF . The marking may also be used for the S CSCF to convey back to itself where to resume the processing which iFC is next . An application server may decide based on its service logic and user specific application data to conclude the session setup. For example it may have connected the call to an announcement. When this happens the application server will not send back the initial message frequently sent back modified but will send a message that moves forward the session setup. A 200 OK message is an example. The S CSCF will then skip evaluating any remaining initial Filter Criteria those of lower priority and route the message accordingly. Therefore an earlier application server invoked by an iFC with higher priority may change the actions of a subsequent application server either by changing a field in the SIP message that the subsequent application server processes or by ending the processing of the SIP message by the S CSCF before the lower priority iFCs are evaluated.

The left side of depicts the concept of service mobility. We have already shown how each PUID will have its own service profile and its own addressing. The left side shows that this PUID may be assigned to any network address and any device. Since it takes its services and Service Profile with it the ability to register PUIDs at different network locations with different devices is the center of a network s ability to support service mobility.

The relationship between the PUID and a network address and the device at that address is done by the IMS registration process. Rather than giving an exhaustive account of IMS registration the various embodiments disclosed herein focus on the use of registration for service mobility.

The IMS registration process starts with an IMS REGISTER Message being sent from the User Equipment to the home network. shows the key headers of the SIP REGISTER message that are used to make service mobility possible.

The first header is the Request URI. This header is used to designate the home domain to which the REGISTER message is to be routed and on which the PUID is to be registered. The next header of concern is the To Header. For most IMS messages the To Header is used for end to end communication and supports ASCII. For example the To Header might contain the string Steve Siegel. However in the REGISTER message the To Header has another purpose. The To Header contains the Public User Identity that is to be explicitly registered. This explicit PUID may be used to register all the PUIDs in the same implicit registration set. When any of these are registered all will be registered. When any of the PUIDs in the implicit registration set are de registered all will be de registered. The implicit registration set is a relationship between PUIDs in the same user profile that is defined in the HSS .

Each PUID belonging to a user may be in at most one implicit registration set. While putting multiple PUIDs in the same implicit registration set decreases registration traffic and processing it also makes it impossible to have different registration states for PUIDs in the same implicit registration set. For full functionality all PUIDs would be registered and de registered separately they would not be in implicit registration sets.

The Authorization Header is used to convey authorization and authentication data. It is in this section that the Private User Identity PRUID is conveyed See . Because the PRUID is unique to both the PUID and the equipment it does create some non insurmountable problems for service mobility. The concept works best in conjunction with single user devices which are always registered when powered on. The PRUID is not as well suited for shared devices for visited devices for devices whose registration states are changed which PUIDs are currently registered or for registrations that go beyond the device used to initiate the registration e.g. moves de registration from all devices etc. .

The Contact Header includes the network address at which the PUID is to be registered. For example it could be an IPv6 address and would be a full address including the port number on which the User device is communicating to the P CSCF usually through a tunnel defined as part of the registration . The mapping of the PUID in the To Header to the network address in the Contact Header is an accomplishment of the registration process and necessary for service mobility. Another variable of importance in the Contact Header is the expires variable. It contains the length of time for the registration in seconds. When the time is exceeded the PUID will automatically be de registered from the Contact address. A new REGISTER Message could be used to extend the time. The expires in the Contact Header is also used to explicitly de register a PUID from a Contact Address. This is done by setting the expires value to 0. Other important optional tags in the Contact Header are the ones that indicate the priority of the registrations q used by sequential forking and callee capabilities used to determine whether the registered location is a candidate to receive the session based on the request made by the calling party.

The last field that will be discussed here is the Via field. Communications to and from the user equipment is preferably done through a P CSCF although other network nodes or functionality may be used. The REGISTER Message comes to the S CSCF through the P CSCF A B. The Via Header contains this path. This is how the S CSCF identifies the P CSCF A B. When communicating to the user equipment the S CSCF takes the information in the VIA Header from the registration and uses it to form the Route Header of its message. This assures that the message will be sent to the user equipment via the proper P CSCF A B. The terminating S CSCF always sends the message to a P CSCF A B that is supposed to send it on to the called party.

While the same REGISTER message is used registering the User for originating services and for terminating services involves different technical solutions.

Processes associated with the registration and originating service are discussed next. The final message in the registration process indicating that the registration is complete is the 200 OK message. After authentication and authorization and all of the other functions of the registration have been completed by the S CSCF a 200 OK message is sent from the S CSCF which has performed the registration to the user agent that initiated it with the REGISTER message. The user agent or SIP User Agent is the software that represents the user in SIP exchanges. As with all messages sent between the user equipment and the S CSCF this message is sent via the P CSCF A B. No direct contact from the user equipment to the S CSCF is allowed.

The user may be registering multiple PUIDs on the same piece of equipment simultaneously. This would allow the choice of personas. If they were all part of the same implicit registration set they would have to be all registered and de registered as a group. If however the user ever wanted to give access to any device to only some of the PUIDs and not others they would have to be registered separately at all times because they could not be part of the same implicit registration set.

Multiple users may share the same device. While this is not common with personal wireless devices it is very common with wireline devices. For example a typical home phone may have separate PUIDs registered for Mom Dad Brother Sister and for the family. A store may have separate PUIDs for the store the owner and for each of the employees. In these cases separate registrations would be preferred.

If the P CSCF A B already has a list of allowable PUIDs from the contact address the new ones do not replace the existing ones but are added to them. When the user agent receives the 200 OK the message will still contain the PUID newly registered or the list of PUIDs if there is an implicit registration set Therefore the User agent will know which PUIDs it is allowed to use.

By this means the user agent and the P CSCF A B will know which PUIDs are allowed from a specific network address. When initiating a session the user agent will designate which PUID is requesting the service. It does this by placing that PUID in the P Preferred Identity header of the SIP INVITE. It may place any of the PUIDs that are currently registered at its location from any registration that have been successfully performed.

All communications to the IMS core from user equipment goes through the P CSCF A B. This P CSCF A B was initially discovered by the user agent and was used to send the REGISTER messages. The same P CSCF A B must be used for all subsequent SIP communications. Therefore the INVITE is sent from the user agent via the P CSCF A B used in registration. This P CSCF will check the P Preferred Identity header to determine if the PUID that it contains has been registered that it was included in a 200 OK message processed by the P CSCF . If the PUID in the P Preferred Identity was not registered the specifications allow the P CSCF to be provisioned to either reject the INVITE or to change the PUID representing the user to a PUID that was registered. The method of choosing this PUID is not specified.

If the Public User Identity in the P Preferred Identity header is registered then the P CSCF will remove the P Preferred Identity header from the message add a P Asserted Identity header with the same PUID and forward the message to the S CSCF at which the User is registered. All PUIDs associated with the same User Profile will be handled by the same S CSCF. This S CSCF is established when the User registers its first PUID and will remain in effect until the last PUID belonging to the User has been de registered explicitly or by expiration of the registration from all contact addresses.

Once the INVITE arrives at the S CSCF it will act as an originating S CSCF . It will take the PUID in the P Asserted Identity header and use it to select the Service Profile that is to be processed. This process which allows the PUID to be registered from any equipment and then allows the User Agent to use that PUID to tell the S CSCF which services to supply enables service mobility for originating services. Wherever the PUID is registered the same service profile and its services may be invoked. Of course for this to work services must also be designed to work with any user equipment over any access network.

Registration and terminating services are discussed next. The way registration is used by terminating services is different from for the way it is used by originating services. With originating services the network gives the user agent at a specific address the right to invoke certain PUIDs and polices that invocation. Service mobility is accomplished by allowing the same PUID to be registered at multiple addresses empowering multiple user agents to invoke the same services. With terminating services the sessions are coming in to the terminating S CSCF to specific PUIDs. The issue is having the session delivered to the address or addresses at which the PUID is registered. If the Public User Identity sip john.doe att.net is registered at his SIP phone at his home which is located at an IPv4 address such as 192.168.44.202 the INVITE should be routed there. If it is registered at a SIP phone at his office with a different IP address the INVITE should be delivered there.

The SIP Registrar function in the terminating S CSCF is the mechanism that maps the PUID to the specific network address es at which the user is registered. In the PSTN addressing was originally done directly when done by switches rather than operators . The number dialed indicated the line that was to terminate the call. This direct approach is becoming less and less the rule as 800 service network call distribution local number portability and other services have been introduced. SIP addressing is indirect. The PUID represents a user not a network address. As discussed before a single PUID may be registered at any network address. At any given time it may be registered at 0 1 or more addresses simultaneously. Sessions are addressed to a PUID by placing the destination PUID in the Request URI. It is up to the SIP registrar functionality in the terminating S CSCF to resolve that to an addressable location.

As discussed earlier the SIP REGISTER message contains the information necessary to perform the registration See . The PUID being registered is in the To Header. The Contact Header includes a SIP URI which designates the network address at which the PUID is to be registered. The address would be a full IP address including the port number of the security association e.g. tunnel between the User Equipment and the P CSCF A B. For example the SIP URI in the contact header might be sip 192.168.44.202 122 att.net. This URI is not a PUID but represents the IP address of contacts involving this registration. The P CSCF A B used by this contact location was conveyed by the Via Header. These three pieces of information are used by the SIP Registrar function in the Terminating S CSCF to route calls that come into it for a PUID that it is servicing.

In area of a user is shown with a single registered device. The user s PUID is sip mary att.net and the network address of the device from which the registration was performed is 172.168.122.105 5. The registration was performed using the P CSCF at 144.132.244.165. The table shows the registration entry for this PUID in the SIP Registrar . Currently the sip mary att.net is registered at only one contact location.

If an INVITE were to come to the terminating S CSCF with the Request URI of sip mary att.net the terminating S CSCF would first process the service profile associated with the PUID and invoke any application servers that needed to be invoked. After processing the applications the S CSCF needs to route the INVITE to the user. Assuming no changes by any application servers the Request URI will still be sip mary att.net. Clearly this is not routable as is. Therefore the SIP Registrar function of the S CSCF takes the PUID and looks up where it is registered. In this case in the REGISTER message the SIP URI representing the location was sip 172.168.122.105 5 att.net. The SIP Registrar removes the original PUID sip mary att.net from the Request URI and replaces it with the SIP URI representing the Location Header from the registration sip 172.168.122.105 5 att.net . The SIP Registrar also takes the information from the Via header of the REGISTER message which indicates the P CSCF and places it in the Route Header of the message being processed. When the S CSCF sends this edited message the network will use the Route Header to send the message to the P CSCF that was used for the registration. The P CSCF will then send the message on to the User Agent over the Security Association SA made with the user equipment and designated by the IP address and port in the Request URI. Other examples and are shown for various IP and non IP devices. shows a SIP register routing process which concludes with the terminating S CSCF routing the INVITE through the P CSCF A B to the user equipment . INVITE signals are communicated to and from the Application Server for STEVE .

Area of shows the user having registered the same PUID on two devices. This results in two separate registrations being tracked by the SIP Registrar both with the same PUID. Because they apply to the same User Profile the two registrations will be at the same S CSCF . At any time only one S CSCF will be responsible for a single user profile all its PUIDs and its service profiles. However the P CSCF A B used will be determined independently by each registration and may not be the same one. With two registrations for the same PUID when the SIP Registrar processes the call it will make a copy of the INVITE message and make changes to the INVITEs based on each of the registrations. It will then send the two INVITEs to their different destinations. This is called forking. Simultaneous forking means that the two INVITEs are sent out simultaneously and the session will be sent to the first positive response received. A BYE Message would be sent to the other locations that were sent the INVITE after one of them accepted the INVITE. Sequential forking means that the SIP Registrar will first send out one INVITE and will then send out the other only if the first is not answered positively. Sequential forking would be done in the order determined by the priority of the registration. The priority is established by a tag in the Contact header of the SIP REGISTER message.

There are several different defined forking policies. The S CSCF can be provisioned to use a default forking policy. An incoming request can also specify a forking policy. Application servers may use this capability to change the forking method. There are four defined forking policies. These are 1 No forking which means that only a single copy of the message will be sent. If the PUID is registered at more than one address that could accept the message the message would be sent only to the highest priority registered contact address 2 Simultaneous or parallel forking involves making copies of the message which are sent in parallel to all of the Contact addresses at which the PUID is registered and which qualify to receive the message. Any of the Contact locations sent the message may accept the INVITE with a 200 OK message. Once the S CSCF has received a 200 OK to any of the messages it forked it would send a BYE to the other forked locations 3 Sequential forking involves the S CSCF responding to a message to a PUID that is registered at more than one location by sending the message sequentially to each of the registered locations with the capabilities required by the message until it has received a positive response to its current message or it has exhausted the list. If priorities were set using the Contact headers at registration the messages would be sent in the order established. If no priority was set the order of registration could be used. Registrations that do not set a priority receive a default priority. Those that do have a tag setting priority would be able to set any value higher or lower than the default. Each time a message was sent the S CSCF would wait until it received a response or timed out waiting. If the response was negative or if there was a time out the previous try would be abandoned and an attempt would be made at the next address if there were one. When a 200 OK is received no further forking is done and normal processing continues 4 Mixed forking is a combination of the previous two. It does sequential forking when the priorities are different. When in the course of processing priorities a priority level is encountered which has multiple registrations of the PUID with the same priority those locations would be treated in parallel.

Area of shows the user on a different device from the device in area . The user has changed devices and is using the same PUID. The only changes made are in the SIP Registrar . This move was established with two separate REGISTER messages. The first REGISTER message shown in area registered the second piece of equipment. The second REGISTER message de registered the first piece of equipment. De registration is accomplished in the same way as registration but with the expires tag set to 0. De registration happens automatically by the network when the number of seconds in the expires tag has been reached.

Areas of show users on a shared device. John and Mary may be two workers sharing a work phone or may be two family members sharing a home phone. Even though these two Users with their separate PUIDs may be registered at the same Contact location they could be registered with different S CSCFs . Each S CSCF would be responsible for routing to its users. Because they are located on the same device the two registrations are likely to use the same P CSCF A B. At times the shared phone may have one User Areas and and at times it may have multiple users Area . The network does not automatically based on IMS Technical Specifications store information about which PUIDs are registered at specific addresses. It does store information about at which addresses specific PUIDs are registered. An enabler that subscribed to all registration events could keep track of which PUIDs are registered at a specific address if this information is desired. Enablers provide well defined interfaces to common network functions or shared data allowing a company to reuse particular modules of program logic that are useful but independent of any particular application. Information about the current registration at each S CSCF and which registrations used which P CSCFs A B could be valuable for many uses including the ability to recover from the failure of an S CSCF or a P CSCF A B.

Therefore the IMS registration process enables service mobility. A PUID may be registered at any network address. Mechanisms exist for the registered PUID to be asserted from any location at which it is registered. This will result in the S CSCF processing the service profile associated with the PUID. The service profile defines the user s services making them mobile as the PUID is moved to different devices. Likewise the registration process allows the delivery of the session to the user at any location at which the PUID is registered by using the SIP Registrar function of the S CSCF. This means that there is also service mobility for services defined by a service profile for terminating services.

Of course making service profiles follow PUIDs that could register at any Contact location is not enough. Services Applications have to be designed in such a way as allows them to be device and access means independent. At least they have to adapt to the limitations of specific devices or access technologies.

This disclosure now turns to the issues of registration of users in the IMS context. The basic IMS registration process is insufficient to meet the needs of customers in support of service mobility and a User Centric network. There are several aspects of the basic IMS approach that are problematic. These are outlined above.

The solution to the above problems is the network device and functionality disclosed herein which may act as a proxy for the user equipment performing proxy registrations and de registration without using the actual devices. Requiring private user identities that are dedicated to a specific user multiple public user identities may be supported to be resident on the device limits the possibilities for new users to register on a device that is not pre provisioned for that user. This is not a problem for dedicated personal devices that are always used by one user. It does become a problem for shared or visited devices. Examples of these include home phones shared store office or work phones visitors offices etc. A network registration server that performs registrations as a proxy for the User ill have access to user specific private user identities to be used after authenticating the user.

Another area of limitation relates to network initiated registrations or de registrations. These might be event driven. They could happen at designated times of day when a user s location has changed or when a change has been made in the presence information or registration state about the user. With basic IMS any changes in registration status would have to involve REGISTER messages coming from the user equipment. The principles disclosed herein provide for the ability to remotely control and manage registrations.

Finally there is the issue of network user equipment that is not capable of registering and de registering itself. The network disclosed herein specifically includes user equipment behind line access gateways. This equipment will not have Universal Integrated Circuit Cards UICC a chip card used in wireless devices to register and will not be able to register and de register PUIDs especially if it is shared equipment. GSM phones are in a similar category. The ability to register and de register public user identities independent of each other is not well supported by current standards. It is also assumed that even some SIP equipment without UICCs will still be on the carrier s network.

These deficiencies stem from the initial needs of IMS. The first implementers of IMS were wireless service providers. They believed in the concept of a personal all purpose wireless device. They initially felt that their customers would have exactly one device per user and that this device would not be shared. Service mobility was not necessary because they had device mobility and only a single device. Other devices were provided by other Service Providers. They wished that their customers would abandon the other devices and the other devices certainly were not part of their concept of IMS.

Current network providers have more expansive needs. Some customers use a variety of devices both wireless and wired. Most have multiple devices home office cell video . Users are mobile between devices sometimes using one and sometimes another. Many of the devices are shared such as a home phone. Frequently users want telecommunications services from a device with which they have had no previous relationship neighbor s phone hotel phone air phone etc. 

All of these issues can be addressed by a network based device such as a registration manager with a web interface and capable of performing proxy registrations and de registrations. One enhancement to IMS registration needed by carriers is the ability to have a network element register the public user identities as a proxy for the user equipment at whose address the PUID is to be registered. The basic IMS approach is to have the user agent on the user equipment automatically register a default set of PUIDs when the equipment is turned on. The default set of PUIDs and the registration credentials are provisioned.

The network device will be able to act as a proxy for the user agent on the device to register or de register the PUID on the device. There will be three means to initiate a registration by the network device .

A notification from an enabler application may be sent to the network device initiating the registration. The notification may be based on time of day and day of week or the device may initiate registration itself. Web access to the device may be used to initiate the registration. The user may be dealing with HTML or may initiate a process by selecting a menu item or a button that results in the http interactions with the device .

The concept of the device acting as a proxy for the user is straight forward. The device responds to various events to initiate registrations or de registrations. The device would perform the registration as a proxy for the user at the designated network address. This can be completely transparent to the S CSCF and the HSS . They will authenticate using a private user identity provisioned on the device or accessed by it. Registration is already done based on the contact header of the REGISTER message not the originating address so this is not a problem for the S CSCF and the HSS . The remaining issues are the user equipment and the P CSCF A B. The only thing that persona enabled user equipment needs to know is which PUIDs it may use. This information is currently communicated to the user device by the 200 OK message to the REGISTER message. If the 200 OK is not allowed without the REGISTER then the system can use a NOTIFY or INFORMATION message as long as it requires an enhanced user agent that will know how to use it. The P CSCF B will be able to do all of its registration functions in the normal manner except for the setting up of a security association with the user equipment associated with the registration. Whether the P CSCF B will set up this tunnel based on the origin of the REGISTER message or the address in the contact header is not clear although the specifications seem to favor the association with the contact address. It is preferable that the system is implemented this way and if not an alternative approach allows the device to initiate the agreement between the user equipment and the P CSCF B.

Some items associated with the device in order to initiate a registration include the public user ID to be registered the contact address at which the PUID is to be registered the P CSCF to be used for accessing the user the expiration time of the registration the priority of the registration for sequential routing and the capabilities of the device at which the PUID is being registered and credentials by which to authenticate and authorize the registration.

The device is preferably located in the Applications Plane and uses at least one or more of the following interfaces Gm to P CSCF Gm to P CSCF functionality in SGW not shown Ut HTTP or WAP to User not shown Mb Voice connectivity to User not shown Sh to HSS possibly separate interface to a credentials server and Interface to Identity Management Enabler. Its primary functions are to enhance the registration capabilities at IMS devices and to act as a proxy for endpoints that currently cannot register in IMS e.g. PSTN or off network endpoints . Making user s experience easier and more intuitive. A secondary function of device is to make the user s experience easier and more intuitive. This is done by the various embodiments of the invention disclosed herein. These features include the ability to 

For event driven registrations and de registrations many of the information needed for the registration should be known. Credentials are a separate issue. For web initiated registrations it is expected that most of these that are initiated by the user would be done by the user choosing an option from a menu or by selecting a button. All the details would be pre provisioned and scripted. There will also be the ability of the user to enter the specific information needed for the registration. The user should know which PUIDs are to be registered. Users might not know the network addresses of the equipment that they are using. One means of dealing with this is to give the user an alias for the equipment. Enough information would be kept in the network to determine what the network address is. It could be a fixed address. If it is not other identification such as a MAC address might be needed in order to get the network address. The P CSCF A B may be fixed for some devices. However network configurations change. One way to determine it would be to check if any PUIDs were registered on the device. If they were the P CSCF A B of one of them could be used. If none were the device could pick a P CSCF A B based on information from the location enabler . Expiration time priority and capabilities could use default values values associated with the device or could be overridden by the user.

Credentials could be done in one of two ways. One the device could store or have access to credentials for each user or two the device could be given permission to do any registrations after it is authenticated. These options would mean either that the device would have a private user identity for each user profile or that a single private user identity could be used by multiple user profiles. Because the private user identity is only used as part of the authentication process for registration the only problem that might result would be if the private user identity were used to identify the correct user profile. This is not necessary because the public user identity in the to header should uniquely identify the correct service profile and could be used instead of the private user identity. Therefore one of the following two recommendations should be followed. They do not affect the architecture.

The device may have available to it a separate private user identity for each user profile. These would be unique to the device . The user profiles may have multiple private user identities or the device may have its own private user identity that it may use for any registrations. Registration challenges would be based on this private user identity. This involves fewer private user identities than 1 but some specifications demand that a private user identity be unique to a user profile.

One way to initiate registrations that is useful and is not supported by the current IMS specifications is event driven or event initiated registrations. The device can subscribe to events usually with enablers and be notified when the event happens. The result of the notification could be that the device will register specific PUIDs at specific network addresses. Which PUIDs are registered and where they are registered could be dependent on the nature of the notification.

Customers way want to assume a specific registration state based independent data such as at certain times of the day. For example the customer may want to automatically de register from all phones between the hours of 1 AM and 5 AM. Whether this is totally automatic whether it needs confirmation and how and if it could be overridden by the customer are service capabilities selectable by the user. The basic concept is that the customer does not want to be disturbed during certain hours and the device is used to set that up based on time.

Time of Day registrations would be difficult based on equipment initiated registrations. Each of the devices would need to be separately programmed to de register itself at a specific time. With the device a single element may be triggered by the time and perform all of the registrations and de registration that are required.

There are many examples of when a customer would want to do a registration or de registration while not at the equipment on which the registration is made. Thus a web based or remote registration is disclosed. One example would be de registering from equipment after the customer has already left the vicinity of the equipment. For example the customer may be working from home for the day and registered a work persona on the home phone. At night he may go out with his wife leaving his children home with a babysitter. If he leaves the home forgetting to de register his work persona from the home phone he runs the risk of missing a late business call. Even with his work persona registered on his cell phone a business call perhaps from Europe or Asia to his work PUID would result in the INVITE being forked to both his home phone and his cell phone. If the babysitter or one of the kids answered the call first the call to his cell phone would be dropped not the desired outcome. Without the device either the customer or someone else at home would have to initiate the de registration from the home phone. With Web Based registrations and the functionality of device a menu item on a web enabled cell phone could initiate the de registrations from all other phones.

Occasionally our customers may need to register at a location for which there is no menu driven script to initiate the registration. For example this could happen on vacation or in a visitor s office on a business trip. In this case the user could go through a telecommunications portal to specifically tell the device what to do. Before the user is allowed to do anything the user must be authenticated. There are many means to authenticate the user including the identity management enabler . The user will be authenticated in a manner acceptable to security policies. Once the user is known the rights of the user need to be determined. Generally a user will be given the ability to register or de register only PUIDs that belong to that user. It would be possible to extend those privileges to all PUIDs associated with an account which the user owns or to specified other users. Which PUIDs the user controls will not affect the architecture. The important thing is that the user will be able to use the device for only specific PUIDs. The device must get the list of PUIDs allowed to the user. The PUID information enabler will allow the device to get this list. This enabler will be able to supply information about the use of PUIDs. In this case it would supply all the PUIDs associated with the user. The device enforces that the user may register only allowed PUIDs. For example this may be done with a restrictive pull down menu of PUIDs or by checking the registration message before sending it. How this is done is a user interface issue and may be flexibly implemented. The PUID to be registered goes into the To header of the REGISTER message.

The second piece of information needed for the registration is the network address of the registration. The user should be able to enter any network address. Aliases for the network address are supported to make it easier. Once the device has discovered the P CSCF A B as discussed above there will be enough information for a basic registration. Advanced users should be able to override default values for priority expiration and capabilities within prescribed limits.

In addition to its ability to perform proxy registrations enabling event based time based and web based registrations the device is a logical place to provide other advanced registration services to customers concerning network registration. Its ability to run registrations and de registrations from any piece of equipment can be combined with an ability to monitor all registrations to provide some valuable services.

The restriction that all REGISTER messages must come directly from the piece of equipment that is being registered or de registered is burdensome in the IMS system. The fact that the registration is done at the network address in the contact header rather than the origin address in the message opens the possibility of addressing this restriction. As easy a concept as a move registering on a new device and de registering from an old device would have to be done with two separate messages originating from two different devices. The device performs this and other macros concerning registration with a single interaction from a single point to the device . This concept is used to implement the three screen strategy. For example a customer may be watching an event on a home TV set and have to leave for an appointment. In order to continue watching the event the customer may want to transfer the video to a portable device capable of rendering the video such as a cell phone. In addition to moving the content the customer may want to change the registration to the cell phone and de register from the home TV. To do this as part of one action by the customer the device would be used so that separate action from the TV and cell phone are not necessary.

A customer might find it easier to maintain its registrations with the concept of registration states. The customer could define registration states which would include which of the customer s PUIDs are registered where. The state could be given a name such as normal workday normal weekend or business trip to home office. An example of a night registration state was given above as a state that could be initiated automatically by time of day. It would be valuable to customers if a single menu item or button instructed the network to put the customer in that state.

For the device to allow the customer to do this in addition to the capability to register the customer on any device the device would have to keep track of where the customer was registered in order to know where to de register the customer.

Not all registrations would go through the device . Registrations could also be done in the current standard manner registering directly from the device at power on. To track these registrations the device would have to act as an Application Server that subscribed to the registration event or which gets a third party registration. Having done this it would be able to track the registrations giving it the ability to know what to de register when a customer chooses to enter a registration state. Confirmations could be required or not required for the de registrations. The customer should be able to decide.

The device needs to track all registration in order to be able to work with requested defined registration states. This information about exactly where the customer is currently registered could be useful to a customer who wants to verify his current registration state perhaps for the purposes of taking corrective action. This information in the device could be made available to the customer over a web interface. This allows for registration review. This information could also be made available to Application Servers. Either the device would act as an enabler or it could provide the information to an enabler. It could also be of use to a customer service representative trying to troubleshoot a problem.

Another aspect relates to providing registration alerts. The power to control one s registrations gives the customer the power to make mistakes that will adversely affect the service that they receive. In addition to giving them the ability to review their current registration state the customer may want to define certain states about which an alert or notification is requested. Network providers may want to automatically alert the customer about certain states. For example a customer may want daily notifications when none of his PUIDs are registered on any of the equipment which belongs to him. Another customer may want notification when his work PUID is registered at home during normal work hours. Another may want notification when any of her PUIDs are registered on equipment not belonging to her for more than an hour. The customer should be given the capability to define the situations in which she wants to be alerted. The device detects those situations and alerts the customer. Alerts could be defined that use calls email instant messaging or any other appropriate communication mechanisms.

There are several interfaces to the device . First there is a web interface. This is usually used by user equipment or by a telecommunications portal. The user may either actively give the information needed for the registration or can rely on pre populated scripts chosen from menus buttons or other interface means. The telecommunications portal is one application for which an interface to the device to initiate registrations is recommended because of its direct user involvement. Registrations by other applications servers would be possible by the architecture.

Another source of initiating registrations is the notification of events from the enablers such as the location enabler. The device would subscribe to specific events and get notifications when they occurred. Any enabler capable of sending notifications could be used.

Enablers are also used for authentication of the user or the user s device that requests registrations over the web interface. The identity management enabler could be used. If the device used were an IMS device with a UICC the Generic Bootstrapping Architecture GBA could be used for authentication.

The device would need credentials for each user that it could register in order to partake in the basic IMS registration process which is preferably not changed. These credentials would either be provisioned on the device or made available over an interface not shown.

The other interface to enablers would be to the notification enabler allowing the device to notify the user when the registration state meets user defined criteria.

Inward to the P CSCF A B S CSCF and HSS the device would look like a user. Therefore there would be no need for changes to the S CSCF and HSS . The same interfaces would be supported. The device may need to talk to the P CSCF A B and the user equipment in enhanced ways to allow the setting up of a tunnel between them where appropriate tied to the registration. Normal registration from user equipment using the standard IMS defined process is supported.

Other aspects of the present invention provide for support for users on circuit switched networks. IMS standards do not define a method for giving IMS based services to users on the PSTN or other circuit switched networks. The PSTN gateways allow users on the PSTN to initiate sessions to IMS users and allow IMS users to initiate sessions to PSTN customers but getting IMS services while on the PSTN has not been defined.

This disclosure provides simple mechanisms that will allow the customer to get IMS services from any networked device capable of communicating to or receiving calls from the service provider s network. A customer will be able to get terminating services from the network delivered to any phone hotel in laws visitor office bar pay phone etc. using the same registration method discussed for SIP devices. This is done with several changes. First the contact header of the REGISTER message and the information in the SIP Registrar function will support SIP URIs that translate to E.164 addresses not just IP addresses. Since these fields already support SIP URIs no change is anticipated in standard equipment. The BGCF already knows how to send a SIP call to the PSTN. Some changes are made to process these calls. shows how the SIP Registrar can be used to send calls to the PSTN after terminating services are applied even to E.164 numbers on another network.

By registering the PUID sip mary att.net at an E.164 address on another carrier s network the S CSCF will first process the Service Profile associated with the PUID and then send it to the BGCF to be delivered to the other network. No changes are needed to the terminating S CSCF . The BGCF does not need any additional functionality as long as it can accept INVITES from an S CSCF . An alternative approach uses the MGCF as the place where the S CSCF sends the calls.

The proposed solution for originating calls from a PSTN phone on any carrier s network is a two stage dialing approach. This is illustrated in . The user from any phone or device would dial a phone number representing the two stage dialing server through a gateway . This is similar to the use of credit card calls and for carrier bypass. Essentially the server is addressed by a phone number that translates to a SIP public service identity or PSI. The 2 Stage dialing server then authenticates the user with the help of the identity management enabler and gives the user a choice of which PUIDs to use as the originating party P Asserted Identity . This will allow the user to get any network originating services on the session. To determine the called party DTMF or voice recognition could be used to either designate a TEL URI or to make a choice from the caller s address book using that enabler. Such an approach could be used from any phone capable of calling a party on the network including an Airfone

These two methods allowing registration at E.164 addresses on the PSTN and two stage dialing extend service mobility to all phones that can reach or be reached by the network.

The system may also receive requests for registration action initiated by a customer service agent. For example a user may forget to de register from a home device and call a service center which may have a customer service agent that can then initiate remotely a de registration and manipulate other registrations as well on behalf of a consumer. The registration action may further comprise registering or de registering a user at a device based on a detected location of the user as set forth above. The registration action may further include modifying an ability of a network to receive calls from one or more user devices modifying an ability of a network to receive calls from one or more user devices and transmit calls from third parties to a user s one or more devices based on the implemented registration action. If the registration action results in multiple concurrent registered devices associated with the PUID then the method may further include forwarding incoming calls to each device at which the user is registered. In one aspect the implemented change in the IMS registration state is performed transparent to a user. This may occur for example if the registration actions are purely location based where a user essentially does not interact with the system other than the system detecting that the user has arrived at work or at home or at some other location and automatically altered the user registration state according to a predefined policy.

Another embodiment of the invention is illustrated in which demonstrates a method of remotely de registering devices in an IP multimedia subsystem IMS . As disclosed in a method of operating an IP device in an IMS includes receiving instructions for a de registration action for a Public User ID PUID registered at a device in the IMS the instruction being initiated remotely from the registered device and performing the de registration action wherein the PUID is de registered from the device in the IMS network . Performing the de registration may further comprise allowing the registration at the device to expire or may occur by transmitting a new registration instruction to the registered device that causes the registration to be cancelled. Transmitting the new registration may comprise transmitting a registration for zero seconds. The instruction may be initiated from a mobile device associated with the user that differs from the device at which the PUID is registered. Furthermore the instruction may also be initiated from a non mobile device that is also associated with the user but differs from the device at which the PUID is registered. The instruction may also be initiated based on one of a predetermined event and or input from a user at a device remote from device at which the PUID is registered.

The method may also further comprise receiving a request from a customer service agent for the status of the user s current registrations and presenting to the customer service agent the current status of current registrations for the user. The method may also involve receiving an instruction from the customer service agent to take an action relative to the user s current registration and based on the instructions taking the action to modify at least one aspect of the user s current registrations or registration state. The request may be received from a remote device that is not registered to the user in the IMS. If this is the case another aspect of the invention may involve presenting to that remote device the current status of the current registrations for the user. The request from the user may further include a request from a device at which the user is registered.

The network device that accepts communications regarding where to send sessions to send sessions destined for a specific PUID and provide information regarding where to send sessions may be an S CSCF with its SIP Registrar function. Establishing in the SIP Registrar that the E.164 routing address is the final destination may be accomplished by placing a registration result in the SIP Registrar s record in the same place that an IP address of an IP final destination would be placed. A call session control function may use its SIP Registrar capabilities to route a call to a PUID registered at an E.164 routing address as the final destination. This may be accomplished by placing a SIP URI or TEL URI representing the E.164 routing address in an indication of a final destination PUID or address of the message being processed and the SIP URI representing the network device that includes routing functionality based on telephone numbers in a portion of the message that indicates its immediate destination. The indication of the final destination PUID or address may be a Request URI. The portion of the message that indicates it immediate destination may be a route header. The network device that includes routing functionality based on telephone numbers may be the Breakout Gateway Central Function BGCF node in an IMS system. The step of providing IMS services to the terminating non IP device may occur via the network device that includes routing functionality based on telephone numbers sending messages through at least one of a media gateway control function MGCF and or a Signaling Gateway SGW to the terminating non IP device. The non IP device may be associated with a PSTN or a circuit switched voice connection in a wireless or cellular network. Such a wireless or cellular network may include the use of various protocols such as GSM UMTS CDMA or CDMA2000 networks. The wireless or cellular network does not necessarily need to support IP data.

Embodiments within the scope of the present invention may also include computer readable media for carrying or having computer executable instructions or data structures stored thereon. Such computer readable media can be any available media that can be accessed by a general purpose or special purpose computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium which can be used to carry or store desired program code means in the form of computer executable instructions or data structures. When information is transferred or provided over a network or another communications connection either hardwired wireless or combination thereof to a computer the computer properly views the connection as a computer readable medium. Thus any such connection is properly termed a computer readable medium. Combinations of the above should also be included within the scope of the computer readable media.

Computer executable instructions include for example instructions and data which cause a general purpose computer special purpose computer or special purpose processing device to perform a certain function or group of functions. Computer executable instructions also include program modules that are executed by computers in stand alone or network environments. Generally program modules include routines programs objects components and data structures etc. that perform particular tasks or implement particular abstract data types. Computer executable instructions associated data structures and program modules represent examples of the program code means for executing steps of the methods disclosed herein. The particular sequence of such executable instructions or associated data structures represents examples of corresponding acts for implementing the functions described in such steps. Program modules may also comprise any tangible computer readable medium in connection with the various hardware computer components disclosed herein when operating to perform a particular function based on the instructions of the program contained in the medium.

Those of skill in the art will appreciate that other embodiments of the invention may be practiced in network computing environments with many types of computer system configurations including personal computers hand held devices multi processor systems microprocessor based or programmable consumer electronics network PCs minicomputers mainframe computers and the like. Embodiments may also be practiced in distributed computing environments where tasks are performed by local and remote processing devices that are linked either by hardwired links wireless links or by a combination thereof through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

Although the above description may contain specific details they should not be construed as limiting the claims in any way. Other configurations of the described embodiments of the invention are part of the scope of this invention. Accordingly the appended claims and their legal equivalents should only define the invention rather than any specific examples given.

