---

title: Image based tracking in augmented reality systems
abstract: Systems and methods for image based location estimation are described. In one example embodiment, a first positioning system is used to generate a first position estimate. A set of structure façade data describing one or more structure façades associated with the first position estimate is then accessed. A first image of an environment is captured, and a portion of the image is matched to part of the structure façade data. A second position is then estimated based on a comparison of the structure façade data with the portion of the image matched to the structure façade data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09652896&OS=09652896&RS=09652896
owner: Snap Inc.
number: 09652896
owner_city: Venice
owner_country: US
publication_date: 20151130
---
This patent application claims the benefit of priority to U.S. Provisional Patent Application Ser. No. 62 248 706 filed Oct. 30 2015 which is hereby incorporated by reference herein in its entirety.

Augmented reality refers to using computer generated enhancements to add new information into images in a real time or near real time fashion. For example video images of a wall output on a display of a device may be enhanced with display details that are not present on the wall but that are generated to appear as if they are on the wall by an augmented reality system. Such systems require a complex mix of image capture information that is integrated and matched with the augmented reality information that is to be added to a captured scene in a way that attempts to seamlessly present a final image from a perspective determined by the image capture device.

The following relates to augmented reality image processing and image based tracking. Some particular embodiments describe using an initial rough location estimate to identify fa ade data about local buildings. An image captured for an augmented reality system may then be compared with the fa ade data. This comparison attempts to match some or all of a building fa ade against a portion of the captured image. Location and perspective information from the fa ade data may be used along with an identified matching portion of the captured image to generate a second estimate of the location associated with the perspective of the captured image. This second more accurate location may then be used to place virtual items within the captured image or subsequent related captured images as part of an augmented reality display.

The description that follows includes systems devices and methods that illustrate embodiments of the disclosure. In the following description for the purposes of explanation numerous specific details are set forth in order to provide an understanding of various embodiments of the inventive subject matter. It will be evident however to those skilled in the art that embodiments of the inventive subject matter may be practiced without these specific details.

Augmented reality as described herein refers to systems and devices that capture images enhance those images with additional information and then present the enhanced information on a display. This enables for example a user to hold up a phone to capture a video stream of a scene and an output display of the phone to present the scene as visible to the user along with additional information. This information may include placing virtual objects in the scene so the virtual objects are presented as if they existed in the scene. Aspects of such virtual objects are processed to occlude the virtual object if another real or virtual object passes in front of the virtual object as shown from the perspective of the image sensor capturing the environment. Such virtual objects are also processed to maintain their relationship with real objects as both real and virtual objects move over time and as the perspective of the image sensor capturing the environment changes.

One issue that arises with such augmented reality scenes including both real objects and virtual objects is setting and maintaining a tracking between the real objects and the virtual objects. This tracking is important to maintaining an immersive presentation of the virtual objects within the environment and treating the virtual objects as if they were real within the environment. Failed tracking creates jitter or unexpected movement of the virtual item within a scene or may set an initial virtual object placement that overlaps or is out of synchronization with real objects in unnatural ways.

Simultaneous location and mapping SLAM systems are systems that are used to track key points in two dimensional image frames of video and to identify three dimensional objects from the image frames as well as a relative location of the camera to those objects. Such processing to identify three dimensional objects however is processor and memory intensive.

A fa ade as used herein refers to details of a building or physical structure including details of building walls. The real world environment of a building may include significant three dimensional texture but as used herein a fa ade includes portions of a wall or building that may be modeled as two dimensional. This particularly includes patterns such as murals or other images that may be part of a building s wall surfaces. Fa ade data for a building may include a simplified two dimensional model of one or more exterior walls of a building. Such a model may include location points for such walls as well as two dimensional image data from such walls. When compared with complex three dimensional point cloud models of objects a two dimensional fa ade model is much simpler. Processing an image to identify a match with a two dimensional model of a wall also will generally consume fewer processing resources than processing one or more video images against a three dimensional model of an object. Efficiencies in processor and memory systems are particularly important when working with mobile devices or wearable devices with significant limitations on resource availability.

Further still by using global positioning systems or other location based systems to identify an initial rough location estimate the processing resources needed to match two dimensional fa ade data against a captured image may be further limited. Map databases may include image information and or fa ade models for buildings in a particular location. Using such a database along with an initial rough location estimate may be used to limit the expected buildings in a captured image to a very small number or may automatically be used to identify a single building. Starting with this information some devices with limited processing resources can match the two dimensional fa ade data against the captured image in a near real time fashion. Some such devices may not be able to perform such near real time calculations for three dimensional matching. The perspective of a building that is represented in a captured image may then be used to create an accurate estimate of a position of the image sensor that was used to generate the captured image. Such an accurate position estimate may be used in a variety of ways including use to properly place and track virtual objects within an environment as part of an augmented reality system.

As shown in the network system includes a social messaging system . The social messaging system is generally based on a three tiered architecture consisting of an interface layer an application logic layer and a data layer . As is understood by skilled artisans in the relevant computer and Internet related arts each module or engine shown in . represents a set of executable software instructions and the corresponding hardware e.g. memory and processor for executing the instructions. To avoid obscuring the inventive subject matter with unnecessary detail various functional modules and engines that are not germane to conveying an understanding of the inventive subject matter have been omitted from . Additional functional modules and engines may be used with a social messaging system such as that illustrated in to facilitate additional functionality that is not specifically described herein. Furthermore the various functional modules and engines depicted in may reside on a single server computer or may be distributed across several server computers in various arrangements. Moreover although the social messaging system is depicted in as a three tiered architecture the inventive subject matter is by no means limited to such an architecture.

As shown in the interface layer consists of interface modules e.g. a web server which receive requests from various client computing devices and servers such as client devices executing client applications and third party servers executing third party applications . In response to received requests the interface modules communicate appropriate responses to requesting devices via a network . For example the interface modules can receive requests such as Hypertext Transfer Protocol HTTP requests or other web based Application Programming Interface API requests.

The client devices can execute conventional web browser applications or applications also referred to as apps that have been developed for a specific platform to include any of a wide variety of mobile computing devices and mobile specific operating systems e.g. IOS ANDROID WINDOWS PHONE . In an example the client devices are executing the client applications . The client applications can provide functionality to present information to a user and communicate via the network to exchange information with the social messaging system . Each of the client devices can comprise a computing device that includes at least a display and communication capabilities with the network to access the social messaging system . The client devices comprise but are not limited to remote devices work stations computers general purpose computers Internet appliances hand held devices wireless devices portable devices wearable computers cellular or mobile phones personal digital assistants PDAs automotive computing devices with driver heads up displays HUD smart phones tablets ultrabooks netbooks laptops desktops multi processor systems microprocessor based or programmable consumer electronics game consoles set top boxes network personal computers PCs mini computers and the like. Users can include a person a machine or other means of interacting with the client devices . In some embodiments the users interact with the social messaging system via the client devices .

As shown in the data layer has one or more database servers that facilitate access to information storage repositories or databases . The databases are storage devices that store data such as sets of images of external areas generated by client devices and sent to social messaging system sets of fa ade data generated from images including buildings map data matching images and fa ade data to geolocations and other such data. In one embodiment a database stores images captured from a street and associates those images with map data. Some implementations of such an embodiment may use filters or image cropping to remove people from the images such as an embodiment that only stores image data above a height that includes people. Databases may also store data such as member profile data social graph data e.g. relationships between members of the social messaging system and other user data.

An individual can register with the social messaging system to become a member of the social messaging system . Once registered a member can form social network relationships e.g. friends followers or contacts on the social messaging system and interact with a broad range of applications provided by the social messaging system .

The application logic layer includes various application logic modules which in conjunction with the interface modules generate various user interfaces with data retrieved from various data sources or data services in the data layer . Individual application logic modules may be used to implement the functionality associated with various applications services and features of the social messaging system including aspects of augmented reality system . For instance a social messaging application can be implemented with one or more of the application logic modules . The social messaging application provides a messaging mechanism for users of the client devices to send and receive messages that include text and media content such as pictures and video. The social messaging application may also include mechanisms for providing augmented reality displays and content that integrate pictures and video with virtual objects. The client devices may provide augmented reality displays and may also enable users to access and view the messages from the social messaging application for a specified period of time e.g. limited or unlimited . In an example a particular message is accessible to a message recipient for a predefined duration e.g. specified by a message sender that begins when the particular message is first accessed. After the predefined duration elapses the message is deleted and is no longer accessible to the message recipient. Similarly augmented reality content may be provided for a predefined duration. Other applications and services may be separately embodied in their own application logic modules .

As illustrated in the social messaging system or the client applications include augmented reality system that provides functionality to generate augmented reality images. In some embodiments the augmented reality system can be implemented as a standalone system on a client device and is not necessarily included in the social messaging system . In other embodiments the client devices include a portion of the augmented reality system e.g. a portion of the augmented reality system may be included independently or in the client applications . In embodiments where the client devices include a portion of the augmented reality system the client devices can work alone or in conjunction with the portion of the augmented reality system included in a particular application server or included in the social messaging system .

The communication module provides various communication functionality. For example the communication module receives accesses or otherwise obtains image data of an image from a user device. In a specific example the communication module receives substantially real time image data from a camera sensor of a smart phone e.g. a single frame of image data or a continuous stream of frames captured by a camera sensor of the smart phone . The communication module exchanges network communications with the database servers the client devices and the third party servers . The information retrieved by the communication module includes data associated with the user e.g. member profile data from an online account or social network service data or other data to facilitate the functionality described herein.

The presentation module provides various presentation and user interface functionality operable to interactively present and receive information to and from the user. For instance the presentation module is used to manage output of image data with aligned and inserted virtual objects so that augmented reality images may be presented on a display. As mentioned above these images may be presented in real time or near real time as the images are captured processed to add virtual objects and displayed with the virtual objects as quickly as possible. Presentation module is also utilizable to present user interfaces AR objects or any such information generated in response to decoding an optical barcode such as optical barcode discussed below. In various embodiments the presentation module presents or causes presentation of additional information e.g. visually displaying information on a screen acoustic output haptic feedback . The process of interactively presenting information is intended to include the exchange of information between a particular device and the user. The user may provide input to interact with the user interface in many possible manners such as alphanumeric point based e.g. cursor tactile or other input e.g. touch screen tactile sensor light sensor infrared sensor biometric sensor microphone gyroscope accelerometer or other sensors . The presentation module provides many other user interfaces to facilitate functionality described herein. The term presenting as used herein is intended to include communicating information or instructions to a particular device that is operable to perform presentation based on the communicated information or instructions. This may include both output on a screen as well as projection of an image onto a user s eye.

The configuration module may be used to accept and manage user selection of system options. This may include options to select various augmented reality selections including enabling augmented reality and requesting certain types of augmented reality information to be provided or triggered based on user inputs or input based triggers. For example configuration module may include a setting provided by a user to automatically present information about certain types of locations when the locations are identified in an image based location system or a map positioning system. Configuration module may also accept user settings to automatically provide direction information in an augmented reality image when direction input triggers are received via communication module . In other embodiments any other triggers for implementing image based location or augmented reality images may be managed by configuration module . For example the configuration module extracts and analyzes candidate shape features or candidate contour characteristics from image data of the image received from the user device e.g. the client devices when a system includes such analysis as a trigger for display of augmented reality images. The configuration module determines satisfaction of various rules or criteria associated with the extracted candidate shape features. The configuration module compares the extracted candidate shape features with reference shape features of the custom graphic or another reference image. The configuration module can employ a wide variety of schemes and techniques to extract candidate shape features from the image data of the image and subsequently trigger display of augmented reality images.

The alignment module provides image processing functionality to determine and verify an alignment of the image data captured by an image sensor and the virtual objects placed into the image. In some embodiments alignment module may access or generate a computer model of the environment and may use the computer model to insert virtual items into an image based on the computer model of the environment. In some embodiments alignment module may perform threshold or rule checks to verify that virtual items displayed in augmented reality images meet certain quality metrics to provide an acceptable user experience. This may include verifying that a virtual object does not move in unexpected ways with respect to objects in an image that images captured by an image sensor are sufficiently stable over time to enable augmented reality functions or other such metrics. In some embodiments the alignment module extracts spatial attributes from the image data. In various embodiments the spatial attributes include at least one of position orientation scale or other spatial aspects of objects in images. The alignment module determines an alignment of the image objects based on the spatial attributes e.g. a particular orientation . In an example the alignment module can determine an alignment including position and orientation based on the spatial attributes and generate a transformed image according to the alignment.

The virtual item module provides functionality to generate images associated with virtual items. In some embodiments this may include graphics information related to virtual location markers virtual direction arrows or virtual items or objects. In some embodiments this may include graphics information for inserting mobile virtual objects into video e.g. virtual animals robots dinosaurs video display etc. . In some embodiments for each virtual object presentation rules may be stored in virtual item module and used by other modules to verify that virtual objects may be inserted into image data with sufficient output quality.

The analysis module provides functionality to perform a variety of image processing operations. Such operations may include image processing operations to identify key points in an image and to match two dimensional fa ade data against portions of an image to identify a match. For example in some embodiments analysis module may accept an image and identify building corners or other key points in the image that may contain two dimensional pattern data as part of a fa ade. Analysis module may then take fa ade data from a model and match the portion of the image to a building fa ade model included in the fa ade data. In some embodiments if no match is found an analysis module operating on a client device may request additional information or additional processing by an analysis module operating on a remote server such as a third party server or a server that is part of a social messaging system .

The map positioning system provides map data including associations between map locations and fa ade data associated with buildings in a location or any other such information in a system. Map positioning system may also interface with remote servers or systems which may provide this information. Additional aspects of a map positioning system are discussed below with respect to .

Image based location system may comprise modules to accept street view images from any number of sources and analyze the images to generate fa ade data. Such fa ade data may include two dimensional estimates of certain patterns on a building as well as key point information for simple building locations such as the locations of building corners or corners of two dimensional fa ade patterns on a building. In some embodiments information from multiple images may be used to generate fa ade data for a single building. Such information from multiple images may be used to match colors in different lighting situations or to match minor changes over time to a building fa ade. In some embodiments specialized image and location capture equipment may be used to generate information about building locations keypoints of buildings and building fa ade data with high accuracy in order to build a database of outdoor images of buildings in order to provide accurate references for image based location systems. Capturing locations of building corners for example with high accuracy e.g. accuracy on the order of single digit centimeters or millimeters provides a basis for an image based location estimate for a camera position with similar errors. In some embodiments determining a camera position within a few centimeters e.g. 5 cm is sufficient to provide augmented reality presentation with a low chance of clear errors in the output images that break the reality illusion of augmented reality images.

In some embodiments image based location system may be distributed over a local client device and a remote server with low information fa ade models e.g. models with low resolution and or low color two dimensional fa ade data and a small number of keypoints stored locally on a device for regularly visited locations expected future travel locations or for buildings which the system believes might be near a device in the future. High information models e.g. high resolution high color information and or high numbers of three dimensional keypoints may be stored remotely and used when local compact fa ade models fail. Image based location system may manage application of fa ade data and models to match portions of captured images using analysis module . Once a match is found using analysis module location information related to a building matching fa ade data or keypoints in a building may be used to calculate a relative position of the camera perspective in a captured image. This relative position may be used to determine an absolute position based on the position of building keypoints or other absolute position information that is part of a fa ade or other model for a building associated with fa ade data.

Further still in some embodiments the calculations performed to match fa ade data from a database to a portion of an image may also be used to generate two dimensional augmented reality objects that match the fa ade surface. illustrates an example using two dimensional augmented reality data for augmented reality sticker objects. In a simplest example augmented reality destination object may simply be a two dimensional triangle associated with a three dimensional set of geolocation coordinates. Regardless of which angle such a two dimensional sticker object is viewed from it will always be seen as the same shape in an augmented reality image. Similarly an emoji sticker object may be used in certain embodiments. In such embodiments a user may access a simple interface to graphically select an emoji and place the emoji in an image so that the augmented reality system associates the emoji sticker object with another object in the image or with a set location. AR object for example is a two dimensional emoji sticker object attached to a destination location. AR object will float above the destination location within the AR image and any related AR images. If an AR object is attached to an object that moves such as a book or a space above a person the AR object may retain a relative position with respect to the attached object or a relative position that is a set space above the attached object.

In some such embodiments an AR sticker object may be attached to a building with associated fa ade data in an augmented reality system. AR fa ade sticker object is an emoji graphic used as an augmented reality object in image . As a perspective of an augmented reality view changes the perspective of AR fa ade sticker object changes to maintain the appearance that AR fa ade sticker object is attached to the building wall. In order to eliminate redundant calculations the perspective data about first structure fa ade portion may be used to calculate the perspective required for AR fa ade sticker object since they are in the same plane of the augmented reality space.

In other embodiments AR objects such as AR object may be 3D objects such that an AR object like AR object could be a sphere with a face on one side. Another such AR object could be any such 3D version of an emoji face animal or other object. In one embodiment an AR object could be a 3D tree covered with colored lights in a varying pattern. Any such AR object may also include animations. For example the lights on the tree could sparkle and blink in different patterns. Such an AR object could further be placed or move such that the tree with blinking lights could spin while moving through the air. In some embodiments the system is able to generate and place an associated sticker version of such a 3D AR object. This may be done with a 2D projection of the 3D object at a user viewing elevation or a system standard e.g. 0 15 degree etcetera elevation. Such a generated 2D sticker object can then be placed on a wall or fa ade using the calculations previously performed by the system as described within the context of various other embodiments herein. If multiple 2D sticker objects are generated from different viewing angles the stickers may have different patterns due to the different viewpoints. The 2D sticker versions may have fixed coloring or may maintain some of the animations of the 3D object. For example the lights on a 2D tree may sparkle and blink similar to those in the corresponding 3D AR object. Thus as described herein AR objects may include a variety of faces emoji animals custom user made objects or any other such possible AR objects. Such AR objects may have associated animations sounds transformations and any other such AR object functionality.

Some embodiments described herein can then use communication data or a set of pictogram data stored at the device to generate augmented reality images with these sticker objects. One embodiment involves receiving or accessing at the device two dimensional augmented reality data for a sticker object determining an augmented realty placement of the sticker object as positioned on a plane with the one or more fa ade surface locations using the expected perspective for the low resolution two dimensional fa ade pattern as a sticker object perspective and generating an augmented reality image comprising the sticker object on the plane with the one or more fa ade surface locations based on the expected perspective.

The two dimensional augmented reality data can in some embodiments represent an emoji object selected by a user input from a set of augmented reality system pictograms. A user interface within a messaging or augmented reality system may display a set of pictograms or emoji images on an interface similar to the interface of and then enable a user to associate a location with the selection to generate an augmented reality object within an environment in order to generate augmented reality images such as augmented reality image .

Even with the limitations of two dimensional fa ade matching comparing fa ade data for many buildings against multiple facades within an image is a processor intensive process. Thus as described above an initial location estimate may limit the number of matching procedures needed. A GPS network assisted location system or other device sensors and systems for location determination may thus be used to provide an initial location estimate. Such estimates may have errors of a few meters or tens of meters. illustrates aspects of a mapping system used to generate an initial location estimate and to identify fa ade data for buildings in an area. Geolocation data derived from such information may be used however to identify an environment expected to be captured by an image sensor. The larger the error the larger the number of buildings identified in the environment and possible fa ade data to be matched against a captured image. In some embodiments position data may also be used to limit the possible buildings based on a direction associated with an image sensor. As shown by an environment may include a first building . A database or image based location system may determine the possible buildings within environment including first building and may have associated fa ade data for a wall first fa ade of first building . This fa ade data may then be compared with an image associated with geolocation data .

As illustrated by any fa ade information for a two dimensional surface in a known location may be used in various embodiments described herein. In some embodiments murals or wall paintings may be used as fa ade data while in other embodiments posters or advertisements in known positions may be used. In some embodiments codes logos signs or other two dimensional objects or objects that can be reliably estimated as two dimensional for matching purposes may be used. This includes structures other than buildings including billboards sides of opens structures or any other fa ade placement that is expected to be stationary over at least a set amount of time.

In for example a custom graphic in an image portion provides alignment information that may be further matched with fa ade data about the custom graphic. Fa ade data may also include position and elevation information about the custom graphic that may be used in matching and in determining an image sensor position based on the size and shape of the graphic and other elements of a fa ade in a portion of a captured image. Such a graphic may also be used in placement of two dimensional objects such as emoji stickers within a virtual environment.

In the diagram a scene illustrates a facade that includes an optical barcode and a user . It will be appreciated that the optical barcode can be displayed in a variety of manners such as on a user device display a computer display woven or otherwise affixed to an article of clothing or another product or included in a variety of printed items.

In an example embodiment the user device captures an image of the poster that includes the optical barcode . The augmented reality system receives the image data representing the image from the user device . In this example embodiment the augmented reality system is included in the user device e.g. an application executing on a smart phone of the user although in other example embodiments the augmented reality system can reside on a server e.g. a server of the social messaging system that is communicatively coupled with the user device . The captured image may then be compared with fa ade data about poster to identify a position of an image sensor. This image sensor position may then be used to provide accurate placement of virtual objects in an AR scene.

Operation involves determining using a first positioning system a first position estimate for the device. Such a position system may include any combination of a GPS a network assisted location system such as a secure user plane location SUPL system position systems based on sensors of a device such as accelerometer or gyroscope tracking systems or any other such initial tracking method.

Then based on the first position estimate operation involves accessing a set of structure facade data describing one or more structure facades associated with the first position estimate. As described above in some embodiments a database of street images and fa ade data may be generated using specialized equipment. In other embodiments large amounts of user data may be used to gather images and many data points regarding fa ade data and building key points. The fa ade data may include different types and combinations of data. In some embodiments fa ade data includes absolute location information for one or more points on the fa ade that are clearly identifiable. Such points include building corners or clearly defined patterns or image corners. Fa ade data may additionally include two dimensional image patterns that are part of a building fa ade such as data versions of artwork signage logos words windows arches doorways or other sufficiently two dimensional portions of a building side.

In some embodiments images captured for use with augmented reality systems may be provided as feedback to generate and update fa ade data while a user is using the system. In order to provide privacy in such situations in some embodiments the image data captured by users may be processed to eliminate or blur users or may have all data below user height level removed with only building or fa ade portions of images transferred to a server system for use in generating or updating fa ade data using map building or environment models.

Operation then involves capturing by an image sensor of the device a first image of an environment. Such an image sensor may be any camera device sensor or light sensor capable of capturing two dimensional information of a building and an environment. In some embodiments additional sensors may be present including multiple image sensors or sensors for capturing three dimensional data. Such embodiments may supplement the two dimensional analysis of fa ade data matched to fa ade portions of images as allowed by system resource limitations such as battery and processing power limitations.

Then at operation using the set of structure facade data a first structure facade portion of the first image of the environment is identified wherein the first structure fa ade portion matches first structure fa ade data of the set of structure fa ade data. Operation then involves calculating based at least in part on the first structure facade portion of the first image of the environment a second position estimate of the device.

In various embodiments the image data from the user device is received in response to a user initiated image capture a periodic monitoring of image data being detected by the optical sensor of the user device or a combination thereof. In some embodiments the image data represents an image or video being captured by the user device in substantially real time e.g. a live image feed from a camera sensor of a smart phone . In some embodiments elements of captured images may be used to initiate generation of AR images and an output of video enhanced with AR elements which also attempts to output the AR images as video in substantially real time. In embodiments where the image data comprises video image data the augmented reality system can analyze individual frames of the video or a combination of multiple frames of the video to detect and decode trigger elements or matched fa ade portions of images.

The matching portion of method may use various techniques for matching fa ade data with an image. In some embodiments combinations of edge detection in images may be compared against edges identified in fa ade data. In other embodiments candidate shapes for each building fa ade may be present in fa ade data and compared against image data. Some embodiments identify shape features such as contour lines or localized concentrations of color or shading of the image. In some embodiments a matching system extracts multiple candidate shape features from the image data. In some embodiments the candidate shape feature includes various shape feature data such as a position of the candidate shape feature relative to a boundary of the image a brightness of the candidate shape feature relative to the image an average color of the candidate shape feature and so forth. Limitation of the match to two dimensional fa ade data as described above increases match performance while limiting resource usage as described above when compared to three dimensional match processes.

In further example embodiments fa ade data stored locally on a mobile device includes a low resolution copy of the image. A matching resolution version of the captured image is created. Various image processing may be performed such as a blur e.g. a Gaussian blur function or another blur function and a thresholding to generate a modified low resolution image. The thresholding image process can include adjusting lighter colors e.g. as determined by a threshold or threshold range of the low resolution copy of the image to a white color and darker colors e.g. as determined by a threshold or threshold range of the low resolution copy of the image to a black color. Fa ade data may then be compared against a standardized image. In other embodiments fa ade data may include matching data customized for environmental factors present at the time an image is taken such as sun position cloud impact on an image or other environmental factors.

In some embodiments matching as described in operation may be performed through determining that a candidate portion of an image satisfies one or more shape feature criteria or rules associated with fa ade data.

In some embodiments the matching system can perform an image transform using the spatial attributes e.g. a de skew a rotation a scale or another type of image transform to improve detectability or readability of data encoded in a portion of the image. The particular image transforms used to identify a match may further be used as part of the calculation of the second position estimate of the device in operation . In some embodiments an initial set of match calculations are performed in an operation and once a threshold match is completed subsequent calculations are performed to further limit error in the second position estimate by using additional refinements of image transforms including finer transform adjustments and match verification.

As described above with respect to in some embodiments an initial match and or position estimation using fa ade data stored locally on a mobile device may fail. This may be due to lighting unusual obstructions such as vehicles or tree growth blocking portions of a fa ade in an image or any other such image match failure particularly when low resolution and resource constrained matching operations are used at a mobile device.

Such an embodiment may involve calculating from the first position estimate and the one or more fa ade surface locations an expected perspective for the low resolution two dimensional fa ade pattern and processing the low resolution two dimensional fa ade pattern to generate a first perspective pattern. A determination may then be made at the mobile device that the first perspective pattern does not meet a threshold match level for the first image. A supplemental set of fa ade data may then be requested from a first server computer. This may be a third party resource requested to provide additional detailed information or analysis or may be a server of a system operating a portion of an augmented reality or image based matching system as described in . A supplemental set of fa ade data from the first server computer and used in identifying the first structure fa ade portion of the first image of the environment where the first structure fa ade portion as matching the first structure fa ade portion with the first structure fa ade data of the set of structure fa ade data is based on the supplemental set of fa ade data. In some such embodiments requesting the supplemental set of fa ade data from the first server computer involves communicating the first image of the environment to the first server computer and receiving a supplemental position estimate from the first server computer based on the first image.

In some embodiments particularly embodiments using remote resources via a network a delay may occur between matching of the image to fa ade data and a current time or a most recently captured image for a near real time augmented reality video or display. In such embodiments a system may track relative changes in movement of a device over time and may use the image based location to improve later sensor position estimates. This may be done by keeping a record of video frames and images or other sensor data and calculating forward a position from the image based estimate using any available data. In some embodiments an initial resource intensive matching may be performed remotely with subsequent matching and sensor location estimates performed locally using lower resource matching and estimation processes. In some such embodiments errors may be tracked and remote resources used periodically to update position estimates and reduce errors that may grow over time in calculations on a local mobile device.

Any above method may be repeated over time to further improve a position estimate with any number of subsequent estimates based on both a first image and subsequent images matched against fa ade data.

Further as described above in some such embodiments images may be captured by a first device such as a wearable device and local estimates performed on a paired device such as a smartphone. Such systems may also use remote server resources as described above.

Many varieties of applications also referred to as apps can be executed on the mobile device such as native applications e.g. applications programmed in Objective C Swift or another suitable language running on IOS or applications programmed in Java running on ANDROID mobile web applications e.g. applications written in Hypertext Markup Language 5 HTML5 or hybrid applications e.g. a native shell application that launches an HTML5 session . For example the mobile device includes a messaging app an audio recording app a camera app a book reader app a media app a fitness app a file management app a location app a browser app a settings app a contacts app a telephone call app or other apps e.g. gaming apps social networking apps biometric monitoring apps . In another example the mobile device includes a social messaging app such as SNAPCHAT that consistent with some embodiments allows users to exchange ephemeral messages that include media content. In this example the social messaging app can incorporate aspects of embodiments described herein.

Certain embodiments are described herein as including logic or a number of components modules or mechanisms. Modules can constitute either software modules e.g. code embodied on a machine readable medium or hardware modules. A hardware module is a tangible unit capable of performing certain operations and can be configured or arranged in a certain physical manner. In various example embodiments one or more computer systems e.g. a standalone computer system a client computer system or a server computer system or one or more hardware modules of a computer system e.g. a processor or a group of processors can be configured by software e.g. an application or application portion as a hardware module that operates to perform certain operations as described herein.

In some embodiments a hardware module can be implemented mechanically electronically or any suitable combination thereof. For example a hardware module can include dedicated circuitry or logic that is permanently configured to perform certain operations. For example a hardware module can be a special purpose processor such as a Field Programmable Gate Array FPGA or an Application Specific Integrated Circuit ASIC . A hardware module may also include programmable logic or circuitry that is temporarily configured by software to perform certain operations. For example a hardware module can include software executed by a general purpose processor or other programmable processor. Once configured by such software hardware modules become specific machines or specific components of a machine uniquely tailored to perform the configured functions and are no longer general purpose processors. It will be appreciated that the decision to implement a hardware module mechanically in dedicated and permanently configured circuitry or in temporarily configured circuitry e.g. configured by software can be driven by cost and time considerations.

Accordingly the phrase hardware module should be understood to encompass a tangible entity be that an entity that is physically constructed permanently configured e.g. hardwired or temporarily configured e.g. programmed to operate in a certain manner or to perform certain operations described herein. As used herein hardware implemented module refers to a hardware module. Considering embodiments in which hardware modules are temporarily configured e.g. programmed each of the hardware modules need not be configured or instantiated at any one instance in time. For example where a hardware module comprises a general purpose processor configured by software to become a special purpose processor the general purpose processor may be configured as respectively different special purpose processors e.g. comprising different hardware modules at different times. Software accordingly configures a particular processor or processors for example to constitute a particular hardware module at one instance of time and to constitute a different hardware module at a different instance of time.

Hardware modules can provide information to and receive information from other hardware modules. Accordingly the described hardware modules can be regarded as being communicatively coupled. Where multiple hardware modules exist contemporaneously communications can be achieved through signal transmission e.g. over appropriate circuits and buses between or among two or more of the hardware modules. In embodiments in which multiple hardware modules are configured or instantiated at different times communications between such hardware modules may be achieved for example through the storage and retrieval of information in memory structures to which the multiple hardware modules have access. For example one hardware module can perform an operation and store the output of that operation in a memory device to which it is communicatively coupled. A further hardware module can then at a later time access the memory device to retrieve and process the stored output. Hardware modules can also initiate communications with input or output devices and can operate on a resource e.g. a collection of information .

The various operations of example methods described herein can be performed at least partially by one or more processors that are temporarily configured e.g. by software or permanently configured to perform the relevant operations. Whether temporarily or permanently configured such processors constitute processor implemented modules that operate to perform one or more operations or functions described herein. As used herein processor implemented module refers to a hardware module implemented using one or more processors.

Similarly the methods described herein can be at least partially processor implemented with a particular processor or processors being an example of hardware. For example at least some of the operations of a method can be performed by one or more processors or processor implemented modules. Moreover the one or more processors may also operate to support performance of the relevant operations in a cloud computing environment or as a software as a service SaaS . For example at least some of the operations may be performed by a group of computers as examples of machines including processors with these operations being accessible via a network e.g. the Internet and via one or more appropriate interfaces e.g. an API . For example in some embodiments a smartphone determines a first position estimate for the device and captures by an image sensor of the device a first image of an environment.

Rather than accessing a set of structure facade data describing one or more structure facades associated with the first position estimate locally the smartphone may communicate the location to a cloud computing environment along with the image. In some embodiments the image may be compressed at the smartphone to conserve communication resources and decrease transmission time. In other embodiments user configurations or resource analysis performed within the system may select options for the use of cloud computing resources and image compression. In such an embodiment the cloud computing resources then operate to identify using the set of structure facade data and the image data from the smartphone a first structure facade portion of the first image of the environment wherein the first structure fa ade portion matches first structure fa ade data of the set of structure fa ade data. The cloud server resources may then also calculate based at least in part on the first structure facade portion of the first image of the environment a second position estimate of the device. This position estimate is then sent to the smartphone. Due to time delay between the image capture and receipt of the position estimate an error may occur between the position estimate and the current smartphone position. In such embodiments sensors at the smartphone such as accelerometers or image based motion estimates may be used to estimate a smartphone movement between the time of the image capture and receipt of the position estimate. The position estimate can then be uploaded based on both the position estimate from the cloud computing resources and the smartphone movement estimate.

In other embodiments fa ade based estimates may be performed both at the smartphone and at the cloud based computing resources. For example a smartphone may download a highly compressed set of fa ade data automatically based on a location of the smartphone. This compressed fa ade data may be updated as the smartphone moves. When an image is captured at the smartphone the smartphone can both perform an initial match of the image against the compressed fa ade data and also upload the image or a compressed version of the image to the cloud computing system. The cloud computing service may then use a more highly detailed version of the fa ade data or additional computing resources to estimate a smartphone location from the captured image. The results of this estimate may then be sent to the smartphone. The smartphone can then use the local fa ade based position estimate the cloud services fa ade based position estimate and the smartphone movement estimate together to generate an updated position estimate. In further embodiments where other position systems are used this data from global positioning systems network assisted positioning systems or any other such positioning systems can also be integrated with the fa ade based positioning estimate to generate a final position estimate for the smartphone.

The performance of certain of the operations may be distributed among the processors not only residing within a single machine but deployed across a number of machines. In some example embodiments the processors or processor implemented modules can be located in a single geographic location e.g. within a home environment an office environment or a server farm . In other example embodiments the processors or processor implemented modules are distributed across a number of geographic locations.

The modules methods applications and so forth described in conjunction with the figures above are implemented in some embodiments in the context of a machine and an associated software architecture. The sections below describe representative software architecture s and machine e.g. hardware architecture that are suitable for use with the disclosed embodiments.

Software architectures are used in conjunction with hardware architectures to create devices and machines tailored to particular purposes. For example a particular hardware architecture coupled with a particular software architecture will create a mobile device such as a mobile phone tablet device or so forth. A slightly different hardware and software architecture may yield a smart device for use in the internet of things. While yet another combination produces a server computer for use within a cloud computing architecture. Not all combinations of such software and hardware architectures are presented here as those of skill in the art can readily understand how to implement the invention in different contexts from the disclosure contained herein.

Frame additionally includes a left arm or temple piece and a second arm or temple piece coupled to the respective left and right end portions of the front piece by any suitable means such as a hinge not shown so as to be coupled to the front piece or rigidly or fixably secured to the front piece so as to be integral with the front piece . Each of the temple pieces and can include a first portion that is coupled to the respective end portion or of the front piece and any suitable second portion such as a curved or arcuate piece for coupling to the ear of the user. In one embodiment the front piece can be formed from a single piece of material so as to have a unitary or integral construction.

Glasses can include a computing device such as computer which can be of any suitable type so as to be carried by the frame and in one embodiment of a suitable size and shape so as to be at least partially disposed in one of the temple pieces and . In one embodiment as illustrated in the computer is sized and shaped similar to the size and shape of one of the temple pieces and and is thus disposed almost entirely if not entirely within the structure and confines of such temple pieces and . In one embodiment the computer can be disposed in both of the temple pieces . The computer can include one or more processors with memory wireless communication circuitry and a power source. In certain embodiments the computer comprises low power circuitry high speed circuitry and a display processor. Various other embodiments may include these elements in different configurations or integrated together in different ways.

The computer additionally includes a battery or other suitable portable power supply. In one embodiment the battery is disposed in one of the temple pieces or . In the glasses shown in the battery is shown as being disposed in left temple piece and electrically coupled using connection to the remainder of the computer disposed in the right temple piece . The one or more input and output devices can include a connector or port not shown suitable for charging a battery accessible from the outside of frame a wireless receiver transmitter or transceiver not shown or a combination of such devices.

Glasses include cameras . Although two cameras are depicted other embodiments contemplate the use of a single or additional i.e. more than two cameras. In various embodiments glasses may include any number of input sensors or peripheral devices in addition to cameras . Front piece is provided with an outward facing forward facing or front or outer surface that faces forward or away from the user when the glasses are mounted on the face of the user and an opposite inward facing rearward facing or rear or inner surface that faces the face of the user when the glasses are mounted on the face of the user. Such sensors can include inwardly facing video sensors or digital imaging modules such as cameras that can be mounted on or provided within the inner surface of the front piece or elsewhere on the frame so as to be facing the user and outwardly facing video sensors or digital imaging modules such as cameras that can be mounted on or provided with the outer surface of the front piece or elsewhere on the frame so as to be facing away from the user. Such sensors peripheral devices or peripherals can additionally include biometric sensors location sensors or any other such sensors. In additional embodiments similar elements may be presented as visors within helmet or google based systems in vehicle HUD displays or in any other such device.

In various implementations the operating system manages hardware resources and provides common services. The operating system includes for example a kernel services and drivers . The kernel acts as an abstraction layer between the hardware and the other software layers consistent with some embodiments. For example the kernel provides memory management processor management e.g. scheduling component management networking and security settings among other functionality. The services can provide other common services for the other software layers. The drivers are responsible for controlling or interfacing with the underlying hardware according to some embodiments. For instance the drivers can include display drivers camera drivers BLUETOOTH drivers flash memory drivers serial communication drivers e.g. Universal Serial Bus USB drivers WI FI drivers audio drivers power management drivers and so forth.

In some embodiments the libraries provide a low level common infrastructure utilized by the applications . The libraries can include system libraries e.g. C standard library that can provide functions such as memory allocation functions string manipulation functions mathematic functions and the like. In addition the libraries can include API libraries such as media libraries e.g. libraries to support presentation and manipulation of various media formats such as Moving Picture Experts Group 4 MPEG4 Advanced Video Coding H.264 or AVC Moving Picture Experts Group Layer 3 MP3 Advanced Audio Coding AAC Adaptive Multi Rate AMR audio codec Joint Photographic Experts Group JPEG or JPG or Portable Network Graphics PNG graphics libraries e.g. an OpenGL framework used to render in two dimensions 2D and three dimensions 3D in a graphic content on a display database libraries e.g. SQLite to provide various relational database functions web libraries e.g. WebKit to provide web browsing functionality and the like. The libraries can also include a wide variety of other libraries to provide many other APIs to the applications .

The frameworks provide a high level common infrastructure that can be utilized by the applications according to some embodiments. For example the frameworks provide various graphic user interface GUI functions high level resource management high level location services and so forth. The frameworks can provide a broad spectrum of other APIs that can be utilized by the applications some of which may be specific to a particular operating system or platform.

In an example embodiment the applications include a home application a contacts application a browser application a book reader application a location application a media application a messaging application a game application and a broad assortment of other applications such as a third party application . According to some embodiments the applications are programs that execute functions defined in the programs. Various programming languages can be employed to create one or more of the applications structured in a variety of manners such as object oriented programming languages e.g. Objective C Java or C or procedural programming languages e.g. C or assembly language . In a specific example the third party application e.g. an application developed using the ANDROID or IOS software development kit SDK by an entity other than the vendor of the particular platform may be mobile software running on a mobile operating system such as IOS ANDROID WINDOWS Phone or another mobile operating systems. In this example the third party application can invoke the API calls provided by the operating system to facilitate functionality described herein.

An augmented reality application may implement any system or method described herein including accessing map information processing image an fa ade data matching or any other operation described herein. Further in some embodiments messaging application and augmented reality application may operate together as part of an ephemeral messaging application. Such an ephemeral messaging application may operate to generate images allow users to add augmented reality elements to the images and communicate some or all of the images and or augmented reality data to another system user. After a deletion trigger has been met the sent data is communicated from the receiving user s system and may also be synchronized to delete the images and or augmented reality data from any server involved in communication of the ephemeral message that included the image and or the augmented reality data. In some embodiments the trigger for deletion of data from a receiving user s device may be a timer that indicates how long an augmented reality image is displayed for. In other embodiments the ephemeral messaging system may have set date and time triggers for deletion or deletion associated with a number of times that a receiving user has accessed the data.

For example in one embodiment a user may send a set of augmented reality data to another user via an ephemeral messaging system. The ephemeral messaging data may include an emoji sticker object attached to a geolocation. When a receiving user s device receives the ephemeral message the emoji will be available for viewing within an augmented reality system with limitations set by the ephemeral messaging system. After a limitation trigger has been met the emoji sticker will no longer be available for viewing. In other embodiments a user may select an ephemeral or non ephemeral status for such a message including augmented reality data such that a non ephemeral message including the data will wait for a selection from a receiving user to delete the augmented reality data and the augmented reality data that is part of the message may be stored on a communication server indefinitely.

The machine can include processors memory storage and I O components which can be configured to communicate with each other such as via a bus . In an example embodiment the processors e.g. a Central Processing Unit CPU a Reduced Instruction Set Computing RISC processor a Complex Instruction Set Computing CISC processor a Graphics Processing Unit GPU a Digital Signal Processor DSP an Application Specific Integrated Circuit ASIC a Radio Frequency Integrated Circuit RFIC another processor or any suitable combination thereof can include for example processor and processor that may execute instructions . The term processor is intended to include multi core processor that may comprise two or more independent processors sometimes referred to as cores that can execute instructions contemporaneously. Although shows multiple processors the machine may include a single processor with a single core a single processor with multiple cores e.g. a multi core processor multiple processors with a single core multiple processors with multiples cores or any combination thereof.

The memory storage can include a main memory a static memory or other memory storage and a storage unit both accessible to the processors such as via the bus . The storage unit and memory store the instructions embodying any one or more of the methodologies or functions described herein. The instructions can also reside completely or partially within the memory within the storage unit within at least one of the processors e.g. within the processor s cache memory or any suitable combination thereof during execution thereof by the machine . Accordingly the memory the storage unit and the memory of the processors are examples of machine readable media.

As used herein the term machine readable medium means a device able to store instructions and data temporarily or permanently and may include but is not be limited to random access memory RAM read only memory ROM buffer memory flash memory optical media magnetic media cache memory other types of storage e.g. Erasable Programmable Read Only Memory EEPROM or any suitable combination thereof. The term machine readable medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database or associated caches and servers able to store instructions . The term machine readable medium shall also be taken to include any medium or combination of multiple media that is capable of storing instructions e.g. instructions for execution by a machine e.g. machine such that the instructions when executed by one or more processors of the machine e.g. processors cause the machine to perform any one or more of the methodologies described herein. Accordingly a machine readable medium refers to a single storage apparatus or device as well as cloud based storage systems or storage networks that include multiple storage apparatus or devices. The term machine readable medium excludes signals per se.

The I O components can include a wide variety of components to receive input provide output produce output transmit information exchange information capture measurements and so on. The specific I O components that are included in a particular machine will depend on the type of machine. For example portable machines such as mobile phones will likely include a touch input device or other such input mechanisms while a headless server machine will likely not include such a touch input device. It will be appreciated that the I O components can include many other components that are not shown in . The I O components are grouped according to functionality merely for simplifying the following discussion and the grouping is in no way limiting. In various example embodiments the I O components can include output components and input components . The output components can include visual components e.g. a display such as a plasma display panel PDP a light emitting diode LED display a liquid crystal display LCD a projector or a cathode ray tube CRT acoustic components e.g. speakers haptic components e.g. a vibratory motor resistance mechanisms other signal generators and so forth. The input components can include alphanumeric input components e.g. a keyboard a touch screen configured to receive alphanumeric input a photo optical keyboard or other alphanumeric input components point based input components e.g. a mouse a touchpad a trackball a joystick a motion sensor or other pointing instruments tactile input components e.g. a physical button a touch screen that provides location and force of touches or touch gestures or other tactile input components audio input components e.g. a microphone and the like.

In further example embodiments the I O components can include biometric components motion components environmental components or position components among a wide array of other components. For example the biometric components can include components to detect expressions e.g. hand expressions facial expressions vocal expressions body gestures or eye tracking measure biosignals e.g. blood pressure heart rate body temperature perspiration or brain waves identify a person e.g. voice identification retinal identification facial identification fingerprint identification or electroencephalogram based identification and the like. The motion components can include acceleration sensor components e.g. an accelerometer gravitation sensor components rotation sensor components e.g. a gyroscope and so forth. The environmental components can include for example illumination sensor components e.g. a photometer temperature sensor components e.g. one or more thermometers that detect ambient temperature humidity sensor components pressure sensor components e.g. a barometer acoustic sensor components e.g. one or more microphones that detect background noise proximity sensor components e.g. infrared sensors that detect nearby objects gas sensor components e.g. machine olfaction detection sensors gas detection sensors to detect concentrations of hazardous gases for safety or to measure pollutants in the atmosphere or other components that may provide indications measurements or signals corresponding to a surrounding physical environment. The position components can include location sensor components e.g. a GPS receiver component altitude sensor components e.g. altimeters or barometers that detect air pressure from which altitude may be derived orientation sensor components e.g. magnetometers and the like.

Communication can be implemented using a wide variety of technologies. The I O components may include communication components operable to couple the machine to a network or devices via a coupling and a coupling respectively. For example the communication components include a network interface component or other suitable device to interface with the network . In further examples communication components include wired communication components wireless communication components cellular communication components Near Field Communication NFC components BLUETOOTH components e.g. BLUETOOTH Low Energy WI FI components and other communication components to provide communication via other modalities. The devices may be another machine or any of a wide variety of peripheral devices e.g. a peripheral device coupled via a USB .

Moreover the communication components can detect identifiers or include components operable to detect identifiers. For example the communication components can include Radio Frequency Identification RFID tag reader components NFC smart tag detection components optical reader components e.g. an optical sensor to detect one dimensional bar codes such as a Universal Product Code UPC bar code multi dimensional bar codes such as a Quick Response QR code Aztec Code Data Matrix Dataglyph MaxiCode PDF417 Ultra Code Uniform Commercial Code Reduced Space Symbology UCC RSS 2D bar codes and other optical codes acoustic detection components e.g. microphones to identify tagged audio signals or any suitable combination thereof. In addition a variety of information can be derived via the communication components such as location via Internet Protocol IP geo location location via WI FI signal triangulation location via detecting a BLUETOOTH or NFC beacon signal that may indicate a particular location and so forth.

In various example embodiments one or more portions of the network can be an ad hoc network an intranet an extranet a virtual private network VPN a local area network LAN a wireless LAN WLAN a wide area network WAN a wireless WAN WWAN a metropolitan area network MAN the Internet a portion of the Internet a portion of the Public Switched Telephone Network PSTN a plain old telephone service POTS network a cellular telephone network a wireless network a WI FI network another type of network or a combination of two or more such networks. For example the network or a portion of the network may include a wireless or cellular network and the coupling may be a Code Division Multiple Access CDMA connection a Global System for Mobile communications GSM connection or other type of cellular or wireless coupling. In this example the coupling can implement any of a variety of types of data transfer technology such as Single Carrier Radio Transmission Technology 1 RTT Evolution Data Optimized EVDO technology General Packet Radio Service GPRS technology Enhanced Data rates for GSM Evolution EDGE technology third Generation Partnership Project 3GPP including 3G fourth generation wireless 4G networks Universal Mobile Telecommunications System UMTS High Speed Packet Access HSPA Worldwide Interoperability for Microwave Access WiMAX Long Term Evolution LTE standard others defined by various standard setting organizations other long range protocols or other data transfer technology.

The instructions can be transmitted or received over the network using a transmission medium via a network interface device e.g. a network interface component included in the communication components and utilizing any one of a number of well known transfer protocols e.g. HTTP . Similarly the instructions can be transmitted or received using a transmission medium via the coupling e.g. a peer to peer coupling to devices . The term transmission medium shall be taken to include any intangible medium that is capable of storing encoding or carrying the instructions for execution by the machine and includes digital or analog communications signals or other intangible medium to facilitate communication of such software.

Throughout this specification plural instances may implement components operations or structures described as a single instance. Although individual operations of one or more methods are illustrated and described as separate operations one or more of the individual operations may be performed concurrently and nothing requires that the operations be performed in the order illustrated. Structures and functionality presented as separate components in example configurations may be implemented as a combined structure or component. Similarly structures and functionality presented as a single component may be implemented as separate components. These and other variations modifications additions and improvements fall within the scope of the subject matter herein.

Although an overview of the inventive subject matter has been described with reference to specific example embodiments various modifications and changes may be made to these embodiments without departing from the broader scope of embodiments of the present disclosure. Such embodiments of the inventive subject matter may be referred to herein individually or collectively by the term invention merely for convenience and without intending to voluntarily limit the scope of this application to any single disclosure or inventive concept if more than one is in fact disclosed.

The embodiments illustrated herein are described in sufficient detail to enable those skilled in the art to practice the teachings disclosed. Other embodiments may be used and derived therefrom such that structural and logical substitutions and changes may be made without departing from the scope of this disclosure. The Detailed Description therefore is not to be taken in a limiting sense and the scope of various embodiments is defined only by the appended claims along with the full range of equivalents to which such claims are entitled.

As used herein the term or may be construed in either an inclusive or exclusive sense. Moreover plural instances may be provided for resources operations or structures described herein as a single instance. Additionally boundaries between various resources operations modules engines and data stores are somewhat arbitrary and particular operations are illustrated in a context of specific illustrative configurations. Other allocations of functionality are envisioned and may fall within a scope of various embodiments of the present disclosure. In general structures and functionality presented as separate resources in the example configurations may be implemented as a combined structure or resource. Similarly structures and functionality presented as a single resource may be implemented as separate resources. These and other variations modifications additions and improvements fall within a scope of embodiments of the present disclosure as represented by the appended claims. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense.

