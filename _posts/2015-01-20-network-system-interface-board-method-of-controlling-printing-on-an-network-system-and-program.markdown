---

title: Network system, interface board, method of controlling printing on an network system, and program
abstract: A client terminal includes a web page acquisition unit that acquires from a web application server a web page embedding a print control script that operates on a web browser and controls printing related to the web page, a display unit that displays the acquired web page as a displayed web page, a drawing process unit that accepts an input operation on the displayed web page and draws a result of the input operation in a specific drawing area, a print data generation unit that generates print data by converting image data written in the drawing area to a form enabling processing by a printer according to the print control script as a result of a print operation performed on the displayed web page, and a print command unit that commands the printer to print the print data according to the print control script.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09235363&OS=09235363&RS=09235363
owner: Seiko Epson Corporation
number: 09235363
owner_city: Tokyo
owner_country: JP
publication_date: 20150120
---
This application is a continuation of and claims priority under 35 U.S.C 120 on application Ser. No. 13 978 731 filed Jul. 9 2013 which is a U.S. national phase application of PCT JP2012 053584 filed Feb. 8 2012 which claims priority under 35 U.S.C. 119 on Japanese Patent Application Nos. 2011 027533 2011 028293 and 2011 032858 filed Feb. 10 2011 Feb. 14 2011 and Feb. 18 2011 respectively. The content of each such related application is incorporated by reference herein in its entirety.

The present invention relates to a client terminal of a network system that controls a printer over a network to a method of operating a client terminal in connection with controlling printing on a network system and to a program.

Printers and other devices are commonly used connected to a computer over a network. In order to use these devices device drivers to control them are required. These device drivers are usually installed to the computer connected to the devices. See for example patent document 1. 

However because device driver operation depends upon the operating system OS of the computer on which the device driver is installed the user must install the device driver appropriate to the OS of the user s computer. This is difficult for users that are unfamiliar with computers however because of the difficulty of determining the version of the installed OS and installing software device drivers . When the computer is replaced the device driver must also be installed again. Device manufacturers must also develop device drivers that are compatible with different computer operating systems thus increasing the cost of development.

With consideration for the foregoing problem an object of the present invention is to provide a client terminal of a network system a method of operating a client terminal in connection with controlling printing on a network system and a program for realizing the method so as to enable controlling a printer without requiring a printer driver that is dependent upon the computer environment.

A client terminal accesses a web application server on which a web application operates using a web browser. The client terminal comprises a web page acquisition unit that acquires from the web application server a web page embedding a print control script that operates on the web browser and controls printing related to the web page a display unit that displays the acquired web page as a displayed web page a drawing process unit that accepts an input operation on the displayed web page and draws a result of the input operation in a specific drawing area a print data generation unit that generates print data by converting image data written in the drawing area to a form enabling processing by a printer according to the print control script as a result of a print operation performed on the displayed web page and a print command unit that commands the printer to print the print data according to the print control script.

In some embodiments the printer is specified in the print control script and the print command unit issues a print command to the printer specified by the print control script.

In some embodiments the client terminal further includes a device list acquisition unit that acquires a device list showing a list of usable printers from an external source according to the print control script and a device selection unit that selects the printer from the device list according to the print control script.

In some embodiments the client terminal further includes an identification information input window display unit that displays an identification information input window for inputting identification information identifying a user of the client terminal an identification information transmission unit that sends the identification information input by an input operation to the identification information input window to the web application server a device list acquisition unit that acquires the web page by the web page acquisition unit when user authentication succeeds and acquires the device list from the web application server according to the print control script embedded in the acquired web page and a device selection unit that selects the printer from the acquired device list according to the print control script.

In some embodiments the client terminal further includes an identification information input window display unit that displays an identification information input window for inputting identification information identifying a user of the client terminal. In this case the print command unit executes a process that sends the print data to be printed linked to the identification information input by an input operation to the identification information input window to a device server according to the print control script as a print command for the printer.

In some embodiments the print command unit issues a print command to the printer specified by externally generated and authenticated printer identification information according to the print control script.

In some embodiments the print data generation unit temporarily stores the generated print data in a specific storage area and the print command unit commands the printer to print the print data in the specific storage area after all print data is stored in the specific storage area.

In some embodiments the display unit displays a change page confirmation window for selecting whether or not to change the web page according to the print control script if a change page event that changes the web page occurs during transmission of the print data in conjunction with a print command from the print command unit.

In some embodiments the print command unit interrupts print data transmission when changing the web page is executed during transmission of the print data according to a print command and the display unit displays a message indicating that the print data transmission was interrupted.

In some embodiments the print command unit executes a print data transmission process accompanying the print command parallel to a change page confirmation window display process.

In some embodiments the print control unit executes a printing process based on the print data after all of the print data to be printed is received by the printer.

In some embodiments the print data generation unit segments the image data into blocks of a data size that can be transmitted in a single data communication and generates segmented print data that converts each segmented image data block to a form enabling printing by the printer and the print command unit transmitting the print data according to a print command in segmented print data units.

In some embodiments the client terminal further includes a print setting unit that configures print settings of the printer according to the print control script.

In some embodiments the client terminal further includes a device management server that communicates with the client terminal over the network and centrally manages printer status a device state transmission unit that acquires device state information indicating at least the printer status and sends the acquired device state information to a device management server according to the print control script.

Another aspect of the invention entails a method of operating a client terminal in connection with controlling printing on a network system. The method comprises acquiring by the client terminal from a web application server a web page embedding a print control script that operates on a web browser and controls printing related to the web page displaying the acquired web page accepting an input operation on the displayed web page and drawing a result of the input operation in a specific drawing area generating print data by converting image data written in the drawing area to a form enabling processing by a printer according to the print control script as a result of a print operation performed on the displayed web page and commanding the printer to print the print data according to the print control script.

The method may further include generating a device list based on device information acquired by a device server and receiving the generated device list by the client terminal executing a device list acquisition step that acquires the device list from the device server according to the print control script and selecting the printer from the device list according to the print control script. Here the commanding step issues a print command to the printer selected in the device selecting step according to the print control script.

The method may further include displaying an identification information input window for inputting identification information sending the identification information input by an input operation to the identification information input window to the web application server acquiring the web page by the web page acquiring step when user authentication by the user authentication step succeeds and acquiring the device list from the web application server according to the print control script embedded in the acquired web page and selecting the printer from the acquired device list according to the print control script. Here the print commanding step issues a print command to the printer selected by the device selection step according to the print control script.

The method may further include executing an identification information input window display step that displays an identification information input window for inputting identification information identifying a user of the client terminal. Here the print commanding step executes a process that sends the print data to be printed linked to the identification information input by an input operation to the identification information input window to the device server according to the print control script as a print command for the printer.

Another aspect of the invention is a non transitory computer readable medium that stores a program that causes a computer to execute the steps of any of the methods described above.

Such arrangements enable printing a desired image controlling printing by the printer from a printer by means of a print control script embedded on a web page. More specifically because printing by the printer is controlled by a script that runs on a web browser operates inside the web page installing a web browser on the client terminal is sufficient and there is no need to install a printer driver on each client terminal as in the related art. In addition there is also no need for the printer manufacturer to develop plural different printer drivers for different operating systems and the related development cost can be reduced. Yet further because there is no need to provide a special application execution environment on the printer side device development and manufacturing costs can be reduced.

Furthermore because a web browser is normally installed on modern client terminals computers including personal computers and smartphones even users that are unfamiliar with computers can easily use a printer without being concerned about the operating environment such as the operating system of the terminal being used.

In arrangements that enable presetting the output printer even users that are unfamiliar with computers can easily use a printer without being concerned about specifying the output printer if for example the system provider presets the output printer in the print control script.

In some aspects of the invention when one or more printers are connected a list of usable printers device list is acquired by the print control script embedded in the web page and the printer to be used for output can be selected specified from the device list and the desired images can be printed. More specifically selecting a printer and running a printing process are enabled by simply installing a web browser on the client terminal without installing a printer driver on each client terminal as in the related art. Installing printer specific functions on the client terminal side web browser side is also not necessary.

When one or more printers is connected the web application server in these configurations performs user authentication and only users allowed by authentication for which authentication was successful can select a printer from a printer list device list acquired by the print control script embedded in the web page and print desired images. More specifically printer users can be authenticated and only permitted users enabled to select a usable printer and print if a web browser that acquires displays a web page is installed on the client terminal and there is no need to install a printer driver on each individual client terminal as in the related art.

When more than one printer is connected these configurations enable inputting identification information for identifying a user using the print control script embedded in the web page and enable printing from a printer linked to the user if authentication based on the input identification information is successful. More specifically printing can be enabled while limiting the users that can use a printer if a web browser that acquires displays a web page is installed on the client terminal and there is no need to install a printer driver on each individual client terminal as in the related art.

When one or more printers are connected and printing is executed according to a print control script embedded in a web page these configurations enable authenticating the connected printers and printing only from printers for which authentication succeeded authentication was allowed . More specifically printing is possible while limiting the printers used for output if a web browser that acquires displays a web page is installed on the client terminal and there is no need to install a printer driver on each individual client terminal as in the related art. This can be used for example when restricting the printers that can be used for printing is desirable when prohibiting printing on any printer is desirable such as when printing confidential information or printing tickets.

Some configurations enable high speed printing by performing the print data such as raster image commands generation process and the print data transmission process separately not in parallel . Blemishes in the printed image can also be suppressed better in a low performance client terminal than when the print data generation process and print data transmission process are executed as parallel processes.

In some configurations a confirmation window for confirming selecting whether or not to actually change the page when the web page changes is displayed. Because the invention achieves the function of a printer driver with a script print control script the print control script will disappear and printing be interrupted if the web page changes during the printing process. As a result by displaying a confirmation screen when an event that changes the web page occurs the operator user can be prevented from unintentionally changing the web page.

Some configurations can inform the user that the printing process was interrupted. For example the user may not be aware that the web page changed due to an unintentional operation by the user the print control script disappeared and the printing process was interrupted but this aspect of the invention prevents this by reporting interruption of the printing process.

In arrangements that involve transmitting the print data and displaying the change page confirmation window in parallel in multiple threads the printing process can continue while the change page confirmation window is displayed to select whether or not to change the web page.

In some arrangements the printer starts printing after all print data has been received. When a large amount of print data is received for printing for example this prevents the print control script from disappearing and the printing process stopping in the middle as a result of the web page changing while the print data is being received.

Some configurations segment and send the print data in data blocks sized to enable transmission in a single data communication. As a result when a large amount of print data is sent for printing for example this prevents the print control script from disappearing and print data transmission from being interrupted midway as a result of the web page changing during print data transmission.

Some arrangements enable configuring the print settings of the printer according to the print control script. More specifically printer settings can be checked or the user can desirably change the printer settings without installing a printer driver on each client terminal as in the related art.

Note that the printer settings include for example the paper size number of copies print quality color BW printing and image processing method.

The print settings made changed by the user may also be stored in a specific storage area. In this case the stored print settings can be read the next time something is printed eliminating the need for the user to change the print settings every time.

In some arrangements the device management server can centrally manage the status of all usable printers. As a result the system administrator or device manufacturer for example can quickly take action when a problem occurs with a printer. Metered billing according to actual printer use for example is also possible.

The invention thus enables controlling a printer without requiring a printer driver that depends on the computer environment.

A network system an interface board a method of controlling printing on a network system and a program according to preferred embodiments of the invention are described below with reference to the accompanying figures. A network system according to the invention is a system that executes a printing process using a web browser without installing a dedicated printer driver on the client terminal.

The web application server has the hardware configuration of a general computer in addition to a control unit storage unit and communication unit . The main parts of the control unit include a CPU central processing unit ROM read only memory and RAM random access memory . The CPU runs a program stored in ROM and controls operation of the web application server . ROM stores control data and a control program enabling the CPU to execute various processes. RAM is used as working memory when the CPU executes different processes. An HTTP server and web application are also stored in the storage unit .

The communication unit is an interface for communicating with the client terminal web browser . Communication between the web application server and client terminal is controlled by the HTTP server using Hypertext Transfer Protocol HTTP . More specifically the web application server receives an HTTP request from the client terminal web browser and based on the URL Uni form Resource Locator contained in the HTTP request returns a web page provided by the web application to the client terminal .

As described in detail below in addition to a page control script JavaScript for controlling the web page the web page includes a print control script JavaScript for controlling printing related to the web page and the client terminal executes a printing process by running the print control script on the web browser on the web page .

The printer has a control unit storage unit print mechanism and communication unit as main parts. The control unit has a CPU and RAM as main parts. The CPU runs programs stored in the storage unit and controls printer operation. RAM is used as working memory for the CPU to execute processes. The storage unit is for example nonvolatile memory such as flash ROM and stores control data and control programs enabling the CPU to run the processes. The storage unit also stores an HTTP server .

The print mechanism includes a paper feed mechanism printhead and paper cutting mechanism and performs a printing operation as controlled by the CPU. The printing method is not limited and could be an inkjet or laser printing method for example.

The communication unit is an interface for communicating with the client terminal . Communication between the printer and client terminal web browser is controlled by the HTTP server using HTTP. More specifically when print data is sent from the client terminal to the service endpoint address a URI Uniform Resource Identifier such as http x.x.x.x assigned to the printer the printer control unit receives the print data and controls the print mechanism to print based on the received print data.

The client terminal includes a control unit storage unit display unit operating unit and communication unit as main parts. The control unit has a CPU and RAM as main parts. The CPU runs a program stored in storage unit and controls client terminal operation. RAM is used as working memory for the CPU to run processes. The storage unit is for example a HDD hard disk drive or nonvolatile memory such as flash ROM and stores control data and control programs used by the CPU to execute different processes. The storage unit also stores a web browser .

The display unit displays a web page acquired downloaded by the web browser in a web browser window and displays configuration windows and windows for reporting different events accompanying operations performed in the web browser . These windows could be displayed in the web page displayed by the web browser or displayed in a new web page . The operating unit is an operating means for performing input operations such as inputting text and drawing figures and making selection decision operations and printing operations in a web page displayed by the web browser . Note that the display unit and operating unit may be rendered separately or rendered in unison by for example using a touch screen panel as the display unit .

The communication unit is an interface for communication with the web application server and printer and the client terminal control unit uses the web browser to communicate with the web application server and printer .

The web browser is a simple browser standard browser with no plugin modules and the client terminal control unit uses this web browser to access the web application server and receive web pages provided by the web application .

The web page includes a page control script and print control script as described above and when user input is received by the web browser the page control script draws the result of the input operation text or image input result in a specific screen area. This drawing area is a drawing canvas HTML5 canvas element defined set by the page control script and the input content is drawn in this canvas area and stored as image data.

When the user issues a print command such as by pressing a print button on the web page the web browser runs the print control script embedded in the web page converts the image data written in the drawing area to create print data and sends the print data to the printer the service endpoint at the printer . The service endpoint address of the printer to which the print data is sent is specified in the print control script .

Note that when a plurality of printers are connected a printer service endpoint address that differs according to the print control script contained in the web page could be specified according to the type of the web page such as the content provided by the web page . More specifically different output printers could be specified according to the type of web page . The client terminal may be any computer on which the web browser operates and may be a mobile terminal such as a cellular telephone or smartphone personal computer PC or other type of device.

The functional configuration of the network system SY is described next with reference to . The client terminal has a web page acquisition unit drawing process unit print data generation unit print command unit display control unit and print settings unit .

The web page acquisition unit has the control unit and web browser as main parts and uses the web browser to access the web application server web application and get the desired web page the web page containing the page control script and print control script .

The drawing process unit has the control unit and page control script as main parts and when the user performs an input operation on the acquired web page the web page displayed by the web browser writes the result of the input operation in the drawing area.

The print data generation unit has the control unit and print control script as main parts and when the user performs a print operation on the acquired web page the web page displayed by the web browser runs the print control script to generate print data by converting the data written in the drawing area to a form enabling processing by the printer such as raster image commands bitmap files or XML print data . More specifically the print control script checks the pixel values of the image data written in the drawing area applies an image process such as digitizing or dithering and generates print data that can be processed by the printer . The print data generation unit also temporarily stores the generated print data in a specific storage area storage unit . Temporarily storing the print data can be done using a web storage device for example. The page control script detects print operations and when triggered by detecting a print operation the page control script calls the print control script to run the process for generating and temporarily storing the print data.

The print command unit has the control unit communication unit and print control script as main parts and sends the print data stored by the print data generation unit to the printer . More specifically the print data generating process a process of the print data generation unit and the print data transmission process a process of the print command unit are not executed as parallel processes and transmission of the print data starts after all print data has been generated. Note that when the web page changes a page unload event occurs while print data is being sent the print command unit interrupts transmission. This is because the print control script which is an element of the print command unit is embedded in the web page and when the web page changes the print control script disappears.

The display control unit has the control unit display unit and print control script as main parts and reports events that occur during the printing process controlled by the print control script to the user. More specifically when the user performs an action invokes a beforeunload event to change the currently displayed web page while the print data is being transmitted the display control unit displays a confirmation window on the display unit enabling the user to confirm whether or not to change the web page . If changing the web page is confirmed in this confirmation window an unload event occurs the display control unit displays a warning that print data transmission was interrupted.

Note that the print command unit continues sending the print data while the confirmation window is displayed by the display control unit . More specifically the print control script displays the confirmation window and continues sending the print data at the same time. Parallel processes can be achieved by for example using a web worker to run both processes in separate threads.

The print settings unit has the control unit and print control script as main parts. When a printing process executes when the user performs a printing operation on the web page the print settings unit prompts the user to input print settings such as the paper size and number of copies as described below using the print settings service provided by the printer the print settings service provider described below . The user settings information is stored in a web browser cookie or the web storage device and when the next printing process is performed the stored print settings are read and the print settings are restored.

The printer has a print data receiving unit print control unit and print settings service provider . The print data receiving unit has the control unit communication unit and HTTP server as main parts and receives the print data sent from the client terminal .

The print control unit has the control unit and print mechanism as main parts and controls printing an image based on the received print data received by the print data receiving unit . The print control unit prints in this printing process after all print data sent from the client terminal has been received. More specifically the print data sent from the client terminal is temporarily stored in a specific area in the storage unit and after all print data has been received the stored print data is read to execute the printing process.

The print settings service provider includes the control unit and HTTP server as main parts and provides a print settings service printing configuration function for configuring printing by the printer to the client terminal . This print settings service is provided as a user interface UI on the web page or as a web service API Application Programming Interface and enables setting the paper size number of copies print quality color BW printing and the image processing method for example.

The printing process of the network system SY is described next with reference to the flow chart in . First the client terminal control unit accesses the web application server web application based on user operation of the web browser gets the desired web page a web page containing the page control script and print control script and displays the web page on the web browser S web page acquisition step display step .

When the user then performs an input operation on the web page the client terminal receives the user input according to the page control script embedded on the web page and writes the received result of the input operation in the drawing area S drawing process step . After the content is drawn on screen and the user performs a print operation on the web page the client terminal receives a start printing command in conjunction with the print operation from the page control script S . Triggered by receiving the start printing command the print control script is called from the page control script and the printing process starts.

More specifically the client terminal applies an image process such as digitizing or dithering to the image data written in the drawing area S generates print data converted to a format that can be processed by the printer S print data generation step and saves the generated print data in the storage unit S according to the print control script . Note that steps S and S repeat until print data generation is completed that is until all image data written in the drawing area is converted to print data S returns No .

When generating the print data is completed S returns Yes the client terminal sends the print data saved in the storage unit to the printer service endpoint address of the printer according to the print control script S printing instruction step . Note that the control process called when an event that changes the web page occurs as a result of the user operating the browser while the print data is being sent is described below with reference to .

When print data is received from the client terminal S the printer saves the print data in the storage unit S . Steps S and S repeat until all print data is received S returns No . When all print data has been received and stored S returns Yes the printer reads the stored print data and prints based thereon prints an image S .

The process that is run when an event that changes the web page occurs while print data is being sent by the client terminal is described next with reference to the flow chart in . Note that the print data to be sent in this process was already generated by steps S to S in . In addition because a special process is not performed when an event changing the web page does not occur further description thereof is omitted in the description of the flow chart in .

After generating and storing the print data by means of the print control script the client terminal control unit starts sending the print data to the printer S . If an event that changes the displayed web page that is the web page in which the currently executing print control script is embedded to a different page occurs S returns Yes as a result of the user operating the web browser while print data is being transmitted the client terminal displays a confirmation window for selecting whether or not to change the web page on the display unit while continuing sending the print data by means of the print control script S .

If the user chooses to cancel changing the web page in this confirmation window S returns No the client terminal continues the transmission process until print data transmission is completed by means of the print control script S returns No and when all print data has been transmitted S returns Yes ends the transmission process S .

However if the user confirms changing the web page in the confirmation window S returns Yes the client terminal stops sending the print data in conjunction with the print control script being cleared S and presents a warning that print data transmission was interrupted on the display unit S .

As described above this first embodiment of the invention enables using a print control script embedded in a web page to print a specific image from a printer . More specifically because a script that operates in a web browser operates in a web page controls printing by the printer simply installing a web browser on the client terminal is sufficient and installing a printer driver on each client terminal as required by the related art is not necessary. The cost of development can also be reduced for the printer manufacturer because the need to develop different printer drivers for each operating system is eliminated. In addition because there is also no need to install a special application execution environment on the printer the cost of printer development and manufacturing can also be suppressed.

Furthermore because a web browser is typically installed as standard on most modern client terminals including personal computers and smartphones users that are unfamiliar with computers can easily use a printer without being aware of the operating environment such as the type of OS that is being used.

The foregoing first embodiment describes a configuration in which the printer directly receives the print data sent from the client terminal and runs the printing process but the invention is not so limited. For example as shown in a configuration in which an interface board installable board that is removably installed to the print unit receives the print data sent from the client terminal and runs the printing process is also conceivable. In this case the printer is rendered by the interface board and print unit and the interface board is connected to the print unit through the board interface and printer interface . The print unit gets the print data from the interface board through the printer interface and controls the print mechanism by the control unit . Note that reference numerals in the interface board in function as reference numerals of the printer in . The invention can therefore be introduced with general use printers because no special function needs to be incorporated into the print unit .

A network system SY according to a second embodiment of the invention is described next with reference to to . The network system SY according to the second embodiment of the invention differs from the network system SY according to the first embodiment of the invention in that a plurality of printers A to C are connected through the interface board device server a list of usable printers is generated by a function provided by the interface board and the desired printer the printer selected for output is specified from the list using a web browser on the client terminal and prints and the printer status is managed by a device management server . Other aspects of this embodiment are the same as the network system SY according to the first embodiment of the invention.

Note that parts that are the same as in the first embodiment are identified by like reference numerals in this second embodiment of the invention and further detailed description thereof is omitted. In addition variations that are applicable to like parts of the first embodiment can be similarly applied in the second embodiment. The differences in particular are described below.

The web application server and the client terminal and the client terminal and the device management server are communicatively connected over the Internet. The client terminal and interface board are communicatively connected over a LAN. An interface board is installed to one printer printer A in the second embodiment and the other two printers printers B and C are connected through a communication unit on the interface board . Note that shows an example having one client terminal and three printers but the invention is not so limited and the number of each can be determined as desired.

The interface board has a control unit storage unit communication unit and board interface . The control unit primarily includes a CPU and RAM. The CPU runs a program stored in the storage unit and controls interface board operation. RAM is used as working memory for the CPU to execute processes. The storage unit is nonvolatile memory such as flash ROM and stores control data and control programs for the CPU to execute the processes. The storage unit also stores a list of HTTP servers and usable connected printers referred to below as the device list .

Information contained in the device list device information below includes as basic device information for each printer the printer ID and printer name assigned to the printer and the communication port to which the printer is connected. Detailed device information includes the printer status normal error the print settings paper size number of copies print quality color BW printing image processing method optional device information about any optional devices such as a paper feed cassette or duplex printing unit connected to the printer and consumables information such as how much paper is left and the remaining ink level . Note that this device information is described for example only and the invention is not limited thereto.

The board interface is a port for installation to the printer printer A and communication with the printer A passes through this board interface . The communication unit is an interface for communicating with the client terminal and another printer printers B and C in the second embodiment and is a group of interfaces compatible with different kinds of connections such as a LAN interface and a USB interface.

The HTTP server handles communication between the interface board and the client terminal web browser using HTTP. More specifically when device information printer ID and communication port for the output printer and the print data are sent from the client terminal to the service endpoint address URI assigned to the interface board the interface board sends the received print data to the printer identified as the output address as further described below .

The printer is primarily composed of the control unit storage unit print mechanism communication unit and printer interface . Note that because printers A B and C are identical only the configuration of printer A is shown in .

The printer interface connects to the interface board board interface and handles communications is a port for installing the interface board . The communication unit is an interface for communicating with the interface board and is a group of interfaces compatible with different kinds of connections such as a LAN interface and a USB interface. The printer receives and prints print data sent from the client terminal through the interface board through the printer interface or the communication unit . The printer also sends the result of the printing process the status of the printer device information such as printing completed or error occurred to the client terminal through the interface board .

Note that as described above because the interface board is installed to printer A in the second embodiment printer A communicates through the printer interface with the interface board and printers B and C communicate through the communication unit with the interface board . More specifically the communication unit of printer A is unused not connected and the printer interfaces of printers B and C are unused not connected in this second embodiment.

The client terminal includes as main parts a control unit storage unit display unit operating unit and communication unit . The communication unit is an interface for communicating with the web application server interface board and device management server and the client terminal control unit communicates with other devices through the web browser .

More specifically the client terminal uses the web browser to access a web application server connected to the network and get a web page containing page control script and print control script provided by the web application .

When the user performs a print operation on the web page the web browser runs the print control script embedded on the web page gets the device list from the interface board and based thereon displays a printer selection window for selecting the output printer in this second embodiment a window for selecting one of printers A to C . When the desired printer is selected from the list in the printer selection window and a print command is issued by the user the image data written in the drawing area is converted to produce print data and the print data is sent with the device information printer ID port information for the specified printer to the interface board the service endpoint of the interface board .

The client terminal also sends the device information for the printer to the device management server . This device information includes at least the basic device information printer ID printer name communication port and the printer status. Information that is updated based on the result of each printing process printing completed or error occurred received from the printer is sent as the printer status. Note that the device information sent to the device management server is not limited to the above and sending other device information is also possible.

In addition to a control unit storage unit communication unit and display unit the device management server also has the hardware components of a typical computer. The control unit includes primarily a CPU ROM and RAM. The CPU runs a program stored in ROM and controls device management server operation. ROM stores control data and a control program enabling the CPU to run different processes. RAM is used as working memory for the CPU to execute processes. The storage unit stores a device management application for centrally managing the HTTP server and printer status.

The communication unit is an interface for communicating with the client terminal web browser . Communication between the device management server and client terminal is managed by the HTTP server using HTTP and device information basic device information and printer status is acquired received from the client terminal . The display unit is an LCD panel for example and displays the status of each printer based on the device information acquired from the client terminal in an application window of the device management application .

The functional configuration of the network system SY is described next with reference to . The interface board has a device information acquisition unit device list generation unit device list transmission unit and print data relay unit . The device information acquisition unit primarily includes the control unit searches for connected usable printers and acquires device information from each of the found detected printers . The device information acquisition unit looks for network connected printers using SNMP Simple Network Management Protocol for example and acquires the device information from the Management Information Base MIB of the connected printer .

The device list generation unit has the control unit as a main part and generates and stores a device list list of usable printers in the storage unit based on the device information acquired by the device information acquisition unit . The device list transmission unit primarily includes the control unit communication unit and HTTP server and when a request for the device list is received from the client terminal responds by sending the device list stored in the storage unit . The print data transmission unit primarily includes the control unit communication unit board interface and HTTP server receives the output printer information and print data described below from the client terminal and sends the print data to the printer specified by the output printer information. The print data transmission unit also receives and sends the printing process result from the printer to the client terminal .

The client terminal includes a web page acquisition unit drawing process unit device list acquisition unit printer selection unit device selection unit print settings unit print data generation unit print command unit and device state transmission unit .

The device list acquisition unit primarily includes the control unit and print control script sends a device list request to the interface board according to the print control script and in response receives the device list from the interface board .

The printer selection unit primarily includes the control unit and print control script displays a printer selection window for selecting one printer from the acquired device list and sets the printer selected by the user as the print data destination. Note that the acquired device list and the information for the printer set as the destination may be stored in a cookie by the web browser or in a web storage device so that the stored data can be read and reset the next time.

The print settings unit primarily includes the control unit and print control script and displays a device information configuration window for displaying and setting the device information basic device information and detailed device information of the printer selected with the printer selection unit . This device information configuration window is displayed when for example a certain button such as a properties button in the printer selection window is operated and displays the optional device information and consumables information of the printer and enables configuring printer settings such as the paper size number of copies print quality color BW printing and the image processing method. The print settings unit also stores the settings changed by the user in a cookie of the web browser or on a web storage device so that the stored print settings can be read and the print settings can be reset the next time printing is done.

The print command unit primarily includes the control unit communication unit and print control script and sends the device information information for the destination printer printer ID and communication port for the output printer selected by the printer selection unit and the print data temporarily stored by the print data generation unit to the interface board . Note that the print command unit stops transmission if the web page changes while the print data is being sent.

The device state transmission unit primarily includes the control unit and print control script receives the results of printing processes from the printer through the interface board and sends device information printer ID printer name communication port and printer status updated according to the printing process results to the device management server .

The printer has a print data receiving unit print control unit and print result transmission unit . The print data receiving unit primarily includes the control unit communication unit and printer interface and receives print data sent from the client terminal through the interface board . The print result transmission unit sends the printer status such as whether the printing process ended normally printing completed or whether the printing process failed error occurred through the interface board to the client terminal .

The device management server has a device state reception unit and device state reporting unit . The device state reception unit primarily includes the control unit communication unit and HTTP server and receives device information printer ID printer name communication port and printer status for each printer from the client terminal . The device state reporting unit primarily includes the the control unit display unit and device management application and displays the status of each printer in a window of the device management application based on the received device information.

The printing process in this network system SY is described next with reference to the flow chart in . Note that the device list is generated and stored by a process of the device information acquisition unit device information acquisition step and a process of the device list generation unit device list generation step . In addition because S to S and S to S in are identical to S to S and S to S in of the first embodiment detailed description thereof is omitted below.

When the client terminal receives the start printing command in S this triggers the print control script being called from the page control script and the printing process starts. More specifically the client terminal requests the device list from the interface board according to the print control script S . When this request is received the interface board returns the device list stored in the storage unit to the client terminal in response S device list transmission step .

When the client terminal then acquires the device list from the interface board S device list acquisition step the client terminal displays the printer selection window for selecting the output printer based thereon S . When the user then selects and verifies one printer from the printer selection window the client terminal sets the selected printer as the output destination of the print data S device list selection step .

The client terminal then generates and stores the print data by means of the print control script S S drawing process step print data generation step and after generating the print data is completed S Yes sends the information about the printer set as the destination and the print data stored in the storage unit to the interface board service endpoint address of the interface board according to the print control script S printing instruction step .

When the output printer information and print data is received from the client terminal S the interface board sends the print data to the printer specified by the output printer information S .

The printer stores the print data received from the interface board S in the storage unit S . These steps S and S repeat until all print data has been received S returns No . When receiving all print data is completed S returns Yes the printer reads the stored print data and prints prints an image based thereon S .

When the printing process ends the printer sends the result printing process result printing completed error occurred through the interface board to the client terminal S S . Next when the printing process result is received from the printer interface board S the client terminal sends device information reflecting the result to the device management server S . The client terminal may also display the printing process result on its own display unit or in the web browser . When device information is then received from the client terminal S the device management server displays updates the printer status in a window of the device management application based on the received device information S .

When a plurality of printers are connected as described in the second embodiment above the device list a list of usable printers is acquired according to the print control script embedded in the web page the output printer is selected specified from the device list and the desired image can be printed. More specifically the printer can be selected and a printing process can be executed by simply installing a web browser on the client terminal without installing a printer driver on each client terminal as in the related art.

Note that the interface board finds the usable printers and generates the device list in the second embodiment but the invention is not so limited. For example the interface board could provide a printer registration function for manually registering printers and the user could use this printer registration function from the web browser client terminal to generate the device list by inputting for example the printer ID printer name and board information for the target printer .

A network system SY according to a third embodiment of the invention is described next with reference to to . The network system SY according to the third embodiment of the invention differs from the network system SY according to the second embodiment of the invention in that authentication of users that use the printer and managing a list of usable printers device list are managed by the web application server and only users that are allowed by authentication by the web application server can select a printer based on the device list and print. Other aspects of this embodiment are the same as in the network system SY according to the second embodiment of the invention. Note that like parts in the first and second embodiments are identified by the same reference numerals in the third embodiment and further detailed description thereof is omitted. In addition variations of like parts that are applicable to the first and second embodiments are similarly applicable to this embodiment. The differences in particular are described below.

The communication unit is an interface for communicating HTTP communication with the client terminal web browser . When the client terminal accesses HTTP request the web application the web application server authenticates the login based on information input from the client terminal referred to below as the user identification information identification information and permits access to the web application and sends the desired web page including page control script and print control script only when authentication is successful. The web application server sends the device list of usable printers to the permitted client terminal user .

The client terminal primarily includes the control unit storage unit display unit operating unit and communication unit . The operating unit is an operating means for inputting user identification information user ID and password in addition to performing input operations such as inputting text and drawing figures and making selection decision operations and printing operations in a web page displayed by the web browser .

The communication unit is an interface for communicating with the web application server and interface board and the client terminal communicates with other devices using the web browser . The client terminal control unit uses the web browser to access the web application server and get the web page provided by the web application . To get the web page the client terminal first sends the user identification information input by the user to the web application web application server in order to login to the web application . After the login is authenticated based on the user identification information by the web application that is after access to the web application is permitted the desired web page is received.

When the user performs a print operation on the web page the client terminal runs the print control script embedded in the web page gets the device list from the web application server and displays a printer selection window in this third embodiment a window for selecting one of printers A to C for selecting the output printer based thereon. When the user then selects the desired printer from the list in the printer selection window and issues a print command the client terminal converts the image data written in the drawing area and generates print data and sends the print data and the device information printer ID and communication port for the selected printer to the interface board the service endpoint .

The functional configuration of the network system SY is described next with reference to . The web application server includes a user identification information reception unit user authentication unit and device list transmission unit . The user identification information reception unit mainly includes the control unit HTTP server and web application and receives user identification information user ID and password sent from the client terminal .

The user authentication unit mainly includes the control unit web application and user database and authenticates the user authenticates login when the user accesses the web application using the client terminal web browser . More specifically the user authentication unit determines if the user identification information received by the user identification information reception unit is registered in the user database . If the received user identification information is registered in the user database authentication succeeds use of the web application by the user login to the web application is permitted if not registered in the user database authentication fails use of the web application by the user login to the web application is rejected and the client terminal is prompted for re input of the user identification information.

The device list transmission unit includes as main parts the control unit and HTTP server and when a device list request is received from the client terminal sends the device list stored in the storage unit in response.

The client terminal includes a log in window display unit identification information input window display unit user identification information input unit user identification information transmission unit identification information transmission unit web page acquisition unit drawing process unit device list acquisition unit printer selection unit device selection unit print data generation unit and print command unit .

The log in window display unit includes as main parts the control unit display unit and web browser and displays a login window identification information input window for inputting user identification information to login to the web application on the web browser . The user identification information input unit includes as main parts the control unit operating unit and web browser and inputs the user identification information based on user operations in the login window. The user identification information transmission unit includes as main parts the control unit and web browser and sends the user identification information input by the user identification information input unit to the web application server web application .

The web page acquisition unit includes as main parts the control unit and web browser when login is authenticated by the web application server acquires the desired web page including page control script and print control script from the web application server web application by the web browser .

The device list acquisition unit includes as main parts the control unit and print control script sends a request for the device list to the web application server by means of the web application server and gets the device list from the web application server in response.

The interface board has a print data relay unit . The print data relay unit includes as main units the control unit and HTTP server receives the output printer information and print data from the client terminal and sends print data to the printer specified by the output printer information.

The user authentication process and printing process of the network system SY are described next with reference to the flow chart in . Note that steps S to S in are the same as steps S to S in according to the second embodiment of the invention and further description thereof is therefore omitted below.

First the client terminal control unit accesses the web application server web application based on user operations in the web browser and displays a login window for logging into the web application on the web browser S identification information input window display step . User identification information user ID and password is then input S by the user inputting data to the login window and the client terminal sends the input user identification information to the web application server S identification information transmission step .

When the web application server control unit receives user identification information from the client terminal S identification information reception step the web application server applies an authentication process to the received user identification information S user authentication step . More specifically the web application server determines if the received user identification information is registered in the user database . If the user identification information is not registered in the user database authentication fails S returns No the web application server prompts the client terminal for the user identification information to be input again and the client terminal repeats the process from S. However if the user identification information is registered in the user database authentication succeeds S returns Yes the web application server allows the client terminal to log into the web application .

The client terminal that was permitted to log in then gets the desired web page from the web application server web application according to user operation of the web browser and displays the web page on the web browser S web page acquisition step display step .

When the user then performs an input operation on the web page the client terminal receives the input operation according to the page control script embedded on the web page and writes the result of the received input operation in the drawing area S . If the user then performs a print operation on the web page from this state after writing the client terminal gets a start printing command in conjunction with the printing operation from the page control script S . Triggered by receiving this start printing command the print control script is called from the page control script and the printing process is started.

More specifically the client terminal requests the device list from the web application server by means of the print control script S . When this request is received the web application server sends the device list stored in the storage unit to the client terminal in response S . When the device list is acquired from the web application server S device list acquisition step the client terminal print control script displays the printer selection window for selecting the output printer S . When the user then selects and confirms one printer in the printer selection window the client terminal sets the selected printer as the output destination for the print data S device selection step .

Next the client terminal generates and saves the print data according to the print control script S S drawing process step print data generation step and after generating the print data is completed S Yes sends the information for the printer set as the output printer output printer information and the saved print data to the interface board S printing instruction step . The interface board control unit then sends the print data to the printer identified by the output printer information received from the client terminal S S . The printer control unit then prints based on the print data after all print data is received from the interface board S S .

When plural printers are connected as described in this third embodiment above user authentication is performed by the web application server and only users for which authentication was allowed authentication succeeded can select a printer from the device list printer list acquired by the print control script embedded in the web page and print the desired image. More specifically having a web browser that displays acquires a web page installed on the client terminal is sufficient to authenticate the user of the printer and enable only permitted users to select a usable printer and print and installing a printer driver on each client terminal as in the related art is not necessary.

A network system SY according to a fourth embodiment of the invention is described next with reference to to . The network system SY according to the fourth embodiment of the invention differs from the network system SY according to the third embodiment of the invention in that authentication of users of the printer is handled on the interface board side. More specifically this embodiment differs in that the interface board has a authentication processor and user database and the authentication processor authenticates the user identification information information that identifies the user user ID and password identification information received from the client terminal and permits use of the printer print images from the printer when authentication is successful. Other aspects of this embodiment are the same as in the network system SY according to the third embodiment of the invention. Note that like parts in the first to third embodiments are identified by the same reference numerals in the fourth embodiment and further detailed description thereof is omitted. In addition variations of like parts that are applicable to the first to third embodiments are similarly applicable to this embodiment. The differences in particular are described below.

As shown in the interface board of the network system SY according to the fourth embodiment of the invention also has an authentication processor and user database user information storage unit . The user database is a database for managing users that are permitted to use the printer and stores a user ID and password user information for identifying a user linked to the printer ID of the printer the user can use and the communication port to which the printer is connected the ID and communication port of the printer allowed to be used by the user identified by the user ID collectively referred to below as the printer information printer identification information . The authentication processor authenticates printer users based on the user identification information received from the client terminal and the user database .

The functional configuration of the network system SY is described next with reference to the function block diagram in . The client terminal has a web page acquisition unit drawing process unit user identification information input window display unit identification information input window display unit user identification information input unit print data generation unit and print command unit .

The user identification information input window display unit includes as main parts a control unit display unit print control script and web browser and by means of the print control script displays on the web browser a user identification information input window identification information input window for inputting user identification information user ID and password used for authentication when a user uses the printer . The user identification information input unit includes as main parts a control unit operating unit and web browser and inputs user identification information based on input operations by the user in the user identification information input window. The print command unit includes as main parts the control unit and print control script and outputs the user identification information input by the user identification information input unit related to the print data generated by the print data generation unit to the interface board .

The interface board has a data reception unit user authentication unit output printer setting unit and print data relay unit . The data reception unit includes the control unit and HTTP server as main parts and receives user identification information and print data from the client terminal print command unit .

The user authentication unit includes as main parts the control unit authentication processor and user database and performs authentication of users using the printer . More specifically the user authentication unit compares the received user identification information and the user information registered in the user database determines that authentication succeeded if the user identification information matches user information registered in the user database and determines that authentication of the user identification information user failed if there is no matching user information.

The output printer setting unit includes as main parts the control unit and authentication processor and sets the printer used for printing based on the result of authentication by the user authentication unit . More specifically when authentication by the user authentication unit is successful the printer identified by the printer information printer ID and communication port linked to the user information matching the user identification information is set as the output printer. If authentication failed a message indicating that printer access is not allowed is sent to the client terminal user . The print data transmission unit includes mainly the control unit and sends print data to the printer set as the output printer by the output printer setting unit .

The user authentication process and printing process of the network system SY according to the fourth embodiment of the invention is described next with reference to the flow chart in . Note that steps S S S S and S S in are identical to steps S S S S and S S in according to the second embodiment of the invention and detailed description thereof is therefore omitted.

When the client terminal receives a start printing command in S the print control script of the client terminal displays a user identification information input window S identification information input window display step and the user identification information user ID and password is input S as a result of user input to the input window. The input user identification information is then stored in a web browser cookie or web storage device stored in storage unit for example.

The client terminal then generates and saves print data by means of the print control script S S drawing process step print data generation step and after generating the print data is completed S returns Yes the input user identification information and print data are sent together to the interface board S printing instruction step .

When the user identification information and print data are received from the client terminal S data reception step the interface board control unit applies the authentication process to the received user identification information S user authentication step . More specifically whether the received user identification information is registered in the user database is determined. If the user identification information is not in the user database authentication fails S returns No the interface board sends a warning message to the client terminal indicating that the printer cannot be used because user authentication failed that is that the user cannot print from the printer S .

If the user identification information is registered in the user database authentication succeeds S returns Yes the interface board extracts printer information printer ID and communication port linked to the user information matching the user identification information and sets the printer specified by the printer information as the output printer S output printer setting step . The interface board then sends the print data to the printer set as the output printer S print data relay step . The printer control unit then prints based on the print data after all print data is received from the interface board S S .

When plural printers are connected as described in this fourth embodiment above user identification information user information for identifying the user is input using the print control script embedded on a web page and authentication based on the input user identification information is successful the user can print from a printer linked to the user. More specifically having a web browser that displays acquires a web page installed on the client terminal is sufficient to enable printing and limit what users can use the printer without installing a printer driver on each client terminal as in the related art.

A network system SY according to a fifth embodiment of the invention is described next with reference to to . In the network system SY according to the fifth embodiment of the invention the web application server authenticates the printer by an authentication process that uses an encryption key secret key and enables image printing from a permitted printer . More specifically the printer that can be used for printing is limited by printer authentication. As shown in the system diagram in the network system SY according to the fifth embodiment of the invention differs from the network system SY according to the third embodiment of the invention in that the web application server has an authentication processor and the interface board has an encryption processor and printer management database . Other aspects of this embodiment are the same as in the third embodiment of the invention. Note that like parts in the first to fourth embodiments are identified by the same reference numerals in the fifth embodiment and further detailed description thereof is omitted. In addition variations of like parts that are applicable to the first to fourth embodiments are similarly applicable to this embodiment. The differences in particular are described below.

As shown in the web application server of the network system SY according to the fifth embodiment of the invention has an authentication processor . The authentication processor authenticates the printer with the interface board using a challenge and response authentication method. More specifically the authentication processor authenticates the printer by sending authentication request information a random numeric string that differs with each authentication used for printer authentication to the interface board through the client terminal print control script and comparing the authentication response information received from the interface board as a response to the authentication request information with the result of encrypting the authentication request information the authentication request information that was sent using a previously stored encryption key server encryption key not shown .

The interface board has an encryption processor and printer management database printer management information storage unit . The printer management database is a database for managing printers connected to the interface board and stores the printer ID and communication port printer identification information for each printer for each of printers A to C in this fifth embodiment with a related encryption key printer encryption key that is different for each printer . The encryption processor encrypts the authentication request information received from the web application server using the printer encryption key of each printer registered in the printer management database and sends the encrypted information encrypted authentication information and the printer ID and communication port linked to the printer encryption key used for encryption together referred to as the authentication response information below through the client terminal print control script to the web application server .

The functional configuration of the network system SY is described next with reference to the function block diagram in . The web application server has an authentication request information transmission unit authentication response information reception unit printer authentication unit and authentication result transmission unit . The authentication request information transmission unit has a main parts the control unit authentication processor and HTTP server and sends authentication request information to the interface board through the client terminal print control script . Note that this transmission process starts when a request to execute the authentication process is received from the client terminal the authentication process request unit described below .

The authentication response information reception unit includes as main parts the control unit authentication processor and HTTP server and receives authentication response information encrypted authentication information printer ID and communication port from the interface board through the client terminal print control script as a response to the authentication request information sent from the authentication request information transmission unit . The printer authentication unit has as main parts the control unit and authentication processor and authenticates the printer by comparing the encrypted authentication information contained in the authentication response information received by the authentication response information reception unit with the result of encrypting the authentication request information sent by the authentication request information transmission unit using the server encryption key. If the encrypted authentication information and the result of the encryption operation match authentication is determined to have succeeded and authentication is determined to have failed if there is no match.

The authentication result transmission unit includes as main parts the control unit authentication processor and HTTP server and sends the authentication result from the printer authentication unit to the client terminal . If the authentication result is that authentication succeeded the printer ID and communication port information that was received with the encrypted authentication information for which authentication succeeded is sent to the client terminal . If authentication failed a warning message to that effect is sent to the client terminal . Note that this fifth embodiment also sends a warning message when authentication fails for all printers printers A to C .

The client terminal includes a web page acquisition unit drawing process unit authentication process request unit authentication request information relay unit authentication request information relay unit authentication response information relay unit authentication result reception unit print data generation unit and print command unit .

The authentication process request unit includes as main parts the control unit and print control script and by means of the print control script requests the web application server to run the printer authentication process. The authentication request information relay unit includes as main parts the control unit and print control script and receives and relays authentication request information from the web application server to the interface board according to the print control script . The authentication response information relay unit includes as main parts the control unit and print control script and receives and relays authentication response information from the interface board to the web application server by means of the print control script .

The authentication result reception unit includes as main parts the control unit and print control script and receives the authentication result from the web application server by means of the print control script . If the received authentication result indicates an authentication success the printer ID and communication port received with the authentication result are set as the information for the output printer output printer information . If the received authentication result was that authentication failed the warning message received with the authentication result is displayed on the web browser . The print command unit includes as main parts the control unit and print control script and sends the output printer information information for the successfully authenticated printer set by the authentication result reception unit linked to the print data generated by the print data generation unit to the interface board .

The interface board includes an authentication request information reception unit encryption processor authentication response information transmission unit and print data relay unit . The authentication request information reception unit includes as main parts the control unit encryption processor and HTTP server and receives authentication request information from the web application server through the client terminal print control script . The encryption processor includes as main parts the control unit and encryption processor encrypts the received authentication request information using the printer encryption key related to each printer registered in the printer management database and generates encrypted authentication information for each printer .

The authentication response information transmission unit includes as main parts the control unit encryption processor and HTTP server and sends the encrypted authentication information produced by the encryption processor and information about the printer ID and communication port linked to the printer encryption key used to produce the encrypted authentication information as the authentication response information to the web application server through the client terminal print control script . The print data relay unit includes as main parts the control unit receives the output printer information and print data from the client terminal print command unit and sends the print data to the printer specified by the received output printer information.

The printer authentication process and printing process of the network system SY according to the fifth embodiment of the invention are described next with reference to . Note that steps S S S S in are the same as steps S S S S in according to the third embodiment of the invention and detailed description thereof is therefore omitted.

When the client terminal receives a start printing command in S the client terminal sends an authentication process request for the printer to the web application server by means of the print control script S . When the authentication process request is received the web application server control unit generates authentication request information a random numeric string and sends the resulting authentication request information to the client terminal S and the print control script of the client terminal then relays sends the received authentication request information to the interface board S .

When the interface board control unit receives the authentication request information from the client terminal S authentication request information reception step the interface board applies the encryption process to the authentication request information S . This encryption process encrypts the authentication request information using the printer encryption key for each printer registered in the printer management database and generates encrypted authentication information. This fifth embodiment encrypts the authentication request information using the printer encryption keys respectively related to the three printers A to C. More specifically three sets of encrypted authentication information are created using the three different printer encryption keys.

Next the interface board sends the resulting encrypted authentication information and the printer ID and communication port information authentication response information related to the printer encryption keys used to encrypt the encrypted authentication information to the client terminal S authentication response information transmission step and the client terminal sends relays the received authentication response information to the web application server according to the print control script S . More specifically this fifth embodiment of the invention sends authentication response information for printer A authentication response information for printer B and authentication response information for printer C from the interface board to the web application server .

When the authentication response information is received S the web application server applies the authentication process to the authentication response information received for each printer S printer authentication step . This authentication process first encrypts the authentication request information sent to the interface board using the locally stored server encryption key. Next the result of encryption using the server encryption key is compared with the encrypted authentication information contained in the received authentication response information authentication succeeds if they match and authentication fails if they do not match. After the authentication process ends the web application server sends the authentication result result of comparison to the client terminal S authentication result transmission step . The printer ID and communication port information linked to the encrypted authentication information for which authentication succeeded is also sent at this time if authentication succeeded. If authentication fails in all authentication processes authentication of printers A B and C a warning message indicating there is not a printer for which use is allowed is sent.

The client terminal then receives the authentication result from the web application server by means of the print control script S . If the received authentication result is that authentication failed S returns No the client terminal displays the received warning message on the web browser S . If the received authentication result is information that authentication was successful S returns Yes the client terminal sets the received printer ID and communication port as the information for the output printer output printer information S .

Next the client terminal generates and saves the print data by means of the print control script S S drawing process step print data generation step and after print data generation is completed S returns Yes sends the output printer information set in S and the print data saved in the storage unit to the interface board according to the print control script S printing instruction step .

The interface board sends the print data to the printer specified by the output printer information received from the client terminal S S . The printer control unit then prints based on the print data after all print data is received from the interface board S S .

As described above when plural printers are connected and printing is performed according to a print control script embedded in a web page this fifth embodiment of the invention authenticates the connected printers and enables printing only from a printer for which authentication is successful authentication is allowed . More specifically having a web browser that displays acquires a web page installed on the client terminal is sufficient to restrict the printer that can be used for output and installing a printer driver on each client terminal as in the related art is not necessary.

Note that the units functions of the interface board in the second to fifth embodiments described above could be rendered by a common personal computer device server . Alternatively these functions could be incorporated in one such as printer A of the plural printers described above. These units could also be built into each of the printers .

In the first to fifth embodiments described above the client terminal generates print data from the image data in a drawing area and sends this print data to the printer but the image data could be segmented into data blocks of a size that can be sent in a single transmission and the print data segmented print data could be generated and transmitted separately for each image data block. More specifically the print data can be segmented and transmitted in data blocks of a size that can be transmitted in a single data transmission. As a result deletion of the print control script and interruption of print data transmission at some indeterminate point when sending a large amount of print data as a result of the web page changing during print data transmission can be prevented.

Note further that elements of the network systems SY to SY above can be provided as a program. The program can also be provided stored on a storage medium not shown . Examples of such recording media include CD ROM flash ROM memory cards including CompactFlash smart media and memory sticks Compact Discs magneto optical discs digital versatile discs and floppy disks.

The invention is also not limited to the foregoing embodiments and the components and processes of the network systems SY to SY described above can be desirably varied without departing from the scope of the invention.

As described above the invention is useful as a network system interface board printing control method for a network system and a program and is particularly suited to controlling a printer without requiring a printer driver that depends on the computer environment.

