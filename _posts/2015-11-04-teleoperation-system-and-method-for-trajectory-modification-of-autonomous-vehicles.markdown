---

title: Teleoperation system and method for trajectory modification of autonomous vehicles
abstract: Various embodiments relate generally to autonomous vehicles and associated mechanical, electrical and electronic hardware, computer software and systems, and wired and wireless network communications to provide an autonomous vehicle fleet as a service. More specifically, systems, devices, and methods are configured to initiate modification of trajectories to influence navigation of autonomous vehicles. In particular, a method may include receiving a teleoperation message via a communication link from an autonomous vehicle, detecting data from the teleoperation message specifying an event associated with the autonomous vehicle, identifying one or more courses of action to perform responsive to detecting the data specifying the event, and generating visualization data to present information associated with the event to a display of a teleoperator computing device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09507346&OS=09507346&RS=09507346
owner: Zoox, Inc.
number: 09507346
owner_city: Menlo Park
owner_country: US
publication_date: 20151104
---
This application is related to U.S. patent application Ser. No. 14 932 959 filed Nov. 4 2015 entitled AUTONOMOUS VEHICLE FLEET SERVICE AND SYSTEM U.S. patent application Ser. No. 14 932 963 filed Nov. 4 2015 entitled ADAPTIVE MAPPING TO NAVIGATE AUTONOMOUS VEHICLES RESPONSIVE TO PHYSICAL ENVIRONMENT CHANGES U.S. patent application Ser. No. 14 932 940 filed Nov. 4 2015 entitled AUTOMATED EXTRACTION OF SEMANTIC INFORMATION TO ENHANCE INCREMENTAL MAPPING MODIFICATIONS FOR ROBOTIC VEHICLES U.S. patent application Ser. No. 14 756 995 filed Nov. 4 2015 entitled COORDINATION OF DISPATCHING AND MAINTAINING FLEET OF AUTONOMOUS VEHICLES U.S. patent application Ser. No. 14 756 992 filed Nov. 4 2015 entitled ADAPTIVE AUTONOMOUS VEHICLE PLANNER LOGIC U.S. patent application Ser. No. 14 756 991 filed Nov. 4 2015 entitled SENSOR BASED OBJECT DETECTION OPTIMIZATION FOR AUTONOMOUS VEHICLES and U.S. patent application Ser. No. 14 756 996 filed Nov. 4 2015 entitled CALIBRATION FOR AUTONOMOUS VEHICLE OPERATION all of which are hereby incorporated by reference in their entirety for all purposes.

Various embodiments relate generally to autonomous vehicles and associated mechanical electrical and electronic hardware computer software and systems and wired and wireless network communications to provide an autonomous vehicle fleet as a service. More specifically systems devices and methods are configured to initiate modification of trajectories e.g. remotely to influence navigation of autonomous vehicles.

A variety of approaches to developing driverless vehicles focus predominately on automating conventional vehicles e.g. manually driven automotive vehicles with an aim toward producing driverless vehicles for consumer purchase. For example a number of automotive companies and affiliates are modifying conventional automobiles and control mechanisms such as steering to provide consumers with an ability to own a vehicle that may operate without a driver. In some approaches a conventional driverless vehicle performs safety critical driving functions in some conditions but requires a driver to assume control e.g. steering etc. should the vehicle controller fail to resolve certain issues that might jeopardize the safety of the occupants.

Although functional conventional driverless vehicles typically have a number of drawbacks. For example a large number of driverless cars under development have evolved from vehicles requiring manual i.e. human controlled steering and other like automotive functions. Therefore a majority of driverless cars are based on a paradigm that a vehicle is to be designed to accommodate a licensed driver for which a specific seat or location is reserved within the vehicle. As such driverless vehicles are designed sub optimally and generally forego opportunities to simplify vehicle design and conserve resources e.g. reducing costs of producing a driverless vehicle . Other drawbacks are also present in conventional driverless vehicles.

Other drawbacks are also present in conventional transportation services which are not well suited for managing for example inventory of vehicles effectively due to the common approaches of providing conventional transportation and ride sharing services. In one conventional approach passengers are required to access a mobile application to request transportation services via a centralized service that assigns a human driver and vehicle e.g. under private ownership to a passenger. With the use of differently owned vehicles maintenance of private vehicles and safety systems generally go unchecked. In another conventional approach some entities enable ride sharing for a group of vehicles by allowing drivers who enroll as members access to vehicles that are shared among the members. This approach is not well suited to provide for convenient transportation services as drivers need to pick up and drop off shared vehicles at specific locations which typically are rare and sparse in city environments and require access to relatively expensive real estate i.e. parking lots at which to park ride shared vehicles. In the above described conventional approaches the traditional vehicles used to provide transportation services are generally under utilized from an inventory perspective as the vehicles are rendered immobile once a driver departs. Further ride sharing approaches as well as individually owned vehicle transportation services generally are not well suited to rebalance inventory to match demand of transportation services to accommodate usage and typical travel patterns. Note too that some conventionally described vehicles having limited self driving automation capabilities also are not well suited to rebalance inventories as a human driver generally may be required. Examples of vehicles having limited self driving automation capabilities are vehicles designated as Level 3 L3 vehicles according to the U.S. Department of Transportation s National Highway Traffic Safety Administration NHTSA .

As another drawback typical approaches to driverless vehicles are generally not well suited to detect and navigate vehicles relative to interactions e.g. social interactions between a vehicle in travel and other drivers of vehicles or individuals. For example some conventional approaches are not sufficiently able to identify pedestrians cyclists etc. and associated interactions such as eye contact gesturing and the like for purposes of addressing safety risks to occupants of a driverless vehicles as well as drivers of other vehicles pedestrians etc.

Thus what is needed is a solution for implementing autonomous vehicles without the limitations of conventional techniques.

Various embodiments or examples may be implemented in numerous ways including as a system a process an apparatus a user interface or a series of program instructions on a computer readable medium such as a computer readable storage medium or a computer network where the program instructions are sent over optical electronic or wireless communication links. In general operations of disclosed processes may be performed in an arbitrary order unless otherwise provided in the claims.

A detailed description of one or more examples is provided below along with accompanying figures. The detailed description is provided in connection with such examples but is not limited to any particular example. The scope is limited only by the claims and numerous alternatives modifications and equivalents thereof. Numerous specific details are set forth in the following description in order to provide a thorough understanding. These details are provided for the purpose of example and the described techniques may be practiced according to the claims without some or all of these specific details. For clarity technical material that is known in the technical fields related to the examples has not been described in detail to avoid unnecessarily obscuring the description.

According to some examples at least some of autonomous vehicles to are configured as bidirectional autonomous vehicles such as bidirectional autonomous vehicle AV . Bidirectional autonomous vehicle may be configured to travel in either direction principally along but not limited to a longitudinal axis . Accordingly bidirectional autonomous vehicle may be configured to implement active lighting external to the vehicle to alert others e.g. other drivers pedestrians cyclists etc. in the adjacent vicinity and a direction in which bidirectional autonomous vehicle is traveling. For example active sources of light may be implemented as active lights when traveling in a first direction or may be implemented as active lights when traveling in a second direction. Active lights may be implemented using a first subset of one or more colors with optional animation e.g. light patterns of variable intensities of light or color that may change over time . Similarly active lights may be implemented using a second subset of one or more colors and light patterns that may be different than those of active lights . For example active lights may be implemented using white colored lights as headlights whereas active lights may be implemented using red colored lights as taillights. Active lights and or portions thereof may be configured to provide other light related functionalities such as provide turn signal indication functions e.g. using yellow light . According to various examples logic in autonomous vehicle may be configured to adapt active lights and to comply with various safety requirements and traffic regulations or laws for any number of jurisdictions.

In some embodiments bidirectional autonomous vehicle may be configured to have similar structural elements and components in each quad portion such as quad portion . The quad portions are depicted at least in this example as portions of bidirectional autonomous vehicle defined by the intersection of a plane and a plane both of which pass through the vehicle to form two similar halves on each side of planes and . Further bidirectional autonomous vehicle may include an autonomous vehicle controller that includes logic e.g. hardware or software or as combination thereof that is configured to control a predominate number of vehicle functions including driving control e.g. propulsion steering etc. and active sources of light among other functions. Bidirectional autonomous vehicle also includes a number of sensors disposed at various locations on the vehicle other sensors are not shown .

Autonomous vehicle controller may be further configured to determine a local pose e.g. local position of an autonomous vehicle and to detect external objects relative to the vehicle. For example consider that bidirectional autonomous vehicle is traveling in the direction in road network . A localizer not shown of autonomous vehicle controller can determine a local pose at the geographic location . As such the localizer may use acquired sensor data such as sensor data associated with surfaces of buildings and which can be compared against reference data such as map data e.g. 3D map data including reflectance data to determine a local pose. Further a perception engine not shown of autonomous vehicle controller may be configured to detect classify and predict the behavior of external objects such as external object a tree and external object a pedestrian . Classification of such external objects may broadly classify objects as static objects such as external object and dynamic objects such as external object . The localizer and the perception engine as well as other components of the AV controller collaborate to cause autonomous vehicles to drive autonomously.

According to some examples autonomous vehicle service platform is configured to provide teleoperator services should an autonomous vehicle request teleoperation. For example consider that an autonomous vehicle controller in autonomous vehicle detects an object obscuring a path on roadway at point as depicted in inset . If autonomous vehicle controller cannot ascertain a path or trajectory over which vehicle may safely transit with a relatively high degree of certainty then autonomous vehicle controller may transmit request message for teleoperation services. In response a teleoperator computing device may receive instructions from a teleoperator to perform a course of action to successfully and safely negotiate obstacles . Response data then can be transmitted back to autonomous vehicle to cause the vehicle to for example safely cross a set of double lines as it transits along the alternate path . In some examples teleoperator computing device may generate a response identifying geographic areas to exclude from planning a path. In particular rather than provide a path to follow a teleoperator may define areas or locations that the autonomous vehicle must avoid.

In view of the foregoing the structures and or functionalities of autonomous vehicle and or autonomous vehicle controller as well as their components can perform real time or near real time trajectory calculations through autonomous related operations such as localization and perception to enable autonomous vehicles to self drive.

In some cases the bidirectional nature of bidirectional autonomous vehicle provides for a vehicle that has quad portions or any other number of symmetric portions that are similar or are substantially similar to each other. Such symmetry reduces complexity of design and decreases relatively the number of unique components or structures thereby reducing inventory and manufacturing complexities. For example a drivetrain and wheel system may be disposed in any of the quad portions . Further autonomous vehicle controller is configured to invoke teleoperation services to reduce the likelihood that an autonomous vehicle is delayed in transit while resolving an event or issue that may otherwise affect the safety of the occupants. In some cases the visible portion of road network depicts a geo fenced region that may limit or otherwise control the movement of autonomous vehicles to the road network shown in . According to various examples autonomous vehicle and a fleet thereof may be configurable to operate as a level 4 full self driving automation or L4 vehicle that can provide transportation on demand with the convenience and privacy of point to point personal mobility while providing the efficiency of shared vehicles. In some examples autonomous vehicle or any autonomous vehicle described herein may be configured to omit a steering wheel or any other mechanical means of providing manual i.e. human controlled steering for autonomous vehicle . Further autonomous vehicle or any autonomous vehicle described herein may be configured to omit a seat or location reserved within the vehicle for an occupant to engage a steering wheel or any mechanical interface for a steering system.

At data representing a subset of candidate trajectories may be received from an autonomous vehicle responsive to the detection of the event. For example a planner of an autonomous vehicle controller may calculate and evaluate large numbers of trajectories e.g. thousands or greater per unit time such as a second. In some embodiments candidate trajectories are a subset of the trajectories that provide for relatively higher confidence levels that an autonomous vehicle may move forward safely in view of the event e.g. using an alternate path provided by a teleoperator . Note that some candidate trajectories may be ranked or associated with higher degrees of confidence than other candidate trajectories. According to some examples subsets of candidate trajectories may originate from any number of sources such as a planner a teleoperator computing device e.g. teleoperators can determine and provide approximate paths etc. and may be combined as a superset of candidate trajectories. At path guidance data may be identified at one or more processors. The path guidance data may be configured to assist a teleoperator in selecting a guided trajectory from one or more of the candidate trajectories. In some instances the path guidance data specifies a value indicative of a confidence level or probability that indicates the degree of certainty that a particular candidate trajectory may reduce or negate the probability that the event may impact operation of an autonomous vehicle. A guided trajectory as a selected candidate trajectory may be received at responsive to input from a teleoperator e.g. a teleoperator may select at least one candidate trajectory as a guided trajectory from a group of differently ranked candidate trajectories . The selection may be made via an operator interface that lists a number of candidate trajectories for example in order from highest confidence levels to lowest confidence levels. At the selection of a candidate trajectory as a guided trajectory may be transmitted to the vehicle which in turn implements the guided trajectory for resolving the condition by causing the vehicle to perform a teleoperator specified maneuver. As such the autonomous vehicle may transition from a non normative operational state.

According to some embodiments portions of the autonomous vehicle AV control logic may be implemented using clusters of graphics processing units GPUs implementing a framework and programming model suitable for programming the clusters of GPUs. For example a compute unified device architecture CUDA compatible programming language and application programming interface API model may be used to program the GPUs. CUDA is produced and maintained by NVIDIA of Santa Clara Calif. Note that other programming languages may be implemented such as OpenCL or any other parallel programming language.

According to some embodiments autonomous vehicle control logic may be implemented in hardware and or software as autonomous vehicle controller which is shown to include a motion controller a planner a perception engine and a localizer . As shown autonomous vehicle controller is configured to receive camera data Lidar data and radar data or any other range sensing or localization data including sonar data or the like. Autonomous vehicle controller is also configured to receive positioning data such as GPS data IMU data and other position sensing data e.g. wheel related data such as steering angles angular velocity etc. . Further autonomous vehicle controller may receive any other sensor data as well as reference data . In some cases reference data includes map data e.g. 3D map data 2D map data 4D map data e.g. including Epoch Determination and route data e.g. road network data including but not limited to RNDF data or similar data MDF data or similar data etc.

Localizer is configured to receive sensor data from one or more sources such as GPS data wheel data IMU data Lidar data camera data radar data and the like as well as reference data e.g. 3D map data and route data . Localizer integrates e.g. fuses the sensor data and analyzes the data by comparing sensor data to map data to determine a local pose or position of bidirectional autonomous vehicle . According to some examples localizer may generate or update the pose or position of any autonomous vehicle in real time or near real time. Note that localizer and its functionality need not be limited to bi directional vehicles and can be implemented in any vehicle of any type. Therefore localizer as well as other components of AV controller may be implemented in a uni directional vehicle or any non autonomous vehicle. According to some embodiments data describing a local pose may include one or more of an x coordinate a y coordinate a z coordinate or any coordinate of any coordinate system including polar or cylindrical coordinate systems or the like a yaw value a roll value a pitch value e.g. an angle value a rate e.g. velocity altitude and the like.

Perception engine is configured to receive sensor data from one or more sources such as Lidar data camera data radar data and the like as well as local pose data. Perception engine may be configured to determine locations of external objects based on sensor data and other data. External objects for instance may be objects that are not part of a drivable surface. For example perception engine may be able to detect and classify external objects as pedestrians bicyclists dogs other vehicles etc. e.g. perception engine is configured to classify the objects in accordance with a type of classification which may be associated with semantic information including a label . Based on the classification of these external objects the external objects may be labeled as dynamic objects or static objects. For example an external object classified as a tree may be labeled as a static object while an external object classified as a pedestrian may be labeled as a static object. External objects labeled as static may or may not be described in map data. Examples of external objects likely to be labeled as static include traffic cones cement barriers arranged across a roadway lane closure signs newly placed mailboxes or trash cans adjacent a roadway etc. Examples of external objects likely to be labeled as dynamic include bicyclists pedestrians animals other vehicles etc. If the external object is labeled as dynamic and further data about the external object may indicate a typical level of activity and velocity as well as behavior patterns associated with the classification type. Further data about the external object may be generated by tracking the external object. As such the classification type can be used to predict or otherwise determine the likelihood that an external object may for example interfere with an autonomous vehicle traveling along a planned path. For example an external object that is classified as a pedestrian may be associated with some maximum speed as well as an average speed e.g. based on tracking data . The velocity of the pedestrian relative to the velocity of an autonomous vehicle can be used to determine if a collision is likely. Further perception engine may determine a level of uncertainty associated with a current and future state of objects. In some examples the level of uncertainty may be expressed as an estimated value or probability .

Planner is configured to receive perception data from perception engine and may also include localizer data from localizer . According to some examples the perception data may include an obstacle map specifying static and dynamic objects located in the vicinity of an autonomous vehicle whereas the localizer data may include a local pose or position. In operation planner generates numerous trajectories and evaluates the trajectories based on at least the location of the autonomous vehicle against relative locations of external dynamic and static objects. Planner selects an optimal trajectory based on a variety of criteria over which to direct the autonomous vehicle in way that provides for collision free travel. In some examples planner may be configured to calculate the trajectories as probabilistically determined trajectories. Further planner may transmit steering and propulsion commands as well as decelerating or braking commands to motion controller . Motion controller subsequently may convert any of the commands such as a steering command a throttle or propulsion command and a braking command into control signals e.g. for application to actuators or other mechanical interfaces to implement changes in steering or wheel angles and or velocity .

Localizer is configured to localize autonomous vehicle i.e. determine a local pose relative to reference data which may include map data route data e.g. road network data such as RNDF like data and the like. In some cases localizer is configured to identify for example a point in space that may represent a location of autonomous vehicle relative to features of a representation of an environment. Localizer is shown to include a sensor data integrator which may be configured to integrate multiple subsets of sensor data e.g. of different sensor modalities to reduce uncertainties related to each individual type of sensor. According to some examples sensor data integrator is configured to fuse sensor data e.g. Lidar data camera data radar data etc. to form integrated sensor data values for determining a local pose. According to some examples localizer retrieves reference data originating from a reference data repository which includes a map data repository for storing 2D map data 3D map data 4D map data and the like. Localizer may be configured to identify at least a subset of features in the environment to match against map data to identify or otherwise confirm a pose of autonomous vehicle . According to some examples localizer may be configured to identify any amount of features in an environment such that a set of features can one or more features or all features. In a specific example any amount of Lidar data e.g. most or substantially all Lidar data may be compared against data representing a map for purposes of localization. Generally non matched objects resulting from the comparison of the environment features and map data may be a dynamic object such as a vehicle bicyclist pedestrian etc. Note that detection of dynamic objects including obstacles may be performed with or without map data. In particular dynamic objects may be detected and tracked independently of map data i.e. in the absence of map data . In some instances 2D map data and 3D map data may be viewed as global map data or map data that has been validated at a point in time by autonomous vehicle service platform . As map data in map data repository may be updated and or validated periodically a deviation may exist between the map data and an actual environment in which the autonomous vehicle is positioned. Therefore localizer may retrieve locally derived map data generated by local map generator to enhance localization. Local map generator is configured to generate local map data in real time or near real time. Optionally local map generator may receive static and dynamic object map data to enhance the accuracy of locally generated maps by for example disregarding dynamic objects in localization. According to at least some embodiments local map generator may be integrated with or formed as part of localizer . In at least one case local map generator either individually or in collaboration with localizer may be configured to generate map and or reference data based on simultaneous localization and mapping SLAM or the like. Note that localizer may implement a hybrid approach to using map data whereby logic in localizer may be configured to select various amounts of map data from either map data repository or local map data from local map generator depending on the degrees of reliability of each source of map data. Therefore localizer may still use out of date map data in view of locally generated map data.

Perception engine is configured to for example assist planner in planning routes and generating trajectories by identifying objects of interest in a surrounding environment in which autonomous vehicle is transiting. Further probabilities may be associated with each of the object of interest whereby a probability may represent a likelihood that an object of interest may be a threat to safe travel e.g. a fast moving motorcycle may require enhanced tracking rather than a person sitting at a bus stop bench while reading a newspaper . As shown perception engine includes an object detector and an object classifier . Object detector is configured to distinguish objects relative to other features in the environment and object classifier may be configured to classify objects as either dynamic or static objects and track the locations of the dynamic and the static objects relative to autonomous vehicle for planning purposes. Further perception engine may be configured to assign an identifier to a static or dynamic object that specifies whether the object is or has the potential to become an obstacle that may impact path planning at planner . Although not shown in note that perception engine may also perform other perception related functions such as segmentation and tracking examples of which are described below.

Planner is configured to generate a number of candidate trajectories for accomplishing a goal to reaching a destination via a number of paths or routes that are available. Trajectory evaluator is configured to evaluate candidate trajectories and identify which subsets of candidate trajectories are associated with higher degrees of confidence levels of providing collision free paths to the destination. As such trajectory evaluator can select an optimal trajectory based on relevant criteria for causing commands to generate control signals for vehicle components e.g. actuators or other mechanisms . Note that the relevant criteria may include any number of factors that define optimal trajectories the selection of which need not be limited to reducing collisions. For example the selection of trajectories may be made to optimize user experience e.g. user comfort as well as collision free trajectories that comply with traffic regulations and laws. User experience may be optimized by moderating accelerations in various linear and angular directions e.g. to reduce jerking like travel or other unpleasant motion . In some cases at least a portion of the relevant criteria can specify which of the other criteria to override or supersede while maintain optimized collision free travel. For example legal restrictions may be temporarily lifted or deemphasized when generating trajectories in limited situations e.g. crossing double yellow lines to go around a cyclist or travelling at higher speeds than the posted speed limit to match traffic flows . As such the control signals are configured to cause propulsion and directional changes at the drivetrain and or wheels. In this example motion controller is configured to transform commands into control signals e.g. velocity wheel angles etc. for controlling the mobility of autonomous vehicle . In the event that trajectory evaluator has insufficient information to ensure a confidence level high enough to provide collision free optimized travel planner can generate a request to teleoperator for teleoperator support.

Autonomous vehicle service platform includes teleoperator e.g. a teleoperator computing device reference data repository a map updater a vehicle data controller a calibrator and an off line object classifier . Note that each element of autonomous vehicle service platform may be independently located or distributed and in communication with other elements in autonomous vehicle service platform . Further element of autonomous vehicle service platform may independently communicate with the autonomous vehicle via the communication layer . Map updater is configured to receive map data e.g. from local map generator sensors or any other component of autonomous vehicle controller and is further configured to detect deviations for example of map data in map data repository from a locally generated map. Vehicle data controller can cause map updater to update reference data within repository and facilitate updates to 2D 3D and or 4D map data. In some cases vehicle data controller can control the rate at which local map data is received into autonomous vehicle service platform as well as the frequency at which map updater performs updating of the map data.

Calibrator is configured to perform calibration of various sensors of the same or different types. Calibrator may be configured to determine the relative poses of the sensors e.g. in Cartesian space x y z and orientations of the sensors e.g. roll pitch and yaw . The pose and orientation of a sensor such a camera Lidar sensor radar sensor etc. may be calibrated relative to other sensors as well as globally relative to the vehicle s reference frame. Off line self calibration can also calibrate or estimate other parameters such as vehicle inertial tensor wheel base wheel radius or surface road friction. Calibration can also be done online to detect parameter change according to some examples. Note too that calibration by calibrator may include intrinsic parameters of the sensors e.g. optical distortion beam angles etc. and extrinsic parameters. In some cases calibrator may be performed by maximizing a correlation between depth discontinuities in 3D laser data and edges of image data as an example. Off line object classification is configured to receive data such as sensor data from sensors or any other component of autonomous vehicle controller . According to some embodiments an off line classification pipeline of off line object classification may be configured to pre collect and annotate objects e.g. manually by a human and or automatically using an offline labeling algorithm and may further be configured to train an online classifier e.g. object classifier which can provide real time classification of object types during online autonomous operation.

Teleoperator manager is configured to manage a number of teleoperator computing devices with which teleoperators provide input. Simulator is configured to simulate operation of one or more autonomous vehicles as well as the interactions between teleoperator manager and an autonomous vehicle . Simulator may also simulate operation of a number of sensors including the introduction of simulated noise disposed in autonomous vehicle . Further an environment such as a city may be simulated such that a simulated autonomous vehicle can be introduced to the synthetic environment whereby simulated sensors may receive simulated sensor data such as simulated laser returns. Simulator may provide other functions as well including validating software updates and or map data. Policy manager is configured to maintain data representing policies or rules by which an autonomous vehicle ought to behave in view of a variety of conditions or events that an autonomous vehicle encounters while traveling in a network of roadways. In some cases updated policies and or rules may be simulated in simulator to confirm safe operation of a fleet of autonomous vehicles in view of changes to a policy. Some of the above described elements of autonomous vehicle service platform are further described hereinafter.

Communication channels are configured to provide networked communication links among a fleet of autonomous vehicles and autonomous vehicle service platform . For example communication channel includes a number of different types of networks and with corresponding subnetworks e.g. to to ensure a certain level of redundancy for operating an autonomous vehicle service reliably. For example the different types of networks in communication channels may include different cellular network providers different types of data networks etc. to ensure sufficient bandwidth in the event of reduced or lost communications due to outages in one or more networks and .

An example of a data exchange for facilitating teleoperations via the communications protocol is described as follows. Consider that obstacle data is generated by a perception system of an autonomous vehicle controller. Further planner options data is generated by a planner to notify a teleoperator of a subset of candidate trajectories and position data is generated by the localizer. Obstacle data planner options data and position data are transmitted to a messaging service bridge which in accordance with message service configuration data generates telemetry data and query data both of which are transmitted via data centric messaging bus into teleoperator application as telemetry data and query data . Teleoperator API receives telemetry data and inquiry data which in turn are processed in view of Route data and message service configuration data . The resultant data is subsequently presented to a teleoperator via teleoperator computing device and or a collaborative display e.g. a dashboard display visible to a group of collaborating teleoperators . Teleoperator reviews the candidate trajectory options that are presented on the display of teleoperator computing device and selects a guided trajectory which generates command data and query response data both of which are passed through teleoperator API as query response data and command data . In turn query response data and command data are transmitted via data centric messaging bus into autonomous vehicle application as query response data and command data . Messaging service bridge receives query response data and command data and generates teleoperator command data which is configured to generate a teleoperator selected trajectory for implementation by a planner. Note that the above described messaging processes are not intended to be limiting and other messaging protocols may be implemented as well.

Trajectory evaluator includes a state and event manager which in turn may include a confidence level generator . Trajectory evaluator further includes a guided trajectory generator and a trajectory generator . Further planner is configured to receive policy data perception engine data and localizer data .

Policy data may include criteria with which planner uses to determine a path that has a sufficient confidence level with which to generate trajectories according to some examples. Examples of policy data include policies that specify that trajectory generation is bounded by stand off distances to external objects e.g. maintaining a safety buffer of 3 feet from a cyclist as possible or policies that require that trajectories must not cross a center double yellow line or policies that require trajectories to be limited to a single lane in a 4 lane roadway e.g. based on past events such as typically congregating at a lane closest to a bus stop and any other similar criteria specified by policies. Perception engine data includes maps of locations of static objects and dynamic objects of interest and localizer data includes at least a local pose or position.

State and event manager may be configured to probabilistically determine a state of operation for an autonomous vehicle. For example a first state of operation i.e. normative operation may describe a situation in which trajectories are collision free whereas a second state of operation i.e. non normative operation may describe another situation in which the confidence level associated with possible trajectories are insufficient to guarantee collision free travel. According to some examples state and event manager is configured to use perception data to determine a state of autonomous vehicle that is either normative or non normative. Confidence level generator may be configured to analyze perception data to determine a state for the autonomous vehicle. For example confidence level generator may use semantic information associated with static and dynamic objects as well as associated probabilistic estimations to enhance a degree of certainty that planner is determining safe course of action. For example planner may use perception engine data that specifies a probability that an object is either a person or not a person to determine whether planner is operating safely e.g. planner may receive a degree of certainty that an object has a 98 probability of being a person and a probability of 2 that the object is not a person .

Upon determining a confidence level e.g. based on statistics and probabilistic determinations is below a threshold required for predicted safe operation a relatively low confidence level e.g. single probability score may trigger planner to transmit a request for teleoperation support to autonomous vehicle service platform . In some cases telemetry data and a set of candidate trajectories may accompany the request. Examples of telemetry data include sensor data localization data perception data and the like. A teleoperator may transmit via teleoperator computing device a selected trajectory to guided trajectory generator . As such selected trajectory is a trajectory formed with guidance from a teleoperator. Upon confirming there is no change in the state e.g. a non normative state is pending guided trajectory generator passes data to trajectory generator which in turn causes trajectory tracker as a trajectory tracking controller to use the teleop specified trajectory for generating control signals e.g. steering angles velocity etc. . Note that planner may trigger transmission of a request for teleoperation support prior to a state transitioning to a non normative state. In particular an autonomous vehicle controller and or its components can predict that a distant obstacle may be problematic and preemptively cause planner to invoke teleoperations prior to the autonomous vehicle reaching the obstacle. Otherwise the autonomous vehicle may cause a delay by transitioning to a safe state upon encountering the obstacle or scenario e.g. pulling over and off the roadway . In another example teleoperations may be automatically invoked prior to an autonomous vehicle approaching a particular location that is known to be difficult to navigate. This determination may optionally take into consideration other factors including the time of day the position of the sun if such situation is likely to cause a disturbance to the reliability of sensor readings and traffic or accident data derived from a variety of sources.

In another state of operation e.g. a normative state static map data current and predicted object state data local pose data and plan data e.g. global plan data are received into trajectory calculator which is configured to calculate e.g. iteratively trajectories to determine an optimal one or more paths. Next at least one path is selected and is transmitted as selected path data . According to some embodiments trajectory calculator is configured to implement re planning of trajectories as an example. Nominal driving trajectory generator is configured to generate trajectories in a refined approach such as by generating trajectories based on receding horizon control techniques. Nominal driving trajectory generator subsequently may transmit nominal driving trajectory path data to for example a trajectory tracker or a vehicle controller to implement physical changes in steering acceleration and other components.

Teleoperator action recommendation controller includes logic configured to receive and or control a teleoperation service request via autonomous vehicle AV planner data which can include requests for teleoperator assistance as well as telemetry data and other data. As such planner data may include recommended candidate trajectories or paths from which a teleoperator via teleoperator computing device may select. According to some examples teleoperator action recommendation controller may be configured to access other sources of recommended candidate trajectories from which to select an optimum trajectory. For example candidate trajectories contained in autonomous vehicle planner data may in parallel be introduced into simulator which is configured to simulate an event or condition being experienced by an autonomous vehicle requesting teleoperator assistance. Simulator can access map data and other data necessary for performing a simulation on the set of candidate trajectories whereby simulator need not exhaustively reiterate simulations to confirm sufficiency. Rather simulator may provide either confirm the appropriateness of the candidate trajectories or may otherwise alert a teleoperator to be cautious in their selection.

Teleoperator interaction capture analyzer may be configured to capture numerous amounts of teleoperator transactions or interactions for storage in repository which for example may accumulate data relating to a number of teleoperator transactions for analysis and generation of policies at least in some cases. According to some embodiments repository may also be configured to store policy data for access by policy manager . Further teleoperator interaction capture analyzer may apply machine learning techniques to empirically determine how best to respond to events or conditions causing requests for teleoperation assistance. In some cases policy manager may be configured to update a particular policy or generate a new policy responsive to analyzing the large set of teleoperator interactions e.g. subsequent to applying machine learning techniques . Policy manager manages policies that may be viewed as rules or guidelines with which an autonomous vehicle controller and its components operate under to comply with autonomous operations of a vehicle. In some cases a modified or updated policy may be applied to simulator to confirm the efficacy of permanently releasing or implementing such policy changes.

Simulator interface controller is configured to provide an interface between simulator and teleoperator computing devices . For example consider that sensor data from a fleet of autonomous vehicles is applied to reference data updater via autonomous AV fleet data whereby reference data updater is configured to generate updated map and route data . In some implementations updated map and route data may be preliminarily released as an update to data in map data repositories and or as an update to data in route data repository . In this case such data may be tagged as being a beta version in which a lower threshold for requesting teleoperator service may be implemented when for example a map tile including preliminarily updated information is used by an autonomous vehicle. Further updated map and route data may be introduced to simulator for validating the updated map data. Upon full release e.g. at the close of beta testing the previously lowered threshold for requesting a teleoperator service related to map tiles is canceled. User interface graphics controller provides rich graphics to teleoperators whereby a fleet of autonomous vehicles may be simulated within simulator and may be accessed via teleoperator computing device as if the simulated fleet of autonomous vehicles were real.

Fleet optimization manager is shown to include a hybrid autonomous vehicle non autonomous vehicle processor which in turn includes an AV non AV optimization calculator and a non AV selector . According to some examples hybrid autonomous vehicle non autonomous vehicle processor is configured to manage a hybrid fleet of autonomous vehicles and human driven vehicles e.g. as independent contractors . As such autonomous vehicle service may employ non autonomous vehicles to meet excess demand or in areas such as non AV service region that may be beyond a geo fence or in areas of poor communication coverage. AV non AV optimization calculator is configured to optimize usage of the fleet of autonomous and to invite non AV drivers into the transportation service e.g. with minimal or no detriment to the autonomous vehicle service . Non AV selector includes logic for selecting a number of non AV drivers to assist based on calculations derived by AV non AV optimization calculator .

Communication event detector includes a policy download manager and communications configured COMM configured AV dispatcher . Policy download manager is configured to provide autonomous vehicles an updated policy in view of reduced communications region whereby the updated policy may specify routes to quickly exit region if an autonomous vehicle enters that region. For example autonomous vehicle may receive an updated policy moments before driving into region . Upon loss of communications autonomous vehicle implements the updated policy and selects route to drive out of region quickly. COMM configured AV dispatcher may be configured to identify points at which to park autonomous vehicles that are configured as relays to establishing a peer to peer network over region . As such COMM configured AV dispatcher is configured to dispatch autonomous vehicles without passengers to park at locations for the purposes of operating as communication towers in a peer to peer ad hoc network.

Further to diagram localization based data and relative localization based data may be fed into data integrator and localization data integrator respectively. Data integrator and localization data integrator may be configured to fuse corresponding data whereby localization based data may be fused at data integrator prior to being fused with relative localization based data at localization data integrator . According to some embodiments data integrator is formed as part of localization data integrator or is absent. Regardless a localization based data and relative localization based data can be both fed into localization data integrator for purposes of fusing data to generate local position data . Localization based data may include unary constrained data and uncertainty values from projection processor as well as binary constrained data and uncertainty values from odometry processor and integrator processor . Relative localization based data may include unary constrained data and uncertainty values from localization processor and visual registration processor and optionally from radar return processor . According to some embodiments localization data integrator may implement non linear smoothing functionality such as a Kalman filter e.g. a gated Kalman filter a relative bundle adjuster pose graph relaxation particle filter histogram filter or the like.

Referring back to diagram also includes classifier which may include a track classification engine for generating static obstacle data and dynamic obstacle data both of which may be transmitted to the planner for path planning purposes. In at least one example track classification engine is configured to determine whether an obstacle is static or dynamic as well as another classification type for the object e.g. whether the object is a vehicle pedestrian tree cyclist dog cat paper bag etc. . Static obstacle data may be formed as part of an obstacle map e.g. a 2D occupancy map and dynamic obstacle data may be formed to include bounding boxes with data indicative of velocity and classification type. Dynamic obstacle data at least in some cases includes 2D dynamic obstacle map data.

Simulator may be configured to generate a simulated autonomous vehicle controller which includes synthetic adaptations of a perception engine a localizer a motion controller and a planner each of which may have functionalities described herein within simulated environment . Simulator may also generate simulated interfaces I F to simulate the data exchanges with different sensors modalities and different sensor data formats. As such simulated interface may simulate a software interface for packetized data from for example a simulated Lidar sensor . Further simulator may also be configured to generate a simulated autonomous vehicle that implements simulated AV controller . Simulated autonomous vehicle includes simulated Lidar sensors simulated camera or image sensors and simulated radar sensors . In the example shown simulated Lidar sensor may be configured to generate a simulated laser consistent with ray trace which causes generation of simulated sensor return . Note that simulator may simulate the addition of noise or other environmental effects on sensor data e.g. added diffusion or reflections that affect simulated sensor return etc. . Further yet simulator may be configured to simulate a variety of sensor defects including sensor failure sensor miscalibration intermittent data outages and the like.

Simulator includes a physics processor for simulating the mechanical static dynamic and kinematic aspects of an autonomous vehicle for use in simulating behavior of simulated autonomous vehicle . For example physics processor includes a content mechanics module for simulating contact mechanics a collision detection module for simulating the interaction between simulated bodies and a multibody dynamics module to simulate the interaction between simulated mechanical interactions.

Simulator also includes a simulator controller configured to control the simulation to adapt the functionalities of any synthetically generated element of simulated environment to determine cause effect relationship among other things. Simulator includes a simulator evaluator to evaluate the performance synthetically generated element of simulated environment . For example simulator evaluator may analyze simulated vehicle commands e.g. simulated steering angles and simulated velocities to determine whether such commands are an appropriate response to the simulated activities within simulated environment . Further simulator evaluator may evaluate interactions of a teleoperator with the simulated autonomous vehicle via teleoperator computing device . Simulator evaluator may evaluate the effects of updated reference data including updated map tiles and route data which may be added to guide the responses of simulated autonomous vehicle . Simulator evaluator may also evaluate the responses of simulator AV controller when policy data is updated deleted or added. The above description of simulator is not intended to be limiting. As such simulator is configured to perform a variety of different simulations of an autonomous vehicle relative to a simulated environment which include both static and dynamic features. For example simulator may be used to validate changes in software versions to ensure reliability. Simulator may also be used to determine vehicle dynamics properties and for calibration purposes. Further simulator may be used to explore the space of applicable controls and resulting trajectories so as to effect learning by self simulation.

Further to the example shown autonomous vehicle application may also include a user identification controller that may be configured to detect that user is in a geographic region or vicinity near autonomous vehicle as the vehicle approaches. In some situations user may not readily perceive or identify autonomous vehicle as it approaches for use by user e.g. due to various other vehicles including trucks cars taxis and other obstructions that are typical in city environments . In one example autonomous vehicle may establish a wireless communication link e.g. via a radio frequency RF signal such as WiFi or Bluetooth including BLE or the like for communicating and or determining a spatial location of user relative to autonomous vehicle e.g. using relative direction of RF signal and signal strength . In some cases autonomous vehicle may detect an approximate geographic location of user using for example GPS data or the like. A GPS receiver not shown of mobile computing device may be configured to provide GPS data to autonomous vehicle service application . Thus user identification controller may provide GPS data via link to autonomous vehicle service platform which in turn may provide that location to autonomous vehicle via link . Subsequently autonomous vehicle may determine a relative distance and or direction of user by comparing the user s GPS data to the vehicle s GPS derived location.

Autonomous vehicle may also include additional logic to identify the presence of user such that logic configured to perform face detection algorithms to detect either user generally or to specifically identify the identity e.g. name phone number etc. of user based on the user s unique facial characteristics. Further autonomous vehicle may include logic to detect codes for identifying user . Examples of such codes include specialized visual codes such as QR codes color codes etc. specialized audio codes such as voice activated or recognized codes etc. and the like. In some cases a code may be an encoded security key that may be transmitted digitally via link to autonomous vehicle to ensure secure ingress and or egress. Further one or more of the above identified techniques for identifying user may be used as a secured means to grant ingress and egress privileges to user so as to prevent others from entering autonomous vehicle e.g. to ensure third party persons do not enter an unoccupied autonomous vehicle prior to arriving at user . According to various examples any other means for identifying user and providing secured ingress and egress may also be implemented in one or more of autonomous vehicle service application autonomous vehicle service platform and autonomous vehicle .

To assist user in identifying the arrival of its requested transportation autonomous vehicle may be configured to notify or otherwise alert user to the presence of autonomous vehicle as it approaches user . For example autonomous vehicle may activate one or more light emitting devices e.g. LEDs in accordance with specific light patterns. In particular certain light patterns are created so that user may readily perceive that autonomous vehicle is reserved to service the transportation needs of user . As an example autonomous vehicle may generate light patterns that may be perceived by user as a wink or other animation of its exterior and interior lights in such a visual and temporal way. The patterns of light may be generated with or without patterns of sound to identify to user that this vehicle is the one that they booked.

According to some embodiments autonomous vehicle user controller may implement a software application that is configured to control various functions of an autonomous vehicle. Further an application may be configured to redirect or reroute the autonomous vehicle during transit to its initial destination. Further autonomous vehicle user controller may be configured to cause on board logic to modify interior lighting of autonomous vehicle to effect for example mood lighting. Controller may also control a source of audio e.g. an external source such as Spotify or audio stored locally on the mobile computing device select a type of ride e.g. modify desired acceleration and braking aggressiveness modify active suspension parameters to select a set of road handling characteristics to implement aggressive driving characteristics including vibrations or to select soft ride qualities with vibrations dampened for comfort and the like. For example mobile computing device may be configured to control HVAC functions as well like ventilation and temperature.

Note that various structures and or functionalities of are applicable to and as such some elements in those figures may be discussed in the context of .

In some cases computing platform can be disposed in any device such as a computing device which may be disposed in one or more computing devices in an autonomous vehicle service platform an autonomous vehicle and or mobile computing device

Computing platform includes a bus or other communication mechanism for communicating information which interconnects subsystems and devices such as processor system memory e.g. RAM etc. storage device e.g. ROM etc. an in memory cache which may be implemented in RAM or other portions of computing platform a communication interface e.g. an Ethernet or wireless controller a Bluetooth controller NFC logic etc. to facilitate communications via a port on communication link to communicate for example with a computing device including mobile computing and or communication devices with processors. Processor can be implemented with one or more graphics processing units GPUs with one or more central processing units CPUs such as those manufactured by Intel Corporation or one or more virtual processors as well as any combination of CPUs and virtual processors. Computing platform exchanges data representing inputs and outputs via input and output devices including but not limited to keyboards mice audio inputs e.g. speech to text devices user interfaces displays monitors cursors touch sensitive displays LCD or LED displays and other I O related devices.

According to some examples computing platform performs specific operations by processor executing one or more sequences of one or more instructions stored in system memory and computing platform can be implemented in a client server arrangement peer to peer arrangement or as any mobile computing device including smart phones and the like. Such instructions or data may be read into system memory from another computer readable medium such as storage device . In some examples hard wired circuitry may be used in place of or in combination with software instructions for implementation. Instructions may be embedded in software or firmware. The term computer readable medium refers to any tangible medium that participates in providing instructions to processor for execution. Such a medium may take many forms including but not limited to non volatile media and volatile media. Non volatile media includes for example optical or magnetic disks and the like. Volatile media includes dynamic memory such as system memory .

Common forms of computer readable media includes for example floppy disk flexible disk hard disk magnetic tape any other magnetic medium CD ROM any other optical medium punch cards paper tape any other physical medium with patterns of holes RAM PROM EPROM FLASH EPROM any other memory chip or cartridge or any other medium from which a computer can read. Instructions may further be transmitted or received using a transmission medium. The term transmission medium may include any tangible or intangible medium that is capable of storing encoding or carrying instructions for execution by the machine and includes digital or analog communications signals or other intangible medium to facilitate communication of such instructions. Transmission media includes coaxial cables copper wire and fiber optics including wires that comprise bus for transmitting a computer data signal.

In some examples execution of the sequences of instructions may be performed by computing platform . According to some examples computing platform can be coupled by communication link e.g. a wired network such as LAN PSTN or any wireless network including WiFi of various standards and protocols Bluetooth NFC Zig Bee etc. to any other processor to perform the sequence of instructions in coordination with or asynchronous to one another. Computing platform may transmit and receive messages data and instructions including program code e.g. application code through communication link and communication interface . Received program code may be executed by processor as it is received and or stored in memory or other non volatile storage for later execution.

In the example shown system memory can include various modules that include executable instructions to implement functionalities described herein. System memory may include an operating system O S as well as an application and or logic module s . In the example shown in system memory includes an autonomous vehicle AV controller module and or its components e.g. a perception engine module a localization module a planner module and or a motion controller module any of which or one or more portions of which can be configured to facilitate an autonomous vehicle service by implementing one or more functions described herein.

Referring to the example shown in system memory includes an autonomous vehicle service platform module and or its components e.g. a teleoperator manager a simulator etc. any of which or one or more portions of which can be configured to facilitate managing an autonomous vehicle service by implementing one or more functions described herein.

Referring to the example shown in system memory includes an autonomous vehicle AV module and or its components for use for example in a mobile computing device. One or more portions of module can be configured to facilitate delivery of an autonomous vehicle service by implementing one or more functions described herein.

Referring back to the structures and or functions of any of the above described features can be implemented in software hardware firmware circuitry or a combination thereof. Note that the structures and constituent elements above as well as their functionality may be aggregated with one or more other structures or elements. Alternatively the elements and their functionality may be subdivided into constituent sub elements if any. As software the above described techniques may be implemented using various types of programming or formatting languages frameworks syntax applications protocols objects or techniques. As hardware and or firmware the above described techniques may be implemented using various types of programming or integrated circuit design languages including hardware description languages such as any register transfer language RTL configured to design field programmable gate arrays FPGAs application specific integrated circuits ASICs or any other type of integrated circuit. According to some embodiments the term module can refer for example to an algorithm or a portion thereof and or logic implemented in either hardware circuitry or software or a combination thereof. These can be varied and are not limited to the examples or descriptions provided.

In some embodiments module of module of and module of or one or more of their components or any process or device described herein can be in communication e.g. wired or wirelessly with a mobile device such as a mobile phone or computing device or can be disposed therein.

In some cases a mobile device or any networked computing device not shown in communication with one or more modules module of module of and module of or one or more of its components or any process or device described herein can provide at least some of the structures and or functions of any of the features described herein. As depicted in the above described figures the structures and or functions of any of the above described features can be implemented in software hardware firmware circuitry or any combination thereof. Note that the structures and constituent elements above as well as their functionality may be aggregated or combined with one or more other structures or elements. Alternatively the elements and their functionality may be subdivided into constituent sub elements if any. As software at least some of the above described techniques may be implemented using various types of programming or formatting languages frameworks syntax applications protocols objects or techniques. For example at least one of the elements depicted in any of the figures can represent one or more algorithms. Or at least one of the elements can represent a portion of logic including a portion of hardware configured to provide constituent structures and or functionalities.

For example module of module of and module of or one or more of its components or any process or device described herein can be implemented in one or more computing devices i.e. any mobile computing device such as a wearable device an audio device such as headphones or a headset or mobile phone whether worn or carried that include one or more processors configured to execute one or more algorithms in memory. Thus at least some of the elements in the above described figures can represent one or more algorithms. Or at least one of the elements can represent a portion of logic including a portion of hardware configured to provide constituent structures and or functionalities. These can be varied and are not limited to the examples or descriptions provided.

As hardware and or firmware the above described structures and techniques can be implemented using various types of programming or integrated circuit design languages including hardware description languages such as any register transfer language RTL configured to design field programmable gate arrays FPGAs application specific integrated circuits ASICs multi chip modules or any other type of integrated circuit.

For example module of module of and module of or one or more of its components or any process or device described herein can be implemented in one or more computing devices that include one or more circuits. Thus at least one of the elements in the above described figures can represent one or more components of hardware. Or at least one of the elements can represent a portion of logic including a portion of a circuit configured to provide constituent structures and or functionalities.

According to some embodiments the term circuit can refer for example to any system including a number of components through which current flows to perform one or more functions the components including discrete and complex components. Examples of discrete components include transistors resistors capacitors inductors diodes and the like and examples of complex components include memory processors analog circuits digital circuits and the like including field programmable gate arrays FPGAs application specific integrated circuits ASICs . Therefore a circuit can include a system of electronic components and logic components e.g. logic configured to execute instructions such that a group of executable instructions of an algorithm for example and thus is a component of a circuit . According to some embodiments the term module can refer for example to an algorithm or a portion thereof and or logic implemented in either hardware circuitry or software or a combination thereof i.e. a module can be implemented as a circuit . In some embodiments algorithms and or the memory in which the algorithms are stored are components of a circuit. Thus the term circuit can also refer for example to a system of components including algorithms. These can be varied and are not limited to the examples or descriptions provided.

Teleoperator manager is configured to facilitate a connection or session via a communication channel over network between one of teleoperators and autonomous vehicle responsive to receiving a signal to invoke teleoperations received from autonomous vehicle from within an autonomous vehicle service platform not shown in which teleoperator manager is disposed or from teleoperator computing device . Examples of such signals include message data and are configured to provide information for purposes of monitoring autonomous vehicle by teleoperator i.e. without requiring active teleoperator intervention . Or such signals may include a request for teleoperator to perform a task e.g. provide guidance . In some examples in which navigation related teleoperation services is requested by autonomous vehicle teleoperator manager may provide data representing implicit guidance or explicit guidance. As to the latter an example of explicit guidance includes actions relating to specific routing paths i.e. specific roadways or segments that may be transmitted from teleoperator manager via network as instruction data . As to the former examples of implicit guidance include instructions to avoid or bypass certain geographic regions e.g. suggested subset of roadways to deemphasize or exclude from trajectory calculations so as to guide autonomous vehicle away from these regions as well as instructions specifying regions through which travel is preferred e.g. suggested subsets of roadways or segments to emphasize or include e.g. as a preference in trajectory calculations so as to guide autonomous vehicle toward these regions . According to at least one example any teleoperator may initiate communication or otherwise cause communication between teleoperator computing device and autonomous vehicle .

According to some examples teleoperator manager may be invoked responsive to message data which may include a request for one type of many teleoperation services. For instance the request for teleoperation service may include a request to negotiate difficult or unsafe roadway conditions and obstacles external to autonomous vehicle . An open door on a parked car that may be impeding travel by autonomous vehicle may be views as such an obstacle. Message data may also include data representing an indication that for example observed lane markings are not located at expected positions in the physical environment. Message data may also include a request for teleoperator services if for instance autonomous vehicle controller experiences difficulties identifying or classifying one or more objects or obstacles that may affect planning and or trajectory generation. Message data may also include a request to monitor the operation of autonomous vehicle or any component therein e.g. sensor performance drivetrain characteristics battery charge levels etc. . In some examples message data may include information or a request to address sensor related events such as a degraded or failed Lidar sensor radar sensor or sonar sensor. Other examples include faulty temperature measurements degraded tachometer sensing on a drive train etc. An example of degraded Lidar sensor may be due to intense sunlight or other light affecting range measurements. Message data may also include information or a request to address measurements derived from multiple sensors such as kinematic related data. Examples of such measurements may include detected friction or wheel displacement that varies relative to expected values of friction anomalous acceleration measurement etc. Note too that any autonomous vehicle in fleet of autonomous vehicles may generate message data to establish teleoperation services with teleoperator manager or to provide autonomous vehicle teleoperation services. The above described examples are not intended to be limiting and as such message data may include any type of data such as telemetry data or planner data that may be suitable for facilitating teleoperations.

In some cases teleoperator manager may be configured invoke teleoperation services such that autonomous vehicle need not generate message data to establish a session between teleoperator computing device and autonomous vehicle . As shown teleoperator manager may include a message data generator that is configured to self generate teleoperation service messages to establish communications between teleoperator computing device and autonomous vehicle . Diagram further depicts teleoperator manager being communicatively coupled to a repository and to a reference data repository which is shown to include map data repository . Repository may be configured as a policy repository configured to store data representing policies or rules with which to determine when to invoke teleoperation services based on a number of factors that may affect trajectory generation by autonomous vehicle controller at least in some examples. For example data stored in repository may include a rule to connect teleoperator computing device to autonomous vehicles if the vehicle remains stopped e.g. beyond a time related threshold at a stop sign without any other detected obstacle or impediment that may be prohibiting travel through the stop sign. As another example consider a rule that may be configured to invoke teleoperation services after a threshold amount of time has been exceeded during which there is a failure to receive a periodic signal e.g. heartbeat signal that confirms communication via network is present. In yet another example consider that map data associated with a geographic region through which autonomous vehicle is predicted to travel is accessed by teleoperator manager . In some cases such map data may be linked to alert data AD that indicates that one or more routes e.g. in a map tile may be associated with certain levels of uncertainty or navigational complexities. Or in some cases alert data may be linked to temporary map data that is used temporarily for localization until for example the map data may be validated e.g. via simulation etc. . Therefore alert data causes instantiation of a teleoperations session to enable a teleoperator to monitor usage of such map data by autonomous vehicle . When autonomous vehicle reaches a location relevant to map tiles linked to alert data teleoperator manager may establish a connection link between teleoperator computing device and the vehicle. The above described examples are not intended to be limiting and as such message data generator may generate any type of data suitable for facilitating teleoperations.

Diagram further depicts that teleoperator manager includes a teleoperator action controller which may be configured to facilitate interactions between teleoperator and autonomous vehicle controller in autonomous vehicle . Teleoperator action controller is shown to include an action generator that may be configured to generate data to initiate one or more actions to observe assist monitor etc. one or more aspects of autonomous vehicle responsive to for example input from teleoperator . Action generator may be configured to determine one or more courses of actions as one or more teleoperations services to navigate or otherwise assist autonomous vehicle . For example action generator may generate a subset of actions that may be undertaken by a teleoperator for navigating or assisting in navigating autonomous vehicle around an unsafe condition or hazardous obstacle. In this case an action selected by teleoperator may cause autonomous vehicle to travel a particular route that includes one or more road segments over which to navigate around for example an event location e.g. a geographic location or region in which an event may occur .

Further action generator may be configured to generate navigational data e.g. as instruction data to guide autonomous vehicle . Thus action generator may identify routes or regions of either preference or avoidance that may define data configured for use as instruction data by for example a planner not shown of autonomous vehicle controller . Action generator may further be configured to initiate a self diagnostic tests e.g. responsive to selection by teleoperator or calibration of subsets of sensors communication devices electrical components electromechanical components etc. to solicit additional information with which teleoperator may use to ensure intended operability of autonomous vehicle . Thus teleoperator may communicate via teleoperator manager with autonomous vehicle to evaluate operability of a failing sensor and may further send instruction data to cause autonomous vehicle controller to diagnose e.g. perform diagnostics etc. modify or correct operation of the sensor of interest. An action may also be represented by data configured to cause presentation of each view of a sensor e.g. each individual set of laser returns for each Lidar sensor to assist teleoperator in monitoring or diagnosing sensor performance issues. Another action generated by action generator may include data representing instructions to fetch sensor data from autonomous vehicle associated with a past time interval so that for example teleoperator may be able to visually review actions of autonomous vehicle during a loss of communication e.g. during which autonomous vehicle self navigates using a contingent trajectory to performs a safe stop operation when principal trajectories are not available such as if operation of a planner degrades or fails .

According to various examples an event relevant to teleoperation services may be a condition or situation affecting operation or potentially affecting operation of an autonomous vehicle e.g. an event may be associated with or characterized by a calculated confidence level . An event may be internal or external to autonomous vehicle . For example an obstacle obscuring a roadway may be viewed as an event as well as a reduction or loss of communication. An event may include traffic conditions or congestion as well as unexpected or unusual numbers or types of external objects or tracks that are perceived by a perception engine. An event may include weather related conditions e.g. loss of friction due to ice or rain or the angle at which the sun is shining e.g. at sunset such as low angle to the horizon that causes sun to shine brightly in the eyes of human drivers of other vehicles. Bright sunlight may also impair operability of sensors such as laser or camera based sensors. Accordingly an event may be a condition associated with degraded performance of one or more sensors or failure thereof. An event may arise due to a rule violation e.g. for a rule stored in repository or the detection of alert data linked to map data being used for localization. The above described examples are not intended to be limiting and as such these and other conditions may be viewed as events that may cause invocation of a teleoperator service.

Diagram shows that teleoperator action controller also includes a communication link manager that may be configured to monitor and characterize attributes of communication links via networks e.g. bandwidth identifiers for alternative communication networks such as various cellular networks and or other wireless networks etc. . For example communication link manager may detect a change in bandwidth such as a reduction in bandwidth and may adjust functionality of teleoperator manager to facilitate teleoperations service. To illustrate consider a situation in which an amount of bandwidth of a communication link via networks is reduced. When generating a display of teleoperator communication device amounts of visualization data may be changed to enable teleoperator to visually monitor a physical environment in which autonomous vehicle travel. For example communication link manager may cause visualization data to depict bounding boxes of dynamic and static objects in the physical environment rather than using sensor data having greater data amounts than the bounding boxes. Additionally communication link manager may adjust bandwidth in accordance with a criticality of an event for which teleoperation service may assist. Examples of events of low criticality e.g. low probability of causing inoperability include minor deviations in performance of a sensor for which there are other redundant sensors whereas examples of events of high criticality e.g. high probability of causing inoperability include obstacles in a roadway. Further communication link manager may be configured to identify the presence or absence of communication links among one or more autonomous vehicles and teleoperator manager and may be configured to adapt teleoperation services accordingly. For example upon detecting a loss of a periodic confirmation signal teleoperator manager may alert teleoperator of the event so that the teleoperator may seek alternate modes of communication e.g. generate actions by action generator to implement other cellular networks peer to peer e.g. autonomous vehicle to autonomous vehicle networks etc. .

Teleoperator manager of diagram also includes user interface controller which may be configured to facilitate visualization and user interface functionality. Visualization controller of user interface controller is configured to process sensor generated data e.g. fused sensor data of one or more of Lidar sensors cameras radars sonars etc. to generate high definition visualization data for presentation on a display of teleoperator computing device . In some examples visualization controller may implement one or more graphics processing units GPUs including clusters of GPUs to facilitate generation of imagery of high fidelity with which teleoperator may use to assist autonomous vehicle . According to some examples visualization controller may generate visualization data responsive to data from communication link manager . In particular visualization controller may facilitate the use of bounding boxes for presentation on a display rather than an image of an object associated with the bounding box if communication link manager indicates occurrence of an event of reduced availability of bandwidth.

Input output controller of user interface controller is configured to generate data representing user inputs and user outputs both of which may be presented to a user interface or display of teleoperator computing device . Data signals associated with user inputs and user outputs may be exchanged between a user interface of teleoperator computing device and teleoperator manager . Such data signals may facilitate operation of any of the components of teleoperator manager or any other component of an autonomous vehicle service platform to implement teleoperation services. Note that elements depicted in diagram of may include structures and or functions as similarly named elements described in connection to one or more other drawings described herein.

Diagram further depicts a variety of examples of accepting user inputs via user interface to facilitate any number of actions to guide navigation of autonomous vehicles . In the following examples autonomous vehicle may be displayed or visually represented as either autonomous vehicle representation or autonomous vehicle representation . According to an example shown a teleoperator may influence navigation of autonomous vehicle by applying user input s to user interface whereby data signals representing inputs and outputs may be exchanged via any of one or more input and output devices including but not limited to keyboards mice audio inputs e.g. speech to text devices graphical user interfaces displays monitors cursors touch sensitive displays LCD or LED displays and other I O related devices. As a representation of an impending event location is displayed on user interface a teleoperator may interact with user interface to provide implicit guidance or explicit guidance to modify trajectories of autonomous vehicle .

To illustrate commands implemented by a teleoperator consider an example in which user interface displays an autonomous vehicle representation and a teleoperator interacts with user interface to assist in navigating autonomous vehicle in view of an event associated with that location . The user input such as user input e.g. via cursor or touch screen input may set a navigation point D which may be used to provide implicit guidance. In this example navigation point D may represent a point associated with a geographic region in road network that may influence planning and trajectory generation at autonomous vehicle . Navigation point D may be configured to generate trajectories either toward navigation point D i.e. as an attract point or away from navigation point D i.e. as a repel point . According to some examples the degree of attracting or repelling may have values that vary linearly or non linearly from the distance r between vehicle and navigation point D. For example if navigation point D is configured as a repel point a planner at autonomous vehicle may generate trajectories to determine e.g. probabilistically that road segment is less likely to be included in generated trajectories than road segment which is at a further distance from navigation point D than road segment .

Further to the example shown a teleoperator may establish a boundary to either attract or repel trajectory generation for autonomous vehicle either toward or away from the boundary. As shown user input to user interface may establish a repel boundary between navigation points A and B which generates input signal data that teleoperator manager processes to form instruction data which in turn is used in trajectory generation processes of autonomous vehicle to avoid repel boundary . Note too addition of navigation point C may establish a repel region that encapsulates road segments and both of which may be deemphasized in or excluded from trajectory generation so as to bypass event location . In some cases repel region may be configured as a no travel zone in which travel is prohibited. In other instance repel boundary and repel region may be formed as an attract boundary and an attract region respectively if a teleoperator desires that autonomous vehicle navigates to event location e.g. via road segment or road segment . According to some examples user input may include continuous inputs or semi continuous inputs as a set of navigation points formed for example when a teleoperator swipes a finger across a surface of user interface . As shown user input forms an attract region which is configured to influence trajectory generation toward road segments associated with or in the vicinity of attract region . In various examples the above described navigation points boundaries and regions may be applied to a specific autonomous vehicle or to multiple autonomous vehicles e.g. a fleet of autonomous vehicles including an autonomous vehicle associated with autonomous vehicle representation .

Diagram further depicts examples of accepting user inputs via user interface to provide navigational guidance to autonomous vehicles which may be presented via user interface to a teleoperator as autonomous vehicle representation . Teleoperator manager may be configured to accept user inputs to invoke one or more actions via user interface by generating instruction data that may be transmitted to autonomous vehicle . In an instance in which autonomous vehicle is displayed as autonomous vehicle representation teleoperator manager may also be configured to cause presentation of user inputs and which correspond to a first action a second action and a third action respectively for presentation on user interface . Action may include a first subset of instructions that causes autonomous vehicle representation and thus autonomous vehicle to turn left at a first street. Action may include a subset of instructions that causes autonomous vehicle representation and autonomous vehicle to turn left at a second street. Action may include a subset of instructions that causes autonomous vehicle representation and autonomous vehicle to turn right at the second street. Note that actions to are configured to provide a teleoperator guided route to cause autonomous vehicle to bypass event location . According to some examples user inputs and may be configured as instruction data to override at least one planner generated trajectory.

As shown user interface or a portion thereof may present one or more selectable courses of action with which a teleoperator may implement to assist navigation of autonomous vehicle . In this example a first user input action to implement action a second user input action to implement action and a third user input action to implement action . User inputs and may represent interactive portions of user interface that activate respective data signals as input signals responsive to for example a user input which may be a finger touching a specific portion of user interface . According to some examples a planner of autonomous vehicle may transmit data representing these selections as message data to teleoperator manager as the planner may identify optimal actions and or trajectories for presentation to and selection by a teleoperator in view of an event. Further user inputs and each are displayed with a corresponding ranking of 0.98 0.96 and 0.89 respectively specifying a relative preference or recommendation for selecting an appropriate user input. Note however any indicia other than ranking may be used. According to some examples user inputs and may presented as a weighted set of potential solutions as actions e.g. probabilistically weighted . In some examples a planner of autonomous vehicle may provide rankings as message data whereby rankings may indicate a probability of successful navigation of a proposed route or trajectory as calculated by the planner. Note that the above described ranking is not limited to probabilities or the numbers shown and may be of any form of distinguishing a recommended selection relative to other recommended selections. Based on ranking value of 0.98 a teleoperator i.e. user input may select user input to effect action .

According to some examples simulator may receive message data as well as any other data from any component of an autonomous vehicle service platform and a fleet of autonomous vehicles to simulate implementation of actions to to determine in real time or near real time for autonomous vehicle or subsequent autonomous vehicles encountering event location whether a specific ranking value is optimal. For example simulator may generate as simulation data simulation values for display with a corresponding user input. In this example a simulation value of 1 may indicate agreement with an associated ranking whereas lesser values of simulation value may indicate a greater divergence from ranking that a teleoperator may wish to consider before relying on rank . In the example shown rank value of user input is associated with a simulation value of 1 and as such a teleoperator may select user input rather than user input . According to some examples simulator may be configured to simulate the operability of autonomous vehicle in a virtual environment teleoperator interactions with user interface and other functions of an autonomous vehicle service platform in which teleoperator manager may be implemented to among other things validate the functionality and structure of teleoperator manager .

According to various examples the implementation of rank values and or simulator values need not be limited to those described above but may include any other values or input types for distinguishing optimal courses of actions that teleoperators may select. Selectable courses of action may be used with providing either implicit or explicit guidance and may include other actions other than navigation related actions. Examples of other actions include actions to test or view sensor data actions to self calibrate or self diagnose issues on board autonomous vehicle actions to communicate with occupants of vehicle and any other relevant action. User inputs such as those shown as selectable courses of actions as well as user inputs configured to implement navigation points boundaries regions and the like may be implemented as preemptive courses of actions whereby autonomous vehicle may receive teleoperation services timely such that operations of autonomous vehicle need not be affected or degraded by for example an event or at event location . For example autonomous vehicle need not stop or modify its performance prior to being impacted by an event. Note that elements depicted in diagram of may include structures and or functions as similarly named elements described in connection to one or more other drawings described herein.

In this example consider that a teleoperator associated with user interface is presented with event related information based on events autonomous vehicle may be experiencing. A teleoperator may receive message representing an immobile alert which may indicate that autonomous vehicle is in encountering one or more events e.g. associated with a range of confidence levels for which teleoperation services may be invoked. In some cases an immobile alert indicates that autonomous vehicle has been immobile beyond a threshold of time for which there may not be determinable reason e.g. an autonomous vehicle controller of autonomous vehicle may not be able to generate acceptable trajectories in view of the events that may prevent safe or unobstructed travel . Here one or more traffic cones may be detected as obstacles as well as an occurrence in which a car door of a parked car extends as an obstacle into a spatial region in which generated trajectories are predicted to traverse. In some cases an autonomous vehicle controller of autonomous vehicle may be configured to detect the above described obstacles prior to arriving at the geographic location associated with view whereby a teleoperator may intervene preemptively to provide navigation guidance as instruction data to cause the vehicle to following path . With preemptive guidance from a teleoperation operation of autonomous vehicle need not be affected by obstacles or minimally affected . In other cases car door may instantaneously open such that autonomous vehicle detects the car door opening and stops to await its closure. If an excessive time at which the vehicle is immobile is detected then message data may include message

In another example consider that teleoperator manager causes message to be displayed to indicate to a teleoperator that communications are lost with autonomous vehicle . For example teleoperator manager determines that an autonomous vehicle service platform fails to receive either sufficient data or a periodic signal e.g. heartbeat signal that confirms communication via network is present. A teleoperator may via user interface initiate one or more actions to reestablish communications. For example a teleoperator computing device may be configured to establish an alternate communication link e.g. via peer to peer networking alternate cellular networks etc. with autonomous vehicle . Further to the above described example consider that communications are reestablished and message is generated to indicate same to a teleoperator. In this case a teleoperator viewing user interface may perceive that autonomous vehicle whether due to loss of communications and or other reasons had implemented a safe stop trajectory to stop autonomous vehicle at a safe region . Also the teleoperator may view a message indicating that autonomous vehicle is for example implementing or has implemented a safe stop recovery mode or routine which may be optional to establish that autonomous vehicle is functionally and or structurally able to continue transiting. For example a safe stop recovery routine may be configured to confirm that subsets of sensors are operating in respective ranges of normative operating parameters. As such autonomous vehicle may be able to resume autonomous vehicle services upon completion of successful safe stop recovery processes.

Further a teleoperator may provide user input to select or activate a user input action which may initiate a self test routine by autonomous vehicle to validate proper operation of its systems. A teleoperator may also select a user input action to cause autonomous vehicle to perform self calibration processes on one or more sensors or other components. In some cases a teleoperator may select a user input action to cause a replay of sensor data subsequent to the loss of communications and prior to the safe start operation to determine for example there were no other events such as autonomous vehicle striking or otherwise encountering a basketball bouncing into the street. A teleoperator may provide instruction data to autonomous vehicle to travel one or more guided trajectories .

Simulator according to some examples may be configured to simulate the operability of autonomous vehicle as virtual autonomous vehicle in a virtual environment. As such virtual autonomous vehicle may generate simulated message data . Note that simulator may also be configured to simulate functionalities of teleoperator manager teleoperator interactions with user interface and other functions of an autonomous vehicle service platform in which simulator may be implemented to among other things simulate and validate the functionality and structure of teleoperator manager .

In some instances teleoperator manager may cause visualization data to adjust content for presentation by for example depicting one or more obstacles as bounding boxes in the depiction of the physical environment rather than using sensor data having greater data amounts than the bounding boxes. As such less data may be transmitted via message data to form view . Or in some cases detected objects or features of the physical environment which sufficiently deviate from map data may be transmitted as message data rather than for example transmitting data associated with static related object or previously detected objects. In some examples a user e.g. a R D developer or passenger may interact with a computing device e.g. a mobile computing device to generate message data or to cause autonomous vehicle to generate such data. Note that elements depicted in diagram of may include structures and or functions as similarly named elements described in connection to one or more other drawings described herein.

In the example shown consider that a teleoperator receives a message indicating that a sensor is operating in a manner that at least one parameter may be operating within a range of marginal parametric values. In some situations views need not be presented on user interface until a teleoperator provides user input to select user input action to cause sensor data to be viewed on user interface . Further a teleoperator may receive via user interface a message specifying a sensor alert whereby at least one sensor parameter value may be deviating from at least one range of normative parametric values. As such an event may be detected as the degradation of sensor functionality. Upon implementation of user input instruction data is transmitted to autonomous vehicle which in response is configured to transmit sensed data from for example sensors to as message data to teleoperator manager which causes presentation of sensor data views and . As shown degradation of a sensor such as sensor may be depicted visually as an anomaly e.g. a physical defect in sensor an obstruction on the sensor too much intense light etc. . Thus a teleoperator may visually confirm the presence of an anomaly in sensor operation. The teleoperator may select user input and user input to perform sensor calibration and sensor reorientation respectively by transmitting such instructions as instruction data to autonomous vehicle . An instruction responsive to user input may cause autonomous vehicle to modify its operation to reduce or negate sensor degradation. An example of reorienting a sensor of interest e.g. sensor is described in among other examples described herein.

According to various examples views for more or fewer sensors than those shown may be presented on user interface . Further any type of sensors such as Lidars cameras radars sonars etc. may provide any type of data for presentation as view . Note too that views and are not limited to the above described sensors and teleoperator manager may be configured to generate any visual representation of sensed parameters such as temperature battery charge wheel angles speed etc.

Simulator according to some examples may be configured to simulate the operability of sensors in autonomous vehicle as virtual sensors used in a virtual environment along with a virtual or synthetic version of autonomous vehicle . Note that simulator generates at least a portion of data may also be configured simulate functionalities of teleoperator manager teleoperator interactions with user interface and other functions of an autonomous vehicle service platform in which simulator may be implemented to among other things simulate and validate the functionality and structure of sensors in autonomous vehicle using teleoperator manager . Note that elements depicted in diagram of may include structures and or functions as similarly named elements described in connection to one or more other drawings described herein.

Referring to the example shown in system memory includes an autonomous vehicle service platform module and or its components e.g. a teleoperator services module etc. any of which or one or more portions of which can be configured to facilitate navigation for an autonomous vehicle service by implementing one or more functions described herein.

Although the foregoing examples have been described in some detail for purposes of clarity of understanding the above described inventive techniques are not limited to the details provided. There are many alternative ways of implementing the above described invention techniques. The disclosed examples are illustrative and not restrictive.

