---

title: Self-propelled device implementing three-dimensional control
abstract: A self-propelled device can include a spherical housing, an internal drive system, and an inertial measurement unit. The self-propelled device can determine an initial frame of reference for the self-propelled device in a three-dimensional coordinate system. The self-propelled device can further receive control inputs from a controller device, translate the control inputs into commands to maneuver the self-propelled device, and implement the commands on the internal drive system to cause the spherical housing to rotate about each axis of the three-dimensional coordinate system. Utilizing the IMU, the self-propelled device can maintain an awareness of an orientation of the spherical housing relative to the initial frame of reference as the spherical housing rotates about each axis of the three-dimensional coordinate system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09395725&OS=09395725&RS=09395725
owner: Sphero, Inc.
number: 09395725
owner_city: Boulder
owner_country: US
publication_date: 20150828
---
This application is a Continuation of U.S. patent application Ser. No. 13 342 874 entitled Self Propelled Device Implementing Three Dimensional Control filed Jan. 3 2012 which claims priority to i U.S. Provisional Patent Application Ser. No. 61 430 023 entitled Method and System for Controlling a Robotic Device filed Jan. 5 2011 ii U.S. Provisional Patent Application Ser. No. 61 430 083 entitled Method and System for Establishing 2 Way Communication for Controlling a Robotic Device filed Jan. 5 2011 and iii U.S. Provisional Patent Application Ser. No. 61 553 923 entitled A Self propelled Device and System and Method for Controlling Same filed Oct. 31 2011 all of the aforementioned priority applications are hereby incorporated by reference in their respective entirety.

Embodiments described herein generally relate to a self propelled device and more specifically to a self propelled device that implements three dimensional control.

Early in human history the wheel was discovered and human fascination with circular and spherical objects began. Humans were intrigued by devices based on these shapes as practical transportation and propulsion and as toys and amusements. Self propelled spherical objects were initially powered by inertia or mechanical energy storage in devices such as coiled springs. As technology has evolved new ways of applying and controlling these devices have been invented.

Today technology is available from robotics high energy density battery systems sophisticated wireless communication links micro sensors for magnetism orientation and acceleration and widely available communication devices with displays and multiple sensors for input.

In an embodiment a self propelled device is provided which includes a drive system a spherical housing and a biasing mechanism. The drive system includes one or more motors that are contained within the spherical housing. The biasing mechanism actively forces the drive system to continuously engage an interior of the spherical housing in order to cause the spherical housing to move.

According to another embodiment a self controlled device maintains a frame of reference about an X Y and Z axis. The self controlled device processes an input to control the self propelled device the input being based on the X and Y axis. The self propelled device is controlled in its movement including about each of the X Y and Z axes based on the input.

Still further another embodiment provides a system that includes a controller device and a self propelled device. The self propelled device is operable to move under control of the controller device and maintains a frame of reference about an X Y and Z axis. The controller device provides an interface to enable a user to enter two dimensional control input about the X and Y axes. The self propelled device processes the control input from the controller device in order to maintain control relative to the X Y and Z axes.

According to another embodiment a self propelled device determines an orientation for its movement based on a pre determined reference frame. A controller device is operable by a user to control the self propelled device. The controller device includes a user interface for controlling at least a direction of movement of the self propelled device. The self propelled device is configured to signal the controller device information that indicates the orientation of the self propelled device. The controller device is configured to orient the user interface based on the information signaled from the self propelled device to reflect the orientation of the self propelled device.

According to another embodiment a controller device is provided for a self propelled device. The controller device includes one or more processors a display screen a wireless communication port and a memory. The processor operates to generate a user interface for controlling at least a directional movement of the self propelled device receive information from the self propelled device over the wireless communication port indicating an orientation of the self propelled device and configure the user interface to reflect the orientation of the self propelled device.

In still another embodiment a self propelled device includes a drive system a wireless communication port a memory and a processor. The memory stores a first set of instructions for mapping individual inputs from a first set of recognizable inputs to a corresponding command that controls movement of the self propelled device. The processor or processors receive one or more inputs from the controller device over the wireless communication port map each of the one or more inputs to a command based on the set of instructions and control the drive system using the command determined for each of the one or more inputs. While the drive system is controlled the processor processes one or more instructions to after the set of recognizable inputs and or the corresponding command that is mapped to the individual inputs in the set of recognizable inputs.

Still further embodiments enable a controller device to include an object or virtual representation of the self propelled device.

As used herein the term substantially means at least almost entirely. In quantitative terms substantially means at least 80 of a stated reference e.g. quantity of shape .

In similar regard spherical or sphere means substantially spherical. An object is spherical if it appears as such as to an ordinary user recognizing that for example manufacturing processes may create tolerances in the shape or design where the object is slightly elliptical or not perfectly symmetrical or that the object may include surface features or mechanisms for which the exterior is not perfectly smooth or symmetrical.

Referring now to the drawings is a schematic depiction of a self propelled device according to one or more embodiments. As described by various embodiments self propelled device can be operated to move under control of another device such as a computing device operated by a user. In some embodiments self propelled device is configured with resources that enable one or more of the following i maintain self awareness of orientation and or position relative to an initial reference frame after the device initiates movement ii process control input programmatically so as to enable a diverse range of program specific responses to different control inputs iii enable another device to control its movement using software or programming logic that is communicative with programming logic on the self propelled device and or iv generate an output response for its movement and state that it is software interpretable by the control device.

In an embodiment self propelled device includes several interconnected subsystems and modules. Processor executes programmatic instructions from program memory . The instructions stored in program memory can be changed for example to add features correct flaws or modify behavior. In some embodiments program memory stores programming instructions that are communicative or otherwise operable with software executing on a computing device. The processor is configured to execute different programs of programming instructions in order to alter the manner in which the self propelled device interprets or otherwise responds to control input from another computing device.

Wireless communication in conjunction with communication transducer serves to exchange data between processor and other external devices. The data exchanges for example provide communications provide control provide logical instructions state information and or provide updates for program memory . In some embodiments processor generates output corresponding to state and or position information that is communicated to the controller device via the wireless communication port. The mobility of the device makes wired connections undesirable the term connection should be understood to mean a logical connection made without a physical attachment to self propelled device .

In one embodiment wireless communication implements the BLUETOOTH communications protocol and transducer is an antenna suitable for transmission and reception of BLUETOOTH radio signals. Other wireless communication mediums and protocols may also be used in alternative implementations.

Sensors provide information about the surrounding environment and condition to processor . In one embodiment sensors include inertial measurement devices including a 3 axis gyroscope a 3 axis accelerometer and a 3 axis magnetometer. According to some embodiments the sensors provide input to enable processor to maintain awareness of the device s orientation and or position relative to the initial reference frame after the device initiates movement. In various embodiments sensors include instruments for detecting light temperature humidity or measuring chemical concentrations or radioactivity.

State variable memory stores information about the present state of the system including for example position orientation rates of rotation and translation in each axis. The state variable memory also stores information corresponding to an initial reference frame of the device upon for example the device being put in use e.g. the device being switched on as well as position and orientation information once the device is in use. In this way some embodiments provide for the device to utilize information of the state variable memory in order to maintain position and orientation information of the device once the device starts moving.

Clock provides timing information to processor . In one embodiment clock provides a timebase for measuring intervals and rates of change. In another embodiment clock provides day date year time and alarm functions. In one embodiment clock allows device to provide an alarm or alert at pre set times.

Expansion port provides a connection for addition of accessories or devices. Expansion port provides for future expansion as well as flexibility to add options or enhancements. For example expansion port is used to add peripherals sensors processing hardware storage displays or actuators to the basic self propelled device .

In one embodiment expansion port provides an interface capable of communicating with a suitably configured component using analog or digital signals. In various embodiments expansion port provides electrical interfaces and protocols that are standard or well known. In one embodiment expansion port implements an optical interface. Exemplary interfaces appropriate for expansion port include the Universal Serial Bus USB Inter Integrated Circuit Bus I2C Serial Peripheral Interface SPI or ETHERNET.

Display presents information to outside devices or persons. Display can present information in a variety of forms. In various embodiments display can produce light in colors and patterns sound vibration music or combinations of sensory stimuli. In one embodiment display operates in conjunction with actuators to communicate information by physical movements of device . For example device can be made to emulate a human head nod or shake to communicate yes or no. 

In one embodiment display is an emitter of light either in the visible or invisible range. Invisible light in the infrared or ultraviolet range is useful for example to send information invisible to human senses but available to specialized detectors. In one embodiment display includes an array of Light Emitting Diodes LEDs emitting various light frequencies arranged such that their relative intensity is variable and the light emitted is blended to form color mixtures.

In one embodiment display includes an LED array comprising several LEDs each emitting a human visible primary color. Processor varies the relative intensity of each of the LEDs to produce a wide range of colors. Primary colors of light are those wherein a few colors can be blended in different amounts to produce a wide gamut of apparent colors. Many sets of primary colors of light are known including for example red green blue red green blue white and red green blue amber. For example red green and blue LEDs together comprise a usable set of three available primary color devices comprising a display in one embodiment. In other embodiments other sets of primary colors and white LEDs are used.

In one embodiment display includes an LED used to indicate a reference point on device for alignment.

Power stores energy for operating the electronics and electromechanical components of device . In one embodiment power is a rechargeable battery. Inductive charge port allows for recharging power without a wired electrical connection. In one embodiment inductive charge port accepts magnetic energy and converts it to electrical energy to recharge the batteries. In one embodiment charge port provides a wireless communication interface with an external charging device.

Deep sleep sensor puts the self propelled device into a very low power or deep sleep mode where most of the electronic devices use no battery power. This is useful for long term storage or shipping.

In one embodiment sensor is non contact in that it senses through the enclosing envelope of device without a wired connection. In one embodiment deep sleep sensor is a Hall Effect sensor mounted so that an external magnet can be applied at a pre determined location on device to activate deep sleep mode.

Actuators convert electrical energy into mechanical energy for various uses. A primary use of actuators is to propel and steer self propelled device . Movement and steering actuators are also referred to as a drive system or traction system. The drive system moves device in rotation and translation under control of processor . Examples of actuators include without limitation wheels motors solenoids propellers paddle wheels and pendulums.

In one embodiment drive system actuators include two parallel wheels each mounted to an axle connected to an independently variable speed motor through a reduction gear system. In such an embodiment the speeds of the two drive motors are controlled by processor

However it should be appreciated that actuators in various embodiments produce a variety of movements in addition to merely rotating and translating device . In one embodiment actuators cause device to execute communicative or emotionally evocative movements including emulation of human gestures for example head nodding shaking trembling spinning or flipping. In some embodiments processor coordinates actuators with display . For example in one embodiment processor provides signals to actuators and display to cause device to spin or tremble and simultaneously emit patterns of colored light. In one embodiment device emits light or sound patterns synchronized with movements.

In one embodiment self propelled device is used as a controller for other network connected devices. Device contains sensors and wireless communication capability and so it can perform a controller role for other devices. For example self propelled device can be held in the hand and used to sense gestures movements rotations combination inputs and the like.

As described herein the self propelled device may have multiple modes of operation including those of operation in which the device is controlled by the computing device is a controller for another device e.g. another self propelled device or the computing device and or is partially or wholly self autonomous.

Additionally embodiments enable the self propelled device and the computing device to share a computing platform on which programming logic is shared in order to enable among other features functionality that includes i enabling the user to operate the computing device to generate multiple kinds of input including simple directional input command input gesture input motion or other sensory input voice input or combinations thereof ii enabling the self propelled device to interpret input received from the computing device as a command or set of commands and or iii enabling the self propelled device to communicate data regarding that device s position movement and or state in order to effect a state on the computing device e.g. display state such as content corresponding to a controller user interface . Embodiments further provide that the self propelled device includes a programmatic interface that facilitates additional programming logic and or instructions to use the device. The computing device can execute programming that is communicative with the programming logic on the self propelled device .

According to embodiments the self propelled device includes an actuator or drive mechanism causing motion or directional movement. The self propelled device may be referred to by a number of related terms and phrases including controlled device robot robotic device remote device autonomous device and remote controlled device. In some embodiments the self propelled device can be structured to move and be controlled in various media. For example self propelled device can be configured for movement in media such as on flat surfaces sandy surfaces or rocky surfaces.

The self propelled device may be implemented in various forms. As described below and with an embodiment of the self propelled device may correspond to a spherical object that can roll and or perform other movements such as spinning. In variations device can correspond to a radio controlled aircraft such as an airplane helicopter hovercraft or balloon. In other variations device can correspond to a radio controlled watercraft such as a boat or submarine. Numerous other variations may also be implemented such as those in which the device is a robot.

In one embodiment device includes a sealed hollow envelope roughly spherical in shape capable of directional movement by action of actuators inside the enclosing envelope.

Continuing to refer to device is configured to communicate with computing device using network communication links and . Link transfers data from device to device . Link transfers data from device to device . Links and are shown as separate unidirectional links for illustration in some embodiments a single bi directional communication link performs communication in both directions. It should be appreciated that link and link are not necessarily identical in type bandwidth or capability. For example communication link from computing device to self propelled device is often capable of a higher communication rate and bandwidth compared to link . In some situations only one link or is established. In such an embodiment communication is unidirectional.

The computing device can correspond to any device comprising at least a processor and communication capability suitable for establishing at least uni directional communications with self propelled device . Examples of such devices include without limitation mobile computing devices e.g. multifunctional messaging voice communication devices such as smart phones tablet computers portable communication devices and personal computers. In one embodiment device is an IPHONE available from APPLE COMPUTER INC. of Cupertino Calif. In another embodiment device is an IPAD tablet computer also from APPLE COMPUTER. In another embodiment device is any of the handheld computing and communication appliances executing the ANDROID operating system from GOOGLE INC.

In another embodiment device is a personal computer in either a laptop or desktop configuration. For example device is a multi purpose computing platform running the MICROSOFT WINDOWS operating system or the LINUX operating system or the APPLE OS X operating system configured with an appropriate application program to communicate with self propelled device .

In variations the computing device can be a specialized device dedicated for enabling the user to control and interact with the self propelled device .

In one embodiment multiple types of computing device can be used interchangeably to communicate with the self propelled device . In one embodiment self propelled device is capable of communicating and or being controlled by multiple devices e.g. concurrently or one at a time . For example device can link with an IPHONE in one session and with an ANDROID device in a later session without modification of device .

According to embodiments the user can interact with the self propelled device via the computing device in order to control the self propelled device and or to receive feedback or interaction on the computing device from the self propelled device . According to embodiments the user is enabled to specify input through various mechanisms that are provided with the computing device . Examples of such inputs include text entry voice command touching a sensing surface or screen physical manipulations gestures taps shaking and combinations of the above.

The user may interact with the computing device in order to receive feedback . The feedback may be generated on the computing device in response to user input. As an alternative or addition the feedback may also be based on data communicated from the self propelled device to the computing device regarding for example the self propelled device s position or state. Without limitation examples of feedback include text display graphical display sound music tonal patterns modulation of color or intensity of light haptic vibrational or tactile stimulation. The feedback may be combined with input that is generated on the computing device . For example the computing device may output content that is modified to reflect position or state information communicated from the self propelled device .

In some embodiments the computing device and or the self propelled device are configured such that user input and feedback maximize usability and accessibility for a user who has limited sensing thinking perception motor or other abilities. This allows users with handicaps or special needs to operate system as described.

It should be appreciated that the configuration illustrated in the embodiment of is only one of an almost unlimited number of possible configurations of networks including a self propelled device with communication connections. Furthermore while numerous embodiments described herein provide for a user to operate or otherwise directly interface with the computing device in order to control and or interact with a self propelled device variations to embodiments described encompass enabling the user to directly control or interact with the self propelled device without use of an intermediary device such as computing device .

According to an embodiment such as provided with system the computing devices may optionally control more than one self propelled device. Furthermore each self propelled device may be controlled by more than one computing device . For example embodiments provide that computing device can establish multiple communications links including with self propelled devices and and computing device .

In variations the computing devices can also communicate with one or more self propelled devices using a network such as the Internet or a local wireless network e.g. a home network . For example the computing device is shown to have a communications link which can connect the computing device to an Internet server a web site or to another computing device at a remote location. In some embodiments the computing device can serve as an intermediary between the network source and a self propelled device. For example the computing device may access programming from the Internet and communicate that programming to one of the self propelled devices.

As an alternative or variation the computing device can enable a network user to control the computing device in controlling one or more of the self propelled devices etc. Still further the computing device can access the network source in order to receive programmatically triggered commands such as a command initiated from a network service that causes one or more of the self propelled devices to update or synchronize using the computing device . For example the self propelled device may include image capturing resources and a network source may trigger the computing device to access the images from the self propelled device and or to communicate those images to the network source over the Internet.

In variations such remote network functionality may alternatively be communicated directly from a network source to the self propelled devices . Thus computing devices may be optional and various applications and uses. Alternatively computing devices may be separated from the self propelled devices by a network such as the Internet. Thus computing devices can alternatively be the network source that remotely controls and or communicates with the self propelled devices.

It should be noted that the data communication links and in are depicted as short and direct for purposes of illustration. However actual links may be much more varied and complex. For example link connecting two computing devices and may be a low power wireless link if devices and are in close proximity. However computing devices and may be far apart e.g. separated by miles or geography so long as suitable network communication can be established.

Thus link and all of the links and can employ a variety of network technologies including the Internet World Wide Web wireless links wireless radio frequency communications utilizing network protocol optical links or any available network communication technology. The final connection to self propelled devices and is preferably wireless so connecting wires do not restrict mobility.

In one embodiment the communication links and are based on the wireless communication standard for data exchange known as BLUETOOTH. BLUETOOTH is widely available and provides a flexible communication framework for establishing data networks using short wavelength radio transceivers and data encoding. BLUETOOTH incorporates security features to protect the data sent on the links from unauthorized observers or interference. Alternative wireless communication medium may also be employed such as wireless USB Wi Fi or proprietary wireless communications. Embodiments further contemplate that one or more of the communication links to and utilize short range radiofrequency RF communication and or line of sight communications.

In various other embodiments the communication links are based on other wireless communication systems. Various radio frequency data communication systems are available including for example those known as WI FI IEEE 802.11a IEEE 802.11b IEEE 802.11g or 802.11n. Other radio frequency data links are formed using cellular telephone service or serial communication protocols using radio modems. In other embodiments optical communication links are employed including modulating properties of light and LASER beams.

Any suitable communication technology can be used to form the network links whether presently known or available in the future. The features described herein are not dependent on any particular networking technology or standard.

In some embodiments the communication established amongst the devices such as amongst computing device and or self propelled devices can be temporary flexible and reconfigurable. A resulting network of such devices can be considered an ad hoc network or alternatively a piconet or personal area network. In this respect some implementations provide that the computing device is and self propelled devices can be considered nodes of the network such as an ad hoc network. In such configurations network components topology and communications paths are flexible and can be readily adjusted to accommodate addition or removal of devices changing communication requirements or channel interference. For example self propelled device in is shown with no present network connection. However self propelled device has connected to network in the past and received instructions to enable it to operate without a persistent network link.

In the example shown by the computing device communicates with self propelled device using communications link . Self propelled device communicates with self propelled device using link and with self propelled device using link . Self propelled devices and communicate using link . The computing device can send data to any of the self propelled devices or using device as a relay. Alternatively the computing device can communicate with the other self propelled devices directly.

The system may include various configurations. For example a user may operate computing device to control self propelled device . Movement of the self propelled device may be communicated both to the computing device and to one or more of the other self propelled devices . Each of self propelled devices may be preprogrammed to react in a specific manner based on state or position information communicated from another one of the self propelled devices. For example self propelled devices may each be operated in a repel mode so that the movement of self propelled device as controlled from computing device results in a repel motion by the self propelled device . In other variations self propelled devices may be preprogrammed to maintain a specific distance apart from one another so that movement by one device automatically causes movement by the other two devices. Still further the devices may be configured so as to perform a variety of activities such as for example i one self propelled device automatically moving when another approaches a threshold distance ii one self propelled device programmatically moving to bump another self propelled device iii the self propelled devices automatically moving in tandem based on input received by each of the self propelled devices from the other self propelled devices or from the computing device and or variations thereof.

The various systems are illustrative of embodiments provided herein. With any of the systems described variations include the addition of more or fewer computing devices and or more or fewer self propelled devices. As described with some variations additional sources or nodes can be provided from a remote network source.

Additionally in some operational environments the presence of the computing device is optional. For example the self propelled devices can be partially or completely autonomous using programming logic to function.

As shown robotic ball includes an outer spherical shell or housing that makes contact with an external surface as the device rolls. In addition robotic ball includes an inner surface of the outer shell . Additionally robotic ball includes several mechanical and electronic components enclosed by outer shell and inner surface collectively known as the envelope .

In the described embodiment outer shell and inner surface are composed of a material that transmits signals used for wireless communication yet are impervious to moisture and dirt. The envelope material can be durable washable and or shatter resistant. The envelope may also be structured to enable transmission of light and is textured to diffuse the light.

In one embodiment the housing is made of sealed polycarbonate plastic. In one embodiment at least one of the outer shell or inner surface are textured to diffuse light. In one embodiment the envelope comprises two hemispherical shells with an associated attachment mechanism such that the envelope can be opened to allow access to the internal electronic and mechanical components.

Several electronic and mechanical components are located inside the envelope for enabling processing wireless communication propulsion and other functions collectively referred to as the interior mechanism . Among the components embodiments include a drive system to enable the device to propel itself. The drive system can be coupled to processing resources and other control mechanisms as described with other embodiments. Referring again to carrier serves as the attachment point and support for components of the interior mechanism. The components of the interior mechanism are not rigidly attached to the envelope. Instead the interior mechanism is in frictional contact with inner surface at selected points and is movable within the envelope by the action of actuators of the drive mechanism.

Carrier is in mechanical and electrical contact with energy storage . Energy storage provides a reservoir of energy to power the device and electronics and is replenished through inductive charge port . Energy storage in one embodiment is a rechargeable battery. In one embodiment the battery is composed of ithium polymer cells. In other embodiments other rechargeable battery chemistries are used.

Carrier can provide the mounting location for most of the internal components including printed circuit boards for electronic assemblies sensor arrays antennas and connectors as well as providing a mechanical attachment point for internal components.

In one embodiment the drive system includes motors and wheels . Motors and connect to wheels and respectively each through an associated shaft axle and gear drive not shown . The perimeter of wheels and are two points where the interior mechanism is in mechanical contact with inner surface . The points where wheels and contact inner surface are an essential part of the drive mechanism of the ball and so are preferably coated with a material to increase friction and reduce slippage. For example wheels and are covered with silicone rubber tires.

In some embodiments a biasing mechanism is provided to actively force the wheels against the inner surface . In an example provided the spring and end can comprise a biasing mechanism. More specifically spring and spring end are positioned to contact inner surface at a point diametrically opposed to wheels and . Spring and end provide additional contact force to reduce slippage of the wheels and particularly in situations where the interior mechanism is not positioned with the wheels at the bottom and where gravity does not provide adequate force to prevent the drive wheels from slipping. Spring is selected to provide a small force pushing wheels and and spring end evenly against inner surface .

Spring end is designed to provide near frictionless contact with inner surface . In one embodiment end comprises a rounded surface configured to mirror a low friction contact region at all contact points with the inner surface . Additional means of providing near frictionless contact may be provided. In another implementation the rounded surface may include one or more bearings to further reduce friction at the contact point where end moves along inner surface .

Spring and end are preferably made of a non magnetic material to avoid interference with sensitive magnetic sensors.

To produce directed movement of self propelled device the center of mass is displaced from under the center of rotation as shown in . With movement the device has an inherent dynamic instability DIS in one or more axes e.g. see Y or Z axes . To maintain stability the device uses feedback about its motion to compensate for the instability. Sensor input such as provided from sensors see or accelerometers or gyroscopes see can be used to detect what compensation is needed. In this way the device maintains a state of dynamic inherent instability as it moves under control of sensors and control input which can be communicated from another controller device.

The displacement of center of mass is caused by one or more actuators. When center of mass is not aligned below center of rotation a torque is created on device about the center of rotation causing device to rotate to restore stability. When device is in contact with a surface rotation causes device to move along the surface in the direction corresponding to the displacement .

In some implementations device is configured with center of mass being as near to the inner surface of the sphere as possible or equivalently to arrange components so that center of mass is as low as possible when the device is in a stable situation as shown in .

When it is desired that device move at a constant velocity the technique illustrated in can be extended as shown in . To achieve continuous motion at a constant velocity the displacement of center of mass relative to center of rotation is maintained by action of wheeled actuators . The displacement of the center of mass relative to center of rotation is difficult to measure thus it is difficult to obtain feedback for a closed loop controller to maintain constant velocity. However the displacement is proportional to the angle between sensor platform and surface . The angle can be sensed or estimated from a variety of sensor inputs as described herein. Therefore in one embodiment the speed controller for robotic device can be implemented to use angle to regulate speed for wheeled actuators causing device to move at a constant speed across surface . The speed controller determines the desired angle to produce the desired speed and the desired angle setpoint is provided as an input to a closed loop controller regulating the drive mechanism.

It can be seen from the foregoing discussion that knowledge of the orientation angles is useful in various embodiments for control of a self propelled device. Measuring the orientation of the device is also useful for navigation and alignment with other devices.

In one embodiment sensor array includes a 3 axis gyroscope sensor a 3 axis accelerometer sensor and a 3 axis magnetometer sensor . In one embodiment a receiver for the Global Positioning System GPS is included. However GPS signals are typically unavailable indoors so the GPS receiver is often omitted.

Due to limitations in size and cost sensors in sensor array are typically miniaturized devices employing micro electro mechanical MEMS technology. The data from these sensors requires filtering and processing to produce accurate state estimates . Various algorithms are employed in sensor fusion and state estimator . These algorithms are executed by the processor on the self propelled device.

Those familiar with the art will understand that the signals from sensor in sensor array are imperfect and distorted by noise interference and the limited capability of inexpensive sensors. However the sensors also provide redundant information so that application of a suitable sensor fusion and state estimator process provides an adequate state estimation of the true state of the self propelled device.

For example in many situations magnetometer data is distorted by stray magnetic fields and ferrous metals in the vicinity. Sensor fusion and state estimator are configured to reject bad or suspect magnetometer data and rely on the remaining sensors in estimating the state of the self propelled device. In some embodiments particular movements of the self propelled device can be used to improve sensor data for desired purposes. For example it can be useful to rotate self propelled device through an entire 360 degree heading sweep while monitoring magnetometer data to map local magnetic fields. Since the fields are usually relatively invariant over a short period of time the local field measurement is repeatable and therefore useful even if distorted.

In an embodiment self propelled device is configured to execute one or more programs stored in a program library . Each program in the program library can include instructions or rules for operating the device including instructions for how the device is to respond to specific conditions how the device is to respond to control input e.g. user input entered on the computing device and or the mode of operation that the device is to implement e.g. controlled mode versus autonomous etc. .

The program library may also maintain an instruction set that is shared by multiple programs including instructions that enable some user input to be interpreted in a common manner. An application program interface API can be implemented on the device to enable programs to access a library of functions and resources of the device. For example the API may include functions that can be used with programs to implement motor control e.g. speed or direction state transition sensor device interpretation and or wireless communications.

In one implementation the device receives programs and programming instructions wirelessly through use of the wireless communication port . In variations the device receives programs and programming instructions from external sources via other ports such as expansion port see . The programming resources may originate from for example a media provided to the user of the device e.g. SD card a network resource or website where programs can be downloaded and or programs and or instruction sets communicated via the wireless communication port from the computing device . In one implementation the computing device can be programmatically configured to interact and or control the self propelled device with software. Once configured the computing device communicates instructions coinciding with its programmatic configuration to the self propelled device . For example the computing device may download an application for controlling or interacting with the self propelled device . The application can be downloaded from for example a network e.g. from an App Store or from a website using wireless communication capabilities inherent in the computing device e.g. cellular capabilities Wi Fi capabilities etc. . The application that is downloaded by the computing device may include an instruction set that can be communicated to the self propelled device .

In an embodiment the computing device executes a program that is specialized or otherwise specific to communicating or interacting with and or controlling the self propelled device . In some embodiments the program that executes on the computing device includes a counterpart program A that can execute on the self propelled device . The programs A can execute as a shared platform or system. For example as described below the program operating on the computing device may cooperate with the counterpart runtime program A to generate input for the self propelled device and to generate output on the computing device based on a data signal from the self propelled device . In an embodiment the program generates a user interface that i prompts or provides guidance for the user to provide input that is interpretable on the self propelled device as a result of the counterpart runtime program A resulting in some expected outcome from the self propelled device ii receives feedback from the self propelled device in a manner that affects the content that is output by the program operating on the computing device . In the latter case for example computer generated content may be altered based on positioning or movement of the self propelled device .

More specifically on the computing device the program can provide a user interface including logic for prompting and or interpreting user input on the computing device. Various forms of input may be entered on the computing device including for example user interaction with mechanical switches or buttons touchscreen input audio input gesture input or movements of the device in a particular manner.

Accordingly the program can be configured to utilize an inherent application program interface on the computing device to utilize the various resources of the device to receive and process input. Many existing multifunctional or general purpose computing devices e.g. smart phones or tablets are configured to detect various kinds of input including touchscreen input e.g. multitouch input gesture input optical input e.g. camera image sensing input audio input and device movement input e.g. shaking or moving the entire device . The user interface may include logic to prompt the user for specific kinds of input e.g. include visual markers where a user should place fingers instruct the user or provide the user with the visual and or audio prompt to move the device etc. and to interpret the input into control information that is signaled to the self propelled device.

In some embodiments or implementations the input generated on the computing device is interpreted as a command and then signaled to the self propelled device . In other embodiments or implementations the input entered on the computing device is interpreted as a command by programmatic resources on the self propelled device . By interpreting user input in the form of commands embodiments provide for the self propelled device to respond to user input in a manner that is intelligent and configurable. For example the self propelled device may interpret user input that is otherwise directional in nature in a manner that is not directional. For example a user may enter gesture input corresponding to a direction in order to have the self propelled device move in a manner that is different than the inherent direction in the user input. For example a user may enter a leftward gesture which the device may interpret based on the runtime program A as a command to stop spin return home or alter illumination output etc.

The user interface may also include output logic for interpreting data received from the self propelled device . As described with other embodiments the self propelled device may communicate information such as state information and or position information e.g. such as after when the device moves to the computing device . In one implementation the communication from the self propelled device to the computing device is in response to a command interpreted from user input on the computing device . In another implementation the communication from the self propelled device may be in the form of continuous feedback generated as result of the device s continuous movement over a duration of time. As described with other implementations and embodiments the output onto device may correspond to a computing device having one of various possible form factors. The program may configure the interface to graphically provide gaming context and or different user interface paradigms for controlling the self propelled device . The program may operate to directly affect the content generated in these implementations based on movement position or state of the self propelled device .

In operation the self propelled device implements the programmatic runtime A using one or more sets of program instructions stored in its program library . The program runtime A may correspond to for example a program selected by the user or one that is run by default or in response to some other condition or trigger. Among other functionality the program runtime A may execute a set of program specific instructions that utilizes device functions and or resources in order to i interpret control input from the computing device ii control and or state device movement based on the interpretation of the input and or iii communicate information from the self propelled device to the computing device .

In an embodiment the program runtime A implements drive control logic including sensor control logic and input control logic . The sensor control logic interprets device sensor input for controlling speed direction or other movement of the self propelled device s drive system or assembly e.g. see . The sensor input may correspond to data such as provided from the accelerometer s magnetometer s or gyroscope s of the self propelled device . The sensor data can also include other information obtained on a device regarding the device s movement position state or operating conditions including GPS data temperature data etc. The program A may implement parameters rules or instructions for interpreting sensor input as drive assembly control parameters . The input control logic interprets control input received from the computing device . In some implementations the logic interprets the input as a command in outputting drive assembly control parameters that are determined from the input . The input drive logic may also be program specific so that the control input and or its interpretation are specific to the runtime program A. The drive assembly control logic uses the parameters as generated through sensor input control logic to implement drive assembly controls .

In variations the sensor input control logic is used to control other aspects of the self propelled device . In embodiments the sensor input control logic may execute runtime program A instructions to generate a state output that controls a state of the device in response to some condition such as user input our device operation condition e.g. the device comes to stop . For example an illumination output e.g. LED display out audio output or device operational status e.g. mode of operation power state may be affected by the state output .

Additionally the run time program A generates an output interface for the self propelled device program running on the computing device . The output interface may generate the data that comprises feedback . In some embodiments the output interface generates data that is based on position movement e.g. velocity rotation state e.g. state of output devices and or orientation information e.g. position and orientation of the device relative to the initial reference frame . The output interface may also generate data that for example identifies events that are relevant to the runtime program A. For example the output interface may identify events such as the device being disrupted in its motion or otherwise encountering a disruptive event. In some embodiments output interface may also generate program specific output based on for example instructions of the runtime program A. For example run time program A may require a sensor reading that another program would not require. The output interface may implement instructions for obtaining the sensor reading in connection with other operations performed through implementation of the runtime program A.

According to embodiments self propelled device is operable in multiple modes relative to computing device . In a controlled mode self propelled device is controlled in its movement and or state by control input via control signals communicated from the computing device . In some implementations the self propelled device pairs with the computing device in a manner that affects operations on the computing device as to control or feedback. In some embodiments self propelled device is also operable in an autonomous mode where control parameters are generated programmatically on the device in response to for example sensor input and without need for control input . Still further in variations the self propelled device can act as a controller either for the computing device or for another self propelled device . For example the device may move to affect a state of the computing device . The device can operate in multiple modes during one operating session. The mode of operation may be determined by the runtime program A.

As described by an embodiment of and elsewhere in the application the self propelled device can include a library of instruction sets for interpreting control input from the computing device . For example the self propelled device can store instructions for multiple programs and the instructions for at least some of the programs may include counterpart programs that execute on the controller device . According to embodiments the library that is maintained on the self propelled device is dynamic in that the instructions stored can be added deleted or modified. For example a program stored on the self propelled device may be added or another program may be modified.

When executed on the computing device each program may include instructions to recognize a particular set of inputs and different programs may recognize different inputs. For example a golf program may recognize a swing motion on the computing device as an input while the same motion may be ignored by another program that is dedicated to providing a virtual steering mechanism. When executed on the self propelled device each program may include instructions to interpret or map the control input associated with a particular recognized input to a command and control parameter.

In embodiments the self propelled device is able to dynamically reconfigure its program library. For example an embodiment provides that a program can be modified e.g. through instructions received by the controller device to process control input that corresponds to a new recognized input. As another example an embodiment provides that the self propelled device is able to switch programs while the self propelled device is in use. When programs are switched a different set of inputs may be recognized and or each input may be interpreted differently on the self propelled device .

An operating system provides for support of general hardware input and output scheduling tasks and managing resources to perform tasks. The operating system is also sometimes known as a hypervisor which provides for sharing of resources among tasks for example if two software modules request control of the actuators simultaneously operation policy established by hypervisor resolves the contention.

ORBOTIX predefined local control functions comprise control loops and library routines useful to robot applications . In some embodiments a set of local robot applications controls some or all of the features of self propelled device . In some embodiments a set of predefined remote control functions interfaces with a remote controller device such as a computing device using wireless link .

In one embodiment a Robot Application Programming Interface API provides a documented set of functions usable to control and monitor the device hardware and functions. API functions also known as user functions can be supplied by a user or obtained from a software repository or website and downloaded to the self propelled device. User functions are stored in user function storage .

In one embodiment a robot language interpreter is provided. The robot language interpreter processes program instructions written in a simple easy to understand format. For example in one embodiment language interpreter processes instructions written in a variant of the BASIC programming language with extensions for reading robot sensors controlling displays and actuators and interfacing with other robot device hardware and features. Robot language interpreter also provides protection and security against performing destructive or unwise operations. In one embodiment language interpreter understands the ORBBASIC language from ORBOTIX. Robot language code is stored in dedicated robot language storage .

An example of user code when executed by interpreter causes the self propelled device s LED display to change color in response to the measured speed of movement of the device. Thus it can be seen that a user supplied function can control one element of the device such as LED display while other elements speed and direction remain controlled through the wireless connection and remote control device.

Thus multiple methods are provided for a user to add programmatic instructions to control and extend the features of the self propelled device. API provides a powerful interface for a sophisticated user while language interpreter provides a simple and safer interface for a novice that can also negate time lags in communication with a controller device.

Device typically provides an operating system for example iOS for an APPLE IPHONE and ANDROID OS for ANDROID computing devices. Also provided is an API for applications. ORBOTIX application base provides basic connectivity to device API and device OS with higher layers of application software.

ORBOTIX controller application programs or apps and provide user experiences and interaction with self propelled devices. For example in various embodiments apps and provide control of a self propelled device using touch sensing control or a simulated joystick controller. Apps and can also provide a solo or mufti player game experience using self propelled or robotic devices.

In some embodiments controller apps and use sensors on device to allow gestural control of a physical device in a real world environment controlling a self propelled or robotic device. For example a user can make a gesture used in a sports game a tennis swing or golf swing. The gesture is sensed on device and processed by a software app to cause corresponding motion of the self propelled device.

ORBOTIX API SDK Software Development Kit provides a documented set of interface functions useful to a user desiring to create custom applications on a controller device for use with a self propelled robotic device.

App differs from app in that app is built directly on the application base layer while app is built on ORBOTIX controller API SDK .

A notable feature in this embodiment is that code module is stored and transferred into robot API using an intermediate computing device or and the type of the computing device does not matter. This makes it possible for computing devices to store various code modules or helper apps that can be downloaded to robotic devices as needed for example to expedite a particular task.

It should be appreciated that the embodiments and features discussed in relation to provide a highly flexible distributed processing platform wherein tasks can be readily moved between a controller and controlled device.

According to at least some embodiments a self propelled device such as described by various examples herein moves in accordance with a three dimensional reference frame e.g. X Y and Z axes but operates using input that is received from a device that uses a two dimensional reference frame e.g. X Y axes . In an embodiment the self propelled device maintains an internal frame of reference about the X Y and Z axes. The self propelled device is able to receive control input from another device in which the control input is based on a two dimensional reference frame and further controls the movement of the self propelled device about the X Y and Z axes.

The controller and IMU can be implemented through separate hardware and or software. In one implementation the controller and IMU are implemented as separate software components that are executed on for example processor see .

More specifically the controller measures or estimates the present state of the self propelled device including pitch roll and yaw angles based on feedback . The feedback may originate from for example one or more accelerometers A gyroscope B magnetometer C and or other devices e.g. GPS which determine the feedback when the device is in motion.

In one embodiment controller receives feedback from the IMU as to the motion of the device along three axes including a desired pitch input a desired roll input and a desired yaw input. In one variation the feedback includes desired orientation angles. Still further the feedback can correspond to desired rates of angular rotation.

In one embodiment the desired pitch angle is calculated by an additional control loop configured to maintain forward speed. As described in conjunction with speed and pitch angle are related by the physics of a rolling sphere.

In addition to feedback the controller uses control input from the controller device to implement control on the drive system . The control input may originate from a device that utilizes a two dimensional reference frame e.g. X and Y . In one implementation the control input is determined by for example processing resources of the self propelled device that interpret control data from the controller as commands that specify one or more parameters such as parameters that specify position e.g. move to a position distance velocity or direction. Thus some embodiments provide that the control input is based on control data that is i generated in accordance with a two dimensional reference frame and ii interpreted as one or more commands that specify parameters such as distance position or velocity. For example a desired speed is provided by way of control input to the controller . In an embodiment the controller implements control on the drive system using control parameters which account for the control input and the feedback . The control may cause individual components of the drive system to compensate for instability given for example parameters specified in the control input e.g. command input . In other words the controller may implement control in a manner that causes the drive system to adjust the motion of the device based on feedback in order to effectively implement the control parameters e.g. distance to travel specified in the command input. Furthermore the control enables the device to maintain control with presence of dynamic instability when the device is in motion.

In some embodiments the controller is able to determine from feedback the present state of the self propelled device in conjunction with desired angles. As mentioned the controller can use the feedback to implement control parameters particularly as to compensating for the dynamic instability see also that is inherent in about one or more axes when the self propelled device is in motion. The errors can be determined for each axis e.g. pitch roll and yaw . This uses a technique of feedback where the actual angle is compared to the desired angle in each axis to calculate an error or correction signal.

According to embodiments the controller uses the feedback to establish multiple control loops. In one embodiment the controller computes an estimated set of state variables and uses the estimated state variables in a closed loop feedback control. This allows the multiple feedback control loops to be implemented each of which control or provide feedback as to a state such as for example a position rate or angle. The controller can implement feedback control using estimated states so as to provide for controlled movement of the self propelled device both along a surface and in device rotation about axes. The controlled movement can be achieved while the device is inherently unstable during movement.

In addition incorporating feedback input using sensors and estimation of present state variables enables feedback control for device stability in both static and dynamic conditions. It can be appreciated that actuators in embodiments of a self propelled device will not respond consistently or cause identical command response due to disturbances such as variations in actuators environment noise and wear. These variations would make stable controlled movement difficult without feedback control . Feedback control can also provide stability augmentation to a device that can be inherently unstable and allows movement in a controlled and stable manner.

Now the controller has calculated three correction signals and the signals must be combined into command signals to each of the two motors. For reference the two motors are termed left and right although it should be understood the assignment of these terms is arbitrary. It can be appreciated that the assignment of labels affects the sign conventions in roll and yaw.

Then the following equations are used to combine the correction terms into left and right motor commands.

First the pitch and yaw corrections are combined into intermediate variables. In one embodiment the pitch correction is limited to prevent the motors from being driven at full speed to create forward motion which would prevent response to roll or yaw correction inputs.

Next the roll correction is included appropriately into the left and right motor variables. If the roll correction is positive roll correction is subtracted from the left motor command 

Alternatively if the roll correction is not positive roll correction is added to the right motor variable 

Thus the controller produces an output variable for each motor that includes the desired control in three axes.

In this way a controller can use a two dimensional reference frame to provide input for the self propelled device which utilizes a three dimensional reference frame . For example the controller can implement a graphic user interface to enable the user to input that is based on two dimensional input. For example illustrates a graphic control mechanism that can be implemented on a controller device to enable the user to provide directional input about the X and Y axes see also .

According to an embodiment when a session is initiated between the self propelled device and computing device e.g. self propelled device is turned on and the self propelled device program is launched on the computing device the two devices calibrate their respective orientation . In one implementation the self propelled device obtains its orientation and or position relative to the initial reference frame then signals the information to the computing device .

In an embodiment in which the self propelled device is spherical e.g. a ball the self propelled device can base its orientation determination on the location of the device marker. The device marker may correspond to a predetermined feature on the device. The location of the feature relative to an initial reference frame is obtained and communicated to the computing device . The computing device may include a user interface that includes an orientation that is based on the orientation information communicated from the self propelled device . For example the user interface of computing device may generate a graphic steering mechanism that is calibrated to reflect the orientation of the self propelled device e.g. based on the predetermined marker on the self propelled device .

Control input is received on the self propelled device from the computing device running the self propelled device program . The control input may be in the form of a command or otherwise be in the form of data that is interpretable on the self propelled device through use of programming . The control input may include multiple components including components from different input or interface mechanisms of the computing device e.g. touchscreen and accelerometer of the computing device . Accordingly implementations provide for control input to be based on touchscreen input mechanical switch or button inputs device motion or position input or combinations thereof . In variations other forms of input can be entered on the computing device and processed as control input. For example the computing device may communicate to the self propelled device one or more of i audio input from the user speaking ii image input from the user taking a picture and or iii GPS input.

In an embodiment the control input is interpreted on the self propelled device using programming . Thus the self propelled device may receive different forms of input from the computing device based on the program executed on the self propelled device and or the computing device . Moreover self propelled device and or the computing device implement different processes for how input of a given type is to be interpreted. For example self propelled device can interpret touchscreen inputs differently for different programs and the response of the self propelled device may be determined by which program is executing when the input is received.

In using programming to interpret input self propelled device may be capable of different forms of responses to input. Based on the program that is executed on the self propelled device and or the computing device the input of the user may be interpreted as directional input non directional input and or a multi component command input . More specifically the device may be correlated to input that is directional in nature by interpreting user actions or input data that includes an inherent directional aspect. For example a user may operate a graphic steering wheel to control the direction of the self propelled device . The device may also process input non directionally. For example some forms of user input or action may have inherent directional characteristics e.g. the user swinging computing device in a particular direction the user providing some directional input on the steering wheel mechanism that is graphically displayed on the computing device etc. but the manner in which the input is processed on the self propelled device may not be directional or least directional in a manner that is similar to the inherent directional characteristic of the user action.

In variations action performed by the user on the computing device may also be interpreted as a command. The input from the user on the computing device may be correlated either on the computing device or the self propelled device with instructions that signify an action by the device. The correlation between input and action can be program specific and configurable to meet the requirements or objects of the particular program that is being executed. As an example the self propelled device can interpret a single user action e.g. gesture input on computing device as a command to perform a series of actions such as actions to perform a combination of movement state changes and or data outputs.

The device performs one or more actions that are responsive to the user action or actions . The response of the self propelled device may be dictated by the program that is executing on the device as well as the computing device when the control input is received. Thus the action or actions performed by the self propelled device may be complex and multiple actions can be performed based on a single command or series of user actions.

For example the self propelled device and the computing device may combine to enable the user in simulating a game in which a ball such as a tennis ball is struck against the wall. To simulate the game the user may swing computing device in a given direction e.g. like a racquet causing the self propelled device to move in a direction that is related to the direction of the user s motion. However without further input from the user the self propelled device may return or move in a substantially opposite direction after the initial movement so as to simulate the ball striking a wall or another racquet and then returning. Thus the return of the self propelled device would be non directional in its relation to the inherent directional characteristic of the original action.

The same example also illustrates the use of command input in that one input on the computing device user swinging device is interpreted into multiple actions that are taken by the self propelled device . Moreover based on programming the self propelled device and or the computing device may interpret multiple kinds of user input or action as a command resulting in performance of one action or a series of actions. For example in the ball example described above the user may also be required to place his finger on the touchscreen of the computing device while swinging the device in a particular direction. The combination of the touchscreen input and the motion input of the computing device can be interpreted as a command for multiple actions to be performed by the self propelled device . In the example provided the self propelled device performs the following in response to mufti component user action determine a velocity and direction based on the user action e.g. user places finger and touchscreen while swinging computing device move based on the determined velocity and direction determine when to stop based on the simulated presence of a wall estimate return velocity and direction and then move in the return direction.

Additionally each action or output from the self propelled device may incorporate several independent sub actions involving independently operable aspects of the self propelled device . For example self propelled device may include multiple motors that comprise the drive assembly. A command input may dictate whether one or both motors are used. Likewise command input may determine if other hardware resources of the device are used in response to user input. For example the command input can correlate a user input on the computing device with a series of actions on the self propelled device which include communicating an output of a magnetometer to the computing device .

Other types of command input that can be interpreted from a user action include for example altering the state of the self propelled device based on a particular input from the user. For example the user may perform a double tap on the touchscreen of the computing device as a form of input. A first program on the self propelled device may interpret the double tap as a command to spin. A second program on the same self propelled device may interpret the double tap as a command to illuminate.

In some embodiments the self propelled device signals back information e.g. feedback to the computing device . The feedback may correspond to the updated position information information about the device s movement or orientation e.g. velocity or direction device state information or other information e.g. sensor input from the device based on specific programming request . As described with some embodiments the feedback may be used to generate content on the computing device . For example the feedback may affect a virtual representation of the self propelled device generated on the computing device . With for example movement of the self propelled device the corresponding virtual representation of the self propelled device on the computing device may also be moved accordingly. Numerous examples are provided herein for user feedback to generate and or alter content on the computing device .

The computing device may include a contextual user interface . For example the user interface generated on the computing device may include a graphic interface that provides features for implementing the game or simulation. The features may include use of a graphic object that is virtually moved in accordance with movement of the self propelled device . Specific examples of user interfaces include for example i a user interface having a circle and an orientation marker that the user can move about the circle where the orientation marker represents the orientation of the self propelled device ii a golfing or bowling interface showing a virtualized ball that represents the self propelled device or iii a dynamic and interactive gaming content in which an object representing the self propelled device is moved in the context of gaming or simulation content.

A user may operate the computing device to enter one or more inputs . The input may be either discrete in time or continuous. Discrete input may correspond to a specific user action that is completed and results in the self propelled device moving and or performing other actions. Examples of discrete inputs include simulated golf swings or bowling strokes e.g. where the user swings his handset and the action is interpreted as a golf or bowling ball movement . Continuous input requires the user to be engaged while the self propelled device moves. Examples of continuous input include the user operating a virtual steering feature or joy stick as a mechanism for controlling the self propelled device in its movement. As mentioned with some other embodiments the user input may correspond to multiple actions performed by the user including actions that include the use of different input interfaces or mechanisms on the computing device . For example the user input can correspond to user actions on the touchscreen display the user moving the computing device about the gesture the user interacting with the camera to the computing device the user providing speech input from a microphone of the computing device and or the user operating buttons and or mechanical switches on the computing device.

The user input is communicated to the self propelled device . In one embodiment the computing device interprets the input of the user and then signals interpreted input to the self propelled device . In variations the self propelled device interprets the input of the user based on data signals received from the computing device .

The self propelled device may respond to the user input by for example moving in a direction and or in accordance with the velocity specified by the user input . Other actions such as spinning performing other movements changing state of one or more devices etc. can also be performed depending on the interpretation of the user input.

The computing device may receive the feedback from the self propelled device . The nature and occurrence of the feedback may be based on the programmatic configuration of the self propelled device and the computing device . For example the feedback communicated from the self propelled device to the computing device may include information that identifies position orientation and velocity of the self propelled device either at a particular instance or over a given duration of time. As an alternative or addition the feedback may include or state information about the self propelled device and or readings from one or more sensors on the self propelled device. Furthermore depending on the implementation the feedback may be communicated either continuously or discretely. In the latter case for example the self propelled device may perform an action such as moving to a particular position and then communicate its position and orientation to the computing device . Alternatively the self propelled device may continuously update the computing device on this orientation and or position and or velocity as well as state other information. Numerous variations are possible depending on the programmatic configuration of the self propelled device

In response to receiving the feedback the computing device updates modifies or generates new contextual user interfaces that reflects a change in the representation of the self propelled device . Specifically once the self propelled device moves its representation of the user interface on the computing device may reflect the movement. For example the contextual user interface of the computing device may reflect the movement of the self propelled device in a manner that is not video or at least not solely video but rather computer generated e.g. animated graphic etc. . As an addition or alternative other information communicated with the feedback e.g. the state of the self propelled device may also be reflected in the user interface of the computing device . For example if the self propelled device is illuminated its virtual representation of the user interface of the computing device may change to reflect that illumination.

The device can maintain its own frame of reference using resources that reside on the device. For example device may utilize sensors such as a magnetometer determine north south east west an IMU see a GPS and or stored position or state information in order to determine its frame of reference.

According to embodiments the orientation of the self propelled device with respect to the device s internal frame of reference dictates the orientation of the user interface e.g. the direction of the marker . For example can serve as an illustration of the controller being rotated e.g. the user moves the controller while holding it relative to the self propelled device . The marker of the user interface may be set to the orientation of the marker on the self propelled device so that for example the west direction remains forward facing.

The self propelled device operates to determine its orientation relative to an internal frame of reference that is determined from resources of the device . The self propelled device can determine its orientation in response to events such as the self propelled device i being switched on ii being connected wirelessly to the controller device iii after a set duration of time iv after user input or command and or v after a designated event such as a bump that makes the device lost .

The self propelled device signals information to the controller that indicates the orientation of the self propelled device relative to the device s frame of reference . The information may be signaled wirelessly through for example BLUETOOTH or other forms of wireless communication mediums.

The controller may initiate a program or application to control the self propelled device . For example a control program may be operated that initiates the controller in connecting with the self propelled device . The program may generate a user interface that displays content in the form of a virtual controller for the self propelled device . The virtual controller can include a marker or orientation that indicates front back as well as left right.

Based on the information received from the self propelled device the controller configures the user interface so that the marker or orientation is aligned or otherwise calibrated with the orientation maintained on the device . For example as a result of the calibration or alignment both the self propelled device and the controller recognize the frontal direction to be in the same direction e.g. north or west .

Numerous variations may be provided to the examples provided. For example the user interface can include alternative steering mechanisms such as a steering wheel or virtual joystick see also . The manner in which the user interface can be configured to provide directional input can also be varied depending on for example the virtual model employed with the user interface e.g. steering wheel or joystick .

Some embodiments enable the self propelled device to be virtually represented on an interface of the controller device. In such embodiments the degree to which the self propelled device and its virtual representation are linked may vary depending on desired functionality and design parameters. For example in gaming applications some events that occur to the self propelled device e.g. bumps may be conveyed and represented e.g. virtual bump with the device representation.

With reference to the self propelled device may be operated in a real world environment and virtually represented by a graphic object that is part of the user interface of the controller device . The implementation may be provided by executing a corresponding program or instruction set on each of the self propelled device and controller device e.g. a game . Based on the implemented instruction set a relationship can be established between the self propelled device and the virtual representation . The relationship can be established by way of the self propelled device signaling state information to the controller device and the controller device signaling control information based on user input and virtual events.

As described with other embodiments the self propelled device may operate in a three dimensional reference frame and the controller device may operate in a two dimensional reference frame. The self propelled device can include a three dimensional controller that processes two control information e.g. user input and virtual events in its three dimensional reference frame. The three dimensional environment of the self propelled device may be represented two dimensionally on the controller device .

Examples of the relationships can include i the self propelled device communicates its state e.g. position information to the controller device which reflects a corresponding change in the position of the virtual object for example both the self propelled device and the controller device may trace a similarly shaped path ii the user can enter input that moves or changes position of the virtual representation and this change is reflected by real world movement of the self propelled device iii an event that occurs to the self propelled device is conveyed and or represented in the virtual environment of the virtual representation for example the self propelled device may collide with an object causing lateral movement or stoppage and this event may be communicated virtually with the object being bumped stopped or even made to change color to reflect the event and iv an event that occurs to the virtual environment of the virtual representation is conveyed to the self propelled device for example a virtual collision between the virtual representation and another virtual object e.g. wall zombie etc. in gaming environment may result in the movement of the virtual object being changed and this change may be communicated as control input to the self propelled device which can shake stop or move unexpectedly to simulate the virtual collision . Numerous variations may be implemented with respect to the manner in which the self propelled device is linked to a virtual environment.

Video camera captures images of the robotic balls on surface and relays the image to computer controller using data link . Computer controller executes an application designed to identify the robotic balls and instruct each robotic ball in moving to its desired position. Computer controller forms an ad hoc network via link with robotic balls and to send instructions to each ball. Link can in one embodiment be a link to a single ball and each ball is communicated with in turn. In another embodiment link connects to two or more of the robotic balls or is a broadcast channel to all robotic balls.

One task controller performs is identification of each ball and its location. To perform this task in one embodiment controller sequentially instructs each ball to emit a unique signal detectable by camera in conjunction with controller and associated application software. The signal may be detectable by a human or not. For example a ball emits a certain color or pattern of light. In one embodiment the ball s light pattern is modulated in a manner detectable by video camera and controller . In another embodiment every ball in the array is instructed to simultaneously emit its own unique identification signal or light pattern.

Once every robotic ball on surface has been identified and located by controller controller issues a set of movement instructions to each robotic ball to move it into the desired location.

One or more embodiments described herein provide that methods techniques and actions performed by a computing device are performed programmatically or as a computer implemented method. Programmatically means through the use of code or computer executable instructions. A programmatically performed step may or may not be automatic.

One or more embodiments described herein may be implemented using programmatic modules or components. A programmatic module or component may include a program a subroutine a portion of a program or a software component or a hardware component capable of performing one or more stated tasks or functions. As used herein a module or component can exist on a hardware component independently of other modules or components. Alternatively a module or component can be a shared element or process of other modules programs or machines.

Furthermore one or more embodiments described herein may be implemented through the use of instructions that are executable by one or more processors. These instructions may be carried on a computer readable medium. Machines shown or described with FIGs below provide examples of processing resources and computer readable mediums on which instructions for implementing embodiments of the invention can be carried and or executed. In particular the numerous machines shown with embodiments of the invention include processor s and various forms of memory for holding data and instructions. Examples of computer readable mediums include permanent memory storage devices such as hard drives on personal computers or servers. Other examples of computer storage mediums include portable storage units such as CD or DVD units flash memory such as carried on many cell phones and personal digital assistants PDAs and magnetic memory. Computers terminals network enabled devices e.g. mobile devices such as cell phones are all examples of machines and devices that utilize processors memory and instructions stored on computer readable mediums. Additionally embodiments may be implemented in the form of computer programs or a computer usable carrier medium capable of carrying such a program.

Although illustrative embodiments have been described in detail herein with reference to the accompanying drawings variations to specific embodiments and details are encompassed by this disclosure. It is intended that the scope of the invention is defined by the following claims and their equivalents. Furthermore it is contemplated that a particular feature described either individually or as part of an embodiment can be combined with other individually described features or parts of other embodiments. Thus absence of describing combinations should not preclude the inventor s from claiming rights to such combinations.

While certain embodiments of the inventions have been described above it will be understood that the embodiments described are by way of example only. Accordingly the inventions should not be limited based on the described embodiments. Rather the scope of the inventions described herein should only be limited in light of the claims that follow when taken in conjunction with the above description and accompanying drawings.

