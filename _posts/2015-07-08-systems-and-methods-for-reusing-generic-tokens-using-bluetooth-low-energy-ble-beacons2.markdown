---

title: Systems and methods for reusing generic tokens using Bluetooth® low energy (BLE) beacons
abstract: Systems and methods for reusing generic tokens using a Bluetooth® low energy (BLE) beacon. The systems and methods include a user device including a wireless transceiver, a memory for storing a generic token, and one or more processors coupled to the memory and the wireless transceiver. The wireless transceiver is configured to communicate with a beacon using a BLE communications protocol, receive a beacon identifier from the beacon, send a check in request to the beacon, and receive token differences from the beacon. The processors are configured to recreate a custom token based on the stored generic token and the received token differences. The beacon is configured to forward the check in request to a server. The server is configured to verify the user device and create the custom token and the token differences between the custom and generic tokens for return to the user device via the beacon.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09642173&OS=09642173&RS=09642173
owner: PAYPAL, INC.
number: 09642173
owner_city: San Jose
owner_country: US
publication_date: 20150708
---
This application claims priority to provisional application No. 62 024 878 filed Jul. 15 2014 titled SYSTEMS AND METHODS FOR REUSING GENERIC TRANSACTION TOKENS USING BLUETOOTH LOW ENERGY BLE BEACONS which is incorporated herein in its entirety by reference.

Embodiments disclosed herein are related to systems and methods for reusing generic tokens using a Bluetooth low energy BLE beacon.

Computer systems and networks have facilitated the tasks of buying selling and transferring goods. For example global computer networks such as the Internet have allowed purchasers to relatively quickly and efficiently seek and purchase goods online. Similarly global computer networks provide an efficient and cost effective medium for sellers to advertise offer provide and sell their goods. Electronic commerce companies provide buyers and sellers with online services and the infrastructure to accept orders of goods from remote purchasers to perform the financial transactions to confirm and complete the sale of goods to ship or distribute the goods to remote purchasers and to perform other related logistics. Technology advances have also allowed for a wider variety of devices and transaction types in the retail and other marketplaces.

One example of a relatively new development within the realm of electronic commerce is the ability to allow a consumer to pay for a good or service at a point of sale through the use of his or her smart phone or other personal mobile device. A user merely needs to have an appropriate payment application or app on his or her device whereupon the user can present his or her phone or other similar device at an appropriate time and location at a retail or other establishment. The retailer or other seller or service provider can then check in the given user through some process of reading his or her smart phone or other similar device after which the seller or service provider can accept payment or credit through some form of communication with the checked in or acknowledged device. This check in ability to accept payment or credit without the use of cash checks credit cards or other traditional payment means can be particularly helpful in many settings. The check in ability is also useful in other non payment contexts. As an example the check in ability may be used when a user approaches a venue such as a sports arena concert hall airport or the like to access retrieve and or present an electronic version of a ticket boarding pass and or similar token in order to gain access to the venue.

Unfortunately implementation of check in ability is not without its limitations. In some examples global positioning system GPS or other location services of many mobile devices such as smart phones may be used to identify when a user is in proximity to a venue or a retail or other establishment for which the check in ability is available. Location services however are power intensive and it may not be reasonable or practical to keep these location services continuously active. In addition retailers and other service providers with a large number of locations may involve the installation of hundreds thousands or even more locations that may be impractical for the user to manage and or store on their mobile device. For example some token management applications place a rather small e.g. 10 upper limit on the number of locations that may be associated with individual check in records. In some examples venues retail and or other establishments may use one or more beacon devices to identify locations for which the check in ability may be available. These beacon devices however may have practical limitations due to numbers of users and or available bandwidth that may limit their ability to check in users and distribute appropriate tokens. Accordingly it would be advantageous to have improved systems and methods for supporting the check in ability.

In the following description specific details are set forth describing certain embodiments. It will be apparent however to one skilled in the art that the disclosed embodiments may be practiced without some or all of these specific details. The specific embodiments presented are meant to be illustrative but not limiting. One skilled in the art may realize other material that although not specifically described herein is within the scope and spirit of this disclosure.

Consistent with some embodiments there is provided a user device. The user device includes a wireless transceiver a memory for storing a generic token and one or more processors coupled to the memory and the wireless transceiver. The wireless transceiver is configured to communicate with a beacon using a Bluetooth low energy BLE communications protocol receive a beacon identifier from the beacon send a check in request to the beacon and receive token differences from the beacon. The processors are configured to recreate a custom token based on the stored generic token and the received token differences and perform an action using the custom token.

Consistent with some embodiments there is also provided a method of managing tokens. The method includes communicating with a beacon via a wireless transceiver using a Bluetooth low energy BLE communications protocol receiving a beacon identifier from the beacon sending a check in request to the beacon receiving token differences from the beacon recreating a custom token based on a generic token stored in a memory and the received token differences and using the custom token to perform an action.

Consistent with some embodiments there is further provided a non transitory computer readable medium. The non transitory computer readable medium includes instructions that when executed by one or more processors cause the one or more processors to perform a method. The method includes communicating with a beacon via a wireless transceiver using a Bluetooth low energy BLE communications protocol receiving a beacon identifier from the beacon sending a check in request to the beacon receiving token differences from the beacon recreating a custom token based on a generic token stored in a memory and the received token differences and using the received token to perform an action.

Consequently embodiments described herein may allow a BLE beacon to facilitate a check in with a user device. The embodiments described herein may then allow the BLE beacon to obtain information associated with differences between a generic token and a custom token from a service provider for distribution to the user device. The user device may then use the differences to recreate the custom token for subsequent use. In some embodiments the custom token may also be referred to as a pass.

Network in one embodiment may be implemented as a single network or a combination of multiple networks. For example in various embodiments network may include the Internet and or one or more intranets landline networks wireless networks and or other appropriate types of communication networks. In another example the network may comprise a wireless telecommunications network e.g. cellular phone network adapted to communicate with other communication networks such as the Internet.

Client computing device in one embodiment may be implemented using any appropriate combination of hardware and or software configured for wired and or wireless communication over network . For example client computing device may be implemented as a wireless telephone e.g. smart phone tablet personal digital assistant PDA notebook computer personal computer a connected set top box STB such as provided by cable or satellite content providers or a video game system console a head mounted display HMD or other wearable computing device including a wearable computing device having an eyeglass projection screen and or various other generally known types of computing devices.

As shown in system may include one or more beacons . In some embodiments beacons may be installed at a merchant location such as a store restaurant and the like and other locations where user may be able to check in and receive additional content offers features or payment options. In some embodiments beacons may be Bluetooth Low Energy BLE beacons. BLE is a technology that transmits information at a frequency of about 2.4 GHz about 2042 2480 MHz over forty 40 2 MHz wide channels and has a range of about 50 meters or about 160 feet. Information transmitted according to the BLE protocol may be transmitted at a rate of about 1 Mbit s with an application throughput of about 0.27 Mbit s. In some embodiments BLE communications may be secured using 128 bit Advanced Encryption Standard AES encryption with counter mode with a cipher block chaining message authentication code CBC MAC and user defined security. Further in some embodiments BLE communications may utilize adaptive frequency hopping lazy acknowledgement a 24 bit cyclic redundancy check CRC and 32 bit message integrity check for robustness. Moreover in some embodiments BLE capable devices may consume a fraction of the power of standard Bluetooth devices due to the protocol allowing low duty cycles and being designed for applications that may not require continuous data transfer. Beacons may transmit one or more sequences of information such that when a device such as client computing device capable of receiving information from beacons comes within the range of a beacon client computing device may receive a transmission from a beacon that may include information data metadata and the like that may be displayed by client computing device or used by client computing device to initiate communications with beacon . In some embodiments beacon may be in communication with remote server over network through wireless or wired connection. In particular beacon may be in communication with remote server over network . Beacon may also transmit information to client computing device using other wireless communication protocols such as Bluetooth Near Field Communications NFC Radio Frequency Identification RFID and the like.

Client computing device may include any appropriate combination of hardware and or software having one or more processors and capable of reading instructions stored on a tangible non transitory machine readable medium for execution by the one or more processors. Consistent with some embodiments client computing device includes a machine readable medium such as a memory not shown that includes instructions for execution by one or more processors not shown for causing client computing device to perform specific tasks. In some embodiments the instructions may be executed by the one or more processors in response to interaction by user . For example such instructions may include browser application such as a mobile browser application which may be used to provide a user interface to permit user to browse information available over network including information hosted by remote server . For example browser application may be implemented as a web browser to view information available over network . Browser application may include a graphical user interface GUI that is configured to allow user to interface and communicate with remote server or other servers managed by content providers or merchants via network . For example user may be able to access websites to find and purchase items as well as access user account information or web content.

Client computing device may also include a check in application that may allow user to check in to a location using a check in platform or service such as may be provided by PayPal Inc. of San Jose Calif. Foursquare of New York N.Y. Facebook Inc. of Menlo Park Calif. or Google of Google Inc. of Mountain View Calif. Yelp Inc. of San Francisco Calif. or by a merchant or location and implemented by remote server . In some embodiments check in application may include multiple application programming interfaces APIs for checking in to one or more of the check in platforms or services. In some embodiments checking in to a location while visiting the location such as a merchant physical storefront may provide user with exclusive deals or offers and or may allow user to purchase and pay for items.

Client computing device may also include a payment application that may be used by user using client computing device to make a payment. In some embodiments payment application may be configured to make a payment using remote server as a payment processor. In some embodiments functionalities provided by check in application and payment application may actually be provided by a single application. Client computing device may include other applications as may be desired in one or more embodiments to provide additional features available to user including accessing a user account with remote server . For example applications may include interfaces and communication protocols that allow the user to receive and transmit information through network and to remote server and other online sites. Applications may also include security applications for implementing client side security features programmatic client applications for interfacing with appropriate APIs over network or various other types of generally known programs and or applications. Applications may include mobile applications downloaded and resident on client computing device that enables user to access content through the applications. The applications may also include token management applications that may for example receive process manage and or present tokens allowing user to perform transactions present credentials and or the like. As an example the Passbook application provided by Apple Inc. of Cupertino Calif. may be a suitable token management application. In some examples check in application and the token management application may be provided in a combined application.

Remote server according to some embodiments may be maintained by an online payment provider such as PayPal Inc. of San Jose Calif. which may provide processing for online financial and information transactions on behalf of user . Remote server according to some embodiments may also be maintained by a service that processes check ins so that a proprietor of a location such as a merchant or others know that user is at the location or is able to provide user with the ability to pay for goods using client computing device receive offers receive loyalty points and or the like. Remote server may also be capable of providing access to a merchant s goods and services collectively referred to as items that are for purchase and may provide a payment service processing for the purchased items. Remote server may include at least check in application which may be configured to interact with client computing device and beacon to check user in to a location. In some embodiments checking client computing device in to a location may allow user and client computing device to access features specials offers and or the like offered by the location. In some embodiments these features specials offers and or the like may be provided and processed by remote server on behalf of the location. In some embodiments check ins may be automatic check ins made through the communication of client computing device and beacon such as described in U.S. patent application Ser. No. 13 938 860 filed on Jul. 10 2013 and issued as U.S. Pat. No. 8 972 296 on Mar. 3 2015 and U.S. patent application Ser. No. 14 021 045 filed on Sep. 9 2013 and published as U.S. Patent Application Publication No. 2014 0188733 the entire contents of both of these applications which are hereby incorporated by reference in their entirety.

Remote server may also include a payment application that may facilitate processing payments for user to merchants for example. In some embodiments payment application may be configured to interface with payment application to receive payment details user information merchant information and or additional information for processing a payment on behalf of user . Payment application may also be capable of interfacing with check in application such that when a check in is processed a payment may be authorized for the location in which user is checking in to. In some embodiments functionalities provided by check in application and payment application may actually be provided by a single application. Remote server may also include an account database that includes account information for users having an account on remote server such as user . In some embodiments payment application may process payments based on information in account information of account database . Remote server may include other applications and may also be in communication with one or more external databases that may provide additional information that may be used by remote server . In some embodiments databases may be databases maintained by third parties and may include third party account information of user .

As used herein user may have an account with remote server such that account information includes information about user . When user checks in with remote server or performs other authentication with remote server client computing device may be associated with user such that remote server recognizes client computing device as being associated with user . In some embodiments remote server may send a cookie token and or other object to client computing device that provides an indication of the association between user and client computing device .

Although discussion has been made of applications and applications on client computing device and remote server the applications may also be in some embodiments modules. Module as used herein may refer to a software module that performs a function when executed by one or more processors application specific integrated circuits ASICs field programmable gate arrays FPGAs and or other circuit having memory and at least one processor for executing instructions to perform a function such as the functions described as being performed by the applications.

Consistent with some embodiments computing system includes a system bus for interconnecting various components within computing system and communicating information between the various components. Such components include a processing component which may be one or more processors micro controllers graphics processing units GPUs digital signal processors DSPs ASICs and or FPGAs and a memory component which may correspond to a random access memory RAM an internal memory component a read only memory ROM or an external or static optical magnetic or solid state memory. Consistent with some embodiments computing system further includes a display component for displaying information to a user of computing system . Display component may be a liquid crystal display LCD screen an organic light emitting diode OLED screen including active matrix AMOLED screens an LED screen a plasma display or a cathode ray tube CRT display. Computing system may also include an input component allowing for a user of computing system such as consumer to input information to computing system . Such information could include payment information such as an amount required to complete a transaction account information authentication information such as a credential or identification information. An input component may include for example a keyboard or key pad whether physical or virtual. Computing system may further include a navigation control component configured to allow a user to navigate along display component . Consistent with some embodiments navigation control component may be a mouse a trackball or other such device. Moreover if device includes a touch screen display component input component and navigation control may be a single integrated component such as a capacitive sensor based touch screen.

Computing system may further include a location component for determining a location of computing system . In some embodiments location component may correspond to a GPS transceiver that is in communication with one or more GPS satellites. In other embodiments location component may be configured to determine a location of computing system by using an internet protocol IP address lookup or by triangulating a position based on nearby telecommunications towers or wireless access points WAPs . Location component may be further configured to store a user defined location in memory component that can be transmitted to a third party for the purpose of identifying a location of computing system . Computing system may also include sensor components . Sensor components provide sensor functionality and may correspond to sensors built into client computing device or sensor peripherals coupled to client computing device . Sensor components may include any sensory device that captures information related to user and or client computing device that may be associated with any actions that user performs using client computing device . Sensor components may include camera and imaging components accelerometers biometric readers GPS devices motion capture devices and other devices that are capable of providing information about client computing device or user or an environment therearound. Computing system may also include one or more wireless transceivers that may each include an antenna that is separable or integral and is capable of transmitting and receiving information according to one or more wireless network protocols such as Wi Fi 3G 4G HSDPA LTE RF NFC IEEE 802.11a b g n ac or ad Bluetooth BLE WiMAX ZigBee etc.

Computing system may perform specific operations by processing component executing one or more sequences of instructions contained in memory component . In other embodiments hard wired circuitry may be used in place of or in combination with software instructions to implement the present disclosure. Logic may be encoded in a computer readable medium which may refer to any medium that participates in providing instructions to processing component for execution including memory component . Consistent with some embodiments the computer readable medium is tangible and non transitory. In various implementations non volatile media include optical or magnetic disks volatile media includes dynamic memory and transmission media includes coaxial cables copper wire and fiber optics including wires that comprise system bus . Some common forms of computer readable media include for example floppy disk flexible disk hard disk magnetic tape any other magnetic medium CD ROM any other optical medium punch cards paper tape any other physical medium with patterns of holes RAM PROM EPROM FLASH EPROM any other memory chip or cartridge or any other medium from which a computer is adapted to read.

In various embodiments of the present disclosure execution of instruction sequences to practice the present disclosure may be performed by computing system . In various other embodiments of the present disclosure a plurality of computing systems coupled by a communication link to network e.g. such as a LAN WLAN PTSN and or various other wired or wireless networks including telecommunications mobile and cellular phone networks may perform instruction sequences to practice the present disclosure in coordination with one another. Computing system may transmit and receive messages data and one or more data packets information and instructions including one or more programs i.e. application code through communication link and network interface component and wireless transceiver . Received program code may be executed by processing component as received and or stored in memory component .

Beacon also includes a system bus for interconnecting various components within beacon and communicating information between the various components. Such components include a processing component which may be one or more processors micro controllers GPUs DSPs ASICs and or FPGAs a memory component firmware and one or more wireless transceivers that may each include an antenna that is separable or integral and is capable of transmitting and receiving information according to one or more wireless network protocols such as Wi Fi 3G 4G HSDPA LTE RF NFC IEEE 802.11a b g n ac or ad Bluetooth BLE WiMAX ZigBee etc. Beacon may also include a power source . Power source may be any power source capable of providing sufficient current to power the components of beacon . In some embodiments power source may be a battery such as a watch battery or button cell.

In some embodiments beacon may be configured to transmit information using wireless transceivers based on instructions stored in memory and or firmware executed by processing component . The instructions may be stored in memory and or firmware by directly writing the instructions to memory and or firmware over communication link to beacon hardware interface or by wirelessly receiving instructions by wireless transceivers . In some embodiments beacon may be configured to transmit information related to checking in to a merchant associated with beacon . In some embodiments beacon may also transmit instructions that when received by client computing device may cause check in application or payment application to be executed by processing component to cause client computing device to perform a check in at the merchant associated with beacon . Further beacon may transfer instructions that when received by client computing device cause payment application to be executed by processing component to allow user to authorize a payment to be processed by remote server . In some embodiments wireless transceiver may correspond to a BLE transceiver configured to transmit and receive information according to the BLE protocol. In some embodiments beacon may be a BLE beacon or dongle such as described in U.S. patent application Ser. No. 13 938 860 filed on Jul. 10 2013 and issued as U.S. Pat. No. 8 972 296 on March 3 the entire contents of which are hereby incorporated by reference in their entirety. Further BLE beacon may have a design such as shown in U.S. Design Application No. 29 455 720 filed May 23 2013 and issued as U.S. Design Pat. No. D717 309 on Nov. 11 2014 the entire contents of which are also incorporated herein by reference in their entirety.

As will be readily appreciated the foregoing networks systems devices methods and variations thereof can be used to implement an automated check in of users at a cooperating or subscribing establishment such that subsequent purchase transactions and other activities can be more streamlined and convenient.

Merchant location includes an indoor store floor having a number of beacons . In some embodiments beacons may be BLE beacons. Beacons may further be in communication with remote server over network . These devices can be distributed strategically throughout merchant location such as near the front door at central locations and or at locations of high volume traffic within the establishment. One or more client computing devices such as smartphones tablets or the like can interact with one or more of the beacons throughout the location . Preferably just one interaction with a beacon is needed for a check in although it may be useful for an establishment to know where user is located and or user travel and shopping patterns or habits within location . Such further information can be used to provide further advertising and promotional offers e.g. related to something at or near where the user is physically located and or to authenticate the actual user versus one who may have stolen or is otherwise using the mobile device in an unauthorized fashion. Such further authentication can involve checking known user traffic and shopping patterns against what is currently happening for a given device .

An actual automatic check in process can involve a subscribed or affirmatively active user entering a merchant location whereupon client computing device associated with user has a low level background program such as check in application running that detects a low level BLE signal from one or more beacons in the store. Client computing device can then wake up and communicate on a more active level with beacon . In some embodiments a unique device identifier and token can be generated and assigned to client computing device for a particular time location and session with appropriate expiration and other safeguards in place to protect against fraud or other misuse. For example a period of anywhere from one to five minutes to one or two hours or longer might suffice for a typical check in session or event. The process of establishing communications between client computing device and beacon and exchanging metadata and a one time use beacon token to perform a check in is described in U.S. patent application Ser. No. 13 938 860 filed on Jul. 10 2013 and issued as U.S. Pat. No. 8 972 296 on Mar. 3 2015 and U.S. patent application Ser. No. 14 021 045 filed on Sep. 9 2013 and published as U.S. Patent Application Publication No. 2014 0188733 the entire contents of both of these applications which are hereby incorporated by reference in their entirety.

However parts used to produce beacons may have a limited amount of communications channels that allow for simultaneous communications with devices such as client computing device . For example processing component and wireless transceiver may be currently configured to handle a limited number of simultaneous communications channels such that a beacon may be able to be in communication with to check in provide offers process payments and the like with a limited number of client computing device . The process of establishing communications between client computing device and a group of coordinated beacons is described in U.S. patent application Ser. No. 14 248 263 filed on Apr. 8 2014 and published as U.S. Patent Application Publication No. 2015 0072618 on Mar. 12 2015 the entire contents of this application is hereby incorporated by reference in its entirety.

In particular current integrated circuits ICs and microchips used for current BLE devices may handle a maximum of 37 concurrent data channels. As a result if more than 37 different client computing devices enter merchant location through door beacon cannot communicate with each of the 37 client computing devices which means that beacon may not be able to check in each of the 37 client computing devices or process payments for facilitate payment processing for each of the client computing devices .

Beacon may then repeatedly broadcast an identifier. In some embodiments the identifier may be a universally unique identifier UUID . The broadcast UUID may be received by client computing device to initiate communications with beacon . Beacon may then provide signed metadata a specific one time use beacon token and or a digital signature associated with the signed metadata to client computing device . In some embodiments client computing device may request the metadata and other information from beacon when communications are initiated with beacon . Check in application may be configured to verify the metadata and other information such as the digital signature as being issued by the service provider by using a public key received from remote server . When the digital signature is verified as authentic check in application may then provide user with the option to check in. When user checks in client computing device may then generate a check in request to be sent to beacon . In some examples the check in request may be encrypted using a suitable encryption key. Beacon then forwards the check in request to remote server which decrypts the check in request when it is encrypted. Beacon may also include its UUID or other identifier with the forwarded check in request so that remote server may know the approximate location of user and or the identity of the merchant or venue associated with beacon . The process of checking in by communicating with a BLE beacon such as beacon is further described in U.S. patent application Ser. No. 13 938 860 filed on Jul. 10 2013 and issued as U.S. Pat. No. 8 972 296 on Mar. 3 2015 and U.S. patent application Ser. No. 14 021 045 filed on Sep. 9 2013 and published as U.S. Patent Application Publication No. 2014 0188733 the entire contents of both of these applications which are hereby incorporated by reference in their entirety.

Remote server may then use the forwarded check in request and or the identifier of beacon to check in user . To verify the identity of user remote server may access account database to validate the user credentials included in the check in request. Once user is checked in remote server generates a custom token for use by user while user remains in proximity to beacon . The custom token may include sufficient user identifying information to identify the user. In some embodiments the custom token may be generated based on a previously arranged relationship between user the service provider associated with remote server and or the merchant or venue associated with beacon . In some examples the previously arranged relationship may be associated with an earlier registration and or account creation between user the service provider and or the merchant or venue. The custom token may additionally include information associated with the merchant or venue such as the merchant or venue name location of beacon and or the like. In some examples the location of the beacon may include a latitude and longitude associated with beacon and previously recorded by remote server . The custom token may also include a date and or time stamp so that an appropriate period of use for the custom token may be established. In some examples the custom token may also include an identifying image such as a quick response QR code bar code or similar that may be presented on client computing device and scanned by the merchant or venue to communicate that user is in possession of the custom token. The custom token may additionally include a consistency check such as a CRC code and or a digital signature.

Tokens are typically fairly large in size often being as much as 200 kilobytes to one megabyte or larger in size. The large amount of bandwidth used to transmit a complete custom token back to client computing device through beacon may not be reasonable. For example many beacons typically support a bandwidth with individual user devices of a few thousand bits per second. Fortunately large portions of the custom token are typically static and change little or not at all between uses. In some examples a generic token may be created for each user and service provider or merchant venue account relationship that varies by about 500 bytes or so with the custom token created as a result of the check in. This generic token may be provided to client computing device during registration and or account creation.

In some examples the differences between the generic token and the custom token may be limited to the merchant or venue name location date or time stamp and or similar fields that may be associated with one or more details of the current use corresponding to the check in being processed. The differences between the fields associated with the current use may also have ripple effects on other fields within the custom tokens. In some examples these other fields may include consistency check digital signature and or similar fields. In some examples the consistency check digital and or similar fields may be used by beacon client computing device check in application and or a token management application to verify and or validate the content of the custom token and or determine the trustworthiness of the source of the token e.g. remote server . In some examples the custom token may include an extended certificate chain to further validate the source of the token. In some examples the certificate chain may be relatively static and may not typically change between issuance of the generic token and creation of the custom token as digital certificates are typically issued by certificate authorities for months or years at a time. Thus considerable bandwidth may be saved by returning just the differences between the generic token and the custom token to client computing device through beacon . For security reasons the token differences may be encrypted during transmission to client computing device .

Once the differences between the generic token and the custom token are determined remote server may return those differences to beacon which may then forward them to client computing device . When client computing device receives the difference check in application may use the differences and the generic token received during registration or account creation to recreate the custom token. The recreated custom token may then be passed to the token management application for presentation and or use by user .

To provide further security check in application may additionally include a time out feature. After recreation of the custom token check in application may start an expiration timer. In some embodiments the expiration time may be set to a fixed period of time after the time at which the custom token was recreated. In some embodiments the fixed period of time may be set by policy and or user preference and may be based on the type and or desired use of the custom token. In some embodiments the fixed period of time may vary between one to five minutes to one or two hours or longer. For example a custom token for a purchase transaction may have a significantly shorter validity period than an admission or entry token. In some examples the expiration timer may be retriggered and or reset as long as client computing device remains in proximity to beacon . In some examples remote server may also use an expiration timer to limit the validity period of the custom token so as to deny any action resulting from untimely use of the custom token.

As shown in method may begin with a process where client computing device receives a broadcasted identifier. In some embodiments client computing device may use a beacon detector to listen for and or detect identifiers that may be broadcast by a beacon such as beacon . The broadcasted identifier may be a UUID received from one of the beacons in a location including beacons and or . In some embodiments beacons and may be BLE beacons such that the identifier may be broadcast according to BLE communications protocols. Client computing device may include wireless transceiver that may be capable of communicating with beacon using BLE communication protocols and receiving the broadcasted identifier. In some embodiments upon detection of beacon by beacon detector by the reception of the broadcasted identifier beacon detector may notify check in application that client computing device is in proximity to beacon .

At a process client computing device may then initiate communications with beacon . In some embodiments check in application may initiate communications with beacon by exchanging one or more messages with beacon using wireless transceiver . In some embodiments check in application of client computing device may verify the broadcasted identifier received during process using one or more tokens keys and or identifiers received during an earlier sign up registration enrollment and or account creation with remote server and or during a check in application installation process not shown . The one or more tokens keys and or identifiers may be stored in memory component of client computing device using a key store .

At a process client computing device may then request metadata and other information from beacon . This may include check in application of client computing device sending one more messages and or communication requests to beacon . In some embodiments these messages and or communication requests may be encrypted. In some embodiments check in application may use a cryptographic engine to encrypt and or decrypt the messages and or communication requests exchanged with beacon . In some embodiments the encryption and or decryption may use one or more keys stored in key store . In some embodiments these messages may be sent to beacon by wireless transceiver of client computing device using a BLE communication protocol.

At a process client computing device may receive metadata a beacon token and a digital signature from beacon in response to the messages and or communication requests sent during process . The response may be received in one or more messages from beacon and may be encrypted as well. In some embodiments the one or more messages may be decrypted using cryptographic engine . In some embodiments these messages may be received from beacon by wireless transceiver of client computing device using a BLE communication protocol.

At a process client computing device may verify the received information using stored keys. Check in application of client computing device may then verify the received information including the digital signature using the keys stored in memory component and or key store of client computing device and received from remote server during the sign up registration enrollment account creation and or application installation process. After verification of the received information check in application of client computing device may choose to initiate the check in process either automatically or after receiving confirmation to proceed from user . For example client computing device may provide an interactive prompt to user using a user interface displayed on display component of client computing device . The interactive prompt may ask user for permission to check in via the check in service associated with beacon and remote server . User may be able to accept the check in by interacting with the prompt and user interface by using input component navigation control and display component or a combination thereof as is consistent with the user interface elements used by user interface .

At a process check in application of client computing device may send a check in request to beacon . In some embodiments the check in request may be sent to beacon using one or more messages. In some embodiments the check in request may be sent to beacon by wireless transceiver of client computing device using a BLE communication protocol. In some embodiments the check in request may be encrypted prior to being sent to beacon using cryptographic engine and one or more encryption keys stored in key store .

At a process client computing device may receive token differences from beacon . When the check in request sent during process is verified by remote server remote server may create a custom token associated with the check in session. Remote server may then determine differences between the custom token and a generic token that may be known to check in application and may be stored in memory component of client computing device . In some embodiments check in application of client computing device may have received generic token during the earlier sign up registration enrollment account creation and or application installation process. Remote server may then send the token differences to beacon which in turn forwards the token differences to client computing device for delivery to check in application .

At a process check in application of client computing device may recreate the custom token from generic token and the token differences. Check in application of client computing device may apply the token differences received during process to generic token stored in memory component to recreate the custom token using a difference tool . Difference tool may apply each of the token differences applying to bits bytes and or fields of generic token to recreate the custom token. In some embodiments these token differences may include changes to the merchant venue name location date time stamp consistency check and or signature fields of generic token so that it may now be used for an activity associated with beacon and or the merchant associated with beacon . In some embodiments the recreated custom token may be used to replace generic token stored in memory component or may be used to create a new custom token for storage in memory component .

At a process client computing device may activate a token management application . After the custom token is recreated during process token management application and or the token management portion of the check in application is notified that the recreated custom token is available to use. In some embodiments this notification may be triggered by the update to generic token or the storage of the recreated custom token in the portion of memory component being monitored by the token management application . In some embodiments check in application may make one or more API calls to token management application to notify token management application of the modified or created custom token. Token management application may then use the custom token based on its type and or content to complete a purchase transaction and or other operation. In some embodiments the other operation may include a check in operation with the merchant presentation of user and or user device credentials generation of an admission or entry token and or the like. In some embodiments token management application may generate and or display an identifying image such as a QR code or barcode using user interface on display component of client computing device for use by the merchant and or venue associated with beacon . In some embodiments the identifying image may be displayed automatically without any input or direction from user of client computing device throughout the check in process. In some embodiments the identifying image may be displayed on a locked home screen of client computing device .

At a process client computing device may determine whether a time out period for the recreated custom token is expired. In some embodiments recreation of the custom token during process and or activation of token management application during process may include having token management application activate a timer . In some embodiments timer may begin counting down the time out period once it is activated. In some embodiments timer may generate an interrupt and or other event at the end of the time out period. In some embodiments token management application may listen for and or wait for the interrupt and or event to know when the time out period is ended. Token management application of client computing device may use the time out period to limit a time period for which the recreated custom token is available for use. In some embodiments the time out period may be set to a fixed period of time after the time at which the custom token was recreated. In some embodiments the fixed period of time may be set by policy and or user preference and may be based on the type and or desired use of the custom token. In some embodiments the fixed period of time may vary between one to five minutes to one or two hours or longer. For example a custom token for a purchase transaction may have a significantly shorter validity period than an admission or entry token. In some examples the expiration timer may be retriggered and or reset such as by beacon detector as long as client computing device remains in proximity to beacon . When the time out period is not expired client computing device repeats monitoring of the time out period using process . When the time out period expires the recreated custom token is removed using a process .

At a process client computing device may remove the recreated custom token. To limit the usage period for the recreated custom token token management application of client computing device removes the recreated custom token after the time out period. In some embodiments the recreated custom token is removed using difference tool by reversing the application of the token differences received during process to recreate generic token for storage in memory component . In some embodiments the recreated custom token is removed from memory component leaving generic token for use during a future application of method .

At a process beacon may broadcast an identifier. In some embodiments beacon may be a BLE beacon such that the identifier may be broadcast according to BLE communications protocols. The broadcast identifier may have been received from remote server as part of a setup of beacon in location and may be a UUID. In some embodiments beacon may broadcast the identifier at repeating intervals so that as different users and client computing devices move into and out of range of beacon each of the client computing devices may be made aware of the existence of beacon and its availability for check in services. In some embodiments the broadcasted identifier may be the identifier received by client computing device during is corresponding process .

At a process beacon may then send metadata a beacon token and a digital signature in response to a request received from a client computing device that received the broadcast identifier. In some embodiments the beacon token digital signature and metadata may be received from remote server and stored in memory component and or firmware during a configuration and or set up process not shown . In some embodiments the request may be the request sent by client computing device during its corresponding process and the sent metadata beacon token and digital signature may be received by client computing device during its corresponding process . In some embodiments the metadata beacon token and digital signature may be sent by beacon by network component interface using a BLE communication protocol.

At a process beacon may receive a check in request from client computing device . When client computing device is able to verify the metadata beacon token and digital signature sent during process and obtains user permission to check in client computing device may send a check in request to beacon . In some embodiments the check in request may be the check in request sent by client computing device during its corresponding process . In some embodiments the check in request may be received by beacon via network component interface using a BLE communication protocol.

At a process beacon may forward the check in request to remote server . In some embodiments beacon may forward the check in request to remote server using one or more messages sent over network .

At a process beacon may receive token differences from remote server . When the check in request forwarded during process is verified by remote server remote server may create a custom token associated with the check in session. Remote server may then determine differences between the custom token and a generic token known to be stored in memory component of client computing device . In some embodiments client computing device may have received the generic token during the earlier sign up registration enrollment account creation and or application installation process. Remote server may then send the token differences to beacon .

At a process beacon may forward the token differences to client computing device . The token differences received during process are forwarded to client computing device where they are received by client computing device during its corresponding process . In some embodiments the token differences may be forwarded by beacon via wireless transceiver using a BLE communication protocol.

Although not expressly shown in beacon may continue to broadcast the identifier using process so that additional client computing devices may perform a check in with remote server and receive token differences corresponding to their respective custom tokens. In some embodiments the continued broadcasting of the identifier by beacon may be used by client computing device to in part determine when the custom token recreated by client computing device is be removed from client computing device .

At a process remote server may provide one or more tokens keys and or other identifiers to client computing device and or beacon . In some embodiments remote server may use account creation application to provide a generic token and keys to client computing device as part of a sign up registration enrollment account creation and or application installation process. When user desires to use the check in and transaction services of the service provider associated with remote server user may initiate a sign up registration enrollment and or account creation process with account creation application of remote server . Upon completion of this process client computing device of user may be provided with a copy of check in application and or token management application as well as generic token for use with custom tokens associated with remove server and the associated service provider. In some embodiments account creation application of remove server may provide tokens keys and or other identifiers to beacon when beacon is put into communication with remote server using network . In some embodiments account creation application may exchange one or more messages with client computing device and or beacon over network using network interface component . In some embodiments account creation application may store a copy of generic token in a token store and or memory component .

At a process remote server may receive a check in request from beacon . In some embodiments check in application of remote server may receive the check in request over network and via network interface component in the form of one or more network messages or packets. In some embodiments the check in request may be encrypted and may be decrypted by check in application using a cryptographic engine . In some embodiments the check in request may be the check in request sent by check in application of client computing device during the corresponding process of client computing device and forwarded by beacon during the corresponding process of beacon . The check in request may include identifiers keys and or signatures sufficient to verify the legitimacy of the check in request and to confirm that client computing device is authorized to receive tokens. In some embodiments the check in request may include one or more identifiers keys and or signatures such as a UUID that are sufficient to identify the merchant and or venue associated with beacon and or the location of beacon . In some embodiments check in application of remote server may access account database to compare information in the check in request to a corresponding user account to verify the identity of user of client computing device .

At a process check in application of remote server may create a custom token using user and beacon information. Using the contents of the check in request received during process and information associated with beacon that forwarded the check in request to remote server check in application of remote server may create a custom token suitable for use by client computing device to perform a transaction and or other operation with the merchant or venue associated with beacon . In some embodiments the other operation may include a check in operation with the merchant presentation of user and or user device credentials generation of an admission or entry token and or the like. In some embodiments the custom token may include information such as the name of the merchant or venue location of beacon identifying information for user and or client computing device a date time stamp an identifying image such as a QR or bar code a consistency check a signature and or the like.

At a process remote server may determine differences between the custom token and the generic token issued to user or client computing device . In some embodiments the generic token may be generic token provided to client computing device during process . In some embodiments generic token may be retrieved from token store based on one or more identifiers associated with user client computing device beacon and or the merchant associated with beacon . In some embodiments check in application of remote server may determine the differences between the custom token and the generic token using a difference tool .

In some embodiments the differences between the custom token and the generic token may be limited to about 500 bytes or less of the custom token. In some embodiments the difference between the custom token and the generic token may be determined by a bit by bit or byte by byte comparison of the custom token and the generic token by difference tool with the differences including a list of bits or bytes that are different and the differences in their respective values. In some embodiments the difference between the custom token and the generic token may be determined by a field by field e.g. merchant or venue name field location field etc. comparison between the custom token and the generic token by difference tool with the differences including a list of fields that are different and the differences in their respective values.

At a process check in application of remote server may send the token differences to beacon . In some embodiments check in application of remote server may create one or more response messages to the check in request received during process that include the token differences determined during process . The messages may then be sent to beacon using network interface component and network . In some embodiments the messages may be received by beacon during its corresponding process for forwarding to check in application of client computing device during corresponding process .

Although not shown in check in application of remote server may also make a record of the check in request to record travel and or shopping patterns of user . In some embodiments the record may be recorded in account data database . In some embodiments check in application of remote server may additionally record the creation of the custom token during process along with sufficient date and time information so that remote server may confirm and or verify requests sent to remote server from the merchant or venue associated with beacon . In some embodiments remote server may also implement a time out period after which the custom token is no longer considered valid. In some embodiments check in application of remote server may use a timer in similar fashion to the way check in application of client computing device uses timer to implement the time out period.

Software in accordance with the present disclosure such as program code and or data may be stored on one or more machine readable mediums including non transitory machine readable mediums. For example some embodiments of client computing device beacon and or remote server may include non transient tangible machine readable media that include executable code that when run by one or more processors e.g. processing component and or may cause the one or more processors to perform the processes of methods and or as described above. Some common forms of machine readable media that may include the processes of methods and or are for example floppy disk flexible disk hard disk magnetic tape any other magnetic medium CD ROM any other optical medium punch cards paper tape any other physical medium with patterns of holes RAM PROM EPROM FLASH EPROM any other memory chip or cartridge and or any other medium from which a processor or computer is adapted to read.

It is also contemplated that software identified herein may be implemented using one or more general purpose or specific purpose computers and or computer systems networked and or otherwise. Where applicable the ordering of various steps described herein may be changed combined into composite steps and or separated into sub steps to provide features described herein.

Consistent with some embodiments there is provided a user device. The user device includes a wireless transceiver a memory for storing a generic token and one or more processors coupled to the memory and the wireless transceiver. The wireless transceiver is configured to communicate with a beacon using a Bluetooth low energy BLE communications protocol receive a beacon identifier from the beacon send a check in request to the beacon and receive token differences from the beacon. The processors are configured to recreate a custom token based on the stored generic token and the received token differences and perform an action using the custom token.

In some embodiments the one or more processors are further configured to verify the beacon before the check in request is sent. In some embodiments the wireless transceiver is further configured to request metadata from the beacon and receive the requested metadata from the beacon and the one or more processors are further configured to verify the beacon further based on the metadata. In some embodiments the one or more processors are further configured to provide the recreated custom token to a token management application. In some embodiments the one or more processors are further configured to initiate a time out period after recreating the custom token and removing the custom token at the end of the time out period. In some embodiments the time out period is extended while the wireless transceiver remains in communication with the beacon. In some embodiments the one or more processors are further configured to replace the generic token with the recreated custom token. In some embodiments the generic token is received from a server when the device is configured to use check in services. In some embodiments the beacon identifier includes a universally unique identifier UUID . In some embodiments the one or more processors are further configured to generate a visual representation of the custom token for display using a user interface. In some embodiments the visual representation is a quick response QR code.

Consistent with some embodiments there is also provided a method of managing tokens. The method includes communicating with a beacon via a wireless transceiver using a Bluetooth low energy BLE communications protocol receiving a beacon identifier from the beacon sending a check in request to the beacon receiving token differences from the beacon recreating a custom token based on a generic token stored in a memory and the received token differences and using the custom token to perform an action.

In some embodiments the method further includes initiating a time out period after recreating the custom token and removing the custom token at the end of the time out period. In some embodiments the method further includes extending the time out period while the wireless transceiver remains in communication with the beacon. In some embodiments the method further includes receiving the generic token from a server when the device is configured to use check in services. In some embodiments the method further includes generating a visual representation of the custom token for display using a user interface wherein the visual representation is a quick response QR code.

Consistent with some embodiments there is further provided a non transitory computer readable medium. The non transitory computer readable medium includes instructions that when executed by one or more processors cause the one or more processors to perform a method. The method includes communicating with a beacon via a wireless transceiver using a Bluetooth low energy BLE communications protocol receiving a beacon identifier from the beacon sending a check in request to the beacon receiving token differences from the beacon recreating a custom token based on a generic token stored in a memory and the received token differences and using the received token to perform an action.

In some embodiments the method further includes initiating a time out period after recreating the custom token and removing the custom token at the end of the time out period. In some embodiments the method further includes extending the time out period while the wireless transceiver remains in communication with the beacon. In some embodiments the method further includes receiving the generic token from a server when the device is configured to use check in services.

Consistent with some embodiments there is further provided a communications beacon. The communications beacon includes a wireless transceiver a network interface component in communication with a remote server over a network and one or more processors coupled to the network interface component and the wireless transceiver. The wireless transceiver is configured to communicate with a user device using a Bluetooth low energy BLE communications protocol broadcast a beacon identifier to the user device receive a check in request from the user device and forward token differences to the user device. The token differences are usable by the user device to recreate a custom token from a generic token. The network interface is configured to forward the check in request to the remote server and receive the token differences from the remote server. The processors are configured to coordinate operation of the network interface controller and the wireless transceiver.

In some embodiments the wireless transceiver is further configured to send metadata to the user device in response to a metadata request from the user device. In some embodiments the network interface component is further configured to receive one or more keys from the remote server during configuration of the beacon. In some embodiments the beacon identifier includes a universally unique identifier UUID . In some embodiments the beacon is a dongle beacon.

Consistent with some embodiments there is further provided a method. The method includes communicating with a user device via a wireless transceiver using a Bluetooth low energy BLE communications protocol broadcasting a beacon identifier to the user device receiving a check in request from the user device forwarding the check in request to a remote server via a network interface component coupled to the remote server via a network receiving token differences from the remote server and forwarding the token differences to the user device. The token differences are usable by the user device to recreate a custom token from a generic token.

Consistent with some embodiments there is further provided a non transitory computer readable medium. The non transitory computer readable medium includes instructions that when executed by one or more processors cause the one or more processors to perform a method. The method includes communicating with a user device via a wireless transceiver using a Bluetooth low energy BLE communications protocol broadcasting a beacon identifier to the user device receiving a check in request from the user device forwarding the check in request to a remote server via a network interface component coupled to the remote server via a network receiving token differences from the remote server and forwarding the token differences to the user device. The token differences are usable by the user device to recreate a custom token from a generic token.

Consistent with some embodiments there is further provided a server. The server includes a network interface component and one or more processors coupled to the network interface component. The network interface component is configured to receive a check in request from a beacon coupled to the server via a network and send token differences to the beacon for delivery to the user device. The check in request includes information associated with a beacon identifier and a user device communicating with the beacon. The processors are configured to verify the identity of the user device based on the received check in request create a custom token for use by the user device and determine the token differences based on differences between the custom token and a generic token assigned to the user device.

In some embodiments the server is further configured to send the generic token to the user device when the user device is being configured for check in services. In some embodiments the server is further configured to verify the user device further based on one or more records stored in an account database.

Consistent with some embodiments there is further provided a method. The method includes receiving a check in request from a beacon coupled to the server via a network. The check in request includes information associated with a beacon identifier and a user device communicating with the beacon. The method further includes verifying the identity of the user device based on the received check in request creating a custom token for use by the user device determining token differences based on differences between the custom token and a generic token assigned to the user device and sending the token differences to the beacon for delivery to the user device.

Consistent with some embodiments there is further provided a non transitory computer readable medium. The non transitory computer readable medium includes instructions that when executed by one or more processors cause the one or more processors to perform a method. The method includes receiving a check in request from a beacon coupled to the server via a network. The check in request includes information associated with a beacon identifier and a user device communicating with the beacon. The method further includes verifying the identity of the user device based on the received check in request creating a custom token for use by the user device determining token differences based on differences between the custom token and a generic token assigned to the user device and sending the token differences to the beacon for delivery to the user device.

Consequently embodiments described herein may allow a BLE beacon to facilitate a check in of a user device and the delivery of a custom token to the user device by forwarding differences between the custom token and a corresponding generic token stored on the user device. The embodiments described herein may then allow the BLE beacon to support the distribution of tokens to user devices while reducing the use of user device and or network resources. The examples provided above are exemplary only and are not intended to be limiting. One skilled in the art may readily devise other systems consistent with the disclosed embodiments which are intended to be within the scope of this disclosure. As such the application is limited only by the following claims.

