---

title: Methods and apparatus to dynamically select a peered voice over internet protocol (VoIP) border element
abstract: Methods and apparatus to select a dynamically peered voice over Internet protocol (VoIP) border element are disclosed. An example method comprises collecting data representative of a dynamic performance of a voice over Internet protocol network, prioritizing a selection of a peered border element based on the collected data, and modifying a telephone number mapping (ENUM) database based on the prioritized selection.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09661148&OS=09661148&RS=09661148
owner: AT&T Intellectual Property I, L.P.
number: 09661148
owner_city: Atlanta
owner_country: US
publication_date: 20151125
---
This patent arises from a continuation of U.S. application Ser. No. 11 845 519 Now U.S. Pat. No. 9 258 268 which was filed on Aug. 27 2007 and is hereby incorporated herein by reference in its entirety.

This disclosure relates generally to voice over Internet protocol VoIP networks and more particularly to methods and apparatus to dynamically select a peered VoIP border element.

Many voice over Internet Protocol VoIP service providers use peered border elements to allow a subscriber of a first VoIP service provider to initiate and or establish a VoIP and or Internet protocol IP Multimedia Subsystem IMS communication session with a subscriber of a second VoIP service provider. In general peered border elements are responsible for processing handling and or routing signaling and or media between two VoIP service provider networks. In many instances two VoIP service providers will be peered via two or more pairs of border elements located at different geographic locations.

Methods and apparatus to dynamically select a peered voice over Internet protocol VoIP border element are disclosed. A disclosed example method includes collecting data representative of a dynamic performance of a voice over Internet protocol network prioritizing a selection of a peered border element based on the collected data and modifying a telephone number mapping ENUM database based on the prioritized selection.

Another disclosed example method includes receiving a session initiation protocol SIP message that includes a called party identifier querying a telephone number mapping database based on the called party identifier to obtain two or more peered voice over Internet protocol VoIP border element identifiers and two or more priorities for respective ones of the two or more peered VoIP border element identifiers and selecting a one of the two or more peered VoIP border element identifiers based on the two or more priorities.

A disclosed example apparatus includes a data collector to collect data representative of a dynamic performance of a voice over Internet protocol network a peer prioritizer to prioritize a selection of a peered border element based on the collected data and a telephone number mapping ENUM database interface to modify an ENUM database based on the prioritized selection.

In the interest of brevity and clarity throughout the following disclosure references will be made to the example Internet protocol IP Multimedia subsystem IMS based voice over IP VoIP network of . Moreover the following disclosure will be made using session initiation protocol SIP messages and or SIP based message exchanges. However it should be understood that the methods and apparatus described herein to select a peered border element are applicable to other IMS and or VoIP communication systems and or networks e.g. networks based on soft switches VoIP devices IMS devices feature servers tElephone NUMber mapping ENUM servers border elements access networks IP networks IMS networks and or IMS communication systems and or other types of protocols messages and or message exchanges.

To provide communication services to a first set of subscribers e.g. associated with a first service provider the example communication system of includes an IMS network made available by the service provider A. Likewise to provide communication services to a second set of subscribers e.g. associated with a second service provider the example communication system of includes any type of IMS and or VoIP network made available by the service provider B. In some instances the example network implements any or all of the example methods and or apparatus to select a peered border element described below in connection with the IMS network . In general the example IMS network of provides and or enables IMS communication services e.g. telephone services Internet services data services messaging services instant messaging services electronic mail email services chat services video services audio services gaming services voicemail facsimile services etc. to the example VoIP device and or to VoIP devices of other service providers e.g. the example VoIP device .

The example service provider networks and of are communicatively coupled via any number of pairs of peered border elements. A first pair of peered border elements is designated in with reference numerals and and a second pair of peered border elements is designated with reference numerals and . Mated pairs of peered border elements implement for example handshaking media translation s and or protocol message modification s to facilitate communication sessions between subscribers of two service provider networks e.g. the example networks and .

Typically the pairs of peered border elements and are located so as to provide communicatively coupling between the service provider networks and at geographically separated locations. The locations at which peered border elements are located may differ depending on with which service provider s the IMS network has a peering relation. Further while the service provider of is illustrated as having a peering relationship with service provider the service provider may have other peering relationships with other service providers. Moreover the peering locations for those other service providers may be different from the peering locations for service provider . In some examples there may be more than one pair of peered bordered elements and at a given geographic location. In such examples the additional peered border elements and may be implemented for redundancy purposes and or to provide additional processing capability ies at that location. In some examples the peered border elements are located at IP peering locations to facilitate deterministic IP quality of service. However not all IP peering locations need support VoIP peering.

To collect real time and or dynamic network performance data and or information each of the example peered border elements and includes a performance monitor . The example performance monitors of measure collect and or aggregate any number and or type s of data and or information representative of the historical and or present performance of the IMS network . Example network performance data and or information may include but is not limited to jitter round trip delay latency out of order data data throughput rate processing load memory usage communication path utilization border element status e.g. operational failing and or failed etc. The example performance monitors may be configured to collect data within any layer of a protocol stack implemented by the border elements and or . As described below the data and or information measured collected and or aggregated by the performance monitors may be used to determine one or more parameters representative of the real time dynamic properties of the IMS network such as routing congestions overloaded border elements partially and or fully failed border elements etc. In some example performance monitors may be implemented by other devices of the IMS network such as routers switches hubs etc. Devices and or servers of the service provider may also collect real time and or dynamic network performance data and or information. In such instances the service providers and may exchange collected network performance data and or information to enable each service provider to better optimize the performance of their network but such an exchange is not mandatory for proper implementation of the example methods and apparatus to dynamically select a peered VoIP border element described herein.

To implement the communication services the example IMS network of includes an IMS core . In the illustrated example IMS network of each VoIP device e.g. the example VoIP device that is registered to the example IMS network is associated with and or assigned to a serving call session control function S CSCF server one of which is designated in with reference numeral . The example S CSCF server of is responsible for handling incoming and or outgoing IMS e.g. VoIP communication sessions e.g. telephone calls and or data and or video sessions associated with its registered VoIP devices e.g. the VoIP device . An example operation of the example S CSCF server of is described below in connection with .

While one S CSCF server is illustrated in the IMS core and or more generally the example IMS network may include any number and or type s of S CSCF servers and each such S CSCF server may support any number and or type s of VoIP devices. The example S CSCF server of performs session control maintains session states and or enables communications with call feature servers not shown for its associated and or registered VoIP devices. For instance when the VoIP device initiates for example an outgoing telephone call to the example VoIP device a communication session initiation message e.g. a SIP INVITE message sent by the VoIP device is routed by the IMS network to the S CSCF server associated with the VoIP device .

To locate and or identify the VoIP device and or VoIP endpoint e.g. the example VoIP device associated with a called party e.g. a called telephone number the example IMS core of includes any number of ENUM servers one of which is designated in with reference numeral . Based upon an ENUM query request message received from a S CSCF server e.g. the example S CSCF server the example ENUM server of performs a lookup of an ENUM database that stores associations of called party identifiers e.g. E.164 telephone numbers to one or more uniform resource identifiers URIs e.g. a SIP URI an HTTP URI etc. corresponding to peered border elements and or called devices . However an ENUM database may store any number and or type s of associations between any number and or type s of identifiers. The example ENUM server returns the one or more URIs to the S CSCF server .

As described below in connection with the example ENUM database may contain more than one database records to associate more than one URI with a particular called party identifier. For example if a called party e.g. the VoIP device is associated with another service provider e.g. the example network the ENUM database may contain database records for each of one or more peered border elements via which the communication session may be established. When two or more database records e.g. corresponding to two or more peered border elements are listed for a called party identifier each of the database records may have one or more associated values that represent a relative prioritization of each destination. The priority values and or the order in which the database records are listed in the ENUM database are returned by the ENUM server to the S CSCF server along with the URIs and allow the S CSCF server to select a particular destination e.g. a particular peered border element . For example the S CSCF server may a select the peered border element having the highest priority value b ignore peered border elements having a priority value less than a threshold and then pick from the remaining possible peered border elements using a round robin scheme or c pick the peered border element that is first in an order list of peered border elements . In the absence of priority values and or listing order information the S CSCF server may select a particular destination using any applicable method s algorithm s and or logic such as round robin selection. A returned URI may also be returned with an indication that the URI is inactive and thus not available to be selected and or used by the S CSCF server for the called party. In some examples the example ENUM server does not return such inactive URIs to the S CSCF server .

To determine and or adjust the relative priority of the ENUM database records for called parties the example IMS core of includes an operational support system OSS server . In the illustrated example of the OSS server represents one or more elements of a network operations center and or one or more elements of an operational support system. The example OSS server periodically and or aperiodically collects the network performance data and or information collected by the example performance monitors . Based on the collected network performance data and or information the example OSS server periodically and or aperiodically computes one or more metrics that may be used to prioritize the selection of the peered border elements . For example the OSS can compute the congestion of communication paths associated with the peered border elements the processing load of the peered border elements and or the state s of the peered border elements e.g. operational partially failed failing and or failed . Such metrics may be computed using any past present and or future algorithm s method s apparatus and or logic and descriptions of the same are beyond the scope of this disclosure. An example manner of implementing the example OSS server of is described below in connection with .

Based on the computed metrics the example OSS server of prioritizes the order in which the peered border elements are to be selected. For example lightly loaded peered border elements are preferred over more heavily loaded peered border elements failing and or failed peered border elements are to be avoided peered border elements having congested communication paths and or links are less preferable to ones have less congested communication paths and or links etc. After prioritizing the selection of the peered border elements the example OSS server modifies one or more records of the ENUM database to represent the computed relative priorities of the peered border elements . ENUM database records may be prioritized by modifying priority values of the ENUM database records and or by re ordering the records. Additionally or alternatively ENUM database records may be added and or removed for a particular called party. For example if a particular peered border element has failed and thus not available to process a communication session for the called party its associated ENUM database record may be removed and or marked as inactive. Likewise the OSS server may change the status of a particular peered border element from an inactive state to an active state e.g. available for routing a communication session by updating its associated ENUM database record. If a route for a called party is unavailable the ENUM database may be modified to indicate an alternative route e.g. use peered border elements and rather than peered border elements and . The OSS server may modify the ENUM database directly by for example locking a database record to be changed modifying the database record and then unlocking the database record. Additionally or alternatively the ENUM database may be modified by accessing an application programming interface API implemented by and or provided by the example ENUM server .

The modifications of the ENUM database by the example OSS server of may be performed without the involvement and or knowledge of the S CSCF server and or the ENUM server . In this way the OSS server can adaptively affect the prioritized selection of the peered border elements without there being a need to modify traditional ENUM functions and or services typically implemented by the S CSCF server and or the ENUM server . Moreover if the method s and or algorithm s by which the selection of the peered border elements are changed the S CSCF server and or the ENUM server do not require modification as the changes may be localized to the OSS server . By prioritizing the selection of the peered border elements the OSS server reduces the likelihood of routing errors reduces communication session setup times adjusts the IMS network in response to failing failed devices etc. as compared to traditional peered border elements selection methods.

To resolve a URI to an IP address the example IMS core of includes any type of DNS server . For a particular URI SIP HTTP and or otherwise and using any applicable method s logic and or algorithm s the example DNS server performs a DNS lookup to obtain an IP address assigned to and or associated with the URI.

While an example IMS network has been illustrated in the devices networks systems servers and or processors illustrated in may be combined divided re arranged eliminated and or implemented in any way. For example it will be readily appreciated by persons of ordinary skill in the art that the example peered border elements the example performance monitors the example IMS core the example S CSCF server the example ENUM server the example OSS server the example DNS server illustrated in are logical entities. They may therefore be implemented separately and or in any combination using for example machine accessible instructions executed by one or more computing devices and or computing platforms e.g. the example processing platform of . Further the example peered border elements the example performance monitors the example IMS core the example S CSCF server the example ENUM server the example OSS server the example DNS server and or more generally the example IMS network may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still the example IMS network may include additional devices servers systems networks gateways portals and or processors in addition to or instead of those illustrated in and or may include more than one of any or all of the illustrated devices servers networks systems gateways portals and or processors. For example the IMS core may include one or more of a proxy CSCF server an interrogating CSCF server a feature server an application server a home subscriber server HSS a media gateway a breakout gateway control function BGCF sever a media gateway control function MGCF server a softswitch an IP router an IP switch etc.

When the S CSCF SERVER server associated with the VoIP device receives a communication session initiation request message e.g. a SIP INVITE message from the VoIP device the S CSCF SERVER performs an ENUM query via the ENUM server . The ENUM server responds with one or more URIs e.g. a first URI for the peered border element a second URI for the peered border element and respective priority values . Based on the returned URI s and priority values and or the order of a list of URIs the example policy server selects a peered border element to be used block . The S CSCF server then performs a DNS lookup based for the selected peered border element not shown and uses the obtained IP address to initiate the requested communication session via a request message .

The peered border element sends the SIP INVITE message to its peer in the other network. The other network routes the SIP INVITE message to the called VoIP device . Using applicable past present and or future negotiation and or communication establishment methods the VoIP device and the VoIP device establish the requested communication session.

To prioritize the selection of peered border elements e.g. the example peered border elements of the example OSS server of includes a peer prioritizer . Based on the collected network performance data and or information the example peer prioritizer periodically and or aperiodically computes one or more metrics that may be used to prioritize the selection of the peered border elements. For example the peer prioritizer can compute the congestion of communication paths associated with the peered border elements the processing load of the peered border elements and or the state s of the peered border elements e.g. operational partially failed failing and or failed .

Based on the computed metrics the example peer prioritizer of prioritizes the order in which the peered border elements are to be selected. For example lightly loaded peered border elements are preferred over more heavily loaded peered border elements failing and or failed peered border elements are to be avoided peered border elements having congested communication paths and or links are less preferable to ones have less congested communication paths and or links etc.

To store the computed metrics the example OSS server of includes metric storage . The example metric storage of stores current and or previously computed metrics and or current and or previously collected performance data and or information. Data and or information stored in the metric storage may be used to compute current metrics and or may be used to compute future metrics. The example metric storage may be implemented using any number and or type s of data structures and or may be implemented by any number and or type s of memory ies and or memory devices not shown 

To modify an ENUM database e.g. the example ENUM database of the example OSS server of includes an ENUM database interface . After prioritizing the selection of the peered border elements the example ENUM database interface modifies one or more records of the ENUM database to represent the relative priorities computed by the example peer prioritizer . ENUM database records may be prioritized by modifying priority values of the ENUM database records. Additionally or alternatively ENUM database records may be added and or removed for a particular called party. For example if a particular peered border element has failed and thus not available to process a communication session for the called party its associated ENUM database record may be removed and or marked as inactive. Likewise the ENUM database interface may change the status of a particular peered border element from an inactive state to an active state e.g. available for routing a communication session by updating its associated ENUM database record. The ENUM database interface may modify the ENUM database directly by for example locking a database record to be changed modifying the database record and then unlocking the database record. Additionally or alternatively the ENUM database may be modified by accessing an application programming interface API implemented by and or provided by an ENUM server e.g. the example ENUM server .

While an example manner of implementing the example OSS server of has been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example data collector the example peer prioritizer the example ENUM database interface and or more generally the example OSS server of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still a border element may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

To specify the relative priorities of two or more URIs associated with a called party identifier each of the example database records of includes an order field and a preference field . The example order field of contains a value representative of an order in which the associated URI should be selected. For example when two or more database records are returned in response to one or more ENUM queries a first database record having an order that is less than the order of a second database record would be selected before the second record. The example preference field of contains a value representative of a selection order amongst database records having the same order . For example when two or more database records having same order values are returned in response to one or more ENUM queries a first database record having a preference that is less than the preference of a second database record would be selected before the second record. The order fields and the preference may be used in other ways to prioritize and or to select a peered border element.

To identify a destination each of the example database records of includes the example URI field . The example URI field contains an alphanumeric string representative of a URI SIP HTTP and or otherwise via which a requested communication session to the called party may be established.

While an example data structure that may be used to implement the example ENUM database of is illustrated in the example data structure of may be implemented using any number and or type s of other and or additional fields and or data. Further one or more of the fields and or data illustrated in may be combined divided re arranged eliminated and or implemented in any way. For example the example order field and or the example preference field may be combined and or eliminated. Moreover the example data structure may include fields and or data in addition to or instead of those illustrated in and or may include more than one of any or all of the illustrated fields and or data.

The example machine accessible instructions of may be carried out and or executed by an OSS server e.g. any of the example OSS servers of on a continual periodic and or aperiodic basis. The example machine accessible instructions of begin with an OSS server e.g. the example data collector collected and or otherwise obtain real time and or dynamic network performance data and or information block .

The OSS e.g. the example peer prioritizer of updates one or more peered border element selection metrics and stores the updated metric s in for example the example metric storage block and re prioritizes the selection of peered border elements block . The OSS e.g. the example ENUM database interface updates an ENUM database e.g. by modifying the example order fields and or the example preference fields and or by reordering the example database records of block . Control then returns to block to collect additional network performance data and or information.

The example machine accessible instructions of begin when a S CSCF server e.g. the example S CSCF server of receives a SIP message e.g. a SIP INVITE message from a VoIP device e.g. the example VoIP device . The S CSCF server performs an ENUM query based on a called party identifier contained in the SIP message block . Based on the results of the ENUM query e.g. a list of two or more URIs of peered border elements and associated priority values the S CSCF server selects a preferred peered border element block . The S CSCF server sends a version of the received SIP message to the selected peered border element block . Control then exits from the example machine accessible instructions of .

The processor platform of the example of includes at least one general purpose programmable processor . The processor executes coded instructions and or present in main memory of the processor e.g. within a random access memory RAM and or a read only memory ROM . The processor may be any type of processing unit such as a processor core a processor and or a microcontroller. The processor may execute among other things the example protocol message exchanges and or the example protocol exchanges and or the example machine accessible instructions of to implement the example methods and apparatus described herein.

The processor is in communication with the main memory including a ROM and or the RAM via a bus . The RAM may be implemented by DRAM SDRAM and or any other type of RAM device and ROM may be implemented by flash memory and or any other desired type of memory device. Access to the memory and the memory may be controlled by a memory controller not shown . One or both of the example memories and may be used to implement the example ENUM database of .

The processor platform also includes an interface circuit . The interface circuit may be implemented by any type of interface standard such as an external memory interface serial port general purpose input output etc. One or more input devices and one or more output devices are connected to the interface circuit . The input devices and or output devices may be used to for example implement the example ENUM database interface of .

Of course persons of ordinary skill in the art will recognize that the order size and proportions of the memory illustrated in the example systems may vary. Additionally although this patent discloses example systems including among other components software or firmware executed on hardware it will be noted that such systems are merely illustrative and should not be considered as limiting. For example it is contemplated that any or all of these hardware and software components could be embodied exclusively in hardware exclusively in software exclusively in firmware or in some combination of hardware firmware and or software. Accordingly persons of ordinary skill in the art will readily appreciate that the above described examples are not the only way to implement such systems.

At least some of the above described example methods and or apparatus are implemented by one or more software and or firmware programs running on a computer processor. However dedicated hardware implementations including but not limited to an ASIC programmable logic arrays and other hardware devices can likewise be constructed to implement some or all of the example methods and or apparatus described herein either in whole or in part. Furthermore alternative software implementations including but not limited to distributed processing or component object distributed processing parallel processing or virtual machine processing can also be constructed to implement the example methods and or apparatus described herein.

It should also be noted that the example software and or firmware implementations described herein are optionally stored on a tangible storage medium such as a magnetic medium e.g. a disk or tape a magneto optical or optical medium such as a disk or a solid state medium such as a memory card or other package that houses one or more read only non volatile memories random access memories or other re writable volatile memories or a signal containing computer instructions. A digital file attachment to e mail or other self contained information archive or set of archives is considered a distribution medium equivalent to a tangible storage medium. Accordingly the example software and or firmware described herein can be stored on a tangible storage medium or distribution medium such as those described above or equivalents and successor media.

To the extent the above specification describes example components and functions with reference to particular devices standards and or protocols it is understood that the teachings of the invention are not limited to such devices standards and or protocols. Such systems are periodically superseded by faster or more efficient systems having the same general purpose. Accordingly replacement devices standards and or protocols having the same general functions are equivalents which are intended to be included within the scope of the accompanying claims.

Although certain example methods apparatus and articles of manufacture have been described herein the scope of coverage of this patent is not limited thereto. On the contrary this patent covers all methods apparatus and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

