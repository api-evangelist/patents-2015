---

title: Information processing system, information storage apparatus, and location information storing method
abstract: An information storage apparatus includes a transmission unit that transmits configuration information to an operation terminal connected to the information storage apparatus, the configuration information indicating whether the information storage apparatus is configured to store location information of the operation terminal; a control unit that performs a process requested by a request sent from the operation terminal; and a storage control unit that stores, in a storage unit of the information storage apparatus, the location information of the operation terminal in association with information related to the process requested by the request. When the configuration information indicates that the information storage apparatus is configured to store the location information, the control unit performs the process requested by the request only when the location information is received from the operation terminal together with the request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09408218&OS=09408218&RS=09408218
owner: Ricoh Company, Ltd.
number: 09408218
owner_city: Tokyo
owner_country: JP
publication_date: 20151006
---
The present application is a continuation application of U.S. patent application Ser. No. 14 483 336 and is based upon and claims the benefit of priority of Japanese Patent Application No. 2013 191366 filed on Sep. 17 2013 and Japanese Patent Application No. 2014 174775 filed on Aug. 29 2014 the entire contents of which are incorporated herein by reference.

An aspect of this disclosure relates to an information processing system an information storage apparatus and a location information storing method.

Japanese Laid Open Patent Publication No. 2011 118626 for example discloses a technology that makes it possible to obtain a shared file on an internal network from an external network without compromising security.

Also Japanese Laid Open Patent Publication No. 2010 044454 for example discloses a technology for preventing leakage of information in an electronic document downloaded onto a user terminal.

There exists an information processing system where information stored in an information storage apparatus on a network can be viewed from an operation terminal being operated by a user. In the information processing system an operation terminal on a different network is allowed to access the information stored in the information storage apparatus after the operation terminal is successfully authenticated.

With the related art information processing system however it is not possible to store location information of the operation terminal that has accessed the information stored in the information storage apparatus. That is with the related art information processing system it is not possible to manage locations from which the information stored in the information storage apparatus is accessed.

In still other words the related art information processing system cannot store location information of operation terminals that have accessed the information stored in the information storage apparatus from a network that is different from the network where the information storage apparatus is located.

In an aspect of this disclosure there is provided an information storage apparatus including a transmission unit that transmits configuration information to an operation terminal connected to the information storage apparatus the configuration information indicating whether the information storage apparatus is configured to store location information of the operation terminal a control unit that performs a process requested by a request sent from the operation terminal and a storage control unit that stores in a storage unit of the information storage apparatus the location information of the operation terminal in association with information related to the process requested by the request. When the configuration information indicates that the information storage apparatus is configured to store the location information the control unit performs the process requested by the request only when the location information is received from the operation terminal together with the request.

Embodiments of the present invention are described below with reference to the accompanying drawings. In the embodiments a service providing system is an example of an information processing system.

The service providing system may also include an external access apparatus one or more smartphones and one or more tablet terminals that are connected to a network N such as the Internet. The network N and the network N are connected to each other via a firewall FW .

In the present embodiment it is assumed that the information storage apparatus the smartphones the tablet terminals the MFPs and the projectors are located within an intranet environment. On the other hand it is assumed that the external access apparatus the smartphones and the tablet terminals are located in an Internet environment. Below for descriptive purposes the smartphones the tablet terminals the MFPs the projectors the smartphones and the tablet terminals may be referred to in the singular form.

The network N is for example a private network such as an intranet. The smartphone and the tablet terminal are examples of operation terminals that are carried and operated by users. An operation terminal represents any device or apparatus that a user operates. Examples of operation terminals include in addition to the smartphone and the tablet terminal a cell phone and a notebook PC.

The MFP and the projector are examples of electronic apparatuses that provide services e.g. printing scanning and projection . An electronic apparatus represents any apparatus that can provide a service. Examples of electronic apparatuses include in addition to the MFP and the projector a printer a scanner a copier and an image display apparatus.

The MFP is an example of an image forming apparatus. The MFP includes an imaging function an image forming function and a communication function and can be used as a printer a facsimile machine a scanner and a copier. The projector is an example of an image projecting apparatus. The projector includes a projecting function and a communication function.

The information storage apparatus is an example of an information sharing apparatus. The information storage apparatus performs for example advanced processes that cannot be performed by the MFP and the projector and also functions as a file server. Also the information storage apparatus causes operation terminals such as the smartphone and the tablet terminal to display information. Further the information storage apparatus may be configured to collaborate with operation terminals such as the smartphone and the tablet terminal to provide services that employ electronic apparatuses such as the MFP and the projector . The information storage apparatus may be implemented by multiple computers distributed configuration .

The information storage apparatus regularly communicates with the external access apparatus to monitor requests received by the external access apparatus from operation terminals such as the smartphone and the tablet terminal . When a request has been received by the external access apparatus from an operation terminal on the network N the information storage apparatus obtains the request from the external access apparatus and performs a process corresponding to the obtained request.

Similarly to the smartphone and the tablet terminal the smart phone and the tablet terminal on the network N are also examples of operation terminals that are carried and operated by users. Operation terminals such as the smartphone and the tablet terminal which are on the network N that is different from the network N where the information storage apparatus is located send requests to the external access apparatus . The external access apparatus stores requests received from operation terminals on the network N and provides the stored requests to the information storage apparatus in response to a request from the information storage apparatus .

In the service providing system with the above configuration or process an operation terminal on the network N can access information stored in the information storage apparatus on the network N.

The information storage apparatus may be implemented by a computer system with a hardware configuration as illustrated by . Operation terminals such as the smartphone the tablet terminal the smartphone and the tablet terminal may also have a hardware configuration as illustrated by . is a block diagram illustrating an exemplary hardware configuration of a computer system according to the present embodiment.

As illustrated by the computer system may include an input unit a display unit an external I F a random access memory RAM a read only memory ROM a central processing unit CPU a communication I F and a hard disk drive HDD that are connected to each other via a bus B. The input unit and the display unit may be configured to be connected to the computer system when necessary.

The input unit includes for example a keyboard and a mouse and is used to input instructions or operation signals to the computer system . The display unit displays for example processing results of the computer system . The communication I F is an interface for connecting the computer system to the network N. The computer system can perform data communications with other apparatuses such as operation terminals electronic apparatuses and the external access apparatus via the communication I F .

The HDD is a non volatile storage device for storing various programs and data. For example the HDD stores basic software or an operating system OS for controlling the entire computer system and application software for providing various functions on the OS. The HDD may manage the stored programs and data using a file system and or a database DB .

The external I F is an interface between the computer system and an external storage such as a storage medium . The computer system can read and write data from and to the storage medium via the external I F . The storage medium may be implemented by for example a flexible disk a compact disk CD a digital versatile disk DVD a secure digital SD memory card or a universal serial bus USB memory.

The ROM is a non volatile semiconductor memory storage unit that can retain programs and data even when power is turned off. For example the ROM stores programs and data such as a basic input output system BIOS that is executed when the computer system is turned on and system and network settings of the computer system . The RAM is a volatile semiconductor memory storage unit for temporarily storing programs and data.

The CPU processor loads programs and data from storage units e.g. the ROM and the HDD into the RAM and executes the loaded programs to control the computer system and to implement various functions of the computer system .

With the above hardware configuration the computer system can provide various functions as described below.

The information storage apparatus of the present embodiment may include functional units or processing blocks as illustrated by . is a block diagram illustrating an exemplary functional configuration of the information storage apparatus . The information storage apparatus executes a program s to implement an OS a Web server an application server a Web UI a Web API a shared folder a document manager a Web controller a history manager a database DB and an external access agent .

The OS is an operating system for controlling the entire information storage apparatus . The OS is implemented by for example Windows registered trademark or Linux registered trademark .

The Web server is software for sending and receiving information via the Hypertext Transfer Protocol HTTP . The Web server is implemented by for example Apache registered trademark or IIS registered trademark .

The application server is for example software that runs as a plug in of the Web server . The application server is implemented by for example Tomcat registered trademark .

The Web UI displays for example a system configuration screen in response to an HTTP request. For example the Web UI allows a user to change system configurations on the system configuration screen using a Web browser not shown .

The Web API application programming interface is available via the network N. The Web API receives an HTTP request performs a process corresponding to the received HTTP request and returns an HTTP response. That is the Web API is a predefined interface for receiving requests from operation terminals such as the smartphone and the tablet terminal and may be implemented by functions or classes.

The Web API of the information storage apparatus may be provided as a software development kit SDK to developers of applications installed in operation terminals. Application developers can develop applications using the SDK. The SDK may also be provided to third vendors other than the vendor of the information storage apparatus . The third vendors can develop applications using the SDK. Applications developed using the SDK can be installed in operation terminals.

Thus providing the Web API of the information storage apparatus as an SDK to third vendors makes it possible to provide operation terminals with not only applications developed by the vendor of the information storage apparatus but also applications developed by the third vendors.

The shared folder is a folder that is made public on the network N via the Server Message Block SMB protocol. Users can access the shard folder using operation terminals such as the smartphone and the tablet terminal . The shared folder is an example of a storage unit.

The document manager manages files placed in the shared folder and performs data conversion on the files in response to requests from the Web controller . In the present embodiment a file is an exemplary format of data. The Web controller controls the document manager and the history manager in response to requests from the Web API .

The DB stores an activity monitoring log s . As described later the activity monitoring log includes location information. The history manager manages the activity monitoring log stored in the DB . The history manager also performs a location information recording process. In response to an activity monitoring log request from an operation terminal the history manager outputs the activity monitoring log stored in the DB to a file and provides the file to the operation terminal.

The external access agent communicates regularly with the external access apparatus e.g. by polling the external apparatus and receives from the external access apparatus a request sent from an operation terminal on the network N that is different from the network N where the information storage apparatus is located. Then the external access agent sends the request received from the external access apparatus via the Web server and the application server to the Web API to cause the Web API to perform a process corresponding to the request.

When a request is received from the external access agent the Web API determines that the request is sent from an operation terminal on the network N such as the Internet that is different from the network N where the information storage apparatus is located.

Roughly two processes are running on the information storage apparatus . One process involves the Web server the application server the Web UI the Web API and the external access agent . Another process involves the shared folder the document manager the Web controller the history manager and the DB . The Web API performs interprocess communications with the Web controller .

In the descriptions below the smartphone is used as an example of an operation terminal. The smartphone of the present embodiment may include functional units or processing blocks as illustrated by . is a block diagram illustrating an exemplary functional configuration of the smartphone .

The smartphone executes an application s to implement a configuration information obtaining unit a file and folder obtaining unit a location information transmission determining unit a display control unit and a configuration processing unit .

The configuration information obtaining unit obtains configuration information from the information storage apparatus at a predetermined timing for example when an application is started. The file and folder obtaining unit obtains for example a file and folder list of files and or folders thumbnail images and files from the information storage apparatus .

The location information transmission determining unit determines whether to send location information based on configuration information. The display control unit performs a control process to display the file and folder list the thumbnail images and the files obtained by the file and folder obtaining unit on for example the display unit . The configuration processing unit receives a request to register the information storage apparatus from a user via for example a system configuration screen. When the user or the smartphone is successfully authenticated for access to the information storage apparatus the configuration processing unit registers the information storage apparatus . The configuration processing unit also receives a request to set configuration information from an administrator via for example the system configuration screen and requests the information storage apparatus to set the configuration information.

Exemplary processes performed by the service providing system of the present embodiment are described below. In the exemplary processes described below files stored in the information storage apparatus are displayed by the smartphone and the smartphone . illustrates a process where a file stored in the information storage apparatus is displayed by the smartphone . illustrates a process where a file stored in the information storage apparatus is displayed by the smartphone .

A user operates the smartphone to start an application for accessing the information storage apparatus . The application for accessing the information storage apparatus may be implemented by a dedicated application or by adding a function in the form of for example a plug in to a general purpose application.

When the application is started the configuration information obtaining unit of the smartphone sends at step S a configuration information request to the information storage apparatus . At step S the Web API of the information storage apparatus sends configuration information to the smartphone . The configuration information includes a setting indicating whether an activity monitoring log is to be recorded i.e. whether the information storage apparatus is configured to record an activity monitoring log . Hereafter this setting is referred to as an activity monitoring log setting . When the activity monitoring log setting is enabled the information storage apparatus is configured to record activity monitoring logs. When the activity monitoring log setting is disabled the information storage apparatus is configured to not record activity monitoring logs.

At step S the user operates the smartphone to select a file and folder list display option instruction command etc. . The file and folder obtaining unit of the smartphone sends a file and folder list request to the information storage apparatus .

At step S the document manager of the information storage apparatus sends a file and folder list of files and or folders stored in the shared folder to the smartphone . The display control unit of the smartphone receives and displays the file and folder list.

At step S the user operates the smartphone to select for example a folder from the file and folder list. At step S the file and folder obtaining unit of the smartphone sends a file and folder list request to the information storage apparatus to request a file and folder list of files and or folders in the selected folder. At step S the document manager of the information storage apparatus sends the file and folder list of files and or folders in the selected folder to the smartphone .

Here it is assumed that the file and folder list sent at step S includes files and thumbnail images are necessary to display the files in the file and folder list. At step S the file and folder obtaining unit of the smartphone sends a thumbnail request to the information storage apparatus to request thumbnail images necessary to display the files in the file and folder list.

At step S the document manager of the information storage apparatus sends thumbnail images corresponding to the thumbnail request to the smartphone . The display control unit of the smartphone displays the file and folder list and the thumbnail images received from the information storage apparatus .

At step S the user operates the smartphone to select a file from the file and folder list. At step S the location information transmission determining unit of the smartphone performs a location information transmission determining process.

In the location information transmission determining process the location information transmission determining unit refers to the configuration information received from the information storage apparatus to check the activity monitoring log setting. When the activity monitoring log setting is disabled the location information transmission determining unit determines that transmission of location information is not necessary and the process proceeds to step S.

On the other hand when the activity monitoring log setting is enabled the location information transmission determining unit determines whether the smartphone is on the same network N as the information storage apparatus . When the smartphone is on the same network N as the information storage apparatus the location information transmission determining unit determines that transmission of location information is not necessary and the process proceeds to step S. On the other hand when the smartphone is on the network N that is different from the network N where the information storage apparatus is located the location information transmission determining unit determines that transmission of location information is necessary.

In the case of the service providing system of because the smartphone is on the same network N as the information storage apparatus the location information transmission determining unit determines that transmission of location information is not necessary.

At step S the file and folder obtaining unit sends a selected file request to the information storage apparatus to request the file selected by the user. At step S the Web API of the information storage apparatus performs a location information recording process. Details of the location information recording process are described later.

In the location information recording process an activity monitoring log including location information is recorded when the activity monitoring log setting is enabled and when the selected file request is from an operation terminal on the network N that is different from the network N where the information storage apparatus is located. In the case of the service providing system of because the smartphone is on the same network N as the information storage apparatus no activity monitoring log including location information is recorded.

At step S the document manager of the information storage apparatus sends the file corresponding to the selected file request to the smartphone . The display control unit of the smartphone receives and displays the file.

A user operates the smartphone to start an application for accessing the information storage apparatus . The application for accessing the information storage apparatus may be implemented by a dedicated application or by adding a function in the form of for example a plug in to a general purpose application. When the smartphone is on the network N that is different from the network N where the information storage apparatus is located the application for accessing the information storage apparatus send requests for the information storage apparatus to the external access apparatus .

When the application is started the configuration information obtaining unit of the smartphone sends at step S a configuration information request to the external access apparatus . The external access apparatus stores the configuration information request received from the smartphone until requested by the information storage apparatus . At step S the external access agent of the information storage apparatus obtains the configuration information request sent by the smartphone from the external access apparatus .

At step S the Web API of the information storage apparatus sends configuration information to the external access apparatus . At step S the external access apparatus sends the configuration information to the smartphone . The configuration information includes an activity monitoring log setting indicating whether the information storage apparatus is configured to record an activity monitoring log.

At step S the user operates the smartphone to select a file and folder list display option instruction command etc. . The file and folder obtaining unit of the smartphone sends a file and folder list request to the external access apparatus .

The external access apparatus stores the file and folder list request received from the smartphone until requested by the information storage apparatus . At step S the external access agent of the information storage apparatus obtains the file and folder list request sent by the smartphone from the external access apparatus .

At step S the document manager of the information storage apparatus sends a file and folder list of files and or folders stored in the shared folder to the external access apparatus . At step S the external access apparatus sends the file and folder list to the smartphone . The display control unit of the smartphone receives and displays the file and folder list.

At step S the user operates the smartphone to select for example a folder from the file and folder list. At step S the file and folder obtaining unit of the smartphone sends a file and folder list request to the external access apparatus to request a file and folder list of files and or folders in the selected folder.

The external access apparatus stores the file and folder list request received from the smartphone until requested by the information storage apparatus . At step S the external access agent of the information storage apparatus obtains the file and folder list request sent by the smartphone from the external access apparatus .

At step S the document manager of the information storage apparatus sends the file and folder list of files and or folders in the selected folder to the external access apparatus . At step S the external access apparatus sends the file and folder list of files and or folders in the selected folder to the smartphone .

Here it is assumed that the file and folder list sent at step S includes files and thumbnail images are necessary to display the files in the file and folder list.

At step S the file and folder obtaining unit of the smartphone sends a thumbnail request to the external access apparatus to request thumbnail images necessary to display the files in the file and folder list. At step S the external access agent of the information storage apparatus obtains the thumbnail request sent by the smartphone from the external access apparatus .

At step S the document manager of the information storage apparatus sends thumbnail images corresponding to the thumbnail request to the external access apparatus . At step S the external access apparatus sends the thumbnail images received from the information storage apparatus to the smartphone . The display control unit of the smartphone displays the file and folder list and the thumbnail images received from the external access apparatus .

At step S the user operates the smartphone to select a file from the file and folder list. At step S the location information transmission determining unit of the smartphone performs a location information transmission determining process.

In the location information transmission determining process the location information transmission determining unit refers to the configuration information received from the information storage apparatus via the external access apparatus to check the activity monitoring log setting. When the activity monitoring log setting is disabled the location information transmission determining unit determines that transmission of location information is not necessary and the process proceeds to step S.

On the other hand when the activity monitoring log setting is enabled the location information transmission determining unit determines whether the smartphone is on the same network N as the information storage apparatus . When the smartphone is on the same network N as the information storage apparatus the location information transmission determining unit determines that transmission of location information is not necessary and the process proceeds to step S. On the other hand when the smartphone is on the network N that is different from the network N where the information storage apparatus is located the location information transmission determining unit determines that transmission of location information is necessary.

In the case of the service providing system of because the smartphone is on the network N that is different from the network N where the information storage apparatus is located the location information transmission determining unit determines that transmission of location information is necessary.

At step S the file and folder obtaining unit sends a selected file request to the external access apparatus to request the file selected by the user. In this case the file and folder obtaining unit sends a selected file request including location information of the smartphone . The location information indicates a location such as latitude and longitude of the smartphone that are obtained via a global positioning system GPS .

At step S the external access agent of the information storage apparatus obtains the selected file request which is sent by the smartphone and includes the location information from the external access apparatus .

At step S the Web API of the information storage apparatus performs a location information recording process. Details of the location information recording process are described later.

In the location information recording process an activity monitoring log including location information is recorded when the activity monitoring log setting is enabled and when the selected file request is from an operation terminal on the network N that is different from the network N where the information storage apparatus is located. In the case of the service providing system of because the smartphone is on the network N that is different from the network N where the information storage apparatus is located an activity monitoring log including location information is recorded.

Here when location information of the smartphone on the network N is not found in the selected file request during the location information recording process subsequent steps to be performed in response to the selected file request are canceled.

At step S the document manager of the information storage apparatus sends the file corresponding to the selected file request to the external access apparatus . At step S the external access apparatus sends the file received from the information storage apparatus to the smartphone . The display control unit of the smartphone receives and displays the file.

In the exemplary processes illustrated by the information storage apparatus performs the location information recording process when the selected file request is received. Alternatively the information storage apparatus may be configured to also perform the location information recording process when the file and folder list request s and or the thumbnail request is received. In this case a step of performing the location information recording process is added after one or more of the steps of receiving the file and folder list requests and the thumbnail request in .

The location information transmission determining unit may be configured to display a confirmation screen as illustrated by to ask the user whether to permit transmission of location information when it is determined that transmission of location information is necessary during the location information transmission determining process of step S. is a drawing illustrating an exemplary confirmation screen used to ask the user whether to permit transmission of location information.

When the user permits transmission of location information on the confirmation screen the user is allowed to send a selected file request. On the other hand when the user does not permit transmission of location information on the confirmation screen the user is not allowed to send a selected file request.

At step S the Web API of the information storage apparatus determines whether a received request is from an external network other than the network N. When the request is received from the external access agent the Web API determines that the request is from an external network. When the request is received from an apparatus or device other than the external access agent the Web API determines that the request is not from an external network.

When the request is not from an external network the Web API determines that recording of an activity monitoring log including location information is not necessary. When the request is from an external network the Web API proceeds to step S and determines whether recording of location information is necessary based on an activity monitoring log setting indicating whether the information storage apparatus is configured to record an activity monitoring log. When the activity monitoring log setting is enabled the Web API determines that recording of location information is necessary.

On the other hand when the activity monitoring log setting is disabled the Web API determines that recording of location information is not necessary and does not record an activity monitoring log including location information. When recording of location information is necessary the Web API proceeds to step S and determines whether location information is included in the request from the external network.

When location information is not included in the request the Web API proceeds to step S and cancels transmission of a file requested by the received request. On the other hand when location information is included in the request the Web API proceeds to step S and determines whether an activity monitoring log s including the same location information has already been recorded in the DB by referring to the history manager .

When no activity monitoring log including the same location information has been recorded in the DB the Web API proceeds to step S and requests the history manager to record an activity monitoring log in the DB . On the other hand when an activity monitoring log s including the same location information has already been recorded in the DB the Web API proceeds to step S and determines whether the activity monitoring log including the same location information is related to a request for the same file as that requested by the received request.

When the activity monitoring log including the same location information is not related to a request for the same file the Web API proceeds to step S and requests the history manager to record an activity monitoring log in the DB . On the other hand when the activity monitoring log including the same location information is related to a request for the same file the Web API proceeds to step S and determines whether the time that the request for the same file was made is within a predetermined period of time before the received request was made.

When the time that the request for the same file was made is not within the predetermined period of time the Web API proceeds to step S and requests the history manager to record an activity monitoring log in the DB . On the other hand when the time that the request for the same file was made is within the predetermined period of time the Web API determines that recording of the location information is not necessary and does not request the history manager to record an activity monitoring log including the location information.

Thus at steps S through S the location information the requested file and the date and time of a current received request are compared with those of activity monitoring logs already recorded in the DB to prevent a duplicate access monitoring log from being recorded. For example when a user accesses the same file multiple times from the same location within a predetermined period of time many activity monitoring logs that are different from each other only in requested date and time may be recorded in the DB resulting in increased noise. Steps S through S makes it possible to prevent such a problem.

Next how to determine whether to add an activity monitoring log to the DB is described with reference to .

Activity monitoring logs recorded in the DB through the location information recording process can be obtained via for example the system configuration screen displayed by the Web UI . For example an administrator of the service providing system can request the Web UI of the information storage apparatus to obtain activity monitoring logs via the configuration processing unit of the smartphone .

The configuration processing unit of the smartphone can obtain activity monitoring logs in the form of for example a compressed e.g. zipped csv file. Thus an administrator of the service providing system can later view activity monitoring logs related to requests sent to the information storage apparatus from the network N that is different from the network N where the information storage apparatus is located. By viewing the activity monitoring logs the administrator can determine locations from which information stored in the information storage apparatus is accessed.

Exemplary processes in the service providing system where an operation terminal such as the smartphone displays a file obtained from the information storage apparatus are described above. However the present invention is not limited to the above described examples. For example an electronic apparatus such as the MFP or the projector in the service providing system may be used to obtain information e.g. a file from the information storage apparatus and print or project the obtained information.

Exemplary activity monitoring logs described above are used to record history information related to file operations. However an activity monitoring log may be used to record other types of information. is a table illustrating another exemplary configuration of an activity monitoring log. In an activity monitoring log includes a field or an information item for an operation type or a process type of a performed process in addition to the fields illustrated in .

Examples of process types operation types include printing where a file obtained from the information storage apparatus is printed by the MFP facsimile transmission where a file obtained from the information storage apparatus is faxed by the MFP projection where a file obtained from the information storage apparatus is projected by the projector scanning where a file scanned by the MFP is stored in the information storage apparatus writing where a file is added to the information storage apparatus deletion where a file stored in the information storage apparatus is deleted and reading where a file is obtained from the information storage apparatus .

A user selects a target application from applications displayed on the smartphone and enters a start instruction step S . The smartphone starts the target application step S and sends a configuration information request to the external access apparatus step S .

When an acquisition request is received from the information storage apparatus step S the external access apparatus sends the configuration information request received from the smartphone to the information storage apparatus step S . In response to the configuration information request the information storage apparatus sends configuration information to the external access apparatus step S .

When an acquisition request is received from the smartphone step S the external access apparatus sends the configuration information received from the information storage apparatus to the smartphone step S . When receiving the configuration information from the external access apparatus the smartphone performs a location information transmission determining process step S . The location information transmission determining process is similar to step S of and its descriptions are omitted here.

Next similarly to the corresponding steps of the smartphone sends a file and folder list request via the external access apparatus to the information storage apparatus to request a file and folder list of files and or folders stored in the information storage apparatus steps S through S . Next similarly to the corresponding steps of the information storage apparatus sends a file and folder list of files and or folders stored in the information storage apparatus via the external access apparatus to the smartphone steps S through S .

The smartphone displays a list of files and or folders on the display unit of the smartphone based on the file and folder list received from the information storage apparatus step S . Then the smartphone receives an instruction from the user to select a file in the displayed list of files and or folders step S . When a file is selected similarly to the corresponding steps of the smartphone sends a selected file request via the external access apparatus to the information storage apparatus to obtain the selected file steps S through S .

The information storage apparatus performs a location information recording process as illustrated by step S . The location information recording process of includes in addition to steps of step S that is performed after step S which corresponds to step S of when an already registered activity monitoring log including the same location information and the same file name as a current request is determined to include a date and time that is within a predetermined period of time before the date and time of the current request. At step S whether the already registered activity monitoring log and the current request are for the same type of process i.e. operation type is determined. The location information recording process of makes it possible to record activity monitoring logs related to different processes for the same file that are requested by a user from the same location within a predetermined period of time. At step S the information storage apparatus records for example an activity monitoring log as illustrated in the first row of .

The information storage apparatus identifies a file stored therein based on the selected file request received from the smartphone and sends the identified file via the external access apparatus to the smartphone steps S through S .

The smartphone displays the file received from the information storage apparatus on the display unit of the smartphone step S . When receiving an instruction from the user to output the displayed file step S the smartphone displays a QR code registered trademark capturing screen on the display unit of the smartphone step S . On the other hand the projector displays a QR code including device information e.g. identification information such as an IP address or a device number for identifying the projector and capability information indicating file types that the projector can handle and types of processes that the projector can perform step S . The QR code may be displayed on a display unit of the projector or projected by the projector . Also a sticker on with the QR code is printed may be put on the projector .

While the QR code capturing screen is being displayed the smartphone captures an image of the QR code with an imaging unit of the smartphone step S and analyzes the captured image step S . More specifically the smartphone detects the QR code in the captured image and obtains the device information from the detected QR code.

Next the smartphone sends a projection file request for requesting a projection file to be projected via the external access apparatus to the information storage apparatus steps S through S . Based on the projection file request the information storage apparatus converts the file which corresponds to the file displayed at step S into a projection file with a file format that the projector can project step S . Here it is assumed that the smartphone includes the device information in the projection file request so that the information storage apparatus can identify the file format that the projector can project.

The information storage apparatus performs a location information recording process as illustrated by and records for example an activity monitoring log as illustrated in the second row of step S . In the activity monitoring log in the second row of projection is recorded as the operation type. The information storage apparatus determines that the operation type is projection based on the projection file request received from the smartphone .

Alternatively the process requested by the projection file request may be considered as a file conversion process. In this case the file conversion process may be recorded as a combination of writing or file conversion and reading as illustrated by .

The information storage apparatus sends the projection file via the external access apparatus to the smartphone steps S through S . When receiving the projection file the smartphone sends the received projection file and a projection request to the projector step S . When receiving the projection file and the projection request the projector projects the projection file according to the projection request step S . Although the exemplary process of is described above using the projector the process may be applied to other electronic apparatuses. For example the projection request may be replaced with a print request a facsimile transmission request an email transmission request or a scanning request to the MFP or a display request a writing request an email transmission request or a transfer request requesting transfer of information to another apparatus to a cloud board.

Also the service providing system may be configured such that the information storage apparatus receives a report indicating completion of a process. For example after the process of displaying a file steps S through S is completed i.e. after the file is displayed at step S the smartphone may send a file reception report via the external access apparatus to the information storage apparatus . Then when receiving the file reception report the information storage apparatus may record an execution result of the process. This configuration makes it possible to record failed as an execution result of the process when an error occurs during transmission of the file from the information storage apparatus via the external access apparatus to the smartphone .

Next another exemplary output process is described with reference to . In the exemplary output process of a file is output e.g. printing facsimile transmission or email transmission from the MFP . In the output process steps S through S are first performed. Steps S through S are substantially the same as the corresponding steps of and therefore their descriptions are omitted here. The smartphone captures a QR code displayed on or attached to the MFP at step S and obtains device information of the MFP at step S.

The smartphone sends a process request including identification information for identifying a selected file the device information of the MFP to be used to output the selected file and process conditions via the external access apparatus to the information processing apparatus steps S through S .

The identification information for identifying the selected file is represented by for example a file name or a file path. The process conditions indicate parameters of a process to be performed. Examples of process conditions include color monochrome N up processing and stapling for a printing process a destination for a facsimile transmission process and a file format and a destination address for an email transmission process.

When receiving the process request the information storage apparatus identifies the selected file to be processed and converts the identified file into a file format that the MFP can output step S . When conversion of the identified file is not necessary e.g. when the file is already in a file format that the MFP can output or the MFP can convert the file into an appropriate file format the information storage apparatus does not convert the identified file.

Next the information storage apparatus performs a location information recording process as illustrated by and records for example an activity monitoring log as illustrated in the fourth row of step S . The information storage apparatus sends to the MFP a process execution request including the file in a file format that the MFP can output and the process conditions step S . The MFP receives the process execution request and performs a process according to the process execution request step S .

Although the exemplary output process of described above using the MFP the output process may be applied to other electronic apparatuses. For example the process execution request may be replaced with a projection request to the projector or a display request a writing request an email transmission request or a transfer request requesting transfer of information to another apparatus to a cloud board.

According to the service providing system of the present embodiment the information storage apparatus can determine whether a received request is from an operation terminal on a network that is different from a network where the information storage apparatus is located. When the received request is from an operation terminal on a different network different from the network where the information storage apparatus is located the information storage apparatus can record an activity monitoring log including location information of the operation terminal.

An information processing system an information storage apparatus and a location information storing method according to embodiments of the present invention are described above. However the present invention is not limited to the specifically disclosed embodiments and variations and modifications may be made without departing from the scope of the present invention.

For example instead of the activity monitoring log setting the configuration information may include information indicating whether location information is to be stored i.e. information indicating whether the information storage apparatus is configured to store location information or information indicating whether an operation terminal needs to send location information.

The information storage apparatus may be configured to limit processes that can be performed for an operation terminal based on obtained location information of the operation terminal. For example the information storage apparatus may be configured to not perform a process requested by a process request sent from an operation terminal when a location of the operation terminal indicated by location information sent from the operation terminal is in a predetermined area or not in the predetermined area . More specifically the information storage apparatus may be configured to reject a process request for the MFP sent from an operation terminal and record an error when the location of the operation terminal indicated by location information is not within a predetermined range distance from the MFP . This configuration makes it possible to prevent execution of an unauthorized request.

The location information transmission determining unit is an example of a first determining unit. The file and folder obtaining unit is an example of a first transmission unit that transmits a request and location information to an information storage apparatus. The Web API is an example of a second transmission unit that transmits configuration information to an operation terminal. The combination of the Web API and the history manager is an example of a storage control unit. The configuration information obtaining unit is an example of a configuration information obtaining unit. The combination of the Web UI and the history manager is an example of a log information providing unit. The Web API is an example of a second determining unit. The Web controller or the Web API is an example of a control unit.

An aspect of this disclosure provides an information processing system an information storage apparatus and a location information storing method that can store location information of an operation terminal that has accessed information stored in the information storage apparatus from a network different from a network where the information storage apparatus is located.

