---

title: Image forming apparatus, image processing system, and method
abstract: An image forming apparatus includes an acquiring unit, a determining unit, and a notifying unit. The acquiring unit acquires print data from an external apparatus via a network. The print data is generated by the external apparatus from document data received from a client apparatus. The determining unit determines whether or not the acquired print data is a dummy job or an actual job. The notifying unit notifies failure information when print data of the actual job is not acquired within a period after print data which is determined to be the dummy job is acquired. The failure information indicates a failure occurring in the process in which the external apparatus receives the document data from the client apparatus, or in the process in which the print data is generated from the document data in the external apparatus. The period satisfies a predetermined condition.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09569147&OS=09569147&RS=09569147
owner: FUJI XEROX CO., LTD.
number: 09569147
owner_city: Tokyo
owner_country: JP
publication_date: 20150901
---
This application is based on and claims priority under 35 USC 119 from Japanese Patent Application No. 2015 058376 filed Mar. 20 2015.

A system such as Google Cloud Print in which a print server function is provided from a server which may be a cloud computing system on a network such as the Internet has become widespread. An exemplary known system of this type is a system in which when a user uploads document data to a server on a network the server converts the document data into a print data format and provides the print data for a printer which is specified as an output destination and on which the print data is printed. In the case where the printer which is an output destination is located far from a client apparatus used by the user when the user gives a print instruction to the server the user gives a print instruction then goes to the printer specified as an output destination and obtains printed material which is output by the printer.

According to an aspect of the invention there is provided an image forming apparatus including an acquiring unit a determining unit and a notifying unit. The acquiring unit acquires print data from an external apparatus via a network. The print data is generated by the external apparatus from document data received from a client apparatus. The determining unit determines whether or not the acquired print data is a dummy job or an actual job. The notifying unit notifies failure information when print data of the actual job is not acquired within a period after print data which is determined to be the dummy job is acquired. The failure information indicates a failure occurring in the process in which the external apparatus receives the document data from the client apparatus or in the process in which the print data is generated from the document data in the external apparatus. The period satisfies a predetermined condition.

Referring to an exemplary system to which control according to an exemplary embodiment is applied will be described. The system includes a client apparatus a print service and an image forming apparatus which are connected to the Internet . The client apparatus and the image forming apparatus are capable of communicating with the print service via the Internet .

The client apparatus is a computer such as a personal computer PC operated by a user and is a client apparatus receiving a service from the print service .

The print service is a server providing a data processing service for printing for the client apparatus . The print service has a function of upon reception of a print instruction from the client apparatus obtaining document data for example document data generated by using a word processor application to be printed converting the document data into print data in a predetermined data format for example Portable Document Format PDF and supplying the resulting print data to the image forming apparatus which is specified as an output destination. In addition the print service has a function of managing a print job hereinafter simply referred to as a job corresponding to a print instruction received from a user via the client apparatus . When the print service is Google Cloud Print hereinafter referred to as GCP the print service has a function of obtaining information about the status of a job which is input by a user from the image forming apparatus which is an output destination and supplying a web page in which the job status is described on a web browser for example a web browser on the client apparatus operated by the user. The print service may be a single server or may be configured as a cloud computing system for example GCP .

The image forming apparatus is an apparatus for printing received print data on a sheet of paper. The image forming apparatus may be provided with functions other than a print function. For example the image forming apparatus may be a so called digital multi function device which is provided with a scan function a copy function a fax transmission function and an email transmission function in addition to a print function. The image forming apparatus has a function of performing copying scanning printing and the like in accordance with an instruction which is input by a user and which is received through a user interface UI of the image forming apparatus and also has a function of obtaining print data from the print service on the Internet and printing the print data. The image forming apparatus may be connected to a network in an organization of a company or the like. In this case the image forming apparatus has a function of performing a process such as printing in accordance with an instruction transmitted from a computer connected to a network in the organization.

The image forming apparatus is registered in advance in the print service . The print service uses information for example an address for communication about the registered image forming apparatus to supply information necessary for printing to the image forming apparatus . The image forming apparatus also has information about the address or the like of the print service and communicates with the print service by using the information.

For example when the print service is GCP the image forming apparatus is registered in association with one administrator in the print service . The administrator may register sharers sharing the corresponding image forming apparatus in the print service . The print service presents to a user client apparatus one or more image forming apparatuses in which the user is registered as an administrator or a sharer as output destination candidates and makes the user select an output destination from the candidates.

The above described functions of the components of the system illustrated in are those in the related art. The flow of a print process in the system in will be described with reference to .

First a user uses a web browser on the client apparatus to access the print service for example GCP and give a print instruction. At that time the user specifies document data to be printed print parameters such as the number of copies and single sided double sided printing an image forming apparatus which is an output destination and the like. After completion of the specifying of necessary information when the user gives a print instruction the client apparatus transmits the specified document data to the print service in step S . If the transmission of the document data fails due to some cause such as communication failure the client apparatus which is capable of detecting the failure displays a screen describing a message about the failure and ends the print process in step S . If the transmission of the document data is successfully completed the print service performs a process for preparing printing of the document data for example a process of converting the document data into print data of data format supported by the image forming apparatus which is an output destination in step S . If the conversion fails the print service transmits information about the failure to the client apparatus and the client apparatus displays the failure information on a screen and ends the print process in step S .

If the process in step S print preparation is successfully performed the print service notifies completion of print preparation for the document data to the image forming apparatus which is the specified output destination in step S . In the case of GCP an instant messaging protocol which is called Extensible Messaging and Presence Protocol XMPP via the Google Talk service is used to transmit the notification.

The image forming apparatus which has received the notification accesses the print service to obtain management information of the document print data whose output destination is the image forming apparatus in step S . The obtained management information includes identification information job ID of the print data and a uniform resource locator URL of the print data.

The image forming apparatus which has obtained the management information of the document uses the management information to request the document print data from the print service in step S . For example the request is issued as a GET request of Hypertext Transfer Protocol HTTP by using the URL included in the management information. After that while receiving print data transmitted in response to the request the image forming apparatus prints the print data on a sheet of paper in step S . When reception and printing of all of the print data are completed the print job is ended.

In this process in the case where the print service is for example GCP when either of the stage of transmission of document data from the client apparatus to the print service step S and the stage of conversion of the document data in the print service S fails the failure is notified to the client apparatus and a message about the failure is displayed. In contrast the failure is not notified to the image forming apparatus which is an output destination. Therefore in the case where a user leaves the client apparatus and goes to the image forming apparatus to get the print result just after the user gives a print instruction by using the client apparatus when a failure occurs in step S or S the user is not informed of the failure from the UI of the image forming apparatus .

In the example in the client apparatus which has received an instruction to print document data from a user first transmits a print instruction for a dummy job to the print service in step S and subsequently transmits an instruction to print the document data to the print service in step S .

The dummy job is a print instruction which does not include document data to be printed or which includes document data whose data amount of an actual document is equal to zero or which includes a very small amount of document data having a fixed form. In addition the dummy job includes predetermined data indicating that the job is a dummy job. The data indicating that the job is a dummy job is incorporated in document data or in attached information such as header information which is transmitted to the print service and which is accompanied with the document data in such a predetermined manner as to be recognized by the image forming apparatus . As the document data of a dummy job for example a test page provided by the print service or the vendor of the image forming apparatus may be used. In contrast to a dummy job the document data which is to be printed and which is transmitted in step S is called an actual job or a process for printing the document data is called an actual job .

The dummy job is transmitted to the print service before the actual job and is data much smaller than the actual job. Therefore the time required for conversion in the print service is short. Accordingly print preparation for the dummy job in the print service is completed much earlier than completion of print preparation for the actual job. As soon as the preparation is completed the print service notifies the image forming apparatus of completion of the print preparation in step S and the image forming apparatus obtains document management information for the dummy job from the print service in response to the notification in step S . If the document management information includes data indicating that the job is a dummy job the image forming apparatus recognizes that the notified job is a dummy job and that the actual job corresponding to the dummy job is coming this is the case in which the attached information includes data indicating that the job is a dummy job . In the case where the data indicating that the job is a dummy job is included in the document data the image forming apparatus uses the obtained document management information to obtain print data corresponding to the document data from the print service and determines whether or not information in the print data indicates that the job is a dummy job.

Thus the process of notifying completion of print preparation to the image forming apparatus S and a subsequent process of transmitting document management information or print data S which is performed for the dummy job is performed earlier than that performed for the actual job. Therefore the dummy job acts as an advance notice that an actual job is coming for the image forming apparatus .

The image forming apparatus which has detected a dummy job which has been received in step S waits for a notification that print preparation for the actual job is completed for a predetermined determination period starting from the time point of the detection in step S .

The determination period used in this step is a period having a length according to a time required to upload the document data of the actual job from the client apparatus to the print service and to convert the document data into print data in the print service . The length of the determination period may be a typical fixed value determined for example by using past experiences or may be a variable value determined in accordance with the data size of the document data of the actual job the time required for the uploading and the conversion is substantially proportional to the size of the document data . One way of using a variable value according to the size of the document data as the determination period is that for example the client apparatus describes information about the size of the document data of the actual job in attached information such as the header of a print instruction for the dummy job which is transmitted to the print service . Thus the size information of the document data is embedded in the document management information for the dummy job and is transmitted from the print service to the image forming apparatus in step S.

If the image forming apparatus receives a notification of completion of print preparation for the actual job within the determination period starting from the time point of detection of the dummy job if the determination result is YES in step S the image forming apparatus performs printing for the actual job by performing the processes in steps S and S.

At a time point at which the determination time has elapsed from the time point of detection of the dummy job if a notification of completion of print preparation for the actual job has not been received if the determination result is NO in step S this state indicates that the notification has not been received although the time when print preparation for the actual job should be completed has come. In this case any failure may occur in the stage of the uploading of the document data from the client apparatus to the print service or in the stage of the print preparation such as conversion of the document data in the print service . If a failure occurs in either of the stages the print service does not notify the image forming apparatus of the failure especially when the print service is GCP . Therefore the image forming apparatus does not know that a failure actually has occurred in either of the stages. However the image forming apparatus may determine that a failure possibly occurs because a notification for the actual job has not come after a notification of the dummy job. Thus if the determination result in step S is determined to be NO the image forming apparatus displays an error screen on an attached display apparatus such as a touch panel display in step S . illustrates an exemplary display of the error screen. In an error screen in a message describing that some problem regarding the print instruction transmitted by the user may be happening in the print service is displayed. In the error screen buttons and which are used to address the problem and which are used by the user to give an instruction to stop the printing or to wait for completion of the printing without stopping the printing are also displayed.

Thus in the exemplary embodiment by submitting a dummy job before an actual job the image forming apparatus may be informed of the actual job which is coming. In the case where the image forming apparatus has waited for a period which is probably required to perform a process for the actual job in the print service from the notification time point and where a notification for the actual job S has not come the image forming apparatus may determine that some problem regarding the actual job possibly arises in a stage before the actual job reaches the print service or in a stage before print preparation for the actual job in the print service . Then the image forming apparatus may notify the user for example by displaying a message about the failure on an attached screen. The user receives the notification and addresses the problem. For example as a possible coping method performed by the user the user may return back to the client apparatus to access the print service and may check the status of the transmitted job. When the check result is that the job has failed in the transmission stage or the print preparation stage in the print service the user may cancel the job and may give another print instruction for the same document data. In the case of the related art without using a dummy job even if a failure occurs in the transmission stage or in the print preparation stage the image forming apparatus never recognizes that the failure has actually occurred or the failure has possibly occurred. Therefore the image forming apparatus fails to transmit a notification such as the error screen in indicating that such a failure possibly occurs. Therefore in the related art the user who has moved to the image forming apparatus has a difficulty in determination has no information used to make determination as to whether the user is to continue to wait or is to access the print service to check the condition when the print output for the document data which has been input does not come out for a long time.

Referring to an exemplary functional configuration of the client apparatus and the image forming apparatus in the system according to the exemplary embodiment will be described.

The client apparatus includes a print instructing unit which performs a process for giving a print instruction to the print service . The print instructing unit is installed in the client apparatus for example as utility software. The print instructing unit logs in to a user account in the print service . The print instructing unit receives specification of document data to be printed and print parameters and also receives an instruction to start printing. At that time the print instructing unit may receive a web page on which various specifications are input from the print service and may transmit information which is input by a user on the web page to the print service . The document data to be printed is not limited to one stored in the client apparatus . For example a document for which access permission is owned by the user and which is stored in a document management system that is present on a network and that may be accessed from the client apparatus may be specified as a print target. In this case the client apparatus may download the specified document from the document management system and transfer the document to the print service . Alternatively the client apparatus may transmit the URL of the document as information about the document to be printed to the print service and the print service may use the URL to download the document data from a document management system.

The print instructing unit according to the exemplary embodiment includes a dummy job adding unit . When a user instructs the print instructing unit to start printing the dummy job adding unit transmits a print instruction for a dummy job to the print service before transmitting a print instruction for document data specified as a print target to the print service . Therefore 1 a print instruction for a dummy job is first transmitted from the client apparatus to the print service and 2 a print instruction for the document data to be printed actual job is then transmitted.

In the exemplary embodiment the print service does not need to perform a special process for a dummy job and may perform the process in a way similar to that for a normal job. As described above since the dummy job comes first and the time required for print preparation is short 1 a notification of completion of print preparation for the dummy job is transmitted from the print service to the image forming apparatus and after that 2 a notification of completion of print preparation for the actual job is transmitted.

The image forming apparatus includes a job acquiring unit a job executing unit a dummy job determining unit and an error notification processor .

The job acquiring unit performs a process for obtaining job information from the print service . When the job acquiring unit receives notifications of completion of print preparation for jobs a dummy job and an actual job from the print service in steps S and S the job acquiring unit obtains document management information for these jobs from the print service in steps S and S . When it is possible to receive a next job for example because the process for a job in the queue is completed the job acquiring unit obtains print data of the job from the print service in steps S and S . The job executing unit controls the print engine in accordance with the print data acquired by the job acquiring unit so that an image indicated by the print data is printed on a sheet of paper.

The dummy job determining unit analyzes the document management information or the print data acquired by the job acquiring unit and determines whether the job indicated by the information is a dummy job or an actual job. For example if the document management information or the print data contains information indicating that the job is a dummy job the dummy job determining unit determines that the job is a dummy job. Otherwise the dummy job determining unit determines that the job is an actual job. When the dummy job determining unit determines that the obtained job is a dummy job the dummy job determining unit transmits a message that a dummy job has been received to the error notification processor .

Upon reception of a notification that a dummy job has been received from the dummy job determining unit the error notification processor starts a timer which is set to the length of the determination period with which an error is determined. When the document management information for the dummy job which is acquired by the job acquiring unit contains information about the data size of the document of the actual job the error notification processor may determine the length of the determination period in accordance with the data size. When a notification of completion of print preparation for the actual job has not been received at the time point at which the timer shows that the determination period has elapsed the error notification processor displays an error screen indicating that some problem error possibly arises in the print service on the display apparatus.

A status notifying unit is a functional module for notifying the print service of a transition in the job status in the image forming apparatus . The print service provides information about the job status notified from the status notifying unit for example for a user by displaying the information on a web page.

Referring to another exemplary system configuration according to the exemplary embodiment will be described. Among the components illustrated in components similar to those in are designated with the same reference numerals as those in .

In the system in the print instructing unit in the client apparatus adds a dummy job. In contrast in the system in a dummy job adding unit in the print service adds a dummy job.

In the system the print instructing unit of the client apparatus does not need to add a dummy job and simply has a function of giving a normal print instruction that is only an actual job to the print service .

When the dummy job adding unit of the print service receives a print instruction from the client apparatus the dummy job adding unit generates a notification of completion of print preparation and the like for a dummy job and transmits it to the image forming apparatus . After that when the process of generating print data of the document for which the print instruction has been given is completed the dummy job adding unit transmits a notification of completion of print preparation for the actual job to the image forming apparatus . The other functions of the print service and the image forming apparatus may be the same as those in the example in FIG. .

In the exemplary embodiment it is assumed that the job which is subsequently received by the image forming apparatus after the image forming apparatus receives a notification of completion of print preparation for a dummy job is a notification of completion of the print preparation for the actual job corresponding to the dummy job. Thus the dummy job and the actual job are not explicitly associated with each other.

In contrast in a first modified exemplary embodiment the dummy job and the actual job are explicitly associated with each other. The association may be made for example by embedding identification information for example a document file name of the corresponding actual job in the document data of the dummy job or in attached information such as the header of the dummy job. For example the document file name of the dummy job is generated by using a rule that a specific string indicating that the job is a dummy job is added to the document file name of the corresponding actual job. In contrast to the above described method the association between the dummy job and the actual job may be made by embedding identification information of the corresponding dummy job in the document data of the actual job or in attached information such as the header of the actual job.

The association between the dummy job and the actual job may be made by the dummy job adding unit in or the dummy job adding unit in .

In the first modified exemplary embodiment when the image forming apparatus detects a dummy job in step S in the image forming apparatus activates a timer corresponding to the dummy job. That is for each dummy job the image forming apparatus determines whether or not a notification of the actual job corresponding to the dummy job has been received until the determination time has elapsed from the time point of the detection of the dummy job in step S in . The determination time may be a constant period regardless of jobs or may be a period obtained through calculation based on the document data size or the like of the actual job corresponding to the dummy job.

Thus the dummy job and the actual job are explicitly associated with each other whereby determination as to whether or not a notification of the actual job has been transmitted within the determination time starting from the detection of the dummy job S is correctly made for each job.

In the case where the dummy job and the actual job are not associated with each other when the image forming apparatus receives multiple jobs at short intervals the dummy job and the actual job may be received in the opposite order.

For example when a user instructs the client apparatus to print a document A and a document B sequentially in this order the image forming apparatus receives the dummy job for the document A and that for the document B in this order. If print preparation for the document A takes time for example because the document A is much larger than the document B the image forming apparatus may receive the actual job for the document B and may subsequently receive the actual job for the document A. In the case where the dummy job and the actual job are not associated with each other such reception in the opposite order causes the actual jobs to be executed in the order which is reverse to the order in which the dummy jobs are executed. That is the order in which jobs are performed printed is different from the order in which the user gives print instructions.

In the second modified exemplary embodiment the association between the dummy job and the actual job which is similar to that in the first modified exemplary embodiment is used whereby printing is performed in the order in which print instructions are given.

In the second modified exemplary embodiment when the image forming apparatus detects the dummy job in step S in the processes of subsequent jobs that is dummy jobs and actual jobs according to print instructions transmitted to the print service after the dummy job are suspended until execution printing of the actual job corresponding to the dummy job is completed. The suspending of subsequent jobs means that at least reception and printing in step S in of print data of the actual jobs for the subsequent jobs are not performed and are suspended. Processes may be suspended in a stage earlier than step S for example in the stage in step S or S. When printing of the previous actual job which causes the suspending state is completed the subsequent jobs which have been suspended are released from the suspending state. Thus the suspending of subsequent jobs eliminates a state in which the actual job for a job whose dummy job is received by the image forming apparatus later is executed prior to the actual job for the previous job.

Another exemplary process according to the second modified exemplary embodiment will be described with reference to .

For example according to the procedure in the image forming apparatus sequentially executes jobs which are put in the dummy job management queue according to the procedure in . In the procedure in the image forming apparatus waits for completion of the process for a job for which printing is being performed in step S . When the process is completed the image forming apparatus refers to information about the dummy job at the top of the dummy job management queue that is the dummy job which was put in the queue earlier than the other jobs in the queue in step S and determines whether or not a notification of completion of print preparation and the document management information for the actual job corresponding to the dummy job at the top has been received in step S . If the determination result in step S is NO the notification has not been received the image forming apparatus waits for a predetermined time repeatedly performs steps S and S and checks again if print preparation of the actual job for the job at the top of the queue has been completed. If the determination result in step S is YES the notification has been received the image forming apparatus obtains print data of the actual job from the print service and processes the print data to perform printing in step S . Then the image forming apparatus waits for completion of the process for the print data in step S . If the process is completed the image forming apparatus checks if the next job in the dummy job management queue is available for being performed in steps S and S .

When print data is downloaded from GCP print service to the image forming apparatus and is printed a known problem in that when the download fails due to some reason such as communication interruption it is not possible to transmit a request to perform download again from the image forming apparatus to the print service may arise. This results from the mechanism of state transition in a job in GCP. This will be described first.

In GCP the job status is managed from the standpoint of the image forming apparatus . That is a job is not present until the image forming apparatus recognizes the job. When the image forming apparatus recognizes the job GCP generates status information for the job and in each progress stage of the process performed after that makes a transition in the job status in accordance with a request for a state transition which is received from the status notifying unit of the image forming apparatus . The job statuses in GCP include three states waiting in progress and completed printed which are normal progress stages and also include an error state used when an error occurs. The specification of GCP defines which state transition is to be requested by the image forming apparatus from GCP in which stage. That is in the stage in which a notification of completion of print preparation such as conversion of document data S is received the image forming apparatus recognizes presence of the job. For example when the image forming apparatus requests management information for the job from the print service in step S in response to the notification the image forming apparatus requests the print service to set the job status to waiting . After that when the process of the job is ready to be performed because the process of another job which is obtained before the job is completed the image forming apparatus transmits a request for downloading print data of the job in step S. At that time the image forming apparatus requests the print service to make a transition to in progress in the job status. When downloading and printing S of the print data are successfully completed the image forming apparatus requests the print service to make a transition to completed in the job status. When a failure occurs due to a paper jam or the like in the middle of the downloading and printing S of the print data the image forming apparatus requests the print service to make a transition to error in the job status. The state transition from waiting to in progress and the state transition from in progress to completed are one way transitions and a state transition in the opposite direction is not made.

GCP receives a request for downloading print data of a job in the waiting state but does not receive a request for downloading print data of a job in the in progress state. Therefore for a job in which according to the specification a transition has been made to the in progress state upon start of download when downloading and printing of the print data fails even if a request for downloading the print data again is transmitted to GCP to perform printing again the request will not be accepted. Therefore to perform printing again in the related art in this case a user has to go back to the client apparatus and instruct the print service to print the document data again.

If a state transition to in progress is not requested at the time point at which downloading of print data is started in step S and the job status remains in waiting downloading of print data may be requested from the print service again upon occurrence of a print failure. However in this case a problem in that it is not possible to express the job status correctly arises. That is in the stage in which printing is being performed after downloading is started the image forming apparatus is now processing that is printing the print job. A correct expression for this state is in progress . Expression waiting for this state is misleading. In addition after start of downloading until printing is completed there is no definite point at which a state transition is to be made. At the time point of completion of printing if a transition from waiting to completed is made at once the in progress stage is not present and the in progress state is meaningless. Thus a mechanism having some room for downloading print data again in preparation for a download failure or the like is not easily compatible with a mechanism in which a correct job status is displayed.

Accordingly in the third modified exemplary embodiment a dummy job is used to display a correct status for the job corresponding to print data while some room for downloading print data again in preparation for a download failure or the like is provided. That is in the exemplary embodiment two jobs a dummy job and an actual job are created for a single print instruction. The status of a job a collective term for an actual job and a dummy job corresponding to the actual job according to the print instruction is expressed by using the status of the dummy job. Thus a correct job status is expressed by using the status of the dummy job. Accordingly even if the status of the actual job remains waiting in which another downloading process is allowed a problem does not substantially arise.

The example of the procedure in the third modified exemplary embodiment will be described with reference to . illustrates the process flow subsequent to step S in . In the process flow steps SA and SA are obtained by changing steps S and S in .

As a precondition of the process in the print service and the image forming apparatus manage a job status for each of a dummy job and an actual job separately. In step S in when the image forming apparatus detects a dummy job status information indicating the job status of the dummy job is created in each of the image forming apparatus and the print service and waiting is set to the status information. When the image forming apparatus detects an actual job in step S in status information indicating the status of the actual job is created in each of the image forming apparatus and the print service and waiting is set to the status information.

When an actual job is detected in step S the image forming apparatus requests print data of the actual job from the print service in step SA and starts downloading the print data. In addition the image forming apparatus makes a transition from waiting to in progress in the status of the dummy job corresponding to the actual job that is requests the print service to make such a transition . In contrast the status of the actual job is not changed at that time point that is remains in waiting .

In step SA when the print data is being printed out while being received downloaded whether or not a failure occurs in the reception is determined in step S . If a failure occurs in the reception the printing for the job which is being executed is temporarily stopped and the job is suspended in step S . At that time if another job is present the another job may be executed instead of the suspended job. After that the image forming apparatus especially the job acquiring unit periodically checks if the image forming apparatus is capable of communicating with the print service in step S . In the case of GCP the checking process may be performed for example by using the fetch interface. The fetch interface is an application programming interface API used when an inquiry about whether or not jobs for the image forming apparatus are present is transmitted to GCP print service . Similarly to ping used to check whether or not communication is available in an Internet Protocol IP network the fetch interface is used to determine whether or not communication with GCP is available by submitting a fetch. The check process in step S is periodically repeated until communication is available. If it is confirmed that communication with the print service is available if the determination result is YES in step S the image forming apparatus returns back to step SA and requests print data of the suspended job actual job from the print service . At that time the status of the actual job is waiting . Therefore the print service receives the request and supplies the print data to the image forming apparatus . The image forming apparatus receives the supplied print data and performs printing in step SA .

If reception and printing of all of the print data are completed if the determination result is NO in step S the image forming apparatus requests the print service to make a transition to completed in both of the dummy job status and the actual job status and ends the process.

In the procedure in when reception of print data of a job fails the image forming apparatus automatically obtains the print data again. Instead of this print data may be obtained again after a confirmation is obtained from a user. In this case when reception of print data fails in step S the image forming apparatus displays an inquiry screen as illustrated for example in on an attached display apparatus. In the inquiry screen a message that downloading of the print data fails and buttons for giving an instruction to obtain or not to obtain the print data again are displayed. In the inquiry screen when a user presses the button for obtaining the print data again the image forming apparatus proceeds the process to step S in and obtains the print data again when communication with the print service is available.

When reception of print data of the job fails the image forming apparatus automatically performs steps S S and SA in and obtains the print data again. When the process of obtaining the print data again repeatedly fails a predetermined number of times or more the screen as illustrated in may be displayed and whether or not print data is to be further obtained again may be checked with the user.

In the example in in the job status screen both of the status of an actual job and that of a dummy job are displayed. In this case the print service does not distinguish between the dummy job and the actual job which are received from the client apparatus and may handle them as simple jobs and manage the statuses.

In contrast no information about a dummy job may be displayed in the job status screen . Simply no lines each of which indicates the status of a corresponding dummy job may be displayed in the job status screen . In addition to this the status value of the corresponding actual job may be changed to the status value of the dummy job and the changed value may be displayed. In either case the print service recognizes whether the job is a dummy job or an actual job and controls whether or not the job status is to be displayed and whether or not the status value is to be changed to the status of the corresponding dummy job in accordance with the recognition result.

In the case of a system aiming high security the image forming apparatus may have a configuration which is not described above and in which an access token obtained from a user in advance for example a token in conformity with OAuth is presented to the print service in order to certify that the user has a valid acquisition permission when a print job for the user is obtained from the print service . In this case when the image forming apparatus obtains the print data from the print service again two methods may be employed 1 a method in which an access token which has been used so far that is until a reception failure is detected in step S continues to be used to obtain the print data again and 2 a method in which a new access token is obtained from the user and in which the new access token is presented to the print service to obtain the print data again. The second method takes time because a new access token needs to be obtained. However in the case where a failure in reception of print data is due to an access token unless a new access token is obtained from the user the print data will not be successfully obtained again.

Therefore in one example the image forming apparatus tries to obtain print data again from the print service by using the method 1 using the same access token as before which takes a relatively short process time. Even after the image forming apparatus repeatedly performs the try a predetermined number of times when the print data is not successfully obtained that is all of the print data is not received the image forming apparatus obtains the print data again from the print service by using the method 2 in which a new access token is obtained from the user .

In another method when print data fails to be received in step S the image forming apparatus selects which method the method 1 or the method 2 is to be employed in accordance with the failure event. If the failure event is for example such that timeout occurs without a response to a request for acquisition of print data from the print service or such that the destination URL of the print service of the acquisition request for example an HTTP GET method fails to be resolved in a domain name server DNS such an event is independent of an access token. Therefore the image forming apparatus selects the method 1 to obtain print data again. In contrast if the failure event is such that authentication performed by presenting an access token from the image forming apparatus to the print service fails or such that an error regarding authentication such as a secure sockets layer SSL certificate error occurs the access token may cause the failure. Therefore the image forming apparatus selects the method 2 to obtain print data again.

The image forming apparatus may have a function of printing information regarding the actual job corresponding to a dummy job when the image forming apparatus obtains the dummy job from the print service . The information regarding an actual job which is to be printed includes the document file name of the actual job the data size of the actual job and a predicted time at which the process of generating print data of the actual job in the print service is completed. For example the information regarding an actual job may be generated from information about the actual job when the dummy job adding unit or adds a dummy job corresponding to the actual job. For example the dummy job adding unit or receives document data of the actual job to be printed and is therefore capable of recognizing the file name and the data size of the document data. The dummy job adding unit or may set the file name and the data size of the document data as the file name and the data size of the actual job to an item of attribute information of the dummy job to be added. The required time for the print service to convert document data to print data or the required time for transmitting document data from the client apparatus to the print service depends on the data size of the document data. Accordingly the dummy job adding unit or may obtain the required times from the size of the document data calculate a predicted time at which the process of generating print data of the actual job is completed from the required times and the current time and set the time to an item in the attribute information of the dummy job to be appended. The image forming apparatus recognizes specific items such as the data size of the actual job and a predicted time at which the process of generating print data of the actual job is completed in the attribute information of the dummy job which is obtained in step S or S and prints a message such as From now TestSampleScaling.pdf the file name of the actual job is scheduled to be printed. The data size of this job is about bytes and the job will be printed about at . which describes the recognized information on a sheet of paper. The predicted time at which the process of generating print data of the actual job is completed may be obtained by the image forming apparatus from the data size of the document data of the actual job. As another example the dummy job adding unit or may generate a dummy job as a print job including a message describing such information about the actual job and the image forming apparatus may print the dummy job.

The exemplary embodiment and modified exemplary embodiments of the present invention are described above.

The units which perform information processing and which are included in the client apparatus the print service and the image forming apparatus which are exemplarily described are implemented for example by causing a general purpose computer to execute programs describing the processes for functional modules in the above described apparatuses. For example a computer which is herein mentioned has as hardware a circuit configuration in which a microprocessor such as a central processing unit CPU memories primary memories such as a random access memory RAM and a read only memory ROM a secondary memory controller which controls secondary memories such as a hard disk drive HDD a solid state drive SSD and a flash memory various input output I O interfaces a network interface which performs control of connection with a wireless or wired network and like are connected with each other via a bus or the like. In addition disk drives for performing reading and or writing on portable disk recording media such as a compact disk CD a digital versatile disk DVD and a Blu ray Disc memory reader writers for performing reading and or writing on portable nonvolatile recording media based on various specifications such as a flash memory and the like may be connected for example via an I O interface to the bus. Programs describing process information of the functional modules which are exemplarily described above are stored in a secondary memory device such as a flash memory via a recording medium such as a CD or a DVD or via a communication unit such as a network and are installed in a computer. The programs stored in the secondary memory device are read out to the RAM and are executed by a microprocessor such as a CPU whereby the functional modules which are exemplarily described above are implemented. The print service may be achieved through cooperation of multiple computers.

The foregoing description of the exemplary embodiments of the present invention has been provided for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Obviously many modifications and variations will be apparent to practitioners skilled in the art. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications thereby enabling others skilled in the art to understand the invention for various embodiments and with the various modifications as are suited to the particular use contemplated. It is intended that the scope of the invention be defined by the following claims and their equivalents.

