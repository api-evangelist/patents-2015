---

title: Lighting device and apparatus with standardized interface for processing one or more sensed external conditions
abstract: A lighting device or an apparatus for use with a light source has one or more sensors, intelligence in the form of programmed processors and communication capabilities. Each sensor is configured to monitor one or more conditions external to a lighting device not directly related to operational performance of the respective lighting device. Programming provides a standardized interface to enable processing of sensed conditions from sensors of different types.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09253856&OS=09253856&RS=09253856
owner: ABL IP HOLDING LLC
number: 09253856
owner_city: Conyers
owner_country: US
publication_date: 20150209
---
This application is a continuation of U.S. application Ser. No. 14 285 881 filed May 23 2014 entitled LIGHTING DEVICES WITH SENSORS FOR DETECTING ONE OR MORE EXTERNAL CONDITIONS AND NETWORKED SYSTEM USING SUCH DEVICES which is a continuation of U.S. application Ser. No. 13 463 594 filed May 3 2012 entitled LIGHTING DEVICES WITH SENSORS FOR DETECTING ONE OR MORE EXTERNAL CONDITIONS AND NETWORKED SYSTEM USING SUCH DEVICES now U.S. Pat. No. 8 755 039 the disclosures of which are entirely incorporated herein by reference.

This application also is related to U.S. application Ser. No. 13 463 586 filed May 3 2012 entitled NETWORKED ARCHITECTURE FOR SYSTEM OF LIGHTING DEVICES HAVING INTEGRAL SENSORS FOR INTELLIGENT APPLICATIONS the disclosure of which also is entirely incorporated herein by reference.

Electrical lighting has become commonplace in modern society. Electrical lighting devices are commonly deployed for example in homes buildings of commercial and other enterprise establishments as well as in various outdoor settings. Even in a relatively small state or country there may be millions of lighting devices in use. Traditional lighting devices have tended to be relatively dumb in that they can be turned ON and OFF and in some cases may be dimmed usually in response to user activation of a relatively simple input device. Lighting devices have also been controlled in response to ambient light detectors that turn on a light only when ambient light is at or below a threshold e.g. as the sun goes down and in response to occupancy sensors e.g. to turn on light when a room is occupied and to turn the light off when the room is no longer occupied for some period . Often such devices are controlled individually or as relatively small groups at separate locations.

With the advent of modern electronics has come advancement both in the types of light sources and in the control capabilities within the lighting devices. For example solid state sources are now becoming a commercially viable alternative to traditional light sources such as incandescent and fluorescent lamps. By nature solid state light sources such as light emitting diodes LEDs are easily controlled by electronic logic circuits or processors. Electronic controls have also been developed for other types of light sources. Advanced electronics in the control elements have facilitated more sophisticated control algorithms as well as increased networking of lighting devices.

Sensing and network communications however have focused on the lighting functions applications of the lighting devices. For example sensors may be provided in a lighting device to detect parameters relevant to control operation of the lighting device and the processor in the device controls the source s of the device in response to the sensor inputs. Alternatively or in addition a communication interface in each of a number of networked lighting devices may allow communication about the status of each lighting device to a system control center. A programmed computer or a person at the control center then may be able to send commands to individual lighting devices or to groups of lighting devices for example based on a decision responsive to one or more conditions sensed by some or all of the lighting devices.

However these advances in lighting devices and networked systems have mainly addressed aspects of the lighting provided by the lighting devices. For example lighting devices may be adjusted turned ON and or turned OFF based on monitored conditions either by processor logic within the device s or commands from a central control. It also has been suggested that networked lighting devices could provide transport for data communications to from other devices that may come within range of the lighting device and or its internal communication interface.

It is also useful to monitor and respond to a wide range of other conditions that do not directly relate to lighting. A vast array of sensor types exists for sensing various conditions. In the home for example smoke fire carbon monoxide and burglary sensors are common. Often such sensing is locally implemented by individual sensing units with no coordination. In more sophisticate installations a number of sensors of various types may be couple to a communication device or system which provides communications to a central system that monitors a number of enterprise premises or a number of individual customer locations. However the individual devices and the networked monitoring systems have traditionally been separate and independent from the lighting devices in or at the monitored locales. Even in systems that provide combinations of lighting control and condition monitoring and or communications related to both functions the lighting and monitoring equipment are separate devices on the premises with separate power and communication capabilities.

In the following detailed description numerous specific details are set forth by way of examples in order to provide a thorough understanding of the relevant teachings. However it should be apparent to those skilled in the art that the present teachings may be practiced without such details. In other instances well known methods procedures components and or circuitry have been described at a relatively high level without detail in order to avoid unnecessarily obscuring aspects of the present teachings.

The various examples disclosed herein relate to intelligent lighting devices with associated sensors intelligence and communication capabilities. Reference now is made in detail to the examples illustrated in the accompanying drawings and discussed below.

Considering first the example of the lighting device includes a light source implemented as part of a legacy installation . For example the legacy installation may be an existing type of street lamp or light fixture utilizing an older more conventional type of source. In such a case some or all of the other elements of the lighting device may be configured as a module coupled to the light source in the legacy installation e.g. as added to a light fixture previously configured to support the light source . In the example the control elements control the light source . The light source in the legacy installation could be separately controlled e.g. by a legacy control system or element such as a switch . In this later situation the added elements of the device would mainly provide monitoring and communication functions from the location of the lighting device .

The exemplary lighting device includes one or more sensor couplings and one or more sensors as well as communication and control electronics. For the legacy installation of the source the other elements of the lighting device are configured as a module coupled to the light source e.g. as may be added to a light fixture previously configured to support the light source and coupled to the source via existing control and or power connections of the source.

In the example of device in the light source is integrated into the fixture or the like in a unified configuration together with the one or more sensor couplings one or more sensors and the communication and control electronics. Although the source in the device may be any suitable type of light source many such devices will utilize the most modern and efficient sources available such as solid state light sources e.g. LED type light sources.

Each lighting device or is configured to sense at least one external condition not related directly to operations or communications of the lighting device. As discussed more later each device also has an interface for communications with other system elements. Hence a lighting device or may have as few as one coupling and one associated external condition sensor . In the examples discussed herein each lighting device or includes a number of sensor couplings and associated sensors .

The condition or conditions detected by sensors are external in that they relate to some aspect observable in the environment around and near the lighting device or other than those relating to the feedback normal lighting control and or communications of the device or . Although more examples will be discussed later a few examples of conditions that may be detected via external sensing include ambient temperature humidity air pressure and wind speed in the surrounding environment images of nearby objects motion outside the fixture gases and other substances in the atmosphere and temperature and moisture on objects within some distance range of the fixture or . As such some of the external conditions like air temp air quality and vibration relate to ambient conditions around or near the fixture itself whereas other external conditions like reflected or directed light or like an image or a video of a distant object relate to external remote conditions that exist at some distance from fixture.

The examples thus include one or more sensors Sa of types for sensing or detecting an ambient external condition and one or more sensors Sr of types for sensing or detecting a remote external condition. Examples of external ambient condition sensors Sa include a fire detector a smoke detector an airborne chemical detector an airborne biological agent detector a carbon monoxide sensor an air temperature sensor an air pressure detector a humidity sensor a moisture detector an air speed detector and a micro electro mechanical system type sensor. By way of another example a lighting device or may include an ambient sensor Sa in the form of a Micro Electro Mechanical System MEMS for sensing motion similar to gyroscopic devices used in smartphones and the like to sense orientation movement and direction. Here MEMS type sensors would sense magnitude and directions of vibrations of the fixture or due to external forces. Collective analysis of vibration measurements for example might indicate an earthquake and the area and magnitude of the impact. Examples of external remote condition sensors Sr include a directional light sensor a video or still image sensor and a sound detector. Some of the ambient and remote sensors may be optical devices each for sensing one or more characteristics of light in the ultraviolet visible or infrared portions of the electromagnetic spectrum. Optical remote condition sensor devices may be used for example for sensing direction of light and determining position of an object as described in U.S. Pat. Nos. 6 043 873 and 5 705 804 both by Ramer et al. Other examples of remote condition optical sensors include linear and two dimensional imaging devices.

In these examples each external condition sensor coupling is configured to present a standardized sensor connection interface that is compatible with different types of sensors. In that way one standardized configuration of the coupling may be used with different types of sensors. Within any one fixture there may be one two or more couplings configured to the same standard as well as one two or more other couplings configured to one or more additional standards. Any sensor connection interface supported through a coupling is standardized across at least a number of different lighting devices or in that the different devices have similar couplings that support the same connection and associated electrical aspects of the coupling standard. However the standardized connection interface in the various lighting devices also is compatible with a plurality of different types of sensors. Each sensor connects to the standardized connection interface of one of the sensor couplings . Each sensor is a device of one of the types compatible with the standardized interface provided through a standardized coupling .

Although the couplings may support two or more standards for the sensors as noted for purposes of further discussion of the examples of all of the couplings in one device or provide the same standardized interface for various types of sensors . In either of the multi sensor examples Sr sensors may sense the same remote condition or different remote conditions. Similarly the Sa sensors may sense the same or different ambient conditions. Hence there is at least one first type sensor located so as to sense a first one of a number of conditions external to the lighting device not directly related to operation of the lighting device and at least one second sensor of a second one of the types different from the first type that is located so as to sense a second one of the conditions external to the lighting device not directly related to operation of the lighting device. Each Sa sensor connects to the standardized interface of one of the couplings and each Sr sensor connects to the standardized interface of another one of the couplings . Each of the sensors Sa and Sr is configured to output a signal responsive to the respective sensed condition via the standardized connection interface of the respective sensor coupling .

Intelligent lighting devices of the type discussed herein may have only the one or more external condition sensors . However the specific examples and illustrated in also include one or more couplings and sensors to detect a condition related to operation of the lighting device. A device or may include one or more feedback sensors for sensing operational conditions such as source or circuit temperature light output intensity or one or more other characteristics of the light produced by the source which relate to operation of the lighting device. Such sensors may provide a local or internal feedback loop at the lighting device or or may enable communication regarding the additional condition to another device over a network and associated light source control based on receiving responsive commands from the other device. Some or all of the lighting devices may have light activation related sensors such as ON OFF switches room occupancy sensors ambient light sensors for controlling lighting in response to ambient light intensity and light dimmers. Feedback and light activation sensors are referred to collectively as internal sensors in that they sense aspects of and or user inputs to control the internal lighting operations of one or more of the lighting devices. Examples of sensors to detect a condition related to operation of the lighting device or include a sensor for detecting temperature of one or more components of the lighting device a feedback light sensor for detecting intensity or other characteristic of light produced by the lighting device an occupancy sensor for detecting a condition indicative of occupancy of a region to be illuminated by the lighting device and an ambient light sensor for detecting ambient light near the lighting device. In the examples of the illustrative devices and each include one or more couplings and one or more internal condition sensors .

The couplings may be standardized in a manner similar to the couplings or the couplings may be uniquely configured for each respective type of sensor . In the example we will assume that the couplings present a standardized sensor connection interface that is compatible with different types of internal condition sensors. The standard may be the same as or different from the standardized interface s of couplings . Each sensor in turn is configured to connect to and provide condition responsive signaling via the standardized interface of the coupling . As discussed more later this third category of sensor provides signal s used to enable control of operation of the light source at least in part based on the condition s sensed by the sensor s .

A sensor may be as simple as a condition responsive transducer for generating an electrical signal bearing a known relationship to the amount or degree or the like of a particular condition that the transducer detects. However most implementations particularly those in the examples utilize sensors that include at least some circuitry for processing the output of the transducer s included as part of the sensor. The circuitry receives the signal from the transducer s in the sensor and produces an output via the coupling that conforms to the signaling aspects of the sensor coupling standard e.g. as a standard analog level signal on one or more pins designated for an analog connection and or as appropriately formatted data on the pins designated for data outputs. The electronics of such a sensor may also receive and respond to a signal received from the I O interface on the board.

Each exemplary lighting device or also includes a processor coupled to the sensor couplings for processing data responsive to the signals from the sensors . However the two examples utilize different processor implementations.

Consider first the example of . There the lighting device also includes processing and communications elements in this case implemented on a control communication Ctrl. Comm. board . The lighting device includes a Micro Control Unit MCU which implements the control logic for the device that is to say controls operations of the device . The MCU may be a microchip device that incorporates a processor serving as the programmable central processing unit CPU of the MCU and thus of the lighting device as well as one or more memories accessible to the CPU . The memory or memories store executable programming for the CPU as well as data for processing by or resulting from processing of the CPU . The MCU may be thought of as a small computer or computer like device formed on a single chip. Such devices are often used as the configurable control elements embedded in special purpose devices rather than in a computer or other general purpose device. A variety of PIC16 and PIC32 type MCU chips for example may be used as the MCU in the lighting device .

As noted the lighting device includes a light source which in the example of is part of a legacy type installation . Power is supplied to the source by an appropriate driver . The source driver may be a simple switch controlled by the MCU for example if the source is an incandescent bulb or the like that can be driven directly from the AC current. Although the driver could be an element on the control communication Ctrl. Comm. board in the example the source driver is a part of the legacy installation of the source for example the ballast in an otherwise conventional fluorescent light fixture. Power for the lighting device is provided by a power supply circuit which supplies appropriate voltage s current s to the control communication Ctrl. Comm. board and provides appropriate power to the source driver to power the light source . Although shown separately for convenience the components of the power supply circuit may be mounted on the same board as the control and communication components depending on considerations such as board housing space heat generation etc. In the example the power supply circuit receives electricity from alternating current AC mains although the lighting device may be driven by a battery or other power source for a particular application. Although not shown the device may have or connect to a back up battery or other back up power source to supply power for some period of time in the event of an interruption of power from the AC mains .

The source driver circuit receives a control signal as an input from the MCU to at least turn the source ON OFF. Depending on the particular type of source and associated driver the MCU input may control other characteristics of the source operation such as dimming of the light output pulsing of the light output to from different intensity levels color characteristics of the light output etc. If the source and or driver circuit have the capability the driver circuit may also provide some information back as to the operation of the light source e.g. to advise the MCU of the actual current operating state of the source .

As outlined earlier the lighting device includes external condition sensors connected to standardized couplings as well as sensors for sensing conditions related to operations of the source and associated sensor couplings . The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the respective sensors . Physical and electrical connection aspects of each coupling will conform to relevant aspects of the applicable sensor coupling standard. The electrical power and electrical signal communication from and or to the sensors in accordance with the electrical aspects of the applicable sensor coupling standard are provided by appropriate input output I O circuitry connected between the coupling and the MCU . On the MCU side the I O circuitry provides a signaling link to a port of the MCU and conforms to the signaling standard for that port. Depending on the design implementation for a particular lighting device I O circuitry may include a separate circuit for each coupling two or more I O circuits for groups of two or more couplings or one I O circuit for all of the included sensor couplings. In the example of the I O circuitry for the sensor couplings is represented by the external sensor input output I O interface and the I O circuitry for the sensor couplings is represented by the source operations sensor input output I O interface .

Hence together the coupling and the external sensor I O interface circuitry provide physical and electrical connections as well as electrical power and signal communications for an external condition sensor that conform to the applicable sensor connection interface standard. The signal communications aspects of the standard at least allow the sensor to provide external condition responsive information to the MCU . Although the actual sensing element of a sensor may be analog the information passed to the MCU will typically be in a standardized digital format. The digital format however may vary somewhat as between sensor types based on associated application programming discussed more later. Preferably the MCU port connection the I O interface circuitry and the interface standard through the coupling also will allow the MCU to control one or more aspects of operation of the sensor e.g. to activate a sensor to sense the applicable condition at a time set by the MCU or to select one of several conditions to be sensed by a multi condition type of sensor or to adjust a sensitivity of the sensor etc.

As noted in the examples the couplings also support a standardized interface that may be the same as or similar to the interface of the couplings . Hence together the coupling and source operation related sensor I O interface circuitry provide physical and electrical connections as well as electrical power and signal communications for a source operation related sensor that conform to the applicable sensor connection interface standard. The signal communications aspects of the standard at least allow the sensor to provide source operation related condition responsive information to the MCU . Although the actual sensing element of a sensor may be analog the information passed to the MCU will typically be in a standardized digital format. The digital format however may vary somewhat as between sensor types based on associated programming. The MCU port connection the I O interface circuitry and the interface standard through the coupling may allow the MCU to control one or more aspects of operation of the sensor e.g. to activate a sensor to sense the applicable condition at a time set by the MCU or to select one of several conditions to be sensed by a multi condition type of sensor or to adjust a sensitivity of the sensor etc.

The lighting device also includes a communication interface coupled to a communication port of the MCU . The interface provides a communication link to a telecommunications network that enables the MCU to send and receive digital data communications through the particular network. The network may be wired e.g. metallic or optical fiber wireless e.g. radio frequency or free space optical or a combination of such network technologies and the interface in a particular installation of the device will correspond to the most advantageous network available based on considerations such as cost and bandwidth at the location of the installation. In network examples discussed later the network is a local area network LAN therefore the communication interface is of a type for linking to and communication through the available LAN. The communication interface is therefore accessible by the processor CPU of the MCU and the communication interface is configured to enable the processor to communicate information resulting from one or more functions that the processor performs in response to the various conditions sensed by the sensors and or through the LAN or other communications network.

As noted the MCU includes one or more memories . The memories store programming for execution by the CPU as well as data to be processed or that has been processed by the CPU . The programming is shown in block diagram or module form as a program stack at .

The programming includes an operating system OS and various application programs which are resident in the memory and execute on the CPU. The operating system enables execution of the various applications both for local functions and for communications using the interface . Of note for purposes of this discussion the application software includes the software for implementing the control of the lighting device as well as the software for MCU interaction with the various connected sensors. For discussion purposes the example shows two application programs AP AP for controlling lighting device operations with respect to two different types of sensors. One type of sensor may be for one or more of the source operation related condition sensors but in this example we will assume that the sensor application program APcontrols operations in relation to a type of one of the ambient external condition sensors Sa and the sensor application program APcontrols operations in relation to a type of one of the remote external condition sensors Sr. Application programs such as AP AP are examples of programming for execution by the processor that corresponds at least in part to the type s of sensors and controls at least one function of the processor responsive to the condition s sensed by the sensor s . The CPU also will run one or more other application programs from memory to control various other functions of the lighting device such as control of the light source interaction with other types of sensors or and communications through the interface .

The programming either as part of the OS or as a complement to the OS implements a standard application programming interface API for at least the application s relating to external condition sensing. Although not separately shown the programming may implement the same or different APIs for applications related to the source operation related condition sensors and or other applications to be executed through the OS by the CPU . An API such as provides a standard software interface for exchanges between software components allowing components to communicate and interact. An API standard for example can specify command formats response formats data structures etc. In this case the standard sensor API offered or supported by the OS allows various parties such as different sensor manufactures to write application programs AP for the MCU to allow the device to utilize different external condition sensors .

The application programs AP and the API also enable the MCU to communicate information or data generated in response to processing of signals or outputs of the sensors so as to implement a standardized application programming interface with respect to the sensor related processing function s . The information resulting from processing functions of the MCU in turn is communicated through the interface and the network in a manner conforming to the standardized application programming interface. In this way various devices communicate data relating to various types of sensors through the network in a standardized format that can be readily processed by other equipment that is aware of the format supported by the application programming interface.

Hence each application program APor APcontrols one or more functions of the processor CPU responsive to the external condition or conditions sensed by the respective type of sensors . For example the programming may control how data regarding the sensed conditions is collected processed and formatted for communication e.g. so as to conform to relevant aspects of the standard interface specification and associated API. The programming may also configure the processor CPU to control the light source either based on internal logic or based on commands received at the device via the network communication. Each application program APor APmay control operation in relation to a single one of the sensors or in relation to some number of two or more of the sensors and or .

The application program corresponding to a particular type of sensor enables the processor to receive data representing the condition sensed by the sensor and controls at least one function of the CPU responsive to the condition sensed by the sensor such as processing of the data for communication via the interface and the network. The control function s implemented by execution of the application program for a particular type of sensor may involve other logic in addition or instead of processing for communications. For example the application program may determine timing for detecting a particular condition or for activating or responding to a particular sensor e.g. on a periodic basis so as to reduce processing load and or communication traffic. As another example the control function relating to a particular condition may involve a threshold either of a value or a change regarding the sensed condition. A program might cause the MCU to react to detection of more than some set amount of a chemical in the atmosphere as an indication of a harmful condition or to update a reported temperature when the temperature has changed more than a threshold amount. The open nature of the lighting devices provided by the sensor interface and associated API supports use of a wide range of sensor types and an even wider range of program logic for different networked applications of such devices.

Consider next the alternative example of a lighting device shown in . The alternative example of a lighting device includes a somewhat similar source . As noted earlier the source is a new source integrated in a new installation type implementation of the device . Although the driver for the source could be separate in the example the source driver circuitry may be implemented as part of the control and communication board as shown. As discussed earlier the lighting device also includes the sensors and couplings as in the device of . Many of the functions operations of the device are similar to those of device however the lighting device utilizes a somewhat different control architecture than the MCU based arrangement of the device shown in .

Hence in the lighting device of the processing and communications elements on the control communication Ctrl. Comm. board include a microprocessor W which serves as the programmable central processing unit CPU of the lighting device . The P for example may be a type of device similar to microprocessors used in servers in personal computers or in tablet computers or other general purpose computerized devices. Such a device typically offers more and faster processing capabilities than the CPU of a Micro Control Unit like that used in the device . Unlike the Micro Control Unit program and data storage is external and instead of specially configured ports the P is typically configured to communicate data at relatively high speeds via one or more standardized interface buses represented generally by the bus arrow .

The lighting device includes one or more storage devices which are accessible by the P via the bus . Although the lighting device could include a hard disk drive or other type of disk drive type storage device in the example the device includes one or more memories . Typical examples of memories include read only memory ROM random access memory RAM flash memory and the like. In this example the memory or memories store executable programming for the P as well as data for processing by or resulting from processing of the P .

As noted the lighting device includes a source which in the example of is an integral part of the device . Power is supplied to the source by an appropriate driver in this example included as a component on the control communication Ctrl. Comm. board . Although represented as a single element in the drawing the driver may comprise a number of elements offering several control channels for different elements of the light source . For example a light emitting diode LED implementation of the light source may have individually controlled LEDs or strings of LEDs and for such an implementation the driver would consist of several driver circuits providing corresponding independent channels of control. The source driver provides a source of power and associated control by the CPU in this case by the P similar to the functions provided by the driver in the device of except that the driver includes a bus interface that enables the P to communicate with the source driver via the bus .

The lighting device includes a power supply circuit coupled to the AC mains like the supply circuit in the example of although the circuit and the board will be configured to supply driver voltage current to the source driver via the board instead of the separate path shown in the example of . As in the earlier example the lighting device may be driven by a battery or other power source for a particular application or an AC powered device may have or connect to a back up battery or the like to supply power for some period of time in the event of an interruption of power from the AC mains .

The source driver circuit receives control commands from the P via the bus to at least turn the source ON OFF. Depending on the particular type of source and the associated driver the P commands may control other characteristics of the source operation such as dimming of the light output pulsing of the light output to from different intensity levels color characteristics of the light output etc. If the source and or driver circuit have the capability the driver circuit may also provide some information back as to the operation of the light source e.g. to advise the P of the actual current operating state of the source .

As noted the lighting device includes external condition sensors connected to standardized couplings as wells as sensors for sensing conditions related to operations of the source and associated sensor couplings . The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the respective sensors . Physical and electrical connection aspects of each coupling will conform to relevant aspects of the applicable sensor coupling standard s . The electrical power and electrical signal communication from and or to the sensors in accordance with the electrical aspects of the applicable sensor coupling standard are provided by appropriate input output I O circuitry connected between the coupling and the bus much like in the earlier example of .

Hence the lighting device includes external sensor I O circuitry and source operation related sensor I O circuitry . With respect to the respective sensors and couplings the I O circuits are similar to the circuits and in the example of . However each of the circuits and includes a bus interface that enables the P to communicate with the respective I O interface circuit or via the bus . Each of the circuits and may be configured to provide the electrical interface for one two or more of the respective sensors via the associated coupling s .

The lighting device also includes a communication interface which is similar to the communication interface in the earlier example in that the communication interface provides two way data communication via a network such as a LAN. In the example of the communication interface is of a type having a bus interface to enable the interface to communicate internally with the P via the bus .

As noted the lighting device includes one or more memories accessible via the bus and those memories store programming for execution by the P as well as data to be processed or that has been processed by the P . The programming includes an operating system OS an application programming interface API sensor type specific applications such as APand AP and other application programming similar to the programming included in the earlier example. However here the programming particularly OS and API is of a type written for the particular type of P . The sensor type specific application programs APand APwould be written to conform to the API and to the particular types of sensors included in the lighting device .

Again application programs such as AP AP are examples of programming for execution by the processor that corresponds at least in part to the type s of sensors and controls at least one function of the processor responsive to the condition s sensed by the sensor s . The P also will run one or more other application programs from memory to control various other functions of the lighting device such as control of the light source interaction with other types of sensors or and communications through the interface .

At least for the external condition sensors and possibly for the source operation related condition sensors the API provides the standard software interface of the OS to the application programs AP as in the earlier example. The application programs AP and the API also enable the P to communicate information or data generated in response to processing of signals or outputs of the sensors so as to implement a standardized application programming interface with respect to the sensor related processing function s . The resulting information in turn is communicated through the interface and the network in a manner conforming to the standardized application programming interface. In this way various devices communicate data relating to conditions sensed by various types of sensors and or through the network in a standardized format that can be readily processed by other equipment that is aware of the format supported by the application programming interface.

Each application program APor APcorresponding to a particular type of sensor enables the P to receive data representing the condition sensed by the sensor and controls one or more functions of the P responsive to the external condition or conditions sensed by the respective type of sensors in a manner similar to the application programs AP in the earlier example.

The structure and operation of the intelligent lighting devices and as outlined above were described by way of example only.

The examples of utilized monitoring control and communications elements that were substantially integrated with the fixture and fairly closely coupled to the light source of the fixture so as to control the light source in the fixture. As noted earlier the device was an integral unit with a new electronically controlled light source such as an asset of LEDs whereas the device was added to but still controlled a legacy light source. Intelligent lighting devices like those of can take many different forms and can incorporate many different types of light. It may be helpful to consider some examples of structures of lighting devices. A configuration that involves adding monitoring capabilities intelligence and communications to an existing light fixture e.g. part of a previously installed infrastructure will be discussed later. By way of examples depict two intelligent lighting devices. In these examples the light sources in the form of LEDS are integrated together with the monitoring control and communications elements. In that sense these two examples are similar to the intelligent lighting device of however the elements on the control and communication boards may be MCU based like in or P based like in .

Consider next the example of the intelligent lighting device of . In this example the lighting device may take the form of a relatively compact light engine. Some of the elements shown in are the same as elements shown in earlier examples. Those similar elements are indicated by the same reference numerals as in the earlier drawings and are discussed again here more briefly since the reader should be familiar with or able to refer back to the earlier discussion of such elements for additional information regarding such similar elements.

The lighting device includes a number of external condition sensors connected to standardized couplings . Although the example shows one sensor connected to each coupling there may be more couplings than sensors for example if a particular device is implemented for a particular installation with less than some maximum designed number of sensors.

The light engine formed by the device includes the couplings and sensors as integral elements of the light engine. The device includes a housing . Since the sensors are integral in the illustrated configuration the sensors are attached to couplings through apertures in a wall of the housing to detect one or more external conditions as discussed earlier. Although the device may have fewer or more sensors of the same or different types the example shows that two of the sensors are ambient external condition sensor types Sa and two of the sensors are remote external condition sensor types Sr. Instead of the integral arrangement of all of the couplings and sensors one or more of the couplings sensors could be mounted separately and connected to the light engine part of the device .

The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the external condition sensors . Physical and electrical connection aspects of each coupling will conform to relevant aspects of the applicable sensor coupling standard s .

The lighting device may further include one or more sensors and associated couplings for sensing one or more conditions that relate to operation of the light source in the examples of . The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the sensors . Physical and electrical connection aspects of each coupling may conform to relevant aspects of an applicable sensor coupling standard.

The lighting device also includes processing and communications elements represented collectively in the high level functional block diagram of by the control communication Ctrl. Comm. board . These elements for example include a processor which is coupled to the sensor coupling s in the lighting device for processing data responsive to the signal from each included external condition sensor . As in the earlier examples the elements on the control communication board also include a memory accessible to the processor which stores programming for execution by the processor and data for processing or that has been processed by the processor during program execution. The intelligent lighting device further includes a communication interface accessible by the processor. The elements implemented on the board also include sensor I O circuitry as in the earlier examples. As discussed below the integral light source in the device includes a number of LEDs. Power for the LEDs is supplied appropriate driver circuitry implemented as part of elements of the control communication Ctrl. Comm. board . The elements of the control communication Ctrl. Comm. board may be implemented for example in a manner similar to the elements on board or in a manner similar to the elements on board .

Power for the lighting device is provided by a power supply circuit which supplies appropriate voltage s current s to the control communication Ctrl. Comm. board and the driver circuitry on the board that provides appropriate power to the LEDs forming the light source. Although shown separately for convenience the components of the power supply circuit may be mounted on board . In most examples the power supply circuit receives electricity from alternating current AC mains although the lighting device may be driven by a battery or other power source for a particular application and or may have or connect to a back up battery or other back up power source to supply power for some period of time in the event of an interruption of power from the AC mains.

The device is shown in in an orientation for emitting light downward as might be suitable for a downlighting application. Of course the device may be oriented in other directions for other lighting applications.

As noted the device includes a number of LEDs forming the light source. depicts the LEDs at . The LEDs may all be of the same type e.g. all the same type of white light emitters. Alternatively there may be two three or more different types of LEDs. Combinations of LED types can be used to provide a blended white light of desired characteristics or a tunable color light output. The number and types of drivers as well as the programming for the processor would be somewhat different for different combinations of LEDs.

Various arrangements of the LEDs reflectors and optics may be used to configure the light output for intended applications. In the example of the intelligent lighting device includes a reflector having a conical section with the LEDs mounted on a base section . The reflector may be specular although in the example some or all of the interior of the reflector exhibit a diffuse reflectivity. The reflector may be formed in any manner that provides desired reflectivity in a cost effective manner for example of a metal shell having white paint or other coating on the surfaces intended to be reflective. Another option is to form the reflector of a white plastic or the like.

Although a separate circuit board is not shown for convenience the LEDs are typically mounted on such a board arranged so as to position the LEDs in or to emit light through openings or apertures through the reflector. In the example the LEDs emit light through apertures in the base of the reflector.

The opposite end of the conical section of the reflector could be open. In the example however the opposite end of the conical section of the reflector is closed or covered by a light transmissive element such as a translucent white diffuser . Although shown as convexly curved outward away from the interior of the reflector and the LEDs the diffuser may have other shapes such as a flat shape or a concave shape. Also opposite surfaces of the diffuser may have similar shapes as shown or different shapes. The reflective surfaces of the reflector sections and the translucent white diffuser together create a conically shaped volume or cavity for the light engine of the device . The LEDs emit light into this volume and the light is mixed by reflections within the cavity and by diffusion as the light emerges from the cavity through the diffuser .

As in the earlier examples the lighting device includes a number of external condition sensors connected to standardized couplings . Although the example shows one sensor connected to each coupling there may be more couplings than sensors for example if a particular device is implemented for a particular installation with less than some maximum designed number of sensors. The light engine formed by the device includes the couplings and sensors as integral elements of the light engine although the couplings and sensors may be somewhat separately mounted for some applications and or for sensing some particular external conditions. There may be one two or any higher number of external condition sensors and associated couplings . The example shows one of the sensors as an ambient external condition sensor type Sa and another of the sensors as a remote external condition sensor type Sr.

The device includes a housing . Since the sensors are integral in the illustrated configuration the sensors are attached to couplings through apertures in a wall of the housing to detect one or more external conditions as discussed earlier. The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the external condition sensors . Physical and electrical connection aspects of each coupling will conform to relevant aspects of the applicable sensor coupling standard s .

The lighting device may further include one or more sensors and associated couplings for sensing one or more conditions that relate to operation of the light source in the examples of . The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the sensors . Physical and electrical connection aspects of each coupling may conform to relevant aspects of an applicable sensor coupling standard.

The lighting device also includes processing and communications elements represented collectively in the high level functional block diagram of by the control communication Ctrl. Comm. board . These elements for example include the processor memory communication interface sensor I O circuit s and LED driver circuitry as in the example of . Again the elements of the control communication Ctrl. Comm. board may be implemented for example in a manner similar to the elements on board or in a manner similar to the elements on board . Power for the lighting device is provided by a power supply circuit which supplies appropriate voltage s current s to the control communication Ctrl. Comm. board including for the driver circuitry that provides appropriate power to the LEDs forming the light source. Although shown separately for convenience the components of the power supply circuit may be mounted on board . In most examples the power supply circuit receives electricity from alternating current AC mains although the lighting device may be driven by a battery or other power source for a particular application and or may have or connect to a back up battery or other back up power source to supply power for some period of time in the event of an interruption of power from the AC mains.

The device is shown in in an orientation for emitting light downward as might be suitable for a downlighting application. Of course the device may be oriented in other directions for other lighting applications.

As in the example of the intelligent lighting device includes a number of LEDs forming the light source. Again the LEDs may all be of the same type e.g. all the same type of white light emitters. Alternatively there may be two three or more different types of LEDs. Combinations of LED types can be used to provide a blended white light of desired characteristics or a tunable color light output. The number and types of drivers as well as the programming for the processor would be somewhat different for different combinations of LEDs.

To this point in our discussion the device is quite similar to the device . However as shown particularly in the device uses different optical elements to process the light emitted by the LEDs .

The example of utilizes a primary optic in the form of a diffusely reflective optical integrating cavity in combination with a secondary optic in the form of a specular or diffusely reflective deflector of concentrator . Although the cavity may take different forms in the example the cavity is formed by a dome and a plate . The cavity has a diffusely reflective interior surface s and or s and a transmissive optical passage . The passage is transmissive with respect to light emitted by the LEDs . The passage may be an actual opening or the passage may be an optical aperture that is physically closed but allows transmission of light of the appropriate wavelength range from the cavity into the region or area to be illuminated by the device . For example the passage may be formed by a transparent or translucent member of portion of the plate . Although not shown the passage may be at other locations and or there may be additional passages allowing emission in other directions.

The LEDs may be positioned at a variety of different locations and or oriented in different directions. Various couplings and various light entry locations may be used. In this cavity example each LED is coupled to supply light to enter the cavity at a point that directs the light toward a reflective cavity surface so that the LED emissions reflect one or more times inside the cavity and at least one such reflection is a diffuse reflection. As a result the direct emissions from the source LEDs would not directly pass through the optical output passage of the cavity . In examples where the passage is open or transparent the points of emission into the cavity from the LEDs are not directly observable through the passage from the region illuminated by the output of the lighting device . The LEDs therefore are not perceptible as point light sources of high intensity from the perspective of an area illuminated by the intelligent lighting device .

The cavity may have various shapes. The illustrated cross section would be substantially the same if the cavity is hemispherical or if the cavity is semi cylindrical with a lateral cross section taken perpendicular to the longitudinal axis of the semi cylinder. For purposes of the discussion the cavity in the device is assumed to be hemispherical or nearly hemispherical. In such an example a hemispherical dome and a substantially flat cover plate or mask form the optical cavity . Although shown as separate elements the dome and plate may be formed as an integral unit. The plate is shown as a flat horizontal member for convenience although curved or angled configurations may be used. At least the interior facing surface s of the dome is highly diffusely reflective so that the resulting cavity is highly diffusely reflective with respect to the radiant energy spectrum produced by the device . The interior facing surface s of the plate is reflective typically specular or diffusely reflective. In the example the dome itself is formed of a diffusely reflective material whereas the plate may be a circuit board or the like on which a coating or layer of reflective material is added or mounted to form the reflective surface

For efficiency it is desirable that the diffusely reflective cavity surface s have a highly efficient reflective characteristic e.g. a reflectivity equal to or greater than 90 with respect to the relevant wavelengths. The entire interior surface surfaces of the dome and plate may be diffusely reflective or one or more substantial portions may be diffusely reflective while other portion s of the cavity surface may have different light reflective characteristics. In some examples one or more other portions are substantially specular or are semi or quasi specular.

Hence in this example the cavity forms an integrating type optical cavity. The transmissive passage or optical aperture allows emission of light generated by the LEDs that has been reflected diffused and thereby integrated light within the interior of the cavity from the cavity into a region to facilitate a humanly perceptible general lighting application for the device . Although shown at approximately the center of the plate the opening or aperture forming transmissive passage may be located elsewhere along the plate or at some appropriate region of the dome. In the example the passage forms the virtual source of the light from lighting device .

The transmissive passage or optical aperture may serve as the light output if the lighting device directing integrated light of relatively uniform intensity distribution to a desired area or region to be illuminated in accordance with the general lighting application. It is also contemplated that the lighting device may include one or more additional processing elements coupled to the aperture such as a colliminator a grate lens or diffuser e.g. a holographic element . In the example the intelligent lighting device includes a further optical processing element in the form of the deflector or concentrator coupled to the optically transmissive passage to distribute and or limit the light output to a desired field of illumination.

The deflector or concentrator has a reflective inner surface s to efficiently direct most of the light emerging from the cavity into a relatively narrow field of view. A small opening at a proximal end of the deflector is coupled to the optically transmissive passage of the optical integrating cavity . The deflector has a larger opening at a distal end thereof. Although other longitudinal cross sectional shapes may be used such as various curved reflector shapes e.g. parabolic or elliptical the deflector in this example is conical essentially in the shape of a truncated cone straight sided when shown in cross section . The angle and or curvature of the cone wall s and the size of the distal opening of the conical deflector define an angular field of light energy emission from the device . Although not shown the large opening of the deflector may be covered with a transparent plate or lens or covered with a grating to prevent entry of dirt or debris through the cone into the fixture and or to further process the output light energy.

The deflector comprises a reflective interior surface between the distal end and the proximal end. In some examples at least a substantial portion of the reflective interior surface of the conical deflector exhibits specular reflectivity with respect to the integrated radiant energy. However for some applications it may be desirable to construct the deflector so that at least some portion s of the inner surface exhibit diffuse reflectivity or exhibit a different degree of specular reflectivity e.g. quasi secular so as to tailor the performance of the deflector to a particular lighting application. For other applications it may also be desirable for the entire interior surface of the deflector to have a diffuse reflective characteristic.

The conical deflector may have a variety of different shapes depending on the particular lighting application. In the example where cavity is hemispherical the lateral cross section of the conical deflector horizontal across the drawing in the illustrated orientation would typically be circular. Hence as shown in the passage and corresponding proximal opening of the deflector as well as the distal opening of the deflector are circular. However the deflector may be somewhat oval in lateral shape. Although the passage may be round the distal opening may have other shapes e.g. oval rectangular or square in which case more curved deflector walls provide a transition from round at the passage coupling to the alternate shape at the distal opening. In applications using a semi cylindrical cavity the deflector may be elongated or even rectangular in cross section. The shape of the aperture also may vary but will typically match the shape of the small end opening of the deflector .

As a practical matter the size of the cavity is optimized to provide effective integration or combination of light from the desired number of LED type solid state sources . The size angle and shape of the deflector determine the area that will be illuminated by the combined or integrated light emitted from the device .

In the example the sensor is oriented to receive and detect some of the reflected light within the cavity . For example the sensor may detect the intensity and or color characteristics of the integrated light.

Although not shown either of the lighting devices and may include an opto luminescent materials such as a phosphor to convert some of the energy in a particular wavelength region emitted from the LEDs into visible light of different wavelength s to supplement or enhance the characteristics of the integrated light output lighting device for a particular application. Also the cavities in the devices and are shown as empty spaces. It is also contemplated that such a cavity may be partially or completely filed by another element or material e.g. solid optical element or a container for a light transmissive liquid.

The structure and operation of the intelligent lighting devices and as outlined above were described by way of example only.

The examples of utilized monitoring control and communications elements that were substantially integrated with the fixture and fairly closely coupled to the light source of the fixture. In those examples elements were provided that sensed conditions related to light source operation and could respond based on internal logic and or commands from higher level control computers e.g. to control the light source . However other configurations are contemplated for example that may not utilize the elements on the board to control the light source may provide additional output or control capability based on internal logic and or commands from higher level control computers and or to provide communication connectivity to other devices in the vicinity e.g. for communication of other devices through the network s of which will be discussed later . In many cases where there is an installed base of light fixtures it may be practical to add a module providing monitoring and communication capabilities to each existing fixture to add the desired intelligence etc.

The example of utilizes a cobra head type device as the light fixture . The cobra head fixture is attached to a beam or arm supported by a lamp post or light pole although other mounting structures may be used. Light fixture implementations and mounting arrangements like those shown in are common in street and parking lot applications. Of course the monitoring and communication module of and may be used with other types of legacy light fixtures and or in other types of applications.

The light fixture may include any light source that is appropriate for the intended lighting application. The fixture includes a housing that encloses the light source and other elements and provides the mechanical attachment to the supporting beam . The housing also supports a transparent or diffusely transmissive cover through which the source emits light.

As in earlier examples electrical power is obtained from alternating current AC mains although the light source may be driven by a battery or other power source for a particular application. AC power lines typically extend up through the pole and the beam and connect to the fixture although such lines are omitted for ease of illustration.

The lighting device also includes a controller for controlling operation of the light source . The controller could be external but in the example the housing also encloses the controller .

Although other more sophisticated control functions may be provided by an appropriate implementation of the controller for discussion purposes we will assume that the controller simply switches power to the source ON and OFF. Depending on the type of light source the controller may include power conversion circuitry such as a ballast or the like to convert the power obtained from the AC mains to an appropriate voltage current power for the particular light source .

The ON OFF switching by the controller may be based on a simple input switch commands received from an external device via the power lines or another device etc. In the example the light fixture includes a light sensing transducer such as a photocell. The transducer provides a signal that is related to the intensity of daylight reaching the transducer on the exterior of the fixture . The controller in the example turns power to the light source ON when the intensity of light detected by the transducer falls to or below a threshold e.g. to turn ON the source as night is falling. Conversely the controller turns power to the light source OFF when the intensity of light detected by the transducer reaches a threshold e.g. to turn OFF the source as the sun rises in the morning. The source is kept ON in the dark of night and the source is kept off during the daytime when sunlight is fairly plentiful.

In this example the cobra head light fixture is configured an operates in a conventional manner. The fixture may be an existing device that need not be modified with respect to power and operational control.

In an implementation where the fixture is a legacy device the fixture is enhanced or upgraded by the addition of the monitoring and communication module . In the example the module is mounted by attachment to an underside surface of the housing of the cobra head fixture . However the module may be added and mounted in association with the fixture at any location and or in any manner that is suitable for a particular installation and or a particular application.

Existing light fixtures such as the fixture have connection to power represented by the AC mains in the drawing. The module could be supplied power in other ways from other sources but typically the module will utilize the existing source of power available at the light fixture eliminating the need for separate power and or wiring. Hence in the example the module connects to and obtains power from the AC mains already present in the lighting device for powering the light source . Although other connections may be used e.g. depending on the location and or mounting of the module in the example the module has a connection to the AC main lines power at a point in the housing of the cobra head light fixture .

The monitoring and communication module is a layer L1 lighting device and communicates through a network with L1 layer computers and data is processed and communicated with the higher layer networks computers in the hierarchical system to be discussed later with respect to . With respect to the simplified illustration shows a network link to from the monitoring and communication module . This link may be wireless although in the example it is a hard link such as a wire or optical network cable. Any suitable link may be used.

The monitoring and communication module may perform sensor responsive monitoring and related communications only. However for at least some system installations it may be desirable to add further functional elements on or near the fixture that operate in some manner via the monitoring and communication module . In the example of the additional elements include a local wireless transceiver such as a WiFi access point. The module provides connectivity for the WiFi local wireless data transceiver to the data network used by the module . In this way the lighting device may provide a hotspot for Internet access or the like in the vicinity of the lighting device . By providing modules and WiFi access points on various street lamps around a city or enterprise campus the city or campus can offer outdoor wireless Internet service e.g. as a public service and or for use by city or enterprise personnel.

The additional or ancillary devices provided in the vicinity of the light fixture may also include any of a wide range of devices that may be controlled via communications through the network and the monitoring and communication module of the lighting device . Just by way of one example such added equipment on one or more lighting devices may be used to provide information to people in the vicinity of the fixture . Messages could be provided via the WiFi access point to user data devices or by a Bluetooth transceiver not shown for example to equipment in passing vehicles.

In the illustrated example the additionally controlled equipment includes a visible message output device such as a video monitor or digital sign board represented generally by the video screen . The data network enables communications of commands and or data to the module to control information output via the video screen . The video screen for example may provide advertising or other information of general interest or as shown by way of example the screen may be used to provide a warning of danger or an announcement of instructions to the public in the vicinity of the lighting device .

The device may also offer audible information output and for that purpose the exemplary device also includes one or more loudspeakers . Much like for operation of the video screen the data network enables communications of commands and or data to the module to control information output via the one or more loudspeakers for any particular purpose deemed suitable by the service provider operator of a system that includes the intelligent lighting device .

Turing now to we next consider an example of an implementation of the monitoring and communication module . The module could be implemented using an MCU based architecture similar to that used in the example of . For purposes of an illustrative example for discussion here however shows an architecture for the module that is based on a microprocessor P and bus architecture similar to that of the example of . Hence elements shown in that are the same as elements shown in the example of use the same reference numerals and are discussed again here more briefly since the reader should be familiar with or able to refer back to the earlier discussion of such elements for additional information regarding such similar elements.

The monitoring and communication module includes a power supply circuit coupled to the AC mains like the supply circuit in the example of . As in the earlier examples the module may be driven by a battery or other power source for a particular application or an AC powered device may have or connect to a back up battery or the like to supply power for some period of time in the event of an interruption of power from the AC mains .

The power supply circuit provides appropriate power to drive the various elements on the control and communication board . The power supply circuit may be mounted on the board or a separate unit as shown.

The processing and communications elements on the control communication Ctrl. Comm. board include a microprocessor W which serves as the programmable central processing unit CPU of the module and the. The P is configured to communicate data via one or more standardized interface buses represented generally by the bus arrow . The monitoring and communication module also includes one or more storage devices which are accessible by the P via the bus . Although the module could include a hard disk drive or other type of disk drive type storage device in the example the device includes one or more memories such as ROM RAM flash memory or the like. In this example the memory or memories store executable programming for the P as well as data for processing by or resulting from processing of the P . Although not shown in this latest drawing for convenience the programming stored in the memory or memories include the operation system as well as the application programs AP for use with specific sensors.

The monitoring and communication module also includes a communication interface which is similar to the communication interfaces in the earlier examples in that the communication interface provides two way data communication via an external network such as a LAN. In the example of like that of the communication interface is of a type having a bus interface to enable the interface to communicate internally with the P via the bus .

In this example the monitoring and communication module also supports local wireless communication. As noted in the discussion of the specific example uses a WiFi type wireless access point transceiver for local wireless data communication with data devices in the vicinity of the intelligent lighting device . Hence the monitoring and communication module includes a second communication interface . The interface would be of a standard type configured for local communications with the particular type of device . In the example WiFi type example of these drawings the second communication interface would typically be an Ethernet type LAN interface. An Ethernet capable would provide a connection from the interface in the module to the WiFi type wireless access point . Like the interface the second communication interface is of a type having a bus interface to enable the interface to communicate internally with the P and or the interface or other elements of the board via the bus . For example under control of the P when executing programming from the memory or memories the interfaces and may provide two way data communications for devices utilizing the WiFi type wireless access point to access the Internet. The WiFi type wireless access point and the second communication interface may also enable data devices in the vicinity with appropriate access privileges to access the P e.g. to obtain monitoring data module operational information or the like and or to provide control commands and or new programming to the module .

As in the lighting devices in the earlier examples the lighting device includes external condition sensors connected to standardized couplings . In this case the couplings are part of the module and the sensors are attached to and supported together with the module . The couplings sensors could be mounted separately and connected to the module . The couplings provide physical connections electrical signal connections and any power connections that may be necessary to the external condition sensors . Physical and electrical connection aspects of each coupling will conform to relevant aspects of the applicable sensor coupling standard s . The electrical power and electrical signal communication from and or to the sensors in accordance with the electrical aspects of the applicable sensor coupling standard are provided by appropriate input output I O circuitry connected between the coupling and the bus as in the earlier example of . The external sensor I O circuitry includes a bus interface that enables the P to communicate with the respective I O interface circuit via the bus . The external sensor I O circuitry may be configured to provide the electrical interface for one two or more of the sensors via the associated coupling s .

Although not shown in this example the monitoring and communication module may include one or more sensors and associated couplings the same as or similar to the sensors and couplings for sensing one or more conditions that relate to operation of the light source. In such a case the communication module would also include source operation related sensor I O circuitry similar to circuitry in the example of . Although the module does not control the source operation of the fixture the information obtained by such additional sensing may be reported to the higher layer control computers as it may be useful in some system applications e.g. to report on how well or poorly particular light fixtures are operating.

As noted in the discussion of the intelligent lighting device may support communication with and or control of additional or ancillary devices provided in the vicinity of the light fixture . Although a wide range of such additional or ancillary devices may be provided for various applications of the device in the context of a particular service provided by the device of the specific example provided a video screen and loudspeakers for local information output. The monitoring and communication module of the device will include one or more drivers for communication with and or control of any additional devices included in or associated with device . Hence in this example monitoring and communication module includes one or more bus connected audio and or video A V drivers . Depending on the form standard of the link to the video screen and loudspeakers the module may use a single combined driver or two separate drivers. The A V driver s may be similar to drivers used in personal computers to drive an external monitor and speakers. Each driver is of a type having a bus interface to enable the interface to communicate internally with the P and or other elements of the board via the bus . For example the module may receive commands to provide audio and or video output as well as the desired information content in packetized form via the network. The P controls the driver s to cause the video screen and loudspeakers to provide outputs and the driver s convert the received content to appropriate format signals so that the content is output in a presentable form as audio and video via the video screen and loudspeakers .

The program memory for storing executable programming often is the memory on the control and communication board either within the MCU or coupled to the P via the bus in our three examples and . As outlined earlier the exemplary sensors include at least some circuitry for processing the output of the transducers included as part of the sensors. In such a sensor the circuitry receives the signal from the transducer s in the sensor and produces an output via the coupling that conforms to the signaling aspects of the sensor coupling standard e.g. as a standard analog level signal on one or more pins designated for an analog connection and or as appropriately formatted data on the pins designated for data outputs. The sensor circuitry may also receive standard control signals e.g. digital command signals over designated for data inputs to the sensor. Many implementations of such sensors will include a programmable processor and some sensor configurations may include memory. If included as part of the sensor the memory may contain the applications program AP for the relevant type of sensor. In such a case the CPU may directly access the program in the sensor memory or the application program AP may be uploaded from the sensor memory to the appropriate memory on the control and communication board.

The structure and operation of the intelligent lighting device including the module and fixture as outlined above were described by way of example only

The system is logically organized in a hierarchical manner represented by Layers L1 to L4 separated by dashed horizontal lines in the drawing . In this example the lowest layer L1 of the hierarchy is the layer formed by the intelligent lighting devices in this case light fixtures . The system also includes a hierarchical arrangement of two or more layers of control computers represented by various types of host server computers and user terminal computers in the upper three layers L2 to L4 in the example of .

At the lower level L1 a number of light fixtures are organized into each of several groups and a first layer or local control system computer communicates with some number of respective groups. In the simple system example of several light fixtures are logically organized as a first group G1A and another set of light fixtures are logically organized as a first group G2B. These two groups of light fixtures G1A G2A communicate with a local control server host type computer A and possibly a local user terminal type computer A in the L2 layer via a communication network represented by way of example by the local area network A. Similarly several light fixtures are logically organized as a group G1B and another set of light fixtures are logically organized as another group G2B. These two groups of light fixtures G1B G2B communicate with a local control server host type computer B and possibly a local user terminal type computer B in the L2 layer via a communication network represented by way of example by a second local area network B.

The techniques discussed here are applicable to a wide range of lighting applications systems configurations. For example in some sets of groups the light fixtures may be outdoor lights such as street lamps or parking lot type lighting devices. In a street lamp example groups of lighting devices might be those for one or some number of city blocks. For purposes of further discussion of the example of we will assume that the lighting devices are devices within one or more buildings of one or more enterprises. So for example the lighting devices in each of groups G1A and G2A could be the devices for lighting a particular floor or floors of a first building and the lighting devices in each of groups G1B and G2B could be the devices for lighting a particular floor or floors of another building. In such an enterprise building example the local host server computer A might serve as a building control system BCS A for the first building whereas the host server computer B might serve as a building control system BCS B for the second building although for other types of local organizations of the fixtures the L2 layer computers may be referred to by other designations such a local control systems or local computer systems. The terminals A B would communicate via the network A or B with the respective BCS A A or BCS B B although in some instances the terminals may also communicate through a network directly with the light fixtures in the respective building or the like.

Although public networks could be used in the building example the networks A B for communications between the intelligent lighting devices and the respective control computers A A B and B in each premises are implemented as local area networks LANs within respective buildings. Each LAN may be wired e.g. metallic or optical fiber wireless e.g. radio frequency or free space optical or a combination of such network technologies. For example one building may use a wired Ethernet network whereas another may use a wireless network such as a wireless Ethernet WiFi network. A wired network may utilize the lines that supply power to the light fixtures and or the computers or a wired local network may use separate optical or electrical network wiring. Of course different buildings or other groups of intelligent fixtures may use different types of LANs. In an outdoor example e.g. for implementing intelligent fixtures as street lights the fixtures may utilize power line communication technology cellular network transceivers or a wireless mesh communication network topology.

The BCS type computer may be implemented with any suitable computer platform capable of running desired programming for monitoring and control functions and handling the desired work traffic load expected for the number of intelligent light fixtures with which the particular system A or B will be working. Each enterprise or building may have one or more of the user terminals A B. The user terminal equipment may be implemented with any suitable processing device that can also offer a suitable user interface. The terminal A for example is shown as a desktop computer with a wired link into the first LAN A and the terminal B is shown as a touchscreen type tablet computer with a wireless link into the second LAN B. However other terminal types such as laptop computers notebook computers netbook computers and smartphones may serve as the user terminal computers of layer L2.

In the exemplary four tier hierarchy computers A B A and B are the first layer computers in exemplary layer L2 in communication with the light fixtures in layer L1. Depending on the number of lighting devices and installations locations thereof there may be control computers in one two or more higher layers. In our building installation example of there are any number of buildings with installed light fixtures and associated building control system BCS computers within a geographic area or region. The BCS computers and possibly the terminal devices in layer L2 communicate with a computer or computers in the higher layer s via a network. Hence in the example each building installation includes a gateway and or firewall GTWY FW A B enabling communications of the various elements devices connected to the LANs A B via a wide area network WAN . A GTWY FW provides the requisite communication interfacing and security enforcement for communications between the routers implementing the LAN and routers of the WAN . The WAN may be the public Internet or a private intranet operated by an enterprise or a service provider. As in the lower layer network communications the links between the LANs and the WAN may use any available practical wired or wireless technology or any commercially advantageous cost effective combination thereof.

The WAN enables the computers in layer L2 to communicate with computers implementing one or more higher layers L3 L4 etc. of the networked architecture of system . For example some number of BCS computer systems within a particular region or area may communicate with a regional or area control system ACS computer at the L3 level. In the illustrated example the computers BCS A and BCS B B communicate via the WAN with a computer system ACS A A. Although the lower layer elements are not shown for convenience in another area BCS computers would communicate via the WAN with a computer system ACS B B serving as the L3 control computer for the second region or area. As represented generally by the tablet computer layer L3 may also include control computers in the form of various user terminal devices of any of the types discussed earlier relative to devices A and B in layer L2. Depending on secure authorization policies a user of a terminal such as 25 may interact with either or both of the ACS computers in layer L3 via the WAN . Other regions may be served by L2 and L3 host server computer systems and or user terminal devices in a similar manner. Each of the computers in layer L3 may be coupled or linked to the network via any suitable wired or wireless technology.

In an example like that shown that encompasses a number of different areas or regions the area computers ACSs in layer L3 in turn communicate with one or more computers in a still higher layer L4 of the networked system hierarchy. The communications may utilize a different network or as illustrated the computers of layer L3 may communicate with the computer s of the higher layer L4 via the WAN . As the system expands to cover wider geographic areas and to work with larger numbers of lighting devices the system may be expanded to add further layers to the hierarchy either in between the exemplary layers or as still higher layers.

In the four tier example the L4 layer is the top logical layer. Hence the example includes a central control system CCS computer at that layer. Either in association with or as an alternative to the CCS the L4 layer may include a user terminal . Although shown as a desktop terminal the user terminal may be any appropriate type of computer device as discussed above with respect to terminal devices A B and in the L2 and L3 layers. Each of the computers in layer L4 may be coupled or linked to the network via any suitable wired or wireless technology.

Returning to the lower L1 layer in our example we will next consider the high level aspects of the intelligent light fixture with specific reference to elements shown within one of the fixtures in the group G2A.

As shown at a high level in each lighting device includes a light source a sensor coupling and a sensor for sensing at least one external condition not related directly to operations or communications of the light fixture. The networking and related monitoring and control operations discussed here can be utilized with any desired light source and different fixtures in the same or different buildings or outdoor locations can utilize different light sources to suit the needs of various lighting applications of the fixtures. Each light fixture may be configured with a single coupling and external condition sensor although the example in shows two such couplings and sensors in each fixture e.g. so that each fixture can sense two different external conditions or the same condition for example in different directions or locations around the fixture or to provide a combined reading and thereby improve overall accuracy .

A fixture may include one or more feedback sensors for sensing operational conditions such as source or circuit temperature light output intensity or one or more other characteristics of the light produced by the source which relate to operation of the fixture. Some or all of the fixtures may have light activation related sensors such as ON OFF switches room occupancy sensors ambient light sensors for controlling lighting in response to ambient light intensity and light dimmers. Feedback and light activation sensors are referred to collectively as internal sensors in that they sense aspects of and or user inputs to control the internal lighting operations of one or more of the fixtures. In the example the illustrative fixture in group G2A includes a coupling and at least one internal condition sensor .

Each of the light fixtures is configured to sense at least one external condition not related directly to operations or communications of the light fixture. As discussed more later each fixture also has an interface for communications with other system elements. The condition or conditions detected by sensors are external in that they relate to some aspect observable in the environment around and near the fixture other than those relating to the feedback normal lighting control and or communications of the fixture . Although more examples will be discussed later a few examples of conditions that may be detected via external sensing include ambient temperature humidity air pressure and wind speed in the surrounding environment images of nearby objects motion outside the fixture gases and other substances in the atmosphere and temperature and moisture on objects within some distance range of the fixture . As such some of the external conditions like air temp air quality and vibration relate to ambient conditions around or near the fixture itself whereas other external conditions like reflected or directed light or like an image or a video of a distant object relate to external remote conditions that exist at some distance from fixture.

A wide variety of sensor devices may be used to sense any one or more of these or other types of external conditions. For example the sensor may be an optical device for sensing one or more characteristics of light in the ultraviolet visible or infrared portions of the electromagnetic spectrum. Optical devices may be used for example for sensing direction of light and determining position of an object as described in U.S. Pat. Nos. 6 043 873 and 5 705 804 both by Ramer et al. Other examples of optical sensors include linear and two dimensional imaging devices.

By way of another example a lighting device may include a sensor in the form of a Micro Electro Mechanical System MEMS for sensing motion similar to gyroscopic devices used in smartphones and the like to sense orientation movement and direction. Here MEMS type sensors would sense magnitude and directions of vibrations of the fixtures due to external forces. Collective analysis for example might indicate an earthquake and the area and magnitude of the impact.

The external condition sensor coupling is configured to present a sensor connection interface standardized across at least some number of the lighting devices . The standardized connection interface is compatible with different types of external condition sensors . Each sensor is connected to the standardized connection interface of the sensor coupling . In this way one configuration of the coupling may be used with different types of sensors. Within any one fixture there may be one two or more couplings configured to the same standard as well as one two or more other couplings configured to one or more additional standards.

Each sensor is a device of one of the types compatible with the standardized interface provided through a standardized coupling . The location of each sensor enables sensing of a condition external to the respective lighting device although the condition is not directly related to operational performance of the respective lighting device. Each sensor is configured to output a signal responsive to the particular sensed external condition via the standardized connection interface of the associated sensor coupling .

Each lighting device in this case each fixture also includes processing and communications elements represented collectively in the high level functional block diagram of by the control communication Ctrl. Comm. board . These elements for example include a processor which is coupled to the sensor coupling s in the fixture for processing data responsive to the signal from each included external condition sensor . If internal sensing is provided the processor also is coupled to the sensor coupling s in the fixture for processing data responsive to the signal from each included internal condition sensor .

The elements on the control communication board also include a memory accessible to the processor which stores programming for execution by the processor and data for processing or that has been processed by the processor during program execution. For example the memory stores a program corresponding at least in part to each type of included external condition sensor . Execution of the program controls at least one function of the processor of the light fixture responsive to the external condition sensed by the sensor such as collection of data regarding sensed external condition s and related communications with at least one of the higher layer computers of the system .

Each light fixture also includes a communication interface accessible by the processor. The communication interface is configured to enable the processor to communicate information resulting from performance of the function of the processor controlled by the program responsive to the sensed condition through the communications network in the example through a LAN A or B.

In the exemplary four tier hierarchy computers A B A and B are first layer computers having communications interfaces enabling each of those computers to communicate through the communications networks A B with a different respective group of the fixture type lighting devices . In this way each first layer computer can receive information from the processors of its respective groups of lighting devices. At least one of the first layer computers in communication with each group of lighting devices is configured to process the received information to obtain resultant information.

In the exemplary four tier hierarchy any of the computers in layer L3 and or computers in layer L4 would be a second layer computer having a communications interface to communicate through the communications network WAN to receive the resultant information from first layer computers. The second layer computer is configured to initiate at least one action in response to processing of the resultant information received from the first layer computers.

Each of the various computers in the layers L2 to L4 will run programming to control respective operations thereof including operations for processing condition related data and or responsive communication and related actions. Although possibly somewhat different in each type of computerized device each will run an operating system OS and one or more applications programs APs related to the sensed condition communication and processing functions of the system . The OS of a particular type of computerized device will provide an application programming interface API to allow various application programs to run on the computerized device via the respective OS and in that way utilize the various resources and functions of the computerized device. For example the API in computerized devices at one or both the higher layers L3 and L4 of computers enables application programming for processing the condition related data and initiating the responsive action can be written to the standardized API. In this way it becomes possible for various parties to write application programs for the higher layer programs to respond to different types of conditions sensed by the lighting devices and support different functions desired by the parties that utilize the system .

The computer or computers in layer L4 that receive the processed information from the layer L3 computers can initiate one or more responsive actions. The actions may involve any one or more of a variety of reporting functions such as sending alerts to terminal devices of users who may need to know or respond generating periodic reports or the like. The action or actions also may involve generating lighting related commands to send back down through the system to cause one or more of the intelligent lighting devices to modify their operations and or to sending commands through the system to cause one or more of the intelligent lighting devices to collect and send and additional condition related information.

As outlined above the external condition monitoring collection of data obtained and processing of external condition data from lighting devices over a region or area of significant size admits of a wide range of possible applications for the data. The actions that may be initiated from the high level computer may be as wide ranging as the array of possible applications of the monitoring and data processing capabilities of the system . For example the high level computer s may generate maps or other forms of reports relating to conditions existing across the monitored region s . Where the sensed conditions include atmospheric conditions such as pollution a map might show the spread of a particular sensed pollutant allowing government personnel to identify the source track the spread and or initiate remedial actions. Weather related data collected at a multitude of street and highway lamps would provide much more granular information about weather conditions that is typically available from remote weather monitoring stations today. The maps or other reports generated at the higher level s of the system or portions or such information may be distributed through the network to terminal devices of users throughout the effected area including devices shown in the lower layers of the system . As another map example if sensing of position of objects near lighting devices or sensing vibration of the lighting devices is processed to determine the occurrence and magnitude of an earthquake a map might illustrate the relative magnitude of the quake throughout an area impacted by the quake.

To facilitate the data processing at least the computer s at layer L4 have access to information about the positions of the lighting devices to facilitate the relevant processing and related actions. Typically the position information is known in advance and maintained in a database. Maps of the area s or region s can be correlated with some or all of the position information. An alternative to the position database would be to include a position detection device such as a global satellite positioning GPS receiver and associated position calculation programming in the lighting devices. This later approach would allow for reporting of position changes e.g. in response to movement of the fixture if not permanently mounted and or if taken down and moved for some reason.

As another example of responsive action the action initiated in the high level computer may relate to further control of lighting operations of one or more of the lighting devices . For example in a situation where the sensed conditions indicate an emergency in a building the control action may involve sending commands back down through the system to selected lighting devices so as to initiate operations of any number of lighting devices in the effected building e.g. to help people to evacuate the building and or to help responders to find the source of the emergency condition.

As noted earlier another type of action initiated by the high level computer may involve generating commands to send back down through the system to cause one or more of the intelligent lighting devices to collect and send and additional condition related information. To help with damage assessment in the earthquake detection example these commands might cause lighting devices having image sensors to capture and send back images or videos for assessment.

The elements of the system may be owned and operated by one entity such an enterprise with multiple buildings distributed over a number of dispersed geographic regions. In a street light example a council of governments for a city and surrounding suburbs may jointly operate the light fixtures and computers to provide unified monitoring and response to one or more conditions in the regions served by the government entities in the council.

However some of the elements may be operated by different entities. In a building example for diverse building owners the monitoring service may be provided by an entity operating as a service bureau or provider. In this later case each building owner would own and operate the light fixtures and LAN in the respective building. The BCS computers and any terminals in layer L1 may be on the premises or remote and that equipment may be owner by the building owner or the service provider. However such L1 computers will be configured at least for the monitoring service by the entity that provides the monitoring service. The computer s at the higher levels would likely be owned and operated by the monitoring service provider although some may be owned and operated by other entities with whom the service provider has a cooperative agreement e.g. to a company or government entity that may agree to respond to conditions sensed on premises monitored by the equipment of the service provider.

The discussion here relates to monitoring of one or more conditions external to the lighting devices over a number of premises and or over a wide geographic area. The intelligence of the devices and the associated feedback sensing however allows for a wide range of control functions related to the lighting application as well. For example the same communication and computer resources can be used to monitor and control the lighting operations of the intelligent lighting devices. For example the fixtures may report conditions of the sources and fixture electronics to the control system computers and respond to commands from the control system computers to automatically adjust lighting operations. Condition reports generated by a high level computer can be used to advise appropriate personnel to service particular lighting devices e.g. to replace light source elements and or other device components when services is appropriate.

In several examples the intelligence and sensors are integrated with or attached to the fixture or other element that incorporates the light source. However or some installations there may be some separation between the fixture or other element that incorporates the light source and the electronic components that provide the intelligence and communication capabilities. Also in the examples the sensors are incorporated in the fixture or module that houses the electronic components that provide the intelligence and communication capabilities. However depending on the condition s to be sensed and or the particular installation the sensors and standardized couplings may be mounted somewhat separately and connected or otherwise coupled to the electronic components that provide the intelligence and communication capabilities.

The monitoring and communications elements may be applied to or combined with any type of light source. Hence the intelligent lighting devices may be any desirable type of indoor or outdoor lighting device signal lighting devices such as traffic lights lighted signage etc. A system like that of may include within the one system any number of these different types lighting devices. A system operated by a city or municipality for example might add intelligence to street lights of various types traffic lights and various types of indoor building lights in buildings used by the government. A system operated by a state or country might add intelligence to lights of the types mentioned with regard to the city in each city or town of the state or country as well as to highway lights and sign lighting along roads streets and highways between cities and towns in the jurisdiction. The broader the coverage the more varied the types of lighting devices that are likely to be included in the system.

A system run by a private enterprise either to monitor its own premises or to provide monitoring and the like as services to its customers might install intelligent lighting devices or add intelligent modules like that of for indoor and outdoor lighting applications as various types of lighting devices on private property. If such an enterprise sells the services to a government then the enterprise would install and operate a system like that described earlier for a city state or country. One service provider enterprise might also sell the services both to government and to private parties essentially resulting in an overall system that includes both government and private installations of the intelligent lighting devices and could combine data from all of the intelligent lighting devices.

It will be understood that the terms and expressions used herein have the ordinary meaning as is accorded to such terms and expressions with respect to their corresponding respective areas of inquiry and study except where specific meanings have otherwise been set forth herein. Relational terms such as first and second and the like may be used solely to distinguish one entity or action from another without necessarily requiring or implying any actual such relationship or order between such entities or actions. The terms comprises comprising includes including or any other variation thereof are intended to cover a non exclusive inclusion such that a process method article or apparatus that comprises a list of elements does not include only those elements but may include other elements not expressly listed or inherent to such process method article or apparatus. An element proceeded by a or an does not without further constraints preclude the existence of additional identical elements in the process method article or apparatus that comprises the element

Unless otherwise stated any and all measurements values ratings positions magnitudes sizes and other specifications that are set forth in this specification including in the claims that follow are approximate not exact. They are intended to have a reasonable range that is consistent with the functions to which they relate and with what is customary in the art to which they pertain.

While the foregoing has described what are considered to be the best mode and or other examples it is understood that various modifications may be made therein and that the subject matter disclosed herein may be implemented in various forms and examples and that the teachings may be applied in numerous applications only some of which have been described herein. It is intended by the following claims to claim any and all applications modifications and variations that fall within the true scope of the present teachings.

