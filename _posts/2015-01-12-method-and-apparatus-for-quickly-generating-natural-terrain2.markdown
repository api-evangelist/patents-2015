---

title: Method and apparatus for quickly generating natural terrain
abstract: A method and apparatus for quickly generating a natural appearing terrain image. The method according to an exemplary embodiment may include generating a new terrain image through a patch-based synthesis from one or more virtual noise-based terrain models and one or more realistic terrain models; and processing blending of a boundary between synthesized terrain images in the newly generated terrain image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09619936&OS=09619936&RS=09619936
owner: ELECTRONICS AND TELECOMMUNICATIONS RESEARCH INSTITUTE
number: 09619936
owner_city: Daejeon
owner_country: KR
publication_date: 20150112
---
This application claims the benefit under 35 U.S.C. 119 a of Korean Patent Application No. 10 2014 0031207 filed on Mar. 17 2014 in the Korean Intellectual Property Office the entire disclosure of which is incorporated herein by reference for all purposes.

The following description relates to a digital content production and graphics processing technology and more specifically to a technology of quickly generating natural appearance terrain images.

The space expressed in movies games and education content is increasing. However manually producing a large scale terrain images required in the content is not desirable because a production period becomes longer. In addition although a background of a content mostly requires a realistic expression possible in reality even in a virtual space the production period becomes longer for a more realistic background if it is produced manually which is also not desirable. Thus a method for reducing the production period and generating a terrain image of high quality with high reality is required.

To reduce a period required for the terrain generation a minimum manual production and an automated generation by a computer are required. The automated generation method may need to be designed to generate a natural appearance terrain image.

One method of the automated terrain image generation is a procedural terrain image generation technology. This technology is for generating a complex terrain image by repeatedly applying certain rules or methods. More specifically a noise based terrain image generation method such as a Perlin or fractal method is used. However while such a procedural terrain image generation method has an advantage in easily generating a terrain image with a minimum rule generation it has disadvantages in that there are difficulties in generating the terrain image in a direction a user intends to proceed and that the generated terrain image has high reality locally but is different from reality globally.

Another automated terrain image generation method is a technology using a digital elevation model hereinafter referred to as DEM . The DEM uses image data extracted from a contour an aerial photograph and a satellite image etc. and expresses an altitude of the given area. The DEM is extracted from a terrain image in the real world which is very realistic. However there is no DEM existing that expresses a virtual terrain image according to a user s exact needs or intentions. While as mentioned previously various methods of automating the terrain image generation and increasing the reality exist the methods have nonmutual advantages and disadvantages.

The following description relates to a method and apparatus for quickly generating a natural appearance terrain images.

In one general aspect a method of generating terrain images includes generating a new terrain image by using a patch based synthesis from one or more virtual noise based terrain models and one or more realistic terrain models and processing the generated terrain image by blending of a boundary between synthesized terrain images into a newly generated terrain image.

In another general aspect an apparatus of processing a terrain image includes a first database to store one or more virtual noise based terrain models a second database to store one or more realistic terrain models a terrain image synthesizer to select a noise based terrain model from the first database to select the realistic terrain model from the second database and to generate a new terrain image through a patch based synthesis from the selected terrain models and a blending processor to process blending of a boundary between synthesized terrain images in the newly generated terrain image.

Other features and aspects may be apparent from the following detailed description the drawings and the claims.

Throughout the drawings and the detailed description unless otherwise described the same drawing reference numerals will be understood to refer to the same elements features and structures. The relative size and depiction of these elements may be exaggerated for clarity illustration and convenience.

The following description is provided to assist the reader in gaining a comprehensive understanding of the methods apparatuses and or systems described herein. Accordingly various changes modifications and equivalents of the methods apparatuses and or systems described herein will be suggested to those of ordinary skill in the art. Also descriptions of well known functions and constructions may be omitted for increased clarity and conciseness.

Exemplary embodiments relate to a technology of generating a new terrain image by synthesizing multiple terrain images together such from as a noise based terrain model and a realistic terrain model etc. a technology of generating a natural appearing terrain image by blending an awkward area in an initial synthesized terrain image from combined models and a technology of shortening a processing speed by parallelizing processes of calculating and minimizing error in a process of generating a new terrain image.

Referring to an apparatus of processing a terrain image according to an exemplary embodiment can select a single or multiple terrain models from a noise based terrain model and a realistic terrain model and synthesizing the terrain image from the combined multiple terrain models as in step . Subsequently the apparatus finds a target area to be blended e.g. an awkward area at a boundary between where combined terrain models result in creating awkward intersections in the synthesized initial terrain image as in step . Then the apparatus blends the found awkward area as in step to thereby transform the awkward area of the initial terrain image and to generate the new terrain image as in step . Examples of the noise based terrain models and the realistic terrain models are described and depicted later with reference to the process of step of synthesizing an initial terrain image model are described and depicted later with reference to and the process of step of blending is described and depicted later with reference to .

Referring to a virtual noise based terrain model and a real terrain data model can be combined to generate a new terrain image with various characteristics where a user s intentions are reflected. The virtual noise based terrain model may be for example a Perlin or fractal terrain model. The real terrain model may be a digital elevation model hereinafter referred to as DEM however this combination is only an exemplary embodiment and is not limited thereto.

Referring to a user may select single or multiple terrain models from a database and subsequently use the selected terrain models to synthesize and generate a new terrain image. Here a terrain image where various expressions are possible is generated by using not only a virtual noise based terrain model but also using a realistic terrain data model to generate a terrain image with various characteristics where a user intention is reflected.

A method of generating a terrain image suggested in the present disclosure is to generate various terrain images by using data of an existing terrain model and the newly generated terrain image is required to adequately express characteristics of the existing terrain model. The data of the terrain model selected by the user may have different resolutions from each other and since a size of a newly generated terrain image may be greater than the terrain model selected by the user then characteristics of selected portions of the terrain model are required to be extracted with particularity. The present disclosure uses a patch based texture synthesis method as a method of generating textures with a low resolution to a high resolution so as to accurately extract the characteristics from the terrain model.

The patch based texture synthesis is a method of selecting a predetermined patch size from the original generated image filling a new boundary area with a selected patch in which the selected patch is the most similar to the overlapping area around the new boundary area such that the applying the selected patch into the new boundary area results in a calculated minimum matching error and completes a new expanded image from the original image. Through the patch based texture synthesis a new expanded image may result in a higher resolution than the original image with a lower resolution. The new terrain image may also be generated by applying the above mentioned method to terrain images generated from combinations from various terrain models.

A basic unit of the patch size may be rectangular. However the rectangular patch size is just one example and the basic patch size may be changed into various sizes such as triangular or linear forms. Each newly generated selected patch is also the most similar to the selected patch used to fill the previous new boundar area. That is the selected patch for the new boundary area to be patched is selected by calculating a minimum error from a plurality of potential patches with regard to the regularly overlapped area of newly generated boundary area with the already generated areas filled by the already generated and selected patches. Hereinafter a method of calculating a minimum error with reference to is described. min min Formula 1 

As in Formula 1 an m indicates a patch number an n indicates an image number and an I indicates an image. A new image area Ie that has a minimum error indicates an image min Ie Ie . . . Ie with a minimum error from among the first image area Iewith a minimum error to the n th image area Iewith a minimum error. Here the n th image Iewith the minimum error indicates a patch error minimum Ie Ie . . . Ie from among a newly generated first terrain patch Ieto a newly generated m th terrain patch Ie. The newly generated m th terrain patch Ieindicates a patch p Ip that is a difference between a terrain patch p to be newly generated and the m th terrain patch Ipof the original terrain. By selecting patches that are the most similar to selected patches that fill in the previous boundary areas through the above mentioned process and arranging the selected patches next to each other a final terrain image may be generated from the original generated terrain image. Here the generated final terrain image may also have a higher resolution as compared to the original generated terrain image.

As above mentioned the new terrain image may be generated from data from various combinations of existing terrain models. The newly generated terrain image has various characteristics of the existing terrain models. In addition a high resolution terrain image may be generated from a low resolution terrain model.

There may be awkward parts in an original generated terrain image at interfaces or boundaries that correspond to where different terrain models that have different characteristics are used together to generate terrain images. To get rid of these awkward or unnatural appearing parts in the original generated terrain image an apparatus of processing the original generated terrain image according to an exemplary embodiment uses a method of finding which uses rapidly changing curvature to identify and find the awkward or unnatural part as a found target area. The found target area in the original generated terrain image can be processed by blending of the found area to surrounding areas. The curvature is where a variation of the surrounding area is expressed numerically and is used for finding a part of the original generated terrain image that rapidly changes. Then the rapidly changing curvature part is smoothed with a soft terrain model by applying smoothing with regard to the found target area.

If simple smoothing is applied a detailed figure in the original generated terrain image may disappear. Thus an apparatus of processing an original generated terrain image according to an exemplary embodiment may generate a natural appearing terrain image by allocating a value of the curvature as a weight in the smoothing process.

Specifically illustrates a new terrain image generated by synthesizing together various terrain images and and illustrates a new terrain image generated by synthesizing together various terrain images and . Here a patch based terrain generating technology with regard to various forms of a terrain models is applied and a desired terrain image may be generated from an area determined by the user.

To generate a new terrain image multiple smoothing is required to be applied and after the smoothing has been applied curvature smoothing of awkward parts is required to be generated again. For performing curvature smoothing and smoothing once for example it may takes more than 15 seconds for an image with a 1024 1024 resolution to be processed. To solve this an apparatus of processing a generated terrain image according to an exemplary embodiment improves its processing speed by using Compute Unified Device Architecture CUDA . In this case it has been checked that the time required for performing the smoothing and performing curvature smoothing of the awkward parts is shortened to less than 900 ms. In an exemplary embodiment the apparatus of processing a terrain image applies a parallelization method using a CUDA process of calculating a minimum error to generate a patch based new terrain image.

An apparatus of processing an original generated terrain image according to an exemplary embodiment processes the original generated terrain image in parallel through a plurality of GPUs. Generally CPU core is expensive. Thus if the number of cores increases to improve a computation speed a unit price increases. Accordingly an apparatus of processing an original generated terrain image according to an exemplary embodiment adopts a method of increasing the number of cores for the computation of GPU. A lot of tasks may be processed simultaneously by generating many threads by using CUDA which is a parallel processing Application Programming Interface API that controls these cores.

In illustrates a comparison between processing by CPU and by GPU in a table and it is assumed that a newly generated terrain resolution is 1024 1024 and that a patch size unit is 60 60. A processing speed is shortened more than seven fold for a single terrain image and more than nine times faster in multiple terrain images.

Referring to an apparatus of processing a generated terrain image according to an exemplary embodiment includes a first database a second database a terrain image processor an input and an output . The terrain image processor includes a terrain image synthesizer and a blending processor .

The first database stores at least one virtual noise based terrain model. The second database stores at least one realistic terrain model. In the first database and the second database are limited to be located in internal memory of the apparatus and however may be located in an external server. In addition in the virtual noise based terrain model and the realistic terrain model are divided in the first database and the second database but may be stored in the same space.

The terrain image synthesizer selects the noise based terrain model from the first database and the realistic terrain model from the second database and generates a new terrain image from the selected terrain model. For a selection of the model the input may receive selection input of the noise based terrain model and the realistic terrain model from the user.

In an exemplary embodiment the terrain image synthesizer generates a new generated terrain image through a patch based synthesis from an original terrain image by targeting each terrain model. Here the terrain image synthesizer calculates a minimum error of an overlapped area between an already generated terrain patch area to be newly generated terrain patch area from the original terrain image. The terrain image synthesizer arranges the already generated selected terrain patches that correspond to minimum errors in order to complete a new terrain image. The terrain image synthesizer may generate a high resolution new terrain image from the low resolution original terrain image by using a patch based synthesis technique.

The blending processor processes a boundary part between the synthesized terrain images in the new terrain image generated by the terrain image synthesizer . In an exemplary embodiment the blending processor may include an area finder and a smoothing processor and further include a weight allocator .

The area finder finds and calculates a curvature numerically expressing a variation of the surrounding area by targeting a boundary area between the terrain images in the new terrain image generated by the terrain image synthesizer and finds a rapidly changing part. Then the smoothing processor applies the smoothing to the found area associated with the rapidly changing part. In an exemplary embodiment the area finder parallelizes the curvature calculation to accelerate the processing speed. The area finder may use CUDA as a method for the parallel processing. The weight allocator allocates a value of the curvature as weight factor in applying the smoothing.

The output displays the noise based terrain model and the realistic terrain model on a screen for a user selection through the input . Then the output displays a newly generated terrain image on the screen which is generated by the terrain synthesizer and the blending processor . In addition the output may on the screen display the terrain image that is in the synthesizing process.

In an exemplary embodiment a method and apparatus for quickly generating a natural appearing terrain image may generate a new terrain image by using various terrain characteristics from a virtual noise based terrain model and a realistic terrain model and may generate a new terrain image having a high resolution suitable for a user s intention by using a patch based texture synthesis method to thereby increase the accuracy. Moreover the method and apparatus may generate a natural terrain image by using a blending process that uses a curvature to identify and to remove an awkward part between the synthesized dissimilar terrain images.

Furthermore the method and apparatus may generate the new terrain image quickly. In other words the method and apparatus process in parallel a curvature calculation etc. that requires a calculation quantity to thereby reduce the processing time consumed for the calculation so that a new terrain image may be generated quickly.

While this invention has been particularly shown and described with reference to preferred embodiments thereof it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined by the appended claims. The preferred embodiments should be considered in descriptive sense only and not for purposes of limitation. Therefore the scope of the invention is defined not by the detailed description of the invention but by the appended claims and all differences within the scope will be construed as being included in the present invention.

