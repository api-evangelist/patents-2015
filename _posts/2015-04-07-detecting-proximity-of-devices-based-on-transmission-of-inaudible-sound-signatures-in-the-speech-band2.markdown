---

title: Detecting proximity of devices based on transmission of inaudible sound signatures in the speech band
abstract: A communication device detects sound with a microphone to produce a sound signal representative of the sound and searches the sound signal for unique inaudible sound signatures associated with a group identifier. Each sound signature identifies a respective communication device. Each sound signature is in an audible frequency band but masked to be imperceptible. If any of the sound signatures are determined to be present in the sound signal, the communication device selects one based on predetermined criteria associated with the group identifier.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09591148&OS=09591148&RS=09591148
owner: Cisco Technology, Inc.
number: 09591148
owner_city: San Jose
owner_country: US
publication_date: 20150407
---
The proximity of various communication devices that transmit energy to a reference communication device that receives that energy may be detected at the reference communication device based on the received energy. The reference communication device may receive radio frequency RF signals ultrasound signals and sound signals that are perceptible to human hearing such as voice signals from the other communication devices. The reference communication device typically includes application modules that subject the received energy to signal processing such as RF demodulation echo cancellation and voice recognition that renders the received energy in whatever form unavailable unsuitable or not easily accessible for use in proximity detection algorithms. The received energy may not readily convert to physical proximity. Moreover the application modules may be inaccessible or otherwise difficult to modify so as to incorporate the proximity detection algorithms. In such environments proximity detection may only be implemented as a complex work around of or an add on to existing signal processing application modules and can therefore be expensive and less effective than desired.

A communication device detects sound with a microphone to produce a sound signal representative of the sound. The communication device searches the sound signal for unique inaudible sound signatures associated with a group identifier. Each sound signature identifies and is assumed to be transmitted by a respective communication device among a group of communication devices also associated with the group identifier. Each sound signature is in an audible frequency band of human hearing but masked to be imperceptible to human hearing. If any of the sound signatures are determined to be present in the sound signal the communication device selects a sound signature determined to be present in the sound signal based on predetermined criteria associated with the group identifier.

With reference to there is depicted a block diagram of a proximity detection system in which techniques to detect the proximity of communication devices relative to a reference communication device may be implemented according to an example embodiment. System includes a group of communication devices each connected to or able to connect to a communication network which may include one or more wide area networks WANs such as the Internet one or more local area networks LANs and one or more cellular networks. System may also include a central controller to configure and control the group of communication devices and other groups of communication devices not shown in . Communication devices may include but are not limited to devices configured to provide audio and or video connections with each other via network . For example communication devices may include tablet computers personal computers laptop computers and mobile phones such as smartphones and video conference endpoints. Only 4 communication devices are depicted in but more or less communication devices may be used in other examples.

In the example of communication devices include loudspeakers to transmit sound energy and communication device the reference communication device includes a microphone to detect the sound energy transmitted by those of communication devices i.e. the other communication devices that are within an acoustic range of reference communication device i.e. are proximate the reference communication device . According to embodiments presented herein and described below reference communication device processes sound detected by its microphone to detect unique inaudible sound signatures therein and that are indicative of which of communication devices are transmitting those sound signatures in proximity to the reference communication device.

With reference to there is a flowchart of a method of detecting at reference communication device which of the other communication devices are proximate to the reference communication device based on inaudible sound signatures transmitted from the other communication devices.

At controller connects with and configures the group of communication devices via communication network . Controller configures each communication device CD in the group with a unique inaudible sound signature that is embedded in an audible sound identifier for that CD. The audible sound identifiers the unique inaudible sound signatures embedded in the audible sound identifiers and the CDs are associated with a unique group identifier ID which is common across the CDs. Other groups of CDs and their respective audible sound identifiers and inaudible sound signatures are associated with other unique group IDs.

The audible sound identifier configured on each CD e.g. a ringtone announcement or other audible sound identifier has a frequency spectrum within an audible frequency band of human hearing and is perceptible to human hearing when played by transmitted from a loudspeaker of the CD. The unique inaudible sound signature embedded in the audible sound identifier also has a frequency spectrum in the audible frequency band of human hearing but is masked to be imperceptible to human hearing when played by transmitted from the loudspeaker of the CD along with the audible sound identifier. The inaudible sound signature is not recognized as speech or voice in a conventional speech voice detector. The inaudible sound signature may be sound masked to be inaudible imperceptible to human hearing using any known or hereafter developed sound masking technique for example the sound signature may be temporally masked or spectrally masked as would be appreciated by one of ordinary skill in the relevant arts having read the present description. In some embodiments the embedded inaudible sound signature may be an inaudible sound watermark embedded in the audible sound identifier such that the audible sound identifier is considered an inaudibly watermarked audible sound identifier.

At controller also configures reference CD also referred to herein as a particular one of CDs with all of the unique inaudible sound signatures and audible sound identifiers configured on CDs a CD identity identifier of each of CDs associated with each unique inaudible sound signature the group ID and predetermined CD selection criteria described below . Since each unique inaudible sound signature is associated with i.e. mapped to a corresponding one of the CD identifiers the sound signature itself once detected becomes an identifier of a CD i.e. the detected sound signature identifies the CD that transmitted the sound signature. The predetermined selection criteria may be a list of CD priorities form low to high each assigned to a corresponding one of CDs .

At a trigger is received at each of the CDs . The trigger may be a call announcement for an incoming audio or video call to CDs that contains the group ID. The trigger may also be a periodic timer event e.g. timer timeout in each of CDs as used in a normally silent embodiment described below. Responsive to the trigger each of CDs transmits from a local loudspeaker of the CD the audible sound identifier and unique inaudible sound signature embedded in the audible sound identifier that is configured on the CD.

At also responsive to the trigger reference CD i.e. the particular one of CDs detects sound with a local microphone to produce a sound signal i.e. the microphone transduces sound into the sound signal the transduced sound . Reference CD searches the sound signal for any unique inaudible sound signature associated with the group ID. To do this in one embodiment CD correlates the sound signal with each of the unique inaudible sound signature associated with the group ID that were configured on CD to produce correlation amplitudes measured amplitudes that the CD stores in its local memory. CD searches the correlation amplitudes for any correlation amplitude peaks above a threshold indicative of the presence of a unique inaudible sound signature in the sound signal and declares the sound signature present if the corresponding correlation peak exceeds the threshold. Any known or hereafter developed technique to correlate the preconfigured unique inaudible sound signatures with the sound signal may be used as would be appreciated by one of ordinary sill in the relevant arts.

At if any of the unique inaudible sound signatures are determined to be present i.e. are detected in the sound signal CD selects one of the detected unique inaudible sound signatures i.e. one of the sound signatures determined to be present . If multiple sound signatures are detected CD may select the detected sound signature based on one or more predetermined criteria. For example CD may select the detected sound signature associated with the highest measured amplitude among the measured amplitudes of sound signatures declared to be present. In another example CD may select the sound signature associated with i.e. that identifies the CD having the highest priority. In yet another example CD may select the detected sound signature based on both the amplitudes and priorities of the detected sound signatures. In an even further example CD may present a user of the CD with the ability to select any of the sound signatures of the group of CDs whether detected or not. If only one sound signature is detected CD may select that sound signature. If no sound signature is detected CD may select itself.

In an optional operation CD transmits a message indicating the selected unique sound signature the identity of the CD associated with that sound signature or both to network . In one embodiment the message may be transmitted wirelessly as a radio frequency RF signal to network . In another embodiment CD may transmit the message to network through a wired connection with the network. The transmission of this message directly or indirectly causes the CD associated with the selected unique inaudible sound signature to perform an action such as answer an incoming call that was addressed to all of CDs as will be described further below.

In another normally silent embodiment the unique inaudible sound signatures configured on CDs are not embedded in audible sound identifiers. In other words the sound signatures are stand alone sound signatures. In this embodiment CDs transmit their respective unique inaudible sound signatures in the absence of accompanying audible sound. For example the unique inaudible sound signatures may be spread spectrum sound signatures similar to background noise that is imperceptible to human hearing. CDs may transmit their stand alone sound signatures periodically every 5 10 seconds for example responsive to a timer timeout mentioned above in connection with operation . The stand alone signatures are designed to present a noise level when transmitted from a loudspeaker that is lower than environmental background noise but at least high enough to be detected by the microphone and sound signal processing of reference CD which detects the stand alone sound signature . Thus CD may periodically search for any stand alone sound signatures in the sound signal from the microphone to detect which of CDs in the CD group are proximate CD .

With reference to there is a block diagram of a call system in which techniques described herein may be implemented to answer an incoming audio or video call on an appropriate CD proximate a reference CD among a group of CDs. System incorporates concepts and features described above in connection with . System includes CDs M and N N belonging to a group of CDs a central server C and call control server S that are able to communicate with each other over network . A user of system uses operates CDs M and N N and subscribes to call related services on central server C and call control server S.

In an example CD M may be a mobile phone corresponding to reference CD in while CDs N N may be video conference endpoints or portable computers corresponding to CDs . CDs M and N N are each able of answering engaging in and terminating audio or video calls. Also CDs N N are each able to play transmit respective unique inaudible sound signatures configured thereon through from their local loudspeakers and CD M includes a microphone to detect sound.

Central server C maintains a database of user accounts CDs associated with the user accounts audible sound identifiers associated with the CDs and unique inaudible sound signatures associated with the CDs. An example user account record stored in central server C is described below in connection with . Central server C may access the aforementioned information in the databases and transmit the information to any of CDs M and N N or call control server S via network .

Call control server S includes signaling applications that communicate with CDs M and N N over one or more real time media protocols such as the Session Initiation Protocol SIP or the H.323 standard from the ITU Telecommunication Standardization Sector ITU T to provide audio visual communication sessions on a packet network. Call control server also manages set up and tear down of audio or video calls with respect to CDs M and N N.

With reference to there is an illustration of a user account record stored in the database of central server C. User record includes a user account ID which may also serve as a group ID. Record includes a field that lists CDs M and N N in the group of CDs associated with user account ID group ID and Internet Protocol IP addresses corresponding to each of the CDs in the group. Record also includes audible sound identifiers e.g. ringtones e.g. in .WAV or other audio file formats unique inaudible sound signatures also in .WAV or other audio file formats and priorities associated with at least CDs N N. The database will include many records similar to record corresponding to the many users groups subscribed to services provided by system .

With reference to there is a message transaction diagram for configuring and operating call system according to proximity detection techniques presented herein.

At an a priori configuration operation central server C configures each of CDs N N in the group of CDs which also includes CD M with an audible ringtone having embedded therein a unique inaudible sound signature over network . Server C may also configure reference CD M with a ringtone. Server C may perform the configure operation responsive to a request by a user associated with CD M received over network . In an example using CD M the user sends a message to server C instructing the server to generate audible ringtones embedded with unique inaudible sound signatures for each of CDs N N. The audible ringtones may be the same ringtone i.e. common across all CDs N N but the sound signature embedded therein is unique for each of the CDs. Server C associates each audible ringtone and its unique inaudible sound signature with the one of CDs N N to be configured with that sound and then downloads that sound to that CD.

In an alternative embodiment in which one or more CDs are not equipped with software that allows central server C to directly configure them with ringtones embedded with unique inaudible signatures 3party devices the user may use an application hosted on C to embed an arbitrary ringtone with a unique inaudible sound signature. As part of that procedure the user will be asked which CD should that signature be associated with and C will write the association in its database. The user will then be able to download the watermarked ringtone from C and transfer it to the desired CD using its native interface for changing ringtones.

Server C also assigns priorities to CDs N N for example in a descending order of priority preference N N N N N . The priorities may be established in any number of ways with or without the involvement of various ones of servers C and S and CD M. In one example the priorities may be established responsive to user requests submitted to server C via CD M or via a web browser hosted on a personal computer and so on. Server C keeps in its database the priorities the association of unique inaudible sound signatures with specific CDs and the group ID associated with the group of CDs M and N N to CD M.

At call control server S receives an incoming call identifying a destination telephone number that is common across the group of CDs M and N N i.e. common to the group ID associated with the group of CDs M and N N. The incoming call may identify the CD group or the telephone number may be mapped to the group ID in central server C which is accessible to call control server S. Call control server S may request certain information related to the group of CDs M and N N from central server C e.g. IP addresses the associated group ID and the like.

At call control server S sends a call announcement to each of CDs M and N N in the group to announce the call and identify the group i.e. the call announcement includes the group ID or information from which the group ID may be derived .

At responsive to the call announcement each of CDs N N plays the audible ringtone and embedded inaudible sound signature from its local loudspeaker. In one embodiment of call system all CDs N N play or are instructed to play their respective ringtones and embedded inaudible sound signatures substantially concurrently. In another embodiment CDs N N play or are instructed to play their respective ringtones and embedded inaudible sound signatures one at a time e.g. sequentially so that the individual sound signatures do not interfere with each other and are thus more easily detected decoded. There are different ways to control CDs N N to play their respective ringtones and embedded sound signatures one at a time as would be appreciated by one of ordinary skill in the relevant arts.

At responsive to the call announcement CD M generates an alert to announce the call which may include playing a ringtone or displaying a call indicator. Also CD M listens for sound transmitted from nearby CDs i.e. from sound transmitted by CDs N N within acoustic range of CD M. To do this CD M detects sounds with its local microphone to produce a sound signal and searches the sound signal for unique inaudible sound signatures embedded in audible ringtones. In the example of CD M detects unique inaudible sound signatures only for proximate CDs N and N. CD M may display a list of the CDs N and N associated with the detected signatures. Since more than one of CDs N N was detected by CD M CD M may select one of the detected CDs e.g. N or N to answer the incoming call in any number of ways.

In one embodiment to select one of the detected CDs CD M consults the assigned priorities for CDs N N and because CD N has a higher priority than CD N selects higher priority CD N to answer the incoming call. In another embodiment to select one of the detected CDs CD M i prioritizes the detected CDs according to amplitude measurements associated with the detected sound signatures identifying the detected CDs such that a higher amplitude has a higher priority than a lower amplitude and ii selects the detected CD based on the prioritized amplitudes e.g. CD M selects the detected CD associated with a highest amplitude . In yet another embodiment to select one of the detected CDs CD M selects the detected CD based on both amplitude and assigned priorities. For example CD M may first sort a list of the detected CDs sound signatures based on measured amplitudes associated with the detected sound signatures and then sort that list based on assigned priorities. The above described selection may be made automatically by CD M. In another embodiment CD M may display a list of all CDs in the group e.g. all of CDs N N any of which may be selected by a user to answer the incoming call. Such a list may indicate i the CDs detected in the vicinity or M e.g. N and N may be highlighted on the list to indicate their detected proximity and ii the priorities associated with all of the CDs on the list which may be based on amplitude and or assigned priority . The CD may provide the user with the ability to manually select any of the listed CDs the CDs in the group to answer the call including CDs that were not detected in the vicinity of CD M. In addition the user may select CD M itself to answer the call or may elect not to answer the call at all.

At CD M sends a message to call control server S identifying the detected unique sound signature for whichever CD was selected to answer the incoming call at along with the CD ID for that CD. For example if CD N was selected to answer the call CD M sends a message to call control server S identifying the detected unique sound signature for CD N along with the CD ID for CD N.

At responsive to the message from CD M call control server S directs the selected CD to answer the incoming call and cancels all other legs of the call. For example assuming that CD N was selected to answer the incoming call call control server S directs CD N to answer the call and cancels the legs of the call to CDs M N N and N.

If at CD M had not detected any of CDs N N as being in the vicinity of CD M CD M may answer the call itself.

With reference to there is a block diagram of an example CD representative of any of CDs M and N N. There are numerous possible configurations for CD and is meant to be an example. Examples of CD include a tablet computer a personal computer a laptop computer a mobile phone such as a smartphone or a video conference endpoint. CD may include a display a loudspeaker a microphone one or more network interface units NIUs and memory each coupled to a processor . The one or more NIUs may include wired and or wireless connection capability that allows processor to communicate over communication network . For example NIUs may include an Ethernet card to communicate over an Ethernet connection a wireless RF transceiver to communicate wirelessly with cellular networks in network optical transceivers and the like as would be appreciated by one or ordinary skill in the relevant arts.

Processor may include a collection of microcontrollers and or microprocessors for example each configured to execute respective software instructions stored in the memory . The collection of microcontrollers may include for example a video controller to receive send and process video signals or images related to display an audio processor to receive send transmit and process audio sound signals related to loudspeaker and microphone as described herein and a high level controller to provide overall control. Portions of memory and the instructions therein may be integrated with processor . As used herein the terms audio and sound are synonymous and interchangeable.

The memory may comprise read only memory ROM random access memory RAM magnetic disk storage media devices optical storage media devices flash memory devices electrical optical or other physical tangible e.g. non transitory memory storage devices. Thus in general the memory may comprise one or more computer readable storage media e.g. a memory device encoded with software comprising computer executable instructions and when the software is executed by the processor it is operable to perform the operations described herein. For example the memory stores or is encoded with instructions for control logic to perform operations described herein to i cause CD to transmit an audible sound identifier and a unique inaudible sound signature from loudspeaker when appropriate and or ii perform proximity detection i.e. detect unique inaudible sound signatures in a sound signal detected by microphone .

In addition memory stores data information used and generated by logic including but not limited to one or more unique inaudible sound signatures measured sound amplitudes of detected sound one or more CD group IDs CD priorities associated with the group IDs and various IP addresses of other CDs call control servers and central servers.

With reference to there is a block diagram of an example computer system representative of central server C and call control server S. Computer system includes an NIU similar to NIU described above to connect with network and a memory each connected to a processor . Processor may include a collection of microcontrollers and or microprocessors for example each configured to execute respective software instructions stored in the memory . The memory is similar to memory described above. The memory may comprise one or more computer readable storage media e.g. a memory device encoded with software comprising computer executable instructions and when the software is executed by the processor it is operable to perform the operations described herein. For example the memory stores or is encoded with instructions for control logic to perform operations described herein with respect to central server C and call control server S.

In addition memory stores data information used and generated by logic . In the case of central server C data includes the user account database described above in connection with . In the case of call control server S data includes information used to establish and tear down calls across network .

In summary embodiments presented herein optimize audio and video call control through proximity detection based on identification of sound in the frequency range of human hearing that is rendered auditorily imperceptible to casual listeners. Identification information is embedded in the audible sounds emitted by communication devices such as media endpoints so that the standard sound application programming interfaces APIs of both transmitting and detecting endpoint devices may be employed for both identification and proximity detection. In some embodiments the identification information is embedded as a sound signature in the audio normally being output by the devices such as when ringing alerting or embedded in audio output not normally emitted by these devices such as low level noise for use in proximity detection. As a result these techniques have several advantages. They negate the need to use ultrasound for proximity detection thus avoiding a number of problems associated with ultrasound such as the inability of some devices to detect or transmit it or even receive it in the normal audio input stream using e.g. the Real Time Transport Protocol RTP . Instead sound that normally falls within the frequency range of human hearing is masked to be auditorily imperceptible and unobtrusive to human users. Further still the full echo noise control capabilities of the manufacturer supplied APIs are maintained. Finally these techniques allow for detection of proximity to third party devices or any device that cannot be configured to emit any custom sound or ultrasound except a ringtone.

In summary in one form a method is provided comprising detecting sound with a microphone of the communication device to produce a sound signal representative of the sound searching the sound signal for unique inaudible sound signatures associated with a group identifier each sound signature identifying and assumed to be transmitted by a respective other communication device among a group of communication devices also associated with the group identifier each sound signature being in an audible frequency band of human hearing but masked to be imperceptible to human hearing and if any of the sound signatures are determined to be present in the sound signal selecting a sound signature determined to be present in the sound signal based on predetermined criteria associated with the group identifier.

In another form an apparatus is provided comprising a microphone configured to convert detected sound into a sound signal a transceiver configured to communicate with a communication network and a processor coupled to the microphone and the transmitter and configured to search the sound signal for unique inaudible sound signatures associated with a group identifier each sound signature identifying and assumed to be transmitted by a respective communication device among a group of communication devices also associated with the group identifier each sound signature being in an audible frequency band of the human ear but masked to be imperceptible to the human ear and if any of the sound signatures are determined to be present in the sound signal select a found sound signature determined to be present in the sound signal based on predetermined criteria associated with the group identifier.

In yet another form another method is provided comprising configuring each communication device of a group of devices to play an audible ringtone having embedded therein a unique sound signature identifying the communication device each sound signature being in an audible frequency band of human hearing but masked to be imperceptible to human hearing receiving an incoming audio or video call directed to the group sending a call announcement to all of the communication devices in the group responsive to the call announcement at each communication device playing the ringtone configured thereon to announce the incoming call at a particular communication device in the group listening for ringtones and if any ringtones are detected searching the detected ringtones for the embedded sound signatures and if any of the sound signatures are detected at the particular communication device selecting one of the sound signatures that are detected and which identifies the communication device that is to answer the incoming call.

The above description is intended by way of example only. Various modifications and structural changes may be made therein without departing from the scope of the concepts described herein and within the scope and range of equivalents of the claims.

