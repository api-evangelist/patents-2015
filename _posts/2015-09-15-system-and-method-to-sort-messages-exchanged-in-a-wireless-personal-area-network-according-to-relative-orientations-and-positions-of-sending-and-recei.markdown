---

title: System and method to sort messages exchanged in a wireless personal area network according to relative orientations and positions of sending and receiving devices
abstract: Apparatus and methods are described herein for sorting messages sent and received, for example in a wireless Personal Area Network (PAN), according to whether the receiving device is within a radially defined region of space. The space may be defined by one or more parameters set by the sending device. A wireless PAN may define the range of peer-to-peer transmission and reception of radio waves between at least two wireless devices. Location and orientation information may be transmitted by a communication device and combined with user and/or software defined boundary limits to filter short range wireless messages.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09485343&OS=09485343&RS=09485343
owner: ZOKU, INC.
number: 09485343
owner_city: Sausalito
owner_country: US
publication_date: 20150915
---
This application is a continuation application claiming benefit of U.S. patent application Ser. No. 14 093 992 filed with the United States Patent and Trademark Office on Dec. 2 2013 which claims priority under 35 U.S.C. 119 e to U.S. Provisional Patent Application No. 61 732 297 filed Dec. 1 2012 titled A SYSTEM AND METHOD TO SORT MESSAGES EXCHANGED IN A WIRELESS PERSONAL AREA NETWORK ACCORDING TO THE RELATIVE ORIENTATIONS AND POSITIONS OF THE SENDING AND RECEIVING DEVICES. The disclosure of the foregoing patent applications are hereby expressly incorporated herein by reference in their entirety.

The present disclosure relates generally to wireless communication and more particularly to peer to peer wireless communication.

Wireless mobile device protocols currently allow two or more devices to communicate in a peer to peer fashion within a short range. In order to target which device to receive a message current systems use identification protocols simultaneous accelerometer events distances between devices and the like. However such techniques do not allow a user to target their communication and or other transmissions to particular devices.

A method for targeted transmission of a communication is described herein. The method may include receiving an event to initiate transmission of a communication determining one or more spread angles and one or more transmission range constants determining current orientation of the communication device based on one or more parameters supplied by onboard location and orientation determining components and transmitting the determined spread angles transmission range constants and orientation data along with the communication to one or more devices within range of an internal radio.

In accordance with some aspects of the disclosure the one or more spread angles may comprise a maximum horizontal spread angle and a maximum vertical spread angle wherein the maximum horizontal spread angle includes a fixed angle set by a user or an application.

In accordance with some aspects of the disclosure the one or more transmission range constants may comprise a first constant representing a minimum distance from a transmitting device and a second constant representing a maximum distance from the transmitting device.

In accordance with some aspects of the disclosure the one or more parameters may comprise at least one of GPS coordinates gyro readings magnetometer readings and accelerometer readings.

A method for receiving and processing a communication is also described herein. The method may include receiving at a receiving device a data transmission the data transmission comprising a message and a plurality of parameters associated with a transmitting device determining a current GPS location of the receiving device and a current time upon receipt of the data transmission computing one or more directional vectors and angles defining a path from the transmitting device to the receiving device and determining based on the directional vectors a classification for the message.

In accordance with some aspects of the disclosure the plurality of parameters may comprise one or more of the following one or more spread angles one or more transmission range constants a GPS location of the transmitting device magnetometer values of the transmitting device gyro readings of the transmitting device and accelerometer readings of the transmitting device.

In accordance with some aspects of the disclosure the one or more spread angles may comprise a maximum horizontal spread angle and a maximum vertical spread angle and the one or more transmission range constants comprises a minimum distance from the transmitting device and a maximum distance from the transmitting device.

According to some aspects of the disclosure computing the one or more directional vectors and angles may include determining a bearing vector between the transmitting device and the receiving device determining projection vectors associated with the bearing vector and determining angles between the projection vectors.

According to some aspects of the disclosure determining a classification for the message may include determining whether the length of the bearing vector and the angles between the projection vectors are within a range defined by the one or more spread angles and the one or more transmission range constants and classifying the message into categories based on whether the bearing vector and the angles between the projection vectors are within the range or outside of the range.

A method for targeted communication of a message from a communication device to a receiving device is also described herein. The method may include receiving an event to initiate transmission of the message from the communication device to the receiving device determining a spread angle and a transmission range constant for the communication device determining current orientation of the communication device based on a status parameter generating orientation data based on the determined current orientation of the communication device and transmitting the message the determined spread angle the transmission range constant and the orientation data to the receiving device.

In accordance with aspects of the disclosure the spread angle may comprise a maximum horizontal spread angle or a maximum vertical spread angle. According to some aspects of the disclosure the maximum horizontal spread angle may include a fixed angle set by a user or an application.

According to some aspects of the disclosure the transmission range constant may comprise a first constant representing a minimum distance from a transmitting device or a second constant representing a maximum distance from the transmitting device.

According to some aspects of the disclosure the status parameter may include at least one of a GPS coordinate a gyro reading a magnetometer reading and an accelerometer reading.

According to some aspects of the disclosure the status parameter may include at least one of time data gyro data accelerometer data magnetometer data local declination angle data and GPS data.

According to some aspects of the disclosure the method may further comprise computing a directional vector and angles from the communication device to the receiving device.

According to some aspects of the disclosure the method may further comprise determining a bearing vector between the communication device and the receiving device determining a first pair of projection vectors associated with the bearing vector and determining a first spread angle between the first pair of projection vectors.

According to some aspects of the disclosure the method may further comprise determining a second pair of projection vectors associated with the bearing vector and determining a second spread angle between the second pair of projection vectors.

According to some aspects of the disclosure the first and second pairs of projection vectors may define a target volume where the receiving device is to be located to receive the message.

Referring now to the drawings in general it will be understood that the illustrations are for the purpose of describing aspects of the disclosure and are not intended to limit the invention thereto.

The present disclosure is directed to apparatus and methods for sorting messages sent and received for example in a wireless Personal Area Network PAN according to whether the receiving device is within a radially defined region of space. The space may be defined by one or more parameters set by the sending device. Sorting may allow for applications such as spatially directed and targeted wireless communication without the use of directional radio antennae. A wireless PAN may define the range of peer to peer transmission and reception of radio waves between at least two wireless devices. As described in detail herein location and orientation information may be transmitted by a communication device and combined with user and or software defined boundary limits to filter short range wireless messages. The message may include an SMS text message a voice message an email message an instruction data or any other information or control signal.

While not shown in a fixed local coordinate system x y z may also be defined wherein the y axis is parallel to the direction of Magnetic North the x axis is fixed in the direction of magnetic east and the z axis is parallel to the ray passing from the center of the earth and locally parallel to the direction of acceleration vector due to gravity. The local coordinate system may be any nearby coordinate system not attached to the rigid body of the device. For example the local coordinate system may refer to a distance within a few hundred yards of the GPS coordinates of the device. The fixed local coordinate system may be referred to herein as local or local earth coordinates.

Turning now to a plurality of communication devices Device A Device B and Device C are shown within a wireless PAN . The devices may be within a few hundred meters of each other. A bearing line is shown representing an imaginary bearing line connecting the GPS location of device to the GPS location of device . Bearing line provides a forward sight bearing from device to device . The location of each communication device may be defined by latitude longitude and elevation GPS coordinates. As such the location of device may be represented as Lat Lon Ele device as Lat Lon Ele and device as Lat Lon Ele . Bearing line defines a bearing vector Bfrom device to device wherein B Lat Lat Lon Lon Ele Ele in local coordinates relative to communication device . Similarly bearing line defines an imaginary bearing line connecting the location of device to the location of device and defines a bearing vector B Lat Lat Lon Lon Ele Ele in local coordinates relative to communication device . While three communication devices are shown in fewer or more devices may communicate amongst each other.

A unit vector ufixed to body frame coordinates in the Y direction is shown at . A heading vector for device may be defined as Y d d ufor a positive real number d. The horizontal spread angle in degrees to and away from the direction of uis shown as . A maximum horizontal spread angle may be defined by a user or an application running on device . In addition the user or application may define constants a and b which are positive real numbers representing a minimum and maximum distance away from the origin of the body frame respectively. Horizontal spread vectors relative to the body frame may be defined as V r 0 r Sin k r Cos k 0 wherein r is a distance from the origin k 180 a r b and shown at and .

Referring now to a three dimensional perspective view of the system shown in is illustrated. The bearing line between device and and the unit vector are again shown. Four vectors may be defined as follows Sin Cos Cos Cos Sin Sin Cos Cos Cos Sin Sin Cos Cos Cos Sin Sin Cos Cos Cos Sin 

The above four vectors define a radial volume enclosing the points defined by m which is defined by the set of points r Sin k Cos k r Cos k Cos k r Sin k such that a r b and . A cross section of this volume illustrated by a dashed line is shown for a fixed value of r. A second cross section is shown for a smaller value of r. The boundaries set by the vectors may cause the space around and centered at device to be divided into two regions a region inside the radial volume defined by the vectors and a region outside of this volume. Accordingly messages received by a receiving communication device can be sorted by whether or not the receiving device is inside or outside of the radial volume at the time of reception.

Communication device further includes a memory such as for storing data and or local versions of applications being executed by processor . Memory can include any type of memory usable by a computer such as random access memory RAM read only memory ROM tapes magnetic discs optical discs volatile memory non volatile memory and any combination thereof.

Further communication device may include a communications component that provides a means for establishing and maintaining communications over one or more communication links with one or more parties utilizing hardware software and services as described herein. Communications component may carry communications between components on communication device as well as between the communication device and external devices such as devices located across a network and or devices serially or locally connected to communication device . For example communications component may include one or more buses and may further include transmit chain components and receive chain components associated with a transmitter and receiver respectively operable for interfacing with external devices. In some aspects communications component may include a radio having a preset or adjustable communication range. The radio may include e.g. a software defined radio SDR . For example radio may operate at a maximum range of approximately 300 meters to enable communications devices within the range to communicate with each other. 300 meters is meant only as an example of setting a maximum range. Other values may be used. In accordance with some aspects of the disclosure communications component may include one or more application programming interfaces APIs for accessing processor and or the data from one or more on board measuring instruments .

Additionally communication device may further include a data store which may include any suitable combination of hardware and or software that provides for mass storage of information and programs employed in connection with aspects described herein. The data store may include a database. For example data store may be a data repository for applications not currently being executed by processor . In some aspects data store may be located within memory .

Communication device may additionally include a user interface component operable to receive inputs from a user of communication device may be further operable to generate outputs for presentation to the user. User interface component may include one or more input devices including but not limited to a keyboard a number pad a mouse a touch sensitive display a navigation key a function key a microphone a voice recognition component a still camera a video camera an audio recorder and or any other mechanism capable of receiving an input or any combination thereof. Further user interface component may include one or more output devices including but not limited to a display a speaker a haptic feedback mechanism a video projector a printer any other mechanism capable of presenting an output or any combination thereof.

Communication device may include a plurality of on board measuring instruments . For example on board measuring instruments may include a magnetometer or compass a gyroscope or gyro a global positioning system GPS unit an accelerometer and or other on board measuring instruments. Communication device may also include message targeting component configured to allow a user to orient a transmitting communication device in such a way as to partition a volume of space into two regions for use in communicating messages. The message targeting component allows messages to be targeted to particular devices.

Message targeting component may also include a calculating and comparison component . Upon receipt of data the calculating and comparison component of a receiving device may use its own GPS coordinates and time in addition to the received data to calculate one or more vectors. A receiving device via its calculating and comparison component may calculate a heading vector Y or the unit vector u the vector u and the vector u where u u u. These vectors are local coordinate representations of u u and u. Alternatively the measured data may be used to calculate the Euler angles of the body frame relative to the local frame. Each receiving device may also compute a bearing vector B. The bearing vector B may be used to calculate the projection vectors P and P of B onto the planes normal to u and u respectively. The projection vectors may be determined by P B B u uand P B B u u. The calculating and comparison component may then calculate P u and P u and use the dot product identity to get P u P u Cos where is the angle subtended between the vectors in the XY plane. As such Cos P u P u . Similarly Cos P u P u may be calculated. The calculating and comparison component may compare the calculated values to the heading angles and spread angles to determine whether it lies within those values and sort the messages accordingly. For example the calculating and comparison component may determine whether the triple B satisfies and a B b where B represents the length of the bearing vector. Messages may be separated into those that satisfy the conditions and those that do not and further processing of the messages may be based on the separation. For example a device may be configured to decode and or read a message if the conditions are satisfied or to discard the message if the conditions are not satisfied.

Turning now to an example of a method for receiving and sorting data is illustrated. As shown at a receiving device within range of a transmitting device receives a data transmission. Upon receipt of the data transmission the receiving device gathers its GPS coordinates and the current time as shown at . As shown at the receiving device computes the bearing vector between itself and the transmitting device and computes the unit vectors. As shown at the receiving device compares the computed values with the heading angles and spread angles transmitted by the transmitting device to determine whether the receiving device lies within the values. If the receiving device falls within the values the message may be processed in accordance with a first set of instructions as shown at . If the receiving device does not fall within the values the message may be processed in accordance with a second set of instructions as shown at . For example the first set of instructions may instruct the device to decode and or read a message while the second set of instructions may instruct the device to discard the message. Other sets of instructions may be used.

While the aspects of the disclosure have been described in terms of exemplary embodiments those skilled in the art will recognize that the aspects described herein can be practiced with modifications in the spirit and scope of the appended claims. These examples given above are merely illustrative and are not meant to be an exhaustive list of all possible designs embodiments applications or modifications of the described aspects of the disclosure.

A communication device as used in this disclosure means any machine device circuit component or module or any system of machines devices circuits components modules or the like which are capable of transmitting and or receiving data according to one or more instructions such as for example without limitation a processor a microprocessor a central processing unit a general purpose computer a super computer a personal computer a laptop computer a palmtop computer a smart phone a cellular telephone a tablet a web book a notebook computer a desktop computer a workstation computer a server or the like.

While the use or a personal area network PAN is described herein aspects of the disclosure may be implemented via other types of networks. A network as used in this disclosure means any combination of software and or hardware including any machine device circuit component or module or any system of machines devices circuits components modules or the like which are capable of transporting signals from one location to another location where the signals may comprise information instructions data and the like. A network may include but is not limited to for example at least one of a local area network LAN a wide area network WAN a metropolitan area network MAN a personal area network PAN a campus area network a corporate area network a global area network GAN a broadband area network BAN or the like any of which may be configured to communicate data via a wireless and or a wired communication medium.

Communications among devices described in this disclosure may be performed of a communication link. A communication link as used in this disclosure means a wired and or wireless medium that conveys data or information between at least two points. The wired or wireless medium may include for example a metallic conductor link a radio frequency RF communication link an Infrared IR communication link an optical communication link or the like without limitation. The RF communication link may include for example WiFi WiMAX IEEE 802.11 DECT 0G 1G 2G 3G or 4G cellular standards Bluetooth and the like. Techniques for implementing such communications links are known to those of ordinary skilled in the art.

The terms including comprising having and variations thereof as used in this disclosure mean including but not limited to unless expressly specified otherwise.

The terms a an and the as used in this disclosure means one or more unless expressly specified otherwise.

Devices that are in communication with each other need not be in continuous communication with each other unless expressly specified otherwise. In addition devices that are in communication with each other may communicate directly or indirectly through one or more intermediaries.

Although process steps method steps algorithms or the like may be described in a sequential order such processes methods and algorithms may be configured to work in alternate orders. In other words any sequence or order of steps that may be described does not necessarily indicate a requirement that the steps be performed in that order. The steps of the processes methods or algorithms described herein may be performed in any order practical. Further some steps may be performed simultaneously.

When a single device or article is described herein it will be readily apparent that more than one device or article may be used in place of a single device or article. Similarly where more than one device or article is described herein it will be readily apparent that a single device or article may be used in place of the more than one device or article. The functionality or the features of a device may be alternatively embodied by one or more other devices which are not explicitly described as having such functionality or features.

A computer readable medium may be used to implement the functions described herein. A computer readable medium as used in this disclosure means any medium that participates in providing data for example instructions which may be read by a computer. Such a medium may take many forms including non volatile media volatile media and transmission media. Non volatile media may include for example optical or magnetic disks and other persistent memory. Volatile media may include dynamic random access memory DRAM . Transmission media may include coaxial cables copper wire and fiber optics including the wires that comprise a system bus coupled to the processor. Transmission media may include or convey acoustic waves light waves and electromagnetic emissions such as those generated during radio frequency RF and infrared IR data communications. Common forms of computer readable media include for example a floppy disk a flexible disk hard disk magnetic tape any other magnetic medium a CD ROM DVD any other optical medium punch cards paper tape any other physical medium with patterns of holes a RAM a PROM an EPROM a FLASH EEPROM any other memory chip or cartridge a carrier wave as described hereinafter or any other medium from which a computer can read.

Various forms of computer readable media may be involved in carrying sequences of instructions to a computer. For example sequences of instruction i may be delivered from a RAM to a processor ii may be carried over a wireless transmission medium and or iii may be formatted according to numerous formats standards or protocols including for example WiFi WiMAX IEEE 802.11 DECT 0G 1G 2G 3G or 4G cellular standards Bluetooth or the like.

