---

title: Non-transitory computer-readable storage medium storing computer program for information processing device, information processing device, and method for controlling information processing device
abstract: An information processing device may receive first communication device identification information for identifying a first communication device that can be communicated using a first wireless communication interface. The information processing device may receive second communication device identification information for identifying a second communication device that can be communicated using a second wireless communication interface. The information processing device may display, on a display unit, a first image indicating the first communication device. The information processing device may display a second image indicating the second communication device identified by the received second communication device identification information. The displaying of the second image may be performed only in a case that particular information has not been received. The particular information may indicate that the second communication device identified by the received second communication device identification information can be communicated using the first wireless communication interface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09609147&OS=09609147&RS=09609147
owner: BROTHER KOGYO KABUSHIKI KAISHA
number: 09609147
owner_city: Nagoya, Aichi
owner_country: JP
publication_date: 20150529
---
This application claims priority to Japanese Patent Application No. 2014 113134 filed on May 30 2014 the contents of which are hereby incorporated by reference into the present application.

The technology disclosed in this specification relates to an information processing apparatus or the like for communicating with devices.

Conventionally a user installs a driver into a personal computer referred to as PC or other such information processing apparatus selects default printer and stores the default printer IP address in the PC. When the user instructs the PC to print the PC uses the stored IP address to send the print data to the default printer. Technology for performing data communications between an information processing apparatus and a device such as a printer like this is known.

However when the information processing apparatus is provided with two or more types of communication interfaces there are cases where it is possible to communicate with a default device using a plurality of communication paths. In cases like this user friendliness may be lost when information related to the default device is not properly displayed.

One technique disclosed in the present application is a non transitory computer readable storage medium storing a computer program for an information processing device configured to communicate with a plurality of devices. The information processing device may comprise a first wireless communication interface configured for communication in accordance with a first communication standard a second wireless communication interface configured for communication in accordance with a second communication standard that is different from the first communication standard a storage a display unit an operation unit and one or more processors. The computer program may include instructions for causing the one or more processors of the information processing device to perform receiving via the first wireless communication interface first communication device identification information for identifying a first communication device that can be communicated using the first wireless communication interface. The computer program may cause the one or more processors to perform receiving via the second wireless communication interface second communication device identification information for identifying a second communication device that can be communicated using the second wireless communication interface. The computer program may cause the one or more processors to perform displaying on the display unit a first image indicating the first communication device identified by the received first communication device identification information. The computer program may cause the one or more processors to perform displaying on the display unit a second image indicating the second communication device identified by the received second communication device identification information. The displaying of the second image may be performed only in a case that particular information has not been received. The particular information may indicate that the second communication device identified by the received second communication device identification information can be communicated using the first wireless communication interface. The computer program may cause the one or more processors to perform accepting via the operation unit an operation for selecting the first image displayed on the display unit. The computer program may cause the one or more processors to perform registering in the storage the first communication device corresponding to the selected first image as a communication target device. The computer program may cause the one or more processors to perform accepting via the operation unit an operation for selecting the second image displayed on the display unit. The computer program may cause the one or more processors to perform registering in the storage the second communication device corresponding to the selected second image as the communication target device.

A wireless LAN I F of the information processing apparatus is provided with a first wireless communication I F and the second wireless communication I F . The first wireless communication I F complies with the Wi Fi registered trademark of the Wi Fi Alliance protocol and is an interface for performing Wi Fi access point and other such wireless communications between devices via a relay device. In the present specification a communication executed using the first Wi Fi wireless communication I F is defined as Wi Fi communication . With a Wi Fi communication it is possible to communicate with a communication destination device using an IP address. Furthermore with Wi Fi communication it is also possible to communicate with a communication destination device using information for identifying the communication destination device and or a MAC address. The first wireless communication I F can perform a Wi Fi communication with a first wireless communication I F of the MFP via a wireless communication the access point and a wireless communication . The first wireless communication I F can also perform a Wi Fi communication with the scanner via the wireless communication the access point and a wireless communication . The first wireless communication I F can also perform a Wi Fi communication with the color laser printer via the wireless communication the access point and a wireless communication .

Alternatively the second wireless communication I F complies with the Wi Fi Direct described as WFD hereinbelow protocol and is an interface for performing a wireless communication between one device and another device which functions as a Wi Fi Direct relay device without going through a relay device. In the present specification a communication executed using the second wireless communication I F is defined as WFD communication . With a WFD communication it is also possible to communicate with a communication destination device using information for identifying the communication destination device e.g. a device ID and or a MAC address. Furthermore with a WFD communication it is also possible to communicate with a communication destination device using an IP address. The second wireless communication I F can perform wireless communications and in the WFD mode directly with each of the MFP the scanner and the color laser printer . Note that with WFD communication and Wi Fi communication the wireless communication is conducted based on the 802.11 standard of The Institute of Electrical and Electronics Engineers inc. referred to as IEEE and equivalent standards for example 802.11a 11b 11g 11n or the like .

The second wireless communication I F may be configured to be used at a lower priority than the first wireless communication I F . This is because there are cases in which Wi Fi communication provides advantages over WFD communication such as lower power consumption and the ability to communicate simultaneously with a large number of devices. The present invention is not limited to a configuration where the first wireless communication I F and the second wireless communication I F are two physically separate interfaces. The concept includes a single interface physically functioning as either the first wireless communication I F or the second wireless communication I F in accordance with software support.

The access point is a device that functions as a Wi Fi access point and has a service set identifier also referred to as SSID . The SSID is a name for identifying the access point . The information processing apparatus can send a print request or a scan request to the MFP the scanner and the color laser printers based on communication via the wireless LAN I F by executing a print scan application .

The information processing apparatus is for example a portable device such as a portable phone or a portable terminal device. The information processing apparatus comprises a display module a touch screen an input I F a wireless LAN I F an NFC I F a central processing unit referred to as CPU a read only memory referred to as ROM a random access memory referred to as RAM and a storage . These elements are mutually connected via an I O port .

The display module receives an image signal output from the CPU and displays an image based on the received image signal. As the display module for example an LCD or an organic EL display may be used. The touch screen is made from a transparent member and disposed so as to cover a surface of the display module . The touch screen detects a position that was touched by a user s finger or the like and outputs the detected position information to the CPU . The input I F is for example an operation button. The wireless LAN I F is an interface for executing a wireless communication in the wireless LAN mode.

The CPU executes programs stored in the storage . The RAM temporarily stores information required for processing to be performed by the CPU . The storage is configured by combining a flash memory a hard disk referred to as HDD a buffer of the CPU and so on. The storage can store image data document data and the like. The storage stores a program . The program includes the print scan application hereinafter indicated as the application and an operating system hereinafter referred to as the OS . The CPU executes processing according to the program .

The storage may be a computer readable storage medium. The computer readable storage medium is a non transitory medium such as a ROM RAM flash memory hard disk etc. A ROM RAM flash memory hard disk etc. are tangible mediums. An electrical signal carrying a program to be downloaded from a server etc. on the Internet is not included in the non transitory medium.

The application is an application for causing the CPU to execute processing such as sending a printing command from the information processing apparatus to the MFP or the like. The OS is a program that provides basic functions and is commonly used by the application and the like. The OS includes programs and the like for conducting a wireless communication with the wireless LAN I F . Moreover the OS is a program for the respective programs to acquire information that was acquired by the various types of hardware or for providing an application programming interface referred to as API for the respective programs to give commands to the various types of hardware.

Moreover the storage stores a default device table TB. The default device table TB is a table for storing various information for identifying a default device. The default device is a device that is set forth each use. The default device is a device that is preferentially used among a plurality of devices when such a plurality of devices capable of executing processing pertaining to a certain use exists.

In the default device table TB a model name a default device type an IP address an SSID a device ID and a MAC address are stored as device related information. The model name is information for identifying each type of device. In a first embodiment the model name for the MFP is Ink MFP . The model name for the scanner device is Scan . The model name for the color laser printer device is Laser .

The default device type includes a Wi Fi default device and a WFD default device. The Wi Fi default device is a default device that is capable of communicating using the aforementioned Wi Fi communication. The WFD default device is a default device that is capable of communicating using the aforementioned WFD communication.

The IP address is an identification number that is allocated to each device and used in Wi Fi communication. The SSID is identification information for identifying an access point to be used when executing a Wi Fi communication with a default device. The device ID is identification information that is allocated to each device and used in a WFD communication. The MAC address is a physical address for identifying each device. The MAC address can be used as information for executing a WFD communication with a default device.

In the example of the default device table TB shown in when device capable of executing processing related to the use of the photo printing exists in a plurality with regard to that use MFP and color laser printer it can be seen that the MFP is set as the device that is preferentially used among the plurality of devices.

The configuration of the MFP is now explained. The MFP mainly comprises a CPU a storage a wireless LAN I F a button input section a panel a printer and a scanner . The wireless LAN I F is provided with a first wireless communication I F and a second wireless communication I F . The first wireless communication I F is an interface for executing a Wi Fi communication. The second wireless communication I F is an interface for executing a WFD communication. These constituent elements are mutually communicable via an I O port .

The CPU executes a program stored in the storage . The storage is configured by combining a RAM a ROM a flash memory an hard disk referred to as HDD a buffer of the CPU and so on. As with the storage the storage may be a computer readable storage medium. The storage stores the program and MIB information . The program includes an OS and the like.

MIB information is information related to the MFP itself and is exported to an external apparatus such as the information processing apparatus . The external apparatus can acquire the MIB information from the MFP in accordance with a request from the external apparatus. The MIB information includes a model name a MAC address Wi Fi status information SSID historical information an IP address and so forth. The model name is information for identifying the MFP . In the present embodiment the model name is Ink MFP . The MAC address is the physical address for identifying the MFP . The Wi Fi status information is various information related to a Wi Fi communication. The Wi Fi status information includes information as to whether or not a power source for the first wireless communication I F is ON and information showing an access point that exists within the communication range of the first wireless communication I F for example. The SSID historical information shows the SSID of an access point where the MFP had been connected in the past. The IP address is information for identifying the MFP .

The button input section is a key for executing the respective functions of the MFP . The button input section may also be configured integrally as a touch screen with the panel . The panel displays the various types of functional information of the MFP . The printer is a portion for executing printing using the image data stored in the storage . The scanner is a portion for executing reading.

In the ensuing explanation the CPU to execute programs such as an application and an operating system is sometimes simply referred to by the program name. For example the indication of application may mean the CPU that executes the application . In the present specification the description the CPU of the information processing apparatus receives various types of information includes the technical meaning the CPU of the information processing apparatus acquires various types of information via the wireless LAN I F . Further the description the CPU of the information processing apparatus transmits various types of information includes the technical meaning the CPU of the information processing apparatus outputs various types of information via the wireless LAN I F .

Here a definition of the words data and information will be explained. In the present specification information is used as a concept superordinate to data . Consequently A data may be rephrased as A information . Further even if the information has a different format as data e.g. text format binary format flag format etc. this is treated as the same information as long as it is recognized that the meaning is the same. For example as long as the device treats this as information indicating that the number of print copies is two parts data of the text format COPY 2 and data of the binary format 10 is the same information. However the aforementioned distinction between information and data is not rigid and exceptions to the rule are also allowed.

Processing in which the CPU controls various components in accordance with the application will be explained below using . The flow in is started in accordance with an execution instruction for a default device registration process being inputted. The default device registration process stores information related to a default device in the default device table TB. The input of an execution instruction for the default device registration process for example may be executed by a user touching a registration process execution button displayed on the display module .

In S the CPU determines whether or not a use designation operation that designates any of the three types of uses i.e. photo printing web printing or scan has been received. For example the application in the display module displays an icon corresponding to each of the aforementioned three types of uses on the display module . Then when a site where an icon is being displayed has been touched the CPU determines that the use denoted by the touched icon has been designated. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

In S the CPU determines whether or not a device search instruction has been inputted. The device search instruction is an execution command for a process that searches for a device that is currently capable of communicating with the information processing apparatus . For example the CPU may determine whether or not a device search button being displayed on the display module has been touched. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

In S the CPU displays a default device selection screen SC on the display module . The default device selection screen SC is for receiving a default device selection. In step S the search for a default device is not complete and as such a device constituting a selection candidate is still not being displayed on the default device selection screen SC.

In S the CPU starts a Wi Fi communication device search thread. The Wi Fi communication device search thread is a program for determining whether or not a Wi Fi communication device that is capable of communicating using the first wireless communication I F is included among a plurality of external devices that is the MFP the scanner and the color laser printer . Specifically the CPU broadcasts a packet to the plurality of external devices requesting that the external devices respond with identification information e.g. an IP address and waits for the identification information responses from the external devices.

In S the CPU starts a WFD communication device search thread. The WFD communication device search thread is a program for determining whether or not a WFD communication device that is capable of communicating using the second wireless communication I F is included among a plurality of external devices that is the MFP the scanner and the color laser printer . Specifically the CPU uses the second wireless communication I F to broadcast a packet requesting that the external devices respond with identification information e.g. an IP address . Then the CPU waits for the identification information responses from the external devices.

In S the CPU determines whether or not Wi Fi communication device identification information has been received. This determination may be made in accordance with whether or not an IP address has been received in response to the packet broadcast in the Wi Fi communication device search thread S . When the determination is affirmative S YES the CPU is able to determine that a Wi Fi communication device is included among the plurality of external devices. Accordingly the processing proceeds to S.

In S the CPU executes a first Wi Fi communication device save process. The content of the first Wi Fi communication device save process will be explained using .

In S the CPU uses the IP address received in S to acquire information related to the Wi Fi communication device from the relevant Wi Fi communication device. The acquisition of information related to the Wi Fi communication device is performed using the first wireless communication I F . The information related to the Wi Fi communication device may be MIB information. In the present embodiment a case in which the MAC address and the model name of the Wi Fi communication device are acquired as the information related to the Wi Fi communication device will be explained as an example.

In S the CPU stores the IP address of the Wi Fi communication device and the MAC address and model name of the Wi Fi communication device in a mutually associated manner in the storage .

In S the CPU displays a Wi Fi communication device image P on the default device selection screen SC as a default device selection candidate. The Wi Fi communication device image P includes the model name of the Wi Fi communication device and information e.g. IP address showing the fact that it is possible to communicate with the Wi Fi communication device using a Wi Fi communication. Then the processing returns to S of .

Alternatively when the determination is negative in S S NO the processing proceeds to S. In S the CPU determines whether or not identification information for identifying a WFD communication device has been received. This determination may be made in accordance with whether or not a device ID has been received in response to the packet that was broadcast in the WFD communication device search thread S . When the determination is affirmative S YES the CPU is able to determine that a WFD communication device is included among the plurality of external devices. Accordingly the processing proceeds to S.

In S the CPU executes a first WFD communication device save process. The contents of the first WFD communication device save process will be explained using .

In S the CPU acquires from the OS the SSID of the access point with which the information processing apparatus is currently connected.

In S the CPU uses the device ID acquired in S to acquire information related to the WFD communication device from the relevant WFD communication device. The acquisition of the information related to the WFD communication device is performed using the second wireless communication I F . The information related to the WFD communication device may be MIB information. This will be explained in detail. The CPU via the second wireless communication I F sends query information requesting the MIB information that the WFD communication device is registering. Then the CPU receives via the second wireless communication I F the MIB information returned in response to the query information. In the present embodiment a case in which a model name a MAC address Wi Fi status information SSID historical information and an IP address are acquired as the MIB information will be explained as an example.

In S the CPU determines whether or not the WFD communication device is also a Wi Fi communication device. In other words a determination is made as to whether or not the device that was determined to be able to execute a WFD communication in S is also able to execute a Wi Fi communication. This determination may be made in accordance with whether or not the same SSID as the SSID acquired in S was acquired in S as the SSID historical information. In a case where the determination is negative S NO the processing proceeds to S.

In S the CPU stores the device ID of the WFD communication device and the information related to the WFD communication device that is the model name the MAC address the Wi Fi status information the SSID historical information and the IP address in a mutually associated manner in the storage . In S the CPU displays a WFD communication device image P on the default device selection screen SC as a default device selection candidate. The WFD communication device image P includes the model name of the WFD communication device and information e.g. device ID and MAC address showing the fact that it is possible to communicate with the WFD communication device using a WFD communication. Then the processing returns to S of .

That is the WFD communication device image P is displayed on the default device selection screen SC S only in a case where SSID historical information denoting the WFD communication device identified by the device ID acquired in S as a Wi Fi communication device is not received S NO . The WFD communication device image P corresponds to second image in the claims. The SSID historical information corresponds to first communication device identification information in the claims. The device ID corresponds to second communication device identification information in the claims. The term only here shall not be interpreted in a limited way. That is the present invention includes the concept that the WFD communication device image P corresponding to a second image is displayed only when from among the two choices of received or not received SSID historical information corresponding to the first communication device identification information was not received. The display of the WFD communication device image P corresponding to the second image is not excluded by an element other than the relevant two choices. An instruction by the user can be cited as an element other than the relevant two choices for example. Furthermore the display of a third image that is different from the second image is also not excluded when SSID historical information corresponding to the first communication device information has been received. A mode for displaying a smaller image e.g. WFD communication device image P of denoting a WFD communication device this corresponds to second communication device in the claims for example is included in modes for displaying the third image. Furthermore a mode for displaying the image denoting a WFD communication device in a position e.g. bottom side of default device selection screen SC of that differs from an original display position e.g. WFD communication device image P display position of and or on a different screen is include in the modes for displaying the third image for example.

In other words the WFD communication device image P this corresponds to second image in the claims is displayed on the default device selection screen SC S in accordance with the SSID historical information this corresponds to response information in the claims denoting that the WFD communication device can execute a communication on the basis of the Wi Fi communication protocol not being received S NO . The expression in accordance with the response information not being received here shall not be interpreted in a limited way. That is the display of the second image is not excluded when response information was received.

Alternatively when a determination was made in S that the WFD communication device is also a Wi Fi communication device S YES the processing proceeds to S. Hereinafter a device that is both a WFD communication device and a Wi Fi communication device will be described as a Wi Fi WFD communication device. In S the CPU determines whether or not a Wi Fi WFD communication device is in a state capable of executing a Wi Fi communication. This determination may be made on the basis of Wi Fi status information acquired in S. When the determination is affirmative S YES the processing proceeds to S.

In S the CPU determines whether or not the Wi Fi WFD communication device is within Wi Fi communication range. This determination may be made in accordance to whether or not various types of information can be acquired from the Wi Fi WFD communication device via the first wireless communication I F . Furthermore this determination may be made on the basis of the Wi Fi status information acquired in S. The processing proceeds to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

Alternatively when it has been determined in S that the Wi Fi WFD communication device is not able to execute a Wi Fi communication S NO the processing proceeds to S. In S the CPU sends a Wi Fi communication start instruction to the Wi Fi WFD communication device. The Wi Fi communication start instruction is information for instructing the Wi Fi WFD communication device to configure a device status that will enable the execution of a Wi Fi communication.

In S the CPU within a prescribed period of time after sending the Wi Fi communication start instruction determines whether or not the IP address of the Wi Fi WFD communication device has been received from the Wi Fi WFD communication device via a WFD communication. The prescribed period of time may be one second for example. The processing proceeds to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

In S the CPU stores the IP address the model name the device ID and the MAC address of the Wi Fi WFD communication device in a mutually associated manner in the storage .

In S the CPU displays the Wi Fi communication device image P on the default device selection screen SC as the image denoting the Wi Fi WFD communication device. Then the processing returns to S of .

When the determination is negative in S of S NO the processing proceeds to S. In S the CPU determines whether or not a fixed period of time has elapsed since starting the Wi Fi communication device search thread or the WFD communication device search thread in S or S. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

In S the CPU ends the Wi Fi communication device search thread started in S. In S the CPU ends the WFD communication device search thread started in S.

In S the CPU determines whether or not a default device selection operation input has been received. The default device selection operation is an operation in which the user touches the image of the device to be selected as the default device from among the Wi Fi communication device image P and the WFD communication device image P being displayed on the default device selection screen SC. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES .

In S the CPU determines whether the selected image is the Wi Fi communication device image P or the WFD communication device image P. In the case of the Wi Fi communication device image P S Wi Fi communication device image the flow proceeds to S. In S the CPU configures the Wi Fi communication device as the default device. Specifically in the default device table TB see the CPU selects the row corresponding to the use selected from among photo printing to scan in S. Then the CPU configures the default device type of the selected row to Wi Fi default device . The CPU also reads the IP address the SSID the device ID and the MAC address of the device configured as the default device from the storage and writes same in the selected default device table TB row. The CPU then ends the flow.

Alternatively when the image selected in S is the WFD communication device image P S WFD communication device image the processing proceeds to S. In S the CPU configures the WFD communication device as the default device. Specifically in the default device table TB the CPU configures the default device type to WFD default device . The other content is the same as the content described above in S and as such an explanation will be omitted. The CPU then ends the flow.

A case in which the MFP is registered as the default device will be explained as an example. Furthermore a case in which the MFP is a Wi Fi WFD communication device capable of executing both a WFD communication and a Wi Fi communication will be explained. In this case two images e.g. a Wi Fi communication device image P and a WFD communication device image P are displayed as images denoting a single MFP as in the default device selection screen SC shown in . The Wi Fi communication device image P here is an image denoting the fact that the MFP is a Wi Fi communication device. The WFD communication device image P is an image denoting the fact that the MFP is a WFD communication device. In a case like this there is a danger that a user who is trying to select the MFP as the default device will be confused as to which of the images i.e. the Wi Fi communication device image P or the WFD communication device image P he should select. That is there are cases where user friendliness is lost because the default device related information is not properly displayed.

According to the application described in the present specification the CPU can start the Wi Fi communication device search thread S and the WFD communication device search thread S when a device search commences S Y . Then when it has been determined in advance that the MFP is a Wi Fi communication device S YES the CPU can display the Wi Fi communication device image P denoting that the MFP is a Wi Fi communication device on the default device selection screen SC S Refer to . Thereafter when it has been determined that the MFP is also a WFD communication device post loop S YES the CPU can continue to display the Wi Fi communication device image P on the default device selection screen SC without displaying the WFD communication device image P denoting that the MFP is a WFD communication device on the default device selection screen SC S Refer to . That is when the MFP is a Wi Fi WFD communication device the CPU can display the MFP on the display module as a Wi Fi communication device rather than as a WFD communication device. When the MFP is a Wi Fi WFD communication device this makes it possible to prevent a situation in which a plurality of images denoting the MFP is displayed on the default device selection screen Refer to . Accordingly it becomes possible to execute a proper display so as not to confuse the user.

The CPU determines whether a Wi Fi communication device and or a WFD communication device are included among a plurality of external devices by repeatedly looping S to S for a fixed period of time. However there is no way of telling which determination i.e. the determination that a Wi Fi communication device is included S YES or the determination that a WFD communication device is included S YES will be concluded first. This is because the time required for these determinations to be concluded is determined by a large number of undetermined parameters such as the state of the external device e.g. sleep mode or not the network status and the communication speed. In a case like this it is difficult to prevent a plurality of images denoting the MFP from being displayed on the default device selection screen Refer to .

According to the application described in the present specification when the CPU has determined that the MFP is a WFD communication device S YES prior to determining whether or not the MFP is a Wi Fi communication device the CPU can wait for a prescribed time period before displaying the WFD communication device image P on the default device selection screen SC S . Then while waiting to display the WFD communication device image P the CPU can confirm whether or not the MFP is also a Wi Fi communication device. Specifically the CPU can use the second wireless communication I F to query the MFP as to whether or not it is possible to execute a communication using the first wireless communication I F S . Then the CPU can confirm whether or not the MFP is also a Wi Fi communication device by acquiring MIB information as the SSID historical information of the MFP S and comparing same to the SSID of the access point with which the information processing apparatus is currently connected S .

Then when it is not possible to confirm that the MFP is also a Wi Fi communication device within the prescribed time period S NO the CPU can display the WFD communication device image P on the default device selection screen SC Refer to . Alternatively when it was possible to confirm that the MFP is also a Wi Fi communication device within the prescribed time period S YES the CPU can display the Wi Fi communication device image P on the default device selection screen SC Refer to . This makes it possible to prevent a plurality of images that is the Wi Fi communication device image P and the WFD communication device image P denoting a single MFP from being displayed on the default device selection screen Refer to even when a determination that the MFP is a WFD communication device was executed earlier than a determination that the MFP is a Wi Fi communication device.

According to the application described in the present specification in a case where the MFP which has been determined to be a WFD communication device was thereafter determined to also be a Wi Fi communication device S YES the CPU can send a Wi Fi communication start instruction to the MFP S when a determination has been made that the MFP is not able to execute a Wi Fi communication S NO . The Wi Fi communication start instruction is information instructing the MFP to configure the MFP to be able to execute a Wi Fi communication e.g. to turn ON the first wireless communication I F . This makes it possible to send the Wi Fi communication start instruction to the MFP using a WFD communication. That is it becomes possible to use a low priority WFD communication to achieve a configuration that enables the execution of a high priority Wi Fi communication.

According to the application described in the present specification the CPU can display an IP address which is information used in a Wi Fi communication in the Wi Fi communication device image P area A . This makes it possible to make the user aware of the fact that the Wi Fi communication device image P denotes a device that is capable of a Wi Fi communication. The CPU can also display a device ID which is information used in a WFD communication in the WFD communication device image P area A . This makes it possible to make the user aware of the fact that the WFD communication device image P denotes a device that is capable of a WFD communication.

According to the application described in the present specification the CPU can confirm whether or not the MFP which has been determined to be a WFD communication device is also a Wi Fi communication device S by using the SSID for identifying the access point with which the information processing apparatus is currently connected S and the SSID historical information for identifying an access point with which the MFP was connected in the past S . This confirmation process can be executed reliably since the SSID is commonly used information.

The first embodiment described above was a configuration for parallelly executing the Wi Fi communication device search thread S and the WFD communication device search thread S . In a second embodiment a configuration for serially executing a Wi Fi communication device search thread and a WFD communication device search thread will be explained using . Furthermore the configuration of the network used in the second embodiment has already been explained in the first embodiment and therefore an explanation will be omitted here.

The contents of S to S of are the same as the contents of S to S of and therefore explanations will be omitted. In S the CPU starts a Wi Fi communication device search thread. Since the content of S is the same as the content of S of an explanation will be omitted. In S the CPU determines whether or not Wi Fi communication device identification information has been received. Since the content of S is the same as the content of S of an explanation will be omitted. When the determination in S is affirmative S YES the processing proceeds to S.

In S the CPU executes a first Wi Fi communication device save process. The contents of the first Wi Fi communication device save process has already been explained using and therefore an explanation will be omitted.

Alternatively when the determination in S is negative S NO the processing proceeds to S. In S the CPU determines whether or not a fixed period of time has elapsed since starting the Wi Fi communication device search thread in S. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES . In S the CPU ends the Wi Fi communication device search thread started in S. Then the processing proceeds to S.

In S the CPU starts a WFD communication device search thread. In S the CPU determines whether or not WFD communication device identification information has been received. Since the content of S is the same as the content of S described above an explanation will be omitted. When the determination is affirmative S YES the processing proceeds to S.

In S the CPU executes a second WFD communication device save process. The contents of the second WFD communication device save process will be explained using . In S the CPU using the device ID acquired in S acquires information related to a WFD communication device from the WFD communication device. The content of S is the same as the content of S explained above and therefore an explanation will be omitted.

In S the CPU stores in the storage the device ID of the WFD communication device and information related to the WFD communication device that is a model name a MAC address and so forth in a mutually associated manner.

In S the CPU determines whether or not the WFD communication device detected in S is also a Wi Fi communication device. This determination may be made in accordance with whether or not the MAC address acquired in S and the MAC address acquired in S are a match. When the determination is negative S NO the processing proceeds to S. In S the CPU displays the WFD communication device image P on the default device selection screen SC as a default device selection candidate. Then the processing returns to S.

Alternatively when the determination in S is affirmative S YES the processing proceeds to S. In S the CPU displays the Wi Fi communication device image P on the default device selection screen SC. Then the processing returns to S.

Alternatively when the determination in S is negative S NO the processing proceeds to S. In S the CPU determines whether or not a fixed period of time has elapsed since starting the WFD communication device search thread in S. The processing returns to S when the determination is negative S NO and proceeds to S when the determination is affirmative S YES . In S the CPU ends the WFD communication device search thread started in S. Then the processing proceeds to S of . The contents of S and beyond have already been explained and therefore explanations will be omitted.

A case in which the MFP is registered as the default device will be explained as an example. Furthermore a case in which the MFP is a Wi Fi WFD communication device that is capable of executing both a WFD communication and a Wi Fi communication will be explained. According to the application described in the present specification the CPU can start the Wi Fi communication device search thread S when a device search is commenced S YES . In the Wi Fi communication device search thread the MFP is detected as a Wi Fi communication device S YES and therefore a first Wi Fi communication device save process S is executed Refer to . The Wi Fi communication device image P denoting the MFP is displayed on the default device selection screen SC S Refer to . Then a WFD communication device search thread S is started in accordance with the Wi Fi communication device search thread having ended. In the WFD communication device search thread the MFP is detected as a WFD device S YES and therefore a second WFD communication device save process S is executed. Since the MFP is a Wi Fi WFD communication device S YES the CPU can maintain the state in which the Wi Fi communication device image P is displayed on the default device selection screen SC as the image denoting the MFP Refer to .

In the application related to the second embodiment the CPU can execute a WFD communication device search thread S after completing the Wi Fi communication device search thread S and determining whether or not a Wi Fi communication is possible. Therefore in the WFD communication device search thread the need to execute the process for confirming whether or not a Wi Fi communication is possible S and or the process for making a Wi Fi communication possible S can be eliminated. This makes it possible to do away with the need for the MFP or other such external device to store the MIB information since there is no need to acquire MIB information that includes the Wi Fi status information and so forth. This makes it possible to simplify the system configuration.

In a third embodiment a configuration for executing a second Wi Fi communication device save process in place of the first Wi Fi communication device save process S and for executing a second WFD communication device saved process in place of the first WFD communication device save process S will be explained. The second WFD communication device save process has been explained in the second embodiment and therefore an explanation will be omitted here. In the third embodiment only the differences with the first embodiment will be explained.

The contents of second Wi Fi communication device save process executed in S will be explained using . The contents of S and S of are the same as the contents of S and S of and therefore explanations will be omitted.

In S the CPU determines whether or not there exists a device that has been detected as a WFD device. This determination may be made in accordance with whether or not the information denoting the WFD communication device e.g. MAC address was stored in the storage S . When the determination is negative S NO the processing proceeds to S. In S the CPU displays the Wi Fi communication device image P on the default device selection screen SC as the image denoting the device that was detected as the Wi Fi communication device in S. Then the processing returns to S.

Alternatively when the determination made in S was affirmative S YES the processing proceeds to S. In S the CPU determines whether or not the device that was detected as the Wi Fi communication device in S is also a WFD communication device. In other words the CPU determines whether or not the device that was determined to be able to execute a Wi Fi communication in S is also capable of executing a WFD communication. This determination may be made in accordance with whether or not the MAC address acquired in S matches the MAC address being stored in the storage . When the determination is negative S NO the processing proceeds to S. Alternatively when the determination is affirmative S YES the CPU determines that the WFD communication device image P is already being displayed on the default device selection screen SC as the image denoting the device detected as the Wi Fi communication device in S. Accordingly the processing proceeds to S.

In S the CPU acquires from the OS the display position of the WFD communication device image P on the default device selection screen SC.

In S the CPU ends the display of the WFD communication device image P. The processing then returns to S. Various modes are included in a configuration for ending the display of the WFD communication device image P. For example the CPU may display the Wi Fi communication device image P in the position where the WFD communication device image P is being displayed as the image denoting the device that was detected in S. In accordance with this the WFD communication device image P is replaced by the Wi Fi communication device image P. Furthermore a mode for displaying a smaller WFD communication device image P a mode for displaying the WFD communication device image P in a position that differs from the original display position and a mode for displaying the WFD communication device image P on a different screen are included for example.

A case in which the MFP is registered as the default device will be explained as an example. A case in which the MFP is a Wi Fi WFD communication device that is capable of executing both a WFD communication and a Wi Fi communication will also be explained. Furthermore a case in which the MFP is first detected as a WFD communication device S YES and thereafter detected as a Wi Fi communication device S YES will be explained. When the MFP is detected as a WFD communication device S YES the WFD communication device image P is displayed S as the image denoting the MFP without waiting for a determination as to whether or not the MFP is also a Wi Fi communication device Refer to . Thereafter when the MFP is also detected as a Wi Fi communication device S YES a determination is made that the device detected as the Wi Fi communication device is also a WFD communication device S YES . Accordingly the WFD communication device image P which had been displayed first is replaced by the Wi Fi communication device image P S Refer to . This makes it possible for the CPU to display the WFD communication device image P as the image denoting the MFP and to replace the WFD communication device image P with the Wi Fi communication device image P in accordance with having determined that the MFP is also a Wi Fi communication device. Therefore the display of a plurality of images denoting the MFP on the default device selection screen Refer to can be prevented regardless of the execution sequence of the determination as to whether a device is a WFD communication device and the determination as to whether the MFP is a Wi Fi communication device. Accordingly it becomes possible to execute a proper display so as not to confuse the user.

While specific embodiments of the present invention have been described in detail above such description is for illustrative purposes only and is not intended to limit the scope and claims of the invention. Techniques described in the claims of the invention include various modifications and changes made to the specific examples illustrated above. Modifications will be described below.

There may be a variety of methods for determining whether or not a WFD communication device is also a Wi Fi communication device in S. For example the CPU may execute this determination by comparing the MAC addresses. Specifically the CPU may execute the determination in accordance with whether or not the MAC address acquired in S and the MAC address of the Wi Fi communication device stored in the storage are a match. The MAC address of the Wi Fi communication device is information that is stored in the storage in S. Because a MAC address is a physical address that can uniquely identify an external device and in addition is commonly used information the MAC address makes it possible to reliably execute a determination process.

In S and S a configuration that acquires information from an external device is not limited to a configuration that uses MIB information. The configuration may be such that an external device replies with various information as a response to an information acquisition request from the information processing apparatus .

The condition for sending a Wi Fi communication start instruction in S can be configured in a variety of ways. For example the CPU may send a Wi Fi communication start instruction S when it has been determined that a Wi Fi WFD communication device is able to execute a Wi Fi communication S YES and a history of a Wi Fi communication previously executed with the Wi Fi WFD communication device remains in the storage . This makes it possible to prevent an unnecessary Wi Fi communication start instruction from being sent.

In S the present invention may also have a mode for receiving the IP address of a Wi Fi WFD communication device via a Wi Fi communication.

When displaying an image denoting a Wi Fi WFD communication device on the default device selection screen SC the CPU may display both the Wi Fi communication device image P and the WFD communication device image P S S and so forth . In this case the Wi Fi communication device image P may be displayed in a preferential manner over the WFD communication device image P. A configuration for displaying the Wi Fi communication device image P in a highlighted manner e.g. enlarged display displayed in bold face type and so forth can be cited as a specific example of a preferential display. A configuration for arranging the Wi Fi communication device image P more toward the beginning side e.g. upper side of a scroll down screen than the WFD communication device image P can also be cited.

When displaying an image denoting a Wi Fi WFD communication device on the default device selection screen SC the CPU may display inside the image both information denoting that the device is capable of a Wi Fi communication e.g. IP address and information denoting that the device is capable of a WFD communication e.g. device ID . The CPU may also display inside the image information denoting that the Wi Fi WFD communication device communicates using a Wi Fi communication.

In S the CPU stores the information needed for executing a WFD communication e.g. device ID MAC address in the storage even in a case where a Wi Fi communication is executed with a Wi Fi WFD communication device. This makes it possible to switch over to a WFD communication using the device ID and MAC address in a case where a Wi Fi communication is not able to be used with the Wi Fi WFD communication device. This enables the communication system to be provided with redundancy.

A plurality of default devices may be configured for each use. For example there may be a first default device and a second default device. The application may execute a communication with the first default device on a priority basis and may communicate with the second default device when it is not possible to communicate with the first default device. Then a Wi Fi communication device may be registered in the default device table TB as the first default device and a WFD communication device may be registered in the default device table TB as the second default device.

The process for determining whether or not a default device is within Wi Fi communication range S can be omitted. In this case when the determination in S is affirmative the processing may advance to S. The process for sending a Wi Fi communication start instruction S can be omitted. In this case when the determination is negative in S the processing may proceed to S. From the above generally speaking The information processing apparatus may comprise at least receiving first communication device identification information receiving second communication device identification information displaying a first image displaying a second image accepting an operation for selecting the first image registering the first communication device accepting an operation for selecting the second image and registering the second communication device . As a specific example the information processing apparatus may execute at least S S S S S and S.

The present invention is not limited to a configuration for registering a default device in the default device table TB in S and S. For example the user can register a default device by operating the touch panel and inputting an IP address and the like.

The timing at which the application acquires from the OS the SSID of the network with which the information processing apparatus is currently connected is not limited to the timing of S. For example the SSID may be acquired at the timing at which a print preview is displayed and or at the timing at which the application is started.

The value of the IP address and the character string of the SSID used in this embodiment are merely examples and various values and character strings may be used.

The display example of the display module of to is merely an example. The display module may also display images of various display modes.

The model name may be anything so as long as they are able to differentiate the devices for instance they may be configured only from symbols without including numbers. Moreover a name such as the device name capable of differentiating the devices may be used in substitute for the model name.

The information processing apparatus may also be configured so that an external memory such as a memory card can be connected thereto. Furthermore in substitute for the storage a configuration of storing the various types of data in an external memory can be adopted.

While the MFP was explained as an example of the image processing apparatus the configuration is not limited thereto. The configuration may also adopt a sewing machine that performs stitching or quilting of a predetermined image based on instruction data. The configuration may also adopt a sewing machine that performs decorative stitching or sewing to form work pieces or products based on image data. The configuration may also adopt a 3D printer that generates 3D images via spraying or machining based on instruction data or the like. The configuration may also adopt work piece manufacturing equipment or product manufacturing equipment that forms work pieces or products via spraying or machining based on image data or the like. As an example of image data 3D image data or 3D CAD data may be used. The configuration may also adopt a scanner that forms image data based on output data from a sensor which optically or electrically detects the profile of an object or based on output data from a sensor that is mounted on the object. The configuration may also adopt a scanner creates data indicating the shape or movement of an object based on the output from a sensor. As an example of image data moving image data or 3D image data may be used.

Each program may be constituted by a single program module or by a plurality of program modules. Each example may adopt another replaceable configuration which is within the context of the present invention. Adoptable configurations include a computer the CPU or the like which executes processing based on a program the print scan application or the like a computer which executes processing based on a program other than an image processing program such as an operating system and other applications a hardware configuration the touch screen or the like which operates according to an instruction by a computer and a configuration in which a computer and a hardware configuration work in conjunction with each other. Obviously adoptable configurations also include a computer which executes processing by coupling processing based on a plurality of programs and a hardware configuration which operates according to an instruction by a computer which executes processing by coupling processing based on a plurality of programs.

